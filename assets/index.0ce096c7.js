var e,t,n,i,r,o,s,a,l,c,d,u,h,p=Object.defineProperty,f=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&y(e,n,t[n]);if(m)for(var n of m(t))v.call(t,n)&&y(e,n,t[n]);return e},b=(e,t)=>f(e,g(t)),x=(e,t)=>{var n={};for(var i in e)_.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&m)for(var i of m(e))t.indexOf(i)<0&&v.call(e,i)&&(n[i]=e[i]);return n},C=(e,t,n)=>(y(e,"symbol"!=typeof t?t+"":t,n),n);import{j as k,R as E,a as S,u as I,b as O,r as T,c as M,d as N,e as A,T as R,D,f as P,I as L,g as U,h as F,B,i as j,k as V,l as z,m as K,n as W,o as H,t as $,p as q,q as Y,s as G,v as X,C as J,w as Q,x as Z,y as ee,z as te,A as ne,E as ie,F as re,G as oe,H as se,J as ae,K as le,L as ce,M as de,N as ue,S as he,O as pe,P as fe,Q as ge,U as me,V as _e,W as ve,X as ye,Y as we,Z as be,_ as xe,$ as Ce,a0 as ke,a1 as Ee,a2 as Se,a3 as Ie,a4 as Oe,a5 as Te,a6 as Me,a7 as Ne,a8 as Ae,a9 as Re,aa as De,ab as Pe,ac as Le,ad as Ue,ae as Fe,af as Be,ag as je,ah as Ve,ai as ze,aj as Ke,ak as We,al as He,am as $e,an as qe,ao as Ye,ap as Ge,aq as Xe,ar as Je,as as Qe,at as Ze,au as et,av as tt,aw as nt,ax as it,ay as rt,az as ot,aA as st,aB as at,aC as lt,aD as ct,aE as dt,aF as ut,aG as ht,aH as pt,aI as ft,aJ as gt,aK as mt,aL as _t,aM as vt,aN as yt,aO as wt,aP as bt,aQ as xt,aR as Ct,aS as kt,aT as Et,aU as St,aV as It,aW as Ot,aX as Tt,aY as Mt,aZ as Nt,a_ as At,a$ as Rt,b0 as Dt,b1 as Pt,b2 as Lt,b3 as Ut,b4 as Ft,b5 as Bt,b6 as jt,b7 as Vt,b8 as zt}from"./vendor.92282841.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class Kt{constructor(e,t=[],n=!1){C(this,"ctor"),C(this,"staticArguments"),C(this,"supportsDelayedInstantiation"),this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}function Wt(e){return void 0===e}function Ht(e){return Wt(e)||null===e}C(Kt,"__SyncDescriptorBrand");const $t=e=>"string"==typeof e,qt=e=>"function"==typeof e,Yt=e=>null!==e&&"object"==typeof e,Gt=Array.isArray;function Xt(e){return $t(e)?Number.isInteger(parseInt(e)):Number.isInteger(e)}function Jt(e){try{JSON.parse(e)}catch(t){return!1}return!0}function Qt(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}let Zt;if(Reflect.has(globalThis,"__$$diMap"))Zt=Reflect.get(globalThis,"__$$diMap");else{const e=new Map;Zt=e,Reflect.set(globalThis,"__$$diMap",e)}let en;if(Reflect.has(globalThis,"__$$idMap"))en=Reflect.get(globalThis,"__$$idMap");else{const e=new Map;en=e,Reflect.set(globalThis,"__$$idMap",e)}function tn(e){const t=e.name;return Zt.get(t)||[]}const nn=on("instantiationService");function rn(e,t,n,i){const r=t.name,o=Zt.get(r);if(Ht(o))Zt.set(r,[{id:e,index:n,optional:i}]);else{-1===function(e,t){const n=e.length;if(0===n)return-1;for(let i=0;i<n;i++)if(t(e[i]))return i;return-1}(o,(t=>t.id.toString()===e.toString()))&&o.push({id:e,index:n,optional:i})}}function on(e){if(en.has(e))return en.get(e);const t=function(e,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");rn(t,e,i,!1)};return t.toString=function(){return e},Reflect.set(t,"__brand",e),en.set(e,t),t}class sn{constructor(...e){C(this,"_entries",new Map);for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}dispose(){for(const[e,t]of this._entries){if(e!==nn&&!(t instanceof Kt)){const e=Reflect.get(t,"dispose");qt(e)&&e.call(t)}this._entries.delete(e)}}}let an;!function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});an=t=>{const n=setTimeout((()=>t(e)));let i=!1;return{dispose(){i||(i=!0,clearTimeout(n))}}}}else an=(e,t)=>{const n=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(n))}}}}();class ln{constructor(e){C(this,"_executor"),C(this,"_handle"),C(this,"_didRun",!1),C(this,"_value"),C(this,"_error"),this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=an((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class cn{constructor(){C(this,"_isOpen"),C(this,"_promise"),C(this,"_completePromise"),this._isOpen=!1,this._promise=new Promise(((e,t)=>{this._completePromise=e}))}isOpen(){return this._isOpen}open(e){this._isOpen=!0,this._completePromise(e)}wait(){return this._promise}}class dn{constructor(e,t){C(this,"_token"),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}function un(e){return new Promise((t=>{setTimeout(t,e)}))}const hn=new class{constructor(){C(this,"unexpectedErrorHandler"),C(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function pn(e){(function(e){if(e instanceof fn)return!0;return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message})(e)||hn.onUnexpectedError(e)}class fn extends Error{constructor(){super("Canceled"),this.name=this.message}}class gn{constructor(e){C(this,"data"),C(this,"incoming",new Map),C(this,"outgoing",new Map),this.data=e}}class mn{constructor(e){C(this,"_nodes",new Map),this._hashFn=e}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new gn(e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const e=this._findCycle(i,t);if(e)return e;t.delete(n)}}insertVertex(e){this.lookupOrInsertNode(e)}topologicalSort(){const e=[],t=new Set,{_hashFn:n}=this;function i(r,o=null){if(t.has(r))return;const s=n(r.data),a=Array.isArray(o)?o:[];a.push(r),t.add(r),r.outgoing.forEach((e=>{if(-1!==a.indexOf(e)){const t=n(e.data);throw new Error("Circular chain found: "+s+" must be before "+t+" due to a direct order specification, but "+t+" must be before "+s+" based on other specifications.")}i(e,a.slice())})),e.unshift(r.data)}return this._nodes.forEach((e=>i(e))),e}}class _n extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!=(t=e.findCycleSlow())?t:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}function vn(e){return!!e&&Reflect.has(Object.getPrototypeOf(e).constructor,"__SyncDescriptorBrand")}class yn{constructor(e=new sn,t=!1,n){C(this,"_services"),C(this,"_strict"),C(this,"_parent"),C(this,"_activeInstantiations",new Set),this._services=e,this._strict=t,this._parent=n,this._services.set(nn,this)}createChild(e){return new yn(e,this._strict,this)}invokeFunction(e,...t){const n=Cn.traceInvocation(e);let i=!1;try{return e({get:e=>{if(i)throw(t="service accessor is only valid during the invocation of its target method")?new Error(`Illegal state: ${t}`):new Error("Illegal state");var t;const r=this._getOrCreateServiceInstance(e,n);if(!r)throw new Error(`[invokeFunction] unknown service '${e}'`);return r}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return vn(e)?(n=Cn.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Cn.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=tn(e).sort(((e,t)=>e.index-t.index)),r=[];for(const s of i){const t=this._getOrCreateServiceInstance(s.id,n);t||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${s.id}.`,!1),r.push(t)}const o=i.length>0?i[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const n=o-t.length;t=n>0?t.concat(new Array(n)):t.slice(0,o)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(vn(this._services.get(e)))this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const n=this._getServiceInstanceOrDescriptor(e);return vn(n)?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new mn((e=>e.id.toString()));let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const t=o.pop();if(i.lookupOrInsertNode(t),r++>1e3)throw new _n(i);for(const n of tn(t.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(n.id);if(r||this._throwIfStrict(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`,!0),vn(r)){const e={id:n.id,desc:r,_trace:t._trace.branch(n.id,!0)};i.insertEdge(t,e),o.push(e)}}}for(;;){const e=i.roots();if(0===e.length){if(!i.isEmpty())throw new _n(i);break}for(const{data:t}of e){if(vn(this._getServiceInstanceOrDescriptor(t.id))){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}i.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,r){if(vn(this._services.get(e)))return this._createServiceInstance(t,n,i,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const n=new ln((()=>this._createInstance(e,t,i)));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];const i=n.value;let r=i[t];return"function"!=typeof r||(r=r.bind(i),e[t]=r),r},set:(e,t,i)=>(n.value[t]=i,!0)})}return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(t),this._strict)throw new Error(e)}get services(){const e=this;return{get:t=>e.invokeFunction((e=>e.get(t)))}}dispose(){}store(e,t){this._services.set(e,t)}}var wn,bn;(bn=wn||(wn={}))[bn.Creation=0]="Creation",bn[bn.Invocation=1]="Invocation",bn[bn.Branch=2]="Branch";const xn=class{constructor(e,t){C(this,"_start",Date.now()),C(this,"_dep",[]),this.type=e,this.name=t}static traceInvocation(e){return xn._None}static traceCreation(e){return xn._None}branch(e,t){const n=new xn(2,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;xn._totals+=e;let t=!1;const n=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(n,i){const r=[],o=new Array(n+1).join("\t");for(const[s,a,l]of i._dep)if(a&&l){t=!0,r.push(`${o}CREATES -> ${s}`);const i=e(n+1,l);i&&r.push(i)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${xn._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(n.join("\n"))}};let Cn=xn;C(Cn,"_None",new class extends xn{constructor(){super(-1,null)}stop(){}branch(){return this}}),C(Cn,"_totals",0);const kn=on("lifecycleService");var En,Sn;function In(e,t){for(const n of e)if(t(n))return n}function On(...e){throw e.length&&console.error(...e),new Error("not reached")}function Tn(...e){throw e.length&&console.error(...e),new Error("not implemented")}(Sn=En||(En={}))[Sn.Starting=1]="Starting",Sn[Sn.Bootstraped=2]="Bootstraped",Sn[Sn.EditorCreated=3]="EditorCreated",Sn[Sn.ExtensionActivated=4]="ExtensionActivated",Object.freeze([]);var Mn=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,An=(e,t)=>(n,i)=>t(n,i,e);let Rn=class{constructor(e,t){C(this,"pending",[]),this.instantiationService=e,this.lifecycleService=t}registerService(e,t,...n){if(this.lifecycleService.phase!==En.Starting)throw new Error("400");this.pending.push({desc:new Kt(t,n),id:e})}initServices(){const e=new mn((e=>{const t=In(this.pending,(t=>t.desc===e));return t||On(),t.id.toString()}));for(const{desc:t}of this.pending){const n=tn(t.ctor);e.insertVertex(t),n.length&&n.forEach((n=>{const i=In(this.pending,(e=>e.id===n.id));if(i)e.insertEdge(i.desc,t);else{this.instantiationService.invokeFunction((e=>e.get(n.id)))||On()}}))}e.topologicalSort().forEach((e=>{if(e.ctor===this.instantiationService.__proto__.constructor)return;const t=In(this.pending,(t=>t.desc===e)).id;this.instantiationService.store(t,this.instantiationService.createInstance(e))}))}invokeFunction(e,...t){if(this.lifecycleService.phase<En.Bootstraped)throw new Error("400");return this.instantiationService.invokeFunction(e,...t)}get services(){if(this.lifecycleService.phase<En.EditorCreated)throw new Error("400");return this.instantiationService.services}get fundamentalServices(){return this.instantiationService.services}};Rn=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Nn(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Mn(t,n,o),o})([An(0,nn),An(1,kn)],Rn);var Dn="_rootLayout_o2nlw_1";function Pn(e){return k("div",{className:Dn,children:e.children})}var Ln,Un,Fn,Bn,jn,Vn,zn,Kn,Wn,Hn,$n,qn,Yn,Gn,Xn,Jn,Qn,Zn,ei={meta:{title:"落地页"},nodes:[{id:"root",props:{}},{id:"comp_PC_01",props:{},meta:{id:"1164:6154",label:"PC_01",tagName:"DIV",componentType:"Page"},from:"root",order:"0.1"},{id:"section_3",props:{},from:"comp_PC_01",meta:{id:"1164:6155",label:"Frame 1000008930",tagName:"SECTION",componentType:"Section"},order:"0.0001"},{id:"group_5",from:"section_3",props:{},meta:{id:"1164:6156",label:"注册",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_7",from:"group_5",props:{},meta:{id:"1164:6157",label:"Frame 1000001554",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_9",from:"group_7",props:{},meta:{id:"I1164:6157;1662:44776",label:"Frame 36846357",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_11",from:"group_9",props:{},meta:{id:"I1164:6157;1662:44777",label:"Frame 36846366",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_13",from:"group_11",props:{},meta:{id:"I1164:6157;1662:44778",label:"Frame 36846367",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_15",from:"group_13",props:{},meta:{id:"I1164:6157;1662:44781",label:"表单",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_17",from:"group_15",props:{},meta:{id:"I1164:6157;1662:44782",label:"标题",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_19",from:"group_15",props:{},meta:{id:"I1164:6157;1662:44787",label:"其他方式登录",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_21",from:"group_19",props:{},meta:{id:"I1164:6157;1662:44792",label:"Frame 36844870",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_23",from:"group_21",props:{},meta:{id:"I1164:6157;1662:44793",label:"表单",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_25",from:"group_23",props:{},meta:{id:"I1164:6157;1865:54277",label:"切换",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_27",from:"group_25",props:{},meta:{id:"I1164:6157;1865:54277;1865:52652",label:"Frame 2060",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_29",from:"group_23",props:{},meta:{id:"I1164:6157;1662:44800",label:"输入方式",tagName:"DIV",componentType:"Container"},order:"0.333"},{id:"group_31",from:"group_23",props:{},meta:{id:"I1164:6157;1662:44801",label:"验证",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"group_33",from:"group_31",props:{},meta:{id:"I1164:6157;1662:44801;1662:45296",label:"Frame 36846358",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_35",from:"group_33",props:{},meta:{id:"I1164:6157;1662:44801;1662:45298",label:"图标-不显示密码",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_37",from:"group_21",props:{},meta:{id:"I1164:6157;1662:44802",label:"按钮",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_39",from:"group_37",props:{},meta:{id:"I1164:6157;1865:55527",label:"Frame 1000001580",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_41",from:"group_39",props:{},meta:{id:"I1164:6157;1662:44804",label:"Frame 2099",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_43",from:"group_37",props:{},meta:{id:"I1164:6157;1887:28799",label:"banner",tagName:"DIV",componentType:"Container"},order:"0.333"},{id:"group_45",from:"group_43",props:{},meta:{id:"I1164:6157;1887:28799;1885:82087",label:"Frame 1000001597",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_47",from:"group_45",props:{},meta:{id:"I1164:6157;1887:28799;1885:82085",label:"Frame 1000001596",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_49",from:"group_47",props:{},meta:{id:"I1164:6157;1887:28799;1885:82084",label:"Frame 1000001595",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_51",from:"group_47",props:{},meta:{id:"I1164:6157;1887:28799;1885:82058",label:"Mask group",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_53",from:"group_43",props:{},meta:{id:"I1164:6157;1887:28799;1885:82187",label:"Frame 1000001601",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_55",from:"group_53",props:{},meta:{id:"I1164:6157;1887:28799;1885:82161",label:"Frame 1000001600",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_57",from:"group_55",props:{},meta:{id:"I1164:6157;1887:28799;1885:82162",label:"主体",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_59",from:"group_37",props:{},meta:{id:"I1164:6157;1872:60529",label:"其他方式登录",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"group_61",from:"group_59",props:{},meta:{id:"I1164:6157;1872:60530",label:"Frame 1990",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_63",from:"group_59",props:{},meta:{id:"I1164:6157;1872:60534",label:"white-logo",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_65",from:"group_63",props:{},meta:{id:"I1164:6157;1872:60540",label:"Group 2035",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_67",from:"group_63",props:{},meta:{id:"I1164:6157;1872:60535",label:"Group 2034",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"group_69",from:"group_67",props:{},meta:{id:"I1164:6157;1872:60536",label:"White-Logo-Square-",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_71",from:"group_67",props:{},meta:{id:"I1164:6157;1872:60538",label:"google备份",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_73",from:"section_3",props:{},meta:{id:"1164:6158",label:"img_tittle",tagName:"DIV",componentType:"Container"},order:"0.333"},{id:"group_75",from:"section_3",props:{},meta:{id:"1164:6163",label:"img_banner",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"section_77",props:{},from:"comp_PC_01",meta:{id:"1164:6172",label:"adafsafc",tagName:"SECTION",componentType:"Section"},order:"0.200"},{id:"group_79",from:"section_77",props:{},meta:{id:"1164:6173",label:"img_PC_02",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"section_81",props:{},from:"comp_PC_01",meta:{id:"1164:6181",label:"asgbgtrn",tagName:"SECTION",componentType:"Section"},order:"0.400"},{id:"group_83",from:"section_81",props:{},meta:{id:"1164:6182",label:"img_PC_03",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"section_85",props:{},from:"comp_PC_01",meta:{id:"1164:6217",label:"afaf ",tagName:"SECTION",componentType:"Section"},order:"0.600"},{id:"group_87",from:"section_85",props:{},meta:{id:"1164:6219",label:"img_PC_04",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"section_89",props:{},from:"comp_PC_01",meta:{id:"1164:6223",label:"底部",tagName:"SECTION",componentType:"Section"},order:"0.800"},{id:"group_92",from:"section_89",props:{},meta:{id:"91",label:"底部_export",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"comp_iPad_01",props:{},meta:{id:"1164:6083",label:"iPad_01",tagName:"DIV",componentType:"Page"},from:"root",order:"0.1"},{id:"section_97",props:{},from:"comp_iPad_01",meta:{id:"1164:6084",label:"img_ipad_01",tagName:"SECTION",componentType:"Section"},order:"0.0001"},{id:"section_100",props:{},from:"comp_iPad_01",meta:{id:"1164:6099",label:"img_ipad_02",tagName:"SECTION",componentType:"Section"},order:"0.167"},{id:"section_103",props:{},from:"comp_iPad_01",meta:{id:"1164:6107",label:"img_ipad_03",tagName:"SECTION",componentType:"Section"},order:"0.333"},{id:"section_106",props:{},from:"comp_iPad_01",meta:{id:"1164:6142",label:"img_iPad_04",tagName:"SECTION",componentType:"Section"},order:"0.500"},{id:"section_109",props:{},from:"comp_iPad_01",meta:{id:"1164:6148",label:"底部",tagName:"SECTION",componentType:"Section"},order:"0.667"},{id:"section_112",props:{},from:"comp_iPad_01",meta:{id:"1164:6150",label:"Frame 1000008837",tagName:"SECTION",componentType:"Section"},order:"0.833"},{id:"group_114",from:"section_112",props:{},meta:{id:"1164:6151",label:"按钮",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_116",from:"section_97",props:{},meta:{id:"99",label:"img_ipad_01_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_118",from:"section_100",props:{},meta:{id:"102",label:"img_ipad_02_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_120",from:"section_103",props:{},meta:{id:"105",label:"img_ipad_03_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_122",from:"section_106",props:{},meta:{id:"108",label:"img_iPad_04_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_124",from:"section_109",props:{},meta:{id:"111",label:"底部_export",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"comp_h5_01",props:{},meta:{id:"1164:6014",label:"h5_01",tagName:"DIV",componentType:"Page"},from:"root",order:"0.1"},{id:"section_129",props:{},from:"comp_h5_01",meta:{id:"1164:6015",label:"img_h5_01",tagName:"SECTION",componentType:"Section"},order:"0.0001"},{id:"section_132",props:{},from:"comp_h5_01",meta:{id:"1164:6029",label:"img_h5_02",tagName:"SECTION",componentType:"Section"},order:"0.167"},{id:"section_135",props:{},from:"comp_h5_01",meta:{id:"1164:6037",label:"img_h5_03",tagName:"SECTION",componentType:"Section"},order:"0.333"},{id:"section_138",props:{},from:"comp_h5_01",meta:{id:"1164:6072",label:"img_h5_04",tagName:"SECTION",componentType:"Section"},order:"0.500"},{id:"section_141",props:{},from:"comp_h5_01",meta:{id:"1164:6077",label:"底部",tagName:"SECTION",componentType:"Section"},order:"0.667"},{id:"section_144",props:{},from:"comp_h5_01",meta:{id:"1164:6079",label:"Frame 1000008837",tagName:"SECTION",componentType:"Section"},order:"0.833"},{id:"group_146",from:"section_144",props:{},meta:{id:"1164:6080",label:"按钮",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_148",from:"section_129",props:{},meta:{id:"131",label:"img_h5_01_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_150",from:"section_132",props:{},meta:{id:"134",label:"img_h5_02_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_152",from:"section_135",props:{},meta:{id:"137",label:"img_h5_03_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_154",from:"section_138",props:{},meta:{id:"140",label:"img_h5_04_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_156",from:"section_141",props:{},meta:{id:"143",label:"底部_export",tagName:"DIV",componentType:"Container"},order:"0.500"}],styles:[{id:"s_1",targetId:"comp_PC_01",breakpointId:null,display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"static",height:"auto"},{id:"s_2",targetId:"comp_PC_01",breakpointId:"b1",display:"none"},{id:"s_4",targetId:"section_3",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"760px",width:"100%","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)"},{id:"s_6",targetId:"group_5",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"480px",height:"628px","margin-left":"1080px","margin-top":"81px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_8",targetId:"group_7",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)",width:"480px",height:"598px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_10",targetId:"group_9",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"486px","margin-left":"40px","margin-top":"40px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_12",targetId:"group_11",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"462px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_14",targetId:"group_13",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"462px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_16",targetId:"group_15",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"462px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_18",targetId:"group_17",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"34px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_20",targetId:"group_19",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"412px","margin-left":"0px","margin-top":"50px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_22",targetId:"group_21",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"412px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_24",targetId:"group_23",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"162px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_26",targetId:"group_25",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"90px",height:"26px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_28",targetId:"group_27",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"32px",height:"26px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_30",targetId:"group_29",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(246,246,247,1) 0%, rgba(246,246,247,1) 100%)",width:"400px",height:"52px","margin-left":"0px","margin-top":"42px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_32",targetId:"group_31",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(246,246,247,1) 0%, rgba(246,246,247,1) 100%)",width:"400px",height:"52px","margin-left":"0px","margin-top":"110px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_34",targetId:"group_33",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"80px",height:"18px","margin-left":"304px","margin-top":"17px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_36",targetId:"group_35",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"18px",height:"18px","margin-left":"62px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_38",targetId:"group_37",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"234px","margin-left":"0px","margin-top":"178px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_40",targetId:"group_39",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"48px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_42",targetId:"group_41",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(0,108,246,1) 0%, rgba(0,108,246,1) 100%)",width:"400px",height:"48px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_44",targetId:"group_43",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"64px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_46",targetId:"group_45",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_48",targetId:"group_47",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_50",targetId:"group_49",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"58px",height:"10px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_52",targetId:"group_51",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"70px","margin-left":"0px","margin-top":"10px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_54",targetId:"group_53",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_56",targetId:"group_55",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"52px","margin-left":"0px","margin-top":"20px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_58",targetId:"group_57",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/bb7bcfcf-fb59-4861-b083-4940857654ce.png)",width:"72px",height:"51px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_60",targetId:"group_59",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"268px",height:"74px","margin-left":"66px","margin-top":"160px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_62",targetId:"group_61",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"180px",height:"22px","margin-left":"44px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_64",targetId:"group_63",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"268px",height:"36px","margin-left":"0px","margin-top":"38px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_66",targetId:"group_65",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"36px",height:"36px","margin-left":"232px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_68",targetId:"group_67",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"36px",height:"36px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_70",targetId:"group_69",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"36px",height:"36px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_72",targetId:"group_71",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/818d2931-a84d-43ee-90ac-2ec07a04e47a.png)",width:"30px",height:"30px","margin-left":"3px","margin-top":"3px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_74",targetId:"group_73",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/4dd85ffe-a90c-431c-838e-0b7a2f82c9dc.png)",width:"560px",height:"257px","margin-left":"360px","margin-top":"100px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_76",targetId:"group_75",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/5649e1a5-d84f-41fc-b8dc-ec1d1162ef81.png)",width:"420px",height:"399px","margin-left":"360px","margin-top":"361px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_78",targetId:"section_77",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"572px",width:"100%","grid-row-start":"2","grid-row-end":"3","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)"},{id:"s_80",targetId:"group_79",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/40470b88-4edd-4d03-8e2a-99117fff12e1.png)",width:"1200px",height:"402px","margin-left":"360px","margin-top":"100px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_82",targetId:"section_81",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"526px",width:"100%","grid-row-start":"3","grid-row-end":"4","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_84",targetId:"group_83",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/27d61a2d-8582-453f-a028-749cc863018b.png)",width:"1200px",height:"326px","margin-left":"360px","margin-top":"100px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_86",targetId:"section_85",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"514px",width:"100%","grid-row-start":"4","grid-row-end":"5","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(180deg, rgba(235,243,255,1) 0%,rgba(255,255,255,1) 100%)"},{id:"s_88",targetId:"group_87",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/0c9d07ce-bd4c-49fb-ac8f-58a2580da03c.png)",width:"1200px",height:"514px","margin-left":"360px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_90",targetId:"section_89",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"260px",width:"100%","grid-row-start":"5","grid-row-end":"6","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box"},{id:"s_93",targetId:"group_92",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/9c86eb22-1f17-45f4-a2f8-b52865479f78.png)",width:"1200px",height:"260px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_94",targetId:"comp_iPad_01",breakpointId:null,display:"none","box-sizing":"border-box","grid-template-rows":"minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"static",height:"auto"},{id:"s_95",targetId:"comp_iPad_01",breakpointId:"b1",display:"grid"},{id:"s_96",targetId:"comp_iPad_01",breakpointId:"b2",display:"none"},{id:"s_98",targetId:"section_97",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"671px",width:"100%","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)"},{id:"s_101",targetId:"section_100",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"557px",width:"100%","grid-row-start":"2","grid-row-end":"3","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)"},{id:"s_104",targetId:"section_103",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"363px",width:"100%","grid-row-start":"3","grid-row-end":"4","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_107",targetId:"section_106",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"626px",width:"100%","grid-row-start":"4","grid-row-end":"5","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)"},{id:"s_110",targetId:"section_109",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"218px",width:"100%","grid-row-start":"5","grid-row-end":"6","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box"},{id:"s_113",targetId:"section_112",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"74px",width:"100%","grid-row-start":"6","grid-row-end":"7","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_115",targetId:"group_114",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/1a84e9fb-e6c3-4ad1-b777-500dbb4f2eec.png)",width:"708px",height:"50px","margin-left":"30px","margin-top":"12px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_117",targetId:"group_116",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/d27e272b-7e54-4cb8-b816-27144b0f7a15.png), linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)","background-position":"center",width:"768px",height:"671px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_119",targetId:"group_118",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/8f37dd3f-8d5b-43a6-b54f-7187f16fd429.png), linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)","background-position":"center",width:"768px",height:"557px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_121",targetId:"group_120",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/fbd5e543-7a2b-4e12-b44c-69dc683aee21.png), linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)","background-position":"center",width:"768px",height:"363px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_123",targetId:"group_122",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/e997eb1e-e33a-47bc-8f68-b0fe5be2e432.png), linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)","background-position":"center",width:"768px",height:"626px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_125",targetId:"group_124",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/646e684e-65ff-42c8-8d20-73c800f2750f.png)",width:"768px",height:"218px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_126",targetId:"comp_h5_01",breakpointId:null,display:"none","box-sizing":"border-box","grid-template-rows":"minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"static",height:"auto"},{id:"s_127",targetId:"comp_h5_01",breakpointId:"b1",display:"none"},{id:"s_128",targetId:"comp_h5_01",breakpointId:"b2",display:"grid"},{id:"s_130",targetId:"section_129",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"651px",width:"100%","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)"},{id:"s_133",targetId:"section_132",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"467px",width:"100%","grid-row-start":"2","grid-row-end":"3","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)"},{id:"s_136",targetId:"section_135",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"522px",width:"100%","grid-row-start":"3","grid-row-end":"4","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_139",targetId:"section_138",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"626px",width:"100%","grid-row-start":"4","grid-row-end":"5","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)"},{id:"s_142",targetId:"section_141",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"274px",width:"100%","grid-row-start":"5","grid-row-end":"6","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box"},{id:"s_145",targetId:"section_144",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"74px",width:"100%","grid-row-start":"6","grid-row-end":"7","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_147",targetId:"group_146",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/247b6fff-56c8-4009-ab2b-82265d5fd662.png)",width:"358px",height:"50px","margin-left":"16px","margin-top":"12px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_149",targetId:"group_148",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/95a280a8-cbf2-4886-8ef6-e7b77e70d5a4.png), linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)","background-position":"center",width:"390px",height:"651px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_151",targetId:"group_150",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/15a3fbe0-23df-43e8-9cef-90918868c7d6.png), linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)","background-position":"center",width:"390px",height:"467px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_153",targetId:"group_152",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/9bb1d58a-b7fe-4f37-97a4-b747592878be.png), linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)","background-position":"center",width:"390px",height:"522px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_155",targetId:"group_154",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/f772c488-91b9-42d2-ac0d-ad6c16d45900.png), linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)","background-position":"center",width:"390px",height:"626px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_157",targetId:"group_156",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/e9c2acf8-3a70-4fe9-92ea-8e912fb78c6d.png)",width:"390px",height:"274px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"}],links:[],triggers:[],animations:[],interactions:[],breakpoints:[{id:"b1",maxWidth:1e3,minWidth:751},{id:"b2",maxWidth:750,minWidth:320}],roots:[],fontfaces:[]};(Un=Ln||(Ln={})).document="document",Un.scroll="scroll",(Bn=Fn||(Fn={})).normal="normal",Bn.reverse="reverse",Bn.alternate="alternate",Bn["alternate-reverse"]="alternate-reverse",(Vn=jn||(jn={})).none="none",Vn.forwards="forwards",Vn.backwards="backwards",Vn.both="both",Vn.auto="auto",(Kn=zn||(zn={})).group="group",Kn.sequence="sequence",(Hn=Wn||(Wn={})).appearance="appearance",Hn.transition="transition",(qn=$n||($n={})).start="start",qn.end="end",(Gn=Yn||(Yn={})).vertical="vertical",Gn.horizontal="horizontal",Gn.block="block",Gn.inline="inline",(Jn=Xn||(Xn={})).enter="enter",Jn.exit="exit",(Zn=Qn||(Qn={})).load="load",Zn.click="click",Zn.mouseenter="mouseenter",Zn.mouseleave="mouseleave",Zn.intersection="@intersection",Zn.loadScroll="@loadScroll",Zn.appear="@appear",Zn.mousedown="mousedown",Zn.mouseup="mouseup";const ti=new Uint8Array(16),ni=[];for(let os=0;os<256;os++)ni.push(os.toString(16).padStart(2,"0"));let ii;function ri(){ii(ti),ti[6]=15&ti[6]|64,ti[8]=63&ti[8]|128;let e=0,t="";return t+=ni[ti[e++]],t+=ni[ti[e++]],t+=ni[ti[e++]],t+=ni[ti[e++]],t+="-",t+=ni[ti[e++]],t+=ni[ti[e++]],t+="-",t+=ni[ti[e++]],t+=ni[ti[e++]],t+="-",t+=ni[ti[e++]],t+=ni[ti[e++]],t+="-",t+=ni[ti[e++]],t+=ni[ti[e++]],t+=ni[ti[e++]],t+=ni[ti[e++]],t+=ni[ti[e++]],t+=ni[ti[e++]],t}function oi(e){return void 0===e}function si(e){return oi(e)||null===e}ii="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};const ai=e=>"string"==typeof e,li=e=>null!==e&&"object"==typeof e;function ci(e){return ai(e)?Number.isInteger(parseInt(e)):Number.isInteger(e)}function di(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=di(e[n]):t[n]=e[n]})),t}function ui(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!ui(e[n],t[n]))return!1}else{const r=[];for(i in e)r.push(i);r.sort();const o=[];for(i in t)o.push(i);if(o.sort(),!ui(r,o))return!1;for(n=0;n<r.length;n++)if(!ui(e[r[n]],t[r[n]]))return!1}return!0}function hi(e){return Object.keys(e)}const pi=Object.prototype.hasOwnProperty;function fi(e,t){if(!e)throw t instanceof Error?t:new Error(t)}function gi(e,t){const n=t instanceof Error?t:new Error(t);e||console.error(n)}var mi,_i,vi,yi;function wi(e){return 100*e+"%"}function bi(e){return parseFloat(e||"0")}function xi(e){return parseInt(e||"0",10)}function Ci(e,t,n=.1){return Math.abs(e-t)<n}function ki(e,t,n){return Math.min(Math.max(t,e),n)}function Ei(){}function Si(e){const t=this;let n,i=!1;return function(){return i||(i=!0,n=e.apply(t,arguments)),n}}function Ii(e){return"normal"===e?0:parseFloat(e)}(_i=mi||(mi={})).notFound="404",_i.badRequest="400",_i.internalError="500",(yi=vi||(vi={})).webkit="-webkit-",yi.moz="-moz-",yi.ms="-ms-",yi.o="-o-";var Oi,Ti,Mi,Ni,Ai,Ri,Di,Pi,Li,Ui,Fi,Bi,ji,Vi,zi,Ki;function Wi(e){return e.split(" ").map((e=>parseFloat(e.trim())))}function Hi(e){return Array.from(e.matchAll(/[^\s()]+(?:\([^\s()]+(?:\([^()]+\))?(?:, *[^\s()]+(?:\([^()]+\))?)*\))?/g),(e=>e[0]))}function $i(e){const t=xi(e.gridRowStart),n=xi(e.gridRowEnd),i=xi(e.gridColumnStart),r=xi(e.gridColumnEnd);return gi(ci(t)&&ci(n)&&ci(i)&&ci(r)),{rowStart:t,rowEnd:n,columnStart:i,columnEnd:r}}function qi(e){return`matrix(${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.tx}, ${e.ty})`}function Yi(e){return ai(e)&&"auto"===e}function Gi(e){return!e||Yi(e)}function Xi(e){const t=parseFloat(`${e}`);return Number.isFinite(t)?`${e}px`:`${e}`}function Ji(e){return e.includes("background")}(Ti=Oi||(Oi={})).grid="grid",Ti.flex="flex",Ti.inlineGrid="inline-grid",Ti.inlineFlex="inline-flex",Ti.none="none",Ti.listItem="list-item",Ti.block="block",(Ni=Mi||(Mi={})).row="row",Ni.column="column",(Ri=Ai||(Ai={})).wrap="wrap",Ri.nowrap="nowrap",(Pi=Di||(Di={})).none="static",Pi.fixed="fixed",Pi.sticky="sticky",(Ui=Li||(Li={})).visible="visible",Ui.hidden="hidden",Ui.scroll="scroll",Ui.auto="auto",(Bi=Fi||(Fi={})).default="default",Bi.pointer="pointer",Bi.grab="grab",Bi.move="move",Bi.text="text",(Vi=ji||(ji={})).px="px",Vi["%"]="%",Vi.vw="vw",Vi.vh="vh",Vi.fr="fr",(Ki=zi||(zi={})).auto="auto",Ki.fitContent="fit-content",ji.px,ji["%"],ji.vw,ji.vh;const Qi=[zi.auto,zi.fitContent],Zi=Object.values(ji),er=e=>(e=>!e)(e)||Yi(e)||(e=>e===zi.fitContent)(e),tr=(e,t=Zi)=>{if(!er(e))return t.find((t=>e.endsWith(t)))},nr=e=>{const t=tr(e),n=parseFloat(e);return Number.isInteger(n)||Number.isNaN(n)?n:t===ji.px?parseFloat(n.toFixed(0)):parseFloat(n.toFixed(1))},ir=e=>e.map((e=>e.includes("minmax")?e:e.includes("fr")||e.includes("auto")?`minmax(0px, ${e})`:e)).join(" ");function rr(e){return!Number.isNaN(parseFloat(e))}var or,sr,ar,lr;(sr=or||(or={})).none="none",sr.start="start",sr.end="end",sr.center="center",(lr=ar||(ar={})).none="none",lr.mandatory="both mandatory",lr.proximity="both proximity";const cr=Si((()=>{try{const e=document.createElement("div");return document.body.appendChild(e),getComputedStyle(e)}catch{return{}}}))();var dr,ur,hr,pr,fr,gr;(ur=dr||(dr={})).left="left",ur.right="right",ur.top="top",ur.bottom="bottom",(pr=hr||(hr={})).around="around",pr.none="none",(gr=fr||(fr={})).start="start",gr.end="end",gr.center="center",gr.stretch="stretch";const mr=w(w({},dr),hr),_r=e=>{const{"justify-self":t}=e;return t===fr.center},vr=e=>{const{"align-self":t}=e;return t===fr.center},yr=(e,t)=>{if(br(e)){const{left:n="",top:i="",right:r="",bottom:o=""}=e;switch(t){case mr.left:return!!n;case mr.right:return!!r;case mr.top:return!!i;case mr.bottom:return!!o;case mr.around:return!!(i&&r&&o&&n);default:return!1}}const{"align-self":n,"justify-self":i}=e;switch(t){case mr.left:return i===fr.start||i===fr.stretch;case mr.right:return i===fr.end||i===fr.stretch;case mr.top:return n===fr.start||n===fr.stretch;case mr.bottom:return n===fr.end||n===fr.stretch;case mr.around:return n===fr.stretch||i===fr.stretch;case mr.none:return _r(e)&&vr(e);default:return!1}};function wr(e){return e instanceof CSSStyleDeclaration?"true"===e.getPropertyValue("--auto-layout").trim():"true"===e["--auto-layout"]}function br(e){return e.position===Di.fixed}const xr=Object.freeze(w(w(w({},{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""}),{"grid-row-start":"","grid-row-end":"","grid-column-start":"","grid-column-end":""}),{"justify-self":"","align-self":""})),Cr=Object.freeze({"grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","justify-self":fr.start,"align-self":fr.start,"flex-grow":"","flex-basis":""}),kr=Object.freeze({"flex-grow":cr.flexGrow,"flex-basis":cr.flexBasis}),Er=e=>{const t=e["grid-row-start"],n=e["grid-row-end"],i=e["grid-column-start"],r=e["grid-column-end"];return t&&n&&i&&r?{rowStart:parseInt(t),rowEnd:parseInt(n),columnStart:parseInt(i),columnEnd:parseInt(r)}:(console.warn("Grid节点关键信息缺失"),null)},Sr=e=>{const{rowStart:t,rowEnd:n,columnStart:i,columnEnd:r}=e;return{"grid-row-start":t.toString(),"grid-row-end":n.toString(),"grid-column-start":i.toString(),"grid-column-end":r.toString()}};var Ir,Or;(Or=Ir||(Ir={}))[Or.addForward=0]="addForward",Or[Or.addBackward=1]="addBackward",Or[Or.delete=2]="delete",Or[Or.reorder=3]="reorder";class Tr{constructor(e,t,n,i,r){this.id=e,this.style=t,this.width=n,this.selectorType=i,this.subSelector=r}do(e){const t=e.internal_getMatchedStyles(this.id,this.width,this.selectorType,this.subSelector),n=e.internal_getMatchedBreakpoint(this.width),i=this.style,r=b(w({},i),{id:ri(),targetId:this.id,breakpointId:si(n)?null:n.id,selectorType:this.selectorType,subSelector:this.subSelector});for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&(r[l]||delete r[l]);const o=()=>{const{styles:t,breakpoints:n}=e.getValue();t.push(r);const i=[],o=[];t.forEach(((e,t)=>{e.targetId===this.id&&e.selectorType===this.selectorType&&e.subSelector===this.subSelector&&(o.push(e),i.push(t))}));const s=n.reduce(((e,t)=>(e.set(t.id,t),e)),new Map),a=o.length;for(let e=0;e<a-1;e++)for(let n=0;n<a-1-e;n++){const e=o[n],r=o[n+1];let a=!1;if(e.breakpointId&&!r.breakpointId)a=!0;else if(e.breakpointId&&r.breakpointId){const t=s.get(e.breakpointId);s.get(r.breakpointId).maxWidth>t.maxWidth&&(a=!0)}if(a){const e=di(o[n]),r=di(o[n+1]),s=i[n],a=i[n+1];Object.assign(t[s],r),Object.assign(t[a],e)}}};const s=t.find((e=>e.breakpointId==(null==n?void 0:n.id)));var a;s?(a=s,Object.keys(i).forEach((e=>{i[e]?a[e]=i[e]:delete a[e]}))):o()}}class Mr{constructor(e,t,n){this.id=e,this.style=t,this.width=n}do(e){const t=e.internal_getMatchedStyles(this.id,this.width),n=e.internal_getMatchedBreakpoint(this.width);if(!n&&!this.style)throw new Error("500");const i=t.find((e=>e.breakpointId==(null==n?void 0:n.id)));if(i){let e=this.style;if(!e){const t=i,{id:n,breakpointId:r,targetId:o}=t;e=x(t,["id","breakpointId","targetId"])}Object.keys(e).forEach((e=>{delete i[e]}))}}}class Nr{constructor(e,t,n,i){this.root=e,this.ref=t,this.id=n,this.type=i}do(e){const t=this.calcGridAreaInfo(e,this.root,this.ref,this.id,this.type);this.updateGridAreaInfo(e,this.root,t)}updateGridAreaInfo(e,t,n){const{orders:i,rowsTemplate:r,columnsTemplate:o}=n;this.updateGridTemplateStyle(e,t,o,r),this.updateGridAreaStyle(e,i)}updateGridTemplateStyle(e,t,n,i){const r=function(e,t){const n=ir(t.map((()=>"auto"))),i=ir(e.map((()=>"auto")));return{"grid-template-rows":n,"grid-template-columns":i}}(n,i);e.updateAllBpStyles(t,r)}updateGridAreaStyle(e,t){t.forEach((t=>{const{gridArea:n,id:i,changed:r}=t;if(r){const t=Sr(n);e.updateAllBpStyles(i,t,!1)}}))}calcGridAreaInfo(e,t,n,i,r){const{columns:o,rows:s,orders:a,rowsTemplate:l,columnsTemplate:c}=e.getChildrenGridAreaInfo(t),d=a.findIndex((e=>e.id===(2===r?i:n))),u=di(a),h=l.slice(0);let p=s,f=null;if(0===r||1===r){const e=a[d]||a[a.length-1],t=h[d]||h[h.length-1];if(!e||!t)throw new Error("500");f=di(e),f.id=i,f.changed=!0,0===r?(u.splice(d,0,f),h.splice(d,0,t)):1===r&&(u.splice(d+1,0,f),h.splice(d+1,0,t)),p=s+1;for(let n=d+1;n<u.length;n++)u[n].gridArea=g(n+1),u[n].changed=!0}else if(3===r&&n!==i){const e=a.findIndex((e=>e.id===i));for(let n=e+1;n<u.length;n++){const e=u[n];e.gridArea=g(n),e.changed=!0}const[t]=u.splice(e,1),r=n?u.findIndex((e=>e.id===n)):u.length,o=r-1;let s=r;t.gridArea=g(s+1),t.changed=!0,o<0?(s=0,u.unshift(t)):u.splice(o,0,t);for(let n=s+1;n<u.length;n++){const e=u[n];e.gridArea=g(n+1),e.changed=!0}}else{p-=1,u.splice(d,1),h.splice(d,1);for(let e=d;e<u.length;e++)u[e].gridArea=g(e+1),u[e].changed=!0}if(p!==h.length)throw new Error("400");return{columns:o,rows:p,orders:u,new:f,rowsTemplate:h,columnsTemplate:c};function g(e,t=1,n=1,i=1){if(e<=0||t<=0)throw new Error("500");return{rowStart:e,rowEnd:e+n,columnStart:t,columnEnd:t+i}}}}function Ar(e,t){const n=e.length;if(0===n)return-1;for(let i=0;i<n;i++)if(t(e[i]))return i;return-1}function Rr(e,t){const n=Ar(e,t);if(-1!==n)return e[n]}function Dr(e){return e.filter((e=>!!e))}function Pr(e,t){const n=e.length;if(t>n||t<0)throw new Error("400");const i=e[t];for(let r=t;r<n-1;r++)e[r]=e[r+1];e[n-1]=i,e.splice(n-1,1)}function Lr(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function Ur(e,t){return Lr(e,t,((e,t)=>e===t))}let Fr;if(Reflect.has(globalThis,"__$$diMap"))Fr=Reflect.get(globalThis,"__$$diMap");else{const e=new Map;Fr=e,Reflect.set(globalThis,"__$$diMap",e)}let Br;if(Reflect.has(globalThis,"__$$idMap"))Br=Reflect.get(globalThis,"__$$idMap");else{const e=new Map;Br=e,Reflect.set(globalThis,"__$$idMap",e)}function jr(e){const t=e.name;return Fr.get(t)||[]}const Vr=Kr("instantiationService");function zr(e,t,n,i){const r=t.name,o=Fr.get(r);if(si(o))Fr.set(r,[{id:e,index:n,optional:i}]);else{-1===Ar(o,(t=>t.id.toString()===e.toString()))&&o.push({id:e,index:n,optional:i})}}function Kr(e){if(Br.has(e))return Br.get(e);const t=function(e,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");zr(t,e,i,!1)};return t.toString=function(){return e},Reflect.set(t,"__brand",e),Br.set(e,t),t}const Wr=Kr("model");var Hr,$r,qr,Yr;($r=Hr||(Hr={}))[$r.None=0]="None",$r[$r.Transform=1]="Transform",$r[$r.Add=2]="Add";class Gr{constructor(e){C(this,"_styles"),this._styles=e}get attrs(){return this._styles.reduce(((e,t)=>(Object.assign(e,t),e)),{})}getAttr(e){return this.attrs[e]}}(Yr=qr||(qr={})).Image="Image",Yr.Container="Container",Yr.Section="Section",Yr.Symbol="Symbol",Yr.Text="Text",Yr.RichText="RichText",Yr.SVG="SVG",Yr.Video="Video",Yr.Page="Page",Yr.WebWidget="WebWidget";const Xr=[qr.Image,qr.Container,qr.Section,qr.Symbol,qr.Text,qr.SVG,qr.Video,qr.Page,qr.WebWidget,qr.RichText];var Jr,Qr,Zr,eo;function to(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.Text}function no(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.RichText}function io(e){return to(e)||no(e)}function ro(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.Image}function oo(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.SVG}function so(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.WebWidget}function ao(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.Video}function lo(e){return to(e)||ro(e)||oo(e)||so(e)}function co(e){var t;return(null==(t=null==e?void 0:e.meta)?void 0:t.componentType)===qr.Page}function uo(e){return"root"===e.id}function ho(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.Section}function po(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===qr.Container}function fo(e){return ho(e)||po(e)}function go(e){var t;return li(e)&&(Xr.includes(null==(t=e.meta)?void 0:t.componentType)||uo(e))}(Qr=Jr||(Jr={})).LayouterVert="LayouterVert",Qr.LayouterHoriz="LayouterHoriz",Qr.AutoLayouterVert="AutoLayouterVert",Qr.AutoLayouterHoriz="AutoLayouterHoriz",(eo=Zr||(Zr={})).Button="Button",eo.Title="Title",eo.Paragraph="Paragraph";var mo="[big.js] ",_o=mo+"Invalid ",vo=_o+"decimal places",yo={},wo=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function bo(e,t,n,i){var r=e.c;if(undefined===n&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error("[big.js] Invalid rounding mode");if(t<1)i=3===n&&(i||!!r[0])||0===t&&(1===n&&r[0]>=5||2===n&&(r[0]>5||5===r[0]&&(i||undefined!==r[1]))),r.length=1,i?(e.e=e.e-t+1,r[0]=1):r[0]=e.e=0;else if(t<r.length){if(i=1===n&&r[t]>=5||2===n&&(r[t]>5||5===r[t]&&(i||undefined!==r[t+1]||1&r[t-1]))||3===n&&(i||!!r[0]),r.length=t--,i)for(;++r[t]>9;)r[t]=0,t--||(++e.e,r.unshift(1));for(t=r.length;!r[--t];)r.pop()}return e}function xo(e,t,n){var i=e.e,r=e.c.join(""),o=r.length;if(t)r=r.charAt(0)+(o>1?"."+r.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)r="0"+r;r="0."+r}else if(i>0)if(++i>o)for(i-=o;i--;)r+="0";else i<o&&(r=r.slice(0,i)+"."+r.slice(i));else o>1&&(r=r.charAt(0)+"."+r.slice(1));return e.s<0&&n?"-"+r:r}yo.abs=function(){var e=new this.constructor(this);return e.s=1,e},yo.cmp=function(e){var t,n=this,i=n.c,r=(e=new n.constructor(e)).c,o=n.s,s=e.s,a=n.e,l=e.e;if(!i[0]||!r[0])return i[0]?o:r[0]?-s:0;if(o!=s)return o;if(t=o<0,a!=l)return a>l^t?1:-1;for(s=(a=i.length)<(l=r.length)?a:l,o=-1;++o<s;)if(i[o]!=r[o])return i[o]>r[o]^t?1:-1;return a==l?0:a>l^t?1:-1},yo.div=function(e){var t=this,n=t.constructor,i=t.c,r=(e=new n(e)).c,o=t.s==e.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>1e6)throw Error(vo);if(!r[0])throw Error("[big.js] Division by zero");if(!i[0])return e.s=o,e.c=[e.e=0],e;var a,l,c,d,u,h=r.slice(),p=a=r.length,f=i.length,g=i.slice(0,a),m=g.length,_=e,v=_.c=[],y=0,w=s+(_.e=t.e-e.e)+1;for(_.s=o,o=w<0?0:w,h.unshift(0);m++<a;)g.push(0);do{for(c=0;c<10;c++){if(a!=(m=g.length))d=a>m?1:-1;else for(u=-1,d=0;++u<a;)if(r[u]!=g[u]){d=r[u]>g[u]?1:-1;break}if(!(d<0))break;for(l=m==a?r:h;m;){if(g[--m]<l[m]){for(u=m;u&&!g[--u];)g[u]=9;--g[u],g[m]+=10}g[m]-=l[m]}for(;!g[0];)g.shift()}v[y++]=d?c:++c,g[0]&&d?g[m]=i[p]||0:g=[i[p]]}while((p++<f||undefined!==g[0])&&o--);return v[0]||1==y||(v.shift(),_.e--,w--),y>w&&bo(_,w,n.RM,undefined!==g[0]),_},yo.eq=function(e){return 0===this.cmp(e)},yo.gt=function(e){return this.cmp(e)>0},yo.gte=function(e){return this.cmp(e)>-1},yo.lt=function(e){return this.cmp(e)<0},yo.lte=function(e){return this.cmp(e)<1},yo.minus=yo.sub=function(e){var t,n,i,r,o=this,s=o.constructor,a=o.s,l=(e=new s(e)).s;if(a!=l)return e.s=-l,o.plus(e);var c=o.c.slice(),d=o.e,u=e.c,h=e.e;if(!c[0]||!u[0])return u[0]?e.s=-l:c[0]?e=new s(o):e.s=1,e;if(a=d-h){for((r=a<0)?(a=-a,i=c):(h=d,i=u),i.reverse(),l=a;l--;)i.push(0);i.reverse()}else for(n=((r=c.length<u.length)?c:u).length,a=l=0;l<n;l++)if(c[l]!=u[l]){r=c[l]<u[l];break}if(r&&(i=c,c=u,u=i,e.s=-e.s),(l=(n=u.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;n>a;){if(c[--n]<u[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=u[n]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--h;return c[0]||(e.s=1,c=[h=0]),e.c=c,e.e=h,e},yo.mod=function(e){var t,n=this,i=n.constructor,r=n.s,o=(e=new i(e)).s;if(!e.c[0])throw Error("[big.js] Division by zero");return n.s=e.s=1,t=1==e.cmp(n),n.s=r,e.s=o,t?new i(n):(r=i.DP,o=i.RM,i.DP=i.RM=0,n=n.div(e),i.DP=r,i.RM=o,this.minus(n.times(e)))},yo.plus=yo.add=function(e){var t,n,i,r=this,o=r.constructor;if(e=new o(e),r.s!=e.s)return e.s=-e.s,r.minus(e);var s=r.e,a=r.c,l=e.e,c=e.c;if(!a[0]||!c[0])return c[0]||(a[0]?e=new o(r):e.s=r.s),e;if(a=a.slice(),t=s-l){for(t>0?(l=s,i=c):(t=-t,i=a),i.reverse();t--;)i.push(0);i.reverse()}for(a.length-c.length<0&&(i=c,c=a,a=i),t=c.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+c[t]+n)/10|0;for(n&&(a.unshift(n),++l),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=l,e},yo.pow=function(e){var t=this,n=new t.constructor("1"),i=n,r=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(_o+"exponent");for(r&&(e=-e);1&e&&(i=i.times(t)),e>>=1;)t=t.times(t);return r?n.div(i):i},yo.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(_o+"precision");return bo(new this.constructor(this),e,t)},yo.round=function(e,t){if(undefined===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(vo);return bo(new this.constructor(this),e+this.e+1,t)},yo.sqrt=function(){var e,t,n,i=this,r=i.constructor,o=i.s,s=i.e,a=new r("0.5");if(!i.c[0])return new r(i);if(o<0)throw Error(mo+"No square root");0===(o=Math.sqrt(i+""))||o===1/0?((t=i.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new r(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new r(o+""),s=e.e+(r.DP+=4);do{n=e,e=a.times(n.plus(i.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return bo(e,(r.DP-=4)+e.e+1,r.RM)},yo.times=yo.mul=function(e){var t,n=this,i=n.constructor,r=n.c,o=(e=new i(e)).c,s=r.length,a=o.length,l=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!r[0]||!o[0])return e.c=[e.e=0],e;for(e.e=l+c,s<a&&(t=r,r=o,o=t,c=s,s=a,a=c),t=new Array(c=s+a);c--;)t[c]=0;for(l=a;l--;){for(a=0,c=s+l;c>l;)a=t[c]+o[l]*r[c-l-1]+a,t[c--]=a%10,a=a/10|0;t[c]=a}for(a?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},yo.toExponential=function(e,t){var n=this,i=n.c[0];if(undefined!==e){if(e!==~~e||e<0||e>1e6)throw Error(vo);for(n=bo(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return xo(n,!0,!!i)},yo.toFixed=function(e,t){var n=this,i=n.c[0];if(undefined!==e){if(e!==~~e||e<0||e>1e6)throw Error(vo);for(e=e+(n=bo(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return xo(n,!1,!!i)},yo.toJSON=yo.toString=function(){var e=this,t=e.constructor;return xo(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},yo.toNumber=function(){var e=Number(xo(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(mo+"Imprecise conversion");return e},yo.toPrecision=function(e,t){var n=this,i=n.constructor,r=n.c[0];if(undefined!==e){if(e!==~~e||e<1||e>1e6)throw Error(_o+"precision");for(n=bo(new i(n),e,t);n.c.length<e;)n.c.push(0)}return xo(n,e<=n.e||n.e<=i.NE||n.e>=i.PE,!!r)},yo.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(mo+"valueOf disallowed");return xo(e,e.e<=t.NE||e.e>=t.PE,!0)};var Co,ko,Eo,So,Io=function e(){function t(n){var i=this;if(!(i instanceof t))return undefined===n?e():new t(n);if(n instanceof t)i.s=n.s,i.e=n.e,i.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict)throw TypeError(_o+"number");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,i,r;if(!wo.test(t))throw Error(_o+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length);for(r=t.length,i=0;i<r&&"0"==t.charAt(i);)++i;if(i==r)e.c=[e.e=0];else{for(;r>0&&"0"==t.charAt(--r););for(e.e=n-i-1,e.c=[],n=0;i<=r;)e.c[n++]=+t.charAt(i++)}}(i,n)}i.constructor=t}return t.prototype=yo,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();(ko=Co||(Co={})).child=">",ko.descendant=" ",ko.sibling="~",ko.attribute="[]",ko.pseudoClass=":",ko.pseudoElement=":",(So=Eo||(Eo={})).visited="visited",So.active="active",So.hover="hover";const Oo={"backdrop-filter":[vi.webkit]};function To(...e){throw e.length&&console.error(...e),new Error("not reached")}function Mo(...e){throw e.length&&console.error(...e),new Error("not implemented")}const No=Kr("viewModel");class Ao{constructor(e,t,n){this.prevSelection=e,this.nextSelection=t,this.vm=n}merge(e){To()}isVoid(){return!(this.prevSelection.length&&this.nextSelection.length)}undo(){this.vm.clearSelection();for(const e of this.prevSelection)this.vm.appendSelectionById(e)}redo(){this.vm.clearSelection();for(const e of this.nextSelection)this.vm.appendSelectionById(e)}}const Ro=Kr("view");var Do,Po;(Po=Do||(Do={})).Low="Low",Po.Medium="Medium",Po.High="High";const Lo=Kr("undoRedoService");function Uo(e,t){for(const n of e)if(t(n))return n}Object.freeze([]);class Fo extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function Bo(e){if((t=e)&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]){const t=[];for(const i of e)if(i)try{i.dispose()}catch(n){t.push(n)}if(1===t.length)throw t[0];if(t.length>1)throw new Fo(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e;var t}function jo(e){const t={dispose:Si((()=>{e()}))};return t}class Vo{constructor(){C(this,"_toDispose",new Set),C(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{Bo(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}C(Vo,"DISABLE_DISPOSED_WARNING",!1);class zo{constructor(){C(this,"_store",new Vo),this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}C(zo,"None",Object.freeze({dispose(){}}));class Ko{constructor(){C(this,"dispose",(()=>{})),C(this,"unset",(()=>{})),C(this,"isset",(()=>!1))}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>void 0!==t,this.dispose=()=>{t&&(t(),t=void 0)},this}}const Wo=class{constructor(e){C(this,"element"),C(this,"next"),C(this,"prev"),this.element=e,this.next=Wo.Undefined,this.prev=Wo.Undefined}};let Ho=Wo;C(Ho,"Undefined",new Wo(void 0));class $o{constructor(){C(this,"_first",Ho.Undefined),C(this,"_last",Ho.Undefined),C(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===Ho.Undefined}clear(){this._first=Ho.Undefined,this._last=Ho.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Ho(e);if(this._first===Ho.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Ho.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ho.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ho.Undefined&&e.next!==Ho.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ho.Undefined&&e.next===Ho.Undefined?(this._first=Ho.Undefined,this._last=Ho.Undefined):e.next===Ho.Undefined?(this._last=this._last.prev,this._last.next=Ho.Undefined):e.prev===Ho.Undefined&&(this._first=this._first.next,this._first.prev=Ho.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ho.Undefined;)yield e.element,e=e.next}}let qo,Yo,Go,Xo=!1,Jo=!1,Qo="en";const Zo="object"==typeof self?self:"object"==typeof global?global:{};let es;void 0!==Zo.vscode&&void 0!==Zo.vscode.process?es=Zo.vscode.process:"undefined"!=typeof process&&(es=process);const ts="string"==typeof(null==(e=null==es?void 0:es.versions)?void 0:e.electron)&&"renderer"===(null==es?void 0:es.type);if(ts&&(null==es||es.sandboxed),"object"!=typeof navigator||ts)if("object"==typeof es){es.platform,es.platform,Xo="linux"===es.platform,Xo&&es.env.SNAP&&es.env.SNAP_REVISION,es.env.CI||es.env.BUILD_ARTIFACTSTAGINGDIRECTORY,qo="en",Qo="en";const e=es.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];qo=t.locale,Qo=n||"en",Yo=t._translationsConfigFile}catch(_8){}}else console.error("Unable to resolve platform.");else Go=navigator.userAgent,Go.indexOf("Windows"),Go.indexOf("Macintosh"),(Go.indexOf("Macintosh")>=0||Go.indexOf("iPad")>=0||Go.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,Xo=Go.indexOf("Linux")>=0,Jo=!0,qo=navigator.language,Qo=qo;var ns,is;(is=ns||(ns={}))[is.Web=0]="Web",is[is.Mac=1]="Mac",is[is.Linux=2]="Linux",is[is.Windows=3]="Windows",Jo&&Zo.importScripts;const rs=Go,ss=Qo;var as,ls,cs,ds;(ls=as||(as={})).value=function(){return ss},ls.isDefaultVariant=function(){return 2===ss.length?"en"===ss:ss.length>=3&&"e"===ss[0]&&"n"===ss[1]&&"-"===ss[2]},ls.isDefault=function(){return"en"===ss},(()=>{if("function"==typeof Zo.postMessage&&!Zo.importScripts){const e=[];Zo.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),Zo.postMessage({vscodeScheduleAsyncWork:i},"*")}}})(),(ds=cs||(cs={}))[ds.Windows=1]="Windows",ds[ds.Macintosh=2]="Macintosh",ds[ds.Linux=3]="Linux";const us=!!(rs&&rs.indexOf("Chrome")>=0);rs&&rs.indexOf("Firefox"),!us&&rs&&rs.indexOf("Safari"),rs&&rs.indexOf("Edg/"),rs&&rs.indexOf("Android");const hs=Zo.performance&&"function"==typeof Zo.performance.now;class ps{constructor(e){C(this,"_highResolution"),C(this,"_startTime"),C(this,"_stopTime"),this._highResolution=hs&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new ps(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?Zo.performance.now():Date.now()}}const fs=new class{constructor(){C(this,"unexpectedErrorHandler"),C(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function gs(e){(function(e){if(e instanceof ms)return!0;return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message})(e)||fs.onUnexpectedError(e)}class ms extends Error{constructor(){super("Canceled"),this.name=this.message}}var _s;!function(e){function t(e){return(t,n=null,i)=>{let r=!1;const o=e((e=>{if(!r)return o?o.dispose():r=!0,t.call(n,e)}),null,i);return r&&o.dispose(),o}}function n(e){let t;const n=new xs({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}e.None=()=>zo.None,e.once=t,e.map=function(e,t){return n(((n,i=null,r)=>e((e=>n.call(i,t(e))),null,r)))},e.filter=function(e,t){return n(((n,i=null,r)=>e((e=>t(e)&&n.call(i,e)),null,r)))},e.snapshot=n,e.toPromise=function(e){return new Promise((n=>t(e)(n)))}}(_s||(_s={}));const vs=class{constructor(e){C(this,"_name"),C(this,"_stopWatch"),C(this,"_listenerCount",0),C(this,"_invocationCount",0),C(this,"_elapsedOverall",0),this._name=`${e}_${vs._idPool++}`}start(e){this._stopWatch=new ps(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let ys=vs;C(ys,"_idPool",0);class ws{constructor(e){this.value=e}static create(){var e;return new ws(null!=(e=(new Error).stack)?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class bs{constructor(e,t,n){C(this,"subscription",new Ko),this.callback=e,this.callbackThis=t,this.stack=n}invoke(e){this.callback.call(this.callbackThis,e)}}class xs{constructor(e){var t;C(this,"_options"),C(this,"_leakageMon"),C(this,"_perfMon"),C(this,"_disposed",!1),C(this,"_event"),C(this,"_deliveryQueue"),C(this,"_listeners"),this._options=e,this._leakageMon=void 0,this._perfMon=(null==(t=this._options)?void 0:t._profName)?new ys(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(),null==(n=null==(t=this._options)?void 0:t.onLastListenerRemove)||n.call(t),null==(i=this._leakageMon)||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,r,o;this._listeners||(this._listeners=new $o);const s=this._listeners.isEmpty();let a,l;s&&(null==(i=this._options)?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(l=ws.create(),a=this._leakageMon.check(l,this._listeners.size+1));const c=new bs(e,t,l),d=this._listeners.push(c);s&&(null==(r=this._options)?void 0:r.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null==(o=this._options)?void 0:o.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,t);const u=c.subscription.set((()=>{if(a&&a(),!this._disposed&&(d(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}));return n instanceof Vo?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new $o);for(const t of this._listeners)this._deliveryQueue.push([t,e]);for(null==(t=this._perfMon)||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{e.invoke(t)}catch(_8){gs(_8)}}null==(n=this._perfMon)||n.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}class Cs{constructor(){C(this,"_past"),C(this,"_future"),C(this,"locked"),C(this,"versionId"),this._past=[],this._future=[],this.locked=!1,this.versionId=1}test_getPast(){return this._past}test_getFuture(){return this._future}push(e){this._future.length=0,this._past.push(e),this.versionId++}pop(){this._future.length=0,this._past.pop(),this.versionId++}amend(e){if(!this._past.length)throw new Error("400");this._future.length=0;const t=this.getClosestPastElement();if(!t)throw new Error("500");return t.merge(e),t}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}dispose(){this.versionId++}}class ks extends zo{constructor(e=new Cs){super(),C(this,"_onUndo",this._register(new xs)),C(this,"onUndo",this._onUndo.event),C(this,"_onRedo",this._register(new xs)),C(this,"onRedo",this._onUndo.event),C(this,"editStack"),this._register(this.editStack=e)}test_getEditStack(){return this.editStack}push(e){this.editStack.push(e)}pop(){this.editStack.pop()}amend(e){return this.editStack.amend(e)}canUndo(){return this.editStack.hasPastElements()}undo(){const e=this.editStack.getClosestPastElement();e&&(this.editStack.moveBackward(e),e.undo(),this._onUndo.fire())}canRedo(){return this.editStack.hasFutureElements()}redo(){const e=this.editStack.getClosestFutureElement();e&&(this.editStack.moveForward(e),e.redo(),this._onRedo.fire())}}var Es,Ss;function Is(e,t){const n=new Io(e),i=new Io(t);return n.gt(i)?1:-1}function Os(e,t){const n=new Io(e),i=new Io(t);return n.add(i).toExponential()}function Ts(e){return new Io(e).div(2).toExponential()}(Ss=Es||(Es={}))[Ss.backward=0]="backward",Ss[Ss.forward=1]="forward",Ss[Ss.inward=2]="inward",Ss[Ss.outward=3]="outward",Ss[Ss.self=4]="self",Ss[Ss.ancestors=5]="ancestors",Ss[Ss.descendants=6]="descendants";const Ms=(e,t,n,i)=>{const r=e.t(i||n),o=new RegExp(`^${r} (\\d+)?$`),s=t.map((e=>{var t,n;const i=null!=(n=null==(t=e.meta)?void 0:t.label)?n:"";let r="0";if(i){const e=o.exec(i);e&&(r=e[1]?e[1]:"0")}return parseInt(r)}));return`${r} ${Math.max(...s)+1}`};function Ns(){throw new Error("unsupported")}class As{constructor(e,t,n,i){this.at=e,this.props=t,this.meta=n,this.i18n=i}do(e){var t,n,i,r;const{ref:o,direction:s}=this.at,a={id:`comp-${ri()}`,props:this.props||{},meta:this.meta||{}},l=Ms(this.i18n,e.getValue().nodes,a.meta.componentType,a.meta.subType);if(a.meta.label=null!=(n=null==(t=a.meta)?void 0:t.label)?n:l,s===Es.inward){const t=e.getChildrenNodesOfId(o);if(a.from=o,t.length){const e=t.sort(((e,t)=>Is(t.order,e.order)));a.order=Ts(Os("1",e[0].order))}else a.order=Ts("1")}else{if(s!==Es.backward&&s!==Es.forward)throw new Error("unimplemented");{const t=e.getParentNodeOfId(o);if(!t)throw new Error("404");a.from=t.id;const{order:n}=e.getNodeById(o);if(s===Es.backward){const t=e.getNextSiblingNodeOfId(o),r=null!=(i=null==t?void 0:t.order)?i:"1";a.order=Ts(Os(n,r))}else{const t=e.getPreviousSiblingNodeOfId(o),i=null!=(r=null==t?void 0:t.order)?r:"0";a.order=Ts("0"===i?n:Os(n,i))}}}return e.getValue().nodes.push(a),a}}class Rs{constructor(e){this.at=e}do(e){const{ref:t,direction:n=Es.self}=this.at,i={[Es.forward]:this.deleteSibling,[Es.backward]:this.deleteSibling,[Es.inward]:this.deleteChildren,[Es.self]:this.delete,[Es.outward]:Ns,[Es.descendants]:Ns,[Es.ancestors]:Ns}[n];if(!i)throw new Error("unimpleted");return i.call(this,e,t,n)}deleteSibling(e,t,n){const i=e.getNodeById(t);if(!i.from)throw new Error("no parent");const r=e.getChildrenNodesOfId(i.from).sort(((e,t)=>Is(e.order,t.order))),o=r.indexOf(i);if(n===Es.forward){if(0===o)throw new Error("400");this.delete(e,r[o-1].id)}else{if(n!==Es.backward)throw new Error("bad arg");if(o===r.length-1)throw new Error("400");this.delete(e,r[o+1].id)}}deleteChildren(e,t){const n=e.getChildrenNodesOfId(t);for(let i=0,r=n.length;i<r;i++)this.delete(e,n[i].id)}delete(e,t){const{nodes:n,styles:i,links:r,triggers:o=[],animations:s=[],interactions:a=[]}=e.getValue();this.deleteChildren(e,t);const l=Ar(n,(e=>e.id===t));if(-1===l)return void console.error("404");for(let d=i.length-1;d>-1;d--){i[d].targetId===t&&Pr(i,d)}for(let d=r.length-1;d>-1;d--){r[d].targetId===t&&Pr(r,d)}const c=[];for(let d=o.length-1;d>-1;d--){const e=o[d];e.targetId===t&&(c.push(e.id),Pr(o,d))}for(let d=s.length-1;d>-1;d--){const e=s[d];(c.includes(e.triggerId)||e.effects.targetId===t)&&Pr(s,d)}for(let d=a.length-1;d>-1;d--){const e=a[d];c.includes(e.triggerId)&&Pr(a,d)}Pr(n,l)}}function Ds(e,t){const n=[{to:e,ref:t}];for(;n.length;){const{to:e,ref:t}=n.pop();if(!li(t)||!li(e))throw new Error("500");for(const i of hi(e))li(t[i])&&li(e[i])?n.push({to:e[i],ref:t[i]}):t[i]!==e[i]&&(void 0===e[i]?Reflect.deleteProperty(t,i):t[i]=e[i])}}class Ps{constructor(e,t){this.at=e,this.props=t}do(e){const t=Uo(e.getValue().nodes,(e=>e.id===this.at.ref));if(!t)throw new Error("404");Ds(this.props,t)}}class Ls{constructor(e,t){this.at=e,this.meta=t}do(e){const t=Uo(e.getValue().nodes,(e=>e.id===this.at.ref));if(!t)throw new Error("404");Ds(this.meta,t)}}class Us{constructor(e,t,n){this.id=e,this.newParent=t,this.referenceNodeId=n}do(e){const t=e.getChildrenNodesOfId(this.newParent).sort(((e,t)=>Is(e.order,t.order))),n=e.getNodeById(this.id);if(!n)throw new Error("404");if(n.from=this.newParent,si(this.referenceNodeId))t.length?n.order=Ts(Os(t[t.length-1].order,"1")):n.order="0.5";else{const i=e.getNodeById(this.referenceNodeId),r=t.indexOf(i);if(0===r)n.order=Ts(i.order);else{const e=t[r-1];n.order=Ts(Os(e.order,i.order))}}}}class Fs{constructor(e,t){this.id=e,this.beforeSiblingNodeId=t}do(e){const t=e.getParentNodeOfId(this.id),n=e.getChildrenNodesOfId(t.id).sort(((e,t)=>Is(e.order,t.order))),i=e.getNodeById(this.id);if(!i)throw new Error("404");if(i.from!==t.id)throw new Error("400");if(si(this.beforeSiblingNodeId))n.length?i.order=Ts(Os(n[n.length-1].order,"1")):i.order="0.5";else{const t=e.getNodeById(this.beforeSiblingNodeId),r=n.indexOf(t);if(0===r)i.order=Ts(t.order);else{const e=n[r-1];e.id!==this.id&&(i.order=Ts(Os(e.order,t.order)))}}}}class Bs{constructor(e,t,n=!0){this.ids=e,this.width=t,this.deep=n}do(e){return this.clone(e)}clone(e){const t=this.cloneNodes(e),n=t.map((e=>e.id)),i=this.cloneStyles(e,n),r=this.cloneLinks(e,n),o=this.cloneTriggers(e,n),s=this.cloneAnimations(e,n,o);return{nodes:t,styles:i,links:r,roots:this.ids,triggers:o,animations:s}}cloneNodes(e){const t=this.deep,n=[];return this.ids.forEach((function i(r){const o=e.getNodeById(r);if(o&&n.push(o),t){const t=e.getChildrenNodesOfId(r);t.length>0&&t.forEach((e=>{i(e.id)}))}})),di(n)}cloneStyles(e,t){const n=[],{styles:i}=e.getValue();return t.forEach((e=>{i.filter((t=>t.targetId===e)).forEach((e=>{const t=di(e);Object.assign(t,{id:`cloned-style-${e.id}`}),n.push(t)}))})),n}cloneLinks(e,t){const{links:n}=e.getValue();return di(n.filter((e=>t.includes(e.targetId))))}cloneTriggers(e,t){const{triggers:n}=e.getValue();return di(n.filter((e=>t.includes(e.targetId))))}cloneAnimations(e,t,n){const i=n.map((e=>e.id)),{animations:r}=e.getValue();return di(r.filter((e=>i.includes(e.triggerId))))}}class js{constructor(e,t,n,i){this.targetId=e,this.href=t,this.target=n,this.rel=i}do(e){const t=e.getValue().links,n=Uo(t,(e=>e.targetId===this.targetId));n?Object.assign(n,{href:this.href,target:this.target,rel:this.rel}):t.push({id:ri(),href:this.href,target:this.target,targetId:this.targetId,rel:this.rel})}}class Vs{constructor(e){this.targetId=e}do(e){const t=e.getValue().links,n=Ar(t,(e=>e.targetId===this.targetId));-1!==n&&Pr(t,n)}}var zs,Ks,Ws,Hs;function $s(e){return li(e)&&ai(e.id)&&ai(e.targetId)&&ai(e.href)&&ai(e.target)}function qs(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}(Ks=zs||(zs={}))._self="_self",Ks._blank="_blank",Ks._parent="_parent",Ks._top="_top",(Hs=Ws||(Ws={}))[""]="",Hs.nofollow="nofollow";const Ys=qs("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Gs(e){return!!e||""===e}function Xs(e){if(ha(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ma(i)?Zs(i):Xs(i);if(r)for(const e in r)t[e]=r[e]}return t}return ma(e)||va(e)?e:void 0}const Js=/;(?![^(]*\))/g,Qs=/:(.+)/;function Zs(e){const t={};return e.split(Js).forEach((e=>{if(e){const n=e.split(Qs);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function ea(e){let t="";if(ma(e))t=e;else if(ha(e))for(let n=0;n<e.length;n++){const i=ea(e[n]);i&&(t+=i+" ")}else if(va(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ta={},na=[],ia=()=>{},ra=()=>!1,oa=/^on[^a-z]/,sa=e=>oa.test(e),aa=e=>e.startsWith("onUpdate:"),la=Object.assign,ca=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},da=Object.prototype.hasOwnProperty,ua=(e,t)=>da.call(e,t),ha=Array.isArray,pa=e=>"[object Map]"===ba(e),fa=e=>"[object Set]"===ba(e),ga=e=>"function"==typeof e,ma=e=>"string"==typeof e,_a=e=>"symbol"==typeof e,va=e=>null!==e&&"object"==typeof e,ya=e=>va(e)&&ga(e.then)&&ga(e.catch),wa=Object.prototype.toString,ba=e=>wa.call(e),xa=e=>ba(e).slice(8,-1),Ca=e=>"[object Object]"===ba(e),ka=e=>ma(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,Ea=qs(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ia=/-(\w)/g,Oa=Sa((e=>e.replace(Ia,((e,t)=>t?t.toUpperCase():"")))),Ta=/\B([A-Z])/g,Ma=Sa((e=>e.replace(Ta,"-$1").toLowerCase())),Na=Sa((e=>e.charAt(0).toUpperCase()+e.slice(1))),Aa=Sa((e=>e?`on${Na(e)}`:"")),Ra=(e,t)=>!Object.is(e,t),Da=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Pa=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},La=e=>{const t=parseFloat(e);return isNaN(t)?e:t};var Ua,Fa,Ba,ja;function Va(e,...t){console.warn(`[Vue warn] ${e}`,...t)}(Fa=Ua||(Ua={})).GET="get",Fa.HAS="has",Fa.ITERATE="iterate",(ja=Ba||(Ba={})).SET="set",ja.ADD="add",ja.DELETE="delete",ja.CLEAR="clear";const za=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Ka=e=>(e.w&qa)>0,Wa=e=>(e.n&qa)>0,Ha=new WeakMap;let $a=0,qa=1;const Ya=[];let Ga;const Xa=Symbol("iterate"),Ja=Symbol("Map key iterate");class Qa{constructor(e,t=null,n){C(this,"active",!0),C(this,"deps",[]),C(this,"computed"),C(this,"allowRecurse"),C(this,"onStop"),C(this,"onTrack"),C(this,"onTrigger"),this.fn=e,this.scheduler=t,function(e,t){(t=t||void 0)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!Ya.includes(this))try{return Ya.push(Ga=this),tl.push(el),el=!0,qa=1<<++$a,$a<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=qa})(this):Za(this),this.fn()}finally{$a<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Ka(r)&&!Wa(r)?r.delete(e):t[n++]=r,r.w&=~qa,r.n&=~qa}t.length=n}})(this),qa=1<<--$a,nl(),Ya.pop();const e=Ya.length;Ga=e>0?Ya[e-1]:void 0}}stop(){this.active&&(Za(this),this.onStop&&this.onStop(),this.active=!1)}}function Za(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let el=!0;const tl=[];function nl(){const e=tl.pop();el=void 0===e||e}function il(e,t,n){if(!el||void 0===Ga)return;let i=Ha.get(e);i||Ha.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=za());!function(e,t){let n=!1;$a<=30?Wa(e)||(e.n|=qa,n=!Ka(e)):n=!e.has(Ga);n&&(e.add(Ga),Ga.deps.push(e),Ga.onTrack&&Ga.onTrack(Object.assign({effect:Ga},t)))}(r,{effect:Ga,target:e,type:t,key:n})}function rl(e,t,n,i,r,o){const s=Ha.get(e);if(!s)return;let a=[];if(t===Ba.CLEAR)a=[...s.values()];else if("length"===n&&ha(e))s.forEach(((e,t)=>{("length"===t||t>=i)&&a.push(e)}));else switch(void 0!==n&&a.push(s.get(n)),t){case Ba.ADD:ha(e)?ka(n)&&a.push(s.get("length")):(a.push(s.get(Xa)),pa(e)&&a.push(s.get(Ja)));break;case Ba.DELETE:ha(e)?a.push(s.get("length")):(a.push(s.get(Xa)),pa(e)&&a.push(s.get(Ja)));break;case Ba.SET:pa(e)&&a.push(s.get(Xa))}const l={target:e,type:t,key:n,newValue:i,oldValue:r,oldTarget:o};if(1===a.length)a[0]&&ol(a[0],l);else{const e=[];for(const t of a)t&&e.push(...t);ol(za(e),l)}}function ol(e,t){for(const n of ha(e)?e:[...e])(n!==Ga||n.allowRecurse)&&(ga(n.onTrigger)&&n.onTrigger(la({effect:n},t)),n.scheduler?n.scheduler():n.run())}function sl(e){return Boolean(e&&!0===e.__v_isRef)}const al=qs("__proto__,__v_isRef,__isVue"),ll=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(_a)),cl=dl();function dl(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=yl(this);for(let t=0,r=this.length;t<r;t++)il(n,Ua.GET,t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(yl)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){tl.push(el),el=!1;const n=yl(this)[t].apply(this,e);return nl(),n}})),e}const ul={get:function(e,t,n){if(t===hl.IS_REACTIVE)return!0;if(t===hl.RAW&&n===fl.get(e))return e;if(ha(e)&&ua(cl,t))return Reflect.get(cl,t,n);const i=Reflect.get(e,t,n);if(_a(t)?ll.has(t):al(t))return i;if(il(e,Ua.GET,t),sl(i))throw new Error("500");if(va(i)){const e=_l(i);return function(e,t,n){if(1!==El)return;wl.set(e,{key:t,parent:n})}(e,t,n),e}return i},set:function(e,t,n,i){if(!Sl())return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0;let r=e[t];if(n=yl(n),r=yl(r),!ha(e)&&sl(r)&&!sl(n))throw new Error("500");const o=ha(e)&&ka(t)?Number(t)<e.length:ua(e,t),s=Reflect.set(e,t,n,i);return e===yl(i)&&(o?Ra(n,r)&&(rl(e,Ba.SET,t,n,r),kl(i,Ba.SET,t,n,r)):(rl(e,Ba.ADD,t,n),kl(i,Ba.ADD,t,n))),s},deleteProperty:function(e,t){if(!Sl())return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0;const n=ua(e,t),i=e[t],r=Reflect.deleteProperty(e,t);return r&&n&&(rl(e,Ba.DELETE,t,void 0,i),kl(e,Ba.DELETE,t,void 0,i)),r},has:function(e,t){const n=Reflect.has(e,t);return _a(t)&&ll.has(t)||il(e,Ua.HAS,t),n},ownKeys:function(e){return il(e,Ua.ITERATE,ha(e)?"length":Xa),Reflect.ownKeys(e)}};var hl,pl;(pl=hl||(hl={})).SKIP="__v_skip",pl.IS_REACTIVE="__v_isReactive",pl.IS_READONLY="__v_isReadonly",pl.RAW="__v_raw";const fl=new WeakMap;var gl,ml;function _l(e){return e&&e[hl.IS_READONLY]?e:function(e,t,n,i){if(!va(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e[hl.RAW]&&(!t||!e[hl.IS_REACTIVE]))return e;const r=i.get(e);if(r)return r;const o=(s=e,s[hl.SKIP]||!Object.isExtensible(s)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(xa(s)));var s;if(0===o)return e;if(2===o)throw new Error("500");const a=new Proxy(e,n);return i.set(e,a),a}(e,!1,ul,fl)}function vl(e){return!(!e||!e[hl.IS_REACTIVE])}function yl(e){const t=e&&e[hl.RAW];return t?yl(t):e}(ml=gl||(gl={}))[ml.INVALID=0]="INVALID",ml[ml.COMMON=1]="COMMON",ml[ml.COLLECTION=2]="COLLECTION";const wl=new WeakMap;var bl,xl;(xl=bl||(bl={}))[xl.none=0]="none",xl[xl.update=1]="update",xl[xl.undoRedo=2]="undoRedo";const Cl=[];function kl(e,t,n,i,r){if(1!==El)return;if(_a(n))throw new Error("500");let o;if(!vl(e)){const t=fl.get(e);if(!t)throw new Error("500");e=t}const s=function(e){const t=[];for(;e;){const n=wl.get(e);if(!n)break;const{key:i,parent:r}=n;t.unshift(i),e=r}return[e,t]}(e),[a,l]=s;if(l.push(n),i=Il(i),r=Il(r),t===Ba.SET)o={op:"replace",path:l,root:a,newValue:i,oldValue:r};else if(t===Ba.ADD)o={op:"add",path:l,root:a,newValue:i,oldValue:r};else{if(t===Ba.CLEAR)throw new Error("500");if(t!==Ba.DELETE)throw new Error("500");o={op:"remove",path:l,root:a,newValue:i,oldValue:r}}Cl.push(o)}let El=0;function Sl(){return 0!==El}function Il(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=ha(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=Il(e[n]):t[n]=e[n]})),t}const Ol=Kr("editor");function Tl(e,t,n,i=null,r,o){const s=[],a=new Map;n.forEach((e=>{a.set(e.id,e)}));const l=t.filter((t=>t.targetId===e)).filter((e=>!r||!o||e.selectorType===r&&e.subSelector===o));for(const c of l){const e=c.breakpointId;if(si(e))s.push(c);else if(null!==i){const t=a.get(e);let n;si(t.maxWidth)||(n=t.maxWidth>=i),n&&s.push(c)}}return s}const Ml=Kr("i18nService");class Nl{constructor(e,t,n){this.type=e,this.targetId=t,this.params=n}do(e){const t=e.getValue().triggers,n=w({id:ri(),type:this.type},this.params);return this.targetId&&Reflect.set(n,"targetId",this.targetId),t.push(n),n}}class Al{constructor(e,t){this.id=e,this.params=t}do(e){const t=e.getValue().triggers.find((e=>e.id===this.id));if(!t)throw new Error("404");Object.assign(t,this.params)}}class Rl{constructor(e){this.id=e}do(e){const{triggers:t=[],interactions:n=[],animations:i=[]}=e.getValue(),r=Ar(t,(e=>e.id===this.id));if(-1!==r){for(let e=i.length-1;e>-1;e--){i[e].triggerId===this.id&&Pr(i,e)}for(let e=n.length-1;e>-1;e--){n[e].triggerId===this.id&&Pr(n,e)}Pr(t,r)}}}class Dl{constructor(e,t,n){this.triggerId=e,this.effects=t,this.timeline=n}do(e){const t=e.getValue().animations,n={id:ri(),triggerId:this.triggerId,effects:this.effects};return this.timeline&&Object.assign(n,{timeline:this.timeline}),t.push(n),n}}class Pl{constructor(e,t){this.id=e,this.effects=t}do(e){const t=e.getValue().animations.find((e=>e.id===this.id));if(!t)throw new Error("404");Reflect.set(t,"effects",this.effects)}}class Ll{constructor(e,t){this.id=e,this.timeline=t}do(e){const t=e.getValue().animations.find((e=>e.id===this.id));if(!t)throw new Error("404");this.timeline?Reflect.set(t,"timeline",this.timeline):Reflect.deleteProperty(t,"timeline")}}class Ul{constructor(e){this.id=e}do(e){const t=e.getValue().animations,n=Ar(t,(e=>e.id===this.id));-1!==n&&Pr(t,n)}}class Fl{constructor(e,t,n,i){this.triggerType=e,this.eventType=t,this.detail=n,this.targetId=i}do(e){const{interactions:t}=e.getValue(),n=e.addTrigger(this.triggerType,this.targetId,{}),i={id:ri(),triggerId:n.id,eventType:this.eventType,detail:this.detail};return t.push(i),i}}class Bl{constructor(e){this.id=e}do(e){const{interactions:t}=e.getValue(),n=Ar(t,(e=>e.id===this.id)),i=t[n];-1!==n&&Pr(t,n),e.removeTrigger(i.triggerId)}}class jl{constructor(e,t){this.id=e,this.params=t}do(e){const{interactions:t}=e.getValue(),n=t[Ar(t,(e=>e.id===this.id))];n&&Object.assign(n,this.params)}}class Vl{constructor(e,t,n,i){C(this,"changes"),C(this,"versionId"),C(this,"isUndoing"),C(this,"isRedoing"),this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i}merge(e){const t=[].concat(this.changes).concat(e.changes),n=e.versionId,i=this.isUndoing||e.isUndoing,r=this.isRedoing||e.isRedoing;return new Vl(t,n,i,r)}}class zl{constructor(e){C(this,"beforeVersionId"),C(this,"afterVersionId"),C(this,"beforeCursorState"),C(this,"afterCursorState"),C(this,"patches",[]),this.model=e;const t=e.getAlternativeVersionId();this.beforeVersionId=t,this.afterVersionId=t}test_getPatches(){return this.patches}isVoid(){return!this.patches.length}merge(e){this.patches=this.patches.concat(e.patches)}append(e,t,n){e.length>0&&(this.patches=this.patches.concat(e)),this.afterVersionId=t,this.afterCursorState=n}redo(){this.model._applyRedo(this.patches.slice(),this.afterVersionId,this.afterCursorState)}undo(){this.model._applyUndo(this.patches.slice(),this.beforeVersionId,this.beforeCursorState)}}var Kl=Object.defineProperty,Wl=Object.getOwnPropertyDescriptor,Hl=(e,t)=>(n,i)=>t(n,i,e);class $l extends zo{constructor(){super(...arguments),C(this,"updateStackDepth",0),C(this,"patches",[]),C(this,"updateMode",Hr.None)}beginUpdate(){this.updateStackDepth++}endUpdate(){this.updateStackDepth--}isUpdating(){return this.updateStackDepth>0}hasUnCommittdChanges(){return this.patches.length>0}clearUnCommittdChanges(){this.patches.length=0}}let ql,Yl=(t=class extends zo{constructor(e,t,n,i){super(),C(this,"id",Yl.MODEL_ID++),C(this,"_isDisposed",!1),C(this,"_isDisposing",!1),C(this,"_versionId",1),C(this,"_alternativeVersionId",1),C(this,"_value"),C(this,"_onUpdated",this._register(new xs)),C(this,"_onWillDispose",this._register(new xs)),C(this,"_eventEmitter",this._register(new Xl)),C(this,"ctx"),C(this,"_cloneFragment",null),C(this,"_isUndoing"),C(this,"_isRedoing"),C(this,"_undoRedoElementOfAdd"),this.instantiationService=n,this.i18n=i,n.store(Wr,this),this._value=_l(Gl(e)),this.ctx=new $l,this._isUndoing=!1,this._isRedoing=!1}get onWillDispose(){return this._onWillDispose.event}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t)))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._isDisposed=!0,super.dispose(),this._isDisposing=!1,this._value=null}get onUpdated(){return this._onUpdated.event}get updateMode(){return this.ctx.updateMode}isUpdating(){return this.ctx.isUpdating()}getValue(){return this._value}replaceModel(e){this._value=_l(Gl(e)),this.ctx=new $l}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getVersionId(){return this._assertNotDisposed(),this._versionId}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e){this._isDisposing||this._eventEmitter.fire(e)}_applyUndo(e,t,n){const i=e.reverse().map((e=>function(e){const{op:t,newValue:n,oldValue:i}=e;switch(t){case"replace":return b(w({},e),{newValue:i,oldValue:n});case"add":return b(w({},e),{op:"remove",oldValue:n,newValue:i});case"remove":return b(w({},e),{op:"add",oldValue:n,newValue:i});default:throw new Error("500")}}(e)));this._applyUndoRedoEdits(i,!0,!1,t,n)}_applyRedo(e,t,n){this._applyUndoRedoEdits(e,!1,!0,t,n)}_applyUndoRedoEdits(e,t,n,i,r){try{this._eventEmitter.beginDeferredEmit(),this._isUndoing=t,this._isRedoing=n,this.applyEdits(e),this._overwriteAlternativeVersionId(i)}catch(_8){console.error(_8)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r)}}applyEdits(e){try{return this._eventEmitter.beginDeferredEmit(),this._doApplyEdits(e)}catch(_8){console.error(_8)}finally{this._eventEmitter.endDeferredEmit(),this._onUpdated.fire()}}_doApplyEdits(e){var t;t=this._value,El=2,e.forEach((e=>{const{path:n,op:i,newValue:r,root:o}=e;let s=t;for(let t=0;t<n.length-1;t++){const e=n[t];if((va(s)||ha)&&("__proto__"===e||"constructor"===e))throw new Error("500");if("function"==typeof s&&"prototype"===e)throw new Error("500");if(s=Reflect.get(s,e),"object"!=typeof s)throw new Error("500")}const a=n[n.length-1];switch(i){case"replace":case"add":return Reflect.set(s,a,r);case"remove":return ha(s)?(s.splice(parseInt(a.toString(),10),1),!0):Reflect.deleteProperty(s,a);default:throw new Error("500")}})),El=0,this._emitContentChangedEvent(new Vl(e,this.getVersionId(),this._isUndoing,this._isRedoing))}changeWithoutHistory(e){this.doUpdate(e)}internal_transform(e){if(this.updateMode===Hr.Add&&this.internal_commitAndMerge(),this.ctx.updateMode===Hr.None)this.ctx.updateMode=Hr.Transform;else if(this.ctx.updateMode===Hr.Transform)throw new Error("400");const t=this.doUpdate(e);if(this.ctx.updateMode=Hr.None,t){const e=new zl(this);return this._increaseVersionId(),this._onUpdated.fire(),e.append(t,this.getVersionId(),[]),e}}doUpdate(e){try{this.ctx.clearUnCommittdChanges(),this._eventEmitter.beginDeferredEmit(),this.ctx.beginUpdate();const t=function(e){El=1,e(),El=0;const t=Cl.slice();return Cl.length=0,t}((()=>{try{e(this)}catch(_8){console.error(_8)}}));this.ctx.endUpdate();for(let e=0,n=t.length;e<n;e++)this.ctx.patches.push(t[e]);return this.ctx.hasUnCommittdChanges()?(this._emitContentChangedEvent(new Vl(t,this.getVersionId(),this._isUndoing,this._isRedoing)),this.ctx.patches.slice()):null}catch(_8){}finally{this.ctx.clearUnCommittdChanges(),this._eventEmitter.endDeferredEmit()}}internal_add(e){if(this.ctx.updateMode===Hr.None)this.ctx.updateMode=Hr.Add;else if(this.ctx.updateMode===Hr.Transform)throw new Error("400");let t=!1;this._undoRedoElementOfAdd&&(this._undoRedoElementOfAdd.undo(),t=!0,this._undoRedoElementOfAdd=null);const n=this.doUpdate(e);let i;if(n){if(this._undoRedoElementOfAdd)throw new Error("500");{const e=new zl(this);this._undoRedoElementOfAdd=e,this._onUpdated.fire(),e.append(n,this.getVersionId(),[]),i=e}}return{shouldPop:t,record:i}}internal_commitAndMerge(){const e=this._undoRedoElementOfAdd;this._undoRedoElementOfAdd=null,e&&(this._increaseVersionId(),e.append([],this.getVersionId(),[])),this._onUpdated.fire(),this.ctx.updateMode=Hr.None}internal_fork(){if(this.ctx.isUpdating())throw new Error("400");this.updateMode===Hr.Add&&this.internal_commitAndMerge()}internal_checkout(){const e=!!this._undoRedoElementOfAdd&&!this._undoRedoElementOfAdd.isVoid();return e&&(this._undoRedoElementOfAdd.undo(),this._undoRedoElementOfAdd=null),e}_updateContextGuard(){if(!this.ctx.isUpdating())throw new Error("method should not be called outside transform()")}getNodeById(e){const t=this.getValue().nodes.filter((t=>t.id===e));if(0===t.length)return null;if(t.length>1)throw new Error("500");return t[0]}getParentNodeOfId(e){const t=this.getNodeById(e);return this.getNodeById(t.from)}getPreviousSiblingNodeOfId(e){const t=this.getParentNodeOfId(e);if(!t)throw new Error("404");const n=this.getChildrenNodesOfId(t.id);if(n.length<=1)return null;const i=n.findIndex((t=>t.id===e));return n[i-1]||null}getNextSiblingNodeOfId(e){const t=this.getParentNodeOfId(e);if(!t)throw new Error("404");const n=this.getChildrenNodesOfId(t.id);if(n.length<=1)return null;const i=n.findIndex((t=>t.id===e));return n[i+1]||null}getChildrenNodesOfId(e){return this.getValue().nodes.filter((t=>t.from===e)).sort(((e,t)=>Is(e.order,t.order)))}getAncestorNodesOfId(e){const t=[];let n=this.getParentNodeOfId(e);for(;n;)t.unshift(n),n=this.getParentNodeOfId(n.id);return t}isAncestorNodeOfId(e,t){return this.getAncestorNodesOfId(t).some((t=>t.id===e))}addNode(e,t={},n={}){this._updateContextGuard();return new As(di(e),di(t),di(n),this.i18n).do(this)}getClonedFragment(){return this._cloneFragment}setClonedFragment(e){this._cloneFragment=e}cloneFragment(e,t=null,n=!0){return new Bs(e,t,n).do(this)}removeNode(e){this._updateContextGuard();new Rs(e).do(this)}removeNodes(e){this._updateContextGuard();for(const t of e){new Rs({ref:t,direction:Es.self}).do(this)}}reparentNode(e,t,n=null){this._updateContextGuard();new Us(e,t,n).do(this)}reorderNode(e,t=null){this._updateContextGuard();new Fs(e,t).do(this)}queryNodes(e){const{nodes:t}=this.getValue(),n=[];for(const i of t)e(i)&&n.push(i);return n}updateNodeById(e,t){this._updateContextGuard();new Ps({ref:e,direction:Es.self},{props:di(t)}).do(this)}updateNodeMetaById(e,t){this._updateContextGuard();new Ls({ref:e,direction:Es.self},{meta:di(t)}).do(this)}updateStyle(e,t,n=null,i,r){this._updateContextGuard();new Tr(e,di(t),n,i,r).do(this)}removeStyle(e,t,n=null){this._updateContextGuard();new Mr(e,di(t),n).do(this)}updateBpStyles(e,t,n){let i=null;n&&(i=n.minWidth),this.updateStyle(e,t,i)}updateAllBpStyles(e,t,n=!0){const{breakpoints:i}=this.getValue(),r=di(t);i.forEach((i=>{this.removeStyle(e,n?null:t,i.minWidth)})),this.updateBpStyles(e,r,null)}getChildrenGridAreaInfo(e){const t=this.getChildrenNodesOfId(e),n=this.getMatchedStyle(e),{rows:i,columns:r,rowsTemplate:o,columnsTemplate:s}=(e=>{if(!e["grid-template-rows"]||!e["grid-template-columns"])throw new Error("404");const t=Hi(e["grid-template-rows"]);return{rows:t.length,columns:1,rowsTemplate:t,columnsTemplate:Hi(e["grid-template-columns"])}})(n.attrs);return{rows:i,columns:r,orders:t.map((e=>{const{id:t}=e,n=this.getMatchedStyle(t),i=n.getAttr("display"),r="grid"===i||"none"===i;return{id:t,gridArea:r?Er(n.attrs):null,changed:!1,isGrid:r}})).filter((e=>e.isGrid&&e.gridArea)).sort(((e,t)=>{const{gridArea:n}=e,{gridArea:i}=t;return n.rowStart>i.rowStart||n.rowStart===i.rowStart&&n.columnStart>i.columnEnd?1:-1})),rowsTemplate:o,columnsTemplate:s}}insertGridNode(e,t,n,i){this._updateContextGuard();new Nr(e,t,n,i).do(this)}reorderGridNode(e,t,n){this._updateContextGuard();new Nr(e,t,n,Ir.reorder).do(this)}removeGridNode(e,t){this._updateContextGuard();new Nr(e,null,t,Ir.delete).do(this)}internal_getMatchedStyles(e,t=null,n,i){const{styles:r,breakpoints:o}=this.getValue();return Tl(e,r,o,t,n,i)}internal_getMatchedBreakpoint(e=null){if("number"!=typeof e)return null;const{breakpoints:t}=this.getValue();for(const n of t){let t=!0;if(si(n.minWidth)||(t=t&&n.minWidth<=e),si(n.maxWidth)||(t=t&&n.maxWidth>=e),t)return n}return null}internal_getMatchedBreakpointById(e){return this.getValue().breakpoints.find((t=>t.id===e))}getMatchedStyle(e,t=null){return new Gr(this.internal_getMatchedStyles(e,t))}getStyleBySelector(e,t,n,i){return new Gr(this.internal_getMatchedStyles(e,i,t,n))}updateLink(e,t,n,i=Ws.nofollow){this._updateContextGuard();new js(e,t,n,i).do(this)}removeLink(e){this._updateContextGuard();new Vs(e).do(this)}getLink(e){return this.getValue().links.find((t=>t.targetId===e))}addAnimation(e,t,n){this._updateContextGuard();return new Dl(e,t,n).do(this)}updateAnimationEffects(e,t){this._updateContextGuard();new Pl(e,t).do(this)}updateAnimationTimeline(e,t){this._updateContextGuard();new Ll(e,t).do(this)}removeAnimation(e){this._updateContextGuard();new Ul(e).do(this)}addTrigger(e,t,n){this._updateContextGuard();return new Nl(e,t,n).do(this)}updateTrigger(e,t){this._updateContextGuard();new Al(e,t).do(this)}removeTrigger(e){this._updateContextGuard();new Rl(e).do(this)}updateMeta(e){this._value.meta=di(e)}addInteraction(e,t,n,i){return this._updateContextGuard(),new Fl(e,t,n,i).do(this)}removeInteraction(e){return this._updateContextGuard(),new Bl(e).do(this)}updateInteraction(e,t){return this._updateContextGuard(),new jl(e,t).do(this)}},C(t,"MODEL_ID",0),t);function Gl(e){return!e.triggers&&(e.triggers=[]),!e.animations&&(e.animations=[]),!e.interactions&&(e.interactions=[]),e.fontfaces||(e.fontfaces=[]),e}Yl=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Wl(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Kl(t,n,o),o})([Hl(2,Vr),Hl(3,Ml)],Yl);class Xl extends zo{constructor(){super(),C(this,"_fastEmitter",this._register(new xs)),C(this,"fastEvent",this._fastEmitter.event),C(this,"_slowEmitter",this._register(new xs)),C(this,"slowEvent",this._slowEmitter.event),C(this,"_deferredCnt"),C(this,"_deferredEvent"),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){const e=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}const Jl=[];class Ql{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ql&&(this.parent=ql,this.index=(ql.scopes||(ql.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Jl.push(this),ql=this)}off(){this.active&&(Jl.pop(),ql=Jl[Jl.length-1])}stop(e){if(this.active){if(this.effects.forEach((e=>e.stop())),this.cleanups.forEach((e=>e())),this.scopes&&this.scopes.forEach((e=>e.stop(!0))),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}const Zl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ec=e=>(e.w&rc)>0,tc=e=>(e.n&rc)>0,nc=new WeakMap;let ic=0,rc=1;const oc=[];let sc;const ac=Symbol(""),lc=Symbol("");class cc{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],function(e,t){(t=t||ql)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!oc.includes(this))try{return oc.push(sc=this),hc.push(uc),uc=!0,rc=1<<++ic,ic<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=rc})(this):dc(this),this.fn()}finally{ic<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];ec(r)&&!tc(r)?r.delete(e):t[n++]=r,r.w&=~rc,r.n&=~rc}t.length=n}})(this),rc=1<<--ic,fc(),oc.pop();const e=oc.length;sc=e>0?oc[e-1]:void 0}}stop(){this.active&&(dc(this),this.onStop&&this.onStop(),this.active=!1)}}function dc(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let uc=!0;const hc=[];function pc(){hc.push(uc),uc=!1}function fc(){const e=hc.pop();uc=void 0===e||e}function gc(e,t,n){if(!mc())return;let i=nc.get(e);i||nc.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=Zl()),_c(r)}function mc(){return uc&&void 0!==sc}function _c(e,t){let n=!1;ic<=30?tc(e)||(e.n|=rc,n=!ec(e)):n=!e.has(sc),n&&(e.add(sc),sc.deps.push(e))}function vc(e,t,n,i,r,o){const s=nc.get(e);if(!s)return;let a=[];if("clear"===t)a=[...s.values()];else if("length"===n&&ha(e))s.forEach(((e,t)=>{("length"===t||t>=i)&&a.push(e)}));else switch(void 0!==n&&a.push(s.get(n)),t){case"add":ha(e)?ka(n)&&a.push(s.get("length")):(a.push(s.get(ac)),pa(e)&&a.push(s.get(lc)));break;case"delete":ha(e)||(a.push(s.get(ac)),pa(e)&&a.push(s.get(lc)));break;case"set":pa(e)&&a.push(s.get(ac))}if(1===a.length)a[0]&&yc(a[0]);else{const e=[];for(const t of a)t&&e.push(...t);yc(Zl(e))}}function yc(e,t){for(const n of ha(e)?e:[...e])(n!==sc||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const wc=qs("__proto__,__v_isRef,__isVue"),bc=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(_a)),xc=Ic(),Cc=Ic(!1,!0),kc=Ic(!0),Ec=Sc();function Sc(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ud(this);for(let t=0,r=this.length;t<r;t++)gc(n,0,t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(ud)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){pc();const n=ud(this)[t].apply(this,e);return fc(),n}})),e}function Ic(e=!1,t=!1){return function(n,i,r){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&r===(e?t?rd:id:t?nd:td).get(n))return n;const o=ha(n);if(!e&&o&&ua(Ec,i))return Reflect.get(Ec,i,r);const s=Reflect.get(n,i,r);if(_a(i)?bc.has(i):wc(i))return s;if(e||gc(n,0,i),t)return s;if(md(s)){return!o||!ka(i)?s.value:s}return va(s)?e?sd(s):od(s):s}}function Oc(e=!1){return function(t,n,i,r){let o=t[n];if(!e&&(i=ud(i),o=ud(o),!ha(t)&&md(o)&&!md(i)))return o.value=i,!0;const s=ha(t)&&ka(n)?Number(n)<t.length:ua(t,n),a=Reflect.set(t,n,i,r);return t===ud(r)&&(s?Ra(i,o)&&vc(t,"set",n,i):vc(t,"add",n,i)),a}}const Tc={get:xc,set:Oc(),deleteProperty:function(e,t){const n=ua(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&vc(e,"delete",t,void 0),i},has:function(e,t){const n=Reflect.has(e,t);return _a(t)&&bc.has(t)||gc(e,0,t),n},ownKeys:function(e){return gc(e,0,ha(e)?"length":ac),Reflect.ownKeys(e)}},Mc={get:kc,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Nc=la({},Tc,{get:Cc,set:Oc(!0)}),Ac=e=>va(e)?od(e):e,Rc=e=>va(e)?sd(e):e,Dc=e=>e,Pc=e=>Reflect.getPrototypeOf(e);function Lc(e,t,n=!1,i=!1){const r=ud(e=e.__v_raw),o=ud(t);t!==o&&!n&&gc(r,0,t),!n&&gc(r,0,o);const{has:s}=Pc(r),a=i?Dc:n?Rc:Ac;return s.call(r,t)?a(e.get(t)):s.call(r,o)?a(e.get(o)):void(e!==r&&e.get(t))}function Uc(e,t=!1){const n=this.__v_raw,i=ud(n),r=ud(e);return e!==r&&!t&&gc(i,0,e),!t&&gc(i,0,r),e===r?n.has(e):n.has(e)||n.has(r)}function Fc(e,t=!1){return e=e.__v_raw,!t&&gc(ud(e),0,ac),Reflect.get(e,"size",e)}function Bc(e){e=ud(e);const t=ud(this);return Pc(t).has.call(t,e)||(t.add(e),vc(t,"add",e,e)),this}function jc(e,t){t=ud(t);const n=ud(this),{has:i,get:r}=Pc(n);let o=i.call(n,e);o||(e=ud(e),o=i.call(n,e));const s=r.call(n,e);return n.set(e,t),o?Ra(t,s)&&vc(n,"set",e,t):vc(n,"add",e,t),this}function Vc(e){const t=ud(this),{has:n,get:i}=Pc(t);let r=n.call(t,e);r||(e=ud(e),r=n.call(t,e)),i&&i.call(t,e);const o=t.delete(e);return r&&vc(t,"delete",e,void 0),o}function zc(){const e=ud(this),t=0!==e.size,n=e.clear();return t&&vc(e,"clear",void 0,void 0),n}function Kc(e,t){return function(n,i){const r=this,o=r.__v_raw,s=ud(o),a=t?Dc:e?Rc:Ac;return!e&&gc(s,0,ac),o.forEach(((e,t)=>n.call(i,a(e),a(t),r)))}}function Wc(e,t,n){return function(...i){const r=this.__v_raw,o=ud(r),s=pa(o),a="entries"===e||e===Symbol.iterator&&s,l="keys"===e&&s,c=r[e](...i),d=n?Dc:t?Rc:Ac;return!t&&gc(o,0,l?lc:ac),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function Hc(e){return function(...t){return"delete"!==e&&this}}function $c(){const e={get(e){return Lc(this,e)},get size(){return Fc(this)},has:Uc,add:Bc,set:jc,delete:Vc,clear:zc,forEach:Kc(!1,!1)},t={get(e){return Lc(this,e,!1,!0)},get size(){return Fc(this)},has:Uc,add:Bc,set:jc,delete:Vc,clear:zc,forEach:Kc(!1,!0)},n={get(e){return Lc(this,e,!0)},get size(){return Fc(this,!0)},has(e){return Uc.call(this,e,!0)},add:Hc("add"),set:Hc("set"),delete:Hc("delete"),clear:Hc("clear"),forEach:Kc(!0,!1)},i={get(e){return Lc(this,e,!0,!0)},get size(){return Fc(this,!0)},has(e){return Uc.call(this,e,!0)},add:Hc("add"),set:Hc("set"),delete:Hc("delete"),clear:Hc("clear"),forEach:Kc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=Wc(r,!1,!1),n[r]=Wc(r,!0,!1),t[r]=Wc(r,!1,!0),i[r]=Wc(r,!0,!0)})),[e,n,t,i]}const[qc,Yc,Gc,Xc]=$c();function Jc(e,t){const n=t?e?Xc:Gc:e?Yc:qc;return(t,i,r)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(ua(n,i)&&i in t?n:t,i,r)}const Qc={get:Jc(!1,!1)},Zc={get:Jc(!1,!0)},ed={get:Jc(!0,!1)},td=new WeakMap,nd=new WeakMap,id=new WeakMap,rd=new WeakMap;function od(e){return e&&e.__v_isReadonly?e:ad(e,!1,Tc,Qc,td)}function sd(e){return ad(e,!0,Mc,ed,id)}function ad(e,t,n,i,r){if(!va(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const s=(a=e).__v_skip||!Object.isExtensible(a)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(xa(a));var a;if(0===s)return e;const l=new Proxy(e,2===s?i:n);return r.set(e,l),l}function ld(e){return cd(e)?ld(e.__v_raw):!(!e||!e.__v_isReactive)}function cd(e){return!(!e||!e.__v_isReadonly)}function dd(e){return ld(e)||cd(e)}function ud(e){const t=e&&e.__v_raw;return t?ud(t):e}function hd(e){return Pa(e,"__v_skip",!0),e}function pd(e){mc()&&((e=ud(e)).dep||(e.dep=Zl()),_c(e.dep))}function fd(e,t){(e=ud(e)).dep&&yc(e.dep)}const gd=e=>va(e)?od(e):e;function md(e){return Boolean(e&&!0===e.__v_isRef)}function _d(e){return function(e,t=!1){if(md(e))return e;return new vd(e,t)}(e)}class vd{constructor(e,t=!1){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ud(e),this._value=t?e:gd(e)}get value(){return pd(this),this._value}set value(e){e=this._shallow?e:ud(e),Ra(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:gd(e),fd(this))}}const yd={get:(e,t,n)=>{return md(i=Reflect.get(e,t,n))?i.value:i;var i},set:(e,t,n,i)=>{const r=e[t];return md(r)&&!md(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function wd(e){return ld(e)?e:new Proxy(e,yd)}class bd{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new cc(e,(()=>{this._dirty||(this._dirty=!0,fd(this))})),this.__v_isReadonly=n}get value(){const e=ud(this);return pd(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function xd(e,t){let n,i;ga(e)?(n=e,i=ia):(n=e.get,i=e.set);return new bd(n,i,ga(e)||!e.set)}Promise.resolve();function Cd(e,t,...n){const i=e.vnode.props||ta;let r=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in i){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:t,trim:o}=i[e]||ta;o?r=n.map((e=>e.trim())):t&&(r=n.map(La))}let a,l=i[a=Aa(t)]||i[a=Aa(Oa(t))];!l&&o&&(l=i[a=Aa(Ma(t))]),l&&Ih(l,e,6,r);const c=i[a+"Once"];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,Ih(c,e,6,r)}}function kd(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(void 0!==r)return r;const o=e.emits;let s={},a=!1;if(!ga(e)){const i=e=>{const n=kd(e,t,!0);n&&(a=!0,la(s,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return o||a?(ha(o)?o.forEach((e=>s[e]=null)):la(s,o),i.set(e,s),s):(i.set(e,null),null)}function Ed(e,t){return!(!e||!sa(t))&&(t=t.slice(2).replace(/Once$/,""),ua(e,t[0].toLowerCase()+t.slice(1))||ua(e,Ma(t))||ua(e,t))}let Sd=null,Id=null;function Od(e){const t=Sd;return Sd=e,Id=e&&e.type.__scopeId||null,t}function Td(e,t=Sd,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&Hu(-1);const r=Od(t),o=e(...n);return Od(r),i._d&&Hu(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Md(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[s],slots:a,attrs:l,emit:c,render:d,renderCache:u,data:h,setupState:p,ctx:f,inheritAttrs:g}=e;let m;const _=Od(e);try{let e;if(4&n.shapeFlag){const t=r||i;m=oh(d.call(t,t,u,o,p,h,f)),e=l}else{const n=t;0,m=oh(n.length>1?n(o,{attrs:l,slots:a,emit:c}):n(o,null)),e=t.props?l:Nd(l)}let _=m;if(e&&!1!==g){const t=Object.keys(e),{shapeFlag:n}=_;t.length&&7&n&&(s&&t.some(aa)&&(e=Ad(e,s)),_=nh(_,e))}0,n.dirs&&(_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),m=_}catch(v){Vu.length=0,Oh(v,e,1),m=th(Bu)}return Od(_),m}const Nd=e=>{let t;for(const n in e)("class"===n||"style"===n||sa(n))&&((t||(t={}))[n]=e[n]);return t},Ad=(e,t)=>{const n={};for(const i in e)aa(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function Rd(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!Ed(n,o))return!0}return!1}function Dd(e,t,n=!1){const i=_h||Sd;if(i){const r=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ga(t)?t.call(i.proxy):t}}function Pd(e){return ga(e)?{setup:e,name:e.name}:e}const Ld=e=>!!e.type.__asyncLoader,Ud=e=>e.type.__isKeepAlive;function Fd(e,t){jd(e,"a",t)}function Bd(e,t){jd(e,"da",t)}function jd(e,t,n=_h){const i=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}e()});if(zd(t,i,n),n){let e=n.parent;for(;e&&e.parent;)Ud(e.parent.vnode)&&Vd(i,t,n,e),e=e.parent}}function Vd(e,t,n,i){const r=zd(t,e,i,!0);Gd((()=>{ca(i[t],r)}),n)}function zd(e,t,n=_h,i=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;pc(),vh(n);const r=Ih(t,n,e,i);return yh(),fc(),r});return i?r.unshift(o):r.push(o),o}}const Kd=e=>(t,n=_h)=>(!bh||"sp"===e)&&zd(e,t,n),Wd=Kd("bm"),Hd=Kd("m"),$d=Kd("bu"),qd=Kd("u"),Yd=Kd("bum"),Gd=Kd("um"),Xd=Kd("sp"),Jd=Kd("rtg"),Qd=Kd("rtc");function Zd(e,t=_h){zd("ec",e,t)}let eu=!0;function tu(e){const t=ru(e),n=e.proxy,i=e.ctx;eu=!1,t.beforeCreate&&nu(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:s,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:p,updated:f,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:v,destroyed:y,unmounted:w,render:b,renderTracked:x,renderTriggered:C,errorCaptured:k,serverPrefetch:E,expose:S,inheritAttrs:I,components:O,directives:T,filters:M}=t;if(c&&function(e,t,n=ia,i=!1){ha(e)&&(e=lu(e));for(const r in e){const n=e[r];let o;o=va(n)?"default"in n?Dd(n.from||r,n.default,!0):Dd(n.from||r):Dd(n),md(o)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[r]=o}}(c,i,null,e.appContext.config.unwrapInjectedRef),s)for(const A in s){const e=s[A];ga(e)&&(i[A]=e.bind(n))}if(r){const t=r.call(n,n);va(t)&&(e.data=od(t))}if(eu=!0,o)for(const A in o){const e=o[A],t=xd({get:ga(e)?e.bind(n,n):ga(e.get)?e.get.bind(n,n):ia,set:!ga(e)&&ga(e.set)?e.set.bind(n):ia});Object.defineProperty(i,A,{enumerable:!0,configurable:!0,get:()=>t.value,set:e=>t.value=e})}if(a)for(const A in a)iu(a[A],i,n,A);if(l){const e=ga(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{!function(e,t){if(_h){let n=_h.provides;const i=_h.parent&&_h.parent.provides;i===n&&(n=_h.provides=Object.create(i)),n[e]=t}}(t,e[t])}))}function N(e,t){ha(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(d&&nu(d,e,"c"),N(Wd,u),N(Hd,h),N($d,p),N(qd,f),N(Fd,g),N(Bd,m),N(Zd,k),N(Qd,x),N(Jd,C),N(Yd,v),N(Gd,w),N(Xd,E),ha(S))if(S.length){const t=e.exposed||(e.exposed={});S.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});b&&e.render===ia&&(e.render=b),null!=I&&(e.inheritAttrs=I),O&&(e.components=O),T&&(e.directives=T)}function nu(e,t,n){Ih(ha(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function iu(e,t,n,i){const r=i.includes(".")?ep(n,i):()=>n[i];if(ma(e)){const n=t[e];ga(n)&&Jh(r,n)}else if(ga(e))Jh(r,e.bind(n));else if(va(e))if(ha(e))e.forEach((e=>iu(e,t,n,i)));else{const i=ga(e.handler)?e.handler.bind(n):t[e.handler];ga(i)&&Jh(r,i,e)}}function ru(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:r.length||n||i?(l={},r.length&&r.forEach((e=>ou(l,e,s,!0))),ou(l,t,s)):l=t,o.set(t,l),l}function ou(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&ou(e,o,n,!0),r&&r.forEach((t=>ou(e,t,n,!0)));for(const s in t)if(i&&"expose"===s);else{const i=su[s]||n&&n[s];e[s]=i?i(e[s],t[s]):t[s]}return e}const su={data:au,props:du,emits:du,methods:du,computed:du,beforeCreate:cu,created:cu,beforeMount:cu,mounted:cu,beforeUpdate:cu,updated:cu,beforeDestroy:cu,destroyed:cu,activated:cu,deactivated:cu,errorCaptured:cu,serverPrefetch:cu,components:du,directives:du,watch:function(e,t){if(!e)return t;if(!t)return e;const n=la(Object.create(null),e);for(const i in t)n[i]=cu(e[i],t[i]);return n},provide:au,inject:function(e,t){return du(lu(e),lu(t))}};function au(e,t){return t?e?function(){return la(ga(e)?e.call(this,this):e,ga(t)?t.call(this,this):t)}:t:e}function lu(e){if(ha(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function cu(e,t){return e?[...new Set([].concat(e,t))]:t}function du(e,t){return e?la(la(Object.create(null),e),t):t}function uu(e,t,n,i=!1){const r={},o={};Pa(o,Ju,1),e.propsDefaults=Object.create(null),hu(e,t,r,o);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);n?e.props=i?r:ad(r,!1,Nc,Zc,nd):e.type.props?e.props=r:e.props=o,e.attrs=o}function hu(e,t,n,i){const[r,o]=e.propsOptions;let s,a=!1;if(t)for(let l in t){if(Ea(l))continue;const c=t[l];let d;r&&ua(r,d=Oa(l))?o&&o.includes(d)?(s||(s={}))[d]=c:n[d]=c:Ed(e.emitsOptions,l)||c!==i[l]&&(i[l]=c,a=!0)}if(o){const t=ud(n),i=s||ta;for(let s=0;s<o.length;s++){const a=o[s];n[a]=pu(r,t,a,i[a],e,!ua(i,a))}}return a}function pu(e,t,n,i,r,o){const s=e[n];if(null!=s){const e=ua(s,"default");if(e&&void 0===i){const e=s.default;if(s.type!==Function&&ga(e)){const{propsDefaults:o}=r;n in o?i=o[n]:(vh(r),i=o[n]=e.call(null,t),yh())}else i=e}s[0]&&(o&&!e?i=!1:!s[1]||""!==i&&i!==Ma(n)||(i=!0))}return i}function fu(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const o=e.props,s={},a=[];let l=!1;if(!ga(e)){const i=e=>{l=!0;const[n,i]=fu(e,t,!0);la(s,n),i&&a.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!l)return i.set(e,na),na;if(ha(o))for(let d=0;d<o.length;d++){const e=Oa(o[d]);gu(e)&&(s[e]=ta)}else if(o)for(const d in o){const e=Oa(d);if(gu(e)){const t=o[d],n=s[e]=ha(t)||ga(t)?{type:t}:t;if(n){const t=vu(Boolean,n.type),i=vu(String,n.type);n[0]=t>-1,n[1]=i<0||t<i,(t>-1||ua(n,"default"))&&a.push(e)}}}const c=[s,a];return i.set(e,c),c}function gu(e){return"$"!==e[0]}function mu(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function _u(e,t){return mu(e)===mu(t)}function vu(e,t){return ha(t)?t.findIndex((t=>_u(t,e))):ga(t)&&_u(t,e)?0:-1}const yu=e=>"_"===e[0]||"$stable"===e,wu=e=>ha(e)?e.map(oh):[oh(e)],bu=(e,t,n)=>{const i=Td(((...e)=>wu(t(...e))),n);return i._c=!1,i},xu=(e,t,n)=>{const i=e._ctx;for(const r in e){if(yu(r))continue;const n=e[r];if(ga(n))t[r]=bu(0,n,i);else if(null!=n){const e=wu(n);t[r]=()=>e}}},Cu=(e,t)=>{const n=wu(t);e.slots.default=()=>n};function ku(e,t,n,i){const r=e.dirs,o=t&&t.dirs;for(let s=0;s<r.length;s++){const a=r[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(pc(),Ih(l,n,8,[e.el,a,e,t]),fc())}}function Eu(){return{app:null,config:{isNativeTag:ra,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Su=0;function Iu(e,t){return function(n,i=null){null==i||va(i)||(i=null);const r=Eu(),o=new Set;let s=!1;const a=r.app={_uid:Su++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:ip,get config(){return r.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&ga(e.install)?(o.add(e),e.install(a,...t)):ga(e)&&(o.add(e),e(a,...t))),a),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),a),component:(e,t)=>t?(r.components[e]=t,a):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,a):r.directives[e],mount(o,l,c){if(!s){const d=th(n,i);return d.appContext=r,l&&t?t(d,o):e(d,o,c),s=!0,a._container=o,o.__vue_app__=a,d.component.proxy}},unmount(){s&&(e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,a)};return a}}const Ou=function(e,t){t&&t.pendingBranch?ha(e)?t.effects.push(...e):t.effects.push(e):Hh(e,Uh,Lh,Fh)};function Tu(e){return function(e,t){const{insert:n,remove:i,patchProp:r,createElement:o,createText:s,createComment:a,setText:l,setElementText:c,parentNode:d,nextSibling:u,setScopeId:h=ia,cloneNode:p,insertStaticContent:f}=e,g=(e,t,n,i=null,r=null,o=null,s=!1,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Xu(e,t)&&(i=K(e),F(e,r,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:d,shapeFlag:u}=t;switch(c){case Fu:m(e,t,n,i);break;case Bu:_(e,t,n,i);break;case ju:null==e&&v(t,n,i,s);break;case Uu:O(e,t,n,i,r,o,s,a,l);break;default:1&u?b(e,t,n,i,r,o,s,a,l):6&u?T(e,t,n,i,r,o,s,a,l):(64&u||128&u)&&c.process(e,t,n,i,r,o,s,a,l,H)}null!=d&&r&&Mu(d,e&&e.ref,o,t||e,!t)},m=(e,t,i,r)=>{if(null==e)n(t.el=s(t.children),i,r);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},_=(e,t,i,r)=>{null==e?n(t.el=a(t.children||""),i,r):t.el=e.el},v=(e,t,n,i)=>{[e.el,e.anchor]=f(e.children,t,n,i)},y=({el:e,anchor:t},i,r)=>{let o;for(;e&&e!==t;)o=u(e),n(e,i,r),e=o;n(t,i,r)},w=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=u(e),i(e),e=n;i(t)},b=(e,t,n,i,r,o,s,a,l)=>{s=s||"svg"===t.type,null==e?x(t,n,i,r,o,s,a,l):E(e,t,r,o,s,a,l)},x=(e,t,i,s,a,l,d,u)=>{let h,f;const{type:g,props:m,shapeFlag:_,transition:v,patchFlag:y,dirs:w}=e;if(e.el&&void 0!==p&&-1===y)h=e.el=p(e.el);else{if(h=e.el=o(e.type,l,m&&m.is,m),8&_?c(h,e.children):16&_&&k(e.children,h,null,s,a,l&&"foreignObject"!==g,d,u),w&&ku(e,null,s,"created"),m){for(const t in m)"value"===t||Ea(t)||r(h,t,null,m[t],l,e.children,s,a,z);"value"in m&&r(h,"value",null,m.value),(f=m.onVnodeBeforeMount)&&Nu(f,s,e)}C(h,e,e.scopeId,d,s)}w&&ku(e,null,s,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(h),n(h,t,i),((f=m&&m.onVnodeMounted)||b||w)&&Ou((()=>{f&&Nu(f,s,e),b&&v.enter(h),w&&ku(e,null,s,"mounted")}),a)},C=(e,t,n,i,r)=>{if(n&&h(e,n),i)for(let o=0;o<i.length;o++)h(e,i[o]);if(r){if(t===r.subTree){const t=r.vnode;C(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},k=(e,t,n,i,r,o,s,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?sh(e[c]):oh(e[c]);g(null,l,t,n,i,r,o,s,a)}},E=(e,t,n,i,o,s,a)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:u,dirs:h}=t;d|=16&e.patchFlag;const p=e.props||ta,f=t.props||ta;let g;(g=f.onVnodeBeforeUpdate)&&Nu(g,n,t,e),h&&ku(t,e,n,"beforeUpdate");const m=o&&"foreignObject"!==t.type;if(u?S(e.dynamicChildren,u,l,n,i,m,s):a||D(e,t,l,null,n,i,m,s,!1),d>0){if(16&d)I(l,t,p,f,n,i,o);else if(2&d&&p.class!==f.class&&r(l,"class",null,f.class,o),4&d&&r(l,"style",p.style,f.style,o),8&d){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const a=s[t],c=p[a],d=f[a];d===c&&"value"!==a||r(l,a,c,d,o,e.children,n,i,z)}}1&d&&e.children!==t.children&&c(l,t.children)}else a||null!=u||I(l,t,p,f,n,i,o);((g=f.onVnodeUpdated)||h)&&Ou((()=>{g&&Nu(g,n,t,e),h&&ku(t,e,n,"updated")}),i)},S=(e,t,n,i,r,o,s)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===Uu||!Xu(l,c)||70&l.shapeFlag)?d(l.el):n;g(l,c,u,null,i,r,o,s,!0)}},I=(e,t,n,i,o,s,a)=>{if(n!==i){for(const l in i){if(Ea(l))continue;const c=i[l],d=n[l];c!==d&&"value"!==l&&r(e,l,d,c,a,t.children,o,s,z)}if(n!==ta)for(const l in n)Ea(l)||l in i||r(e,l,n[l],null,a,t.children,o,s,z);"value"in i&&r(e,"value",n.value,i.value)}},O=(e,t,i,r,o,a,l,c,d)=>{const u=t.el=e?e.el:s(""),h=t.anchor=e?e.anchor:s("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(c=c?c.concat(g):g),null==e?(n(u,i,r),n(h,i,r),k(t.children,i,h,o,a,l,c,d)):p>0&&64&p&&f&&e.dynamicChildren?(S(e.dynamicChildren,f,i,o,a,l,c),(null!=t.key||o&&t===o.subTree)&&Au(e,t,!0)):D(e,t,i,h,o,a,l,c,d)},T=(e,t,n,i,r,o,s,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,s,l):M(t,n,i,r,o,s,l):N(e,t,l)},M=(e,t,n,i,r,o,s)=>{const a=e.component=function(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||gh,o={uid:mh++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,update:null,scope:new Ql(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fu(i,r),emitsOptions:kd(i,r),emit:null,emitted:null,propsDefaults:ta,inheritAttrs:i.inheritAttrs,ctx:ta,data:ta,props:ta,attrs:ta,slots:ta,refs:ta,setupState:ta,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=t?t.root:o,o.emit=Cd.bind(null,o),e.ce&&e.ce(o);return o}(e,i,r);if(Ud(e)&&(a.ctx.renderer=H),function(e,t=!1){bh=t;const{props:n,children:i}=e.vnode,r=wh(e);uu(e,n,r,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=ud(t),Pa(t,"_",n)):xu(t,e.slots={})}else e.slots={},t&&Cu(e,t);Pa(e.slots,Ju,1)})(e,i);const o=r?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=hd(new Proxy(e.ctx,fh));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?function(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(gc(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}(e):null;vh(e),pc();const r=Sh(i,e,0,[e.props,n]);if(fc(),yh(),ya(r)){if(r.then(yh,yh),t)return r.then((t=>{xh(e,t)})).catch((t=>{Oh(t,e,0)}));e.asyncDep=r}else xh(e,r)}else Ch(e)}(e,t):void 0;bh=!1}(a),a.asyncDep){if(r&&r.registerDep(a,A),!e.el){const e=a.subTree=th(Bu);_(null,e,t,n)}}else A(a,e,t,n,r,o,s)},N=(e,t,n)=>{const i=t.component=e.component;if(function(e,t,n){const{props:i,children:r,component:o}=e,{props:s,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!a||a&&a.$stable)||i!==s&&(i?!s||Rd(i,s,c):!!s);if(1024&l)return!0;if(16&l)return i?Rd(i,s,c):!!s;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==i[n]&&!Ed(c,n))return!0}}return!1}(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void R(i,t,n);i.next=t,function(e){const t=Nh.indexOf(e);t>Ah&&Nh.splice(t,1)}(i.update),i.update()}else t.component=e.component,t.el=e.el,i.vnode=t},A=(e,t,n,i,r,o,s)=>{const a=new cc((()=>{if(e.isMounted){let t,{next:n,bu:i,u:l,parent:c,vnode:u}=e,h=n;a.allowRecurse=!1,n?(n.el=u.el,R(e,n,s)):n=u,i&&Da(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Nu(t,c,n,u),a.allowRecurse=!0;const p=Md(e),f=e.subTree;e.subTree=p,g(f,p,d(f.el),K(f),e,r,o),n.el=p.el,null===h&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),l&&Ou(l,r),(t=n.props&&n.props.onVnodeUpdated)&&Ou((()=>Nu(t,c,n,u)),r)}else{let s;const{el:l,props:c}=t,{bm:d,m:u,parent:h}=e,p=Ld(t);if(a.allowRecurse=!1,d&&Da(d),!p&&(s=c&&c.onVnodeBeforeMount)&&Nu(s,h,t),a.allowRecurse=!0,l&&q){const n=()=>{e.subTree=Md(e),q(l,e.subTree,e,r,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const s=e.subTree=Md(e);g(null,s,n,i,e,r,o),t.el=s.el}if(u&&Ou(u,r),!p&&(s=c&&c.onVnodeMounted)){const e=t;Ou((()=>Nu(s,h,e)),r)}256&t.shapeFlag&&e.a&&Ou(e.a,r),e.isMounted=!0,t=n=i=null}}),(()=>Kh(e.update)),e.scope),l=e.update=a.run.bind(a);l.id=e.uid,a.allowRecurse=l.allowRecurse=!0,l()},R=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,i){const{props:r,attrs:o,vnode:{patchFlag:s}}=e,a=ud(r),[l]=e.propsOptions;let c=!1;if(!(i||s>0)||16&s){let i;hu(e,t,r,o)&&(c=!0);for(const o in a)t&&(ua(t,o)||(i=Ma(o))!==o&&ua(t,i))||(l?!n||void 0===n[o]&&void 0===n[i]||(r[o]=pu(l,a,o,void 0,e,!0)):delete r[o]);if(o!==a)for(const e in o)t&&ua(t,e)||(delete o[e],c=!0)}else if(8&s){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];const d=t[s];if(l)if(ua(o,s))d!==o[s]&&(o[s]=d,c=!0);else{const t=Oa(s);r[t]=pu(l,a,t,d,e,!1)}else d!==o[s]&&(o[s]=d,c=!0)}}c&&vc(e,"set","$attrs")}(e,t.props,i,n),((e,t,n)=>{const{vnode:i,slots:r}=e;let o=!0,s=ta;if(32&i.shapeFlag){const e=t._;e?n&&1===e?o=!1:(la(r,t),n||1!==e||delete r._):(o=!t.$stable,xu(t,r)),s=t}else t&&(Cu(e,t),s={default:1});if(o)for(const a in r)yu(a)||a in s||delete r[a]})(e,t.children,n),pc(),$h(void 0,e.update),fc()},D=(e,t,n,i,r,o,s,a,l=!1)=>{const d=e&&e.children,u=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void L(d,h,n,i,r,o,s,a,l);if(256&p)return void P(d,h,n,i,r,o,s,a,l)}8&f?(16&u&&z(d,r,o),h!==d&&c(n,h)):16&u?16&f?L(d,h,n,i,r,o,s,a,l):z(d,r,o,!0):(8&u&&c(n,""),16&f&&k(h,n,i,r,o,s,a,l))},P=(e,t,n,i,r,o,s,a,l)=>{t=t||na;const c=(e=e||na).length,d=t.length,u=Math.min(c,d);let h;for(h=0;h<u;h++){const i=t[h]=l?sh(t[h]):oh(t[h]);g(e[h],i,n,null,r,o,s,a,l)}c>d?z(e,r,o,!0,!1,u):k(t,n,i,r,o,s,a,l,u)},L=(e,t,n,i,r,o,s,a,l)=>{let c=0;const d=t.length;let u=e.length-1,h=d-1;for(;c<=u&&c<=h;){const i=e[c],d=t[c]=l?sh(t[c]):oh(t[c]);if(!Xu(i,d))break;g(i,d,n,null,r,o,s,a,l),c++}for(;c<=u&&c<=h;){const i=e[u],c=t[h]=l?sh(t[h]):oh(t[h]);if(!Xu(i,c))break;g(i,c,n,null,r,o,s,a,l),u--,h--}if(c>u){if(c<=h){const e=h+1,u=e<d?t[e].el:i;for(;c<=h;)g(null,t[c]=l?sh(t[c]):oh(t[c]),n,u,r,o,s,a,l),c++}}else if(c>h)for(;c<=u;)F(e[c],r,o,!0),c++;else{const p=c,f=c,m=new Map;for(c=f;c<=h;c++){const e=t[c]=l?sh(t[c]):oh(t[c]);null!=e.key&&m.set(e.key,c)}let _,v=0;const y=h-f+1;let w=!1,b=0;const x=new Array(y);for(c=0;c<y;c++)x[c]=0;for(c=p;c<=u;c++){const i=e[c];if(v>=y){F(i,r,o,!0);continue}let d;if(null!=i.key)d=m.get(i.key);else for(_=f;_<=h;_++)if(0===x[_-f]&&Xu(i,t[_])){d=_;break}void 0===d?F(i,r,o,!0):(x[d-f]=c+1,d>=b?b=d:w=!0,g(i,t[d],n,null,r,o,s,a,l),v++)}const C=w?function(e){const t=e.slice(),n=[0];let i,r,o,s,a;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<l?o=a+1:s=a;l<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=t[s];return n}(x):na;for(_=C.length-1,c=y-1;c>=0;c--){const e=f+c,u=t[e],h=e+1<d?t[e+1].el:i;0===x[c]?g(null,u,n,h,r,o,s,a,l):w&&(_<0||c!==C[_]?U(u,n,h,2):_--)}}},U=(e,t,i,r,o=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:d}=e;if(6&d)return void U(e.component.subTree,t,i,r);if(128&d)return void e.suspense.move(t,i,r);if(64&d)return void a.move(e,t,i,H);if(a===Uu){n(s,t,i);for(let e=0;e<c.length;e++)U(c[e],t,i,r);return void n(e.anchor,t,i)}if(a===ju)return void y(e,t,i);if(2!==r&&1&d&&l)if(0===r)l.beforeEnter(s),n(s,t,i),Ou((()=>l.enter(s)),o);else{const{leave:e,delayLeave:r,afterLeave:o}=l,a=()=>n(s,t,i),c=()=>{e(s,(()=>{a(),o&&o()}))};r?r(s,a,c):c()}else n(s,t,i)},F=(e,t,n,i=!1,r=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:d,patchFlag:u,dirs:h}=e;if(null!=a&&Mu(a,null,n,e,!0),256&d)return void t.ctx.deactivate(e);const p=1&d&&h,f=!Ld(e);let g;if(f&&(g=s&&s.onVnodeBeforeUnmount)&&Nu(g,t,e),6&d)V(e.component,n,i);else{if(128&d)return void e.suspense.unmount(n,i);p&&ku(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,n,r,H,i):c&&(o!==Uu||u>0&&64&u)?z(c,t,n,!1,!0):(o===Uu&&384&u||!r&&16&d)&&z(l,t,n),i&&B(e)}(f&&(g=s&&s.onVnodeUnmounted)||p)&&Ou((()=>{g&&Nu(g,t,e),p&&ku(e,null,t,"unmounted")}),n)},B=e=>{const{type:t,el:n,anchor:r,transition:o}=e;if(t===Uu)return void j(n,r);if(t===ju)return void w(e);const s=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:i}=o,r=()=>t(n,s);i?i(e.el,s,r):r()}else s()},j=(e,t)=>{let n;for(;e!==t;)n=u(e),i(e),e=n;i(t)},V=(e,t,n)=>{const{bum:i,scope:r,update:o,subTree:s,um:a}=e;i&&Da(i),r.stop(),o&&(o.active=!1,F(s,e,t,n)),a&&Ou(a,t),Ou((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},z=(e,t,n,i=!1,r=!1,o=0)=>{for(let s=o;s<e.length;s++)F(e[s],t,n,i,r)},K=e=>6&e.shapeFlag?K(e.component.subTree):128&e.shapeFlag?e.suspense.next():u(e.anchor||e.el),W=(e,t,n)=>{null==e?t._vnode&&F(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),qh(),t._vnode=e},H={p:g,um:F,m:U,r:B,mt:M,mc:k,pc:D,pbc:S,n:K,o:e};let $,q;t&&([$,q]=t(H));return{render:W,hydrate:$,createApp:Iu(W,$)}}(e)}function Mu(e,t,n,i,r=!1){if(ha(e))return void e.forEach(((e,o)=>Mu(e,t&&(ha(t)?t[o]:t),n,i,r)));if(Ld(i)&&!r)return;const o=4&i.shapeFlag?kh(i.component)||i.component.proxy:i.el,s=r?null:o,{i:a,r:l}=e,c=t&&t.r,d=a.refs===ta?a.refs={}:a.refs,u=a.setupState;if(null!=c&&c!==l&&(ma(c)?(d[c]=null,ua(u,c)&&(u[c]=null)):md(c)&&(c.value=null)),ma(l)){const e=()=>{d[l]=s,ua(u,l)&&(u[l]=s)};s?(e.id=-1,Ou(e,n)):e()}else if(md(l)){const e=()=>{l.value=s};s?(e.id=-1,Ou(e,n)):e()}else ga(l)&&Sh(l,a,12,[s,d])}function Nu(e,t,n,i=null){Ih(e,t,7,[n,i])}function Au(e,t,n=!1){const i=e.children,r=t.children;if(ha(i)&&ha(r))for(let o=0;o<i.length;o++){const e=i[o];let t=r[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[o]=sh(r[o]),t.el=e.el),n||Au(e,t))}}function Ru(e,t){return Pu("components",e,!0,t)||e}const Du=Symbol();function Pu(e,t,n=!0,i=!1){const r=Sd||_h;if(r){const n=r.type;if("components"===e){const e=Eh(n);if(e&&(e===t||e===Oa(t)||e===Na(Oa(t))))return n}const o=Lu(r[e]||n[e],t)||Lu(r.appContext[e],t);return!o&&i?n:o}}function Lu(e,t){return e&&(e[t]||e[Oa(t)]||e[Na(Oa(t))])}const Uu=Symbol(void 0),Fu=Symbol(void 0),Bu=Symbol(void 0),ju=Symbol(void 0),Vu=[];let zu=null;function Ku(e=!1){Vu.push(zu=e?null:[])}let Wu=1;function Hu(e){Wu+=e}function $u(e){return e.dynamicChildren=Wu>0?zu||na:null,Vu.pop(),zu=Vu[Vu.length-1]||null,Wu>0&&zu&&zu.push(e),e}function qu(e,t,n,i,r,o){return $u(eh(e,t,n,i,r,o,!0))}function Yu(e,t,n,i,r){return $u(th(e,t,n,i,r,!0))}function Gu(e){return!!e&&!0===e.__v_isVNode}function Xu(e,t){return e.type===t.type&&e.key===t.key}const Ju="__vInternal",Qu=({key:e})=>null!=e?e:null,Zu=({ref:e})=>null!=e?ma(e)||md(e)||ga(e)?{i:Sd,r:e}:e:null;function eh(e,t=null,n=null,i=0,r=null,o=(e===Uu?0:1),s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qu(t),ref:t&&Zu(t),scopeId:Id,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(ah(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=ma(n)?8:16),Wu>0&&!s&&zu&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&zu.push(l),l}const th=function(e,t=null,n=null,i=0,r=null,o=!1){e&&e!==Du||(e=Bu);if(Gu(e)){const i=nh(e,t,!0);return n&&ah(i,n),i}s=e,ga(s)&&"__vccOpts"in s&&(e=e.__vccOpts);var s;if(t){t=function(e){return e?dd(e)||Ju in e?la({},e):e:null}(t);let{class:e,style:n}=t;e&&!ma(e)&&(t.class=ea(e)),va(n)&&(dd(n)&&!ha(n)&&(n=la({},n)),t.style=Xs(n))}const a=ma(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:va(e)?4:ga(e)?2:0;return eh(e,t,n,i,r,a,o,!0)};function nh(e,t,n=!1){const{props:i,ref:r,patchFlag:o,children:s}=e,a=t?lh(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Qu(a),ref:t&&t.ref?n&&r?ha(r)?r.concat(Zu(t)):[r,Zu(t)]:Zu(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Uu?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&nh(e.ssContent),ssFallback:e.ssFallback&&nh(e.ssFallback),el:e.el,anchor:e.anchor}}function ih(e=" ",t=0){return th(Fu,null,e,t)}function rh(e="",t=!1){return t?(Ku(),Yu(Bu,null,e)):th(Bu,null,e)}function oh(e){return null==e||"boolean"==typeof e?th(Bu):ha(e)?th(Uu,null,e.slice()):"object"==typeof e?sh(e):th(Fu,null,String(e))}function sh(e){return null===e.el||e.memo?e:nh(e)}function ah(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(ha(t))n=16;else if("object"==typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),ah(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||Ju in t?3===i&&Sd&&(1===Sd.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Sd}}else ga(t)?(t={default:t,_ctx:Sd},n=32):(t=String(t),64&i?(n=16,t=[ih(t)]):n=8);e.children=t,e.shapeFlag|=n}function lh(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=ea([t.class,i.class]));else if("style"===e)t.style=Xs([t.style,i.style]);else if(sa(e)){const n=t[e],r=i[e];n!==r&&(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=i[e])}return t}function ch(e,t,n,i){let r;const o=n&&n[i];if(ha(e)||ma(e)){r=new Array(e.length);for(let n=0,i=e.length;n<i;n++)r[n]=t(e[n],n,void 0,o&&o[n])}else if("number"==typeof e){r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,o&&o[n])}else if(va(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,o&&o[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const s=n[i];r[i]=t(e[s],s,i,o&&o[i])}}else r=[];return n&&(n[i]=r),r}function dh(e,t,n={},i,r){if(Sd.isCE)return th("slot","default"===t?null:{name:t},i&&i());let o=e[t];o&&o._c&&(o._d=!1),Ku();const s=o&&uh(o(n)),a=Yu(Uu,{key:n.key||`_${t}`},s||(i?i():[]),s&&1===e._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function uh(e){return e.some((e=>!Gu(e)||e.type!==Bu&&!(e.type===Uu&&!uh(e.children))))?e:null}const hh=e=>e?wh(e)?kh(e)||e.proxy:hh(e.parent):null,ph=la(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>hh(e.parent),$root:e=>hh(e.root),$emit:e=>e.emit,$options:e=>ru(e),$forceUpdate:e=>()=>Kh(e.update),$nextTick:e=>zh.bind(e.proxy),$watch:e=>Zh.bind(e)}),fh={get({_:e},t){const{ctx:n,setupState:i,data:r,props:o,accessCache:s,type:a,appContext:l}=e;let c;if("$"!==t[0]){const a=s[t];if(void 0!==a)switch(a){case 0:return i[t];case 1:return r[t];case 3:return n[t];case 2:return o[t]}else{if(i!==ta&&ua(i,t))return s[t]=0,i[t];if(r!==ta&&ua(r,t))return s[t]=1,r[t];if((c=e.propsOptions[0])&&ua(c,t))return s[t]=2,o[t];if(n!==ta&&ua(n,t))return s[t]=3,n[t];eu&&(s[t]=4)}}const d=ph[t];let u,h;return d?("$attrs"===t&&gc(e,0,t),d(e)):(u=a.__cssModules)&&(u=u[t])?u:n!==ta&&ua(n,t)?(s[t]=3,n[t]):(h=l.config.globalProperties,ua(h,t)?h[t]:void 0)},set({_:e},t,n){const{data:i,setupState:r,ctx:o}=e;if(r!==ta&&ua(r,t))r[t]=n;else if(i!==ta&&ua(i,t))i[t]=n;else if(ua(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:o}},s){let a;return void 0!==n[s]||e!==ta&&ua(e,s)||t!==ta&&ua(t,s)||(a=o[0])&&ua(a,s)||ua(i,s)||ua(ph,s)||ua(r.config.globalProperties,s)}},gh=Eu();let mh=0;let _h=null;const vh=e=>{_h=e,e.scope.on()},yh=()=>{_h&&_h.scope.off(),_h=null};function wh(e){return 4&e.vnode.shapeFlag}let bh=!1;function xh(e,t,n){ga(t)?e.render=t:va(t)&&(e.setupState=wd(t)),Ch(e)}function Ch(e,t,n){const i=e.type;e.render||(e.render=i.render||ia),vh(e),pc(),tu(e),fc(),yh()}function kh(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(wd(hd(e.exposed)),{get:(t,n)=>n in t?t[n]:n in ph?ph[n](e):void 0}))}function Eh(e){return ga(e)&&e.displayName||e.name}function Sh(e,t,n,i){let r;try{r=i?e(...i):e()}catch(o){Oh(o,t,n)}return r}function Ih(e,t,n,i){if(ga(e)){const r=Sh(e,t,n,i);return r&&ya(r)&&r.catch((e=>{Oh(e,t,n)})),r}const r=[];for(let o=0;o<e.length;o++)r.push(Ih(e[o],t,n,i));return r}function Oh(e,t,n,i=!0){t&&t.vnode;if(t){let i=t.parent;const r=t.proxy,o=n;for(;i;){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,o))return;i=i.parent}const s=t.appContext.config.errorHandler;if(s)return void Sh(s,null,10,[e,r,o])}!function(e,t,n,i=!0){console.error(e)}(e,0,0,i)}let Th=!1,Mh=!1;const Nh=[];let Ah=0;const Rh=[];let Dh=null,Ph=0;const Lh=[];let Uh=null,Fh=0;const Bh=Promise.resolve();let jh=null,Vh=null;function zh(e){const t=jh||Bh;return e?t.then(this?e.bind(this):e):t}function Kh(e){Nh.length&&Nh.includes(e,Th&&e.allowRecurse?Ah+1:Ah)||e===Vh||(null==e.id?Nh.push(e):Nh.splice(function(e){let t=Ah+1,n=Nh.length;for(;t<n;){const i=t+n>>>1;Yh(Nh[i])<e?t=i+1:n=i}return t}(e.id),0,e),Wh())}function Wh(){Th||Mh||(Mh=!0,jh=Bh.then(Gh))}function Hh(e,t,n,i){ha(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?i+1:i)||n.push(e),Wh()}function $h(e,t=null){if(Rh.length){for(Vh=t,Dh=[...new Set(Rh)],Rh.length=0,Ph=0;Ph<Dh.length;Ph++)Dh[Ph]();Dh=null,Ph=0,Vh=null,$h(e,t)}}function qh(e){if(Lh.length){const e=[...new Set(Lh)];if(Lh.length=0,Uh)return void Uh.push(...e);for(Uh=e,Uh.sort(((e,t)=>Yh(e)-Yh(t))),Fh=0;Fh<Uh.length;Fh++)Uh[Fh]();Uh=null,Fh=0}}const Yh=e=>null==e.id?1/0:e.id;function Gh(e){Mh=!1,Th=!0,$h(e),Nh.sort(((e,t)=>Yh(e)-Yh(t)));try{for(Ah=0;Ah<Nh.length;Ah++){const e=Nh[Ah];e&&!1!==e.active&&Sh(e,null,14)}}finally{Ah=0,Nh.length=0,qh(),Th=!1,jh=null,(Nh.length||Rh.length||Lh.length)&&Gh(e)}}const Xh={};function Jh(e,t,n){return Qh(e,t,n)}function Qh(e,t,{immediate:n,deep:i,flush:r,onTrack:o,onTrigger:s}=ta){const a=_h;let l,c,d=!1,u=!1;if(md(e)?(l=()=>e.value,d=!!e._shallow):ld(e)?(l=()=>e,i=!0):ha(e)?(u=!0,d=e.some(ld),l=()=>e.map((e=>md(e)?e.value:ld(e)?tp(e):ga(e)?Sh(e,a,2):void 0))):l=ga(e)?t?()=>Sh(e,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),Ih(e,a,3,[h])}:ia,t&&i){const e=l;l=()=>tp(e())}let h=e=>{c=m.onStop=()=>{Sh(e,a,4)}},p=u?[]:Xh;const f=()=>{if(m.active)if(t){const e=m.run();(i||d||(u?e.some(((e,t)=>Ra(e,p[t]))):Ra(e,p)))&&(c&&c(),Ih(t,a,3,[e,p===Xh?void 0:p,h]),p=e)}else m.run()};let g;f.allowRecurse=!!t,g="sync"===r?f:"post"===r?()=>Ou(f,a&&a.suspense):()=>{!a||a.isMounted?function(e){Hh(e,Dh,Rh,Ph)}(f):f()};const m=new cc(l,g);return t?n?f():p=m.run():"post"===r?Ou(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&ca(a.scope.effects,m)}}function Zh(e,t,n){const i=this.proxy,r=ma(e)?e.includes(".")?ep(i,e):()=>i[e]:e.bind(i,i);let o;ga(t)?o=t:(o=t.handler,n=t);const s=_h;vh(this);const a=Qh(r,o.bind(i),n);return s?vh(s):yh(),a}function ep(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function tp(e,t=new Set){if(!va(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),md(e))tp(e.value,t);else if(ha(e))for(let n=0;n<e.length;n++)tp(e[n],t);else if(fa(e)||pa(e))e.forEach((e=>{tp(e,t)}));else if(Ca(e))for(const n in e)tp(e[n],t);return e}function np(e,t,n){const i=arguments.length;return 2===i?va(t)&&!ha(t)?Gu(t)?th(e,null,[t]):th(e,t):th(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Gu(n)&&(n=[n]),th(e,t,n))}const ip="3.2.4",rp="undefined"!=typeof document?document:null,op=new Map,sp={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?rp.createElementNS("http://www.w3.org/2000/svg",e):rp.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>rp.createTextNode(e),createComment:e=>rp.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>rp.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,i){const r=n?n.previousSibling:t.lastChild;let o=op.get(e);if(!o){const t=rp.createElement("template");if(t.innerHTML=i?`<svg>${e}</svg>`:e,o=t.content,i){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}op.set(e,o)}return t.insertBefore(o.cloneNode(!0),n),[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const ap=/\s*!important$/;function lp(e,t,n){if(ha(n))n.forEach((n=>lp(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const i=function(e,t){const n=dp[t];if(n)return n;let i=Oa(t);if("filter"!==i&&i in e)return dp[t]=i;i=Na(i);for(let r=0;r<cp.length;r++){const n=cp[r]+i;if(n in e)return dp[t]=n}return t}(e,t);ap.test(n)?e.setProperty(Ma(i),n.replace(ap,""),"important"):e[i]=n}}const cp=["Webkit","Moz","ms"],dp={};const up="http://www.w3.org/1999/xlink";let hp=Date.now,pp=!1;if("undefined"!=typeof window){hp()>document.createEvent("Event").timeStamp&&(hp=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);pp=!!(e&&Number(e[1])<=53)}let fp=0;const gp=Promise.resolve(),mp=()=>{fp=0};function _p(e,t,n,i,r=null){const o=e._vei||(e._vei={}),s=o[t];if(i&&s)s.value=i;else{const[n,a]=function(e){let t;if(vp.test(e)){let n;for(t={};n=e.match(vp);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Ma(e.slice(2)),t]}(t);if(i){!function(e,t,n,i){e.addEventListener(t,n,i)}(e,n,o[t]=function(e,t){const n=e=>{const i=e.timeStamp||hp();(pp||i>=n.attached-1)&&Ih(function(e,t){if(ha(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>fp||(gp.then(mp),fp=hp()))(),n}(i,r),a)}else s&&(!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,n,s,a),o[t]=void 0)}}const vp=/(?:Once|Passive|Capture)$/;const yp=/^on[a-z]/;const wp=la({patchProp:(e,t,n,i,r=!1,o,s,a,l)=>{"class"===t?function(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,i,r):"style"===t?function(e,t,n){const i=e.style;if(n)if(ma(n)){if(t!==n){const t=i.display;i.cssText=n,"_vod"in e&&(i.display=t)}}else{for(const e in n)lp(i,e,n[e]);if(t&&!ma(t))for(const e in t)null==n[e]&&lp(i,e,"")}else e.removeAttribute("style")}(e,n,i):sa(t)?aa(t)||_p(e,t,0,i,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&yp.test(t)&&ga(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(yp.test(t)&&ma(n))return!1;return t in e}(e,t,i,r))?function(e,t,n,i,r,o,s){if("innerHTML"===t||"textContent"===t)return i&&s(i,r,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName){e._value=n;const i=null==n?"":n;return e.value!==i&&(e.value=i),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const i=typeof e[t];if("boolean"===i)return void(e[t]=Gs(n));if(null==n&&"string"===i)return e[t]="",void e.removeAttribute(t);if("number"===i){try{e[t]=0}catch(a){}return void e.removeAttribute(t)}}try{e[t]=n}catch(_8){}}(e,t,i,o,s,a,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),function(e,t,n,i,r){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(up,t.slice(6,t.length)):e.setAttributeNS(up,t,n);else{const i=Ys(t);null==n||i&&!Gs(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}(e,t,i,r))}},sp);let bp;const xp=(...e)=>{const t=(bp||(bp=Tu(wp))).createApp(...e),{mount:n}=t;return t.mount=e=>{const i=function(e){if(ma(e)){return document.querySelector(e)}return e}(e);if(!i)return;const r=t._component;ga(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};var Cp,kp;(kp=Cp||(Cp={}))[kp.SETUP_FUNCTION=0]="SETUP_FUNCTION",kp[kp.RENDER_FUNCTION=1]="RENDER_FUNCTION",kp[kp.WATCH_GETTER=2]="WATCH_GETTER",kp[kp.WATCH_CALLBACK=3]="WATCH_CALLBACK",kp[kp.WATCH_CLEANUP=4]="WATCH_CLEANUP",kp[kp.NATIVE_EVENT_HANDLER=5]="NATIVE_EVENT_HANDLER",kp[kp.COMPONENT_EVENT_HANDLER=6]="COMPONENT_EVENT_HANDLER",kp[kp.VNODE_HOOK=7]="VNODE_HOOK",kp[kp.DIRECTIVE_HOOK=8]="DIRECTIVE_HOOK",kp[kp.TRANSITION_HOOK=9]="TRANSITION_HOOK",kp[kp.APP_ERROR_HANDLER=10]="APP_ERROR_HANDLER",kp[kp.APP_WARN_HANDLER=11]="APP_WARN_HANDLER",kp[kp.FUNCTION_REF=12]="FUNCTION_REF",kp[kp.ASYNC_COMPONENT_LOADER=13]="ASYNC_COMPONENT_LOADER",kp[kp.SCHEDULER=14]="SCHEDULER";const Ep={0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-next"};function Sp(e,t,n){let i;try{i=n?e(...n):e()}catch(r){Op(r,t)}return i}function Ip(e,t,n){if(ga(e)){const i=Sp(e,t,n);return i&&ya(i)&&i.catch((e=>{Op(e,t)})),i}const i=[];for(let r=0;r<e.length;r++)i.push(Ip(e[r],t,n));return i}function Op(e,t,n=!0){!function(e,t,n=!0){const i=Ep[t];if(Va("Unhandled error"+(i?` during execution of ${i}`:"")),n)throw e;console.error(e)}(e,t,n)}const Tp={};function Mp(e,t,n){return ga(t)||Va("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),function(e,t,{immediate:n,deep:i,onTrack:r,onTrigger:o}=ta){t||(void 0!==n&&Va('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),void 0!==i&&Va('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const s=e=>{Va("Invalid watch source: ",e,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")};let a,l,c=!1,d=!1;sl(e)?(a=()=>e.value,c=!!e._shallow):vl(e)?(a=()=>e,i=!0):ha(e)?(d=!0,c=e.some(vl),a=()=>e.map((e=>sl(e)?e.value:vl(e)?Np(e):ga(e)?Sp(e,Cp.WATCH_GETTER):void s(e)))):ga(e)?a=t?()=>Sp(e,Cp.WATCH_GETTER):()=>(l&&l(),Ip(e,Cp.WATCH_CALLBACK,[u])):(a=ia,s(e));if(t&&i){const e=a;a=()=>Np(e())}const u=e=>{l=f.onStop=()=>{Sp(e,Cp.WATCH_CLEANUP)}};let h=d?[]:Tp;const p=()=>{if(f.active)if(t){const e=f.run();(i||c||(d?e.some(((e,t)=>Ra(e,h[t]))):Ra(e,h)))&&(l&&l(),Ip(t,Cp.WATCH_CALLBACK,[e,h===Tp?void 0:h,u]),h=e)}else f.run()};p.allowRecurse=!!t;const f=new Qa(a,p);f.onTrack=r,f.onTrigger=o,t?n?p():h=f.run():f.run();return()=>{f.stop()}}(e,t,n)}function Np(e,t=new Set){if(!va(e)||e[hl.SKIP])return e;if((t=t||new Set).has(e))return e;if(t.add(e),ha(e))for(let n=0;n<e.length;n++)Np(e[n],t);else if(fa(e)||pa(e))e.forEach((e=>{Np(e,t)}));else if(Ca(e))for(const n in e)Np(e[n],t);return e}var Ap=Object.defineProperty,Rp=Object.getOwnPropertyDescriptor,Dp=(e,t)=>(n,i)=>t(n,i,e);let Pp=class extends zo{constructor(e,t){super(),C(this,"_onDidChangeSelection",this._register(new xs)),C(this,"onDidChangeSelection",this._onDidChangeSelection.event),C(this,"_onReconnected",this._register(new xs)),C(this,"onReconnected",this._onReconnected.event),C(this,"_selection",[]),C(this,"_stashSelection",null),C(this,"nodeViewModelMap",new Map),C(this,"nodeWatchStops",new Map),C(this,"linkWatchStops",new Map),C(this,"_styles"),C(this,"_overrideStyles"),C(this,"styleViewModelMap",new Map),C(this,"styleWatchStops",new Map),C(this,"_fonts"),C(this,"_selectTimer",0),C(this,"_prevSelection",null),C(this,"_root"),this.model=e,t.store(No,this),this._styles=od({value:[]}),this._overrideStyles=od({value:[]}),this._fonts=od({value:[]}),this._root=od(Object.create(null)),this.internal_connect(!1)}internal_disconnect(){for(const[e,t]of this.nodeWatchStops.entries())t(),this.nodeViewModelMap.delete(e);this.nodeWatchStops.clear(),this.nodeViewModelMap.clear();for(const[e,t]of this.linkWatchStops.entries())t(),this.linkWatchStops.delete(e);this.linkWatchStops.clear();for(const[e,t]of this.styleWatchStops)t(),this.styleWatchStops.delete(e);this.styleWatchStops.clear(),this.styleViewModelMap.clear(),this._styles.value.length=0,this._fonts.value.length=0}internal_connect(e=!1){this.graphify(),this.group(),this._updateRootValue(),this.connectFonts(),e&&this._onReconnected.fire()}dispose(){super.dispose(),this.internal_disconnect()}get selection(){return this._selection.slice()}getViewModelNodeById(e){return this.nodeViewModelMap.get(e)}triggerChangeSelection(e){this._prevSelection||(this._prevSelection=e),this._selectTimer&&clearTimeout(this._selectTimer),this._selectTimer=setTimeout((()=>{const e=this._selection.slice();Ur(this._prevSelection,e)||(this._onDidChangeSelection.fire({oldSelection:this._prevSelection,newSelection:e}),this._prevSelection=null,this._selectTimer=0)}))}setSelectionById(e){const t=this._selection.slice();this._selection.length=0,this._selection.push(e),this.triggerChangeSelection(t)}isIdSelected(e){return this._selection.includes(e)}appendSelectionById(e){if(this._selection.includes(e))return;const t=this._selection.slice();this._selection.push(e),this.triggerChangeSelection(t)}removeSelectionById(e){if(!this._selection.includes(e))return;const t=this._selection.slice(),n=this._selection.findIndex((t=>t===e));this._selection.splice(n,1),this.triggerChangeSelection(t)}setSelectionByLocation(e){const t=this._selection.slice();this._selection.length=0;const n=this._selection,{ref:i,direction:r}=e,{nodes:o}=this.model.getValue();if(r===Es.self)n.push(i);else if(r===Es.inward)for(const s of o)s.from===i&&n.push(s.id);else{if(r===Es.outward)throw new Error("unimplemented");if(r===Es.backward)throw new Error("unimplemented");if(r===Es.forward)throw new Error("unimplemented");if(r===Es.ancestors)throw new Error("unimplemented");if(r===Es.descendants){const e=[i];for(;e.length;){const t=e.pop();o.filter((e=>e.from===t)).forEach((t=>{const{id:n}=t;this._selection.includes(n)||(e.push(n),this._selection.push(n))}))}}}this.triggerChangeSelection(t)}clearSelection(){const e=this._selection.slice();this._selection.length=0,this.triggerChangeSelection(e)}stashSelection(){this._stashSelection=this._selection.slice()}popSelection(){if(!this._stashSelection)return;const e=this._selection.slice();this._selection.length=0,this._selection.push(...this._stashSelection),this.triggerChangeSelection(e)}initSelection(){const e=this.model.getValue().nodes.find((e=>co(e)));e&&this.setSelectionById(e.id)}get root(){return this._root.value||this._updateRootValue(),this._root}_updateRootValue(){const e=this.getViewModelNodeById("root");if(si(e))throw new Error("isNil(root)");this._root.value=e}graphify(){const{nodes:e,links:t}=this.model.getValue();e.forEach((e=>{this.nodeViewModelMap.set(e.id,od({id:e.id,children:[],props:di(yl(e.props)),meta:di(yl(e.meta)),hide:!1})),this.watchNode(e)})),t.forEach((e=>{this.addLink(e),this.watchLink(e)}));for(const n of e){const{id:e}=n,t=this.getViewModelNodeById(e);if(!t)throw new Error("500");t.children=this.getChildren(e)}this.watchNodeList(e),this.watchLinkList(t)}watchNode(e){gi(vl(e),mi.internalError);const t=Mp((()=>e),Ei,{deep:!0,onTrigger:t=>{const{target:n,type:i,key:r,oldValue:o,newValue:s}=t;if(i===Ba.SET)if("from"===r)this.updateChildren(s),this.updateChildren(o);else if("order"===r){const e=n;this.updateChildren(e.from)}else{const t=this.nodeViewModelMap.get(e.id);if(!t)throw new Error("500");if("id"===r&&n===e)throw new Error("500");t.props=di(yl(e.props)),t.meta=di(yl(e.meta))}else if(i===Ba.ADD)if(n===e)console.warn("400");else{const t=this.nodeViewModelMap.get(e.id);t.props=di(yl(e.props)),t.meta=di(yl(e.meta))}else{if(i!==Ba.DELETE)throw new Error("500");{const t=this.nodeViewModelMap.get(e.id);if(!t)throw new Error("500");t.props=di(yl(e.props)),t.meta=di(yl(e.meta))}}}});this.nodeWatchStops.set(e.id,t)}addLink(e){const{targetId:t,href:n,target:i}=e,r=this.getViewModelNodeById(t);if(!r)throw new Error("404");const o={href:n,target:i};r.link?Object.assign(r.link,o):r.link=o}watchLink(e){gi(vl(e),mi.internalError);const t=Mp((()=>e),Ei,{deep:!0,onTrigger:e=>{const{target:t}=e,n=t,{targetId:i,href:r,target:o}=n,s=this.getViewModelNodeById(i);if(!s)throw new Error("404");s.link||(s.link=Object.create(null)),Object.assign(s.link,{href:r,target:o})}});this.linkWatchStops.set(e.id,t)}addNode(e){this.nodeViewModelMap.delete(e.id);const t=od({id:e.id,children:this.getChildren(e.id),props:e.props,meta:e.meta,hide:!1});this.nodeViewModelMap.set(e.id,t),this.updateChildren(e.from),this.watchNode(e)}removeNode(e){if(!this.nodeViewModelMap.has(e.id))return void console.warn(mi.notFound,e);this.nodeViewModelMap.delete(e.id),this.updateChildren(e.from);const t=this.nodeWatchStops.get(e.id);if(!t)throw new Error("500");t(),this.nodeWatchStops.delete(e.id)}watchNodeList(e){const t=this.model.onDidChangeContent((t=>{const{changes:n}=t;n.filter((e=>{const{newValue:t,oldValue:n}=e;return go(t)||go(n)})).forEach((t=>{const{newValue:n,oldValue:i,op:r}=t;switch(r){case"replace":case"add":if(go(n)){const t=e.find((e=>e.id===n.id));t&&this.addNode(t)}break;case"remove":go(i)&&this.removeNode(i);break;default:throw new Error("500")}}))}));this._register(t)}removeLink(e){const{targetId:t,id:n}=e,i=this.getViewModelNodeById(t);if(!i)throw new Error("404");i.link&&delete i.link;const r=this.linkWatchStops.get(n);r?(r(),this.linkWatchStops.delete(n)):console.error("500")}watchLinkList(e){const t=this.model.onDidChangeContent((t=>{const{changes:n}=t;n.filter((e=>{const{newValue:t,oldValue:n}=e;return $s(t)||$s(n)})).forEach((t=>{const{newValue:n,oldValue:i,op:r}=t;let o=null;switch(r){case"replace":if($s(n)&&!this.linkWatchStops.has(n.id)){const{id:t}=n,i=e.find((e=>e.id===t));i&&(this.addLink(i),this.watchLink(i),o=i.targetId)}break;case"add":if($s(n)&&!this.linkWatchStops.has(n.id)){const{targetId:t,id:i}=n,r=e.find((e=>e.id===i));r&&(this.addLink(r),this.watchLink(r),o=t)}break;case"remove":$s(i)&&(this.removeLink(i),o=i.targetId);break;default:throw new Error("500")}if(o){const t=e.some((e=>e.targetId===o));this._styles.value.filter((e=>e.targetId===o)).forEach((e=>e.forLink=t))}}))}));this._register(t)}getChildren(e){return Dr(this.model.getChildrenNodesOfId(e).map((e=>{const t=this.nodeViewModelMap.get(e.id);return si(t)&&console.error("vm not found",e),t})))}updateChildren(e){const t=this.getViewModelNodeById(e);t?t.children=this.getChildren(e):console.error(mi.internalError)}toggleVisibility(e,t){const n=this.getViewModelNodeById(e);n?n.hide=!t:console.warn("404")}addOverrideStyle(e,t){const n={id:ri(),targetId:e,attrs:t};this._overrideStyles.value.push(n)}updateOverrideStyle(e,t){const n=this._overrideStyles.value.find((t=>t.id===e));n?Reflect.set(n,"attrs",t):console.warn("404")}removeOverrideStyle(e){const t=this._overrideStyles.value.findIndex((t=>t.id===e));-1!==t&&this._overrideStyles.value.splice(t,1)}getOverrideStyle(e){return this._overrideStyles.value.filter((t=>t.targetId===e))}clearAllOverrideStyle(){this._overrideStyles.value=[]}get styles(){return xd((()=>this._styles.value.concat(this._overrideStyles.value)))}group(){const{styles:e=[],breakpoints:t=[]}=this.model.getValue(),n=new Map;t.forEach((e=>n.set(e.id,e)));for(let i=0,r=e.length;i<r;i++)this.addStyle(e[i],i,n);this.watchStyleList(e)}addStyle(e,t,n){if(this.styleViewModelMap.has(e))return;this.removeStyle(e.id);const{nodes:i,breakpoints:r}=this.model.getValue(),o=e,{breakpointId:s,id:a,targetId:l,selectorType:c,subSelector:d}=o,u=di(x(o,["breakpointId","id","targetId","selectorType","subSelector"]));let h;if(s&&(h=n?n.get(s):Uo(r,(e=>e.id===s)),!h))throw new Error("404");const p=Uo(i,(e=>e.id===l));if(!p)return void console.error("404");const f=od({attrs:u,id:a,targetId:l,media:h,selectorType:c,subSelector:d,forText:io(p),forSVG:oo(p),forImage:ro(p),forVideo:ao(p),forLink:!!this.model.getLink(p.id)});this._styles.value.splice(t,0,f),this.watchStyle(e,f),this.styleViewModelMap.set(e,f)}watchStyle(e,t){gi(vl(e),mi.internalError);const n=Mp((()=>e),Ei,{deep:!0,onTrigger:e=>{const{newValue:n,type:i,key:r}=e,o=r;if("id"===o||"targetId"===o)Reflect.set(t,o,n);else if("breakpointId"===o)t.media=this.model.getValue().breakpoints.find((e=>e.id===n));else if(i===Ba.SET||i===Ba.ADD)t.attrs[o]=n;else{if(i!==Ba.DELETE)throw new Error("500");delete t.attrs[o]}}});this.styleWatchStops.set(e,n)}getStyleModel(e){for(const t of this.styleViewModelMap.keys())if(t.id===e)return t}removeStyle(e){const t=this.getStyleModel(e);if(!t)return;const n=Ar(this._styles.value,(e=>e.id===t.id));if(n<0)return;this._styles.value.splice(n,1),this.styleViewModelMap.delete(t);const i=this.styleWatchStops.get(t);i&&(i(),this.styleWatchStops.delete(t))}watchStyleList(e){const t=Mp((()=>e.length),Ei,{onTrigger:t=>{const{key:n,newValue:i,oldValue:r,type:o}=t;if(o===Ba.DELETE)this.removeStyle(r.id);else if(o===Ba.ADD){const t=Ar(e,(e=>e.id===i.id)),n=e[t];this.addStyle(n,t)}else{if(o!==Ba.SET)throw new Error("500");"length"===n&&zh().then((()=>{e.forEach(((e,t)=>{this.addStyle(e,t)}))}))}}});this._register(jo(t))}get fonts(){return this._fonts}connectFonts(){const{fontfaces:e}=this.model.getValue();this.fonts.value=di(e);const t=Mp((()=>e),(()=>this.fonts.value=di(e)),{deep:!0});this._register(jo(t))}};Pp=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Rp(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Ap(t,n,o),o})([Dp(0,Wr),Dp(1,Vr)],Pp);const Lp=Kr("keybindingService");let Up;!function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});Up=t=>{const n=setTimeout((()=>t(e)));let i=!1;return{dispose(){i||(i=!0,clearTimeout(n))}}}}else Up=(e,t)=>{const n=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(n))}}}}();class Fp{constructor(e){C(this,"_executor"),C(this,"_handle"),C(this,"_didRun",!1),C(this,"_value"),C(this,"_error"),this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Up((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class Bp{constructor(){C(this,"_isOpen"),C(this,"_promise"),C(this,"_completePromise"),this._isOpen=!1,this._promise=new Promise(((e,t)=>{this._completePromise=e}))}isOpen(){return this._isOpen}open(e){this._isOpen=!0,this._completePromise(e)}wait(){return this._promise}}class jp{constructor(e,t){C(this,"_token"),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}class Vp{constructor(){C(this,"_token"),this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval((()=>{e()}),t)}}class zp{constructor(e){C(this,"timeout"),C(this,"completionPromise"),C(this,"doResolve"),C(this,"doReject"),C(this,"task"),this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}}))),this.timeout=setTimeout((()=>{this.timeout=null,this.doResolve&&this.doResolve(null)}),t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new Error("canceled")),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}function Kp(e){return new Promise((t=>{setTimeout(t,e)}))}class Wp extends zo{constructor(e,t){super(),C(this,"_serviceBrand"),C(this,"_currentSingleModifier"),C(this,"_currentSingleModifierClearTimeout"),this._contextKeyService=e,this._commandService=t,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new jp}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return Dr(this._getResolver().lookupKeybindings(e).map((e=>e.resolvedKeybinding)))}lookupKeybinding(e){const t=this._getResolver().lookupPrimaryKeybinding(e);if(t)return t.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getDispatchParts();if(null===i)return null;const r=this._contextKeyService.getContext(t);return this._getResolver().resolve(r,i)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1,e)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();return null!==i&&null===this._currentSingleModifier?(this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._currentSingleModifier=null}),300),!1):null!==i&&i===this._currentSingleModifier?(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0,e)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_getCommandResult(e,t,n=!1){let i=null;if(n){const[t]=e.getSingleModifierDispatchParts();i=t}else[i]=e.getDispatchParts();let r=null;if(i){const e=this._contextKeyService.getContext(t);r=this._getResolver().resolve(e,i)}return{result:r,firstPart:i}}_doDispatch(e,t,n=!1,i){const{firstPart:r,result:o}=this._getCommandResult(e,t,n);let s=!1;if(r){if(o&&o.commandId){o.bubble||(s=!0);const e=o.commandArgs||[];e.push(i),this._commandService.executeCommand(o.commandId,e).then(void 0,(e=>{console.error(e)}))}return s}s=!0}}const Hp=navigator.userAgent;var $p;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}($p||($p={}));const qp=Hp.indexOf("Windows")>=0,Yp=Hp.indexOf("Macintosh")>=0,Gp=Hp.indexOf("Linux")>=0,Xp=Hp.indexOf("Firefox")>=0,Jp=Hp.indexOf("AppleWebKit")>=0,Qp=!(Hp.indexOf("Chrome")>=0)&&Hp.indexOf("Safari")>=0;var Zp;Hp.indexOf("iPad")>=0||Qp&&navigator.maxTouchPoints,Hp.indexOf("Edge/")>=0&&Hp.indexOf("WebView/"),Hp.indexOf("Electron/"),Hp.indexOf("Android"),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(Zp||(Zp={}));const ef=Yp?2:qp?1:3;var tf,nf;function rf(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const i=e.charCodeAt(n),o=t.charCodeAt(r);if(i<o)return-1;if(i>o)return 1}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}function of(e){return e>=tf.a&&e<=tf.z}function sf(e){return e>=tf.A&&e<=tf.Z}(nf=tf||(tf={}))[nf.Null=0]="Null",nf[nf.Backspace=8]="Backspace",nf[nf.Tab=9]="Tab",nf[nf.LineFeed=10]="LineFeed",nf[nf.CarriageReturn=13]="CarriageReturn",nf[nf.Space=32]="Space",nf[nf.ExclamationMark=33]="ExclamationMark",nf[nf.DoubleQuote=34]="DoubleQuote",nf[nf.Hash=35]="Hash",nf[nf.DollarSign=36]="DollarSign",nf[nf.PercentSign=37]="PercentSign",nf[nf.Ampersand=38]="Ampersand",nf[nf.SingleQuote=39]="SingleQuote",nf[nf.OpenParen=40]="OpenParen",nf[nf.CloseParen=41]="CloseParen",nf[nf.Asterisk=42]="Asterisk",nf[nf.Plus=43]="Plus",nf[nf.Comma=44]="Comma",nf[nf.Dash=45]="Dash",nf[nf.Period=46]="Period",nf[nf.Slash=47]="Slash",nf[nf.Digit0=48]="Digit0",nf[nf.Digit1=49]="Digit1",nf[nf.Digit2=50]="Digit2",nf[nf.Digit3=51]="Digit3",nf[nf.Digit4=52]="Digit4",nf[nf.Digit5=53]="Digit5",nf[nf.Digit6=54]="Digit6",nf[nf.Digit7=55]="Digit7",nf[nf.Digit8=56]="Digit8",nf[nf.Digit9=57]="Digit9",nf[nf.Colon=58]="Colon",nf[nf.Semicolon=59]="Semicolon",nf[nf.LessThan=60]="LessThan",nf[nf.Equals=61]="Equals",nf[nf.GreaterThan=62]="GreaterThan",nf[nf.QuestionMark=63]="QuestionMark",nf[nf.AtSign=64]="AtSign",nf[nf.A=65]="A",nf[nf.B=66]="B",nf[nf.C=67]="C",nf[nf.D=68]="D",nf[nf.E=69]="E",nf[nf.F=70]="F",nf[nf.G=71]="G",nf[nf.H=72]="H",nf[nf.I=73]="I",nf[nf.J=74]="J",nf[nf.K=75]="K",nf[nf.L=76]="L",nf[nf.M=77]="M",nf[nf.N=78]="N",nf[nf.O=79]="O",nf[nf.P=80]="P",nf[nf.Q=81]="Q",nf[nf.R=82]="R",nf[nf.S=83]="S",nf[nf.T=84]="T",nf[nf.U=85]="U",nf[nf.V=86]="V",nf[nf.W=87]="W",nf[nf.X=88]="X",nf[nf.Y=89]="Y",nf[nf.Z=90]="Z",nf[nf.OpenSquareBracket=91]="OpenSquareBracket",nf[nf.Backslash=92]="Backslash",nf[nf.CloseSquareBracket=93]="CloseSquareBracket",nf[nf.Caret=94]="Caret",nf[nf.Underline=95]="Underline",nf[nf.BackTick=96]="BackTick",nf[nf.a=97]="a",nf[nf.b=98]="b",nf[nf.c=99]="c",nf[nf.d=100]="d",nf[nf.e=101]="e",nf[nf.f=102]="f",nf[nf.g=103]="g",nf[nf.h=104]="h",nf[nf.i=105]="i",nf[nf.j=106]="j",nf[nf.k=107]="k",nf[nf.l=108]="l",nf[nf.m=109]="m",nf[nf.n=110]="n",nf[nf.o=111]="o",nf[nf.p=112]="p",nf[nf.q=113]="q",nf[nf.r=114]="r",nf[nf.s=115]="s",nf[nf.t=116]="t",nf[nf.u=117]="u",nf[nf.v=118]="v",nf[nf.w=119]="w",nf[nf.x=120]="x",nf[nf.y=121]="y",nf[nf.z=122]="z",nf[nf.OpenCurlyBrace=123]="OpenCurlyBrace",nf[nf.Pipe=124]="Pipe",nf[nf.CloseCurlyBrace=125]="CloseCurlyBrace",nf[nf.Tilde=126]="Tilde",nf[nf.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",nf[nf.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",nf[nf.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",nf[nf.U_Combining_Tilde=771]="U_Combining_Tilde",nf[nf.U_Combining_Macron=772]="U_Combining_Macron",nf[nf.U_Combining_Overline=773]="U_Combining_Overline",nf[nf.U_Combining_Breve=774]="U_Combining_Breve",nf[nf.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",nf[nf.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",nf[nf.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",nf[nf.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",nf[nf.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",nf[nf.U_Combining_Caron=780]="U_Combining_Caron",nf[nf.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",nf[nf.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",nf[nf.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",nf[nf.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",nf[nf.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",nf[nf.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",nf[nf.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",nf[nf.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",nf[nf.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",nf[nf.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",nf[nf.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",nf[nf.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",nf[nf.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",nf[nf.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",nf[nf.U_Combining_Horn=795]="U_Combining_Horn",nf[nf.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",nf[nf.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",nf[nf.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",nf[nf.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",nf[nf.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",nf[nf.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",nf[nf.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",nf[nf.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",nf[nf.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",nf[nf.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",nf[nf.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",nf[nf.U_Combining_Cedilla=807]="U_Combining_Cedilla",nf[nf.U_Combining_Ogonek=808]="U_Combining_Ogonek",nf[nf.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",nf[nf.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",nf[nf.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",nf[nf.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",nf[nf.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",nf[nf.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",nf[nf.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",nf[nf.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",nf[nf.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",nf[nf.U_Combining_Low_Line=818]="U_Combining_Low_Line",nf[nf.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",nf[nf.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",nf[nf.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",nf[nf.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",nf[nf.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",nf[nf.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",nf[nf.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",nf[nf.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",nf[nf.U_Combining_Square_Below=827]="U_Combining_Square_Below",nf[nf.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",nf[nf.U_Combining_X_Above=829]="U_Combining_X_Above",nf[nf.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",nf[nf.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",nf[nf.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",nf[nf.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",nf[nf.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",nf[nf.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",nf[nf.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",nf[nf.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",nf[nf.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",nf[nf.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",nf[nf.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",nf[nf.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",nf[nf.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",nf[nf.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",nf[nf.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",nf[nf.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",nf[nf.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",nf[nf.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",nf[nf.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",nf[nf.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",nf[nf.U_Combining_Fermata=850]="U_Combining_Fermata",nf[nf.U_Combining_X_Below=851]="U_Combining_X_Below",nf[nf.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",nf[nf.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",nf[nf.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",nf[nf.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",nf[nf.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",nf[nf.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",nf[nf.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",nf[nf.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",nf[nf.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",nf[nf.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",nf[nf.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",nf[nf.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",nf[nf.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",nf[nf.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",nf[nf.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",nf[nf.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",nf[nf.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",nf[nf.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",nf[nf.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",nf[nf.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",nf[nf.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",nf[nf.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",nf[nf.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",nf[nf.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",nf[nf.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",nf[nf.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",nf[nf.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",nf[nf.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",nf[nf.LINE_SEPARATOR=8232]="LINE_SEPARATOR",nf[nf.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",nf[nf.NEXT_LINE=133]="NEXT_LINE",nf[nf.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",nf[nf.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",nf[nf.U_DIAERESIS=168]="U_DIAERESIS",nf[nf.U_MACRON=175]="U_MACRON",nf[nf.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",nf[nf.U_CEDILLA=184]="U_CEDILLA",nf[nf.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",nf[nf.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",nf[nf.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",nf[nf.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",nf[nf.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",nf[nf.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",nf[nf.U_BREVE=728]="U_BREVE",nf[nf.U_DOT_ABOVE=729]="U_DOT_ABOVE",nf[nf.U_RING_ABOVE=730]="U_RING_ABOVE",nf[nf.U_OGONEK=731]="U_OGONEK",nf[nf.U_SMALL_TILDE=732]="U_SMALL_TILDE",nf[nf.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",nf[nf.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",nf[nf.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",nf[nf.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",nf[nf.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",nf[nf.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",nf[nf.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",nf[nf.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",nf[nf.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",nf[nf.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",nf[nf.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",nf[nf.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",nf[nf.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",nf[nf.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",nf[nf.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",nf[nf.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",nf[nf.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",nf[nf.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",nf[nf.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",nf[nf.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",nf[nf.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",nf[nf.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",nf[nf.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",nf[nf.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",nf[nf.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",nf[nf.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",nf[nf.U_GREEK_TONOS=900]="U_GREEK_TONOS",nf[nf.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",nf[nf.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",nf[nf.U_GREEK_PSILI=8127]="U_GREEK_PSILI",nf[nf.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",nf[nf.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",nf[nf.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",nf[nf.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",nf[nf.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",nf[nf.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",nf[nf.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",nf[nf.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",nf[nf.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",nf[nf.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",nf[nf.U_GREEK_VARIA=8175]="U_GREEK_VARIA",nf[nf.U_GREEK_OXIA=8189]="U_GREEK_OXIA",nf[nf.U_GREEK_DASIA=8190]="U_GREEK_DASIA",nf[nf.U_OVERLINE=8254]="U_OVERLINE",nf[nf.UTF8_BOM=65279]="UTF8_BOM";class af{constructor(){C(this,"segment"),C(this,"value"),C(this,"key"),C(this,"left"),C(this,"mid"),C(this,"right")}isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class lf{constructor(e){C(this,"_iter"),C(this,"_root"),this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;for(this._root||(this._root=new af,this._root.segment=n.value()),i=this._root;;){const e=n.cmp(i.segment);if(e>0)i.left||(i.left=new af,i.left.segment=n.value()),i=i.left;else if(e<0)i.right||(i.right=new af,i.right.segment=n.value()),i=i.right;else{if(!n.hasNext())break;n.next(),i.mid||(i.mid=new af,i.mid.segment=n.value()),i=i.mid}}const r=i.value;return i.value=t,i.key=e,r}get(e){var t;return null==(t=this._getNode(e))?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),i=[];let r=this._root;for(;r;){const e=n.cmp(r.segment);if(e>0)i.push([1,r]),r=r.left;else if(e<0)i.push([-1,r]),r=r.right;else{if(!n.hasNext()){for(t?(r.left=void 0,r.mid=void 0,r.right=void 0):r.value=void 0;i.length>0&&r.isEmpty();){const[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}r=t}break}n.next(),i.push([0,r]),r=r.mid}}}findSubstr(e){const t=this._iter.reset(e);let n,i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())return n.mid?this._entries(n.mid):void 0;t.next(),n=n.mid}}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}const cf=Hp||"",df=new Map;df.set("false",!1),df.set("true",!0),df.set("isMac",Yp),df.set("isLinux",Gp),df.set("isWindows",qp),df.set("isEdge",cf.indexOf("Edg/")>=0),df.set("isFirefox",cf.indexOf("Firefox")>=0),df.set("isChrome",cf.indexOf("Chrome")>=0),df.set("isSafari",cf.indexOf("Safari")>=0),df.set("isIPad",cf.indexOf("iPad")>=0);const uf=Object.prototype.hasOwnProperty;var hf,pf;(pf=hf||(hf={}))[pf.False=0]="False",pf[pf.True=1]="True",pf[pf.Defined=2]="Defined",pf[pf.Not=3]="Not",pf[pf.Equals=4]="Equals",pf[pf.NotEquals=5]="NotEquals",pf[pf.And=6]="And",pf[pf.Regex=7]="Regex",pf[pf.NotRegex=8]="NotRegex",pf[pf.Or=9]="Or",pf[pf.In=10]="In",pf[pf.NotIn=11]="NotIn",pf[pf.Greater=12]="Greater",pf[pf.GreaterEquals=13]="GreaterEquals",pf[pf.Smaller=14]="Smaller",pf[pf.SmallerEquals=15]="SmallerEquals";class ff{static false(){return _f.INSTANCE}static true(){return yf.INSTANCE}static has(e){return wf.create(e)}static equals(e,t){return bf.create(e,t)}static notEquals(e,t){return kf.create(e,t)}static regex(e,t){return Mf.create(e,t)}static in(e,t){return xf.create(e,t)}static not(e){return Ef.create(e)}static and(...e){return Af.create(e)}static or(...e){return Rf.create(e)}static greater(e,t){return Sf.create(e,t)}static less(e,t){return Of.create(e,t)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){const n=e.split("||");return Rf.create(n.map((e=>this._deserializeAndExpression(e,t))))}static _deserializeAndExpression(e,t){const n=e.split("&&");return Af.create(n.map((e=>this._deserializeOne(e,t))))}static _deserializeOne(e,t){if((e=e.trim()).indexOf("!=")>=0){const n=e.split("!=");return kf.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){const n=e.split("==");return bf.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){const n=e.split("=~");return Mf.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){const t=e.split(" in ");return xf.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const t=e.split(">=");return If.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const t=e.split(">");return Sf.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const t=e.split("<=");return Tf.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const t=e.split("<");return Of.create(t[0].trim(),t[1].trim())}return/^\!\s*/.test(e)?Ef.create(e.substr(1).trim()):wf.create(e)}static _deserializeValue(e,t){if("true"===(e=e.trim()))return!0;if("false"===e)return!1;const n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(!(n=e)||"string"!=typeof n||0===n.trim().length){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}var n;const i=e.indexOf("/"),r=e.lastIndexOf("/");if(i===r||i<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}const o=e.slice(i+1,r),s="i"===e[r+1]?"i":"";try{return new RegExp(o,s)}catch(_8){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${_8}`);return console.warn(`bad regexp-value '${e}', parse error: ${_8}`),null}}}function gf(e,t){return e.cmp(t)}const mf=class{constructor(){C(this,"type",0)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return yf.INSTANCE}};let _f=mf;C(_f,"INSTANCE",new mf);const vf=class{constructor(){C(this,"type",1)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return _f.INSTANCE}};let yf=vf;C(yf,"INSTANCE",new vf);class wf{constructor(e){C(this,"type",2),this.key=e}static create(e){const t=df.get(e);return"boolean"==typeof t?t?yf.INSTANCE:_f.INSTANCE:new wf(e)}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return Ef.create(this.key)}}class bf{constructor(e,t){C(this,"type",4),this.key=e,this.value=t}static create(e,t){if("boolean"==typeof t)return t?wf.create(e):Ef.create(e);const n=df.get(e);if("boolean"==typeof n){return t===(n?"true":"false")?yf.INSTANCE:_f.INSTANCE}return new bf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return kf.create(this.key,this.value)}}class xf{constructor(e,t){C(this,"type",10),this.key=e,this.valueKey=t}static create(e,t){return new xf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:"string"==typeof n&&"object"==typeof t&&null!==t&&uf.call(t,n)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return Cf.create(this)}}class Cf{constructor(e){C(this,"type",11),this._actual=e}static create(e){return new Cf(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(e){return new Cf(this._actual.map(e))}negate(){return this._actual}}class kf{constructor(e,t){C(this,"type",5),this.key=e,this.value=t}static create(e,t){if("boolean"==typeof t)return t?Ef.create(e):wf.create(e);const n=df.get(e);if("boolean"==typeof n){return t===(n?"true":"false")?_f.INSTANCE:yf.INSTANCE}return new kf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return bf.create(this.key,this.value)}}class Ef{constructor(e){C(this,"type",3),this.key=e}static create(e){const t=df.get(e);return"boolean"==typeof t?t?_f.INSTANCE:yf.INSTANCE:new Ef(e)}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return wf.create(this.key)}}class Sf{constructor(e,t){C(this,"type",12),this.key=e,this.value=t}static create(e,t){return new Sf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))>parseFloat(this.value)}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return Tf.create(this.key,this.value)}}class If{constructor(e,t){C(this,"type",13),this.key=e,this.value=t}static create(e,t){return new If(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))>=parseFloat(this.value)}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return Of.create(this.key,this.value)}}class Of{constructor(e,t){C(this,"type",14),this.key=e,this.value=t}static create(e,t){return new Of(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))<parseFloat(this.value)}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return If.create(this.key,this.value)}}class Tf{constructor(e,t){C(this,"type",15),this.key=e,this.value=t}static create(e,t){return new Tf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Ff(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))<=parseFloat(this.value)}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return Sf.create(this.key,this.value)}}class Mf{constructor(e,t){C(this,"type",7),this.key=e,this.regexp=t}static create(e,t){return new Mf(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return Nf.create(this)}}class Nf{constructor(e){C(this,"type",8),this._actual=e}static create(e){return new Nf(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(e){return new Nf(this._actual.map(e))}negate(){return this._actual}}class Af{constructor(e){C(this,"type",6),this.expr=e}static create(e){return Af._normalizeArr(e)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=gf(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e){const t=[];let n=!1;for(const i of e)if(i)if(1!==i.type){if(0===i.type)return _f.INSTANCE;6!==i.type?t.push(i):t.push(...i.expr)}else n=!0;if(0===t.length&&n)return yf.INSTANCE;if(0!==t.length){if(1===t.length)return t[0];for(t.sort(gf);t.length>1;){const e=t[t.length-1];if(9!==e.type)break;t.pop();const n=t.pop(),i=Rf.create(e.expr.map((e=>Af.create([e,n]))));i&&(t.push(i),t.sort(gf))}return 1===t.length?t[0]:new Af(t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Af(this.expr.map((t=>t.map(e))))}negate(){const e=[];for(const t of this.expr)e.push(t.negate());return Rf.create(e)}}class Rf{constructor(e){C(this,"type",9),this.expr=e}static create(e){const t=Rf._normalizeArr(e);if(0!==t.length)return 1===t.length?t[0]:new Rf(t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=gf(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e){let t=[],n=!1;if(e){for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r)if(0!==r.type){if(1===r.type)return[yf.INSTANCE];9!==r.type?t.push(r):t=t.concat(r.expr)}else n=!0}if(0===t.length&&n)return[_f.INSTANCE];t.sort(gf)}return t}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Rf(this.expr.map((t=>t.map(e))))}negate(){const e=[];for(const n of this.expr)e.push(n.negate());const t=e=>9===e.type?e.expr:[e];for(;e.length>1;){const n=e.shift(),i=e.shift(),r=[];for(const e of t(n))for(const n of t(i))r.push(ff.and(e,n));e.unshift(ff.or(...r))}return e[0]}}const Df=class extends wf{constructor(e,t,n){super(e),C(this,"_defaultValue"),this.key=e,this._defaultValue=t,"object"==typeof n?Df._info.push(b(w({},n),{key:e})):!0!==n&&Df._info.push({key:e,description:n,type:null!=t?typeof t:void 0})}static all(){return Df._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return ff.not(this.key)}isEqualTo(e){return ff.equals(this.key,e)}notEqualsTo(e){return ff.notEquals(this.key,e)}};let Pf=Df;C(Pf,"_info",[]);const Lf=Kr("contextKeyService");function Uf(e,t){return e<t?-1:e>t?1:0}function Ff(e,t,n,i){return e<n?-1:e>n?1:t<i?-1:t>i?1:0}class Bf{constructor(e=!0){C(this,"_value"),C(this,"_from"),C(this,"_to"),this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(this._value.charCodeAt(this._to)===tf.Period){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?rf(e,this._value,0,e.length,this._from,this._to):function(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const s=e.charCodeAt(n),a=t.charCodeAt(r);if(s===a)continue;const l=s-a;if(!(32===l&&sf(a)||-32===l&&sf(s)))return of(s)&&of(a)?l:rf(e.toLowerCase(),t.toLowerCase(),n,i,r,o)}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class jf{constructor(e,t){C(this,"_defaultKeybindings"),C(this,"_keybindings"),C(this,"_defaultBoundCommands"),C(this,"_map"),C(this,"_lookupMap"),this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let n=0,i=e.length;n<i;n++){const t=e[n].command;t&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=jf.combine(e,t);for(let n=0,i=this._keybindings.length;n<i;n++){const e=this._keybindings[n];0!==e.keypressParts.length&&(e.when&&e.when.type===hf.False||this._addKeyPress(e.keypressParts[0],e))}}static _isTargetedForRemoval(e,t,n,i,r){if(e.command!==i)return!1;if(t&&e.keypressParts[0]!==t)return!1;if(n&&e.keypressParts[1]!==n)return!1;if(r){if(!e.when)return!1;if(!r.equals(e.when))return!1}return!0}static combine(e,t){e=e.slice(0);const n=[];for(const i of t){if(!i.command||0===i.command.length||"-"!==i.command.charAt(0)){n.push(i);continue}const t=i.command.substr(1),r=i.keypressParts[0],o=i.keypressParts[1],s=i.when;for(let n=e.length-1;n>=0;n--)this._isTargetedForRemoval(e[n],r,o,t,s)&&e.splice(n,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(void 0===n)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let i=n.length-1;i>=0;i--){const e=n[i];if(e.command===t.command)continue;const r=e.keypressParts.length>1,o=t.keypressParts.length>1;r&&o&&e.keypressParts[1]!==t.keypressParts[1]||jf.whenIsEntirelyIncluded(e.when,t.when)&&this._removeFromLookupMap(e)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(void 0!==t)for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return void t.splice(n,1)}static whenIsEntirelyIncluded(e,t){return!t||!!e&&this._implies(e,t)}static _implies(e,t){const n=e=>e.type===hf.Or?e.expr:[e],i=n(e.negate()).concat(n(t));for(let r=0;r<i.length;r++){const e=i[r].negate();for(let t=r+1;t<i.length;t++){const n=i[t];if(e.equals(n))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(void 0===t||0===t.length)return[];const n=[];let i=0;for(let r=t.length-1;r>=0;r--)n[i++]=t[r];return n}lookupPrimaryKeybinding(e){const t=this._lookupMap.get(e);return void 0===t||0===t.length?null:t[t.length-1]}resolve(e,t){this._log(`| Resolving ${t}`);let n=null;const i=this._map.get(t);if(void 0===i)return this._log("\\ No keybinding entries."),null;n=i;const r=this._findCommand(e,n);return r?(this._log(`\\ From ${n.length} keybinding entries, matched ${r.command}, when: ${function(e){if(!e)return"no when condition";return`${e.serialize()}`}(r.when)}, source: ${o=r,o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}.`),{leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null);var o}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(jf.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return!t||t.evaluate(e)}_log(...e){}}var Vf,zf;(zf=Vf||(Vf={}))[zf.DependsOnKbLayout=-1]="DependsOnKbLayout",zf[zf.Unknown=0]="Unknown",zf[zf.Backspace=1]="Backspace",zf[zf.Tab=2]="Tab",zf[zf.Enter=3]="Enter",zf[zf.Shift=4]="Shift",zf[zf.Ctrl=5]="Ctrl",zf[zf.Alt=6]="Alt",zf[zf.PauseBreak=7]="PauseBreak",zf[zf.CapsLock=8]="CapsLock",zf[zf.Escape=9]="Escape",zf[zf.Space=10]="Space",zf[zf.PageUp=11]="PageUp",zf[zf.PageDown=12]="PageDown",zf[zf.End=13]="End",zf[zf.Home=14]="Home",zf[zf.LeftArrow=15]="LeftArrow",zf[zf.UpArrow=16]="UpArrow",zf[zf.RightArrow=17]="RightArrow",zf[zf.DownArrow=18]="DownArrow",zf[zf.Insert=19]="Insert",zf[zf.Delete=20]="Delete",zf[zf.KEY_0=21]="KEY_0",zf[zf.KEY_1=22]="KEY_1",zf[zf.KEY_2=23]="KEY_2",zf[zf.KEY_3=24]="KEY_3",zf[zf.KEY_4=25]="KEY_4",zf[zf.KEY_5=26]="KEY_5",zf[zf.KEY_6=27]="KEY_6",zf[zf.KEY_7=28]="KEY_7",zf[zf.KEY_8=29]="KEY_8",zf[zf.KEY_9=30]="KEY_9",zf[zf.KEY_A=31]="KEY_A",zf[zf.KEY_B=32]="KEY_B",zf[zf.KEY_C=33]="KEY_C",zf[zf.KEY_D=34]="KEY_D",zf[zf.KEY_E=35]="KEY_E",zf[zf.KEY_F=36]="KEY_F",zf[zf.KEY_G=37]="KEY_G",zf[zf.KEY_H=38]="KEY_H",zf[zf.KEY_I=39]="KEY_I",zf[zf.KEY_J=40]="KEY_J",zf[zf.KEY_K=41]="KEY_K",zf[zf.KEY_L=42]="KEY_L",zf[zf.KEY_M=43]="KEY_M",zf[zf.KEY_N=44]="KEY_N",zf[zf.KEY_O=45]="KEY_O",zf[zf.KEY_P=46]="KEY_P",zf[zf.KEY_Q=47]="KEY_Q",zf[zf.KEY_R=48]="KEY_R",zf[zf.KEY_S=49]="KEY_S",zf[zf.KEY_T=50]="KEY_T",zf[zf.KEY_U=51]="KEY_U",zf[zf.KEY_V=52]="KEY_V",zf[zf.KEY_W=53]="KEY_W",zf[zf.KEY_X=54]="KEY_X",zf[zf.KEY_Y=55]="KEY_Y",zf[zf.KEY_Z=56]="KEY_Z",zf[zf.Meta=57]="Meta",zf[zf.ContextMenu=58]="ContextMenu",zf[zf.F1=59]="F1",zf[zf.F2=60]="F2",zf[zf.F3=61]="F3",zf[zf.F4=62]="F4",zf[zf.F5=63]="F5",zf[zf.F6=64]="F6",zf[zf.F7=65]="F7",zf[zf.F8=66]="F8",zf[zf.F9=67]="F9",zf[zf.F10=68]="F10",zf[zf.F11=69]="F11",zf[zf.F12=70]="F12",zf[zf.F13=71]="F13",zf[zf.F14=72]="F14",zf[zf.F15=73]="F15",zf[zf.F16=74]="F16",zf[zf.F17=75]="F17",zf[zf.F18=76]="F18",zf[zf.F19=77]="F19",zf[zf.NumLock=78]="NumLock",zf[zf.ScrollLock=79]="ScrollLock",zf[zf.US_SEMICOLON=80]="US_SEMICOLON",zf[zf.US_EQUAL=81]="US_EQUAL",zf[zf.US_COMMA=82]="US_COMMA",zf[zf.US_MINUS=83]="US_MINUS",zf[zf.US_DOT=84]="US_DOT",zf[zf.US_SLASH=85]="US_SLASH",zf[zf.US_BACKTICK=86]="US_BACKTICK",zf[zf.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",zf[zf.US_BACKSLASH=88]="US_BACKSLASH",zf[zf.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",zf[zf.US_QUOTE=90]="US_QUOTE",zf[zf.OEM_8=91]="OEM_8",zf[zf.OEM_102=92]="OEM_102",zf[zf.NUMPAD_0=93]="NUMPAD_0",zf[zf.NUMPAD_1=94]="NUMPAD_1",zf[zf.NUMPAD_2=95]="NUMPAD_2",zf[zf.NUMPAD_3=96]="NUMPAD_3",zf[zf.NUMPAD_4=97]="NUMPAD_4",zf[zf.NUMPAD_5=98]="NUMPAD_5",zf[zf.NUMPAD_6=99]="NUMPAD_6",zf[zf.NUMPAD_7=100]="NUMPAD_7",zf[zf.NUMPAD_8=101]="NUMPAD_8",zf[zf.NUMPAD_9=102]="NUMPAD_9",zf[zf.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",zf[zf.NUMPAD_ADD=104]="NUMPAD_ADD",zf[zf.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",zf[zf.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",zf[zf.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",zf[zf.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",zf[zf.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",zf[zf.ABNT_C1=110]="ABNT_C1",zf[zf.ABNT_C2=111]="ABNT_C2",zf[zf.MAX_VALUE=112]="MAX_VALUE";class Kf{constructor(){C(this,"_keyCodeToStr"),C(this,"_strToKeyCode"),this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const Wf=new Kf,Hf=new Kf,$f=new Kf;var qf,Yf,Gf,Xf,Jf,Qf;!function(){function e(e,t,n=t,i=n){Wf.define(e,t),Hf.define(e,n),$f.define(e,i)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}(),(Yf=qf||(qf={})).toString=function(e){return Wf.keyCodeToStr(e)},Yf.fromString=function(e){return Wf.strToKeyCode(e)},Yf.toUserSettingsUS=function(e){return Hf.keyCodeToStr(e)},Yf.toUserSettingsGeneral=function(e){return $f.keyCodeToStr(e)},Yf.fromUserSettings=function(e){return Hf.strToKeyCode(e)||$f.strToKeyCode(e)},(Xf=Gf||(Gf={}))[Xf.CtrlCmd=2048]="CtrlCmd",Xf[Xf.Shift=1024]="Shift",Xf[Xf.Alt=512]="Alt",Xf[Xf.WinCtrl=256]="WinCtrl",Xf[Xf.KeyCode=255]="KeyCode",(Qf=Jf||(Jf={}))[Qf.CtrlCmd=2048]="CtrlCmd",Qf[Qf.Shift=1024]="Shift",Qf[Qf.Alt=512]="Alt",Qf[Qf.WinCtrl=256]="WinCtrl";class Zf{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}function eg(e,t){if(0===e)return null;const n=(65535&e)>>>0;if(0!==(4294901760&e)>>>16)throw new Error("chordkeybinding is not su");return function(e,t){const n=!!(2048&e),i=!!(256&e),r=t===Zp.Macintosh?i:n,o=!!(1024&e),s=!!(512&e),a=t===Zp.Macintosh?n:i;return new Zf(r,o,s,a,255&e)}(n,t)}class tg{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyLabel"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=r}}const ng=Kr("commandService");class ig{constructor(){C(this,"_commands",new Map)}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return!!e&&e.charCodeAt(0)===tf.Caret&&(e=e.substr(1)),this.registerCommand({id:e,handler:t})}let{id:n}=e;!!n&&n.charCodeAt(0)===tf.Caret&&(n=n.substr(1));let i=this._commands.get(n);i||(i=new $o,this._commands.set(n,i));const r=i.unshift(e);return jo((()=>{r();const e=this._commands.get(n);(null==e?void 0:e.isEmpty())&&this._commands.delete(n)}))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return t[Symbol.iterator]().next().value}getCommands(){const e=new Map;for(const t of this._commands.keys()){const n=this.getCommand(t);n&&e.set(t,n)}return e}clear(){for(const[e,t]of this._commands.entries())t.clear();this._commands.clear()}}const rg="CommandsRegistry";let og=Reflect.get(globalThis,rg);og||(og=new ig,Reflect.set(globalThis,rg,og));const sg=og;var ag,lg;(lg=ag||(ag={}))[lg.EditorCore=0]="EditorCore",lg[lg.EditorContrib=100]="EditorContrib",lg[lg.WorkbenchContrib=200]="WorkbenchContrib",lg[lg.BuiltinExtension=300]="BuiltinExtension",lg[lg.ExternalExtension=400]="ExternalExtension";class cg{constructor(){C(this,"_coreKeybindings"),C(this,"_extensionKeybindings"),C(this,"_cachedMergedKeybindings"),this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ef===Zp.Windows){if(e&&e.win)return e.win}else if(ef===Zp.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}static bindToCurrentPlatform2(e){if(ef===Zp.Windows){if(e&&e.win)return e.win}else if(ef===Zp.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=cg.bindToCurrentPlatform(e);if(t&&t.primary){const n=eg(t.primary,ef);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const i=eg(t.secondary[n],ef);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,-n-1,e.when)}}setExtensionKeybindings(e){const t=[];let n=0;for(let i=0,r=e.length;i<r;i++){const r=e[i],o=cg.bindToCurrentPlatform2(r);o&&o.primary&&(t[n++]={keybinding:o.primary,command:r.id,commandArgs:r.args,when:r.when,weight1:r.weight,weight2:0,extensionId:r.extensionId||null,isBuiltinExtension:r.isBuiltinExtension||!1})}this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return this.registerKeybindingRule(e),sg.registerCommand(e)}static _mightProduceChar(e){return e>=Vf.KEY_0&&e<=Vf.KEY_9||(e>=Vf.KEY_A&&e<=Vf.KEY_Z||(e===Vf.US_SEMICOLON||e===Vf.US_EQUAL||e===Vf.US_COMMA||e===Vf.US_MINUS||e===Vf.US_DOT||e===Vf.US_SLASH||e===Vf.US_BACKTICK||e===Vf.ABNT_C1||e===Vf.ABNT_C2||e===Vf.US_OPEN_SQUARE_BRACKET||e===Vf.US_BACKSLASH||e===Vf.US_CLOSE_SQUARE_BRACKET||e===Vf.US_QUOTE||e===Vf.OEM_8||e===Vf.OEM_102))}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&cg._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,r,o){ef===Zp.Windows&&this._assertNoCtrlAlt(e,t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:i,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(hg)),this._cachedMergedKeybindings.slice(0)}clear(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}}let dg=Reflect.get(globalThis,"KeybindingsRegistry");dg||(dg=new cg,Reflect.set(globalThis,"KeybindingsRegistry",dg));const ug=dg;function hg(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}class pg{constructor(e){C(this,"_standardKeyboardEventBrand",!0),C(this,"browserEvent"),C(this,"target"),C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),C(this,"code"),C(this,"_asKeybinding");const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return qf.fromString(t)}return fg[e.keyCode]||Vf.Unknown}(t),this.code=t.code}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}equals(e){return this._asKeybinding===e}}const fg=new Array(230),gg=new Array(Vf.MAX_VALUE);!function(){for(let t=0;t<gg.length;t++)gg[t]=-1;function e(e,t){fg[e]=t,gg[t]=e}e(3,Vf.PauseBreak),e(8,Vf.Backspace),e(9,Vf.Tab),e(13,Vf.Enter),e(16,Vf.Shift),e(17,Vf.Ctrl),e(18,Vf.Alt),e(19,Vf.PauseBreak),e(20,Vf.CapsLock),e(27,Vf.Escape),e(32,Vf.Space),e(33,Vf.PageUp),e(34,Vf.PageDown),e(35,Vf.End),e(36,Vf.Home),e(37,Vf.LeftArrow),e(38,Vf.UpArrow),e(39,Vf.RightArrow),e(40,Vf.DownArrow),e(45,Vf.Insert),e(46,Vf.Delete),e(48,Vf.KEY_0),e(49,Vf.KEY_1),e(50,Vf.KEY_2),e(51,Vf.KEY_3),e(52,Vf.KEY_4),e(53,Vf.KEY_5),e(54,Vf.KEY_6),e(55,Vf.KEY_7),e(56,Vf.KEY_8),e(57,Vf.KEY_9),e(65,Vf.KEY_A),e(66,Vf.KEY_B),e(67,Vf.KEY_C),e(68,Vf.KEY_D),e(69,Vf.KEY_E),e(70,Vf.KEY_F),e(71,Vf.KEY_G),e(72,Vf.KEY_H),e(73,Vf.KEY_I),e(74,Vf.KEY_J),e(75,Vf.KEY_K),e(76,Vf.KEY_L),e(77,Vf.KEY_M),e(78,Vf.KEY_N),e(79,Vf.KEY_O),e(80,Vf.KEY_P),e(81,Vf.KEY_Q),e(82,Vf.KEY_R),e(83,Vf.KEY_S),e(84,Vf.KEY_T),e(85,Vf.KEY_U),e(86,Vf.KEY_V),e(87,Vf.KEY_W),e(88,Vf.KEY_X),e(89,Vf.KEY_Y),e(90,Vf.KEY_Z),e(93,Vf.ContextMenu),e(96,Vf.NUMPAD_0),e(97,Vf.NUMPAD_1),e(98,Vf.NUMPAD_2),e(99,Vf.NUMPAD_3),e(100,Vf.NUMPAD_4),e(101,Vf.NUMPAD_5),e(102,Vf.NUMPAD_6),e(103,Vf.NUMPAD_7),e(104,Vf.NUMPAD_8),e(105,Vf.NUMPAD_9),e(106,Vf.NUMPAD_MULTIPLY),e(107,Vf.NUMPAD_ADD),e(108,Vf.NUMPAD_SEPARATOR),e(109,Vf.NUMPAD_SUBTRACT),e(110,Vf.NUMPAD_DECIMAL),e(111,Vf.NUMPAD_DIVIDE),e(112,Vf.F1),e(113,Vf.F2),e(114,Vf.F3),e(115,Vf.F4),e(116,Vf.F5),e(117,Vf.F6),e(118,Vf.F7),e(119,Vf.F8),e(120,Vf.F9),e(121,Vf.F10),e(122,Vf.F11),e(123,Vf.F12),e(124,Vf.F13),e(125,Vf.F14),e(126,Vf.F15),e(127,Vf.F16),e(128,Vf.F17),e(129,Vf.F18),e(130,Vf.F19),e(144,Vf.NumLock),e(145,Vf.ScrollLock),e(186,Vf.US_SEMICOLON),e(187,Vf.US_EQUAL),e(188,Vf.US_COMMA),e(189,Vf.US_MINUS),e(190,Vf.US_DOT),e(191,Vf.US_SLASH),e(192,Vf.US_BACKTICK),e(193,Vf.ABNT_C1),e(194,Vf.ABNT_C2),e(219,Vf.US_OPEN_SQUARE_BRACKET),e(220,Vf.US_BACKSLASH),e(221,Vf.US_CLOSE_SQUARE_BRACKET),e(222,Vf.US_QUOTE),e(223,Vf.OEM_8),e(226,Vf.OEM_102),e(229,Vf.KEY_IN_COMPOSITION),Xp?(e(59,Vf.US_SEMICOLON),e(107,Vf.US_EQUAL),e(109,Vf.US_MINUS),Yp&&e(224,Vf.Meta)):Jp&&(e(91,Vf.Meta),e(Yp?93:92,Vf.Meta))}();const mg="paste",_g="click",vg="dblclick",yg="mouseup",wg="mousedown",bg="mousemove",xg="mouseenter",Cg="mouseleave",kg="wheel",Eg="keydown",Sg="keyup",Ig="resize",Og="scroll",Tg="focus",Mg="blur",Ng="visibilitychange";class Ag{constructor(e,t,n,i){C(this,"_handler"),C(this,"_node"),C(this,"_type"),C(this,"_options"),this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Rg(e,t,n,i){return new Ag(e,t,n,i)}const Dg=function(e,t){return t};class Pg extends zo{constructor(e,t,n,i=Dg,r=8){super();let o=null,s=0;const a=this._register(new jp),l=()=>{s=(new Date).getTime(),n(o),o=null};this._register(Rg(e,t,(e=>{o=i(o,e);const t=(new Date).getTime()-s;t>=r?(a.cancel(),l()):a.setIfNotSet(l,r-t)})))}}function Lg(e,t){const n=e.parentElement;if(!n)return null;return t(n)?n:Lg(n,t)}class Ug{constructor(e,t,n,i,r,o,s){C(this,"_resolvedKeybindingItemBrand"),C(this,"resolvedKeybinding"),C(this,"keypressParts"),C(this,"bubble"),C(this,"command"),C(this,"commandArgs"),C(this,"when"),C(this,"isDefault"),C(this,"extensionId"),C(this,"isBuiltinExtension"),this.resolvedKeybinding=e,this.keypressParts=e?Fg(e.getDispatchParts()):[],e&&0===this.keypressParts.length&&(this.keypressParts=Fg(e.getSingleModifierDispatchParts())),this.bubble=!!t&&t.charCodeAt(0)===tf.Caret,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=s}}function Fg(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i)return t;t.push(i)}return t}const Bg=new class{constructor(e,t,n=t){C(this,"modifierLabels"),this.modifierLabels=[null],this.modifierLabels[Zp.Macintosh]=e,this.modifierLabels[Zp.Windows]=t,this.modifierLabels[Zp.Linux]=n}toLabel(e,t,n){if(0===t.length)return null;const i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r],s=n(o);if(null===s)return null;i[r]=jg(o,s,this.modifierLabels[e])}return i.join(" ")}}({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function jg(e,t,n){if(null===t)return"";const i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),""!==t&&i.push(t),i.join(n.separator)}class Vg extends class extends class{}{constructor(e,t){if(super(),C(this,"_os"),C(this,"_parts"),0===t.length)throw new Error("400");this._os=e,this._parts=t}getLabel(){return Bg.toLabel(this._os,this._parts,(e=>this._getLabel(e)))}getParts(){return this._parts.map((e=>this._getPart(e)))}_getPart(e){return new tg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e))}getDispatchParts(){return this._parts.map((e=>this._getDispatchPart(e)))}getSingleModifierDispatchParts(){return this._parts.map((e=>this._getSingleModifierDispatchPart(e)))}}{constructor(e,t){super(t,[e])}_keyCodeToUILabel(e){if(this._os===Zp.Macintosh)switch(e){case Vf.LeftArrow:return"←";case Vf.UpArrow:return"↑";case Vf.RightArrow:return"→";case Vf.DownArrow:return"↓"}return qf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getDispatchPart(e){return Vg.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=qf.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode!==Vf.Ctrl||e.shiftKey||e.altKey||e.metaKey?e.keyCode!==Vf.Shift||e.ctrlKey||e.altKey||e.metaKey?e.keyCode!==Vf.Alt||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==Vf.Meta||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}}var zg=Object.defineProperty,Kg=Object.getOwnPropertyDescriptor,Wg=(e,t)=>(n,i)=>t(n,i,e);const Hg=["input","textarea","select","sp-textfield"];const $g=["-","=","0"];let qg=class extends Wp{constructor(e,t,n){super(t,n),C(this,"_cachedResolver"),C(this,"_dynamicKeybindings"),C(this,"shouldDispatchKeyEventClassNames",[]),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(Rg(e,Eg,(e=>{if((e.ctrlKey||e.metaKey)&&$g.includes(e.key)&&e.preventDefault(),!(document.activeElement instanceof HTMLElement))return;const t=this.shouldDispatchKeyEventClassNames.length>0&&this.shouldDispatchKeyEventClassNames.some((e=>!!document.activeElement.closest(`.${e}`)));if(n=document.activeElement,(Hg.includes(n.tagName.toLowerCase())||n.isContentEditable||"true"===n.contentEditable)&&!t)return;var n;const i=new pg(e);this._dispatch(i,i.target)&&(i.preventDefault(),i.stopPropagation())}))),this._register(Rg(e.ownerDocument.defaultView,Sg,(e=>{const t=new pg(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})))}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ug.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new jf(e,t)}return this._cachedResolver}setShouldDispatchKeyEventClassNames(e){this.shouldDispatchKeyEventClassNames=e}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const r of e){const e=r.when||void 0,o=r.keybinding;if(o){const s=this.resolveKeybinding(o);for(const o of s)n[i++]=new Ug(o,r.command,r.commandArgs,e,t,null,!1)}else n[i++]=new Ug(void 0,r.command,r.commandArgs,e,t,null,!1)}return n}resolveKeybinding(e){return[new Vg(e,ef)]}resolveKeyboardEvent(e){const t=new Zf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Vg(t,ef)}};qg=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Kg(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&zg(t,n,o),o})([Wg(1,Lf),Wg(2,ng)],qg);class Yg{constructor(e,t){C(this,"_parent"),C(this,"_value"),C(this,"_id"),this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e=w(w({},e),this._value),delete e._contextId,e}}const Gg=class extends Yg{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let Xg=Gg;C(Xg,"INSTANCE",new Gg);const Jg=class extends Yg{constructor(e){super(e,null),C(this,"_values",new lf(new Bf))}getValue(e){return 0!==e.indexOf(Jg._keyPrefix)?super.getValue(e):this._values.has(e)?this._values.get(e):null}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach(((t,n)=>e[n]=t)),w(w({},e),super.collectAllValues())}};let Qg=Jg;C(Qg,"_keyPrefix","config.");class Zg{constructor(e,t,n){C(this,"_service"),C(this,"_key"),C(this,"_defaultValue"),this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class em{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class tm extends zo{constructor(e){super(),C(this,"_isDisposed"),C(this,"_myContextId"),C(this,"_onDidChangeContext",this._register(new xs)),C(this,"onDidChangeContext",this._onDidChangeContext.event),this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Zg(this,e,t)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return jf.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new em(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new em(e))}getContext(e=null){return this._isDisposed?Xg.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute("data-keybinding-context")){const t=e.getAttribute("data-keybinding-context");return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}}class nm extends tm{constructor(){super(0),C(this,"_lastContextId"),C(this,"_contexts",new Map),this._lastContextId=0;const e=new Qg(this._myContextId);this._contexts.set(this._myContextId,e)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._contexts.clear()}getContextValuesContainer(e){return this._isDisposed?Xg.INSTANCE:this._contexts.get(e)||Xg.INSTANCE}}var im=Object.defineProperty,rm=Object.getOwnPropertyDescriptor;let om=class{constructor(e){C(this,"_needEventCommandIds",new Set),this._instantiationService=e}executeCommand(e,...t){const n=sg.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{const e=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}};var sm,am;om=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?rm(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&im(t,n,o),o})([(sm=0,am=Vr,(e,t)=>am(e,t,sm))],om);class lm extends zo{constructor(e){super(),C(this,"id"),C(this,"_kbOpts"),this.id=e.id,this._kbOpts=e.kbOpts}register(){if(this._kbOpts){const e=this._kbOpts.kbExpr;this._register(ug.registerCommandAndKeybindingRule({id:this.id,handler:(e,t)=>this.runCommand(e,t),weight:this._kbOpts.weight,args:this._kbOpts.args,when:e,primary:this._kbOpts.primary,secondary:this._kbOpts.secondary,win:this._kbOpts.win,linux:this._kbOpts.linux,mac:this._kbOpts.mac}))}else this._register(sg.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t)}))}}class cm extends lm{static bindToContribution(e){return class extends cm{constructor(e){super(e),C(this,"_callback"),this._callback=e.handler}runEditorCommand(t,n,i){e(n)&&this._callback(e(n),i)}}}runCommand(e,t){return e.get(Vr).invokeFunction((e=>{const n=e.get(Ol);return this.runEditorCommand(e,n,t)}))}}const dm=class{constructor(){C(this,"editorContributions"),C(this,"editorActions"),C(this,"editorCommands"),this.editorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){return e.register(),this.editorCommands[e.id]=e,jo((()=>{delete this.editorCommands[e.id]}))}clearEditorCommand(){hi(this.editorCommands).forEach((e=>{delete this.editorCommands[e]}))}getEditorCommand(e){return this.editorCommands[e]||null}};let um=dm;function hm(e){return um.INSTANCE.registerEditorCommand(e)}function pm(e,t){um.INSTANCE.registerEditorContribution(e,t)}var fm,gm,mm,_m,vm,ym,wm,bm,xm;C(um,"INSTANCE",new dm),function(e){e.None="None",e.Focus="Focus",e.EditText="EditText",e.DragMove="DragMove",e.DragResize="DragResize",e.DragRotate="DragRotate",e.CanvasResize="CanvasResize"}(fm||(fm={})),(mm=gm||(gm={})).Preview="preview",mm.Editing="Editing",(vm=_m||(_m={})).None="None",vm.WrapAble="WrapAble",vm.UnwrapAble="UnwrapAble",vm.Both="Both",(wm=ym||(ym={})).None="None",wm.GroupAble="GroupAble",wm.UngroupAble="UngroupAble",(xm=bm||(bm={})).hasAnySelection=new Pf("editorHasSelection",!1),xm.editingMode=new Pf("editorEditingMode",fm.None),xm.viewMode=new Pf("editorViewMode",gm.Editing),xm.wrapMode=new Pf("editorWrapMode",_m.None),xm.isAnimationEditing=new Pf("editorIsAnimationEditing",!1);class Cm extends zo{constructor(){super(...arguments),C(this,"_handlerMap",new Map)}register(e,t){e.forEach((e=>{if(this._handlerMap.has(e)){this._handlerMap.get(e).push(t)}else{const n=[t];this._handlerMap.set(e,n)}}))}emit(e,t){const n=this._handlerMap.get(e);n&&n.forEach((e=>{e(t)}))}remove(e){for(const t of this._handlerMap.values()){const n=t.findIndex((t=>t===e));-1!==n&&t.splice(n,1)}}clear(){this._handlerMap.clear()}}const km="PasteHandlerRegistry";let Em;Reflect.has(Zo,km)?Em=Reflect.get(Zo,km):(Em=new Cm,Reflect.set(Zo,km,Em));const Sm=Em;var Im=Object.defineProperty,Om=Object.getOwnPropertyDescriptor,Tm=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?Om(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Im(t,n,o),o},Mm=(e,t)=>(n,i)=>t(n,i,e);let Nm=1,Am=class extends zo{constructor(e,t,n,i,r,o){super(),C(this,"_serviceBrand"),C(this,"_id"),C(this,"_historyHelper"),C(this,"_contributions",new Map),C(this,"_onUpdated",this._register(new xs)),C(this,"_onDidChangeModel",this._register(new xs)),C(this,"onDidChangeModel",this._onDidChangeModel.event),C(this,"_onTextEditorCreated",this._register(new xs)),C(this,"onTextEditorCreated",this._onTextEditorCreated.event),C(this,"_textEditor"),this._instantiationService=e,this.contextKeyService=t,this._model=n,this._viewModel=i,this._view=r,this.undoRedoService=o,this._id=++Nm,e.store(Ol,this),this._historyHelper=e.createInstance(Rm),this._register(new Dm(this,t)),this._register(r.onPositionUpdated((()=>this._onUpdated.fire())));const s=um.INSTANCE.getEditorContributions();for(const l of s)try{this._contributions.set(l.id,this._instantiationService.createInstance(l.ctor))}catch(a){throw a}}get onUpdated(){return this._onUpdated.event}get model(){return this._model}get viewModel(){return this._viewModel}get view(){return this._view}getId(){return this._id}undo(){return this.undoRedoService.undo()}redo(){return this.undoRedoService.redo()}add(e){this._historyHelper.add(e)}checkout(){this._historyHelper.checkout()}commitAndMerge(e){this._historyHelper.commitAndMerge(e)}fork(e){this._historyHelper.fork(e)}transform(e){this._historyHelper.transform(e)}recordSelectionChanges(e){this._historyHelper.recordSelectionChanges(e)}getRichTextEditor(){return this._textEditor}storeRichTextEditor(e){this._textEditor=e,this._onTextEditorCreated.fire()}setMode(e){this.contextKeyService.setContext(bm.viewMode.key,e)}getMode(){return this.contextKeyService.getContextKeyValue(bm.viewMode.key)}replaceModel(e){this.viewModel.internal_disconnect(),this.view.internal_disconnect(),this.model.replaceModel(e),this.viewModel.internal_connect(!0),this.view.internal_connect(),this._onDidChangeModel.fire({})}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}dispose(){super.dispose(),this._instantiationService.dispose();for(const e of this._contributions.values())e.dispose();this._contributions.clear(),um.INSTANCE.clearEditorCommand(),sg.clear(),ug.clear(),Sm.clear()}saveSEOHintOfWidgets(){const e=this.view.internal_getWidgetInnerHTML(),t=hi(e);t.length&&this.model.changeWithoutHistory((n=>{for(const i of t){const t=e[i];t&&n.updateNodeMetaById(i,{SEOHint:t})}}))}};Am=Tm([Mm(0,Vr),Mm(1,Lf),Mm(2,Wr),Mm(3,No),Mm(4,Ro),Mm(5,Lo)],Am);let Rm=class{constructor(e,t,n){C(this,"_prevSelections",[]),C(this,"_forkSymbol",null),this.model=e,this.viewModel=t,this.undoRedoService=n}add(e){this._prevSelections=this._getSelection();const{shouldPop:t,record:n}=this.model.internal_add(e);if(t&&this.undoRedoService.pop(),n){const e=this._getSelection(),t=new Ao(this._prevSelections.slice(),e,this.viewModel),i=new Pm(n,t,this.viewModel);this.undoRedoService.push(i)}}checkout(){this.model.internal_checkout()&&this.undoRedoService.pop()}commitAndMerge(e){this._forkSymbol&&e!==this._forkSymbol||(this.model.internal_commitAndMerge(),this._forkSymbol=null)}fork(e){this._forkSymbol||(e&&(this._forkSymbol=e),this._prevSelections=this._getSelection(),this.model.internal_fork())}transform(e){this._prevSelections=this._getSelection();const t=this.model.internal_transform(e);if(t){const e=this._getSelection(),n=new Ao(this._prevSelections.slice(),e,this.viewModel),i=new Pm(t,n,this.viewModel);this.undoRedoService.push(i)}}_getSelection(){return this.viewModel.selection.slice()}recordSelectionChanges(e){const t=this._getSelection();e();const n=this._getSelection();if(Ur(t,n))return;const i=new Ao(t,n,this.viewModel),r=new Pm(null,i,this.viewModel);this.undoRedoService.push(r)}};Rm=Tm([Mm(0,Wr),Mm(1,No),Mm(2,Lo)],Rm);class Dm extends zo{constructor(e,t){super(),C(this,"_editor"),C(this,"_hasAnySelection"),C(this,"_WrapMode"),this._editor=e,t.createKey("editorId",e.getId()),this._hasAnySelection=bm.hasAnySelection.bindTo(t),this._WrapMode=bm.wrapMode.bindTo(t),bm.editingMode.bindTo(t),bm.viewMode.bindTo(t),bm.wrapMode.bindTo(t),this._register(this._editor.viewModel.onDidChangeSelection((()=>this._updateFromSelection()))),this._updateFromSelection()}_updateFromSelection(){const{view:e,viewModel:t,model:n}=this._editor,i=t.selection;if(this._WrapMode.reset(),i.length){this._hasAnySelection.set(!0);let t=!1,r=!1;if(i.length<=1){const[e]=i,t=e?n.getNodeById(e):null;t&&po(t)&&(r=!0)}if(i.length>=1){let r,o=i.some((e=>{const t=n.getNodeById(e);if(!t)return!0;const{from:i}=t;return r||(r=i||"none"),ho(t)||r&&i!==r}));if(!o){o=wr(e.getComputedStyleOfId(r))}o||(t=!0)}t&&r?this._WrapMode.set(_m.Both):t||r?this._WrapMode.set(t?_m.WrapAble:_m.UnwrapAble):this._WrapMode.set(_m.None)}else this._hasAnySelection.reset()}}class Pm{constructor(e,t,n){C(this,"stack"),this.modelPart=e,this.viewModelPart=t,this.viewModel=n;try{throw new Error}catch(_8){const t=_8.stack.split("\n");t.splice(0,3),this.stack=t.map((e=>e.trimStart()))}}merge(e){To()}isVoid(){var e;return(null==(e=this.modelPart)?void 0:e.isVoid())&&this.viewModelPart.isVoid()}undo(){var e;this.viewModel.clearSelection(),null==(e=this.modelPart)||e.undo(),setTimeout((()=>{this.viewModelPart.undo()}))}redo(){var e;this.viewModel.clearSelection(),null==(e=this.modelPart)||e.redo(),setTimeout((()=>{this.viewModelPart.redo()}))}}var Lm,Um;(Um=Lm||(Lm={}))[Um.APPLICATION=1]="APPLICATION";const Fm={properties:{},patternProperties:{}},Bm={properties:{},patternProperties:{}};class jm{constructor(){C(this,"defaultValues"),C(this,"configurationProperties"),C(this,"excludedConfigurationProperties"),this.defaultValues={},this.configurationProperties={},this.excludedConfigurationProperties={}}getConfigurationProperties(){return this.configurationProperties}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=[];e.forEach((e=>{n.push(...this.validateAndRegisterProperties(e,t)),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e,t=!0,n=1){n=si(e.scope)?n:e.scope;const i=[],r=e.properties;if(r)for(const s in r){if(t&&Km(s)){delete r[s];continue}const e=r[s];this.updatePropertyDefaultValue(s,e),Qm.test(s)?e.scope=void 0:e.scope=si(e.scope)?n:e.scope,!r[s].hasOwnProperty("included")||r[s].included?(this.configurationProperties[s]=r[s],!r[s].deprecationMessage&&r[s].markdownDeprecationMessage&&(r[s].deprecationMessage=r[s].markdownDeprecationMessage),i.push(s)):(this.excludedConfigurationProperties[s]=r[s],delete r[s])}const o=e.allOf;if(o)for(const s of o)i.push(...this.validateAndRegisterProperties(s,t,n));return i}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];oi(n)&&(n=t.default),oi(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n}registerJSONConfiguration(e){const t=e=>{const n=e.properties;if(n)for(const t in n)this.updateSchema(t,n[t]);const i=e.allOf;i&&i.forEach(t)};t(e)}updateSchema(e,t){switch(Fm.properties[e]=t,t.scope){case 1:Bm.properties[e]=t}}}let Vm=Reflect.get(Zo,"configurationRegistry");Vm||(Vm=new jm,Reflect.set(Zo,"configurationRegistry",Vm));const zm=Vm;function Km(e){return e.trim()?Qm.test(e)?`Cannot register '${e}. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`:void 0!==zm.getConfigurationProperties()[e]?`Cannot register '${e}'. This property is already registered.`:null:"Cannot register an empty property"}const Wm=Kr("configurationService");var Hm,$m;function qm(e,t,n){const i=function(e,t){let n=e;for(const i of t){if("object"!=typeof n||null===n)return;n=n[i]}return n}(e,t.split("."));return void 0===i?n:i}function Ym(e,t){const n=Object.create(null);for(const i in e)Gm(n,i,e[i],t);return n}function Gm(e,t,n,i){const r=t.split("."),o=r.pop();let s=e;for(let a=0;a<r.length;a++){const e=r[a];let n=s[e];switch(typeof n){case"undefined":n=s[e]=Object.create(null);break;case"object":break;default:return void i(`Ignoring ${t} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(n)}`)}s=n}if("object"==typeof s&&null!==s)try{s[o]=n}catch(_8){i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}else i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}function Xm(e,t){Jm(e,t.split("."))}function Jm(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const i=e[n];"object"!=typeof i||Array.isArray(i)||(Jm(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}($m=Hm||(Hm={}))[$m.USER=1]="USER",$m[$m.WORKSPACE=2]="WORKSPACE",$m[$m.DEFAULT=3]="DEFAULT",$m[$m.MEMORY=4]="MEMORY";const Qm=new RegExp("\\[.*\\]$");function Zm(e){return e.substring(1,e.length-1)}class e_{constructor(e={},t=[],n=[]){C(this,"isFrozen",!1),this._contents=e,this._keys=t,this._overrides=n}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?qm(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?qm(n,e):n:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;const n={};for(const i of function(e,t){if(!t)return e.filter(((t,n)=>e.indexOf(t)===n));const n=Object.create(null);return e.filter((e=>{const i=t(e);return!n[i]&&(n[i]=!0,!0)}))}([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[i];const r=t[i];r&&("object"==typeof e&&"object"==typeof r?(e=di(e),this.mergeContents(e,r)):e=r),n[i]=e}return new e_(n,this.keys,this.overrides)}merge(...e){const t=di(this.contents),n=di(this.overrides),i=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const e of r.overrides){const[t]=n.filter((t=>Lr(t.identifiers,e.identifiers)));t?this.mergeContents(t.contents,e.contents):n.push(di(e))}for(const e of r.keys)-1===i.indexOf(e)&&i.push(e)}return new e_(t,i,n)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const n of Object.keys(t))n in e&&li(e[n])&&li(t[n])?this.mergeContents(e[n],t[n]):e[n]=di(t[n])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const n in e)if(pi.call(e,n)){const i=e[n];"object"!=typeof i||Object.isFrozen(i)||t.push(i)}}return e}(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}setValue(e,t){this.addKey(e),Gm(this.contents,e,t,(e=>{throw new Error(e)}))}removeValue(e){this.removeKey(e)&&Xm(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)0===e.indexOf(this.keys[n])&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}class t_{constructor(e,t=new e_,n=new e_,i=!0){C(this,"_workspaceConsolidatedConfiguration",null),this._defaultConfiguration=e,this._workspaceConfiguration=t,this._memoryConfiguration=n,this._freeze=i}getValue(e){return this.getConsolidateConfigurationModel().getValue(e)}updateValue(e,t){const n=this._memoryConfiguration;void 0===t?n.removeValue(e):n.setValue(e,t)}inspect(e){return{value:this.getConsolidateConfigurationModel().getValue(e)}}get defaults(){return this._defaultConfiguration}getConsolidateConfigurationModel(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys}}}static parseConfigurationModel(e){return new e_(e.contents,e.keys,e.overrides).freeze()}}class n_ extends e_{constructor(){const e=function(){const e=Object.create(null),t=zm.getConfigurationProperties();for(const n in t)Gm(e,n,t[n].default,(e=>console.error(`Conflict in default settings: ${e}`)));return e}(),t=function(){const e=zm.getConfigurationProperties();return Object.keys(e)}(),n=[];for(const i of Object.keys(e))Qm.test(i)&&n.push({identifiers:[Zm(i).trim()],keys:Object.keys(e[i]),contents:Ym(e[i],(e=>console.error(`Conflict in default settings file: ${e}`)))});super(e,t,n)}}class i_ extends zo{constructor(){super(),C(this,"configuration"),this.configuration=new t_(new n_)}getValue(e){const t="string"==typeof e?e:void 0;return this.configuration.getValue(t)}async updateValue(e,t){const n=this.deriveConfigurationTarget(e,t);return n?this.writeConfigurationValue(e,t,n):Promise.resolve(null)}inspect(e){return this.configuration.inspect(e)}deriveConfigurationTarget(e,t){if(void 0===t)return;return ui(t,this.inspect(e).value)?void 0:Hm.USER}writeConfigurationValue(e,t,n){if(n===Hm.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(n===Hm.MEMORY)return this.configuration.updateValue(e,t),Promise.resolve(null);throw new Error("500")}}var r_,o_,s_,a_;function l_(e,t,n){return{width:e.width,height:e.height,top:e.top+n,right:e.right+t,bottom:e.bottom+n,left:e.left+t,mx:e.mx}}(o_=r_||(r_={}))[o_.Unknown=0]="Unknown",o_[o_.Canvas=1]="Canvas",o_[o_.Widgets=2]="Widgets",(a_=s_||(s_={})).None="",a_.Canvas="canvas",a_.CanvasOverlay="canvasOverlay",a_.ComponentOverlay="componentOverlay",a_.ContentWidget="contentWidget";class c_{static write(e,t){e.setAttribute("data-fprt",String(t))}static read(e){const t=e.getAttribute("data-fprt");return null===t?s_.None:t}static collect(e){const t=[];let n=0;for(;e&&"BODY"!==e.tagName;){const i=Object.create(null);if(e.hasAttribute("data-fprt")){const r=this.read(e);c_.shouldNotBeMeasured(r)||c_.shouldIgnoreElement(e)||(i.fingerprint=r,e.hasAttribute("data-id")&&(i.id=e.getAttribute("data-id")),e.hasAttribute("data-drag")&&(i.draggable=!0),i.detail=e.getAttribute("data-detail"),t[n++]=i)}e=e.parentElement}return t.reverse()}static shouldNotBeMeasured(e){return!!e.endsWith("__in_shadow")}static shouldNotBeSelected(e){return c_.shouldNotBeMeasured(e)}static shouldIgnoreElement(e){return!!e.hasAttribute("data-in-shadow")}}class d_{static isChildOfCanvas(e){return function(e,t){for(const n of e)if(t(n))return!0;return!1}(e,(e=>e.fingerprint===s_.Canvas))}static isCanvasOverlay(e){var t;return(null==(t=e[e.length-1])?void 0:t.fingerprint)===s_.CanvasOverlay}static isTransparentContentWidget(e){var t;return(null==(t=e[e.length-1])?void 0:t.fingerprint)===s_.ContentWidget}static isBlockingContentWidget(e){if(this.isDraggableWidget(e))return!0;const t=Ar(e,(e=>e.fingerprint===s_.ContentWidget));return t>-1&&e.length>1&&t<e.length-1}static isDraggableWidget(e){var t;return!!(null==(t=e[e.length-1])?void 0:t.draggable)}}var u_,h_,p_,f_;(h_=u_||(u_={})).none="",h_.top="top",h_.left="left",h_.bottom="bottom",h_.right="right",(f_=p_||(p_={}))[f_.top=1]="top",f_[f_.right=2]="right",f_[f_.bottom=4]="bottom",f_[f_.left=8]="left";function g_(e){const t=Dd("scrolls");return xd((()=>({offsetTop:e.fixed?t.scrollY:0,offsetLeft:e.fixed?t.scrollX:0})))}function m_(e){const t=xd((()=>e.rect)),n=g_(e.rect),i=xd((()=>{const i=t.value,r={position:"absolute",transform:e.vmx?qi(e.vmx):"none"};return e.top?Object.assign(r,{top:Xi(i.top+n.value.offsetTop),left:Xi(i.left+i.width/2+n.value.offsetLeft)}):e.bottom&&Object.assign(r,{top:Xi(i.top+i.height+n.value.offsetTop),left:Xi(i.left+i.width/2+n.value.offsetLeft)}),r})),r=xd((()=>{const t={position:"absolute"};return e.top?Object.assign(t,{top:"0px",left:"0px",transform:"translate(-50%, -50%)",transformOrigin:"top left"}):e.bottom?Object.assign(t,{bottom:"0px",left:"0px",transform:"translate(-50%, 50%)",transformOrigin:"top left"}):e.left?Object.assign(t,{left:"0px",top:"0px",transform:"translate(-50%, -50%)"}):e.right&&Object.assign(t,{right:"0px",top:"0px",transform:"translate(50%, -50%)"}),t})),o=xd((()=>{let t=u_.none;return e.top?t=u_.top:e.bottom?t=u_.bottom:e.left?t=u_.left:e.right&&(t=u_.right),t}));return th("div",{className:"add-section-box","data-fprt":"addSection","data-ref":e.id,"data-direction":o.value,style:i.value},[th("div",{style:r.value},[th("div",{className:"add-section-button"},[th("div",{className:"button-content"},[th("svg",{class:"button-icon",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[th("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.25 12.75L3 12.75L3 11.25L11.25 11.25L11.25 3L12.75 3L12.75 11.25L21 11.25L21 12.75L12.75 12.75L12.75 21L11.25 21L11.25 12.75Z"},null)])])])])])}function __(e){const t=xd((()=>b(w({},e.vmx),{tx:-5,ty:-5}))),n=xd((()=>({position:e.fixed?"fixed":"absolute",top:Xi(e.y),left:Xi(e.x),width:Xi(10),height:Xi(10),"box-sizing":"border-box","background-color":"#116dff","border-radius":"50%",transform:t.value?qi(t.value):"none"})));return th("div",{style:n.value},null)}function v_(e){return th(Uu,null,[e.dot&&th(__,{x:e.left,y:e.top,vmx:e.vmx,fixed:e.fixed},null)])}function y_(e){return th(Uu,null,[e.dot&&th(__,{x:e.left,y:e.top,vmx:e.vmx,fixed:e.fixed},null)])}function w_(e){return Reflect.has(e,"width")?th(y_,e,null):th(v_,e,null)}class b_{static parse(e){let t;const n=parseFloat;if(t=/matrix\s*\((.+)\)/i.exec(e)){let e=t[1].split(",");return 6!==e.length&&(e=t[1].split(" ")),{a:n(e[0]),b:n(e[1]),c:n(e[2]),d:n(e[3]),tx:n(e[4]),ty:n(e[5])}}throw new Error("500")}static get Identity(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}}static translate(e,t){const n=e.tx+t.x,i=e.ty+t.y;return b(w({},e),{tx:n,ty:i})}static scale(e,t,n){let i=n?b_.translate(e,n):{a:e.a,b:e.b,c:e.c,d:e.d,tx:e.tx,ty:e.ty};return i.a*=t.x,i.b*=t.x,i.c*=t.y,i.d*=t.y,n&&(i=b_.translate(i,class{static negate(e){return{x:-e.x,y:-e.y}}}.negate(n))),i}}const x_="rgb(105, 185, 255)",C_={background:"transparent",top:"0px",left:"0px",color:x_,"font-size":"10px","font-family":"PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,Helvetica Neue,Arial,sans-serif","user-select":"none","z-index":"-1","pointer-events":"none"};function k_(e){const t=xd((()=>w({"border-left":`1px dashed ${x_}`,position:e.fixed?"fixed":"absolute",transform:qi(b_.translate(b_.Identity,{x:e.left,y:e.height>0?e.top:e.top+e.height})),height:Xi(Math.abs(e.height)),"line-height":`${Math.abs(e.height)}px`,"padding-left":"8px","user-select":"none","z-index":"-1"},C_))),n=xd((()=>({display:"inline-block",transform:e.vmx?qi(e.vmx):"none","transform-origin":"left center"})));return th(Uu,null,[th("div",{className:"dockline dockline_vertical",style:t.value},[th("span",{style:n.value},[e.text])])])}function E_(e){const t=xd((()=>w({"border-top":`1px dashed ${x_}`,position:e.fixed?"fixed":"absolute",transform:qi(b_.translate(b_.Identity,{x:e.width>0?e.left:e.left+e.width,y:e.top})),width:Xi(Math.abs(e.width)),"text-align":"center","padding-top":"8px"},C_))),n=xd((()=>({display:"inline-block",transform:e.vmx?qi(e.vmx):"none","transform-origin":"center top"})));return th(Uu,null,[th("div",{className:"dockline dockline_horizontal",style:t.value},[th("span",{style:n.value},[e.text])])])}function S_(e){return Reflect.has(e,"width")?th(E_,e,null):th(k_,e,null)}function I_(e){if(!e)return{bottom:0,right:0,top:0,left:0,width:0,height:0};const{width:t,height:n,mx:i,top:r,left:o}=e;if(!i)return{left:o,top:r,right:o+t,bottom:r+n,width:t,height:n};const s=i.a,a=i.b,l=-t/2,c=t/2,d=t/2,u=-t/2,h=n/2,p=n/2,f=-n/2,g=-n/2,m=l*s+h*a,_=-l*a+h*s,v=c*s+p*a,y=-c*a+p*s,w=d*s+f*a,b=-d*a+f*s,x=u*s+g*a,C=-u*a+g*s,k=Math.min(m,v,w,x),E=Math.max(m,v,w,x),S=Math.min(_,y,b,C),I=E-k,O=Math.max(_,y,b,C)-S,T=e.left+e.width/2-I/2,M=e.top+e.height/2-O/2;return{left:T,top:M,right:T+I,bottom:M+O,width:I,height:O}}const O_=e=>e?"rgba(255,79,149,1)":"rgba(37,118,240,1)",T_=e=>e?"rgba(255,79,149,.6)":"rgba(39, 126, 255, 0.6)";function M_(e){const t=xd((()=>({zIndex:3,cursor:"ns-resize",height:Xi(8),position:"absolute",left:Xi(-e.width/2),width:Xi(e.width),top:Xi(e.direct&p_.top?-e.height/2-4:e.height/2-4)})));return th("div",{className:"ns-resize","data-detail":e.direct,"data-drag":!0,"data-fprt":"dragResize",style:t.value},null)}function N_(e){const t=xd((()=>({zIndex:3,cursor:"ew-resize",width:Xi(8),position:"absolute",top:Xi(-e.height/2),height:Xi(e.height),left:Xi(e.direct&p_.left?-e.width/2-4:e.width/2-4)})));return th("div",{className:"ew-resize","data-detail":e.direct,"data-drag":!0,"data-fprt":"dragResize",style:t.value},null)}function A_(e){const t=Dd("i18nService"),n=xd((()=>({color:e.color,position:"absolute",transform:"translateY(-100%)",top:"-4px",left:"0","font-family":"sans-serif","font-size":"11px","white-space":"nowrap"}))),i=xd((()=>t.t(e.label)));return th("div",{style:n.value},[i.value])}function R_(e){const t=xd((()=>e.direct&p_.top?-e.height/2-4+1:e.direct&p_.bottom?e.height/2-4-1:-4)),n=xd((()=>e.direct&p_.left?-e.width/2-4+1:e.direct&p_.right?+e.width/2-4-1:-4)),i=xd((()=>{switch(e.direct){case p_.top:case p_.bottom:return"ns-resize";case p_.left:case p_.right:return"ew-resize";case p_.top|p_.right:case p_.bottom|p_.left:return"nesw-resize";default:return"nwse-resize"}})),r=O_(e.isAnimationEditing),o=xd((()=>({position:"absolute",top:Xi(t.value),left:Xi(n.value),width:Xi(8),height:Xi(8),"box-sizing":"border-box","background-color":"#fff",border:`1px solid ${r}`,"border-radius":"50%",cursor:i.value,zIndex:3,transform:e.vmx?qi(e.vmx):"none"})));return th("span",{"data-detail":e.direct,"data-drag":!0,"data-fprt":"dragResize",style:o.value},null)}function D_(e){const t=xd((()=>({display:"flex","justify-content":"center","align-items":"center","pointer-events":"auto",cursor:"grab",top:Xi(-e.height/2),left:Xi(-e.width/2),"border-bottom-right-radius":"20%",padding:Xi(5),background:O_(e.isAnimationEditing),position:"absolute",zIndex:3})));return th("div",{style:t.value,"data-fprt":"dragMove","data-drag":!0,"data-detail":e.handle},[th("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg","data-hook":"drag-handle"},[th("path",{fill:"#c3daff",d:"M3 7v2H1V7h2zm6 0v2H7V7h2zM3 1v2H1V1h2zm6 0v2H7V1h2z","fill-rule":"evenodd"},null)])])}function P_(e){var t,n,i,r;const{resizable:o,vscale:s,isAnimationEditing:a=!1}=e,l=g_(e),c=xd((()=>({top:e.top+l.value.offsetTop,left:e.left+l.value.offsetLeft,width:e.width,height:e.height,mx:e.mx,fixed:e.fixed}))),d=xd((()=>b_.scale(b_.Identity,{x:1/s,y:1/s})));return th(Uu,null,[!e.isAnimationEditing&&th(Uu,null,[e.grid&&th(K_,lh(e.grid,{fixed:e.fixed}),null),(null==(t=e.addSection)?void 0:t.top)&&th(m_,{top:!0,id:e.id,vmx:d.value,rect:c.value},null),(null==(n=e.addSection)?void 0:n.right)&&th(m_,{right:!0,id:e.id,vmx:d.value,rect:c.value},null),(null==(i=e.addSection)?void 0:i.bottom)&&th(m_,{bottom:!0,id:e.id,vmx:d.value,rect:c.value},null),(null==(r=e.addSection)?void 0:r.left)&&th(m_,{left:!0,id:e.id,vmx:d.value,rect:c.value},null),e.dock&&e.dock.length>0&&e.dock.map((t=>th(w_,lh(t,{vmx:d.value,fixed:e.fixed}),null))),e.dock&&e.dock.length>0&&e.dock.map((t=>th(S_,lh(t,{vmx:d.value,fixed:e.fixed}),null))),e.parent&&th(U_,lh({color:T_(a)},e.parent,{fixed:e.fixed}),null),e.padding&&th(W_,lh(e.padding,{fixed:e.fixed}),null)]),e.show&&th(U_,lh(e,{eventable:!0,color:O_(a)}),{default:()=>{var t;return[e.rotate&&th(j_,lh({id:e.rotate,vmx:d.value},e),null),(null==(t=e.draggable)?void 0:t.handle)&&th(D_,lh(e.draggable,{width:e.width,height:e.height,isAnimationEditing:a}),null),(null==o?void 0:o.top)&&th(M_,lh({direct:p_.top,id:p_.top},e),null),(null==o?void 0:o.bottom)&&th(M_,lh({direct:p_.bottom,id:p_.bottom},e),null),(null==o?void 0:o.left)&&th(N_,lh({direct:p_.left,id:p_.left},e),null),(null==o?void 0:o.right)&&th(N_,lh({direct:p_.right,id:p_.right},e),null),(null==o?void 0:o.top)&&o.right&&th(R_,lh({direct:p_.top|p_.right,id:p_.top|p_.right,vmx:d.value},e),null),(null==o?void 0:o.right)&&o.bottom&&th(R_,lh({direct:p_.right|p_.bottom,id:p_.right|p_.bottom,vmx:d.value},e),null),(null==o?void 0:o.bottom)&&o.left&&th(R_,lh({direct:p_.bottom|p_.left,id:p_.bottom|p_.left,vmx:d.value},e),null),(null==o?void 0:o.left)&&o.top&&th(R_,lh({direct:p_.left|p_.top,id:p_.left|p_.top,vmx:d.value},e),null)]}}),e.show&&e.mx&&th(U_,lh(e,{label:void 0,mx:void 0}),null)])}function L_(e,{slots:t}){const n=g_(e),i=xd((()=>{const t={position:"absolute",top:Xi(e.top+e.height/2+n.value.offsetTop),left:Xi(e.left+e.width/2+n.value.offsetLeft),width:"0px",height:"0px",transform:e.mx?qi(b(w({},e.mx),{tx:0,ty:0})):"none"};return e.eventable||(t["pointer-events"]="none"),t}));return th("div",{className:"outline-wrapper",style:i.value},[t.default?dh(t,"default"):null])}function U_(e,{slots:t}){const{isAnimationEditing:n}=e,i=xd((()=>({position:"absolute",top:Xi(-e.height/2),left:Xi(-e.width/2),transform:e.vmx?qi(e.vmx):"none","transform-origin":"left bottom"})));return th(L_,e,{default:()=>[th(F_,lh({color:T_(n)},e),null),!!e.label&&th("div",{className:"label-wrapper",style:i.value},[th(A_,{label:e.label,color:O_(n)},null)]),t.default?dh(t,"default"):null]})}function F_(e){const t=xd((()=>e.color||"rgba(39, 126, 255, 0.6)")),{dashed:n=!1,style:i={},borderWidth:r=1}=e,o=`${r}px ${n?"dashed":"solid"} ${t.value}`,s=xd((()=>w({position:"absolute",zIndex:-100,"pointer-events":"none"},i))),a=xd((()=>b(w({},s.value),{left:Xi(-e.width/2),top:Xi(-e.height/2),width:Xi(e.width),height:Xi(r),borderTop:o}))),l=xd((()=>b(w({},s.value),{left:Xi(e.width/2),top:Xi(-e.height/2),width:Xi(r),height:Xi(e.height),borderLeft:o}))),c=xd((()=>b(w({},s.value),{left:Xi(-e.width/2),top:Xi(e.height/2),width:Xi(e.width+r),height:Xi(r),borderTop:o}))),d=xd((()=>b(w({},s.value),{left:Xi(-e.width/2),top:Xi(-e.height/2),width:Xi(r),height:Xi(e.height),borderLeft:o})));return th(Uu,null,[th("div",{className:"simple-outline_top",style:a.value},null),th("div",{className:"simple-outline_right",style:l.value},null),th("div",{className:"simple-outline_bottom",style:c.value},null),th("div",{className:"simple-outline_left",style:d.value},null)])}function B_(e){const t=xd((()=>e.map((e=>{const t=I_(e);return b(w({},e),{bound:t})})))),n=xd((()=>t.value.filter((e=>!e.ignorable)).length>0)),i=xd((()=>{const n=t.value,i=di(n[0]);let{bound:r,resizable:o,draggable:s,fixed:a,stretch:l,unstretch:c,isAnimationEditing:d=!1,vscale:u=1}=i;if(e.length<=1)return b(w(w({},i),r),{mx:void 0});let{width:h,left:p,top:f,height:g}=r,m=p+h,_=f+g;for(let e=1;e<n.length;e++){const t=n[e];if(t.ignorable)continue;const{bound:i}=t;p=Math.min(p,i.left),m=Math.max(m,i.left+i.width),f=Math.min(f,i.top),_=Math.max(_,i.top+i.height),o&&Object.keys(o).forEach((e=>{var n,i;o[e]=null!=(i=o[e]||(null==(n=t.resizable)?void 0:n[e]))&&i})),s=s||(null==t?void 0:t.draggable),a=a||t.fixed}return{left:p,top:f,width:m-p,height:_-f,resizable:o,draggable:s,fixed:a,show:!0,vscale:u,isAnimationEditing:d}}));return()=>!e||e.length<=0?th(Uu,null,[null]):th(Uu,null,[e.map((e=>th(U_,lh(e,{color:e.ignorable?O_(e.isAnimationEditing):T_(e.isAnimationEditing),borderWidth:e.ignorable?2:1,label:void 0}),null))).concat(n.value?th(P_,i.value,null):null)])}function j_(e){const t=xd((()=>({display:"flex","align-items":"center","justify-content":"center",position:"absolute",width:Xi(20),height:Xi(20),background:"#fff","box-shadow":"0 2px 7px 0 rgb(0 6 36 / 27%)","border-radius":"50%",cursor:"pointer",bottom:Xi(-30),marginLeft:Xi(-10),fill:O_(e.isAnimationEditing),zIndex:3}))),n=xd((()=>({position:"absolute",top:Xi(e.height/2),left:"0px",width:"0px",height:"0px",transform:e.vmx?qi(e.vmx):"none"})));return th("div",{className:"rotate-wrapper",style:n.value},[th("div",{style:t.value,"data-drag":!0,"data-fprt":"dragRotate","data-detail":e.id},[th("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},[th("path",{"fill-rule":"evenodd",d:"M9.535 2.465A4.967 4.967 0 006 1a4.968 4.968 0 00-3.535 1.465L1 1v4h4L3.172 3.172c1.51-1.512 4.145-1.512 5.656 0A3.973 3.973 0 0110 6a3.971 3.971 0 01-1.172 2.828c-1.512 1.512-4.146 1.512-5.657 0l-.707.707A4.965 4.965 0 006 11c1.336 0 2.59-.52 3.535-1.465A4.967 4.967 0 0011 6a4.967 4.967 0 00-1.465-3.535"},null)])])])}function V_(e){const t={position:"absolute",top:Xi(e.top),left:Xi(e.left),width:"0px",height:Xi(e.height)},n={position:"absolute",top:"0px",left:"0px",height:"100%",width:Xi(10),transform:"translateX(-50%)","background-position":"center center","background-image":"linear-gradient(rgba(89,93,112,.6) 37.5%,rgba(226,227,234,.6) 0,rgba(226,227,234,.6) 50%,transparent 0)","background-size":"1px 8px","background-repeat":"repeat-y"};return th("div",{className:"column-line",style:t},[th("div",{style:n},null)])}function z_(e){const t={position:"absolute",top:Xi(e.top),left:Xi(e.left),width:Xi(e.width),height:"0px"},n={position:"absolute",top:"0px",left:"0px",height:Xi(10),width:"100%",transform:"translateY(-50%)","background-position":"center center","background-image":"linear-gradient(90deg,rgba(89,93,112,.6) 37.5%,rgba(226,227,234,.6) 0,rgba(226,227,234,.6) 50%,transparent 0)","background-size":"8px 1px","background-repeat":"repeat-x"};return th("div",{className:"row-line",style:t},[th("div",{style:n},null)])}function K_(e){const t=[];for(let o=0,s=e.columns.length,a=0;o<s&&(0===o?e.paddingLeft&&(a+=e.paddingLeft):e.columnGap&&(a+=e.columnGap,t.push(a)),o!==s-1);o++)a+=e.columns[o],t.push(a);const n=[];for(let o=0,s=e.rows.length,a=0;o<s&&(0===o?e.paddingTop&&(a+=e.paddingTop):e.rowGap&&(a+=e.rowGap,n.push(a)),o!==s-1);o++)a+=e.rows[o],n.push(a);const i=g_(e),r=xd((()=>({position:"absolute",left:Xi(e.rect.left+i.value.offsetLeft),top:Xi(e.rect.top+i.value.offsetTop),width:Xi(e.rect.width),height:Xi(e.rect.height),"box-sizing":"border-box","pointer-events":"none"})));return th("div",{className:"grid-outline"},[th("div",{className:"grid-rect",style:r.value},null),t.map(((t,n)=>th(V_,{top:e.rect.top+e.paddingTop,height:e.rect.height-e.paddingTop-e.paddingBottom,left:e.rect.left+t,start:n+1},null))),n.map(((t,n)=>th(z_,{top:e.rect.top+t,width:e.rect.width-e.paddingLeft-e.paddingRight,left:e.rect.left,start:n+1},null)))])}function W_(e){if(!(e.paddingTop||e.paddingRight||e.paddingBottom||e.paddingLeft))return null;const t={position:"absolute",left:Xi(e.left),top:Xi(e.top),width:Xi(e.width),height:Xi(e.height),"box-sizing":"border-box","border-color":"rgba(7, 184, 113, 0.25)","border-style":"solid",borderTopWidth:Xi(e.paddingTop),borderRightWidth:Xi(e.paddingRight),borderBottomWidth:Xi(e.paddingBottom),borderLeftWidth:Xi(e.paddingLeft),zIndex:-10,"pointer-events":"none"};return th("div",{style:t,className:"padding"},null)}var H_=Object.defineProperty,$_=Object.getOwnPropertyDescriptor;let q_=class extends zo{constructor(e,t,n){super(),this.props=e,this.scrolls=t,this.i18nService=n}render(e){const t=xp(B_(this.props));t.provide("scrolls",this.scrolls),t.provide("i18nService",this.i18nService),t.mount(e),this._register(jo((()=>t.unmount())))}};function Y_(e){return e.dataset.fprt}function G_(e,t){const{model:n,view:i}=t,r=n.getAncestorNodesOfId(e),o=i.getViewport().logicWidth,s=n.getMatchedStyle(e,o);if(1===r.length)return"fixed"===s.getAttr("position");if(r.length>1&&!co(r[1])){const e=r[1];return"fixed"===n.getMatchedStyle(e.id).getAttr("position")}return!1}function X_(e,t){return"fixed"===getComputedStyle(t.view.getElementById(e)).position}function J_(e,t){const{model:n}=t,i=n.getParentNodeOfId(e),r=n.getNodeById(e);return!!i&&(!co(i)&&(!ho(r)||X_(e,t)))}q_=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?$_(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&H_(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(2,Ml)],q_);class Q_{constructor(){C(this,"_pending")}push(e){this.clear(),this._pending=requestAnimationFrame((()=>{e(),this.clear()}))}clear(){this._pending&&(cancelAnimationFrame(this._pending),this._pending=null)}dispose(){this.clear()}}class Z_ extends zo{constructor(e,t,n){super(),C(this,"_cloned"),C(this,"_queue"),this._target=e,this._fromRect=t,this._editor=n,this._register(this._queue=new Q_)}render(e){this._cloned=this._target.cloneNode(!0),e.appendChild(this._cloned);const t=this._cloned.querySelector("web-widget");t&&t.remove(),this._cloned.removeAttribute("data-hide");const n=this._fromRect.top,i=this._fromRect.left,r=b_.translate(this._fromRect.mx||b_.Identity,{x:i,y:n});Object.assign(this._cloned.style,{position:"absolute","user-select":"none",left:Xi(this._fromRect.left),top:Xi(this._fromRect.top),width:Xi(this._fromRect.width),height:Xi(this._fromRect.height),margin:"0",mx:qi(r)})}update(e){Object.assign(this._cloned.style,{left:Xi(e.left),top:Xi(e.top),width:Xi(e.width),height:Xi(e.height)})}}var ev,tv;(tv=ev||(ev={})).width="width",tv.height="height";const nv={top:ev.height,bottom:ev.height,left:ev.width,right:ev.width,width:ev.width,"min-width":ev.width,"max-width":ev.width,height:ev.height,"min-height":ev.height,"max-height":ev.height,"padding-top":ev.width,"padding-right":ev.width,"padding-bottom":ev.width,"padding-left":ev.width,"margin-top":ev.width,"margin-right":ev.width,"margin-bottom":ev.width,"margin-left":ev.width};function iv(e,t,n,i,r){let o="";if(fi(n,mi.badRequest),fi(r,mi.badRequest),n===ji.px)o=`${e}px`;else{if(n===ji["%"]){return wi(e/i[nv[t]])}if(n===ji.vw)return e/r.logicWidth*100+"vw";if(n===ji.vh)return e/r.logicHeight*100+"vh";console.warn(mi.notFound)}return o}function rv(e){const t=/([1-9]\d*\.?\d*|0\.\d*[1-9])/,n=t.exec(e);if(!n)return e;const[,i]=n,r=parseFloat(i).toFixed(2);return e.replace(t,r)}class ov{constructor(e,t,n,i){C(this,"fromX"),C(this,"fromY"),C(this,"fromRects"),C(this,"scale"),C(this,"toX",null),C(this,"toY",null),C(this,"posX"),C(this,"posY"),C(this,"fromMarginsX",new Map),C(this,"fromMarginsY",new Map),this._targetIds=t,this.editor=n,this.dir=i,this.fromX=e.event.screenX,this.fromY=e.event.screenY,this.fromRects=new Map,this._targetIds.forEach((e=>{const t=di(n.view.getElementRectById(e));this.fromRects.set(e,t)}));const r=n.view.getViewport();this.scale=r.scale}get isCornerResize(){const{dir:e}=this;return[p_.bottom,p_.top,p_.left,p_.right].filter((t=>t&e)).length>1}get targetIds(){return this._targetIds}get deltaX(){return si(this.toX)?0:(this.toX-this.fromX)/this.scale}get deltaY(){return si(this.toY)?0:(this.toY-this.fromY)/this.scale}moveTo(e){const{screenX:t,screenY:n,posX:i,posY:r}=e.event;this.posX=i,this.posY=r,t===this.toX&&n===this.toY||(this.toX=t,this.toY=n,this._commit(this.deltaX,this.deltaY))}getOverrideStyle(e,t,n){const{dir:i}=this,r=this.editor.model,o=this.editor.view,s=r.getParentNodeOfId(e),a=o.getElementRectById(s.id),l=this.fromRects.get(e),c=function(e,t){const n=e.getParentNodeOfId(t);return wr(e.getMatchedStyle(null==n?void 0:n.id).attrs)}(r,e);let d=this.fromMarginsX.get(e),u=this.fromMarginsY.get(e);const h=Object.create(null),p=o.getViewport(),f=r.getNodeById(e),g=ro(f)||oo(f)||ao(f),m=r.getMatchedStyle(e,p.logicWidth),_=ho(f),v=br(m.attrs),y=g&&rr(m.getAttr("aspect-ratio")),w=o.getComputedStyleOfId(e),b=vr(m.attrs),x=_r(m.attrs),C=t;let k=n;const E=_&&!v||c,S=!Gi(m.attrs.width),I=!Gi(m.attrs.height),O=(e,t)=>iv(t,e,tr(m.getAttr(e))||ji.px,a,p);if(y){const{width:e,height:t}=l;if(this.isCornerResize){const n=e/t;k=((e+C*(i&p_.left?-1:i&p_.right?1:0))/n-t)*(i&p_.top?-1:i&p_.bottom?1:0)}else{const n=(e+(i&p_.left?-C:i&p_.right?C:0))/(t+(i&p_.top?-k:i&p_.bottom?k:0));h["aspect-ratio"]=n.toString()}}if(i&p_.top&&k){if(!E&&yr(m.attrs,mr.top)){si(u)&&(u=parseFloat(w.marginTop),this.fromMarginsY.set(e,u));const t=u+k;h["margin-top"]=O("margin-top",t)}else if(b){si(u)&&(u=parseFloat(w.marginBottom),this.fromMarginsY.set(e,u));const t=u-k;h["margin-bottom"]=O("margin-bottom",t)}if(I){const e=l.height-k;h.height=O("height",e)}}if(i&p_.bottom&&k){if(!E&&yr(m.attrs,mr.bottom)){si(u)&&(u=parseFloat(w.marginBottom),this.fromMarginsY.set(e,u));const t=u-k;h["margin-bottom"]=O("margin-bottom",t)}else if(b){si(u)&&(u=parseFloat(w.marginTop),this.fromMarginsY.set(e,u));const t=u+k;h["margin-top"]=O("margin-top",t)}if(I){const e=l.height+k;h.height=O("height",e)}}if(i&p_.right&&C){if(!E&&yr(m.attrs,mr.right)){si(d)&&(d=parseFloat(w.marginRight),this.fromMarginsX.set(e,d));const t=d-C;h["margin-right"]=O("margin-right",t)}else if(x){si(d)&&(d=parseFloat(w.marginLeft),this.fromMarginsX.set(e,d));const t=d+C;h["margin-left"]=O("margin-left",t)}if(S){const e=l.width+C;h.width=O("width",e)}}if(i&p_.left&&C){if(!E&&yr(m.attrs,mr.left)){si(d)&&(d=parseFloat(w.marginLeft),this.fromMarginsX.set(e,d));const t=d+C;h["margin-left"]=O("margin-left",t)}else if(x){si(d)&&(d=parseFloat(w.marginRight),this.fromMarginsX.set(e,d));const t=d-C;h["margin-right"]=O("margin-right",t)}if(S){const e=l.width-C;h.width=O("width",e)}}return c&&(h["margin-left"]="",h["margin-right"]="",Object.assign(h,kr)),y&&(h.height=""),h}_commit(e,t){const n=this.editor.view.getViewport(),i=this;this.editor.add((r=>{i.targetIds.forEach((o=>{const s=i.getOverrideStyle(o,e,t);r.updateStyle(o,s,n.logicWidth)}))}))}}class sv extends zo{constructor(e,t){super(),C(this,"container"),C(this,"title"),C(this,"_queue"),this.editor=e,this.view=t,this._register(this._queue=new Q_)}render(e){const t=document.createElement("div");t.className="dragtip-container",document.body.appendChild(t),Object.assign(t.style,{top:"0",left:"0",position:"fixed",width:"0",height:"0",overflow:"visible"}),this.container=document.createElement("div"),this.container.className="tooltip",Object.assign(this.container.style,{position:"absolute",display:"none","white-space":"nowrap","z-index":1,"pointer-events":"none","user-select":"none","background-color":"rgb(31,31,31,.7)","border-radius":"6px",color:"rgb(255, 255, 255)","font-size":"12px","font-family":'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, sans-serif',"line-height":"18px",padding:"5px 8px"}),this.title=document.createElement("div"),Object.assign(this.title.style,{"align-items":"center","justify-content":"center",display:"flex",height:"18px"}),this.title.className="tooltip-title",this.container.appendChild(this.title),t.appendChild(this.container),e.appendChild(t)}refixTooltipPosition(e,t){const{innerWidth:n,innerHeight:i}=this.view,{scrolls:r}=this.editor.view,{scrollX:o,scrollY:s}=r;return(e-=o-20)>n-72&&(e=n-72),(t-=s-20)>i-30&&(t=i-30),[e,t]}updateContent(e){this.title.innerHTML=e}updatePosition(e,t){const n=this.refixTooltipPosition(e,t);e=Math.floor(n[0]),t=Math.floor(n[1]),this.container.style.left=Xi(e),this.container.style.top=Xi(t),"none"===this.container.style.display&&(this.container.style.display="block")}update(e,t,n){this._queue.push((()=>{this.updateContent(n),this.updatePosition(e,t)}))}}class av extends cm{constructor(e,t,n,i){super({id:e,kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.hasAnySelection,bm.editingMode.isEqualTo(fm.Focus),bm.viewMode.isEqualTo(gm.Editing)),primary:t}}),this._id=e,this._primary=t,this._resizeKey=n,this._resizeOffset=i}async runEditorCommand(e,t,n){const{_resizeOffset:i,_resizeKey:r}=this,{model:o,viewModel:s,view:a}=t,l=function(e,t){return t.slice().filter((t=>{const n=e.getNodeById(t);return n&&!co(n)&&!uo(n)}))}(o,s.selection);if(l.length<=0)return;const{logicWidth:c}=a.getViewport();t.transform((e=>{l.forEach((t=>{const n=function(e,t){const n=nr(e);if(Number.isNaN(n))return"";const i=tr(e),r=n+t;if(r<0)return;return((e,t)=>`${nr(`${e}${t}`)}${t}`)(r,i)}(o.getMatchedStyle(t,c).getAttr(r),i);n&&e.updateStyle(t,{[r]:n})}))}))}}function lv(e){return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uv(e,t,n){return t&&dv(e.prototype,t),n&&dv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pv(e,t){return(pv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pv(e,t)}function gv(e,t){if(t&&("object"===lv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hv(e)}function mv(e){return(mv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yv(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wv(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}hm(new av("resizeLeft",Jf.CtrlCmd|Vf.LeftArrow,"width",-1)),hm(new av("resizeRight",Jf.CtrlCmd|Vf.RightArrow,"width",1)),hm(new av("resizeUp",Jf.CtrlCmd|Vf.UpArrow,"height",-1)),hm(new av("resizeDown",Jf.CtrlCmd|Vf.DownArrow,"height",1)),hm(new av("resizeShiftLeft",Jf.CtrlCmd|Jf.Shift|Vf.LeftArrow,"width",-10)),hm(new av("resizeShifRight",Jf.CtrlCmd|Jf.Shift|Vf.RightArrow,"width",10)),hm(new av("resizeShifUp",Jf.CtrlCmd|Jf.Shift|Vf.UpArrow,"height",-10)),hm(new av("resizeShifDown",Jf.CtrlCmd|Jf.Shift|Vf.DownArrow,"height",10));var xv={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Cv=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cv(this,e),this.init(t,n)}return uv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||xv,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,bv(bv({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),e}()),kv=function(){function e(){cv(this,e),this.observers={}}return uv(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Ev(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function Sv(e){return null==e?"":""+e}function Iv(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Ov(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return r()?{}:{obj:e,k:i(o.shift())}}function Tv(e,t,n){var i=Ov(e,t,Object);i.obj[i.k]=n}function Mv(e,t){var n=Ov(e,t),i=n.obj,r=n.k;if(i)return i[r]}function Nv(e,t,n){var i=Mv(e,n);return void 0!==i?i:Mv(t,n)}function Av(e,t,n){for(var i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):Av(e[i],t[i],n):e[i]=t[i]);return e}function Rv(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Dv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Pv(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Dv[e]})):e}var Lv="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Uv=[" ",",","?","!",";"];function Fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fv(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}function Vv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),r=e,o=0;o<i.length;++o){if(!r)return;if("string"==typeof r[i[o]]&&o+1<i.length)return;if(void 0===r[i[o]]){for(var s=2,a=i.slice(o,o+s).join(n),l=r[a];void 0===l&&i.length>o+s;)s++,l=r[a=i.slice(o,o+s).join(n)];if(void 0===l)return;if(t.endsWith(a)){if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a]}var c=i.slice(o+s).join(n);return c?Vv(l,c,n):void 0}r=r[i[o]]}return r}}var zv=function(e){fv(n,kv);var t=jv(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return cv(this,n),i=t.call(this),Lv&&kv.call(hv(i)),i.data=e||{},i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return uv(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split("."));var a=Mv(this.data,s);return a||!o||"string"!=typeof n?a:Vv(this.data&&this.data[e]&&this.data[e][t],n,r)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=t,t=(s=e.split("."))[1]),this.addNamespaces(t),Tv(this.data,s,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(i=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var a=Mv(this.data,s)||{};i?Av(a,n,r):a=Bv(Bv({},a),n),Tv(this.data,s,a),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Bv(Bv({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(),Kv={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,i,r))})),t}};function Wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Hv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wv(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}var qv={},Yv=function(e){fv(n,kv);var t=$v(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cv(this,n),i=t.call(this),Lv&&kv.call(hv(i)),Iv(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,hv(i)),i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=Cv.create("translator"),i}return uv(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var i=Uv.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!r.test(e);if(!o){var s=e.indexOf(n);s>0&&!r.test(e.substring(0,s))&&(o=!0)}return o}(e,n,i));if(o&&!s){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:r};var l=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(r=l.shift()),e=l.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t,i){var r=this;if("object"!==lv(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],t),a=s.key,l=s.namespaces,c=l[l.length-1],d=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(u){var h=t.nsSeparator||this.options.nsSeparator;return c+h+a}return a}var p=this.resolve(e,t),f=p&&p.res,g=p&&p.usedKey||a,m=p&&p.exactUsedKey||a,_=Object.prototype.toString.apply(f),v=["[object Number]","[object Function]","[object RegExp]"],y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(w&&f&&b&&v.indexOf(_)<0&&("string"!=typeof y||"[object Array]"!==_)){if(!t.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,Hv(Hv({},t),{},{ns:l})):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(o){var x="[object Array]"===_,C=x?[]:{},k=x?m:g;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var S="".concat(k).concat(o).concat(E);C[E]=this.translate(S,Hv(Hv({},t),{joinArrays:!1,ns:l})),C[E]===S&&(C[E]=f[E])}f=C}}else if(w&&"string"==typeof y&&"[object Array]"===_)(f=f.join(y))&&(f=this.extendTranslation(f,e,t,i));else{var I=!1,O=!1,T=void 0!==t.count&&"string"!=typeof t.count,M=n.hasDefaultValue(t),N=T?this.pluralResolver.getSuffix(d,t.count,t):"",A=t["defaultValue".concat(N)]||t.defaultValue;!this.isValidLookup(f)&&M&&(I=!0,f=A),this.isValidLookup(f)||(O=!0,f=a);var R=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,D=R&&O?void 0:f,P=M&&A!==f&&this.options.updateMissing;if(O||I||P){if(this.logger.log(P?"updateKey":"missingKey",d,c,a,P?A:f),o){var L=this.resolve(a,Hv(Hv({},t),{},{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var B=0;B<F.length;B++)U.push(F[B]);else"all"===this.options.saveMissingTo?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);var j=function(e,n,i){var o=M&&i!==f?i:D;r.options.missingKeyHandler?r.options.missingKeyHandler(e,c,n,o,P,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,c,n,o,P,t),r.emit("missingKey",e,c,n,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?U.forEach((function(e){r.pluralResolver.getSuffixes(e,t).forEach((function(n){j([e],a+n,t["defaultValue".concat(n)]||A)}))})):j(U,a,A))}f=this.extendTranslation(f,e,t,p,i),O&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(c,":").concat(a)),(O||I)&&this.options.parseMissingKeyHandler&&(f="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(a,I?f:void 0):this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Hv(Hv({},n),{interpolation:Hv(Hv({},this.options.interpolation),n.interpolation)}));var s,a="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var l=e.match(this.interpolator.nestingRegexp);s=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=Hv(Hv({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),a){var d=e.match(this.interpolator.nestingRegexp);s<(d&&d.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate.apply(o,i.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var u=n.postProcess||this.options.postProcess,h="string"==typeof u?[u]:u;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=Kv.handle(h,e,t,this.options&&this.options.postProcessPassResolved?Hv({i18nResolved:i},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var l=s.extractFromKey(e,a),c=l.key;n=c;var d=l.namespaces;s.options.fallbackNS&&(d=d.concat(s.options.fallbackNS));var u=void 0!==a.count&&"string"!=typeof a.count,h=u&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),p=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);d.forEach((function(e){s.isValidLookup(t)||(o=e,!qv["".concat(f[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(qv["".concat(f[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!s.isValidLookup(t)){r=n;var o,l=[c];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(l,c,n,e,a);else{var d;u&&(d=s.pluralResolver.getSuffix(n,a.count,a));var f="_zero";if(u&&(l.push(c+d),h&&l.push(c+f)),p){var g="".concat(c).concat(s.options.contextSeparator).concat(a.context);l.push(g),u&&(l.push(g+d),h&&l.push(g+f))}}for(;o=l.pop();)s.isValidLookup(t)||(i=o,t=s.getResource(n,e,o,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),n}();function Gv(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Xv=function(){function e(t){cv(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Cv.create("languageUtils")}return uv(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Gv(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Gv(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Gv(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var i=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=n.getLanguagePartFromCode(e);if(n.isSupportedCode(i))return t=i;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=function(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&o(n.formatLanguageCode(e))})),r}}]),e}(),Jv=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Qv={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},Zv=["v1","v2","v3"],ey={zero:0,one:1,two:2,few:3,many:4,other:5};function ty(){var e={};return Jv.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:Qv[t.fc]}}))})),e}var ny=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cv(this,e),this.languageUtils=t,this.options=n,this.logger=Cv.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ty()}return uv(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(e,t){return ey[e]-ey[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):i.numbers.map((function(i){return t.getSuffix(e,i,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),r=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var o=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!Zv.includes(this.options.compatibilityJSON)}}]),e}();function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cv(this,e),this.logger=Cv.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return uv(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Pv,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Rv(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Rv(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Rv(t.nestingPrefix):t.nestingPrefixEscaped||Rv("$t("),this.nestingSuffix=t.nestingSuffix?Rv(t.nestingSuffix):t.nestingSuffixEscaped||Rv(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var d=function(e){if(e.indexOf(a.formatSeparator)<0){var r=Nv(t,l,e);return a.alwaysFormat?a.format(r,void 0,n,ry(ry(ry({},i),t),{},{interpolationkey:e})):r}var o=e.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(Nv(t,l,s),c,n,ry(ry(ry({},i),t),{},{interpolationkey:s}))};this.resetRegExp();var u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?c(a.escape(e)):c(e)}}].forEach((function(t){for(s=0;r=t.regex.exec(e);){var n=r[1].trim();if(void 0===(o=d(n)))if("function"==typeof u){var l=u(e,r,i);o="string"==typeof l?l:""}else if(i&&i.hasOwnProperty(n))o="";else{if(h){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=Sv(o));var c=t.safeValue(o);if(e=e.replace(r[0],c),h?(t.regex.lastIndex+=c.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=ry({},o);function a(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var i=e.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,s)).replace(/'/g,'"');try{s=JSON.parse(r),t&&(s=ry(ry({},t),s))}catch(_8){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),_8),"".concat(e).concat(n).concat(r)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=d.shift(),l=d,c=!0}if((i=t(a.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=Sv(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),c&&(i=l.reduce((function(e,t){return r.format(e,t,o.lng,ry(ry({},o),{},{interpolationkey:n[1].trim()}))}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),e}();function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ly=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cv(this,e),this.logger=Cv.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,ay(ay({},n),{},{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,ay({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,ay({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,ay({},n)).format(e)}},this.init(t)}return uv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"format",value:function(e,t,n,i){var r=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var i=e.split("(");t=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(e){if(e){var t=yv(e.split(":")),i=t[0],r=t.slice(1).join(":");n[i.trim()]||(n[i.trim()]=r.trim()),"false"===r.trim()&&(n[i.trim()]=!1),"true"===r.trim()&&(n[i.trim()]=!0),isNaN(r.trim())||(n[i.trim()]=parseInt(r.trim(),10))}}))}return{formatName:t,formatOptions:n}}(t),s=o.formatName,a=o.formatOptions;if(r.formats[s]){var l=e;try{var c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},d=c.locale||c.lng||i.locale||i.lng||n;l=r.formats[s](e,d,ay(ay(ay({},a),i),c))}catch(u){r.logger.warn(u)}return l}return r.logger.warn("there was no format function for ".concat(s)),e}),e)}}]),e}();function cy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cy(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}var hy=function(e){fv(n,kv);var t=uy(n);function n(e,i,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return cv(this,n),o=t.call(this),Lv&&kv.call(hv(o)),o.backend=e,o.store=i,o.services=r,o.languageUtils=r.languageUtils,o.options=s,o.logger=Cv.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,s.backend,s),o}return uv(n,[{key:"queueLoad",value:function(e,t,n,i){var r=this,o=[],s=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=e.split("|"),r=i[0],o=i[1];t&&this.emit("failedLoading",r,o,t),n&&this.store.addResourceBundle(r,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){var i,a,l,c,d,u;i=n.loaded,a=o,c=Ov(i,[r],Object),d=c.obj,u=c.k,d[u]=d[u]||[],l&&(d[u]=d[u].concat(a)),l||d[u].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&r<5?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*o,s)}),o):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),t.loaded(e,i,s)}))}},{key:"saveMissing",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,i,null,dy(dy({},o),{},{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,n,i))}}]),n}();function py(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===lv(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===lv(e[2])||"object"===lv(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function fy(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function gy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function my(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gy(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}function vy(){}function yy(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var wy=function(e){fv(n,kv);var t=_y(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(cv(this,n),e=t.call(this),Lv&&kv.call(hv(e)),e.options=fy(i),e.services={},e.logger=Cv,e.modules={external:[]},yy(hv(e)),r&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,r),gv(e,hv(e));setTimeout((function(){e.init(i,r)}),0)}return e}return uv(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var i=py();function r(e){return e?"function"==typeof e?new e:e:null}if(this.options=my(my(my({},i),this.options),fy(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=my(my({},i.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?Cv.init(r(this.modules.logger),this.options):Cv.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=ly);var s=new Xv(this.options);this.store=new zv(this.options.resources,this.options);var a=this.services;a.logger=Cv,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new ny(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(a.formatter=r(o),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new oy(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new hy(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new Yv(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=vy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=Ev(),h=function(){var t=function(t,i){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(i),n(t,i)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vy,i=n,r="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var o=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(r)s(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),i(e)}))}else i(null)}},{key:"reloadResources",value:function(e,t,n){var i=Ev();return e||(e=this.languages),t||(t=this.options.ns),n||(n=vy),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Kv.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=Ev();this.emit("languageChanging",e);var r=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var s="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||r(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,o){o?(r(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,t,n){var i=this,r=function e(t,r){var o;if("object"!==lv(r)){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([t,r].concat(a))}else o=my({},r);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns;var c=i.options.keySeparator||".",d=n?"".concat(n).concat(c).concat(t):t;return i.t(d,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||r&&!s(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=Ev();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Ev();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vy,r=my(my(my({},this.options),t),{isClone:!0}),o=new n(r),s=["store","services","language"];return s.forEach((function(t){o[t]=e[t]})),o.services=my({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new Yv(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e].concat(n))})),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}();_v(wy,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new wy(e,t)}));var by=wy.createInstance();function xy(e){var t,n,i,r;const o=ho(e)?"Section":null!=(i=null==(t=e.meta)?void 0:t.subType)?i:null==(n=e.meta)?void 0:n.componentType;return(null==(r=e.meta)?void 0:r.label)||o}by.createInstance=wy.createInstance,by.createInstance,by.init,by.loadResources,by.reloadResources,by.use,by.changeLanguage,by.getFixedT,by.t,by.exists,by.setDefaultNamespace,by.hasLoadedNamespace,by.loadNamespaces,by.loadLanguages,by.t("Image"),by.t("Container"),by.t("Section"),by.t("Symbol"),by.t("Text"),by.t("SVG"),by.t("Video"),by.t("Page"),by.t("WebWidget"),by.t("RichText");var Cy,ky=Object.defineProperty,Ey=Object.getOwnPropertyDescriptor,Sy=(e,t)=>(n,i)=>t(n,i,e);!function(e){e.updateOutlineByIds=async n=>{if(!e.editor)return;await Kp(0);const i=e.contextKeyService.getContextKeyValue(bm.editingMode.key),r=e.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key),{view:o}=e.editor;o.updateOutline((s=>{s.length=0;const a=o.getViewport();let l=!0;n.forEach((n=>{const o=e.editor.view.getElementRectById(n);if(!o)return null;const c=t(o,n,a,i===fm.Focus,r);c&&(s.push(c),l&&(l=!!c.draggable))})),o.updateCanvasCursor(l?Fi.move:Fi.default)}))};const t=(t,o,s,a,l)=>{var c,d;const{model:u,view:h}=e.editor,p=u.getNodeById(o),f=u.getParentNodeOfId(o),{scale:g}=h.getViewport();if(!f)throw new Error("500");let m,_,v,y,w=h.getElementRectById(f.id);try{v=h.getComputedStyleOfId(f.id),y=h.getComputedStyleOfId(p.id)}catch(N){console.warn("compute outline error",N)}if(!v||!y)return;const b=G_(p.id,e.editor),x="fixed"===y.position;if(wr(y)&&(_=p.id),_||wr(v)&&(_=f.id),_){m={rect:_===p.id?t:h.getElementRectById(_),clips:[],label:_===p.id?null:xy(f)};const e=u.getChildrenNodesOfId(_);for(const n of e){const e=n.id===o?t:h.getElementRectById(n.id);m.clips.push(e)}}let C;if("grid"===y.display&&(C={rect:t,rows:Wi(y.gridTemplateRows),columns:Wi(y.gridTemplateColumns),columnGap:Ii(y.columnGap),rowGap:Ii(y.rowGap),paddingTop:parseFloat(y.paddingTop),paddingRight:parseFloat(y.paddingRight),paddingBottom:parseFloat(y.paddingBottom),paddingLeft:parseFloat(y.paddingLeft)}),C&&1===C.columns.length&&1===C.rows.length&&(C=null),!C&&!co(f)&&"grid"===v.display){const e=Wi(v.gridTemplateRows),t=Wi(v.gridTemplateColumns);(e.length>1||t.length>1)&&(w||(w=h.getElementRectById(f.id)),C={rect:w,rows:e,columns:t,columnGap:Ii(v.columnGap),rowGap:Ii(v.rowGap),paddingTop:parseFloat(v.paddingTop),paddingRight:parseFloat(v.paddingRight),paddingBottom:parseFloat(v.paddingBottom),paddingLeft:parseFloat(v.paddingLeft)})}C&&1===C.columns.length&&1===C.rows.length&&(C=null);let k={top:t.top,left:t.left,width:t.width,height:t.height,paddingTop:parseFloat(y.paddingTop),paddingRight:parseFloat(y.paddingRight),paddingBottom:parseFloat(y.paddingBottom),paddingLeft:parseFloat(y.paddingLeft)};var E,S;let I,O,T,M;if(E=[k.paddingTop,k.paddingRight,k.paddingBottom,k.paddingLeft],S=0,E.every((e=>e===S))&&!co(f)&&(k={top:w.top,left:w.left,width:w.width,height:w.height,paddingTop:parseFloat(v.paddingTop),paddingRight:parseFloat(v.paddingRight),paddingBottom:parseFloat(v.paddingBottom),paddingLeft:parseFloat(v.paddingLeft)}),co(f)&&(I=Object.create(null),"HEADER"!==(null==(c=p.meta)?void 0:c.tagName)&&(I.top=!0),"FOOTER"!==(null==(d=p.meta)?void 0:d.tagName)&&(I.bottom=!0)),function(e,t){const{model:n}=t,i=n.getParentNodeOfId(e),r=n.getNodeById(e);return!(!i||co(r)||ho(r)&&X_(e,t))}(o,e.editor)){const e=i(p,y,f),t=r(p,y,f);O={top:e,bottom:e,left:t,right:t}}return a&&J_(p.id,e.editor)&&(T={handle:fo(p)?p.id:null}),lo(p)&&(M=p.id),{left:t.left,top:t.top,width:t.width,height:t.height,mx:t.mx,resizable:O,flex:m,grid:C,draggable:T,parent:x?void 0:w,padding:k,addSection:I,dock:n(t,p.id,f,s,y,v),show:!0,fixed:b,isAnimationEditing:l,rotate:M,id:o,vscale:g}},n=(t,n,i,r,o,s)=>{const{model:a,view:l}=e.editor,c=[],d=a.getMatchedStyle(n,r.visualWidth),u=(t.left+t.right)/2,h=(t.top+t.bottom)/2,p=d.getAttr("align-self"),f=d.getAttr("justify-self"),g="fixed"===d.getAttr("position"),m=d.getAttr("margin-left"),_=d.getAttr("margin-right"),v=d.getAttr("margin-top"),y=d.getAttr("margin-bottom"),w="flex"===s.display,b="grid"===s.display;let x=l.getElementRectById(i.id);b?x=function(e,t,n){const i=Wi(t.gridTemplateRows),r=Wi(t.gridTemplateColumns),o=Ii(t.columnGap),s=Ii(t.rowGap),a=parseFloat(t.paddingTop),l=parseFloat(t.paddingLeft),{rowStart:c,rowEnd:d,columnStart:u,columnEnd:h}=$i(e),p=[];for(let w=0,b=r.length,x=n.left+l;w<=b;w++)p.push(x),x=x+r[w]+o;const f=[];for(let w=0,b=i.length,x=n.top+a;w<=b;w++)f.push(x),x=x+i[w]+s;if(c>f.length)throw new Error(mi.internalError);if(u>p.length)throw new Error(mi.internalError);const g=f[c-1],m=f[d-1]-s,_=p[u-1],v=p[h-1]-o,y=Object.create(null);return y.top=g,y.bottom=m,y.left=_,y.right=v,y.width=y.right-y.left,y.height=y.bottom-y.top,y}(o,s,x):g&&(x=l.getElementRectById(":viewport"));const C=(e,t)=>iv(t,e,tr(d.getAttr(e))||ji.px,x,r);if(w&&"flex-start"===p||b&&("start"===f||"stretch"===f)||g&&m){const e=bi(o.marginLeft);Ci(e,0,5)||c.push({top:h,left:x.left,width:t.left-x.left,text:rv(C("margin-left",e))})}if(w&&"flex-end"===p||b&&("end"===f||"stretch"===f)||g&&_){const e=bi(o.marginRight);Ci(e,0,5)||c.push({top:h,left:x.right,width:t.right-x.right,text:rv(C("margin-right",e))})}if(w&&"flex-start"===f||b&&("start"===p||"stretch"===p)||g&&v){const e=bi(o.marginTop);Ci(e,0,5)||c.push({top:x.top,left:u,height:t.top-x.top,text:rv(C("margin-top",e))})}if(w&&"flex-end"===f||b&&("end"===p||"stretch"===p)||g&&y){const e=bi(o.marginBottom);Ci(e,0,5)||c.push({top:x.bottom,left:u,height:t.bottom-x.bottom,text:rv(C("margin-bottom",e))})}return c.forEach((e=>e.dot=!0)),G_(n,e.editor)&&c.forEach((e=>e.fixed=!0)),c},i=(t,n,i)=>!!i&&(!co(t)&&(ho(t)?!G_(t.id,e.editor):"auto"!==n.height)),r=(e,t,n)=>!!n&&(!co(e)&&(!ho(e)&&"auto"!==t.width))}(Cy||(Cy={}));let Iy=(n=class extends zo{constructor(e,t){super(),C(this,"_tipWidget"),C(this,"_startDragHandleType",null),C(this,"_toolbarInfo",{ids:[],rect:{width:0,height:0}}),C(this,"dragTargetWidgets",new Map),C(this,"dragRequest",null),C(this,"waitingHandleSelection",null),C(this,"events",new Vo),this.editor=e,this.contextKeyService=t,Cy.editor=e,Cy.contextKeyService=t,this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this._register(this.events),this.handleViewModeChange()}handleContextKeyChangeEvent(e){e.affectsSome(new Set([bm.editingMode.key]))&&this.handleUpdate(),e.affectsSome(new Set([bm.viewMode.key]))&&this.handleViewModeChange(),e.affectsSome(new Set([bm.isAnimationEditing.key]))&&this.handleAnimationChange()}handleViewModeChange(){this.editor.getMode()===gm.Editing?this.registerListeners():this.events.clear()}handleAnimationChange(){const e=this.editor.viewModel.selection;this.showToolbar(),Cy.updateOutlineByIds(e)}registerListeners(){const e=this.editor.view,t=this.editor.viewModel,n=this.editor.model,i=this.handleUpdate.bind(this),r=this.handleModelUpdate.bind(this);this.events.add(this.editor.onUpdated(i)),this.events.add(t.onDidChangeSelection(i)),this.events.add(n.onDidChangeContent(r)),this.events.add(e.onMouseDragStart(this.onDragStart.bind(this))),this.events.add(e.onMouseDrag(this.onDrag.bind(this))),this.events.add(e.onMouseDrop(this.onDrop.bind(this))),this.events.add(e.onMouseDropCanceled(this.onDropCanceled.bind(this))),this.events.add(e.onMouseDown(this.onMouseDown.bind(this))),this.events.add(e.onDbClick(this.onDbClick.bind(this)))}async handleUpdate(){const e=this.contextKeyService.getContextKeyValue(bm.editingMode.key),{viewModel:t,model:n}=this.editor,i=t.selection.filter((e=>!!n.getNodeById(e))),r=e===fm.DragResize||e===fm.Focus||e===fm.EditText||e===fm.None;if(i.length&&r||this.hideToolbar(),r){i.length&&(this.updateToolbar(i),await this.measureToolbarRect(i),this.updateToolbar(i)),await Cy.updateOutlineByIds(i);for(const[e,t]of this.dragTargetWidgets){const n=this.editor.view.getElementRectById(e);t.update(n)}if(this._tipWidget){const e=this.editor.view.getGroupRectByIds(this.dragRequest.targetIds),{width:t,height:n}=e,i=`${Math.ceil(t)} × ${Math.ceil(n)}`,{posX:r,posY:o}=this.dragRequest;si(r)||si(o)||this._tipWidget.update(r,o,i)}}}handleModelUpdate(){const e=this.contextKeyService.getContextKeyValue(bm.editingMode.key),{viewModel:t,model:n,view:i}=this.editor,r=t.selection.filter((e=>!!n.getNodeById(e))),o=e===fm.DragResize||e===fm.Focus||e===fm.EditText||e===fm.None;if(!r.length||!o)return;const s=this.computedHasTrigger(r[0]);i.updateToolbar((e=>{e.hasTrigger=s}))}onDbClick(e){const{target:t}=e,{targetPath:n}=t,i=this.contextKeyService.getContextKeyValue(bm.editingMode.key),r=this.editor.viewModel,o=n.map((e=>e.fingerprint)).pop();if((i===fm.None||i===fm.Focus)&&(this.contextKeyService.setContext(bm.editingMode.key,fm.Focus),o)){const[e]=Oy(this.editor,o,false);e&&this.editor.recordSelectionChanges((()=>{r.setSelectionById(e)}))}}onMouseDown(e){const{event:t,target:n}=e,{targetPath:i}=n,r=d_.isChildOfCanvas(i),o=d_.isBlockingContentWidget(i),s=t.leftButton,a=this.contextKeyService.getContextKeyValue(bm.editingMode.key),l=this.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key),c=this.editor.viewModel;if(r)s&&this.editor.recordSelectionChanges((()=>{const e=i.map((e=>e.fingerprint)).pop(),n=!(t.ctrlKey||t.metaKey);if(Boolean(!l&&t.shiftKey)){if(a===fm.Focus){const[t,i]=Oy(this.editor,e,n);i.includes(t)||t&&c.appendSelectionById(t),i.forEach((e=>{c.removeSelectionById(e)}))}}else if(a===fm.None||a===fm.Focus){this.contextKeyService.setContext(bm.editingMode.key,fm.Focus);const[t]=Oy(this.editor,e,n);this.waitingHandleSelection=t}}));else if(o){const e=i[i.length-1];if("breadcrumbs"===e.fingerprint)this.editor.recordSelectionChanges((()=>{const e=i[i.length-1];this.editor.viewModel.setSelectionById(e.detail)}));else if("stretch"===e.fingerprint)this.toggleStretch(!1);else if("unstretch"===e.fingerprint)this.toggleStretch(!0);else if("addSection"===e.fingerprint){const e=Lg(n.element,(e=>"add-section-box"===e.className));if(e){const t=e.getAttribute("data-direction"),n=e.getAttribute("data-ref");n&&t?this.addSection(n,t):console.warn("Target value lost.",n,t)}}}else{if(a!==fm.Focus)return;this.contextKeyService.setContext(bm.editingMode.key,fm.None),c.clearSelection()}}async measureToolbarRect(e){const t={width:0,height:0};if(e.length<=0)return void(this._toolbarInfo={ids:e,rect:t});const{ids:n,rect:i}=this._toolbarInfo;if(Lr(e,n))return i;const r=document.querySelector("#toolbar");if(!r)return void(this._toolbarInfo={ids:e,rect:t});await Kp(30);const{offsetWidth:o,offsetHeight:s}=r;this._toolbarInfo={ids:e,rect:{width:o,height:s}}}calcToolbarRect(e){const{view:t}=this.editor,{scale:n,visualWidth:i}=t.getViewport(),{boundaryDomNode:r}=t,{scrollX:o,scrollY:s}=t.scrolls,{scrollLeft:a,offsetWidth:l,offsetHeight:c}=r,{width:d,height:u}=this._toolbarInfo.rect,h=24,p=l-48-i,f=Math.max(p/2,0),g=p<0,m=-24/n,_=(c-h)/n,v=g?(a-h)/n:(-24-f)/n,y=g?(l-h+a)/n:(l-f-h)/n,w=8/n,b=74/n;let x=e.top-b-s,C=e.left;const k=d/n,E=u/n;return x<m+w&&(x=m+w),x>_-E-w&&(x=_-E-w),C<v+w&&(C=v+w),C>y-k-w&&(C=y-k-w),{top:x+s,left:C}}updateToolbar(e){const{view:t}=this.editor,n=this.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key),i=t.getGroupRectByIds(e);if(!i)return void console.error("500");const{scale:r}=t.getViewport(),{top:o,left:s}=this.calcToolbarRect(i);t.updateToolbar((t=>{t.show=!0,t.rect={top:o,left:s,above:true},t.vmx=b_.scale(b_.Identity,{x:1/r,y:1/r}),t.hideToolbarUI=n,1===e.length?(t.breadcrumbs=this.computeBreadcrumbs(e[0]),t.fixed=G_(e[0],this.editor),t.hasTrigger=this.computedHasTrigger(e[0])):(t.breadcrumbs=null,t.fixed=!1)}))}showToolbar(){this.editor.view.updateToolbar((e=>{e.show=!0}))}hideToolbar(){this.editor.view.updateToolbar((e=>{e.show=!1}))}hideToolbarUI(){this.editor.view.updateToolbar((e=>{e.hideToolbarUI=!0}))}showToolbarUI(){this.editor.view.updateToolbar((e=>{e.hideToolbarUI=!1}))}createNewSectionNode(){return{style:{width:"100%",height:"500px",display:"grid","grid-template-columns":ir(["1fr"]),"grid-template-rows":ir(["1fr"])},props:{},meta:{tagName:"SECTION",componentType:qr.Section}}}addSection(e,t){if(t===u_.none)throw new Error("Invalid Param");const{model:n,viewModel:i}=this.editor,{style:r,props:o,meta:s}=this.createNewSectionNode(),a=n.getValue().nodes.find((e=>co(e))),l={ref:e,direction:Es.forward};let c=Ir.addForward;t!==u_.bottom&&t!==u_.right||(l.direction=Es.backward,c=Ir.addBackward),this.editor.transform((t=>{const{id:n}=t.addNode(l,o,s);t.updateStyle(n,r),t.insertGridNode(a.id,e,n,c),i.setSelectionById(n)}))}toggleStretch(e){const t=this.editor.viewModel.selection;if(!t.length)throw new Error("500");const n=this.editor.model,i=this.editor.view,r=Object.create(null),o=t[0],s=i.getViewport(),a=n.getMatchedStyle(o,s.logicWidth),l=(e,t)=>`${t}${tr(a[e])||ji.px}`;if(e){const e=bi(i.getComputedStyleOfId(o).height);r["align-self"]="start",r["justify-self"]="center",r.width=wi(.7),r.height="auto",r["min-height"]=Xi(.7*e),r["margin-top"]=(c=a.getAttr("margin-top"),ai(c)&&c.endsWith("%")?wi(.2):Xi(.2*e))}else r["align-self"]="stretch",r["justify-self"]="stretch",r["margin-top"]=l("margin-top",0),r["margin-right"]=l("margin-right",0),r["margin-bottom"]=l("margin-bottom",0),r["margin-left"]=l("margin-left",0),r.width="auto",r.height="auto",r["min-height"]=Xi(0);var c;this.editor.transform((e=>{e.updateStyle(o,r,s.visualWidth)}))}computedHasTrigger(e){const t=this.editor.model,{triggers:n}=t.getValue();return n.some((t=>t.targetId===e))}computeBreadcrumbs(e){const t=this.editor.model,n=t.getAncestorNodesOfId(e),i=t.getNodeById(e);if(co(i))return null;const r=ho(i);return{parts:n.slice(r?1:2).filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.wrapper)})).concat([i]).reverse().map((e=>({label:xy(e),id:e.id})))}}showDragTargets(e){const{view:t,model:n}=this.editor;e.slice().sort(((e,t)=>{const i=n.getAncestorNodesOfId(e).map((e=>e.id)).concat(e),r=n.getAncestorNodesOfId(t).map((e=>e.id)).concat(t);let o=1;const s=Math.max(i.length,r.length);for(let a=0;a<s;a++){const e=i[a],t=r[a];if(e!==t){if(t&&e){const i=n.getNodeById(e),r=n.getNodeById(t);o=Is(i.order,r.order)}else console.warn("Unexpected",e,t);break}}return o})).forEach((e=>{if(!this.dragTargetWidgets.get(e)){const n=new Z_(t.getElementById(e),t.getElementRectById(e),this.editor);this.dragTargetWidgets.set(e,n),t.addContentWidget(n,Do.Low,!1)}})),this._tipWidget||(this._tipWidget=new sv(this.editor,t.canvasHostDomNode.contentWindow),t.addOuterWidget(this._tipWidget,Do.High,!1))}hideDragTargets(){this.dragTargetWidgets.forEach(((e,t)=>{e&&this.editor.view.removeContentWidget(e)})),this.dragTargetWidgets.clear(),this._tipWidget&&(this.editor.view.removeOuterWidget(this._tipWidget),this._tipWidget=null)}onDragStart(e){const{targetPath:t}=e.target;if(!d_.isDraggableWidget(t))return;if("dragResize"!==t[t.length-1].fingerprint)return;let n=this.editor.viewModel.selection;if(!n.length)throw new Error("500");this.waitingHandleSelection&&!n.includes(this.waitingHandleSelection)&&(this.editor.recordSelectionChanges((()=>{this.editor.viewModel.setSelectionById(this.waitingHandleSelection)})),this.waitingHandleSelection=null),n=this.editor.viewModel.selection,this.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key)||this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.Focus||(this._startDragHandleType=+t[t.length-1].detail)}onDrag(e){if(!this.dragRequest){if(!this._startDragHandleType)return;const t=this.editor.viewModel.selection;this.dragRequest=new ov(e,t,this.editor,this._startDragHandleType),this.editor.fork(),this.toggleMultiNodesVisibility(t,!1),this.showDragTargets(t),this.contextKeyService.setContext(bm.editingMode.key,fm.DragResize)}this.dragRequest.moveTo(e)}onDrop(e){if(this._startDragHandleType=null,this.waitingHandleSelection=null,!this.dragRequest)return;const t=this.dragRequest.targetIds;this.toggleMultiNodesVisibility(this.dragRequest.targetIds,!0),this.hideDragTargets(),this.editor.commitAndMerge(),this.dragRequest=null,1===t.length&&this.editor.viewModel.setSelectionById(t[0]);if(this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.DragResize)throw new Error("500");this.contextKeyService.setContext(bm.editingMode.key,fm.Focus)}onDropCanceled(){if(this._startDragHandleType=null,!this.dragRequest)return void(this.waitingHandleSelection&&(this.editor.recordSelectionChanges((()=>{this.editor.viewModel.setSelectionById(this.waitingHandleSelection)})),this.waitingHandleSelection=null));this.toggleMultiNodesVisibility(this.dragRequest.targetIds,!0),this.hideDragTargets(),this.editor.checkout(),this.dragRequest=null;if(this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.DragResize)throw new Error("500");this.contextKeyService.setContext(bm.editingMode.key,fm.Focus)}toggleMultiNodesVisibility(e,t){const{viewModel:n}=this.editor;e.forEach((e=>{n.toggleVisibility(e,t)}))}},C(n,"ID","editor.contrib.outline"),n);function Oy(e,t,n){if(!t)return[null,[]];const{model:i,viewModel:r}=e,o=r.isIdSelected(t)?t:null,s=i.getAncestorNodesOfId(t).map((e=>e.id)).concat(t);let a=null,l=[];if(s.length<2)throw new Error("404");const c=G_(s[1],e);if(!n||!c&&s.length<=3)a=s[s.length-1];else{const e=r.selection.slice().map((e=>i.getAncestorNodesOfId(e).map((e=>e.id)).concat(e)));let t=[];const n=c?1:3;let o=e.filter((e=>e.length>n));for(let i=n;i<=s.length;i++){const e=s.slice(0,i);if(i===n&&(t=e),o=o.filter((t=>t.slice(0,i).join(",")===e.join(","))),o.length<=0)break;t=e}const l=t.length<s.length?t.length:s.length-1;a=s[l]}if(a&&a!==o)if(o)l=[o];else{const{selection:e}=r;l=e.filter((e=>i.isAncestorNodeOfId(a,e)||i.isAncestorNodeOfId(e,a)))}else a=o,l=[o];return[a,l]}Iy=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Ey(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&ky(t,n,o),o})([Sy(0,Ol),Sy(1,Lf)],Iy),pm(Iy.ID,Iy);var Ty=Object.defineProperty,My=Object.getOwnPropertyDescriptor,Ny=(e,t)=>(n,i)=>t(n,i,e);let Ay=(i=class extends zo{constructor(e,t,n){super(),C(this,"widget"),C(this,"widgetProps"),C(this,"currentHovering"),C(this,"events",new Vo),this._editor=e,this.contextKeyService_=t,this._register(this.events),this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this.widgetProps=od([]),this.widget=n.createInstance(q_,this.widgetProps,this._editor.view.scrolls),this._editor.view.addOuterWidget(this.widget,Do.Low),this._register(jo((()=>{this._editor.view.removeOuterWidget(this.widget)}))),this.handleViewModeChange()}handleContextKeyChangeEvent(e){const t=[bm.editingMode.key];e.affectsSome(new Set(t))&&this.shouldSuppressHover()&&this.hide(),e.affectsSome(new Set([bm.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===gm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const{view:e,viewModel:t}=this._editor;this.events.add(this._editor.onUpdated(this.handleEditorUpdate.bind(this))),this.events.add(t.onDidChangeSelection(this.handleSelectionChange.bind(this))),this.events.add(e.onMouseEnter((e=>this.handleMouseEnter(e)))),this.events.add(e.onMouseLeave((e=>this.handleMouseLeave(e))))}handleSelectionChange(){this.hide()}handleMouseEnter(e){const{targetPath:t}=e.target;if(!d_.isChildOfCanvas(t))return;const{fingerprint:n}=t[t.length-1];if(c_.shouldNotBeMeasured(n))return;if(this.shouldSuppressHover())return;if(co(this._editor.model.getNodeById(n)))return;this.currentHovering=n;const{event:i}=e,r=!(i.ctrlKey||i.metaKey);this.show(r)}_compute(e,t){const n=this.contextKeyService_.getContextKeyValue(bm.isAnimationEditing.key);return Ry(this._editor,e,t,n)}shouldSuppressHover(){const e=this.contextKeyService_.getContextKeyValue(bm.editingMode.key);return e!==fm.None&&e!==fm.Focus}handleMouseLeave(e){if(this.shouldSuppressHover())return;const{targetPath:t}=e.target,{fingerprint:n}=t[t.length-1];n===this.currentHovering&&this.hide()}handleEditorUpdate(){if(this.shouldSuppressHover())return;if(!this.currentHovering)return;this._editor.model.getNodeById(this.currentHovering)?this.show():this.hide()}hide(){this.currentHovering=null,this.widgetProps.length=0;this.contextKeyService_.getContextKeyValue(bm.editingMode.key)===fm.None&&this._editor.view.updateCanvasCursor(Fi.default)}show(e=!1){const t=this._compute(this.currentHovering,e);if(t.length>0){const e=t[0].draggable?Fi.move:Fi.default;this._editor.view.updateCanvasCursor(e),this.widgetProps.length=0,this.widgetProps.push(...t)}}},C(i,"ID","editor.contrib.hover"),i);function Ry(e,t,n,i){const r=e.model,o=e.view,s=e.viewModel,a=[],l=r.getParentNodeOfId(t),{scale:c}=o.getViewport(),d=b_.scale(b_.Identity,{x:1/c,y:1/c});if(!l)throw new Error("500");const[u,h]=Oy(e,t,n);if(u&&!h.includes(u)){const t=e.view.getElementRectById(u),n=s.selection.includes(u)?null:xy(r.getNodeById(u));a.push(b(w({},t),{draggable:J_(u,e),fixed:G_(u,e),label:n,vmx:d,show:!0,ignorable:!0,isAnimationEditing:Boolean(i)}))}return a}Ay=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?My(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Ty(t,n,o),o})([Ny(0,Ol),Ny(1,Lf),Ny(2,Vr)],Ay),pm(Ay.ID,Ay);const Dy=Kr("resourceService"),Py=Object.freeze((function(e,t){const n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));var Ly,Uy;(Uy=Ly||(Ly={})).isCancellationToken=function(e){return e===Uy.None||e===Uy.Cancelled||e instanceof Fy||!(!e||"object"!=typeof e)&&"boolean"==typeof e.isCancellationRequested&&"function"==typeof e.onCancellationRequested},Uy.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:_s.None}),Uy.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Py});class Fy{constructor(){C(this,"_isCancelled",!1),C(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Py:(this._emitter||(this._emitter=new xs),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class By{constructor(e){C(this,"_token"),C(this,"_parentListener"),this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Fy),this._token}cancel(){this._token?this._token instanceof Fy&&this._token.cancel():this._token=Ly.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Fy&&this._token.dispose():this._token=Ly.None}}var jy=Object.defineProperty,Vy=Object.getOwnPropertyDescriptor,zy=(e,t)=>(n,i)=>t(n,i,e);function Ky(e,t){e.has(t)||e.set(t,0),e.set(t,e.get(t)+1)}function Wy(e,t){const n=e.get(t);n||Mo();const i=n-1;i?e.set(t,i):e.delete(t)}function Hy(e,t,n){if(t.has(n))return Wy(t,n);Ky(e,n)}function $y(e,t,n){if(e.has(n))return Wy(e,n);Ky(t,n)}function qy(e){const t=[];if(!ai(e))return t;const{body:n}=(new DOMParser).parseFromString(e,"text/html");return n.querySelectorAll("*").forEach((e=>{if(function(e){const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof HTMLElement||e instanceof n}(e)){const n=e.style.fontFamily;n&&t.push(n)}})),t}let Yy=(r=class extends zo{constructor(e,t){super(),C(this,"used"),C(this,"fontProvideQuery"),this.editor=e,this.resourceService=t,this.initCounting(),this._register(e.model.onDidChangeContent((e=>this.handleModelChange(e)))),this._register(e.onDidChangeModel((()=>{var e;null==(e=this.fontProvideQuery)||e.dispose(!0),this.fontProvideQuery=null,this.initCounting()})))}initCounting(){const{styles:e,nodes:t}=this.editor.model.getValue();if(!e)return;const n=new Map;for(const i of e)i["font-family"]&&Ky(n,i["font-family"]);t.filter(no).forEach((e=>{qy(e.props.content).forEach((e=>Ky(n,e)))})),this.used=n}handleModelChange({changes:e}){const t=new Map,n=new Map;e.forEach((e=>{const{path:i}=e,[r]=i;"styles"===r&&(({path:e,newValue:i,oldValue:r})=>{const[o,s,a]=e;if(ci(s))if(a)"font-family"===a&&(i&&Hy(t,n,i),r&&$y(t,n,r));else{if(i){const e=i;e["font-family"]&&Hy(t,n,e["font-family"])}if(r){const e=r;e["font-family"]&&$y(t,n,e["font-family"])}}})(e),"nodes"===r&&(({path:e,newValue:i,oldValue:r})=>{const[o,s,a,l]=e;ci(s)&&(a?"content"===l&&(i&&qy(i).forEach((e=>{Hy(t,n,e)})),r&&qy(r).forEach((e=>{$y(t,n,e)}))):(i&&qy(i.props.content).forEach((e=>{Hy(t,n,e)})),r&&qy(r.props.content).forEach((e=>{$y(t,n,e)}))))})(e)})),this.handleFontFamilyChange(t,n)}async handleFontFamilyChange(e,t){const n=new Set,i=new Set;for(const[a,l]of t){const e=this.used.get(a);e||Mo();const t=e-l;0===t?(n.add(a),this.used.delete(a)):t>0?this.used.set(a,t):To(a)}for(const[a,l]of e)this.used.has(a)?this.used.set(a,l+this.used.get(a)):(this.used.set(a,l),i.add(a));if(!i.size&&!n.size)return;this.editor.model.changeWithoutHistory((e=>{const t=e.getValue();t.fontfaces||(t.fontfaces=[]);for(const i of n){const e=Ar(t.fontfaces,(e=>e.family===i));-1===e&&To(i),t.fontfaces.splice(e,1)}for(const n of i){Rr(t.fontfaces,(e=>e.family===n))&&To(n),t.fontfaces.push({family:n,src:`local("${n}")`,id:ri()})}}));const r=new By;this.fontProvideQuery&&this.fontProvideQuery.dispose(!0),this.fontProvideQuery=r;const o=[],s=[...i.values()].filter((e=>"system-ui"!==e));for(const a of s)o.push(this.resourceService.queryFontResource({family:a},r.token));(await Promise.all(o)).forEach((e=>{if(!e.length)return void console.error("404",s);const t=e[0],{family:n,src:i}=t;this.editor.model.changeWithoutHistory((e=>{const t=e.getValue();t.fontfaces||To();const r=Rr(t.fontfaces,(e=>e.family===n));r||To(n),r.src=i}))}))}},C(r,"ID","editor.contrib.fontface"),r);Yy=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Vy(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&jy(t,n,o),o})([zy(0,Ol),zy(1,Dy)],Yy),pm(Yy.ID,Yy);class Gy extends zo{constructor(e,t,n,i,r,o,s){super(),C(this,"_cloned"),C(this,"_mx"),C(this,"_container"),C(this,"_attached",!1),C(this,"_tasksAfterAttach",[]),this._target=e,this._props=t,this._fromRect=n,this._editor=i,this._moveHorizontalDisabled=r,this._moveVerticalDisabled=o,this._isInPositionFixedChain=s}render(e){const t=this._editor.view;this._cloned=this._target.cloneNode(!0),e.appendChild(this._cloned);const n=this._cloned.querySelector("web-widget");n&&n.remove(),this._cloned.removeAttribute("data-hide"),this._container=this._cloned.parentElement;const{scrolls:i}=t,r=this._isInPositionFixedChain?i.scrollX:0,o=this._isInPositionFixedChain?i.scrollY:0;this._mx=b_.translate(this._fromRect.mx||b_.Identity,{x:this._fromRect.left+r,y:this._fromRect.top+o});const s={position:"absolute","user-select":"none",top:"0px",left:"0px",width:Xi(this._fromRect.width),height:Xi(this._fromRect.height),transform:qi(this._mx),"transform-origin":"center center",margin:"0"};Object.assign(this._cloned.style,s),this._attached=!0,this._tasksAfterAttach.forEach((e=>e())),this._tasksAfterAttach.length=0}updateOffset(e,t){const n=()=>{const n=qi(b_.translate(this._mx,{x:this._moveHorizontalDisabled?0:e,y:this._moveVerticalDisabled?0:t}));Object.assign(this._cloned.style,{transform:n})};this._attached?n():this._tasksAfterAttach.push(n)}}class Xy extends zo{constructor(e){super(),this.prop=e}render(e){const t=xp((n=this.prop,()=>th(Uu,null,[n.map((e=>th(Zy,e,null)))])));var n;t.mount(e),this._register(jo((()=>Up(t.unmount))))}}function Jy(e){const t={width:"1px",background:"fuchsia",position:"absolute",top:"0px",left:"0px",transform:qi(b_.translate(b_.Identity,{x:e.left,y:e.top})),height:Xi(e.height),zIndex:3};return th("div",{style:t},null)}function Qy(e){const t={height:"1px",background:"fuchsia",position:"absolute",top:"0px",left:"0px",transform:qi(b_.translate(b_.Identity,{x:e.left,y:e.top})),width:Xi(e.width),zIndex:3};return th("div",{style:t},null)}function Zy(e){return Reflect.has(e,"width")?th(Qy,e,null):th(Jy,e,null)}class ew extends zo{constructor(e){super(),this.props=e}render(e){const t=xp((n=this.props,()=>th(Uu,null,[n.map((e=>th(S_,e,null)))])));var n;t.mount(e),this._register(jo((()=>Up(t.unmount))))}}class tw extends zo{constructor(e){super(),this.props=e}render(e){const t=xp((n=this.props,()=>{if(!n.show)return n.drop?th(rw,n.drop,null):null;const e=xd((()=>({position:"absolute",top:`${n.top}px`,width:`${n.width}px`,left:`${n.left}px`,height:"1px",background:"rgb(17,109,255)","box-shadow":"0px -2px 3px 0px rgb(0, 0,255)"}))),t=xd((()=>({position:"absolute",top:`${n.top}px`,width:"1px",left:`${n.left+n.width}px`,height:`${n.height}px`,background:"rgb(17,109,255)","box-shadow":"2px 0px 6px 0px rgb(0,0,255)"}))),i=xd((()=>({position:"absolute",top:`${n.top+n.height}px`,width:`${n.width}px`,left:`${n.left}px`,height:"1px",background:"rgb(17,109,255)","box-shadow":"0px 2px 6px 0px rgba(0,0,255,0.5)"}))),r=xd((()=>({position:"absolute",top:`${n.top}px`,width:"1px",left:`${n.left}px`,height:`${n.height}px`,background:"rgb(17,109,255)","box-shadow":"-2px 0px 6px 0px rgb(0,0,255)"})));return th(Uu,null,[th("div",{"data-name":"top",style:e.value},null),th("div",{"data-name":"right",style:t.value},null),th("div",{"data-name":"bottom",style:i.value},null),th("div",{"data-name":"left",style:r.value},null),!si(n.drop)&&th(rw,n.drop,null)])}));var n;t.mount(e),this._register(jo((()=>Up(t.unmount))))}}function nw(e){const t={position:"absolute",top:Xi(e.top),width:Xi(e.width),left:Xi(e.left),height:Xi(5),background:"rgb(17,109,255)",transform:"translate(-50%, -50%)"};return th("div",{style:t},null)}function iw(e){const t={position:"absolute",top:Xi(e.top),height:Xi(e.height),left:Xi(e.left),width:Xi(5),background:"rgb(17,109,255)",transform:"translate(-50%, -50%)"};return th("div",{style:t},null)}function rw(e){return Reflect.has(e,"width")?th(nw,e,null):th(iw,e,null)}zm.registerConfiguration({id:"dnd",order:1,title:"缩放相关的配置",type:"object",properties:{"dnd.maxMagneticEffectDistance":{type:"number",description:"拖拽吸附的生效距离",default:5}}});function ow(e,t,n,i){const r=Wi(i.gridTemplateRows),o=Wi(i.gridTemplateColumns),s=Ii(i.columnGap),a=Ii(i.rowGap),l=parseFloat(i.paddingTop),c=parseFloat(i.paddingLeft),d=[];for(let g=0,m=o.length,_=n.left;g<m;g++)0===g?c&&(_+=c):s&&(_+=s),d.push(_),_+=o[g],d.push(_);const u=[];for(let g=0,m=r.length,_=n.top;g<m;g++)0===g?l&&(_+=l):a&&(_+=a),u.push(_),_+=r[g],u.push(_);const h=u.slice(),p=d.slice();h[0]=n.top,h[h.length-1]=n.bottom,p[0]=n.left,p[p.length-1]=n.right;const f=Object.create(null);for(let g=0,m=r.length;g<m;g++){const e=2*g,n=h[e],i=h[e+1],r=h[e+2],o=si(r)?i:(i+r)/2;if(n<=t&&o>=t){f.row=g+1,f.top=u[e],f.bottom=u[e+1];break}h[e+1]=o,h[e+2]=o}for(let g=0,m=o.length;g<m;g++){const t=2*g,n=p[t],i=p[t+1],r=p[t+2],o=si(r)?i:(i+r)/2;if(n<=e&&e<=o){f.column=g+1,f.left=d[t],f.right=d[t+1];break}p[t+1]=o,p[t+2]=o}if(!f.row){f.row=r.length;const e=2*(f.row-1);f.top=u[e],f.bottom=u[e+1]}if(!f.column){f.column=o.length;const e=2*(f.column-1);f.left=d[e],f.right=d[e+1]}return f.width=f.right-f.left,f.height=f.bottom-f.top,{row:f.row,column:f.column,rect:f}}function sw(e,t){if(t.mx)return e;const n=Object.create(null);return n.top=Math.max(e.top,t.top),n.left=Math.max(e.left,t.left),n.bottom=Math.min(e.bottom,t.bottom),n.right=Math.min(e.right,t.right),n.width=n.right-n.left,n.height=n.bottom-n.top,n}zm.registerConfiguration({id:"zoom",order:2,title:"缩放相关的配置",type:"object",properties:{"zoom.initLogicWidth":{type:"number",description:"画布的初始宽度",default:1440},"zoom.minZoomLevel":{type:"number",description:"画布最小的缩放比例",default:.05},"zoom.maxZoomLevel":{type:"number",description:"画布最大的缩放比例",default:10},"zoom.minLogicWidth":{type:"number",description:"viewport logic width 的最小值",default:320},"zoom.maxLogicWidth":{type:"number",description:"viewport logic width 的最大值",default:1e4}}});class aw{constructor(e,t,n,i){C(this,"fromX"),C(this,"fromY"),C(this,"targetIds"),C(this,"targetsInfoMap",new Map),C(this,"parentsInfoMap",new Map),C(this,"disabledSet",new Set),C(this,"fromParent"),C(this,"toX",null),C(this,"toY",null),C(this,"startTime"),C(this,"endTime",null),C(this,"currentRectsMap",new Map),C(this,"media"),C(this,"currentAttachParentId"),C(this,"currentDockingStatusMap",new Map),C(this,"isAutoDockDisabled",!0),this.editor=n,this.configurationService=i,this.targetIds=t,this.fromX=e.event.posX,this.fromY=e.event.posY;const r=n.model,o=n.view;if(this.startTime=Date.now(),this.media=o.getViewport(),this.targetIds.forEach((e=>{const t=o.getElementRectById(e),i=r.getParentNodeOfId(e);if(!i)throw new Error("404");const s=i.id,a=this.getParentInfo(s).computedStyle,l=o.getComputedStyleOfId(e);let c=0,d=0;if("grid"===a.display){const{rowStart:e,columnStart:t}=$i(l);c=e,d=t}const u=bi(l.marginTop),h=bi(l.marginBottom),p=r.getNodeById(e),f=ho(p),g=co(p),m=X_(e,n);this.targetsInfoMap.set(e,{parent:i.id,rect:t,margin:{top:u,bottom:h},grid:{row:c,column:d},isInPositionFixedChain:G_(e,n),isSelfPositionFixed:m,moveVerticalDisabled:g,moveHorizontalDisabled:f&&m||g,computedStyle:l})})),1===this.parentsInfoMap.size){const e=this.parentsInfoMap.keys().next().value;this.fromParent=this.parentsInfoMap.get(e).node,this.currentAttachParentId=e}}get deltaX(){return si(this.toX)?0:this.toX-this.fromX}get deltaY(){return si(this.toY)?0:this.toY-this.fromY}get isFromSingleParent(){return!!this.fromParent}isChanged(){return this.toY&&this.toX&&!(Ci(this.toX,this.fromY)&&Ci(this.toY,this.fromY))}isMagneticNearly(e,t){return Ci(e,t,this.configurationService.getValue("dnd.maxMagneticEffectDistance"))}shouldHandleDragAction(){return this.endTime&&this.endTime-this.startTime>100}get isParentChanged(){return this.isFromSingleParent&&this.currentAttachParentId!==this.fromParent.id}_checkAttachContainer(){if(!this.isFromSingleParent)return;if(this.targetsInfoMap.get(this.targetIds[0]).isSelfPositionFixed)return void(this.currentAttachParentId="root");const e=this.editor.model,t=this.editor.view,n=t.hitTest(this.toX,this.toY),i=e.queryNodes((e=>fo(e)&&n.indexOf(e.id)>-1&&!this.targetIds.includes(e.id))).sort(((e,t)=>n.indexOf(e.id)-n.indexOf(t.id))).filter((t=>!this.targetIds.some((n=>e.isAncestorNodeOfId(n,t.id)))));if(i.length)this.currentAttachParentId=i[0].id;else{const n=e.queryNodes((e=>co(e)));n.length||To();const i=n[0],r=t.getElementRectById(i.id);let{top:o,right:s,left:a,bottom:l}=r;const c=t.getComputedStyleOfId(i.id);o+=bi(c.paddingTop),s-=bi(c.paddingRight),l-=bi(c.paddingBottom),a+=bi(c.paddingLeft);const d=a<=this.toX&&s>=this.toX,u=o<=this.toY&&l>=this.toY;d&&u&&To()}}moveTo(e){this.endTime=Date.now();const t=e.event.posX,n=e.event.posY;if(this.toX===t&&this.toY===n)return;this.updateCurrentRectsMap(t,n),this.toX=t,this.toY=n,this._checkAttachContainer();const[i,r,o]=this._checkDockAndAttach();return{reference:o,dock:i,attach:r}}updateCurrentRectsMap(e,t){const{scrolls:n}=this.editor.view;this.targetIds.forEach((i=>{const{rect:r,moveHorizontalDisabled:o,moveVerticalDisabled:s,isInPositionFixedChain:a}=this.targetsInfoMap.get(i);if(!this.disabledSet.has(i)){const l=o?this.fromX:e,c=s?this.fromY:t,d=l-this.fromX,u=c-this.fromY,h=a?n.scrollX:0,p=a?n.scrollY:0;let f=l_(r,d,u);f=l_(f,h,p),this.currentRectsMap.set(i,f)}}))}_calcMagneticEffect(e,t,n){const i=n?bi(n.paddingTop):0,r=n?bi(n.paddingRight):0,o=n?bi(n.paddingBottom):0,s=n?bi(n.paddingLeft):0,a=(e.left+e.right)/2,l=(e.top+e.bottom)/2,c=(t.left+s+t.right-r)/2,d=(t.top+s+t.bottom-o)/2;let u=!1,h=!1,p=null,f=null,g=0,m=0;if(!u&&this.isMagneticNearly(a,c)){const e=c-a;p={top:t.top,left:c,height:t.height},u=!0,g=e}if(!h&&this.isMagneticNearly(l,d)){const e=d-l;f={top:d,left:t.left,width:t.width},m=e,h=!0}const _=t.top+i-e.top;this.isMagneticNearly(_,0)&&(f={top:t.top+i,left:t.left,width:t.width},m=_,h=!0);const v=t.left+s-e.left;if(!u&&this.isMagneticNearly(v,0)&&(p={top:t.top,left:t.left+s,height:t.height},g=v,u=!0),!h){const n=t.bottom-o-e.bottom;this.isMagneticNearly(n,0)&&(f={top:t.bottom-o,left:t.left,width:t.width},m=n,h=!0)}if(!u){const n=t.right-r-e.right;this.isMagneticNearly(n,0)&&(p={top:t.top,left:t.right-r,height:t.height},g=n,u=!0)}return{x:{able:u,offset:g,line:p},y:{able:h,offset:m,line:f}}}_checkMagneticEffect(e,t,n){if(e.length<=0)return[];const i=[],r=e.filter((({x:e,y:t})=>e.able||t.able)).map((({x:e,y:t})=>{let n=0;return e.able&&t.able?n=Math.min(Math.abs(e.offset),Math.abs(t.offset)):e.able?n=Math.abs(Math.abs(e.offset)):t.able&&(n=Math.abs(Math.abs(t.offset))),{x:e,y:t,minOffsetAbs:n}})).sort(((e,t)=>e.minOffsetAbs>t.minOffsetAbs?-1:1)),[o]=r;if(o){const{x:e,y:r}=o,s=e.able,a=r.able;(s||a)&&(s&&(this.toX=t+e.offset,i.push(e.line)),a&&(this.toY=n+r.offset,i.push(r.line)),this.updateCurrentRectsMap(this.toX,this.toY))}return i}_checkDockAndAttach(){const e=this.editor.model,t=this.editor.view,n=new Map,i=new Map,r=[];let o;const s=[];this.disabledSet.clear();const{scrolls:a}=this.editor.view;this.targetIds.forEach((e=>{const{parent:t}=this.targetsInfoMap.get(e),n=this.isFromSingleParent?this.currentAttachParentId:t,{computedStyle:r,style:l}=this.getParentInfo(n),c="root"===n;let d=h(c?":viewport":n);const u=c||"fixed"===r.position;d=l_(d,u?a.scrollX:0,u?a.scrollY:0),this.isFromSingleParent&&!o&&(o={width:d.width,height:d.height,top:d.top,left:d.left,show:this.isParentChanged,drop:null});const p=wr(l.attrs);p&&!this.isFromSingleParent&&this.disabledSet.add(e);const f=r.flexDirection||"row",g=p&&"column"===f,m=p&&"row"===f;let _=d;if(!p){const{rect:t}=ow(this.toX,this.toY,d,r);_=sw(t,d);const n=this.getCurrentRect(e),i=this._calcMagneticEffect(n,_,_===d?r:null);s.push(i)}i.set(e,{containerForceLayout:p,autoLayoutDirection:f,layoutItemVertical:g,layoutItemHorizontal:m})}));const l=this._checkMagneticEffect(s,this.toX,this.toY),c=t.getViewport(),{scale:d}=c,u=b_.scale(b_.Identity,{x:1/d,y:1/d});return this.targetIds.forEach((t=>{const n=e.getMatchedStyle(t,this.media.logicWidth),{parent:s}=this.targetsInfoMap.get(t),l=this.isFromSingleParent?this.currentAttachParentId:s,{computedStyle:d}=this.getParentInfo(l),{containerForceLayout:p,layoutItemVertical:f,layoutItemHorizontal:g}=i.get(t),m=!!this.fromParent&&this.fromParent.id!==this.currentAttachParentId,_=Object.create(null),v=[],y="root"===l;let w=h(y?":viewport":l);const b=y||"fixed"===d.position;w=l_(w,b?a.scrollX:0,b?a.scrollY:0);const x=this.currentRectsMap.get(t);let C=this.isParentChanged,k=!1;const E=br(n.attrs);if(!p){const e=lw({x:this.toX,y:this.toY},n.attrs,w,d);if(e.row&&e.column){const{row:n,column:i}=e,{grid:{row:r,column:o}}=this.getTargetInfo(t);E||(k=r!==n||o!==i,e.gridChange=k),C=C||k}e.containerRect&&(w=e.containerRect),Object.assign(_,e);const{dockStatus:i,dockProps:r}=cw(x,n.attrs,w,d,c,this.isAutoDockDisabled,C);Object.assign(_,i),v.push(...r)}const S=(x.left+x.right)/2,I=(x.top+x.bottom)/2,O=(w.left+w.right)/2,T=(w.top+w.bottom)/2;if(p&&this.isFromSingleParent)if(m){if(f){const t=Object.create(null);o.drop=t,o.drop.width=w.width,o.drop.left=O;const n=e.getChildrenNodesOfId(l);if(n.length){const e=[w.top],t=[w.top];for(let i=0,r=n.length;i<r;i++){const r=n[i],s=h(r.id),a=(s.top+s.bottom)/2;if(e[i]<this.toY&&a>=this.toY){o.drop.top=(t[i]+s.top)/2,_.before=r.id;break}e.push(a),t.push(s.bottom)}si(o.drop.top)&&(o.drop.top=(w.bottom+t[t.length-1])/2)}else o.drop.top=w.top+x.height/2}if(g){const t=Object.create(null);o.drop=t,o.drop.height=w.height,o.drop.top=T;const n=e.getChildrenNodesOfId(this.currentAttachParentId);if(n.length){const e=[w.left],t=[w.left];for(let i=0,r=n.length;i<r;i++){const r=n[i],s=h(r.id),a=(s.left+s.right)/2;if(e[i]<this.toX&&a>=this.toX){o.drop.left=(t[i]+s.left)/2,_.before=r.id;break}e.push(a),t.push(s.right)}si(o.drop.left)&&(o.drop.left=(w.right+t[t.length-1])/2)}else o.drop.left=w.left+x.width/2}}else{const n=e.getChildrenNodesOfId(l),i=n.findIndex((e=>e.id===t)),r=n.length;let s,a=-1;if(_.reorder=!1,f){const e=0===i?null:n[i-1],t=i===r-1?null:n[i+1],l=e?h(e.id):null,c=t?h(t.id):null,d=l?l.bottom:w.top,u=c?c.top:w.bottom,p=d>=this.toY,f=this.toY>=u;if(e&&t&&(p||f)||e&&!t&&p||!e&&t&&f){_.reorder=!0;const e=[w.top],t=[w.top];let l;for(let o=0;o<r;o++){if(o===i)continue;const r=n[o],c=h(r.id),d=(c.top+c.bottom)/2;if(e[e.length-1]<I&&d>=I){l=Object.create(null),l.top=(t[t.length-1]+c.top)/2,s=r.id,a=o;break}e.push(d),t.push(c.bottom)}si(null==l?void 0:l.top)&&(l=Object.create(null),l.top=(w.bottom+t[t.length-1])/2,a=r),(i===a-1||a===r&&i===r-1)&&(l=null),l&&(l.left=O,l.width=w.width,o.drop=l,_.before=s,_.reorder=!0)}}if(g){const e=0===i?null:n[i-1],t=i===r-1?null:n[i+1],l=e?h(e.id):null,c=t?h(t.id):null,d=l?l.right:w.left,u=c?c.left:w.right,p=d>=this.toX,f=this.toX>=u;if(e&&t&&(p||f)||e&&!t&&p||!e&&t&&f){_.reorder=!0;const e=[w.left],t=[w.left];let l;for(let o=0;o<r;o++){if(o===i)continue;const r=n[o],c=h(r.id),d=(c.left+c.right)/2;if(e[e.length-1]<S&&d>=S){l=Object.create(null),l.left=(t[t.length-1]+c.left)/2,s=r.id,a=o;break}e.push(d),t.push(c.right)}si(null==l?void 0:l.left)&&(l=Object.create(null),l.left=(w.right+t[t.length-1])/2,a=r),(i===a-1||a===r&&i===r-1)&&(l=null),l&&(l.top=T,l.height=w.height,o.drop=l,_.before=s,_.reorder=!0)}}}this.currentDockingStatusMap.set(t,_),v.forEach((e=>{e.vmx=u,e.fixed=!1})),r.push(...v)})),[r,o,l];function h(e){let i=n.get(e);return i||(i=t.getElementRectById(e),n.set(e,i),i)}}getParentInfo(e){let t=this.parentsInfoMap.get(e);if(!t){const{view:n,model:i}=this.editor;t={node:i.getNodeById(e),computedStyle:n.getComputedStyleOfId(e),style:i.getMatchedStyle(e,this.media.logicWidth)},this.parentsInfoMap.set(e,t)}return t}getCurrentRect(e){const t=this.currentRectsMap.get(e);if(!t)throw new Error("404");return t}getTargetInfo(e){const t=this.targetsInfoMap.get(e);if(!t)throw new Error("404");return t}getDockStatus(e){return this.currentDockingStatusMap.get(e)}}function lw(e,t,n,i){const r={},{x:o,y:s}=e,a=br(t),l=wr(i);if(a)r.row=1,r.column=1,r.containerRect=n;else if(!l){const{row:e,column:t,rect:a}=ow(o,s,n,i);n=sw(a,n),r.row=e,r.column=t,r.containerRect=n}return r}function cw(e,t,n,i,r,o=!0,s=!1){const a=Object.create(null),l=br(t),c=[],d=(n.left+n.right)/2,u=(n.top+n.bottom)/2,h=(e.left+e.right)/2,p=(e.top+e.bottom)/2,f=yr(t,mr.left),g=yr(t,mr.right),m=(e,i)=>iv(i,e,tr(t[e])||ji.px,n,r);let _,v;const y=f&&g;if(y?(_=!0,v=!0):l?(_=o?f:Math.abs(n.left-e.left)<Math.abs(e.left-d),v=o?g:!_):(_=o?f:Math.abs(n.left-e.left)<Math.abs(e.left-d),v=o?g:Math.abs(n.right-e.right)<Math.abs(e.right-d)),_){const t=e.left-n.left,i=m("margin-left",t);Ci(t,0,5)||c.push({top:p,left:t>0?n.left:e.left,width:Math.abs(t),text:rv(i)}),a.left={value:i}}if(!_&&v||y){const t=n.right-e.right,i=m("margin-right",t);Ci(t,0,5)||c.push({top:p,left:t>0?e.right:n.right,width:Math.abs(t),text:rv(i)}),a.right={value:i}}if(!_&&!v){const e=h-d;a.centerX={value:m("margin-left",2*e)}}let w,b;const x=yr(t,mr.top),C=yr(t,mr.bottom),k=x&&C;if(k?(w=!0,b=!0):l?(w=o?x:Math.abs(p-n.top)<Math.abs(p-n.bottom),b=o?C:!w):(w=o?x:1===a.row&&1===a.column&&"fixed"!==i.position||Math.abs(n.top-n.top)<Math.abs(n.top-u),b=o?C:Math.abs(n.bottom-n.bottom)<Math.abs(n.bottom-u)),w){const t=e.top-n.top,i=m("margin-top",t);Ci(t,0,5)||c.push({top:t>0?n.top:e.top,left:h,height:Math.abs(t),text:rv(i)}),a.top={value:i}}if(!w&&b||k){const t=n.bottom-e.bottom,i=m("margin-bottom",t);Ci(t,0,5)||c.push({top:t>0?e.bottom:n.bottom,left:h,height:Math.abs(t),text:rv(i)}),a.bottom={value:i}}if(!w&&!b){const e=p-u,t=2;a.centerY={value:m("margin-top",e*t)}}return{dockStatus:a,dockProps:c}}const dw=(e,t,n,i,r,o)=>{const s=Object.create(null),a="flex"===i.display,l="grid"===i.display,c=(e,i)=>iv(i,e,tr(t[e])||ji.px,n,o);if(a&&"column"!==i.flexDirection)throw new Error("500");if(!a&&!l)throw new Error("500");if(l&&(n=r.containerRect),Qi.includes(t.width)||(s.width=c("width",e.width)),Qi.includes(t.height)||(s.height=c("height",e.height)),a&&(s["margin-top"]=c("margin-top",0),s["margin-right"]=c("margin-right",0),s["margin-bottom"]=c("margin-bottom",0),s["margin-left"]=c("margin-left",0),s["align-self"]="center",s["justify-self"]="center"),l){r.left&&r.right?(s["margin-left"]=r.left.value,s["margin-right"]=r.right.value,s["justify-self"]="stretch",s.width="auto"):r.left?(s["margin-left"]=r.left.value,s["margin-right"]=c("margin-right",0),s["justify-self"]="start"):r.right&&(s["margin-left"]=c("margin-left",0),s["margin-right"]=r.right.value,s["justify-self"]="end"),r.centerX&&(s["margin-left"]=r.centerX.value,s["margin-right"]=c("margin-right",0),s["justify-self"]="center"),r.top&&r.bottom?(s["margin-top"]=r.top.value,s["margin-bottom"]=r.bottom.value,s["align-self"]="stretch",s.height="auto"):r.top?(s["margin-bottom"]=c("margin-bottom",0),s["margin-top"]=r.top.value,s["align-self"]="start"):r.bottom&&(s["margin-top"]=c("margin-top",0),s["margin-bottom"]=r.bottom.value,s["align-self"]="end"),r.centerY&&(s["margin-top"]=r.centerY.value,s["margin-bottom"]=c("margin-bottom",0),s["align-self"]="center");const{row:e,column:t}=r;s["grid-column-start"]=`${t}`,s["grid-column-end"]=`${t+1}`,s["grid-row-start"]=`${e}`,s["grid-row-end"]=`${e+1}`}return s};var uw=Object.defineProperty,hw=Object.getOwnPropertyDescriptor,pw=(e,t)=>(n,i)=>t(n,i,e);let fw=(o=class extends zo{constructor(e,t,n){super(),C(this,"_dragRequest",null),C(this,"_targetWidgets",[]),C(this,"_targetWidgetProps"),C(this,"_magneticLinesWidget"),C(this,"_magneticLinesProps"),C(this,"_dockLineWidget"),C(this,"_dockLineWidgetProps"),C(this,"_attachWidget"),C(this,"_attachWidgetProps"),C(this,"events",new Vo),this._editor=e,this.contextKeyService=t,this.configurationService=n,this._targetWidgetProps=od(Object.create(null)),this._magneticLinesProps=od([]),this._dockLineWidgetProps=od([]),this._attachWidgetProps=od(Object.create(null)),this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this._register(this.events),this.handleViewModeChange()}handleContextKeyChangeEvent(e){e.affectsSome(new Set([bm.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===gm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const e=this._editor.view;this.events.add(e.onMouseDragStart(this._onDragStart.bind(this))),this.events.add(e.onMouseDrag(this._onDrag.bind(this))),this.events.add(e.onMouseDrop(this._onDrop.bind(this))),this.events.add(e.onMouseDropCanceled(this._onDropCanceled.bind(this)))}_onDragStart(e){const{event:t}=e;if(t.shiftKey)return;const{viewModel:n,model:i,view:r}=this._editor,{targetPath:o}=e.target,s=o[o.length-1];let a,{selection:l}=n;if(d_.isChildOfCanvas(o)?a=s.fingerprint:d_.isDraggableWidget(o)&&"dragMove"===s.fingerprint&&(a=s.detail),!a)return;const c=!(t.ctrlKey||t.metaKey),[d]=Oy(this._editor,a,c);if(d&&!n.isIdSelected(d)&&(c&&!l.some((e=>{const t=i.getNodeById(e);return t&&!co(t)&&!ho(t)&&i.isAncestorNodeOfId(e,d)}))||!c)&&(this._editor.recordSelectionChanges((()=>{n.setSelectionById(d)})),l=[d]),l.length<=0)return;if(!this._canStartDragHandling())return;l.some((e=>{const t=i.getParentNodeOfId(e);if(c_.shouldNotBeSelected(e))return!0;if(co(t))return!0;const n="fixed"===r.getComputedStyleOfId(e).position;return!(!ho(i.getNodeById(e))||n)}))||(this._dragRequest=new aw(e,l,this._editor,this.configurationService),Object.assign(this._targetWidgetProps,{fromX:e.event.posX,fromY:e.event.posY}))}_canStartDragHandling(){const e=this.contextKeyService.getContextKeyValue(bm.editingMode.key);return!this.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key)&&(e===fm.Focus||e===fm.None)}_onDrag(e){if(!this._dragRequest)return;const t=this._dragRequest.moveTo(e);if(!t)return;const{reference:n,dock:i,attach:r}=t;if(this._magneticLinesProps.length=0,this._magneticLinesProps.push(...n),this._dockLineWidgetProps.length=0,this._dockLineWidgetProps.push(...i),r?Object.assign(this._attachWidgetProps,r,{show:!0}):this._attachWidgetProps.show=!1,this._dragRequest.shouldHandleDragAction()){this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.DragMove&&this.contextKeyService.setContext(bm.editingMode.key,fm.DragMove),this._targetWidgets.length<=0&&this._showHints();const{targetIds:e,disabledSet:t,deltaX:n,deltaY:i}=this._dragRequest;this._targetWidgets.forEach(((r,o)=>{t.has(e[o])||r.updateOffset(n,i)})),this._showDocks(),this.updateParentOutline(),this._showAttach()}}_isDragMoveState(){return this.contextKeyService.getContextKeyValue(bm.editingMode.key)===fm.DragMove}_onDrop(e){if(this._dragRequest){if(this._isDragMoveState()){this._dragRequest.shouldHandleDragAction()&&this._dragRequest.isChanged()&&this._commit();const e=this._dragRequest.targetIds;this.toggleMultiNodesVisibility(e,!0),Up((()=>{this._isDragMoveState()&&this.contextKeyService.setContext(bm.editingMode.key,fm.Focus)}))}this._hideDocks(),this._hideAttach(),this._hideHints(),this._dragRequest=null}}_onDropCanceled(){if(this._dragRequest){if(this.contextKeyService.getContextKeyValue(bm.editingMode.key)===fm.DragMove){this.contextKeyService.setContext(bm.editingMode.key,fm.None),this._editor.checkout();const e=this._dragRequest.targetIds;this.toggleMultiNodesVisibility(e,!0)}this._hideDocks(),this._hideAttach(),this._hideHints(),this._dragRequest=null}}_commit(){const{_dragRequest:e}=this,{view:t}=this._editor,{currentAttachParentId:n,isParentChanged:i,isFromSingleParent:r}=e;this._editor.transform((()=>{e.targetIds.forEach((o=>{const s=e.getDockStatus(o),a=i||s.gridChange,{parent:l,moveHorizontalDisabled:c,moveVerticalDisabled:d}=e.getTargetInfo(o);if(c&&d)return;const u=r?n:l,h=wr(t.getComputedStyleOfId(u));a?h&&i?this._commitCaseInsertInAutoLayout(o,u):this._commitCaseOutOfParent(o,u):s.reorder?this._commitCaseReorderInsideParent(o):!h&&this._commitCaseInsideParent(o)}))}))}_commitCaseOutOfParent(e,t){const n=this._editor.model,i=this._editor.view,r=this._dragRequest.getCurrentRect(e),o=i.getElementRectById(t),s=n.getParentNodeOfId(e),a=i.getViewport(),l=n.getMatchedStyle(e,a.logicWidth),c=l.attrs,d=i.getComputedStyleOfId(t),u="flex"===d.display,h=this._dragRequest.getDockStatus(e),p={};wr(d)||(l.getAttr("width")===zi.auto&&Reflect.set(c,"width",Xi(r.width)),l.getAttr("height")===zi.auto&&Reflect.set(c,"height",Xi(r.height)),Object.assign(p,{"flex-grow":"","flex-basis":"","align-self":""}));const f=dw(r,c,o,d,h,i.getViewport());Object.assign(p,f),s.id!==this._dragRequest.currentAttachParentId&&n.reparentNode(e,t,u?h.before:null),n.updateStyle(e,p,a.logicWidth)}_commitCaseInsideParent(e){const t=this._editor.model,n=this._editor.view,i=n.getViewport(),{rect:r,isSelfPositionFixed:o}=this._dragRequest.getTargetInfo(e),s=this._dragRequest.getCurrentRect(e).top-r.top,a=t.getParentNodeOfId(e),l=Object.create(null),c=n.getComputedStyleOfId(e),d=t.getMatchedStyle(e,i.logicWidth),u=n.getComputedStyleOfId(a.id),h="flex"===u.display,p=n.getElementRectById(a.id),f=(e,t)=>iv(t,e,tr(d.getAttr(e))||ji.px,p,i),g=this._dragRequest.getDockStatus(e);if(g.left&&!g.right&&(l["margin-left"]=g.left.value,l["margin-right"]="",o?(l.right="",l.left=f("left",0)):h?l["align-self"]="flex-start":l["justify-self"]="start"),g.right&&!g.left&&(l["margin-left"]="",l["margin-right"]=g.right.value,o?(l.left="",l.right=f("right",0)):h?l["align-self"]="flex-end":l["justify-self"]="end"),g.left&&g.right&&(l["margin-left"]=g.left.value,l["margin-right"]=g.right.value,o?(l.right=f("left",0),l.left=f("right",0)):h?l["align-self"]="stretch":l["justify-self"]="stretch"),g.centerX&&(o&&To(),l["margin-left"]=g.centerX.value,l["margin-right"]="",h?l["align-self"]="center":l["justify-self"]="center"),"grid"===u.display)g.top&&!g.bottom&&(l["margin-bottom"]="",l["margin-top"]=g.top.value,l["align-self"]="start"),g.bottom&&!g.top&&(l["margin-top"]="",l["margin-bottom"]=g.bottom.value,l["align-self"]="end"),g.centerY&&(l["margin-top"]=g.centerY.value,l["margin-bottom"]="",l["align-self"]="center"),g.top&&g.bottom&&(l["margin-top"]=g.top.value,l["margin-bottom"]=g.bottom.value,l["align-self"]="stretch");else if(h&&"column"===u.flexDirection){if(0!==s){const e=bi(c.marginTop)+s;l["margin-top"]=f("margin-top",e);const t=bi(c.marginBottom)-s;l["margin-bottom"]=f("margin-top",t)}}else o?(g.top&&!g.bottom&&(l["margin-bottom"]="",l.bottom="",l.top=f("top",0),l["margin-top"]=g.top.value),g.bottom&&!g.top&&(l["margin-top"]="",l.top="",l.bottom=f("bottom",0),l["margin-bottom"]=g.bottom.value),g.top&&g.bottom&&(l.bottom=f("bottom",0),l.top=f("top",0),l["margin-top"]=g.top.value,l["margin-bottom"]=g.bottom.value)):Mo();t.updateStyle(e,l,i.logicWidth)}_commitCaseReorderInsideParent(e){const t=this._editor.model,n=this._editor.view,i=Object.create(null),r=n.getViewport(),o=t.getMatchedStyle(e,r.logicWidth),s=(e,t)=>`${t}${tr(o[e])||ji.px}`;i["margin-top"]=s("margin-top",0),i["margin-bottom"]=s("margin-bottom",0);const a=this._dragRequest.getDockStatus(e),{before:l}=a;a.left&&(i["margin-left"]=a.left.value,i["margin-right"]="",i["align-self"]="flex-start"),a.right&&!a.left&&(i["margin-left"]="",i["margin-right"]=a.right.value,i["align-self"]="flex-end"),a.centerX&&(i["margin-left"]=a.centerX.value,i["margin-right"]="",i["align-self"]="center"),t.updateStyle(e,i,r.logicWidth),t.reorderNode(e,l)}_commitCaseInsertInAutoLayout(e,t){const{_dragRequest:n,_editor:i}=this,{model:r,view:o}=i,s=o.getViewport(),a=n.getCurrentRect(e),l=r.getNodeById(t),c=r.getMatchedStyle(e,s.logicWidth),d=c.attrs,u=r.getMatchedStyle(t,s.logicWidth),h=u.getAttr("width"),p=u.getAttr("height");h===zi.fitContent&&tr(c.getAttr("width"))===ji["%"]&&Reflect.set(d,"width",Xi(a.width)),p===zi.fitContent&&tr(c.getAttr("height"))===ji["%"]&&Reflect.set(d,"height",Xi(a.height));const f=o.createStyleFromHitPosition(a,l,d),g=n.getDockStatus(e);r.reparentNode(e,t,(null==g?void 0:g.before)||null),r.updateStyle(e,f,s.logicWidth)}_showHints(){const{view:e,model:t}=this._editor,n=this._dragRequest;this._targetWidgets=[];const i=n.targetIds;i.slice().sort(((e,n)=>{const i=t.getAncestorNodesOfId(e).map((e=>e.id)).concat(e),r=t.getAncestorNodesOfId(n).map((e=>e.id)).concat(n);let o=1;const s=Math.max(i.length,r.length);for(let a=0;a<s;a++){const e=i[a],n=r[a];if(e!==n){if(n&&e){const i=t.getNodeById(e),r=t.getNodeById(n);o=Is(i.order,r.order)}else console.warn("Unexpected",e,n);break}}return o})).forEach(((t,i)=>{const r=e.getElementById(t),{rect:o,moveHorizontalDisabled:s,moveVerticalDisabled:a,isInPositionFixedChain:l}=n.getTargetInfo(t);this._targetWidgets.push(new Gy(r,this._targetWidgetProps,o,this._editor,s,a,l)),e.addContentWidget(this._targetWidgets[i],Do.High,!1)})),this._magneticLinesWidget=new Xy(this._magneticLinesProps),e.addContentWidget(this._magneticLinesWidget,Do.Medium,!1),this.toggleMultiNodesVisibility(i,!1)}_hideHints(){this._targetWidgets.length>=0&&(this._targetWidgets.forEach((e=>{this._editor.view.removeContentWidget(e)})),this._targetWidgets=[]),this._magneticLinesWidget&&(this._editor.view.removeContentWidget(this._magneticLinesWidget),this._magneticLinesWidget=null)}updateParentOutline(){const{targetIds:e,isFromSingleParent:t}=this._dragRequest,n=this._editor.model,i=this._editor.view,r=[];e.forEach((e=>{const o=n.getNodeById(e),s=this._dragRequest.getCurrentRect(e);let a,l;const c=this._dragRequest.getTargetInfo(e),d=t?this._dragRequest.currentAttachParentId:c.parent,u="root"===d,h=i.getElementRectById(u?":viewport":d),p=n.getNodeById(d);if(!p)throw new Error("500");const f=getComputedStyle(i.getElementById(p.id));if("flex"===f.display&&(l=p.id),l){a={rect:l===o.id?s:i.getElementRectById(l),clips:[]};const t=n.getChildrenNodesOfId(l);for(const n of t){const t=n.id===e?s:i.getElementRectById(n.id);a.clips.push(t)}}let g;if(!a&&"grid"===f.display){g={rect:i.getElementRectById(p.id),rows:Wi(f.gridTemplateRows),columns:Wi(f.gridTemplateColumns),columnGap:Ii(f.columnGap),rowGap:Ii(f.rowGap),paddingTop:parseFloat(f.paddingTop),paddingRight:parseFloat(f.paddingRight),paddingBottom:parseFloat(f.paddingBottom),paddingLeft:parseFloat(f.paddingLeft)}}const m={top:h.top,left:h.left,width:h.width,height:h.height,paddingTop:parseFloat(f.paddingTop),paddingRight:parseFloat(f.paddingRight),paddingBottom:parseFloat(f.paddingBottom),paddingLeft:parseFloat(f.paddingLeft)},_={left:s.left,top:s.top,width:s.width,height:s.height,show:!1,flex:a,grid:g,parent:void 0,padding:m};r.push(_)})),this._editor.view.updateOutline((e=>{e.length=0,e.push(...r)}))}_showDocks(){this._dockLineWidget||(this._dockLineWidget=new ew(this._dockLineWidgetProps),this._editor.view.addOuterWidget(this._dockLineWidget,Do.Low))}_hideDocks(){this._dockLineWidget&&(this._editor.view.removeOuterWidget(this._dockLineWidget),this._dockLineWidget=null)}_showAttach(){this._attachWidget||(this._attachWidget=new tw(this._attachWidgetProps),this._editor.view.addOuterWidget(this._attachWidget,Do.Low))}_hideAttach(){this._attachWidget&&(this._editor.view.removeOuterWidget(this._attachWidget),this._attachWidget=null)}toggleMultiNodesVisibility(e,t){const{viewModel:n}=this._editor;e.forEach((e=>{n.toggleVisibility(e,t)}))}},C(o,"ID","editor.contrib.dragMove"),o);fw=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?hw(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&uw(t,n,o),o})([pw(0,Ol),pw(1,Lf),pw(2,Wm)],fw),pm(fw.ID,fw);function gw(e){this.content=e}gw.prototype={constructor:gw,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,r=i.find(e),o=i.content.slice();return-1==r?o.push(n||e,t):(o[r+1]=t,n&&(o[r]=n)),new gw(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new gw(n)},addToStart:function(e,t){return new gw([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new gw(n)},addBefore:function(e,t,n){var i=this.remove(t),r=i.content.slice(),o=i.find(e);return r.splice(-1==o?r.length:o,0,t,n),new gw(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=gw.from(e)).size?new gw(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=gw.from(e)).size?new gw(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=gw.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},gw.from=function(e){if(e instanceof gw)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new gw(t)};var mw=gw;function _w(e,t,n){for(var i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;var r=e.child(i),o=t.child(i);if(r!=o){if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(var s=0;r.text[s]==o.text[s];s++)n++;return n}if(r.content.size||o.content.size){var a=_w(r.content,o.content,n+1);if(null!=a)return a}n+=r.nodeSize}else n+=r.nodeSize}}function vw(e,t,n,i){for(var r=e.childCount,o=t.childCount;;){if(0==r||0==o)return r==o?null:{a:n,b:i};var s=e.child(--r),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:i};if(s.isText&&s.text!=a.text){for(var c=0,d=Math.min(s.text.length,a.text.length);c<d&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(s.content.size||a.content.size){var u=vw(s.content,a.content,n-1,i-1);if(u)return u}n-=l,i-=l}else n-=l,i-=l}}var yw=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},ww={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};yw.prototype.nodesBetween=function(e,t,n,i,r){void 0===i&&(i=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,i+s,r,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,i+c)}s=l}},yw.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},yw.prototype.textBetween=function(e,t,n,i){var r="",o=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&i?(r+="function"==typeof i?i(s):i,o=!n):!o&&s.isBlock&&(r+=n,o=!0)}),0),r},yw.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,i=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)i.push(e.content[r]);return new yw(i,this.size+e.size)},yw.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],i=0;if(t>e)for(var r=0,o=0;o<t;r++){var s=this.content[r],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),i+=s.nodeSize),o=a}return new yw(n,i)},yw.prototype.cutByIndex=function(e,t){return e==t?yw.empty:0==e&&t==this.content.length?this:new yw(this.content.slice(e,t))},yw.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var i=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new yw(i,r)},yw.prototype.addToStart=function(e){return new yw([e].concat(this.content),this.size+e.nodeSize)},yw.prototype.addToEnd=function(e){return new yw(this.content.concat(e),this.size+e.nodeSize)},yw.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},ww.firstChild.get=function(){return this.content.length?this.content[0]:null},ww.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},ww.childCount.get=function(){return this.content.length},yw.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},yw.prototype.maybeChild=function(e){return this.content[e]},yw.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var i=this.content[t];e(i,n,t),n+=i.nodeSize}},yw.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),_w(this,e,t)},yw.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),vw(this,e,t,n)},yw.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return xw(0,e);if(e==this.size)return xw(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,i=0;;n++){var r=i+this.child(n).nodeSize;if(r>=e)return r==e||t>0?xw(n+1,r):xw(n,i);i=r}},yw.prototype.toString=function(){return"<"+this.toStringInner()+">"},yw.prototype.toStringInner=function(){return this.content.join(", ")},yw.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},yw.fromJSON=function(e,t){if(!t)return yw.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new yw(t.map(e.nodeFromJSON))},yw.fromArray=function(e){if(!e.length)return yw.empty;for(var t,n=0,i=0;i<e.length;i++){var r=e[i];n+=r.nodeSize,i&&r.isText&&e[i-1].sameMarkup(r)?(t||(t=e.slice(0,i)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new yw(t||e,n)},yw.from=function(e){if(!e)return yw.empty;if(e instanceof yw)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new yw([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(yw.prototype,ww);var bw={index:0,offset:0};function xw(e,t){return bw.index=e,bw.offset=t,bw}function Cw(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!Cw(e[i],t[i]))return!1}else{for(var r in e)if(!(r in t)||!Cw(e[r],t[r]))return!1;for(var o in t)if(!(o in e))return!1}return!0}yw.empty=new yw([],0);var kw=function(e,t){this.type=e,this.attrs=t};function Ew(e){var t=Error.call(this,e);return t.__proto__=Ew.prototype,t}kw.prototype.addToSet=function(e){for(var t,n=!1,i=0;i<e.length;i++){var r=e[i];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,i));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t},kw.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},kw.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},kw.prototype.eq=function(e){return this==e||this.type==e.type&&Cw(this.attrs,e.attrs)},kw.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},kw.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},kw.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},kw.setFrom=function(e){if(!e||0==e.length)return kw.none;if(e instanceof kw)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},kw.none=[],Ew.prototype=Object.create(Error.prototype),Ew.prototype.constructor=Ew,Ew.prototype.name="ReplaceError";var Sw=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},Iw={size:{configurable:!0}};function Ow(e,t,n){var i=e.findIndex(t),r=i.index,o=i.offset,s=e.maybeChild(r),a=e.findIndex(n),l=a.index,c=a.offset;if(o==t||s.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(Ow(s.content,t-o-1,n-o-1)))}function Tw(e,t,n,i){var r=e.findIndex(t),o=r.index,s=r.offset,a=e.maybeChild(o);if(s==t||a.isText)return i&&!i.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=Tw(a.content,t-s-1,n);return l&&e.replaceChild(o,a.copy(l))}function Mw(e,t,n){if(n.openStart>e.depth)throw new Ew("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Ew("Inconsistent open depths");return Nw(e,t,n,0)}function Nw(e,t,n,i){var r=e.index(i),o=e.node(i);if(r==t.index(i)&&i<e.depth-n.openStart){var s=Nw(e,t,n,i+1);return o.copy(o.content.replaceChild(r,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=i||t.depth!=i){var a=function(e,t){for(var n=t.depth-e.openStart,i=t.node(n).copy(e.content),r=n-1;r>=0;r--)i=t.node(r).copy(yw.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}(n,e);return Lw(o,Uw(e,a.start,a.end,t,i))}var l=e.parent,c=l.content;return Lw(l,c.cut(0,e.parentOffset).append(n.content).append(c.cut(t.parentOffset)))}return Lw(o,Fw(e,t,i))}function Aw(e,t){if(!t.type.compatibleContent(e.type))throw new Ew("Cannot join "+t.type.name+" onto "+e.type.name)}function Rw(e,t,n){var i=e.node(n);return Aw(i,t.node(n)),i}function Dw(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Pw(e,t,n,i){var r=(t||e).node(n),o=0,s=t?t.index(n):r.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Dw(e.nodeAfter,i),o++));for(var a=o;a<s;a++)Dw(r.child(a),i);t&&t.depth==n&&t.textOffset&&Dw(t.nodeBefore,i)}function Lw(e,t){if(!e.type.validContent(t))throw new Ew("Invalid content for node "+e.type.name);return e.copy(t)}function Uw(e,t,n,i,r){var o=e.depth>r&&Rw(e,t,r+1),s=i.depth>r&&Rw(n,i,r+1),a=[];return Pw(null,e,r,a),o&&s&&t.index(r)==n.index(r)?(Aw(o,s),Dw(Lw(o,Uw(e,t,n,i,r+1)),a)):(o&&Dw(Lw(o,Fw(e,t,r+1)),a),Pw(t,n,r,a),s&&Dw(Lw(s,Fw(n,i,r+1)),a)),Pw(i,null,r,a),new yw(a)}function Fw(e,t,n){var i=[];(Pw(null,e,n,i),e.depth>n)&&Dw(Lw(Rw(e,t,n+1),Fw(e,t,n+1)),i);return Pw(t,null,n,i),new yw(i)}Iw.size.get=function(){return this.content.size-this.openStart-this.openEnd},Sw.prototype.insertAt=function(e,t){var n=Tw(this.content,e+this.openStart,t,null);return n&&new Sw(n,this.openStart,this.openEnd)},Sw.prototype.removeBetween=function(e,t){return new Sw(Ow(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},Sw.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},Sw.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Sw.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},Sw.fromJSON=function(e,t){if(!t)return Sw.empty;var n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new Sw(yw.fromJSON(e,t.content),n,i)},Sw.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,i=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new Sw(e,n,i)},Object.defineProperties(Sw.prototype,Iw),Sw.empty=new Sw(yw.empty,0,0);var Bw=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},jw={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Bw.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},jw.parent.get=function(){return this.node(this.depth)},jw.doc.get=function(){return this.node(0)},Bw.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},Bw.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},Bw.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},Bw.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},Bw.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},Bw.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},Bw.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},jw.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},jw.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i},jw.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},Bw.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],i=0==t?0:this.path[3*t-1]+1,r=0;r<e;r++)i+=n.child(r).nodeSize;return i},Bw.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return kw.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){var r=n;n=i,i=r}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||i&&o[s].isInSet(i.marks)||(o=o[s--].removeFromSet(o));return o},Bw.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,i=e.parent.maybeChild(e.index()),r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||i&&n[r].isInSet(i.marks)||(n=n[r--].removeFromSet(n));return n},Bw.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},Bw.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Ww(this,e,n)},Bw.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},Bw.prototype.max=function(e){return e.pos>this.pos?e:this},Bw.prototype.min=function(e){return e.pos<this.pos?e:this},Bw.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},Bw.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],i=0,r=t,o=e;;){var s=o.content.findIndex(r),a=s.index,l=s.offset,c=r-l;if(n.push(o,a,i+l),!c)break;if((o=o.child(a)).isText)break;r=c-1,i+=l+1}return new Bw(t,n,r)},Bw.resolveCached=function(e,t){for(var n=0;n<Vw.length;n++){var i=Vw[n];if(i.pos==t&&i.doc==e)return i}var r=Vw[zw]=Bw.resolve(e,t);return zw=(zw+1)%Kw,r},Object.defineProperties(Bw.prototype,jw);var Vw=[],zw=0,Kw=12,Ww=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},Hw={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Hw.start.get=function(){return this.$from.before(this.depth+1)},Hw.end.get=function(){return this.$to.after(this.depth+1)},Hw.parent.get=function(){return this.$from.node(this.depth)},Hw.startIndex.get=function(){return this.$from.index(this.depth)},Hw.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Ww.prototype,Hw);var $w=Object.create(null),qw=function(e,t,n,i){this.type=e,this.attrs=t,this.content=n||yw.empty,this.marks=i||kw.none},Yw={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Yw.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Yw.childCount.get=function(){return this.content.childCount},qw.prototype.child=function(e){return this.content.child(e)},qw.prototype.maybeChild=function(e){return this.content.maybeChild(e)},qw.prototype.forEach=function(e){this.content.forEach(e)},qw.prototype.nodesBetween=function(e,t,n,i){void 0===i&&(i=0),this.content.nodesBetween(e,t,n,i,this)},qw.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},Yw.textContent.get=function(){return this.textBetween(0,this.content.size,"")},qw.prototype.textBetween=function(e,t,n,i){return this.content.textBetween(e,t,n,i)},Yw.firstChild.get=function(){return this.content.firstChild},Yw.lastChild.get=function(){return this.content.lastChild},qw.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},qw.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},qw.prototype.hasMarkup=function(e,t,n){return this.type==e&&Cw(this.attrs,t||e.defaultAttrs||$w)&&kw.sameSet(this.marks,n||kw.none)},qw.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},qw.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},qw.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},qw.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return Sw.empty;var i=this.resolve(e),r=this.resolve(t),o=n?0:i.sharedDepth(t),s=i.start(o),a=i.node(o).content.cut(i.pos-s,r.pos-s);return new Sw(a,i.depth-o,r.depth-o)},qw.prototype.replace=function(e,t,n){return Mw(this.resolve(e),this.resolve(t),n)},qw.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),i=n.index,r=n.offset;if(!(t=t.maybeChild(i)))return null;if(r==e||t.isText)return t;e-=r+1}},qw.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,i=t.offset;return{node:this.content.maybeChild(n),index:n,offset:i}},qw.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,i=t.offset;if(i<e)return{node:this.content.child(n),index:n,offset:i};var r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}},qw.prototype.resolve=function(e){return Bw.resolveCached(this,e)},qw.prototype.resolveNoCache=function(e){return Bw.resolve(this,e)},qw.prototype.rangeHasMark=function(e,t,n){var i=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(i=!0),!i})),i},Yw.isBlock.get=function(){return this.type.isBlock},Yw.isTextblock.get=function(){return this.type.isTextblock},Yw.inlineContent.get=function(){return this.type.inlineContent},Yw.isInline.get=function(){return this.type.isInline},Yw.isText.get=function(){return this.type.isText},Yw.isLeaf.get=function(){return this.type.isLeaf},Yw.isAtom.get=function(){return this.type.isAtom},qw.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Xw(this.marks,e)},qw.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},qw.prototype.canReplace=function(e,t,n,i,r){void 0===n&&(n=yw.empty),void 0===i&&(i=0),void 0===r&&(r=n.childCount);var o=this.contentMatchAt(e).matchFragment(n,i,r),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=i;a<r;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},qw.prototype.canReplaceWith=function(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;var r=this.contentMatchAt(e).matchType(n),o=r&&r.matchFragment(this.content,t);return!!o&&o.validEnd},qw.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},qw.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=kw.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!kw.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},qw.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},qw.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var i=yw.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,n)},Object.defineProperties(qw.prototype,Yw);var Gw=function(e){function t(t,n,i,r){if(e.call(this,t,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Xw(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(qw);function Xw(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var Jw=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Qw={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Jw.parse=function(e,t){var n=new Zw(e,t);if(null==n.next)return Jw.empty;var i=tb(n);n.next&&n.err("Unexpected trailing text");var r=function(e){var t=Object.create(null);return n(ab(e,0));function n(i){var r=[];i.forEach((function(t){e[t].forEach((function(t){var n=t.term,i=t.to;if(n){var o=r.indexOf(n),s=o>-1&&r[o+1];ab(e,i).forEach((function(e){s||r.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var o=t[i.join(",")]=new Jw(i.indexOf(e.length-1)>-1),s=0;s<r.length;s+=2){var a=r[s+1].sort(sb);o.next.push(r[s],t[a.join(",")]||n(a))}return o}}(function(e){var t=[[]];return r(o(e,0),n()),t;function n(){return t.push([])-1}function i(e,n,i){var r={term:i,to:n};return t[e].push(r),r}function r(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(o(n,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=o(e.exprs[s],t);if(s==e.exprs.length-1)return a;r(a,t=n())}else{if("star"==e.type){var l=n();return i(t,l),r(o(e.expr,l),l),[i(l)]}if("plus"==e.type){var c=n();return r(o(e.expr,t),c),r(o(e.expr,c),c),[i(c)]}if("opt"==e.type)return[i(t)].concat(o(e.expr,t));if("range"==e.type){for(var d=t,u=0;u<e.min;u++){var h=n();r(o(e.expr,d),h),d=h}if(-1==e.max)r(o(e.expr,d),d);else for(var p=e.min;p<e.max;p++){var f=n();i(d,f),r(o(e.expr,d),f),d=f}return[i(d)]}if("name"==e.type)return[i(t,null,e.value)]}}}(i));return function(e,t){for(var n=0,i=[e];n<i.length;n++){for(var r=i[n],o=!r.validEnd,s=[],a=0;a<r.next.length;a+=2){var l=r.next[a],c=r.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==i.indexOf(c)&&i.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r},Jw.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},Jw.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var i=this,r=t;i&&r<n;r++)i=i.matchType(e.child(r).type);return i},Qw.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},Qw.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},Jw.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},Jw.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var i=[this];return function r(o,s){var a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return yw.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var c=o.next[l],d=o.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==i.indexOf(d)){i.push(d);var u=r(d,s.concat(c));if(u)return u}}}(this,[])},Jw.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},Jw.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var i=n.shift(),r=i.match;if(r.matchType(e)){for(var o=[],s=i;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||i.type&&!r.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}},Qw.edgeCount.get=function(){return this.next.length>>1},Jw.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},Jw.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var i=1;i<n.next.length;i+=2)-1==e.indexOf(n.next[i])&&t(n.next[i])}(this),e.map((function(t,n){for(var i=n+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)i+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return i})).join("\n")},Object.defineProperties(Jw.prototype,Qw),Jw.empty=new Jw(!0);var Zw=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},eb={next:{configurable:!0}};function tb(e){var t=[];do{t.push(nb(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function nb(e){var t=[];do{t.push(ib(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function ib(e){for(var t=function(e){if(e.eat("(")){var t=tb(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,i=n[t];if(i)return[i];var r=[];for(var o in n){var s=n[o];s.groups.indexOf(t)>-1&&r.push(s)}0==r.length&&e.err("No node type or group '"+t+"' found");return r}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=ob(e,t)}return t}function rb(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function ob(e,t){var n=rb(e),i=n;return e.eat(",")&&(i="}"!=e.next?rb(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:t}}function sb(e,t){return t-e}function ab(e,t){var n=[];return function t(i){var r=e[i];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=s.term,l=s.to;a||-1!=n.indexOf(l)||t(l)}}(t),n.sort(sb)}function lb(e){var t=Object.create(null);for(var n in e){var i=e[n];if(!i.hasDefault)return null;t[n]=i.default}return t}function cb(e,t){var n=Object.create(null);for(var i in e){var r=t&&t[i];if(void 0===r){var o=e[i];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=o.default}n[i]=r}return n}function db(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new pb(e[n]);return t}eb.next.get=function(){return this.tokens[this.pos]},Zw.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Zw.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Zw.prototype,eb);var ub=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=db(n.attrs),this.defaultAttrs=lb(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},hb={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};hb.isInline.get=function(){return!this.isBlock},hb.isTextblock.get=function(){return this.isBlock&&this.inlineContent},hb.isLeaf.get=function(){return this.contentMatch==Jw.empty},hb.isAtom.get=function(){return this.isLeaf||this.spec.atom},ub.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},ub.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},ub.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:cb(this.attrs,e)},ub.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qw(this,this.computeAttrs(e),yw.from(t),kw.setFrom(n))},ub.prototype.createChecked=function(e,t,n){if(t=yw.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new qw(this,this.computeAttrs(e),t,kw.setFrom(n))},ub.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=yw.from(t)).size){var i=this.contentMatch.fillBefore(t);if(!i)return null;t=i.append(t)}var r=this.contentMatch.matchFragment(t).fillBefore(yw.empty,!0);return r?new qw(this,e,t.append(r),kw.setFrom(n)):null},ub.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},ub.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},ub.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},ub.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:kw.empty:e},ub.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,i){return n[e]=new ub(e,t,i)}));var i=t.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(ub.prototype,hb);var pb=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},fb={isRequired:{configurable:!0}};fb.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(pb.prototype,fb);var gb=function(e,t,n,i){this.name=e,this.schema=n,this.spec=i,this.attrs=db(i.attrs),this.rank=t,this.excluded=null;var r=lb(this.attrs);this.instance=r&&new kw(this,r)};gb.prototype.create=function(e){return!e&&this.instance?this.instance:new kw(this,cb(this.attrs,e))},gb.compile=function(e,t){var n=Object.create(null),i=0;return e.forEach((function(e,r){return n[e]=new gb(e,i++,t,r)})),n},gb.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},gb.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},gb.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var mb=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=mw.from(e.nodes),this.spec.marks=mw.from(e.marks),this.nodes=ub.compile(this.spec.nodes,this),this.marks=gb.compile(this.spec.marks,this);var n=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var r=this.nodes[i],o=r.spec.content||"",s=r.spec.marks;r.contentMatch=n[o]||(n[o]=Jw.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==s?null:s?_b(this,s.split(" ")):""!=s&&r.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:_b(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function _b(e,t){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=e.marks[r],s=o;if(o)n.push(o);else for(var a in e.marks){var l=e.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return n}mb.prototype.node=function(e,t,n,i){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ub))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,i)},mb.prototype.text=function(e,t){var n=this.nodes.text;return new Gw(n,n.defaultAttrs,e,kw.setFrom(t))},mb.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},mb.prototype.nodeFromJSON=function(e){return qw.fromJSON(this,e)},mb.prototype.markFromJSON=function(e){return kw.fromJSON(this,e)},mb.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var vb=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};vb.prototype.parse=function(e,t){void 0===t&&(t={});var n=new kb(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},vb.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new kb(this,t,!0);return n.addAll(e,null,t.from,t.to),Sw.maxOpen(n.finish())},vb.prototype.matchTag=function(e,t,n){for(var i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){var r=this.tags[i];if(Sb(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(e);if(!1===o)continue;r.attrs=o}return r}}},vb.prototype.matchStyle=function(e,t,n,i){for(var r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},vb.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,i=0;i<t.length;i++){var r=t[i];if((null==r.priority?50:r.priority)<n)break}t.splice(i,0,e)}var i=function(t){var i=e.marks[t].spec.parseDOM;i&&i.forEach((function(e){n(e=Ib(e)),e.mark=t}))};for(var r in e.marks)i(r);var o;for(var s in e.nodes)o=void 0,(o=e.nodes[s].spec.parseDOM)&&o.forEach((function(e){n(e=Ib(e)),e.node=s}));return t},vb.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new vb(e,vb.schemaRules(e)))};var yb={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wb={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bb={ol:!0,ul:!0};function xb(e){return(e?1:0)|("full"===e?2:0)}var Cb=function(e,t,n,i,r,o,s){this.type=e,this.attrs=t,this.solid=r,this.match=o||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=kw.none,this.pendingMarks=i,this.stashMarks=[]};Cb.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(yw.from(e));if(!t){var n,i=this.type.contentMatch;return(n=i.findWrapping(e.type))?(this.match=i,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},Cb.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var i=yw.from(this.content);return!e&&this.match&&(i=i.append(this.match.fillBefore(yw.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i},Cb.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},Cb.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var i=n[t];(this.type?this.type.allowsMarkType(i.type):Ob(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}},Cb.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!yb.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var kb=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var i,r=t.topNode,o=xb(t.preserveWhitespace)|(n?4:0);i=r?new Cb(r.type,r.attrs,kw.none,kw.none,!0,t.topMatch||r.type.contentMatch,o):new Cb(n?null:e.schema.topNodeType,null,kw.none,kw.none,!0,null,o),this.nodes=[i],this.open=0,this.find=t.findPositions,this.needsBlock=!1},Eb={top:{configurable:!0},currentPos:{configurable:!0}};function Sb(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Ib(e){var t={};for(var n in e)t[n]=e[n];return t}function Ob(e,t){var n=t.schema.nodes,i=function(i){var r=n[i];if(r.allowsMarkType(e)){var o=[],s=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var i=e.edge(n),r=i.type,a=i.next;if(r==t)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(r.contentMatch)?{v:!0}:void 0}};for(var r in n){var o=i(r);if(o)return o.v}}Eb.top.get=function(){return this.nodes[this.open]},kb.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;t=n.exec(e);)i.push(t[1],t[2].trim());return i}(t)):null,i=this.top;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],i)}},kb.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var i=n.content[n.content.length-1],r=e.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},kb.prototype.addElement=function(e,t){var n,i=e.nodeName.toLowerCase();bb.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var i=1==t.nodeType?t.nodeName.toLowerCase():null;i&&bb.hasOwnProperty(i)&&n?(n.appendChild(t),t=n):"li"==i?n=t:i&&(n=null)}}(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(r?r.ignore:wb.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);var o,s=this.top,a=this.needsBlock;if(yb.hasOwnProperty(i))o=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,r,!1===r.consuming?n:null)},kb.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},kb.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},kb.prototype.readStyles=function(e){var t=kw.none;e:for(var n=0;n<e.length;n+=2)for(var i=null;;){var r=this.parser.matchStyle(e[n],e[n+1],this,i);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;i=r}return t},kb.prototype.addElementByRule=function(e,t,n){var i,r,o,s=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):i=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,i)}i&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},kb.prototype.addAll=function(e,t,n,i){for(var r=n||0,o=n?e.childNodes[n]:e.firstChild,s=null==i?null:e.childNodes[i];o!=s;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o),t&&yb.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,r)},kb.prototype.findPlace=function(e){for(var t,n,i=this.open;i>=0;i--){var r=this.nodes[i],o=r.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=r,!o.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},kb.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var i=n.activeMarks,r=0;r<e.marks.length;r++)n.type&&!n.type.allowsMarkType(e.marks[r].type)||(i=e.marks[r].addToSet(i));return n.content.push(e.mark(i)),!0}return!1},kb.prototype.enter=function(e,t,n){var i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i},kb.prototype.enterInner=function(e,t,n,i){this.closeExtra();var r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e,t);var o=null==i?-5&r.options:xb(i);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new Cb(e,t,r.activeMarks,r.pendingMarks,n,null,o)),this.open++},kb.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},kb.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},kb.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},Eb.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,i=n.length-1;i>=0;i--)e+=n[i].nodeSize;t&&e++}return e},kb.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},kb.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},kb.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var i=0;i<this.find.length;i++){if(null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node))t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}},kb.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},kb.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),i=this.options.context,r=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),o=-(i?i.depth+1:0)+(r?0:1),s=function(e,a){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&r?t.nodes[a].type:i&&a>=o?i.node(a-o).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},kb.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var i in this.parser.schema.nodes){var r=this.parser.schema.nodes[i];if(r.isTextblock&&r.defaultAttrs)return r}},kb.prototype.addPendingMark=function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},kb.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);var r=i.popFromStashMark(e);r&&i.type&&i.type.allowsMarkType(r.type)&&(i.activeMarks=r.addToSet(i.activeMarks))}if(i==t)break}},Object.defineProperties(kb.prototype,Eb);var Tb=function(e,t){this.nodes=e||{},this.marks=t||{}};function Mb(e){var t={};for(var n in e){var i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function Nb(e){return e.document||window.document}Tb.prototype.serializeFragment=function(e,t,n){var i=this;void 0===t&&(t={}),n||(n=Nb(t).createDocumentFragment());var r=n,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<e.marks.length;){var a=e.marks[s];if(i.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)r=o.pop(),o.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=i.serializeMark(l,e.isInline,t);c&&(o.push(l,r),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(i.serializeNodeInner(e,t))})),n},Tb.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var n=Tb.renderSpec(Nb(t),this.nodes[e.type.name](e)),i=n.dom,r=n.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return i},Tb.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),i=e.marks.length-1;i>=0;i--){var r=this.serializeMark(e.marks[i],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n},Tb.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var i=this.marks[e.type.name];return i&&Tb.renderSpec(Nb(n),i(e,t))},Tb.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var i=t[0],r=i.indexOf(" ");r>0&&(n=i.slice(0,r),i=i.slice(r+1));var o=null,s=n?e.createElementNS(n,i):e.createElement(i),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var d=c.indexOf(" ");d>0?s.setAttributeNS(c.slice(0,d),c.slice(d+1),a[c]):s.setAttribute(c,a[c])}for(var u=l;u<t.length;u++){var h=t[u];if(0===h){if(u<t.length-1||u>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=Tb.renderSpec(e,h,n),f=p.dom,g=p.contentDOM;if(s.appendChild(f),g){if(o)throw new RangeError("Multiple content holes");o=g}}return{dom:s,contentDOM:o}},Tb.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Tb(this.nodesFromSchema(e),this.marksFromSchema(e)))},Tb.nodesFromSchema=function(e){var t=Mb(e.nodes);return t.text||(t.text=function(e){return e.text}),t},Tb.marksFromSchema=function(e){return Mb(e.marks)};var Ab=Math.pow(2,16);function Rb(e,t){return e+t*Ab}function Db(e){return 65535&e}var Pb=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},Lb=function e(t,n){if(void 0===n&&(n=!1),!t.length&&e.empty)return e.empty;this.ranges=t,this.inverted=n};Lb.prototype.recover=function(e){var t=0,n=Db(e);if(!this.inverted)for(var i=0;i<n;i++)t+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Ab}(e)},Lb.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Lb.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Lb.prototype._map=function(e,t,n){for(var i=0,r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?i:0);if(a>e)break;var l=this.ranges[s+r],c=this.ranges[s+o],d=a+l;if(e<=d){var u=a+i+((l?e==a?-1:e==d?1:t:t)<0?0:c);if(n)return u;var h=e==(t<0?a:d)?null:Rb(s/3,e-a);return new Pb(u,t<0?e!=a:e!=d,h)}i+=c-l}return n?e+i:new Pb(e+i)},Lb.prototype.touches=function(e,t){for(var n=0,i=Db(t),r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+r];if(e<=a+l&&s==3*i)return!0;n+=this.ranges[s+o]-l}return!1},Lb.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,i=0,r=0;i<this.ranges.length;i+=3){var o=this.ranges[i],s=o-(this.inverted?r:0),a=o+(this.inverted?0:r),l=this.ranges[i+t],c=this.ranges[i+n];e(s,s+l,a,a+c),r+=c-l}},Lb.prototype.invert=function(){return new Lb(this.ranges,!this.inverted)},Lb.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Lb.offset=function(e){return 0==e?Lb.empty:new Lb(e<0?[0,-e,0]:[0,0,e])},Lb.empty=new Lb([]);var Ub=function(e,t,n,i){this.maps=e||[],this.from=n||0,this.to=null==i?this.maps.length:i,this.mirror=t};function Fb(e){var t=Error.call(this,e);return t.__proto__=Fb.prototype,t}Ub.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new Ub(this.maps,this.mirror,e,t)},Ub.prototype.copy=function(){return new Ub(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Ub.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},Ub.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var i=e.getMirror(t);this.appendMap(e.maps[t],null!=i&&i<t?n+i:null)}},Ub.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},Ub.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},Ub.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var i=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=i&&i>t?n-i-1:null)}},Ub.prototype.invert=function(){var e=new Ub;return e.appendMappingInverted(this),e},Ub.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},Ub.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Ub.prototype._map=function(e,t,n){for(var i=!1,r=this.from;r<this.to;r++){var o=this.maps[r].mapResult(e,t);if(null!=o.recover){var s=this.getMirror(r);if(null!=s&&s>r&&s<this.to){r=s,e=this.maps[s].recover(o.recover);continue}}o.deleted&&(i=!0),e=o.pos}return n?e:new Pb(e,i)},Fb.prototype=Object.create(Error.prototype),Fb.prototype.constructor=Fb,Fb.prototype.name="TransformError";var Bb=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ub},jb={before:{configurable:!0},docChanged:{configurable:!0}};function Vb(){throw new Error("Override me")}jb.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Bb.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new Fb(t.failed);return this},Bb.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},jb.docChanged.get=function(){return this.steps.length>0},Bb.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(Bb.prototype,jb);var zb=Object.create(null),Kb=function(){};Kb.prototype.apply=function(e){return Vb()},Kb.prototype.getMap=function(){return Lb.empty},Kb.prototype.invert=function(e){return Vb()},Kb.prototype.map=function(e){return Vb()},Kb.prototype.merge=function(e){return null},Kb.prototype.toJSON=function(){return Vb()},Kb.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=zb[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},Kb.jsonID=function(e,t){if(e in zb)throw new RangeError("Duplicate use of step JSON ID "+e);return zb[e]=t,t.prototype.jsonID=e,t};var Wb=function(e,t){this.doc=e,this.failed=t};Wb.ok=function(e){return new Wb(e,null)},Wb.fail=function(e){return new Wb(null,e)},Wb.fromReplace=function(e,t,n,i){try{return Wb.ok(e.replace(t,n,i))}catch(_8){if(_8 instanceof Ew)return Wb.fail(_8.message);throw _8}};var Hb=function(e){function t(t,n,i,r){e.call(this),this.from=t,this.to=n,this.slice=i,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&qb(e,this.from,this.to)?Wb.fail("Structure replace would overwrite content"):Wb.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Lb([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted?null:new t(n.pos,Math.max(n.pos,i.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?Sw.empty:new Sw(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?Sw.empty:new Sw(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,Sw.fromJSON(e,n.slice),!!n.structure)},t}(Kb);Kb.jsonID("replace",Hb);var $b=function(e){function t(t,n,i,r,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(qb(e,this.from,this.gapFrom)||qb(e,this.gapTo,this.to)))return Wb.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Wb.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?Wb.fromReplace(e,this.from,this.to,n):Wb.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Lb([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&i.deleted||r<n.pos||o>i.pos?null:new t(n.pos,i.pos,r,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,Sw.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(Kb);function qb(e,t,n){for(var i=e.resolve(t),r=n-t,o=i.depth;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0)for(var s=i.node(o).maybeChild(i.indexAfter(o));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function Yb(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Gb(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var i=e.$from.node(n),r=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&i.canReplace(r,o,t))return n;if(0==n||i.type.spec.isolating||!Yb(i,r,o))break}}function Xb(e,t,n,i){void 0===i&&(i=e);var r=function(e,t){var n=e.parent,i=e.startIndex,r=e.endIndex,o=n.contentMatchAt(i).findWrapping(t);if(!o)return null;var s=o.length?o[0]:t;return n.canReplaceWith(i,r,s)?o:null}(e,t),o=r&&function(e,t){var n=e.parent,i=e.startIndex,r=e.endIndex,o=n.child(i),s=t.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,l=i;a&&l<r;l++)a=a.matchType(n.child(l).type);if(!a||!a.validEnd)return null;return s}(i,t);return o?r.map(Jb).concat({type:t,attrs:n}).concat(o.map(Jb)):null}function Jb(e){return{type:e,attrs:null}}function Qb(e,t,n,i){void 0===n&&(n=1);var r=e.resolve(t),o=r.depth-n,s=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=n-2;a>o;a--,l--){var c=r.node(a),d=r.index(a);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(d,c.childCount),h=i&&i[l]||c;if(h!=c&&(u=u.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(d+1,c.childCount)||!h.type.validContent(u))return!1}var p=r.indexAfter(o),f=i&&i[0];return r.node(o).canReplaceWith(p,p,f?f.type:r.node(o+1).type)}function Zb(e,t){var n,i,r=e.resolve(t),o=r.index();return n=r.nodeBefore,i=r.nodeAfter,n&&i&&!n.isLeaf&&n.canAppend(i)&&r.parent.canReplace(o,o+1)}function ex(e,t,n){for(var i=[],r=0;r<e.childCount;r++){var o=e.child(r);o.content.size&&(o=o.copy(ex(o.content,t,o))),o.isInline&&(o=t(o,n,r)),i.push(o)}return yw.fromArray(i)}Kb.jsonID("replaceAround",$b),Bb.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,r=e.depth,o=n.before(r+1),s=i.after(r+1),a=o,l=s,c=yw.empty,d=0,u=r,h=!1;u>t;u--)h||n.index(u)>0?(h=!0,c=yw.from(n.node(u).copy(c)),d++):a--;for(var p=yw.empty,f=0,g=r,m=!1;g>t;g--)m||i.after(g+1)<i.end(g)?(m=!0,p=yw.from(i.node(g).copy(p)),f++):l++;return this.step(new $b(a,l,o,s,new Sw(c.append(p),d,f),c.size-d,!0))},Bb.prototype.wrap=function(e,t){for(var n=yw.empty,i=t.length-1;i>=0;i--){if(n.size){var r=t[i].type.contentMatch.matchFragment(n);if(!r||!r.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=yw.from(t[i].type.create(t[i].attrs,n))}var o=e.start,s=e.end;return this.step(new $b(o,s,o,s,new Sw(n,0,0),t.length,!0))},Bb.prototype.setBlockType=function(e,t,n,i){var r=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&function(e,t,n){var i=e.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(r.doc,r.mapping.slice(o).map(t),n)){r.clearIncompatible(r.mapping.slice(o).map(t,1),n);var s=r.mapping.slice(o),a=s.map(t,1),l=s.map(t+e.nodeSize,1);return r.step(new $b(a,l,a+1,l-1,new Sw(yw.from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},Bb.prototype.setNodeMarkup=function(e,t,n,i){var r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);var o=t.create(n,null,i||r.marks);if(r.isLeaf)return this.replaceWith(e,e+r.nodeSize,o);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new $b(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new Sw(yw.from(o),0,0),1,!0))},Bb.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),r=yw.empty,o=yw.empty,s=i.depth,a=i.depth-t,l=t-1;s>a;s--,l--){r=yw.from(i.node(s).copy(r));var c=n&&n[l];o=yw.from(c?c.type.create(c.attrs,o):i.node(s).copy(o))}return this.step(new Hb(e,e,new Sw(r.append(o),t,t),!0))},Bb.prototype.join=function(e,t){void 0===t&&(t=1);var n=new Hb(e-t,e+t,Sw.empty,!0);return this.step(n)};var tx=function(e){function t(t,n,i){e.call(this),this.from=t,this.to=n,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new Sw(ex(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),r),n.openStart,n.openEnd);return Wb.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new nx(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Kb);Kb.jsonID("addMark",tx);var nx=function(e){function t(t,n,i){e.call(this),this.from=t,this.to=n,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new Sw(ex(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return Wb.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new tx(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Kb);function ix(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=Sw.empty),t==n&&!i.size)return null;var r=e.resolve(t),o=e.resolve(n);return rx(r,o,i)?new Hb(t,n,i):new ox(r,o,i).fit()}function rx(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Kb.jsonID("removeMark",nx),Bb.prototype.addMark=function(e,t,n){var i=this,r=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(i,l,c){if(i.isInline){var d=i.marks;if(!n.isInSet(d)&&c.type.allowsMarkType(n.type)){for(var u=Math.max(l,e),h=Math.min(l+i.nodeSize,t),p=n.addToSet(d),f=0;f<d.length;f++)d[f].isInSet(p)||(s&&s.to==u&&s.mark.eq(d[f])?s.to=h:r.push(s=new nx(u,h,d[f])));a&&a.to==u?a.to=h:o.push(a=new tx(u,h,n))}}})),r.forEach((function(e){return i.step(e)})),o.forEach((function(e){return i.step(e)})),this},Bb.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var r=[],o=0;return this.doc.nodesBetween(e,t,(function(i,s){if(i.isInline){o++;var a=null;if(n instanceof gb)for(var l,c=i.marks;l=n.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else n?n.isInSet(i.marks)&&(a=[n]):a=i.marks;if(a&&a.length)for(var d=Math.min(s+i.nodeSize,t),u=0;u<a.length;u++){for(var h=a[u],p=void 0,f=0;f<r.length;f++){var g=r[f];g.step==o-1&&h.eq(r[f].style)&&(p=g)}p?(p.to=d,p.step=o):r.push({style:h,from:Math.max(s,e),to:d,step:o})}}})),r.forEach((function(e){return i.step(new nx(e.from,e.to,e.style))})),this},Bb.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),r=[],o=e+1,s=0;s<i.childCount;s++){var a=i.child(s),l=o+a.nodeSize,c=n.matchType(a.type,a.attrs);if(c){n=c;for(var d=0;d<a.marks.length;d++)t.allowsMarkType(a.marks[d].type)||this.step(new nx(o,l,a.marks[d]))}else r.push(new Hb(o,l,Sw.empty));o=l}if(!n.validEnd){var u=n.fillBefore(yw.empty,!0);this.replace(o,o,new Sw(u,0,0))}for(var h=r.length-1;h>=0;h--)this.step(r[h]);return this},Bb.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=Sw.empty);var i=ix(this.doc,e,t,n);return i&&this.step(i),this},Bb.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new Sw(yw.from(n),0,0))},Bb.prototype.delete=function(e,t){return this.replace(e,t,Sw.empty)},Bb.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var ox=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var i=0;i<=e.depth;i++){var r=e.node(i);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(i))})}this.placed=yw.empty;for(var o=e.depth;o>0;o--)this.placed=yw.from(e.node(o).copy(this.placed))},sx={depth:{configurable:!0}};function ax(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(ax(e.firstChild.content,t-1,n)))}function lx(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(lx(e.lastChild.content,t-1,n)))}function cx(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function dx(e,t,n){if(t<=0)return e;var i=e.content;return t>1&&(i=i.replaceChild(0,dx(i.firstChild,t-1,1==i.childCount?n-1:0))),t>0&&(i=e.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(yw.empty,!0)))),e.copy(i)}function ux(e,t,n,i,r){var o=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=i.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(var i=n;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}(n,o.content,s)?a:null}function hx(e,t,n,i,r){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(hx(o.content,t+1,n,i,o)))}if(t>i){var s=r.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(yw.empty,!0))}return e}function px(e,t){for(var n=[],i=Math.min(e.depth,t.depth);i>=0;i--){var r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}sx.depth.get=function(){return this.frontier.length-1},ox.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;for(var o=this.placed,s=i.depth,a=r.depth;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;var l=new Sw(o,s,a);return t>-1?new $b(i.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new Hb(i.pos,r.pos,l):void 0},ox.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,i=(t?(n=cx(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var o=this.frontier[r],s=o.type,a=o.match,l=void 0,c=void 0;if(1==e&&(i?a.matchType(i.type)||(c=a.fillBefore(yw.from(i),!1)):s.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:r,parent:n,inject:c};if(2==e&&i&&(l=a.findWrapping(i.type)))return{sliceDepth:t,frontierDepth:r,parent:n,wrap:l};if(n&&a.matchType(n.type))break}},ox.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,r=cx(t,n);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new Sw(t,n+1,Math.max(i,r.size+n>=t.size-i?n+1:0)),!0)},ox.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,r=cx(t,n);if(r.childCount<=1&&n>0){var o=t.size-n<=n+r.size;this.unplaced=new Sw(ax(t,n-1,1),n-1,o?n-1:i)}else this.unplaced=new Sw(ax(t,n,1),n,i)},ox.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,i=e.parent,r=e.inject,o=e.wrap;this.depth>n;)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,l=i?i.content:a.content,c=a.openStart-t,d=0,u=[],h=this.frontier[n],p=h.match,f=h.type;if(r){for(var g=0;g<r.childCount;g++)u.push(r.child(g));p=p.matchFragment(r)}for(var m=l.size+t-(a.content.size-a.openEnd);d<l.childCount;){var _=l.child(d),v=p.matchType(_.type);if(!v)break;(++d>1||0==c||_.content.size)&&(p=v,u.push(dx(_.mark(f.allowedMarks(_.marks)),1==d?c:0,d==l.childCount?m:-1)))}var y=d==l.childCount;y||(m=-1),this.placed=lx(this.placed,n,yw.from(u)),this.frontier[n].match=p,y&&m<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,b=l;w<m;w++){var x=b.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),b=x.content}this.unplaced=y?0==t?Sw.empty:new Sw(ax(a.content,t-1,1),t-1,m<0?a.openEnd:t-1):new Sw(ax(a.content,t,d),a.openStart,a.openEnd)},ox.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ux(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,i=this.$to.after(n);n>1&&i==this.$to.end(--n);)++i;return i},ox.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],i=n.match,r=n.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=ux(e,t,r,i,o);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,d=ux(e,a,l.type,c,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}},ox.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=lx(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var i=e.node(n),r=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,r)}return e},ox.prototype.openFrontierNode=function(e,t,n){var i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=lx(this.placed,this.depth,yw.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},ox.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(yw.empty,!0);e.childCount&&(this.placed=lx(this.placed,this.frontier.length,e))},Object.defineProperties(ox.prototype,sx),Bb.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),r=this.doc.resolve(t);if(rx(i,r,n))return this.step(new Hb(e,t,n));var o=px(i,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var s=-(i.depth+1);o.unshift(s);for(var a=i.depth,l=i.pos-1;a>0;a--,l--){var c=i.node(a).type.spec;if(c.defining||c.isolating)break;o.indexOf(a)>-1?s=a:i.before(a)==l&&o.splice(1,0,-a)}for(var d=o.indexOf(s),u=[],h=n.openStart,p=n.content,f=0;;f++){var g=p.firstChild;if(u.push(g),f==n.openStart)break;p=g.content}h>0&&u[h-1].type.spec.defining&&i.node(d).type!=u[h-1].type?h-=1:h>=2&&u[h-1].isTextblock&&u[h-2].type.spec.defining&&i.node(d).type!=u[h-2].type&&(h-=2);for(var m=n.openStart;m>=0;m--){var _=(m+h+1)%(n.openStart+1),v=u[_];if(v)for(var y=0;y<o.length;y++){var w=o[(y+d)%o.length],b=!0;w<0&&(b=!1,w=-w);var x=i.node(w-1),C=i.index(w-1);if(x.canReplaceWith(C,C,v.type,v.marks))return this.replace(i.before(w),b?r.after(w):t,new Sw(hx(n.content,0,n.openStart,_),_,n.openEnd))}}for(var k=this.steps.length,E=o.length-1;E>=0&&(this.replace(e,t,n),!(this.steps.length>k));E--){var S=o[E];S<0||(e=i.before(S),t=r.after(S))}return this},Bb.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=function(e,t,n){var i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),n))return t;if(0==i.parentOffset)for(var r=i.depth-1;r>=0;r--){var o=i.index(r);if(i.node(r).canReplaceWith(o,o,n))return i.before(r+1);if(o>0)return null}if(i.parentOffset==i.parent.content.size)for(var s=i.depth-1;s>=0;s--){var a=i.indexAfter(s);if(i.node(s).canReplaceWith(a,a,n))return i.after(s+1);if(a<i.node(s).childCount)return null}}(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new Sw(yw.from(n),0,0))},Bb.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),i=this.doc.resolve(t),r=px(n,i),o=0;o<r.length;o++){var s=r[o],a=o==r.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),i.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),i.indexAfter(s-1))))return this.delete(n.before(s),i.after(s))}for(var l=1;l<=n.depth&&l<=i.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&i.end(l)-t!=i.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};var fx=Object.create(null),gx=function(e,t,n){this.ranges=n||[new _x(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},mx={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};mx.anchor.get=function(){return this.$anchor.pos},mx.head.get=function(){return this.$head.pos},mx.from.get=function(){return this.$from.pos},mx.to.get=function(){return this.$to.pos},mx.$from.get=function(){return this.ranges[0].$from},mx.$to.get=function(){return this.ranges[0].$to},mx.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},gx.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},gx.prototype.replace=function(e,t){void 0===t&&(t=Sw.empty);for(var n=t.content.lastChild,i=null,r=0;r<t.openEnd;r++)i=n,n=n.lastChild;for(var o=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,d=l.$to,u=e.mapping.slice(o);e.replaceRange(u.map(c.pos),u.map(d.pos),a?Sw.empty:t),0==a&&Ex(e,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}},gx.prototype.replaceWith=function(e,t){for(var n=e.steps.length,i=this.ranges,r=0;r<i.length;r++){var o=i[r],s=o.$from,a=o.$to,l=e.mapping.slice(n),c=l.map(s.pos),d=l.map(a.pos);r?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),Ex(e,n,t.isInline?-1:1))}},gx.findFrom=function(e,t,n){var i=e.parent.inlineContent?new vx(e):kx(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(var r=e.depth-1;r>=0;r--){var o=t<0?kx(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):kx(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(o)return o}},gx.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new xx(e.node(0))},gx.atStart=function(e){return kx(e,e,0,0,1)||new xx(e)},gx.atEnd=function(e){return kx(e,e,e.content.size,e.childCount,-1)||new xx(e)},gx.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=fx[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},gx.jsonID=function(e,t){if(e in fx)throw new RangeError("Duplicate use of selection JSON ID "+e);return fx[e]=t,t.prototype.jsonID=e,t},gx.prototype.getBookmark=function(){return vx.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(gx.prototype,mx),gx.prototype.visible=!0;var _x=function(e,t){this.$from=e,this.$to=t},vx=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,i){var r=n.resolve(i.map(this.head));if(!r.parent.inlineContent)return e.near(r);var o=n.resolve(i.map(this.anchor));return new t(o.parent.inlineContent?o:r,r)},t.prototype.replace=function(t,n){if(void 0===n&&(n=Sw.empty),e.prototype.replace.call(this,t,n),n==Sw.empty){var i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new yx(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))},t.between=function(n,i,r){var o=n.pos-i.pos;if(r&&!o||(r=o>=0?1:-1),!i.parent.inlineContent){var s=e.findFrom(i,r,!0)||e.findFrom(i,-r,!0);if(!s)return e.near(i,r);i=s.$head}return n.parent.inlineContent||(0==o||(n=(e.findFrom(n,-r,!0)||e.findFrom(n,r,!0)).$anchor).pos<i.pos!=o<0)&&(n=i),new t(n,i)},Object.defineProperties(t.prototype,n),t}(gx);gx.jsonID("text",vx);var yx=function(e,t){this.anchor=e,this.head=t};yx.prototype.map=function(e){return new yx(e.map(this.anchor),e.map(this.head))},yx.prototype.resolve=function(e){return vx.between(e.resolve(this.anchor),e.resolve(this.head))};var wx=function(e){function t(t){var n=t.nodeAfter,i=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,i),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,i){var r=i.mapResult(this.anchor),o=r.deleted,s=r.pos,a=n.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new Sw(yw.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new bx(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(gx);wx.prototype.visible=!1,gx.jsonID("node",wx);var bx=function(e){this.anchor=e};bx.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,i=t.pos;return n?new yx(i,i):new bx(i)},bx.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&wx.isSelectable(n)?new wx(t):gx.near(t)};var xx=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=Sw.empty),n==Sw.empty){t.delete(0,t.doc.content.size);var i=e.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return Cx},t}(gx);gx.jsonID("all",xx);var Cx={map:function(){return this},resolve:function(e){return new xx(e)}};function kx(e,t,n,i,r,o){if(t.inlineContent)return vx.create(e,n);for(var s=i-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var a=t.child(s);if(a.isAtom){if(!o&&wx.isSelectable(a))return wx.create(e,n-(r<0?a.nodeSize:0))}else{var l=kx(e,a,n+r,r<0?a.childCount:0,r,o);if(l)return l}n+=a.nodeSize*r}}function Ex(e,t,n){var i=e.steps.length-1;if(!(i<t)){var r,o=e.steps[i];if(o instanceof Hb||o instanceof $b)e.mapping.maps[i].forEach((function(e,t,n,i){null==r&&(r=i)})),e.setSelection(gx.near(e.doc.resolve(r),n))}}var Sx=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return kw.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||kw.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var i=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var o=this.doc.resolve(t);r=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,r)),this.selection.empty||this.setSelection(gx.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(Bb);function Ix(e,t){return t&&e?e.bind(t):e}var Ox=function(e,t,n){this.name=e,this.init=Ix(t.init,n),this.apply=Ix(t.apply,n)},Tx=[new Ox("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new Ox("selection",{init:function(e,t){return e.selection||gx.atStart(t.doc)},apply:function(e){return e.selection}}),new Ox("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,i){return i.selection.$cursor?e.storedMarks:null}}),new Ox("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Mx=function(e,t){var n=this;this.schema=e,this.fields=Tx.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new Ox(e.key,e.spec.state,e))}))},Nx=function(e){this.config=e},Ax={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Ax.schema.get=function(){return this.config.schema},Ax.plugins.get=function(){return this.config.plugins},Nx.prototype.apply=function(e){return this.applyTransaction(e).state},Nx.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0},Nx.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),i=null;;){for(var r=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=i?i[o].n:0,l=i?i[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(var d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),r=!0}i&&(i[o]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}},Nx.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new Nx(this.config),n=this.config.fields,i=0;i<n.length;i++){var r=n[i];t[r.name]=r.apply(e,this[r.name],this,t)}for(var o=0;o<Rx.length;o++)Rx[o](this,e,t);return t},Ax.tr.get=function(){return new Sx(this)},Nx.create=function(e){for(var t=new Mx(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Nx(t),i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n},Nx.prototype.reconfigure=function(e){for(var t=new Mx(this.schema,e.plugins),n=t.fields,i=new Nx(t),r=0;r<n.length;r++){var o=n[r].name;i[o]=this.hasOwnProperty(o)?this[o]:n[r].init(e,i)}return i},Nx.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var i=e[n],r=i.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(i,this[i.key]))}return t},Nx.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new Mx(e.schema,e.plugins),r=new Nx(i);return i.fields.forEach((function(i){if("doc"==i.name)r.doc=qw.fromJSON(e.schema,t.doc);else if("selection"==i.name)r.selection=gx.fromJSON(r.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var o in n){var s=n[o],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(r[i.name]=a.fromJSON.call(s,e,t[o],r))}r[i.name]=i.init(e,r)}})),r},Nx.addApplyListener=function(e){Rx.push(e)},Nx.removeApplyListener=function(e){var t=Rx.indexOf(e);t>-1&&Rx.splice(t,1)},Object.defineProperties(Nx.prototype,Ax);var Rx=[];function Dx(e,t,n){for(var i in e){var r=e[i];r instanceof Function?r=r.bind(t):"handleDOMEvents"==i&&(r=Dx(r,t,{})),n[i]=r}return n}var Px=function(e){this.props={},e.props&&Dx(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:Ux("plugin")};Px.prototype.getState=function(e){return e[this.key]};var Lx=Object.create(null);function Ux(e){return e in Lx?e+"$"+ ++Lx[e]:(Lx[e]=0,e+"$")}var Fx=function(e){void 0===e&&(e="key"),this.key=Ux(e)};function Bx(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function jx(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var r=Kx(i);if(!r){var o=i.blockRange(),s=o&&Gb(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}var a=r.nodeBefore;if(!a.type.spec.isolating&&Zx(e,r,t))return!0;if(0==i.parent.content.size&&(Vx(a,"end")||wx.isSelectable(a))){var l=ix(e.doc,i.before(),i.after(),Sw.empty);if(l.slice.size<l.to-l.from){if(t){var c=e.tr.step(l);c.setSelection(Vx(a,"end")?gx.findFrom(c.doc.resolve(c.mapping.map(r.pos,-1)),-1):wx.create(c.doc,r.pos-a.nodeSize)),t(c.scrollIntoView())}return!0}}return!(!a.isAtom||r.depth!=i.depth-1)&&(t&&t(e.tr.delete(r.pos-a.nodeSize,r.pos).scrollIntoView()),!0)}function Vx(e,t,n){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&1!=e.childCount)return!1}return!1}function zx(e,t,n){var i=e.selection,r=i.$head,o=r;if(!i.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=Kx(r)}var s=o&&o.nodeBefore;return!(!s||!wx.isSelectable(s))&&(t&&t(e.tr.setSelection(wx.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}function Kx(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Wx(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size))return!1;var r=$x(i);if(!r)return!1;var o=r.nodeAfter;if(Zx(e,r,t))return!0;if(0==i.parent.content.size&&(Vx(o,"start")||wx.isSelectable(o))){var s=ix(e.doc,i.before(),i.after(),Sw.empty);if(s.slice.size<s.to-s.from){if(t){var a=e.tr.step(s);a.setSelection(Vx(o,"start")?gx.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):wx.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=i.depth-1)&&(t&&t(e.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0)}function Hx(e,t,n){var i=e.selection,r=i.$head,o=r;if(!i.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=$x(r)}var s=o&&o.nodeAfter;return!(!s||!wx.isSelectable(s))&&(t&&t(e.tr.setSelection(wx.create(e.doc,o.pos)).scrollIntoView()),!0)}function $x(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function qx(e,t){var n=e.selection,i=n.$from,r=n.$to,o=i.blockRange(r),s=o&&Gb(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}function Yx(e,t){var n=e.selection,i=n.$head,r=n.$anchor;return!(!i.parent.type.spec.code||!i.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function Gx(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Xx(e,t){var n=e.selection,i=n.$head,r=n.$anchor;if(!i.parent.type.spec.code||!i.sameParent(r))return!1;var o=i.node(-1),s=i.indexAfter(-1),a=Gx(o.contentMatchAt(s));if(!o.canReplaceWith(s,s,a))return!1;if(t){var l=i.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(gx.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function Jx(e,t){var n=e.selection,i=n.$from,r=n.$to;if(n instanceof xx||i.parent.inlineContent||r.parent.inlineContent)return!1;var o=Gx(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){var s=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=e.tr.insert(s,o.createAndFill());a.setSelection(vx.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}function Qx(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(Qb(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var r=n.blockRange(),o=r&&Gb(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)}function Zx(e,t,n){var i,r,o=t.nodeBefore,s=t.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){var i=t.nodeBefore,r=t.nodeAfter,o=t.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!r.isTextblock&&!Zb(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(i=(r=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&r.matchType(i[0]||s.type).validEnd){if(n){for(var l=t.pos+s.nodeSize,c=yw.empty,d=i.length-1;d>=0;d--)c=yw.from(i[d].create(null,c));c=yw.from(o.copy(c));var u=e.tr.step(new $b(t.pos-1,l,t.pos,l,new Sw(c,1,0),i.length,!0)),h=l+2*i.length;Zb(u.doc,h)&&u.join(h),n(u.scrollIntoView())}return!0}var p=gx.findFrom(t,1),f=p&&p.$from.blockRange(p.$to),g=f&&Gb(f);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(f,g).scrollIntoView()),!0;if(a&&Vx(s,"start",!0)&&Vx(o,"end")){for(var m=o,_=[];_.push(m),!m.isTextblock;)m=m.lastChild;for(var v=s,y=1;!v.isTextblock;v=v.firstChild)y++;if(m.canReplace(m.childCount,m.childCount,v.content)){if(n){for(var w=yw.empty,b=_.length-1;b>=0;b--)w=yw.from(_[b].copy(w));n(e.tr.step(new $b(t.pos-_.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new Sw(w,_.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function eC(e){return function(t,n){for(var i=t.selection,r=e<0?i.$from:i.$to,o=r.depth;r.node(o).isInline;){if(!o)return!1;o--}return!!r.node(o).isTextblock&&(n&&n(t.tr.setSelection(vx.create(t.doc,e<0?r.start(o):r.end(o)))),!0)}}Fx.prototype.get=function(e){return e.config.pluginsByKey[this.key]},Fx.prototype.getState=function(e){return e[this.key]};var tC=eC(-1),nC=eC(1);function iC(e,t){return function(n,i){var r=n.selection,o=r.$from,s=r.$to,a=o.blockRange(s),l=a&&Xb(a,e,t);return!!l&&(i&&i(n.tr.wrap(a,l).scrollIntoView()),!0)}}function rC(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,i){for(var r=0;r<e.length;r++)if(e[r](t,n,i))return!0;return!1}}var oC=rC(Bx,jx,zx),sC=rC(Bx,Wx,Hx),aC={Enter:rC(Yx,Jx,Qx,(function(e,t){var n=e.selection,i=n.$from,r=n.$to;if(e.selection instanceof wx&&e.selection.node.isBlock)return!(!i.parentOffset||!Qb(e.doc,i.pos))&&(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(t){var o=r.parentOffset==r.parent.content.size,s=e.tr;(e.selection instanceof vx||e.selection instanceof xx)&&s.deleteSelection();var a=0==i.depth?null:Gx(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=o&&a?[{type:a}]:null,c=Qb(s.doc,s.mapping.map(i.pos),1,l);if(l||c||!Qb(s.doc,s.mapping.map(i.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(s.split(s.mapping.map(i.pos),1,l),!o&&!i.parentOffset&&i.parent.type!=a)){var d=s.mapping.map(i.before()),u=s.doc.resolve(d);i.node(-1).canReplaceWith(u.index(),u.index()+1,a)&&s.setNodeMarkup(s.mapping.map(i.before()),a)}t(s.scrollIntoView())}return!0})),"Mod-Enter":Xx,Backspace:oC,"Mod-Backspace":oC,"Shift-Backspace":oC,Delete:sC,"Mod-Delete":sC,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new xx(e.doc))),!0}},lC={"Ctrl-h":aC.Backspace,"Alt-Backspace":aC["Mod-Backspace"],"Ctrl-d":aC.Delete,"Ctrl-Alt-Backspace":aC["Mod-Delete"],"Alt-Delete":aC["Mod-Delete"],"Alt-d":aC["Mod-Delete"],"Ctrl-a":tC,"Ctrl-e":nC};for(var cC in aC)lC[cC]=aC[cC];function dC(e,t){return function(n,i){var r=n.selection,o=r.$from,s=r.$to,a=o.blockRange(s),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;var d=n.doc.resolve(a.start-2);c=new Ww(d,d,a.depth),a.endIndex<a.parent.childCount&&(a=new Ww(o,n.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var u=Xb(c,e,t,a);return!!u&&(i&&i(function(e,t,n,i,r){for(var o=yw.empty,s=n.length-1;s>=0;s--)o=yw.from(n[s].type.create(n[s].attrs,o));e.step(new $b(t.start-(i?2:0),t.end,t.start,t.end,new Sw(o,0,0),n.length,!0));for(var a=0,l=0;l<n.length;l++)n[l].type==r&&(a=l+1);for(var c=n.length-a,d=t.start+n.length-(i?2:0),u=t.parent,h=t.startIndex,p=t.endIndex,f=!0;h<p;h++,f=!1)!f&&Qb(e.doc,d,c)&&(e.split(d,c),d+=2*c),d+=u.child(h).nodeSize;return e}(n.tr,a,u,l,e).scrollIntoView()),!0)}}function uC(e){return function(t,n){var i=t.selection,r=i.$from,o=i.$to,s=r.blockRange(o,(function(t){return t.childCount&&t.firstChild.type==e}));return!!s&&(!n||(r.node(s.depth-1).type==e?function(e,t,n,i){var r=e.tr,o=i.end,s=i.$to.end(i.depth);o<s&&(r.step(new $b(o-1,s,o,s,new Sw(yw.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new Ww(r.doc.resolve(i.$from.pos),r.doc.resolve(s),i.depth));return t(r.lift(i,Gb(i)).scrollIntoView()),!0}(t,n,e,s):function(e,t,n){for(var i=e.tr,r=n.parent,o=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)o-=r.child(s).nodeSize,i.delete(o-1,o+1);var l=i.doc.resolve(n.start),c=l.nodeAfter;if(i.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var d=0==n.startIndex,u=n.endIndex==r.childCount,h=l.node(-1),p=l.index(-1);if(!h.canReplace(p+(d?0:1),p+1,c.content.append(u?yw.empty:yw.from(r))))return!1;var f=l.pos,g=f+c.nodeSize;return i.step(new $b(f-(d?1:0),g+(u?1:0),f+1,g-1,new Sw((d?yw.empty:yw.from(r.copy(yw.empty))).append(u?yw.empty:yw.from(r.copy(yw.empty))),d?0:1,u?0:1),d?0:1)),t(i.scrollIntoView()),!0}(t,n,s)))}}function hC(e,t,n){for(let i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;let r=e.child(i),o=t.child(i);if(r!=o){if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(let e=0;r.text[e]==o.text[e];e++)n++;return n}if(r.content.size||o.content.size){let e=hC(r.content,o.content,n+1);if(null!=e)return e}n+=r.nodeSize}else n+=r.nodeSize}}function pC(e,t,n,i){for(let r=e.childCount,o=t.childCount;;){if(0==r||0==o)return r==o?null:{a:n,b:i};let s=e.child(--r),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:i};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,i--;return{a:n,b:i}}if(s.content.size||a.content.size){let e=pC(s.content,a.content,n-1,i-1);if(e)return e}n-=l,i-=l}else n-=l,i-=l}}aC.Home=tC,aC.End=nC,"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform();class fC{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,i=0,r){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,i+s,r||null,o)&&a.content.size){let r=s+1;a.nodesBetween(Math.max(0,e-r),Math.min(a.content.size,t-r),n,i+r)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,i){let r="",o=!0;return this.nodesBetween(e,t,((s,a)=>{s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&i?(r+="function"==typeof i?i(s):i,o=!n):!o&&s.isBlock&&(r+=n,o=!0)}),0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,i=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)i.push(e.content[r]);return new fC(i,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],i=0;if(t>e)for(let r=0,o=0;o<t;r++){let s=this.content[r],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),i+=s.nodeSize),o=a}return new fC(n,i)}cutByIndex(e,t){return e==t?fC.empty:0==e&&t==this.content.length?this:new fC(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let i=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new fC(i,r)}addToStart(e){return new fC([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new fC(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let i=this.content[t];e(i,n,t),n+=i.nodeSize}}findDiffStart(e,t=0){return hC(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return pC(this,e,t,n)}findIndex(e,t=-1){if(0==e)return mC(0,e);if(e==this.size)return mC(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let r=i+this.child(n).nodeSize;if(r>=e)return r==e||t>0?mC(n+1,r):mC(n,i);i=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return fC.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new fC(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return fC.empty;let t,n=0;for(let i=0;i<e.length;i++){let r=e[i];n+=r.nodeSize,i&&r.isText&&e[i-1].sameMarkup(r)?(t||(t=e.slice(0,i)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new fC(t||e,n)}static from(e){if(!e)return fC.empty;if(e instanceof fC)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new fC([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}fC.empty=new fC([],0);const gC={index:0,offset:0};function mC(e,t){return gC.index=e,gC.offset=t,gC}function _C(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!_C(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!_C(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class vC{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let i=0;i<e.length;i++){let r=e[i];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,i));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&_C(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return vC.none;if(e instanceof vC)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}vC.none=[];class yC{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=bC(this.content,e+this.openStart,t);return n&&new yC(n,this.openStart,this.openEnd)}removeBetween(e,t){return new yC(wC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return yC.empty;let n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new yC(fC.fromJSON(e,t.content),n,i)}static maxOpen(e,t=!0){let n=0,i=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)i++;return new yC(e,n,i)}}function wC(e,t,n){let{index:i,offset:r}=e.findIndex(t),o=e.maybeChild(i),{index:s,offset:a}=e.findIndex(n);if(r==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(i,o.copy(wC(o.content,t-r-1,n-r-1)))}function bC(e,t,n,i){let{index:r,offset:o}=e.findIndex(t),s=e.maybeChild(r);if(o==t||s.isText)return i&&!i.canReplace(r,r,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=bC(s.content,t-o-1,n);return a&&e.replaceChild(r,s.copy(a))}yC.empty=new yC(fC.empty,0,0);class xC{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new OC(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new OC(this,t,!0);return n.addAll(e,t.from,t.to),yC.maxOpen(n.finish())}matchTag(e,t,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let n=this.tags[i];if(TC(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,i){for(let r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){let i=this.styles[r],o=i.style;if(!(0!=o.indexOf(e)||i.context&&!n.matchesContext(i.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,i=0;for(;i<t.length;i++){let e=t[i];if((null==e.priority?50:e.priority)<n)break}t.splice(i,0,e)}for(let i in e.marks){let t=e.marks[i].spec.parseDOM;t&&t.forEach((e=>{n(e=MC(e)),e.mark=i}))}for(let i in e.nodes){let t=e.nodes[i].spec.parseDOM;t&&t.forEach((e=>{n(e=MC(e)),e.node=i}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new xC(e,xC.schemaRules(e)))}}const CC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},kC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},EC={ol:!0,ul:!0};function SC(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class IC{constructor(e,t,n,i,r,o,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=i,this.solid=r,this.options=s,this.content=[],this.activeMarks=vC.none,this.stashMarks=[],this.match=o||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(fC.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=fC.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(fC.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let i=n[t];(this.type?this.type.allowsMarkType(i.type):NC(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!CC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class OC{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let i,r=t.topNode,o=SC(null,t.preserveWhitespace,0)|(n?4:0);i=r?new IC(r.type,r.attrs,vC.none,vC.none,!0,t.topMatch||r.type.contentMatch,o):new IC(n?null:e.schema.topNodeType,null,vC.none,vC.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style"),n=t?this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;t=n.exec(e);)i.push(t[1],t[2].trim());return i}(t)):null,i=this.top;if(null!=n)for(let e=0;e<n.length;e++)this.addPendingMark(n[e]);if(this.addElement(e),null!=n)for(let e=0;e<n.length;e++)this.removePendingMark(n[e],i)}}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],r=e.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,i=e.nodeName.toLowerCase();EC.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&EC.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(r?r.ignore:kC.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);let t,n=this.top,o=this.needsBlock;if(CC.hasOwnProperty(i))t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=o}else this.addElementByRule(e,r,!1===r.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=vC.none;e:for(let n=0;n<e.length;n+=2)for(let i;;){let r=this.parser.matchStyle(e[n],e[n+1],this,i);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;i=r}return t}addElementByRule(e,t,n){let i,r,o;if(t.node)r=this.parser.schema.nodes[t.node],r.isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):i=this.enter(r,t.attrs||null,t.preserveWhitespace);else{o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o)}let s=this.top;if(r&&r.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}i&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(e,t,n){let i=t||0;for(let r=t?e.childNodes[t]:e.firstChild,o=null==n?null:e.childNodes[n];r!=o;r=r.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(r);this.findAtPoint(e,i)}findPlace(e){let t,n;for(let i=this.open;i>=0;i--){let r=this.nodes[i],o=r.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=r,!o.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let i=0;i<e.marks.length;i++)t.type&&!t.type.allowsMarkType(e.marks[i].type)||(n=e.marks[i].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i}enterInner(e,t=null,n=!1,i){this.closeExtra();let r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e);let o=SC(e,i,r.options);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new IC(e,t,r.activeMarks,r.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)if(null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node)){t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,i=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),r=-(n?n.depth+1:0)+(i?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=r;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&i?this.nodes[s].type:n&&s>=r?n.node(s-r).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let t=i.popFromStashMark(e);t&&i.type&&i.type.allowsMarkType(t.type)&&(i.activeMarks=t.addToSet(i.activeMarks))}if(i==t)break}}}function TC(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function MC(e){let t={};for(let n in e)t[n]=e[n];return t}function NC(e,t){let n=t.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:i,next:r}=e.edge(n);if(i==t)return!0;if(o.indexOf(r)<0&&s(r))return!0}};if(s(r.contentMatch))return!0}}class AC{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=DC(t).createDocumentFragment());let i=n,r=[];return e.forEach((e=>{if(r.length||e.marks.length){let n=0,o=0;for(;n<r.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(r[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}for(;n<r.length;)i=r.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(r.push([n,i]),i.appendChild(s.dom),i=s.contentDOM||s.dom)}}i.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:i}=AC.renderSpec(DC(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let r=this.serializeMark(e.marks[i],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(e,t,n={}){let i=this.marks[e.type.name];return i&&AC.renderSpec(DC(n),i(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));let s=n?e.createElementNS(n,r):e.createElement(r),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let c=l;c<t.length;c++){let r=t[c];if(0===r){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:o}=AC.renderSpec(e,r,n);if(s.appendChild(t),o){if(i)throw new RangeError("Multiple content holes");i=o}}}return{dom:s,contentDOM:i}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new AC(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=RC(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return RC(e.marks)}}function RC(e){let t={};for(let n in e){let i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function DC(e){return e.document||window.document}const PC="undefined"!=typeof navigator?navigator:null,LC="undefined"!=typeof document?document:null,UC=PC&&PC.userAgent||"",FC=/Edge\/(\d+)/.exec(UC),BC=/MSIE \d/.exec(UC),jC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(UC),VC=!!(BC||jC||FC),zC=BC?document.documentMode:jC?+jC[1]:FC?+FC[1]:0,KC=!VC&&/gecko\/(\d+)/i.test(UC);KC&&(/Firefox\/(\d+)/.exec(UC)||[0,0])[1];const WC=!VC&&/Chrome\/(\d+)/.exec(UC),HC=!!WC,$C=WC?+WC[1]:0,qC=!VC&&!!PC&&/Apple Computer/.test(PC.vendor),YC=qC&&(/Mobile\/\w+/.test(UC)||!!PC&&PC.maxTouchPoints>2),GC=YC||!!PC&&/Mac/.test(PC.platform),XC=/Android \d/.test(UC),JC=!!LC&&"webkitFontSmoothing"in LC.documentElement.style,QC=JC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,ZC=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},ek=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let tk=null;const nk=function(e,t,n){let i=tk||(tk=document.createRange());return i.setEnd(e,null==n?e.nodeValue.length:n),i.setStart(e,t||0),i},ik=function(e,t,n,i){return n&&(ok(e,t,n,i,-1)||ok(e,t,n,i,1))},rk=/^(img|br|input|textarea|hr)$/i;function ok(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:sk(e))){let n=e.parentNode;if(!n||1!=n.nodeType||ak(e)||rk.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ZC(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?sk(e):0}}}function sk(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ak(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const lk=function(e){let t=e.isCollapsed;return t&&HC&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function ck(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function dk(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function uk(e,t){return"number"==typeof e?e:e[t]}function hk(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*i}}function pk(e,t,n){let i=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=ek(s)){if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?dk(o):hk(e),l=0,c=0;if(t.top<a.top+uk(i,"top")?c=-(a.top-t.top+uk(r,"top")):t.bottom>a.bottom-uk(i,"bottom")&&(c=t.bottom-a.bottom+uk(r,"bottom")),t.left<a.left+uk(i,"left")?l=-(a.left-t.left+uk(r,"left")):t.right>a.right-uk(i,"right")&&(l=t.right-a.right+uk(r,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,i=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let r=e.scrollLeft-n,o=e.scrollTop-i;t={left:t.left-r,top:t.top-o,right:t.right-r,bottom:t.bottom-o}}if(n)break}}function fk(e){let t=[],n=e.ownerDocument;for(let i=e;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),e!=n);i=ek(i));return t}function gk(e,t){for(let n=0;n<e.length;n++){let{dom:i,top:r,left:o}=e[n];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=o&&(i.scrollLeft=o)}}let mk=null;function _k(e,t){let n,i,r=2e8,o=0,s=t.top,a=t.top;for(let l=e.firstChild,c=0;l;l=l.nextSibling,c++){let e;if(1==l.nodeType)e=l.getClientRects();else{if(3!=l.nodeType)continue;e=nk(l).getClientRects()}for(let d=0;d<e.length;d++){let u=e[d];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);let e=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(e<r){n=l,r=e,i=e&&3==n.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==l.nodeType&&e&&(o=c+(t.left>=(u.left+u.right)/2?1:0));continue}}!n&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(o=c+1)}}return n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(e,r+1),i.setStart(e,r);let n=bk(i,1);if(n.top!=n.bottom&&vk(t,n))return{node:e,offset:r+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,i):!n||r&&1==n.nodeType?{node:e,offset:o}:_k(n,i)}function vk(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function yk(e,t,n){let i=e.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let i=0;i<e.length;i++){let r=e[i];if(vk(t,r))return yk(n,t,r)}}if((o=(o+1)%i)==r)break}return e}function wk(e,t){let n,i=e.dom.ownerDocument,r=0;if(i.caretPositionFromPoint)try{let e=i.caretPositionFromPoint(t.left,t.top);e&&({offsetNode:n,offset:r}=e)}catch(l){}if(!n&&i.caretRangeFromPoint){let e=i.caretRangeFromPoint(t.left,t.top);e&&({startContainer:n,startOffset:r}=e)}let o,s=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top+1);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=e.dom.getBoundingClientRect();if(!vk(t,n))return null;if(s=yk(e.dom,t,n),!s)return null}if(qC)for(let c=s;n&&c;c=ek(c))c.draggable&&(n=void 0);if(s=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(KC&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let e,i=n.childNodes[r];"IMG"==i.nodeName&&(e=i.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&r++}n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(o=function(e,t,n,i){let r=-1;for(let o=t;o!=e.dom;){let t=e.docView.nearestDesc(o,!0);if(!t)return null;if(t.node.isBlock&&t.parent){let e=t.dom.getBoundingClientRect();if(e.left>i.left||e.top>i.top)r=t.posBefore;else{if(!(e.right<i.left||e.bottom<i.top))break;r=t.posAfter}}o=t.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n,1)}(e,n,r,t))}null==o&&(o=function(e,t,n){let{node:i,offset:r}=_k(t,n),o=-1;if(1==i.nodeType&&!i.firstChild){let e=i.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(i,r,o)}(e,s,t));let a=e.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function bk(e,t){let n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}const xk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ck(e,t,n){let{node:i,offset:r}=e.docView.domFromPos(t,n<0?-1:1),o=JC||KC;if(3==i.nodeType){if(!o||!xk.test(i.nodeValue)&&(n<0?r:r!=i.nodeValue.length)){let e=r,t=r,o=n<0?1:-1;return n<0&&!r?(t++,o=-1):n>=0&&r==i.nodeValue.length?(e--,o=1):n<0?e--:t++,kk(bk(nk(i,e,t),o),o<0)}{let e=bk(nk(i,r,r),n);if(KC&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let t=bk(nk(i,r-1,r-1),-1);if(t.top==e.top){let n=bk(nk(i,r,r+1),-1);if(n.top!=e.top)return kk(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t).parent.inlineContent){if(r&&(n<0||r==sk(i))){let e=i.childNodes[r-1];if(1==e.nodeType)return Ek(e.getBoundingClientRect(),!1)}if(r<sk(i)){let e=i.childNodes[r];if(1==e.nodeType)return Ek(e.getBoundingClientRect(),!0)}return Ek(i.getBoundingClientRect(),n>=0)}if(r&&(n<0||r==sk(i))){let e=i.childNodes[r-1],t=3==e.nodeType?nk(e,sk(e)-(o?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return kk(bk(t,1),!1)}if(r<sk(i)){let e=i.childNodes[r];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?nk(e,0,o?0:1):1==e.nodeType?e:null:null;if(t)return kk(bk(t,-1),!0)}return kk(bk(3==i.nodeType?nk(i):i,-n),n>=0)}function kk(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Ek(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Sk(e,t,n){let i=e.state,r=e.root.activeElement;i!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{i!=t&&e.updateState(i),r!=e.dom&&r&&r.focus()}}const Ik=/[\u0590-\u08ac]/;let Ok=null,Tk=null,Mk=!1;function Nk(e,t,n){return Ok==t&&Tk==n?Mk:(Ok=t,Tk=n,Mk="up"==n||"down"==n?function(e,t,n){let i=t.selection,r="up"==n?i.$from:i.$to;return Sk(e,t,(()=>{let{node:t}=e.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}let i=Ck(e,r.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=nk(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let r=t[e];if(r.bottom>r.top+1&&("up"==n?i.top-r.top>2*(r.bottom-i.top):r.bottom-i.bottom>2*(i.bottom-r.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,s=r==i.parent.content.size,a=e.domSelection();return Ik.test(i.parent.textContent)&&a.modify?Sk(e,t,(()=>{let t=a.getRangeAt(0),r=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");let l=!(i.depth?e.docView.domAfterPos(i.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?o:s}(e,t,n))}class Ak{constructor(e,t,n,i){this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let i=this.children[t];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,i;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}{let n,i;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(i):this.posAtEnd}}let i;if(e==this.dom&&this.contentDOM)i=t>ZC(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!1;break}if(t.previousSibling)break}if(null==i&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!0;break}if(t.nextSibling)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,i=e;i;i=i.parentNode){let r,o=this.getDesc(i);if(o&&(!t||o.node)){if(!n||!(r=o.nodeDOM)||(1==r.nodeType?r.contains(1==e.nodeType?e:e.parentNode):r==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let i=e;i;i=i.parentNode){let r=this.getDesc(i);if(r)return r.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let i=this.children[t],r=n+i.size;if(n==e&&r!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<r)return i.descAt(e-n-i.border);n=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};let n,i=0,r=0;for(let o=0;i<this.children.length;i++){let t=this.children[i],n=o+t.size;if(n>e||t instanceof Bk){r=e-o;break}o=n}if(r)return this.children[i].domFromPos(r-this.children[i].border,t);for(;i&&!(n=this.children[i-1]).size&&n instanceof Rk&&n.side>=0;i--);if(t<=0){let e,n=!0;for(;e=i?this.children[i-1]:null,e&&e.dom.parentNode!=this.contentDOM;i--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?ZC(e.dom)+1:0}}{let e,n=!0;for(;e=i<this.children.length?this.children[i]:null,e&&e.dom.parentNode!=this.contentDOM;i++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?ZC(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,r=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==i&&e<=a){let r=o+n.border;if(e>=r&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,r);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){i=ZC(n.dom)+1;break}e-=n.size}-1==i&&(i=0)}if(i>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=ZC(n.dom);break}t+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,i=!1){let r=Math.min(e,t),o=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let s=this.children[h],a=p+s.size;if(r>p&&o<a)return s.setSelection(e-p-s.border,t-p-s.border,n,i);p=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((KC||qC)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,i=e;i;i=i.parentNode){if(n=i.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:ZC(n)+1});break}let e=i.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(KC&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(i=!0)}if(!(i||c&&qC)&&ik(s.node,s.offset,l.anchorNode,l.anchorOffset)&&ik(a.node,a.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||e==t)&&!c){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(u){if(!(u instanceof DOMException))throw u}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,i=0;i<this.children.length;i++){let r=this.children[i],o=n+r.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let i=n+r.border,s=o-r.border;if(e>=i&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=i||t!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-i,t-i):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Rk extends Ak{constructor(e,t,n,i){let r,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>r?r.parent?r.parent.posBeforeChild(r):void 0:i))),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Dk extends Ak{constructor(e,t,n,i){super(e,[],t,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Pk extends Ak{constructor(e,t,n,i){super(e,[],n,i),this.mark=t}static create(e,t,n,i){let r=i.nodeViews[t.type.name],o=r&&r(t,i,n);return o&&o.dom||(o=AC.renderSpec(document,t.type.spec.toDOM(t,n))),new Pk(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let i=Pk.create(this.parent,this.mark,!0,n),r=this.children,o=this.size;t<o&&(r=Qk(r,t,o,n)),e>0&&(r=Qk(r,0,e,n));for(let s=0;s<r.length;s++)r[s].parent=i;return i.children=r,i}}class Lk extends Ak{constructor(e,t,n,i,r,o,s,a,l){super(e,[],r,o),this.node=t,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=s,o&&this.updateChildren(a,l)}static create(e,t,n,i,r,o){let s,a=r.nodeViews[t.type.name],l=a&&a(t,r,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o),n,i),c=l&&l.dom,d=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:d}=AC.renderSpec(document,t.type.spec.toDOM(t)));d||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let u=c;return c=qk(c,n,t),l?s=new jk(e,t,n,i,c,d||null,u,l,r,o+1):t.isText?new Fk(e,t,n,i,c,u,r):new Lk(e,t,n,i,c,d||null,u,r,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>fC.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Yk(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,i=t,r=e.composing?this.localCompositionInfo(e,t):null,o=r&&r.pos>-1?r:null,s=r&&r.pos<0,a=new Xk(this,o&&o.node);!function(e,t,n,i){let r=t.locals(e),o=0;if(0==r.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);i(s,r,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<r.length&&r[s].to==o){let e,t=r[s++];for(;s<r.length&&r[s].to==o;)(e||(e=[t])).push(r[s++]);if(e){e.sort(Jk);for(let t=0;t<e.length;t++)n(e[t],c,!!l)}else n(t,c,!!l)}let d,u;if(l)u=-1,d=l,l=null;else{if(!(c<e.childCount))break;u=c,d=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<r.length&&r[s].from<=o&&r[s].to>o;)a.push(r[s++]);let h=o+d.nodeSize;if(d.isText){let e=h;s<r.length&&r[s].from<e&&(e=r[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<h&&(l=d.cut(e-o),d=d.cut(0,e-o),h=e,u=-1)}i(d,d.isInline&&!d.isLeaf?a.filter((e=>!e.inline)):a.slice(),t.forChild(o,d),u),o=h}}(this.node,this.innerDeco,((t,r,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(r==this.node.childCount?vC.none:this.node.child(r).marks,n,e),a.placeWidget(t,e,i)}),((t,o,l,c)=>{let d;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(d=a.findIndexWithChild(r.node))>-1&&a.updateNodeAt(t,o,l,d,e)||a.updateNextNode(t,o,l,e,c)||a.addNode(t,o,l,e,i),i+=t.nodeSize})),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),Vk(this.contentDOM,this.children,e),YC&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof vx)||n<t||i>t+this.node.content.size)return null;let r=e.domSelection(),o=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=sk(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(r.focusNode,r.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let e=o.nodeValue,r=function(e,t,n,i){for(let r=0,o=0;r<e.childCount&&o<=i;){let s=e.child(r++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;r<e.childCount;){let t=e.child(r++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){let e=a<i?l.lastIndexOf(t,i-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}(this.node.content,e,n-t,i-t);return r<0?null:{node:o,pos:r,text:e}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:i}){if(this.getDesc(t))return;let r=t;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let o=new Dk(this,r,t,i);e.input.compositionNodes.push(o),this.children=Qk(this.children,n,n+i.length,e,o)}update(e,t,n,i){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,i),!0)}updateInner(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Yk(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Hk(this.dom,this.nodeDOM,Wk(this.outerDeco,this.node,t),Wk(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Uk(e,t,n,i,r){return qk(i,t,e),new Lk(void 0,e,t,n,i,i,i,r,0)}class Fk extends Lk{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let i=this.node.cut(e,t),r=document.createTextNode(i.text);return new Fk(this.parent,i,this.outerDeco,this.innerDeco,r,r,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class Bk extends Ak{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class jk extends Lk{constructor(e,t,n,i,r,o,s,a,l,c){super(e,t,n,i,r,o,s,l,c),this.spec=a}update(e,t,n,i){if(3==this.dirty)return!1;if(this.spec.update){let r=this.spec.update(e,t,n);return r&&this.updateInner(e,t,n,i),r}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,i){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Vk(e,t,n){let i=e.firstChild,r=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=i;)i=Gk(i),r=!0;i=i.nextSibling}else r=!0,e.insertBefore(a,i);if(s instanceof Pk){let t=i?i.previousSibling:e.lastChild;Vk(s.contentDOM,s.children,n),i=t?t.nextSibling:e.firstChild}}for(;i;)i=Gk(i),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}const zk=function(e){e&&(this.nodeName=e)};zk.prototype=Object.create(null);const Kk=[new zk];function Wk(e,t,n){if(0==e.length)return Kk;let i=n?Kk[0]:new zk,r=[i];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&r.push(i=new zk(s.nodeName));for(let e in s){let o=s[e];null!=o&&(n&&1==r.length&&r.push(i=new zk(t.isInline?"span":"div")),"class"==e?i.class=(i.class?i.class+" ":"")+o:"style"==e?i.style=(i.style?i.style+";":"")+o:"nodeName"!=e&&(i[e]=o))}}}return r}function Hk(e,t,n,i){if(n==Kk&&i==Kk)return t;let r=t;for(let o=0;o<i.length;o++){let t=i[o],s=n[o];if(o){let n;s&&s.nodeName==t.nodeName&&r!=e&&(n=r.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(r),s=Kk[0]),r=n}$k(r,s||Kk[0],t)}return r}function $k(e,t,n){for(let i in t)"class"==i||"style"==i||"nodeName"==i||i in n||e.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.remove(i[t]);for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.add(r[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=i.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function qk(e,t,n){return Hk(e,e,Kk,Wk(t,n,1!=e.nodeType))}function Yk(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Gk(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Xk{constructor(e,t){this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,i=n.children.length,r=e.childCount,o=new Map,s=[];e:for(;r>0;){let a;for(;;)if(i){let e=n.children[i-1];if(!(e instanceof Pk)){a=e,i--;break}n=e,i=e.children.length}else{if(n==t)break e;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(r-1))break;--r,o.set(a,r),s.push(a)}}return{index:r,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let i=0,r=this.stack.length>>1,o=Math.min(r,e.length);for(;i<o&&(i==r-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&!1!==e[i].type.spec.spanning;)i++;for(;i<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++)if(this.top.children[t].matchesMark(e[r])){i=t;break}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let i=Pk.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,i),this.top=i,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,i){let r,o=-1;if(i>=this.preMatch.index&&(r=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&r.matchesNode(e,t,n))o=this.top.children.indexOf(r,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let i=this.top.children[s];if(i.matchesNode(e,t,n)&&!this.preMatch.matched.has(i)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,i,r){let o=this.top.children[i];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,r)&&(this.destroyBetween(this.index,i),this.index=i+1,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,i,r){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof Lk){let a=this.preMatch.matched.get(s);if(null!=a&&a!=r)return!1;let l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&Yk(t,s.outerDeco)))&&s.update(e,t,n,i))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,n,i,r){this.top.children.splice(this.index++,0,Lk.create(this.top,e,t,n,i,r)),this.changed=!0}placeWidget(e,t,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(e)||e!=i.widget&&i.widget.type.toDOM.parentNode){let i=new Rk(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Pk;)t=e,e=t.children[t.children.length-1];e&&e instanceof Fk&&!/\n$/.test(e.node.text)||((qC||HC)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let i=new Bk(this.top,[],n,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}}function Jk(e,t){return e.type.side-t.type.side}function Qk(e,t,n,i,r){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,d=a+=l.size;c>=n||d<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,i)),r&&(o.push(r),r=void 0),d>n&&o.push(l.slice(n-c,l.size,i)))}return o}function Zk(e,t=null){let n=e.domSelection(),i=e.state.doc;if(!n.focusNode)return null;let r=e.docView.nearestDesc(n.focusNode),o=r&&0==r.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=i.resolve(s);if(lk(n)){for(a=c;r&&!r.node;)r=r.parent;let e=r.node;if(r&&e.isAtom&&wx.isSelectable(e)&&r.parent&&(!e.isInline||!function(e,t,n){for(let i=0==t,r=t==sk(e);i||r;){if(e==n)return!0;let t=ZC(e);if(!(e=e.parentNode))return!1;i=i&&0==t,r=r&&t==sk(e)}}(n.focusNode,n.focusOffset,r.dom))){let e=r.posBefore;l=new wx(s==e?c:i.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;a=i.resolve(t)}if(!l){l=lE(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)}return l}function eE(e){return e.editable?e.hasFocus():dE(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function tE(e,t=!1){let n=e.state.selection;if(sE(e,n),eE(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&HC){let t=e.domSelection(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&ik(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),i=e.cursorWrapper.dom,r="IMG"==i.nodeName;r?n.setEnd(i.parentNode,ZC(i)+1):n.setEnd(i,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&VC&&zC<=11&&(i.disabled=!0,i.disabled=!1)}(e);else{let i,r,{anchor:o,head:s}=n;!nE||n instanceof vx||(n.$from.parent.inlineContent||(i=iE(e,n.from)),n.empty||n.$from.parent.inlineContent||(r=iE(e,n.to))),e.docView.setSelection(o,s,e.root,t),nE&&(i&&oE(i),r&&oE(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelection(),i=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==i&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{eE(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const nE=qC||HC&&$C<63;function iE(e,t){let{node:n,offset:i}=e.docView.domFromPos(t,0),r=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(qC&&r&&"false"==r.contentEditable)return rE(r);if(!(r&&"false"!=r.contentEditable||o&&"false"!=o.contentEditable)){if(r)return rE(r);if(o)return rE(o)}}function rE(e){return e.contentEditable="true",qC&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function oE(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function sE(e,t){if(t instanceof wx){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(aE(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else aE(e)}function aE(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function lE(e,t,n,i){return e.someProp("createSelectionBetween",(i=>i(e,t,n)))||vx.between(t,n,i)}function cE(e){return(!e.editable||e.root.activeElement==e.dom)&&dE(e)}function dE(e){let t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function uE(e,t){let{$anchor:n,$head:i}=e.selection,r=t>0?n.max(i):n.min(i),o=r.parent.inlineContent?r.depth?e.doc.resolve(t>0?r.after():r.before()):null:r;return o&&gx.findFrom(o,t)}function hE(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function pE(e,t,n){let i=e.state.selection;if(!(i instanceof vx)){if(i instanceof wx&&i.node.isInline)return hE(e,new vx(t>0?i.$to:i.$from));{let n=uE(e.state,t);return!!n&&hE(e,n)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let n=uE(e.state,t);return!!(n&&n instanceof wx)&&hE(e,n)}if(!(GC&&n.indexOf("m")>-1)){let n,r=i.$head,o=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText)return!1;let s=t<0?r.pos-o.nodeSize:r.pos;return!!(o.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(wx.isSelectable(o)?hE(e,new wx(t<0?e.state.doc.resolve(r.pos-o.nodeSize):r)):!!JC&&hE(e,new vx(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}function fE(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function gE(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function mE(e){let t=e.domSelection(),n=t.focusNode,i=t.focusOffset;if(!n)return;let r,o,s=!1;for(KC&&1==n.nodeType&&i<fE(n)&&gE(n.childNodes[i])&&(s=!0);;)if(i>0){if(1!=n.nodeType)break;{let e=n.childNodes[i-1];if(gE(e))r=n,o=--i;else{if(3!=e.nodeType)break;n=e,i=n.nodeValue.length}}}else{if(vE(n))break;{let t=n.previousSibling;for(;t&&gE(t);)r=n.parentNode,o=ZC(t),t=t.previousSibling;if(t)n=t,i=fE(n);else{if(n=n.parentNode,n==e.dom)break;i=0}}}s?yE(e,t,n,i):r&&yE(e,t,r,o)}function _E(e){let t=e.domSelection(),n=t.focusNode,i=t.focusOffset;if(!n)return;let r,o,s=fE(n);for(;;)if(i<s){if(1!=n.nodeType)break;if(!gE(n.childNodes[i]))break;r=n,o=++i}else{if(vE(n))break;{let t=n.nextSibling;for(;t&&gE(t);)r=t.parentNode,o=ZC(t)+1,t=t.nextSibling;if(t)n=t,i=0,s=fE(n);else{if(n=n.parentNode,n==e.dom)break;i=s=0}}}r&&yE(e,t,r,o)}function vE(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function yE(e,t,n,i){if(lk(t)){let e=document.createRange();e.setEnd(n,i),e.setStart(n,i),t.removeAllRanges(),t.addRange(e)}else t.extend&&t.extend(n,i);e.domObserver.setCurSelection();let{state:r}=e;setTimeout((()=>{e.state==r&&tE(e)}),50)}function wE(e,t,n){let i=e.state.selection;if(i instanceof vx&&!i.empty||n.indexOf("s")>-1)return!1;if(GC&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=uE(e.state,t);if(n&&n instanceof wx)return hE(e,n)}if(!r.parent.inlineContent){let n=t<0?r:o,s=i instanceof xx?gx.near(n,t):gx.findFrom(n,t);return!!s&&hE(e,s)}return!1}function bE(e,t){if(!(e.state.selection instanceof vx))return!0;let{$head:n,$anchor:i,empty:r}=e.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=e.state.tr;return t<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),e.dispatch(i),!0}return!1}function xE(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function CE(e,t){let n=t.keyCode,i=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||GC&&72==n&&"c"==i?bE(e,-1)||mE(e):46==n||GC&&68==n&&"c"==i?bE(e,1)||_E(e):13==n||27==n||(37==n||GC&&66==n&&"c"==i?pE(e,-1,i)||mE(e):39==n||GC&&70==n&&"c"==i?pE(e,1,i)||_E(e):38==n||GC&&80==n&&"c"==i?wE(e,-1,i)||mE(e):40==n||GC&&78==n&&"c"==i?function(e){if(!qC||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelection();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;xE(e,n,"true"),setTimeout((()=>xE(e,n,"false")),20)}return!1}(e)||wE(e,1,i)||_E(e):i==(GC?"m":"c")&&(66==n||73==n||89==n||90==n))}function kE(e,t){let n=[],{content:i,openStart:r,openEnd:o}=t;for(;r>1&&o>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,o--;let e=i.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),i=e.content}let s=e.someProp("clipboardSerializer")||AC.fromSchema(e.state.schema),a=DE(),l=a.createElement("div");l.appendChild(s.serializeFragment(i,{document:a}));let c,d=l.firstChild,u=0;for(;d&&1==d.nodeType&&(c=AE[d.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),u++}d=l.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${r} ${o}${u?` -${u}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",(e=>e(t)))||t.content.textBetween(0,t.content.size,"\n\n")}}function EE(e,t,n,i,r){let o,s,a=r.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(i||a||!n);if(l){if(e.someProp("transformPastedText",(e=>{t=e(t,a||i)})),a)return t?new yC(fC.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):yC.empty;let n=e.someProp("clipboardTextParser",(e=>e(t,r,i)));if(n)s=n;else{let n=r.marks(),{schema:i}=e.state,s=AC.fromSchema(i);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(i.text(e,n)))}))}}else e.someProp("transformPastedHTML",(e=>{n=e(n)})),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,i=DE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);(n=r&&AE[r[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(i.innerHTML=e,n)for(let o=0;o<n.length;o++)i=i.querySelector(n[o])||i;return i}(n),JC&&function(e){let t=e.querySelectorAll(HC?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let i=t[n];1==i.childNodes.length&&" "==i.textContent&&i.parentNode&&i.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),i)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0&&o.firstChild;u--)o=o.firstChild;if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||xC.fromSchema(e.state.schema);s=t.parseSlice(o,{preserveWhitespace:!(!l&&!d),context:r,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||SE.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(d)s=function(e,t){if(!e.size)return e;let n,i=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(_8){return e}let{content:r,openStart:o,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=i.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;r=fC.from(e.create(n[a+1],r)),o++,s++}return new yC(r,o,s)}(NE(s,+d[1],+d[2]),d[4]);else if(s=yC.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i,r=t.node(n).contentMatchAt(t.index(n)),o=[];if(e.forEach((e=>{if(!o)return;let t,n=r.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&i.length&&OE(n,i,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=TE(o[o.length-1],i.length));let t=IE(e,n);o.push(t),r=r.matchType(t.type),i=n}})),o)return fC.from(o)}return e}(s.content,r),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=NE(s,e,t)}return e.someProp("transformPasted",(e=>{s=e(s)})),s}const SE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function IE(e,t,n=0){for(let i=t.length-1;i>=n;i--)e=t[i].create(null,fC.from(e));return e}function OE(e,t,n,i,r){if(r<e.length&&r<t.length&&e[r]==t[r]){let o=OE(e,t,n,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==e.length-1?n.type:e[r+1]))return i.copy(i.content.append(fC.from(IE(n,e,r+1))))}}function TE(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,TE(e.lastChild,t-1)),i=e.contentMatchAt(e.childCount).fillBefore(fC.empty,!0);return e.copy(n.append(i))}function ME(e,t,n,i,r,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return r<i-1&&(a=ME(a,t,n,i,r+1,o)),r>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||o<=r).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(fC.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function NE(e,t,n){return t<e.openStart&&(e=new yC(ME(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new yC(ME(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const AE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let RE=null;function DE(){return RE||(RE=document.implementation.createHTMLDocument("title"))}const PE={};let LE={};class UE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function FE(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function BE(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>jE(e,t))}))}function jE(e,t){return e.someProp("handleDOMEvents",(n=>{let i=n[t.type];return!!i&&(i(e,t)||t.defaultPrevented)}))}function VE(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function zE(e){return{left:e.clientX,top:e.clientY}}function KE(e,t,n,i,r){if(-1==i)return!1;let o=e.state.doc.resolve(i);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,(t=>s>o.depth?t(e,n,o.nodeAfter,o.before(s),r,!0):t(e,n,o.node(s),o.before(s),r,!1))))return!0;return!1}function WE(e,t,n){e.focused||e.focus();let i=e.state.tr.setSelection(t);"pointer"==n&&i.setMeta("pointer",!0),e.dispatch(i)}function HE(e,t,n,i,r){return KE(e,"handleClickOn",t,n,i)||e.someProp("handleClick",(n=>n(e,t,i)))||(r?function(e,t){if(-1==t)return!1;let n,i,r=e.state.selection;r instanceof wx&&(n=r.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s);if(wx.isSelectable(e)){i=n&&r.$from.depth>0&&s>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(s);break}}return null!=i&&(WE(e,wx.create(e.state.doc,i),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&wx.isSelectable(i))&&(WE(e,new wx(n),"pointer"),!0)}(e,n))}function $E(e,t,n,i){return KE(e,"handleDoubleClickOn",t,n,i)||e.someProp("handleDoubleClick",(n=>n(e,t,i)))}function qE(e,t,n,i){return KE(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",(n=>n(e,t,i)))||function(e,t,n){if(0!=n.button)return!1;let i=e.state.doc;if(-1==t)return!!i.inlineContent&&(WE(e,vx.create(i,0,i.content.size),"pointer"),!0);let r=i.resolve(t);for(let o=r.depth+1;o>0;o--){let t=o>r.depth?r.nodeAfter:r.node(o),n=r.before(o);if(t.inlineContent)WE(e,vx.create(i,n+1,n+1+t.content.size),"pointer");else{if(!wx.isSelectable(t))continue;WE(e,wx.create(i,n),"pointer")}return!0}}(e,n,i)}function YE(e){return tS(e)}LE.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!JE(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!XC||!HC||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!YC||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||CE(e,n)?n.preventDefault():FE(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,ck(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},LE.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},LE.keypress=(e,t)=>{let n=t;if(JE(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||GC&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let i=e.state.selection;if(!(i instanceof vx&&i.$from.sameParent(i.$to))){let t=String.fromCharCode(n.charCode);e.someProp("handleTextInput",(n=>n(e,i.$from.pos,i.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const GE=GC?"metaKey":"ctrlKey";PE.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let i=YE(e),r=Date.now(),o="singleClick";r-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,i=t.y-e.clientY;return n*n+i*i<100}(n,e.input.lastClick)&&!n[GE]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o};let s=e.posAtCoords(zE(n));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new XE(e,s,n,!!i)):("doubleClick"==o?$E:qE)(e,s.pos,s.inside,n)?n.preventDefault():FE(e,"pointer"))};class XE{constructor(e,t,n,i){let r,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[GE],this.allowDefault=n.shiftKey,t.inside>-1)r=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);r=n.parent,o=n.depth?n.before():0}const s=i?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=e.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||l instanceof wx&&l.from<=o&&l.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!KC||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),FE(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>tE(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(zE(e))),this.allowDefault||!t?FE(this.view,"pointer"):HE(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||qC&&this.mightDrag&&!this.mightDrag.node.isAtom||HC&&!(this.view.state.selection instanceof vx)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(WE(this.view,gx.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):FE(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),FE(this.view,"pointer"),0==e.buttons&&this.done()}}function JE(e,t){return!!e.composing||!!(qC&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}PE.touchdown=e=>{YE(e),FE(e,"pointer")},PE.contextmenu=e=>YE(e);const QE=XC?5e3:-1;function ZE(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>tS(e)),t))}function eS(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function tS(e,t=!1){if(!(XC&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),eS(e),t||e.docView&&e.docView.dirty){let t=Zk(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}LE.compositionstart=LE.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),tS(e,!0),e.markCursor=null;else if(tS(e),KC&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelection();for(let e=t.focusNode,n=t.focusOffset;e&&1==e.nodeType&&0!=n;){let i=n<0?e.lastChild:e.childNodes[n-1];if(!i)break;if(3==i.nodeType){t.collapse(i,i.nodeValue.length);break}e=i,n=-1}}e.input.composing=!0}ZE(e,QE)},LE.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,ZE(e,20))};const nS=VC&&zC<15||YC&&QC<604;function iS(e,t,n,i){let r=EE(e,t,n,e.input.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,i,r||yC.empty))))return!0;if(!r)return!1;let o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(r),s=o?e.state.tr.replaceSelectionWith(o,e.input.shiftKey):e.state.tr.replaceSelection(r);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}PE.copy=LE.cut=(e,t)=>{let n=t,i=e.state.selection,r="cut"==n.type;if(i.empty)return;let o=nS?null:n.clipboardData,s=i.content(),{dom:a,text:l}=kE(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},LE.paste=(e,t)=>{let n=t;if(e.composing&&!XC)return;let i=nS?null:n.clipboardData;i&&iS(e,i.getData("text/plain"),i.getData("text/html"),n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,i=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.parentNode&&i.parentNode.removeChild(i),n?iS(e,i.value,null,t):iS(e,i.textContent,i.innerHTML,t)}),50)}(e,n)};class rS{constructor(e,t){this.slice=e,this.move=t}}const oS=GC?"altKey":"ctrlKey";PE.dragstart=(e,t)=>{let n=t,i=e.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=e.state.selection,o=r.empty?null:e.posAtCoords(zE(n));if(o&&o.pos>=r.from&&o.pos<=(r instanceof wx?r.to-1:r.to));else if(i&&i.mightDrag)e.dispatch(e.state.tr.setSelection(wx.create(e.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(wx.create(e.state.doc,t.posBefore)))}let s=e.state.selection.content(),{dom:a,text:l}=kE(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(nS?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",nS||n.dataTransfer.setData("text/plain",l),e.dragging=new rS(s,!n[oS])},PE.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},LE.dragover=LE.dragenter=(e,t)=>t.preventDefault(),LE.drop=(e,t)=>{let n=t,i=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let r=e.posAtCoords(zE(n));if(!r)return;let o=e.state.doc.resolve(r.pos);if(!o)return;let s=i&&i.slice;s?e.someProp("transformPasted",(e=>{s=e(s)})):s=EE(e,n.dataTransfer.getData(nS?"Text":"text/plain"),nS?null:n.dataTransfer.getData("text/html"),!1,o);let a=!(!i||n[oS]);if(e.someProp("handleDrop",(t=>t(e,n,s||yC.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?function(e,t,n){var i=e.resolve(t);if(!n.content.size)return t;for(var r=n.content,o=0;o<n.openStart;o++)r=r.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=i.depth;a>=0;a--){var l=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,c=i.index(a)+(l>0?1:0),d=i.node(a),u=!1;if(1==s)u=d.canReplace(c,c,r);else{var h=d.contentMatchAt(c).findWrapping(r.firstChild.type);u=h&&d.canReplaceWith(c,c,h[0])}if(u)return 0==l?i.pos:l<0?i.before(a+1):i.after(a+1)}return null}(e.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=e.state.tr;a&&c.deleteSelection();let d=c.mapping.map(l),u=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(u?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(h))return;let p=c.doc.resolve(d);if(u&&wx.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new wx(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,i,r)=>t=r)),c.setSelection(lE(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},PE.focus=e=>{e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&tE(e)}),20))},PE.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},PE.beforeinput=(e,t)=>{if(HC&&XC&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,ck(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in LE)PE[os]=LE[os];function sS(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class aS{constructor(e,t){this.toDOM=e,this.spec=t||hS,this.side=this.spec.side||0}map(e,t,n,i){let{pos:r,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new dS(r-n,r-n,this)}valid(){return!0}eq(e){return this==e||e instanceof aS&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&sS(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class lS{constructor(e,t){this.attrs=e,this.spec=t||hS}map(e,t,n,i){let r=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return r>=o?null:new dS(r,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof lS&&sS(this.attrs,e.attrs)&&sS(this.spec,e.spec)}static is(e){return e.type instanceof lS}destroy(){}}class cS{constructor(e,t){this.attrs=e,this.spec=t||hS}map(e,t,n,i){let r=e.mapResult(t.from+i,1);if(r.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=r.pos?null:new dS(r.pos-n,o.pos-n,this)}valid(e,t){let n,{index:i,offset:r}=e.content.findIndex(t.from);return r==t.from&&!(n=e.child(i)).isText&&r+n.nodeSize==t.to}eq(e){return this==e||e instanceof cS&&sS(this.attrs,e.attrs)&&sS(this.spec,e.spec)}destroy(){}}class dS{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new dS(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new dS(e,e,new aS(t,n))}static inline(e,t,n,i){return new dS(e,t,new lS(n,i))}static node(e,t,n,i){return new dS(e,t,new cS(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof lS}}const uS=[],hS={};class pS{constructor(e,t){this.local=e.length?e:uS,this.children=t.length?t:uS}static create(e,t){return t.length?yS(t,e,0,hS):fS}find(e,t,n){let i=[];return this.findInner(null==e?0:e,null==t?1e9:t,i,0,n),i}findInner(e,t,n,i,r){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,i+s,r)}}map(e,t,n){return this==fS||0==e.maps.length?this:this.mapInner(e,t,0,0,n||hS)}mapInner(e,t,n,i,r){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,i);a&&a.type.valid(t,a)?(o||(o=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,i,r,o,s){let a=e.slice(),l=(e,t,n,i)=>{for(let s=0;s<a.length;s+=3){let l,c=a[s+1];if(c<0||e>c+o)continue;let d=a[s]+o;t>=d?a[s+1]=e<=d?-2:-1:n>=r&&(l=i-n-(t-e))&&(a[s]+=l,a[s+1]+=l)}};for(let d=0;d<n.maps.length;d++)n.maps[d].forEach(l);let c=!1;for(let d=0;d<a.length;d+=3)if(a[d+1]<0){if(-2==a[d+1]){c=!0,a[d+1]=-1;continue}let t=n.map(e[d]+o),l=t-r;if(l<0||l>=i.content.size){c=!0;continue}let u=n.map(e[d+1]+o,-1)-r,{index:h,offset:p}=i.content.findIndex(l),f=i.maybeChild(h);if(f&&p==l&&p+f.nodeSize==u){let i=a[d+2].mapInner(n,f,t+1,e[d]+o+1,s);i!=fS?(a[d]=l,a[d+1]=u,a[d+2]=i):(a[d+1]=-2,c=!0)}else c=!0}if(c){let l=yS(function(e,t,n,i,r,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(i,r,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return n}(a,e,t,n,r,o,s),i,0,s);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new pS(t.sort(wS),a)}(this.children,o||[],e,t,n,i,r):o?new pS(o.sort(wS),uS):fS}add(e,t){return t.length?this==fS?pS.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let i,r=0;e.forEach(((e,o)=>{let s,a=o+n;if(s=_S(t,e,a)){for(i||(i=this.children.slice());r<i.length&&i[r]<o;)r+=3;i[r]==o?i[r+2]=i[r+2].addInner(e,s,a+1):i.splice(r,0,o,o+e.nodeSize,yS(s,e,a+1,hS)),r+=3}}));let o=mS(r?vS(t):t,-n);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new pS(o.length?this.local.concat(o).sort(wS):this.local,i||this.children)}remove(e){return 0==e.length||this==fS?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,i=this.local;for(let r=0;r<n.length;r+=3){let i,o=n[r]+t,s=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<s&&(e[n]=null,(i||(i=[])).push(t));if(!i)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(i,o+1);a!=fS?n[r+2]=a:(n.splice(r,3),r-=3)}if(i.length)for(let r,o=0;o<e.length;o++)if(r=e[o])for(let e=0;e<i.length;e++)i[e].eq(r,t)&&(i==this.local&&(i=this.local.slice()),i.splice(e--,1));return n==this.children&&i==this.local?this:i.length||n.length?new pS(i,n):fS}forChild(e,t){if(this==fS)return this;if(t.isLeaf)return pS.empty;let n,i;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let r=e+1,o=r+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<o&&e.to>r&&e.type instanceof lS){let t=Math.max(r,e.from)-r,n=Math.min(o,e.to)-r;t<n&&(i||(i=[])).push(e.copy(t,n))}}if(i){let e=new pS(i.sort(wS),uS);return n?new gS([e,n]):e}return n||fS}eq(e){if(this==e)return!0;if(!(e instanceof pS)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return bS(this.localsInner(e))}localsInner(e){if(this==fS)return uS;if(e.inlineContent||!this.local.some(lS.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof lS||t.push(this.local[n]);return t}}pS.empty=new pS([],[]),pS.removeOverlap=bS;const fS=pS.empty;class gS{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,hS)));return gS.from(n)}forChild(e,t){if(t.isLeaf)return pS.empty;let n=[];for(let i=0;i<this.members.length;i++){let r=this.members[i].forChild(e,t);r!=fS&&(r instanceof gS?n=n.concat(r.members):n.push(r))}return gS.from(n)}eq(e){if(!(e instanceof gS)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let i=0;i<this.members.length;i++){let r=this.members[i].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<r.length;e++)t.push(r[e])}else t=r}return t?bS(n?t:t.sort(wS)):uS}static from(e){switch(e.length){case 0:return fS;case 1:return e[0];default:return new gS(e)}}}function mS(e,t){if(!t||!e.length)return e;let n=[];for(let i=0;i<e.length;i++){let r=e[i];n.push(new dS(r.from+t,r.to+t,r.type))}return n}function _S(e,t,n){if(t.isLeaf)return null;let i=n+t.nodeSize,r=null;for(let o,s=0;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<i&&((r||(r=[])).push(o),e[s]=null);return r}function vS(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function yS(e,t,n,i){let r=[],o=!1;t.forEach(((t,s)=>{let a=_S(e,t,s+n);if(a){o=!0;let e=yS(a,t,n+s+1,i);e!=fS&&r.push(s,s+t.nodeSize,e)}}));let s=mS(o?vS(e):e,-n).sort(wS);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(i.onRemove&&i.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new pS(s,r):fS}function wS(e,t){return e.from-t.from||e.to-t.to}function bS(e){let t=e;for(let n=0;n<t.length-1;n++){let i=t[n];if(i.from!=i.to)for(let r=n+1;r<t.length;r++){let o=t[r];if(o.from!=i.from){o.from<i.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,o.from),xS(t,r,i.copy(o.from,i.to)));break}o.to!=i.to&&(t==e&&(t=e.slice()),t[r]=o.copy(o.from,i.to),xS(t,r+1,o.copy(i.to,o.to)))}}return t}function xS(e,t,n){for(;t<e.length&&wS(n,e[t])>0;)t++;e.splice(t,0,n)}function CS(e){let t=[];return e.someProp("decorations",(n=>{let i=n(e.state);i&&i!=fS&&t.push(i)})),e.cursorWrapper&&t.push(pS.create(e.state.doc,[e.cursorWrapper.deco])),gS.from(t)}const kS={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ES=VC&&zC<=11;class SS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class IS{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SS,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);VC&&zC<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),ES&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&this.observer.observe(this.view.dom,kS),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(cE(this.view)){if(this.suppressingSelectionUpdates)return tE(this.view);if(VC&&zC<=11&&!this.view.state.selection.empty){let e=this.view.domSelection();if(e.focusNode&&ik(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){if(0==e.rangeCount)return!0;let t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let t=this.view.domSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&cE(this.view)&&!this.ignoreSelectionChange(t),i=-1,r=-1,o=!1,s=[];if(this.view.editable)for(let a=0;a<e.length;a++){let t=this.registerMutation(e[a],s);t&&(i=i<0?t.from:Math.min(t.from,i),r=r<0?t.to:Math.max(t.to,r),t.typeOver&&(o=!0))}if(KC&&s.length>1){let e=s.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}(i>-1||n)&&(i>-1&&(this.view.docView.markDirty(i,r),function(e){if(OS)return;OS=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(i,r,o,s),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||tE(this.view),this.currentSelection.set(t))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,r=e.nextSibling;if(VC&&zC<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(i=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(r=o)}let o=i&&i.parentNode==e.target?ZC(i)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=r&&r.parentNode==e.target?ZC(r):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let OS=!1;function TS(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(qC&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||qC&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}function MS(e,t,n,i,r){if(t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Zk(e,t);if(n&&!e.state.selection.eq(n)){let i=e.state.tr.setSelection(n);"pointer"==t?i.setMeta("pointer",!0):"key"==t&&i.scrollIntoView(),e.dispatch(i)}return}let o=e.state.doc.resolve(t),s=o.sharedDepth(n);t=o.before(s+1),n=e.state.doc.resolve(n).after(s+1);let a=e.state.selection,l=function(e,t,n){let i,{node:r,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelection(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(i=[{node:d,offset:c.anchorOffset}],lk(c)||i.push({node:c.focusNode,offset:c.focusOffset})),HC&&8===e.input.lastKeyCode)for(let m=s;m>o;m--){let e=r.childNodes[m-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=m;break}if(!t||t.size)break}let u=e.state.doc,h=e.someProp("domParser")||xC.fromSchema(e.state.schema),p=u.resolve(a),f=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:i,ruleFromNode:TS,context:p});if(i&&null!=i[0].pos){let e=i[0].pos,t=i[1]&&i[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:g,sel:f,from:a,to:l}}(e,t,n);if(HC&&e.cursorWrapper&&l.sel&&l.sel.anchor==e.cursorWrapper.deco.from){let t=e.cursorWrapper.deco.type.toDOM.nextSibling,n=t&&t.nodeValue?t.nodeValue.length:1;l.sel={anchor:l.sel.anchor+n,head:l.sel.anchor+n}}let c,d,u=e.state.doc,h=u.slice(l.from,l.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(c=e.state.selection.to,d="end"):(c=e.state.selection.from,d="start"),e.input.lastKeyCode=null;let p=function(e,t,n,i,r){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==r){i-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.size<t.size){o-=i<=o&&i>=s?o-i:0,a=o+(a-s),s=o}else if(a<o){o-=i<=o&&i>=a?o-i:0,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(h.content,l.doc.content,l.from,c,d);if((YC&&e.input.lastIOSEnter>Date.now()-225||XC)&&r.some((e=>"DIV"==e.nodeName||"P"==e.nodeName))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",(t=>t(e,ck(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!p){if(!(i&&a instanceof vx&&!a.empty&&a.$head.sameParent(a.$anchor))||e.composing||l.sel&&l.sel.anchor!=l.sel.head){if(l.sel){let t=NS(e,e.state.doc,l.sel);t&&!t.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(t))}return}p={start:a.from,endA:a.to,endB:a.to}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof vx&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=l.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=l.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),VC&&zC<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>l.from&&"  "==l.doc.textBetween(p.start-l.from-1,p.start-l.from+1)&&(p.start--,p.endA--,p.endB--);let f,g=l.doc.resolveNoCache(p.start-l.from),m=l.doc.resolveNoCache(p.endB-l.from),_=u.resolve(p.start),v=g.sameParent(m)&&g.parent.inlineContent&&_.end()>=p.endA;if((YC&&e.input.lastIOSEnter>Date.now()-225&&(!v||r.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!v&&g.pos<l.doc.content.size&&(f=gx.findFrom(l.doc.resolve(g.pos+1),1,!0))&&f.head==m.pos)&&e.someProp("handleKeyDown",(t=>t(e,ck(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>p.start&&function(e,t,n,i,r){if(!i.parent.isTextblock||n-t<=r.pos-i.pos||AS(i,!0,!1)<r.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(AS(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||AS(s,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(s.parent.content)}(u,p.start,p.endA,g,m)&&e.someProp("handleKeyDown",(t=>t(e,ck(8,"Backspace")))))return void(XC&&HC&&e.domObserver.suppressSelectionUpdates());HC&&XC&&p.endB==p.start&&(e.input.lastAndroidDelete=Date.now()),XC&&!v&&g.start()!=m.start()&&0==m.parentOffset&&g.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==p.endA&&(p.endB-=2,m=l.doc.resolveNoCache(p.endB-l.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,ck(13,"Enter"))}))}),20));let y,w,b,x=p.start,C=p.endA;if(v)if(g.pos==m.pos)VC&&zC<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>tE(e)),20)),y=e.state.tr.delete(x,C),w=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(b=function(e,t){let n,i,r,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s;for(let d=0;d<s.length;d++)a=s[d].removeFromSet(a);for(let d=0;d<o.length;d++)l=o[d].removeFromSet(l);if(1==a.length&&0==l.length)i=a[0],n="add",r=e=>e.mark(i.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;i=l[0],n="remove",r=e=>e.mark(i.removeFromSet(e.marks))}let c=[];for(let d=0;d<t.childCount;d++)c.push(r(t.child(d)));if(fC.from(c).eq(e))return{mark:i,type:n}}(g.parent.content.cut(g.parentOffset,m.parentOffset),_.parent.content.cut(_.parentOffset,p.endA-_.start()))))y=e.state.tr,"add"==b.type?y.addMark(x,C,b.mark):y.removeMark(x,C,b.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,m.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,x,C,t))))return;y=e.state.tr.insertText(t,x,C)}if(y||(y=e.state.tr.replace(x,C,l.doc.slice(p.start-l.from,p.endB-l.from))),l.sel){let t=NS(e,y.doc,l.sel);t&&!(HC&&XC&&e.composing&&t.empty&&(p.start!=p.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==x||t.head==y.mapping.map(C)-1)||VC&&t.empty&&t.head==x)&&y.setSelection(t)}w&&y.ensureMarks(w),e.dispatch(y.scrollIntoView())}function NS(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:lE(e,t.resolve(n.anchor),t.resolve(n.head))}function AS(e,t,n){let i=e.depth,r=t?e.end():e.pos;for(;i>0&&(t||e.indexAfter(i)==e.node(i).childCount);)i--,r++,t=!1;if(n){let t=e.node(i).maybeChild(e.indexAfter(i));for(;t&&!t.isLeaf;)t=t.firstChild,r++}return r}class RS{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new UE,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(FS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=LS(this),PS(this),this.nodeViews=US(this),this.docView=Uk(this.state.doc,DS(this),CS(this),this.dom,this),this.domObserver=new IS(this,((e,t,n,i)=>MS(this,e,t,n,i))),this.domObserver.start(),function(e){for(let t in PE){let n=PE[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!VE(e,t)||jE(e,t)||!e.editable&&t.type in LE||n(e,t)})}qC&&e.dom.addEventListener("input",(()=>null)),BE(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&BE(this),this._props=e,e.plugins&&(e.plugins.forEach(FS),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,t){let n=this.state,i=!1,r=!1;if(e.storedMarks&&this.composing&&(eS(this),r=!0),this.state=e,t){let e=US(this);(function(e,t){let n=0,i=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let r in t)i++;return n!=i})(e,this.nodeViews)&&(this.nodeViews=e,i=!0),BE(this)}this.editable=LS(this),PS(this);let o=CS(this),s=DS(this),a=t?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",l=i||!this.docView.matchesNode(e.doc,s,o);!l&&e.selection.eq(n.selection)||(r=!0);let c="preserve"==a&&r&&null==this.dom.style.overflowAnchor&&function(e){let t,n,i=e.dom.getBoundingClientRect(),r=Math.max(0,i.top);for(let o=(i.left+i.right)/2,s=r+1;s<Math.min(innerHeight,i.bottom);s+=5){let i=e.root.elementFromPoint(o,s);if(!i||i==e.dom||!e.dom.contains(i))continue;let a=i.getBoundingClientRect();if(a.top>=r-20){t=i,n=a.top;break}}return{refDOM:t,refTop:n,stack:fk(e.dom)}}(this);if(r){this.domObserver.stop();let t=l&&(VC||HC)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(l){let n=HC?this.trackWrites=this.domSelection().focusNode:null;!i&&this.docView.update(e.doc,s,o,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Uk(e.doc,s,o,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelection();return ik(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?tE(this,t):(sE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==a)this.dom.scrollTop=0;else if("to selection"==a){let t=this.domSelection().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(e.selection instanceof wx){let n=this.docView.domAfterPos(e.selection.from);1==n.nodeType&&pk(this,n.getBoundingClientRect(),t)}else pk(this,this.coordsAtPos(e.selection.head,1),t)}else c&&function({refDOM:e,refTop:t,stack:n}){let i=e?e.getBoundingClientRect().top:0;gk(n,0==i?0:i-t)}(c)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,i=this._props&&this._props[e];if(null!=i&&(n=t?t(i):i))return n;for(let o=0;o<this.directPlugins.length;o++){let i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}let r=this.state.plugins;if(r)for(let o=0;o<r.length;o++){let i=r[o].props[e];if(null!=i&&(n=t?t(i):i))return n}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(mk)return e.focus(mk);let t=fk(e);e.focus(null==mk?{get preventScroll(){return mk={preventScroll:!0},!0}}:void 0),mk||(mk=!1,gk(t,0))}(this.dom),tE(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}posAtCoords(e){return wk(this,e)}coordsAtPos(e,t=1){return Ck(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let i=this.docView.posFromDOM(e,t,n);if(null==i)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Nk(this,t||this.state,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],CS(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){jE(e,t)||!PE[t.type]||!e.editable&&t.type in LE||PE[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function DS(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e&&(t.class+=" "+n[e]),"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),[dS.node(0,e.state.doc.content.size,t)]}function PS(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:dS.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function LS(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function US(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function FS(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var BS={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},jS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},VS="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),zS="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),KS="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),WS="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),HS="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),$S=VS&&(WS||+VS[1]<57)||KS&&WS,qS=0;qS<10;qS++)BS[48+qS]=BS[96+qS]=String(qS);for(qS=1;qS<=24;qS++)BS[qS+111]="F"+qS;for(qS=65;qS<=90;qS++)BS[qS]=String.fromCharCode(qS+32),jS[qS]=String.fromCharCode(qS);for(var YS in BS)jS.hasOwnProperty(YS)||(jS[YS]=BS[YS]);var GS="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function XS(e){var t,n,i,r,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);GS?r=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function JS(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function QS(e){var t=function(e){var t=Object.create(null);for(var n in e)t[XS(n)]=e[n];return t}(e);return function(e,n){var i,r=function(e){var t=!($S&&(e.ctrlKey||e.altKey||e.metaKey)||(zS||HS)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?jS:BS)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=1==r.length&&" "!=r,s=t[JS(r,n,!o)];if(s&&s(e.state,e.dispatch,e))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=BS[n.keyCode])&&i!=r){var a=t[JS(i,n,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(o&&n.shiftKey){var l=t[JS(r,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}function ZS(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function eI(e,t){const n=w({},e);return ZS(e)&&ZS(t)&&Object.keys(t).forEach((i=>{ZS(t[i])?i in e?n[i]=eI(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})})),n}function tI(e){return"function"==typeof e}function nI(e,t,...n){return tI(e)?t?e.bind(t)(...n):e(...n):e}function iI(e,t,n){if(void 0===e.config[t]&&e.parent)return iI(e.parent,t,n);if("function"==typeof e.config[t]){return e.config[t].bind(b(w({},n),{parent:e.parent?iI(e.parent,t,n):null}))}return e.config[t]}class rI{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=w(w({},this.config),e),this.name=this.config.name,this.options=this.config.defaultOptions,this.storage=nI(iI(this,"addStorage",{name:this.name,options:this.options}))}static create(e={}){return new rI(e)}configure(e={}){const t=this.extend();return t.options=eI(this.options,e),t}extend(e={}){const t=new rI(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t.storage=nI(iI(t,"addStorage",{name:t.name,options:t.options})),t}}function oI(e,t,n){const{from:i,to:r}=t,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="",l=!0;return e.nodesBetween(i,r,((e,t,n,c)=>{var d;const u=null==s?void 0:s[e.type.name];u?(e.isBlock&&!l&&(a+=o,l=!0),a+=u({node:e,pos:t,parent:n,index:c})):e.isText?(a+=null===(d=null==e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(i,t)-t,r-t),l=!1):e.isBlock&&!l&&(a+=o,l=!0)})),a}function sI(e){return Object.fromEntries(Object.entries(e.nodes).filter((([,e])=>e.spec.toText)).map((([e,t])=>[e,t.spec.toText])))}const aI=rI.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Px({key:new Fx("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:r}=t,{from:o,to:s}=r;return oI(i,{from:o,to:s},{textSerializers:sI(n)})}}})]}});var lI=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame((()=>{e.isDestroyed||t.dom.blur()})),!0)});var cI=Object.freeze({__proto__:null,clearContent:(e=!1)=>({commands:t})=>t.setContent("",e)});var dI=Object.freeze({__proto__:null,clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:r}=i;return r.forEach((i=>{e.doc.nodesBetween(i.$from.pos,i.$to.pos,((e,i)=>{if(e.type.isText)return;const r=t.doc.resolve(t.mapping.map(i)),o=t.doc.resolve(t.mapping.map(i+e.nodeSize)),s=r.blockRange(o);if(!s)return;const a=Gb(s);if(e.type.isTextblock&&n){const{defaultType:e}=r.parent.contentMatchAt(r.index());t.setNodeMarkup(s.start,e)}(a||0===a)&&n&&t.lift(s,a)}))})),!0}});var uI=Object.freeze({__proto__:null,command:e=>t=>e(t)});var hI=Object.freeze({__proto__:null,createParagraphNear:()=>({state:e,dispatch:t})=>Jx(e,t)});function pI(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var fI=Object.freeze({__proto__:null,deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const r=pI(e,n.schema),o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1){if(o.node(e).type===r){if(i){const n=o.before(e),i=o.after(e);t.delete(n,i).scrollIntoView()}return!0}}return!1}});var gI=Object.freeze({__proto__:null,deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:r}=e;return n&&t.delete(i,r),!0}});var mI=Object.freeze({__proto__:null,deleteSelection:()=>({state:e,dispatch:t})=>Bx(e,t)});var _I=Object.freeze({__proto__:null,enter:()=>({commands:e})=>e.keyboardShortcut("Enter")});var vI=Object.freeze({__proto__:null,exitCode:()=>({state:e,dispatch:t})=>Xx(e,t)});function yI(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function wI(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function bI(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every((i=>n.strict?t[i]===e[i]:wI(t[i])?t[i].test(e[i]):t[i]===e[i]))}function xI(e,t,n={}){return e.find((e=>e.type===t&&bI(e.attrs,n)))}function CI(e,t,n={}){return!!xI(e,t,n)}function kI(e,t,n={}){if(!e||!t)return;const i=e.parent.childAfter(e.parentOffset);if(!i.node)return;const r=xI(i.node.marks,t,n);if(!r)return;let o=e.index(),s=e.start()+i.offset,a=o+1,l=s+i.node.nodeSize;for(xI(i.node.marks,t,n);o>0&&r.isInSet(e.parent.child(o-1).marks);)o-=1,s-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&CI(e.parent.child(a).marks,t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}var EI=Object.freeze({__proto__:null,extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:r})=>{const o=yI(e,i.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:d}=a;if(r){const e=kI(l,o,t);if(e&&e.from<=c&&e.to>=d){const t=vx.create(s,e.from,e.to);n.setSelection(t)}}return!0}});var SI=Object.freeze({__proto__:null,first:e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1}});function II(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function OI(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!function(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(e)}var TI=Object.freeze({__proto__:null,focus:(e=null)=>({editor:t,view:n,tr:i,dispatch:r})=>{const o=()=>{(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)&&n.dom.focus(),requestAnimationFrame((()=>{t.isDestroyed||(n.focus(),t.commands.scrollIntoView())}))};if(n.hasFocus()&&null===e||!1===e)return!0;if(r&&null===e&&!(OI(s=t.state.selection)&&s instanceof vx))return o(),!0;var s;const{from:a,to:l}=function(e,t=null){if(!t)return null;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{size:t}=e.doc.content;return{from:t,to:t}}return{from:t,to:t}}(t.state,e)||t.state.selection,{doc:c,storedMarks:d}=i,u=gx.atStart(c).from,h=gx.atEnd(c).to,p=II(a,u,h),f=II(l,u,h),g=vx.create(c,p,f),m=t.state.selection.eq(g);return r&&(m||i.setSelection(g),m&&d&&i.setStoredMarks(d),o()),!0}});var MI=Object.freeze({__proto__:null,forEach:(e,t)=>n=>e.every(((e,i)=>t(e,b(w({},n),{index:i}))))});var NI=Object.freeze({__proto__:null,insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t)});function AI(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function RI(e,t,n){if(n=w({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)?yw.fromArray(e.map((e=>t.nodeFromJSON(e)))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),RI("",t,n)}if("string"==typeof e){const i=vb.fromSchema(t);return n.slice?i.parseSlice(AI(e),n.parseOptions).content:i.parse(AI(e),n.parseOptions)}return RI("",t,n)}var DI=Object.freeze({__proto__:null,insertContentAt:(e,t,n)=>({tr:i,dispatch:r,editor:o})=>{if(r){n=w({parseOptions:{},updateSelection:!0},n);const r=RI(t,o.schema,{parseOptions:w({preserveWhitespace:"full"},n.parseOptions)});if("<>"===r.toString())return!0;const{from:s,to:a}="number"==typeof e?{from:e,to:e}:e;i.replaceWith(s,a,r),n.updateSelection&&function(e,t,n){const i=e.steps.length-1;if(i<t)return;const r=e.steps[i];if(!(r instanceof Hb||r instanceof $b))return;const o=e.mapping.maps[i];let s=0;o.forEach(((e,t,n,i)=>{0===s&&(s=i)})),e.setSelection(gx.near(e.doc.resolve(s),n))}(i,i.steps.length-1,1)}return!0}});var PI=Object.freeze({__proto__:null,joinBackward:()=>({state:e,dispatch:t})=>jx(e,t)});var LI=Object.freeze({__proto__:null,joinForward:()=>({state:e,dispatch:t})=>Wx(e,t)});const UI="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var FI=Object.freeze({__proto__:null,keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:r})=>{const o=function(e){const t=e.split(/-(?!$)/);let n,i,r,o,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);UI?o=!0:i=!0}}return n&&(s=`Alt-${s}`),i&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),r&&(s=`Shift-${s}`),s}(e).split(/-(?!$)/),s=o.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction((()=>{n.someProp("handleKeyDown",(e=>e(n,a)))}));return null==l||l.steps.forEach((e=>{const t=e.map(i.mapping);t&&r&&i.maybeStep(t)})),!0}});function BI(e,t,n={}){const{from:i,to:r,empty:o}=e.selection,s=t?pI(t,e.schema):null,a=[];e.doc.nodesBetween(i,r,((e,t)=>{if(e.isText)return;const n=Math.max(i,t),o=Math.min(r,t+e.nodeSize);a.push({node:e,from:n,to:o})}));const l=r-i,c=a.filter((e=>!s||s.name===e.node.type.name)).filter((e=>bI(e.node.attrs,n,{strict:!1})));if(o)return!!c.length;return c.reduce(((e,t)=>e+t.to-t.from),0)>=l}var jI=Object.freeze({__proto__:null,lift:(e,t={})=>({state:n,dispatch:i})=>!!BI(n,pI(e,n.schema),t)&&qx(n,i)});var VI=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:e,dispatch:t})=>Qx(e,t)});var zI=Object.freeze({__proto__:null,liftListItem:e=>({state:t,dispatch:n})=>uC(pI(e,t.schema))(t,n)});var KI=Object.freeze({__proto__:null,newlineInCode:()=>({state:e,dispatch:t})=>Yx(e,t)});function WI(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function HI(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce(((t,i)=>(n.includes(i)||(t[i]=e[i]),t)),{})}var $I=Object.freeze({__proto__:null,resetAttributes:(e,t)=>({tr:n,state:i,dispatch:r})=>{let o=null,s=null;const a=WI("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(o=pI(e,i.schema)),"mark"===a&&(s=yI(e,i.schema)),r&&n.selection.ranges.forEach((e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,i)=>{o&&o===e.type&&n.setNodeMarkup(i,void 0,HI(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((r=>{s===r.type&&n.addMark(i,i+e.nodeSize,s.create(HI(r.attrs,t)))}))}))})),!0)}});var qI=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0)});var YI=Object.freeze({__proto__:null,selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size})});var GI=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:e,dispatch:t})=>zx(e,t)});var XI=Object.freeze({__proto__:null,selectNodeForward:()=>({state:e,dispatch:t})=>Hx(e,t)});var JI=Object.freeze({__proto__:null,selectParentNode:()=>({state:e,dispatch:t})=>function(e,t){var n,i=e.selection,r=i.$from,o=i.to,s=r.sharedDepth(o);return 0!=s&&(n=r.before(s),t&&t(e.tr.setSelection(wx.create(e.doc,n))),!0)}(e,t)});function QI(e,t,n={}){return RI(e,t,{slice:!1,parseOptions:n})}var ZI=Object.freeze({__proto__:null,setContent:(e,t=!1,n={})=>({tr:i,editor:r,dispatch:o})=>{const{doc:s}=i,a=QI(e,r.schema,n),l=vx.create(s,0,s.content.size);return o&&i.setSelection(l).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0}});function eO(e,t){const n=yI(t,e.schema),{from:i,to:r,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,r,(e=>{s.push(...e.marks)}));const a=s.find((e=>e.type.name===n.name));return a?w({},a.attrs):{}}var tO=Object.freeze({__proto__:null,setMark:(e,t={})=>({tr:n,state:i,dispatch:r})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=yI(e,i.schema);if(r)if(s){const e=eO(i,l);n.addStoredMark(l.create(w(w({},e),t)))}else a.forEach((e=>{const r=e.$from.pos,o=e.$to.pos;i.doc.nodesBetween(r,o,((e,i)=>{const s=Math.max(i,r),a=Math.min(i+e.nodeSize,o);e.marks.find((e=>e.type===l))?e.marks.forEach((e=>{l===e.type&&n.addMark(s,a,l.create(w(w({},e.attrs),t)))})):n.addMark(s,a,l.create(t))}))}));return!0}});var nO=Object.freeze({__proto__:null,setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0)});var iO=Object.freeze({__proto__:null,setNode:(e,t={})=>({state:n,dispatch:i})=>{const r=pI(e,n.schema);return(o=r,s=t,function(e,t){var n=e.selection,i=n.from,r=n.to,a=!1;return e.doc.nodesBetween(i,r,(function(t,n){if(a)return!1;if(t.isTextblock&&!t.hasMarkup(o,s))if(t.type==o)a=!0;else{var i=e.doc.resolve(n),r=i.index();a=i.parent.canReplaceWith(r,r+1,o)}})),!!a&&(t&&t(e.tr.setBlockType(i,r,o,s).scrollIntoView()),!0)})(n,i);var o,s}});var rO=Object.freeze({__proto__:null,setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,i=gx.atStart(n).from,r=gx.atEnd(n).to,o=II(e,i,r),s=wx.create(n,o);t.setSelection(s)}return!0}});var oO=Object.freeze({__proto__:null,setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:i,to:r}="number"==typeof e?{from:e,to:e}:e,o=gx.atStart(n).from,s=gx.atEnd(n).to,a=II(i,o,s),l=II(r,o,s),c=vx.create(n,a,l);t.setSelection(c)}return!0}});var sO=Object.freeze({__proto__:null,sinkListItem:e=>({state:t,dispatch:n})=>{const i=pI(e,t.schema);return(r=i,function(e,t){var n=e.selection,i=n.$from,o=n.$to,s=i.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==r}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,c=l.child(a-1);if(c.type!=r)return!1;if(t){var d=c.lastChild&&c.lastChild.type==l.type,u=yw.from(d?r.create():null),h=new Sw(yw.from(r.create(null,yw.from(l.type.create(null,u)))),d?3:1,0),p=s.start,f=s.end;t(e.tr.step(new $b(p-(d?3:1),f,p,f,h,1,!0)).scrollIntoView())}return!0})(t,n);var r}});function aO(e,t,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const i=e.find((e=>e.type===t&&e.name===n));return!!i&&i.attribute.keepOnSplit})))}function lO(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter((e=>null==t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(i)}}var cO=Object.freeze({__proto__:null,splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:r})=>{const{selection:o,doc:s}=t,{$from:a,$to:l}=o,c=aO(r.extensionManager.attributes,a.node().type.name,a.node().attrs);if(o instanceof wx&&o.node.isBlock)return!(!a.parentOffset||!Qb(s,a.pos))&&(i&&(e&&lO(n,r.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const i=l.parentOffset===l.parent.content.size;o instanceof vx&&t.deleteSelection();const s=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let d=i&&s?[{type:s,attrs:c}]:void 0,u=Qb(t.doc,t.mapping.map(a.pos),1,d);if(d||u||!Qb(t.doc,t.mapping.map(a.pos),1,s?[{type:s}]:void 0)||(u=!0,d=s?[{type:s,attrs:c}]:void 0),u&&(t.split(t.mapping.map(a.pos),1,d),s&&!i&&!a.parentOffset&&a.parent.type!==s)){const e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,s)&&t.setNodeMarkup(t.mapping.map(a.before()),s)}e&&lO(n,r.extensionManager.splittableMarks),t.scrollIntoView()}return!0}});var dO=Object.freeze({__proto__:null,splitListItem:e=>({tr:t,state:n,dispatch:i,editor:r})=>{var o;const s=pI(e,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const d=a.node(-1);if(d.type!==s)return!1;const u=r.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let e=yw.empty;const n=a.index(-1)?1:a.index(-2)?2:3;for(let t=a.depth-n;t>=a.depth-3;t-=1)e=yw.from(a.node(t).copy(e));const i=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,r=aO(u,a.node().type.name,a.node().attrs),l=(null===(o=s.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(r))||void 0;e=e.append(yw.from(s.createAndFill(null,l)||void 0));const c=a.before(a.depth-(n-1));t.replace(c,a.after(-i),new Sw(e,4-n,0));let d=-1;t.doc.nodesBetween(c,t.doc.content.size,((e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)})),d>-1&&t.setSelection(vx.near(t.doc.resolve(d))),t.scrollIntoView()}return!0}const h=l.pos===a.end()?d.contentMatchAt(0).defaultType:null,p=aO(u,d.type.name,d.attrs),f=aO(u,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const g=h?[{type:s,attrs:p},{type:h,attrs:f}]:[{type:s,attrs:p}];return!!Qb(t.doc,a.pos,2)&&(i&&t.split(a.pos,2,g).scrollIntoView(),!0)}});function uO(e){return{baseExtensions:e.filter((e=>"extension"===e.type)),nodeExtensions:e.filter((e=>"node"===e.type)),markExtensions:e.filter((e=>"mark"===e.type))}}function hO(e,t){const{nodeExtensions:n}=uO(t),i=n.find((t=>t.name===e));if(!i)return!1;const r=nI(iI(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof r&&r.split(" ").includes("list")}var pO=Object.freeze({__proto__:null,toggleList:(e,t)=>({editor:n,tr:i,state:r,dispatch:o,chain:s,commands:a,can:l})=>{const{extensions:c}=n.extensionManager,d=pI(e,r.schema),u=pI(t,r.schema),{selection:h}=r,{$from:p,$to:f}=h,g=p.blockRange(f);if(!g)return!1;const m=(_=e=>hO(e.type.name,c),e=>function(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}(e.$from,_))(h);var _;if(g.depth>=1&&m&&g.depth-m.depth<=1){if(m.node.type===d)return a.liftListItem(u);if(hO(m.node.type.name,c)&&d.validContent(m.node.content)&&o)return i.setNodeMarkup(m.pos,d),!0}return l().wrapInList(d)?a.wrapInList(d):s().clearNodes().wrapInList(d).run()}});function fO(e,t,n={}){const{empty:i,ranges:r}=e.selection,o=t?yI(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!o||o.name===e.type.name)).find((e=>bI(e.attrs,n,{strict:!1})));let s=0;const a=[];if(r.forEach((({$from:t,$to:n})=>{const i=t.pos,r=n.pos;e.doc.nodesBetween(i,r,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(i,t),o=Math.min(r,t+e.nodeSize);s+=o-n,a.push(...e.marks.map((e=>({mark:e,from:n,to:o}))))}))})),0===s)return!1;const l=a.filter((e=>!o||o.name===e.mark.type.name)).filter((e=>bI(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),c=a.filter((e=>!o||e.mark.type!==o&&e.mark.type.excludes(o))).reduce(((e,t)=>e+t.to-t.from),0);return(l>0?l+c:l)>=s}var gO=Object.freeze({__proto__:null,toggleMark:(e,t={},n={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:o=!1}=n,s=yI(e,i.schema);return fO(i,s,t)?r.unsetMark(s,{extendEmptyMarkRange:o}):r.setMark(s,t)}});var mO=Object.freeze({__proto__:null,toggleNode:(e,t,n={})=>({state:i,commands:r})=>{const o=pI(e,i.schema),s=pI(t,i.schema);return BI(i,o,n)?r.setNode(s):r.setNode(o,n)}});var _O=Object.freeze({__proto__:null,toggleWrap:(e,t={})=>({state:n,dispatch:i})=>{const r=pI(e,n.schema);return BI(n,r,t)?qx(n,i):iC(r,t)(n,i)}});var vO=Object.freeze({__proto__:null,undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const r=n[i];let o;if(r.spec.isInputRules&&(o=r.getState(e))){if(t){const t=e.tr,n=o.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(o.text){const n=t.doc.resolve(o.from).marks();t.replaceWith(o.from,o.to,e.schema.text(o.text,n))}else t.delete(o.from,o.to)}return!0}}return!1}});var yO=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:e,state:t,dispatch:n})=>{const{selection:i}=e,{empty:r,ranges:o}=i;return r||n&&Object.entries(t.schema.marks).forEach((([,t])=>{o.forEach((n=>{e.removeMark(n.$from.pos,n.$to.pos,t)}))})),!0}});var wO=Object.freeze({__proto__:null,unsetMark:(e,t={})=>({tr:n,state:i,dispatch:r})=>{var o;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=yI(e,i.schema),{$from:c,empty:d,ranges:u}=a;if(!r)return!0;if(d&&s){let{from:e,to:t}=a;const i=null===(o=c.marks().find((e=>e.type===l)))||void 0===o?void 0:o.attrs,r=kI(c,l,i);r&&(e=r.from,t=r.to),n.removeMark(e,t,l)}else u.forEach((e=>{n.removeMark(e.$from.pos,e.$to.pos,l)}));return n.removeStoredMark(l),!0}});var bO=Object.freeze({__proto__:null,updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:r})=>{let o=null,s=null;const a=WI("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(o=pI(e,i.schema)),"mark"===a&&(s=yI(e,i.schema)),r&&n.selection.ranges.forEach((e=>{const r=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(r,a,((e,i)=>{o&&o===e.type&&n.setNodeMarkup(i,void 0,w(w({},e.attrs),t)),s&&e.marks.length&&e.marks.forEach((o=>{if(s===o.type){const l=Math.max(i,r),c=Math.min(i+e.nodeSize,a);n.addMark(l,c,s.create(w(w({},o.attrs),t)))}}))}))})),!0)}});var xO=Object.freeze({__proto__:null,wrapIn:(e,t={})=>({state:n,dispatch:i})=>{const r=pI(e,n.schema);return!BI(n,r,t)&&iC(r,t)(n,i)}});var CO=Object.freeze({__proto__:null,wrapInList:(e,t={})=>({state:n,dispatch:i})=>dC(pI(e,n.schema),t)(n,i)});const kO=rI.create({name:"commands",addCommands:()=>w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w({},lI),cI),dI),uI),hI),fI),gI),mI),_I),vI),EI),SI),TI),MI),NI),DI),PI),LI),FI),jI),VI),zI),KI),$I),qI),YI),GI),XI),JI),ZI),tO),nO),iO),rO),oO),sO),cO),dO),pO),gO),mO),_O),vO),yO),wO),bO),xO),CO)}),EO=rI.create({name:"editable",addProseMirrorPlugins(){return[new Px({key:new Fx("editable"),props:{editable:()=>this.editor.options.editable}})]}}),SO=rI.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Px({key:new Fx("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),IO=rI.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((({commands:e})=>[()=>e.undoInputRule(),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()])),t=()=>this.editor.commands.first((({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]));return{Enter:()=>this.editor.commands.first((({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()}}}),OO=rI.create({name:"tabindex",addProseMirrorPlugins:()=>[new Px({key:new Fx("tabindex"),props:{attributes:{tabindex:"0"}}})]});var TO=Object.freeze({__proto__:null,ClipboardTextSerializer:aI,Commands:kO,Editable:EO,FocusEvents:SO,Keymap:IO,Tabindex:OO});function MO(e,t){const n=WI("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=pI(t,e.schema),{from:i,to:r}=e.selection,o=[];e.doc.nodesBetween(i,r,(e=>{o.push(e)}));const s=o.reverse().find((e=>e.type.name===n.name));return s?w({},s.attrs):{}}(e,t):"mark"===n?eO(e,t):{}}function NO(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:r}=n,{storedMarks:o}=n;return b(w({},t),{schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return i},get doc(){return r},get tr(){return i=n.selection,r=n.doc,o=n.storedMarks,n}})}class AO{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:i}=t,{tr:r}=n,o=this.buildProps(r);return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(...e)=>{const n=t(...e)(o);return r.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(r),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:i,state:r}=this,{view:o}=i,s=[],a=!!e,l=e||r.tr,c=b(w({},Object.fromEntries(Object.entries(n).map((([e,n])=>[e,(...e)=>{const i=this.buildProps(l,t),r=n(...e)(i);return s.push(r),c}])))),{run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),s.every((e=>!0===e)))});return c}createCan(e){const{rawCommands:t,state:n}=this,i=void 0,r=e||n.tr,o=this.buildProps(r,i),s=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(...e)=>t(...e)(b(w({},o),{dispatch:i}))])));return b(w({},s),{chain:()=>this.createChain(r,i)})}buildProps(e,t=!0){const{rawCommands:n,editor:i,state:r}=this,{view:o}=i;r.storedMarks&&e.setStoredMarks(r.storedMarks);const s={tr:e,editor:i,view:o,state:NO({state:r,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((([e,t])=>[e,(...e)=>t(...e)(s)])))}};return s}}class RO{constructor(e){this.find=e.find,this.handler=e.handler}}function DO(e){var t;const{editor:n,from:i,to:r,text:o,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((e=>e.type.spec.code))))return!1;let d=!1;const u=c.parent.textBetween(Math.max(0,c.parentOffset-500),c.parentOffset,void 0,"￼")+o;return s.forEach((e=>{if(d)return;const t=((e,t)=>{if(wI(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[];return i.push(n.text),i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(u,e.find);if(!t)return;const s=l.state.tr,c=NO({state:l.state,transaction:s}),h={from:i-(t[0].length-o.length),to:r},{commands:p,chain:f,can:g}=new AO({editor:n,state:c});e.handler({state:c,range:h,match:t,commands:p,chain:f,can:g}),s.steps.length&&(s.setMeta(a,{transform:s,from:i,to:r,text:o}),l.dispatch(s),d=!0)})),d}function PO(e){const{editor:t,rules:n}=e,i=new Px({state:{init:()=>null,apply(e,t){const n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(e,r,o,s)=>DO({editor:t,from:r,to:o,text:s,rules:n,plugin:i}),handleDOMEvents:{compositionend:e=>(setTimeout((()=>{const{$cursor:r}=e.state.selection;r&&DO({editor:t,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(e,r){if("Enter"!==r.key)return!1;const{$cursor:o}=e.state.selection;return!!o&&DO({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function LO(e){const{editor:t,state:n,from:i,to:r,rules:o}=e,{commands:s,chain:a,can:l}=new AO({editor:t,state:n});n.doc.nodesBetween(i,r,((e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const c=Math.max(i,t),d=Math.min(r,t+e.content.size),u=e.textBetween(c-t,d-t,void 0,"￼");o.forEach((e=>{((e,t)=>{if(wI(t))return[...e.matchAll(t)];const n=t(e);return n?n.map((t=>{const n=[];return n.push(t.text),n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]})(u,e.find).forEach((t=>{if(void 0===t.index)return;const i=c+t.index+1,r=i+t[0].length,o={from:n.tr.mapping.map(i),to:n.tr.mapping.map(r)};e.handler({state:n,range:o,match:t,commands:s,chain:a,can:l})}))}))}))}function UO(e){const{editor:t,rules:n}=e;let i=!1;const r=new Px({props:{handlePaste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}},appendTransaction:(e,o,s)=>{const a=e[0];if(!a.getMeta("paste")||i)return;const{doc:l,before:c}=a,d=c.content.findDiffStart(l.content),u=c.content.findDiffEnd(l.content);if("number"!=typeof d||!u||d===u.b)return;const h=s.tr,p=NO({state:s,transaction:h});return LO({editor:t,state:p,from:Math.max(d-1,0),to:u.b,rules:n,plugin:r}),h.steps.length?h:void 0},isPasteRules:!0});return r}function FO(e){const t=[],{nodeExtensions:n,markExtensions:i}=uO(e),r=[...n,...i],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach((e=>{const n=iI(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage});if(!n)return;n().forEach((e=>{e.types.forEach((n=>{Object.entries(e.attributes).forEach((([e,i])=>{t.push({type:n,name:e,attribute:w(w({},o),i)})}))}))}))})),r.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},i=iI(e,"addAttributes",n);if(!i)return;const r=i();Object.entries(r).forEach((([n,i])=>{t.push({type:e.name,name:n,attribute:w(w({},o),i)})}))})),t}function BO(...e){return e.filter((e=>!!e)).reduce(((e,t)=>{const n=w({},e);return Object.entries(t).forEach((([e,t])=>{n[e]?n[e]="class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:n[e]=t})),n}),{})}function jO(e,t){return t.filter((e=>e.attribute.rendered)).map((t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]})).reduce(((e,t)=>BO(e,t)),{})}function VO(e,t){return e.style?e:b(w({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const r=t.filter((e=>e.attribute.rendered)).reduce(((e,t)=>{const i=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^\d*(\.\d+)?$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return OI(i)&&console.warn(`[tiptap warn]: BREAKING CHANGE: "parseHTML" for your attribute "${t.name}" returns an object but should return the value itself. If this is expected you can ignore this message. This warning will be removed in one of the next releases. Further information: https://github.com/ueberdosis/tiptap/issues/1863`),null==i?e:b(w({},e),{[t.name]:i})}),{});return w(w({},i),r)}})}function zO(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>("attrs"!==e||!function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t)))}function KO(e,t){return t.nodes[e]||t.marks[e]||null}class WO{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=WO.resolve(e),this.schema=function(e){var t;const n=FO(e),{nodeExtensions:i,markExtensions:r}=uO(e),o=null===(t=i.find((e=>iI(e,"topNode"))))||void 0===t?void 0:t.name,s=Object.fromEntries(i.map((t=>{const i=n.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage},o=e.reduce(((e,n)=>{const i=iI(n,"extendNodeSchema",r);return w(w({},e),i?i(t):{})}),{}),s=zO(b(w({},o),{content:nI(iI(t,"content",r)),marks:nI(iI(t,"marks",r)),group:nI(iI(t,"group",r)),inline:nI(iI(t,"inline",r)),atom:nI(iI(t,"atom",r)),selectable:nI(iI(t,"selectable",r)),draggable:nI(iI(t,"draggable",r)),code:nI(iI(t,"code",r)),defining:nI(iI(t,"defining",r)),isolating:nI(iI(t,"isolating",r)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),a=nI(iI(t,"parseHTML",r));a&&(s.parseDOM=a.map((e=>VO(e,i))));const l=iI(t,"renderHTML",r);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:jO(e,i)}));const c=iI(t,"renderText",r);return c&&(s.toText=c),[t.name,s]}))),a=Object.fromEntries(r.map((t=>{const i=n.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage},o=e.reduce(((e,n)=>{const i=iI(n,"extendMarkSchema",r);return w(w({},e),i?i(t):{})}),{}),s=zO(b(w({},o),{inclusive:nI(iI(t,"inclusive",r)),excludes:nI(iI(t,"excludes",r)),group:nI(iI(t,"group",r)),spanning:nI(iI(t,"spanning",r)),code:nI(iI(t,"code",r)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),a=nI(iI(t,"parseHTML",r));a&&(s.parseDOM=a.map((e=>VO(e,i))));const l=iI(t,"renderHTML",r);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:jO(e,i)})),[t.name,s]})));return new mb({topNode:o,nodes:s,marks:a})}(this.extensions),this.extensions.forEach((e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:KO(e.name,this.schema)};if("mark"===e.type){(null===(t=nI(iI(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const i=iI(e,"onBeforeCreate",n);i&&this.editor.on("beforeCreate",i);const r=iI(e,"onCreate",n);r&&this.editor.on("create",r);const o=iI(e,"onUpdate",n);o&&this.editor.on("update",o);const s=iI(e,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=iI(e,"onTransaction",n);a&&this.editor.on("transaction",a);const l=iI(e,"onFocus",n);l&&this.editor.on("focus",l);const c=iI(e,"onBlur",n);c&&this.editor.on("blur",c);const d=iI(e,"onDestroy",n);d&&this.editor.on("destroy",d)}))}static resolve(e){const t=WO.sort(WO.flatten(e)),n=function(e){const t=e.filter(((t,n)=>e.indexOf(t)!==n));return[...new Set(t)]}(t.map((e=>e.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((e=>`'${e}'`)).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map((e=>{const t=iI(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e})).flat(10)}static sort(e){return e.sort(((e,t)=>{const n=iI(e,"priority")||100,i=iI(t,"priority")||100;return n>i?-1:n<i?1:0}))}get commands(){return this.extensions.reduce(((e,t)=>{const n=iI(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:KO(t.name,this.schema)});return n?w(w({},e),n()):e}),{})}get plugins(){const{editor:e}=this,t=WO.sort([...this.extensions].reverse()),n=[],i=[],r=t.map((t=>{const r={name:t.name,options:t.options,storage:t.storage,editor:e,type:KO(t.name,this.schema)},o=[],s=iI(t,"addKeyboardShortcuts",r);if(s){const t=function(e){return new Px({props:{handleKeyDown:QS(e)}})}(Object.fromEntries(Object.entries(s()).map((([t,n])=>[t,()=>n({editor:e})]))));o.push(t)}const a=iI(t,"addInputRules",r);e.options.enableInputRules&&a&&n.push(...a());const l=iI(t,"addPasteRules",r);e.options.enablePasteRules&&l&&i.push(...l());const c=iI(t,"addProseMirrorPlugins",r);if(c){const e=c();o.push(...e)}return o})).flat();return[PO({editor:e,rules:n}),UO({editor:e,rules:i}),...r]}get attributes(){return FO(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=uO(this.extensions);return Object.fromEntries(t.filter((e=>!!iI(e,"addNodeView"))).map((t=>{const n=this.attributes.filter((e=>e.type===t.name)),i={name:t.name,options:t.options,storage:t.storage,editor:e,type:pI(t.name,this.schema)},r=iI(t,"addNodeView",i);if(!r)return[];return[t.name,(i,o,s,a)=>{const l=jO(i,n);return r()({editor:e,node:i,getPos:s,decorations:a,HTMLAttributes:l,extension:t})}]})))}}class HO extends class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e){const t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}'))}setOptions(e={}){this.options=w(w({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=tI(t)?t(e,this.state.plugins):[...this.state.plugins,e],i=this.state.reconfigure({plugins:n});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"==typeof e?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith(t)))});this.view.updateState(n)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(TO):[],...this.options.extensions].filter((e=>["extension","node","mark"].includes(null==e?void 0:e.type)));this.extensionManager=new WO(e,this)}createCommandManager(){this.commandManager=new AO({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new RS(this.options.element,b(w({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:Nx.create({doc:QI(this.options.content,this.schema,this.options.parseOptions)})}));const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews();this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)})):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),r=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return MO(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,i="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return BI(e,null,n)||fO(e,null,n);const i=WI(t,e.schema);return"node"===i?BI(e,t,n):"mark"===i&&fO(e,t,n)}(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return function(e,t){const n=Tb.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){return oI(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:t,textSerializers:w(w({},n),sI(this.schema))})}get isEmpty(){return function(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){var e;this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),(null==(e=this.css)?void 0:e.parentNode)&&e.parentNode.removeChild(e)}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}class $O{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=w(w({},this.config),e),this.name=this.config.name,this.options=this.config.defaultOptions,this.storage=nI(iI(this,"addStorage",{name:this.name,options:this.options}))}static create(e={}){return new $O(e)}configure(e={}){const t=this.extend();return t.options=eI(this.options,e),t}extend(e={}){const t=new $O(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t.storage=nI(iI(t,"addStorage",{name:t.name,options:t.options})),t}}class qO{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=w(w({},this.config),e),this.name=this.config.name,this.options=this.config.defaultOptions,this.storage=nI(iI(this,"addStorage",{name:this.name,options:this.options}))}static create(e={}){return new qO(e)}configure(e={}){const t=this.extend();return t.options=eI(this.options,e),t}extend(e={}){const t=new qO(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t.storage=nI(iI(t,"addStorage",{name:t.name,options:t.options})),t}}function YO(e){return new RO({find:e.find,handler:({state:t,range:n,match:i})=>{const r=nI(e.getAttributes,void 0,i)||{},o=t.tr.delete(n.from,n.to),s=o.doc.resolve(n.from).blockRange(),a=s&&Xb(s,e.type,r);if(!a)return null;o.wrap(s,a);const l=o.doc.resolve(n.from-1).nodeBefore;l&&l.type===e.type&&Zb(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,l))&&o.join(n.from-1)}})}var GO=function(){};GO.prototype.append=function(e){return e.length?(e=GO.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},GO.prototype.prepend=function(e){return e.length?GO.from(e).append(this):this},GO.prototype.appendInner=function(e){return new JO(this,e)},GO.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?GO.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},GO.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},GO.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},GO.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var i=[];return this.forEach((function(t,n){return i.push(e(t,n))}),t,n),i},GO.from=function(e){return e instanceof GO?e:e&&e.length?new XO(e):GO.empty};var XO=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,i){for(var r=t;r<n;r++)if(!1===e(this.values[r],i+r))return!1},t.prototype.forEachInvertedInner=function(e,t,n,i){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],i+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(GO);GO.empty=new XO([]);var JO=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,i){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),i))&&(!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,i+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,i){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,i+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,i))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(GO),QO=GO,ZO=function(e,t){this.items=e,this.eventCount=t};ZO.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var i,r,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(i=this.remapping(o,this.items.length),r=i.maps.length);var s,a,l=e.tr,c=[],d=[];return this.items.forEach((function(e,t){if(!e.step)return i||(i=n.remapping(o,t+1),r=i.maps.length),r--,void d.push(e);if(i){d.push(new eT(e.map));var u,h=e.step.map(i.slice(r));h&&l.maybeStep(h).doc&&(u=l.mapping.maps[l.mapping.maps.length-1],c.push(new eT(u,null,null,c.length+d.length))),r--,u&&i.appendMap(u,r)}else l.maybeStep(e.step);return e.selection?(s=i?e.selection.map(i.slice(r)):e.selection,a=new ZO(n.items.slice(0,o).append(d.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},ZO.prototype.addTransform=function(e,t,n,i){for(var r=[],o=this.eventCount,s=this.items,a=!i&&s.length?s.get(s.length-1):null,l=0;l<e.steps.length;l++){var c,d=e.steps[l].invert(e.docs[l]),u=new eT(e.mapping.maps[l],d,t);(c=a&&a.merge(u))&&(u=c,l?r.pop():s=s.slice(0,s.length-1)),r.push(u),t&&(o++,t=null),i||(a=u)}var h,p,f,g=o-n.depth;return g>nT&&(p=g,(h=s).forEach((function(e,t){if(e.selection&&0==p--)return f=t,!1})),s=h.slice(f),o-=g),new ZO(s.append(r),o)},ZO.prototype.remapping=function(e,t){var n=new Ub;return this.items.forEach((function(t,i){var r=null!=t.mirrorOffset&&i-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,r)}),e,t),n},ZO.prototype.addMaps=function(e){return 0==this.eventCount?this:new ZO(this.items.append(e.map((function(e){return new eT(e)}))),this.eventCount)},ZO.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],i=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),i);var a=t;this.items.forEach((function(t){var i=r.getMirror(--a);if(null!=i){o=Math.min(o,i);var l=r.maps[i];if(t.step){var c=e.steps[i].invert(e.docs[i]),d=t.selection&&t.selection.map(r.slice(a+1,i));d&&s++,n.push(new eT(l,c,d))}else n.push(new eT(l))}}),i);for(var l=[],c=t;c<o;c++)l.push(new eT(r.maps[c]));var d=this.items.slice(0,i).append(l).append(n),u=new ZO(d,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u},ZO.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},ZO.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,i=[],r=0;return this.items.forEach((function(o,s){if(s>=e)i.push(o),o.selection&&r++;else if(o.step){var a=o.step.map(t.slice(n)),l=a&&a.getMap();if(n--,l&&t.appendMap(l,n),a){var c=o.selection&&o.selection.map(t.slice(n));c&&r++;var d,u=new eT(l.invert(),a,c),h=i.length-1;(d=i.length&&i[h].merge(u))?i[h]=d:i.push(u)}}else o.map&&n--}),this.items.length,0),new ZO(QO.from(i.reverse()),r)},ZO.empty=new ZO(QO.empty,0);var eT=function(e,t,n,i){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i};eT.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new eT(t.getMap().invert(),t,this.selection)}};var tT=function(e,t,n,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i},nT=20;function iT(e){var t=[];return e.forEach((function(e,n,i,r){return t.push(i,r)})),t}function rT(e,t){if(!e)return null;for(var n=[],i=0;i<e.length;i+=2){var r=t.map(e[i],1),o=t.map(e[i+1],-1);r<=o&&n.push(r,o)}return n}function oT(e,t,n,i){var r=lT(t),o=cT.get(t).spec.config,s=(i?e.undone:e.done).popEvent(t,r);if(s){var a=s.selection.resolve(s.transform.doc),l=(i?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,r),c=new tT(i?l:s.remaining,i?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(cT,{redo:i,historyState:c}).scrollIntoView())}}var sT=!1,aT=null;function lT(e){var t=e.plugins;if(aT!=t){sT=!1,aT=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){sT=!0;break}}return sT}var cT=new Fx("history"),dT=new Fx("closeHistory");function uT(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new Px({key:cT,state:{init:function(){return new tT(ZO.empty,ZO.empty,null,0)},apply:function(t,n,i){return function(e,t,n,i){var r,o=n.getMeta(cT);if(o)return o.historyState;n.getMeta(dT)&&(e=new tT(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(cT))return s.getMeta(cT).redo?new tT(e.done.addTransform(n,null,i,lT(t)),e.undone,iT(n.mapping.maps[n.steps.length-1]),e.prevTime):new tT(e.done,e.undone.addTransform(n,null,i,lT(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new tT(e.done.rebased(n,r),e.undone.rebased(n,r),rT(e.prevRanges,n.mapping),e.prevTime):new tT(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),rT(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-i.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,i){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&i>=t[r]&&(n=!0)})),n}(n,e.prevRanges)),l=s?rT(e.prevRanges,n.mapping):iT(n.mapping.maps[n.steps.length-1]);return new tT(e.done.addTransform(n,a?t.selection.getBookmark():null,i,lT(t)),ZO.empty,l,n.time)}(n,i,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n="historyUndo"==t.inputType?hT(e.state,e.dispatch):"historyRedo"==t.inputType&&pT(e.state,e.dispatch);return n&&t.preventDefault(),n}}}})}function hT(e,t){var n=cT.getState(e);return!(!n||0==n.done.eventCount)&&(t&&oT(n,e,t,!1),!0)}function pT(e,t){var n=cT.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&oT(n,e,t,!0),!0)}const fT=rI.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands:()=>({undo:()=>({state:e,dispatch:t})=>hT(e,t),redo:()=>({state:e,dispatch:t})=>pT(e,t)}),addProseMirrorPlugins(){return[uT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),gT=qO.create({name:"textStyle",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:e}){return["span",BO(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=eO(e,this.type);return!!Object.entries(n).some((([,e])=>!!e))||t.unsetMark("textStyle")}}}}),mT=$O.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",BO(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_T=rI.create({name:"textAlign",addOptions:()=>({types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}),addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.every((n=>t.updateAttributes(n,{textAlign:e}))),unsetTextAlign:()=>({commands:e})=>this.options.types.every((t=>e.resetAttributes(t,"textAlign")))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),vT=$O.create({name:"doc",topNode:!0,content:"block+"}),yT=$O.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",addAttributes:()=>({}),parseHTML:()=>[{tag:"p",getAttrs:e=>({})}],renderHTML({node:e,HTMLAttributes:t}){return["p",w({},BO(this.options.HTMLAttributes,t)),0]}}),wT=$O.create({name:"text",group:"inline"});function bT(e){return{default:null,parseHTML:t=>{var n;return null==(n=t.style.getPropertyValue(e))?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>{const n=t[e];return n?{style:`${e}: ${n}`}:{}},keepOnSplit:!0}}const xT=rI.create({name:"textStyleImpl",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{color:bT("color"),"font-size":bT("font-size"),"font-family":bT("font-family"),"font-weight":bT("font-weight"),"font-style":bT("font-style"),"text-decoration-line":bT("text-decoration-line"),"line-height":bT("line-height"),"letter-spacing":bT("letter-spacing")}}],addCommands:()=>({setStyle:e=>({chain:t,commands:n})=>{const{"text-align":i}=e;return ai(i)?i?n.setTextAlign(i):n.unsetTextAlign():t().setMark("textStyle",e).removeEmptyTextStyle().run()}})}),CT=/^(\d+)\.\s$/,kT=$O.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const t=e,{start:n}=t,i=x(t,["start"]);return 1===n?["ol",BO(this.options.HTMLAttributes,i),0]:["ol",BO(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[YO({find:CT,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),ET=/^\s*([-+*])\s$/,ST=$O.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",BO(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[YO({find:ET,type:this.type})]}}),IT=[1,2,3,4,5,6],OT=$O.create({name:"heading",content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML:()=>IT.map((e=>({tag:`h${e}`,attrs:{level:e}}))),renderHTML({node:e,HTMLAttributes:t}){return[`h${IT.includes(e.attrs.level)?e.attrs.level:IT[0]}`,BO(this.options.HTMLAttributes,t),0]},addInputRules(){return IT.map((e=>{return t={find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}},new RO({find:t.find,handler:({state:e,range:n,match:i})=>{const r=e.doc.resolve(n.from),o=nI(t.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}});var t}))}}),TT=$O.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",BO(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:i})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:r}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=i.extensionManager,a=r||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&o){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.setHardBreak()}}});const MT=new DOMParser;class NT extends zo{constructor(e,t){super(),C(this,"_onUpdate",this._register(new xs)),C(this,"onUpdate",this._onUpdate.event),C(this,"_onExit",this._register(new xs)),C(this,"onExit",this._onExit.event),C(this,"_container"),C(this,"_isTargetVisible",!1),this.targetId=e,this.editor=t,this._register(this.editor.view.onPositionUpdated((()=>this._handleRectUpdate())))}_checkTargetVisible(){if(!this.targetId)return!1;return"visible"===this.editor.view.getComputedStyleOfId(this.targetId).visibility}_resizeEditorShell(){const e=this.editor.view.getElementRectById(this.targetId);if(this._isTargetVisible){const t=this._container.scrollHeight;Object.assign(e,{height:t})}this._resizeEditorRect(e)}_resizeEditorRect(e){Object.assign(this._container.style,{position:"absolute",top:`${e.top}px`,left:`${e.left}px`,width:Xi(e.width),height:Xi(e.height)})}_resizeAdjust(){const e=this.editor.view.getElementRectById(this.targetId),t=this._container.querySelector(`.${this.targetId}`);t&&Object.assign(t.style,{height:"auto",minHeight:Xi(e.height)})}_showEditor(e,t){const n=function(e,t,n,i=Ei){const r=new HO({element:e,extensions:[fT,TT,vT,yT,OT,wT,gT,xT,_T.configure({types:["paragraph"],alignments:["left","center","right","justify"],defaultAlignment:""}),ST.configure({itemTypeName:"listItem",HTMLAttributes:{}}),kT.configure({itemTypeName:"listItem",HTMLAttributes:{}}),mT],content:t.innerHTML,onUpdate({editor:e}){const t=MT.parseFromString(e.getHTML(),"text/html");Array.from(t.body.children).forEach((e=>{var n;if(0===e.childNodes.length&&(e.innerHTML="&#8203;"),"BR"===(null==(n=e.lastElementChild)?void 0:n.tagName)){const n=t.createElement("br");n.className="trailingBreak",e.appendChild(n)}})),n(t.body.innerHTML)},onDestroy:i}),o=t.className.split(/\s/i);return r.view.dom.classList.add(...o),r}(e,t,(e=>{this._onUpdate.fire({content:e})}));this.editor.storeRichTextEditor(n),function(e){const{view:t}=e,n=t.state.tr;e.commands.focus(),t.dispatch(n.setSelection(gx.atEnd(n.doc))),e.commands.selectAll()}(n),this._register(function(e,t,n=[]){function i(i){const r=i.target;if(e.contains(r))return;if(n.some((e=>r.closest(e))))return;if(!r.ownerDocument.body.contains(r))return;const o=c_.collect(r);o&&(d_.isCanvasOverlay(o)||d_.isChildOfCanvas(o)||t(i))}const r=new Vo;r.add(Rg(document.body,_g,i)),e.ownerDocument!==document&&r.add(Rg(e.ownerDocument.body,_g,i));return r}(this._container,(()=>{this._onExit.fire()}),[".textEditorExitWhitelist"]))}_handleRectUpdate(){this._resizeEditorShell()}render(e){const t=this.editor.view.getElementById(this.targetId).cloneNode(!0);t.querySelectorAll(".trailingBreak").forEach((e=>e.remove())),e.id="tmp-"+ri();const n=document.createElement("div");e.appendChild(n),n.appendChild(t),this._container=e,t.parentElement.style.display="none";const i=document.createElement("style");i.type="text/css",i.innerHTML='\n    .ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror li {\n  position: relative;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n/* Make sure li selections wrap around markers */\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n/* Protect against generic img rules */\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n}\n\n    *{user-select: auto;}\n    div[contenteditable] {\n      width: auto !important;\n      margin: 0 !important;\n      caret-color: blue;\n    }\n    div[contenteditable] > * { width: 100%; cursor: text !important; }',e.appendChild(i);const r=document.createElement("div");e.appendChild(r),this._showEditor(r,t),this._isTargetVisible=this._checkTargetVisible(),this._resizeEditorShell(),this._isTargetVisible&&this._resizeAdjust()}}class AT extends zo{constructor(e){super(),C(this,"container"),this.props=e}render(e){const t=xp((()=>{return e=this.props,th(U_,lh({color:"rgba(106, 168, 248)",dashed:!0},e),null);var e}));t.mount(e),this.container=e,this._register(jo((()=>t.unmount())))}}var RT=Object.defineProperty,DT=Object.getOwnPropertyDescriptor,PT=(e,t)=>(n,i)=>t(n,i,e);let LT=(s=class extends zo{constructor(e,t){super(),C(this,"_idOfCurrentEditing"),C(this,"_widget"),C(this,"_textHoverWidget"),C(this,"_textHoverNodeId"),C(this,"events",new Vo),this._editor=e,this.contextKeyService=t,this._register(this.events),this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this.handleViewModeChange()}handleContextKeyChangeEvent(e){if(e.affectsSome(new Set([bm.editingMode.key]))){this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.EditText&&this._exitEditing()}e.affectsSome(new Set([bm.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===gm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const e=this._editor.view;this.events.add(e.onDbClick((e=>this.handleDbClick(e)))),this.events.add(e.onMouseEnter(this.onMouseEnter.bind(this))),this.events.add(e.onMouseLeave(this.onMouseLeave.bind(this))),this.events.add(e.onMouseDown(this.onMouseDown.bind(this)))}removeTextHoverWidget(){this._textHoverWidget&&(this._editor.view.removeContentWidget(this._textHoverWidget),this._textHoverWidget=null,this._textHoverNodeId=null)}isMouseInCurrentHoverText(e){const{target:t}=e,{element:n,type:i}=t,r=this.contextKeyService.getContextKeyValue(bm.editingMode.key),o=this._editor.view.getElementFingerPrint(n);return i===r_.Canvas&&r===fm.EditText&&o&&o===this._textHoverNodeId}onMouseDown(e){if(this.isMouseInCurrentHoverText(e))return this.removeTextHoverWidget(),this._exitEditing(),void this.handleDbClick(e);const{targetPath:t}=e.target,n=t[t.length-1];n&&n.fingerprint===this._idOfCurrentEditing||this._exitEditing()}onMouseLeave(e){this.isMouseInCurrentHoverText(e)&&this.removeTextHoverWidget()}onMouseEnter(e){const{target:t}=e,{element:n,type:i}=t,r=this.contextKeyService.getContextKeyValue(bm.editingMode.key),o=this._editor.view.getElementFingerPrint(n);if(o&&o!==this._idOfCurrentEditing&&r===fm.EditText){const e=this._editor.model.getNodeById(o);if(!e)return;if(io(e)){const e=this._editor.view.getElementRectById(o);this._textHoverWidget=new AT(e),this._textHoverNodeId=o,this._editor.view.addContentWidget(this._textHoverWidget,Do.High)}}}handleDbClick(e){const{target:t}=e,{targetPath:n}=t;if(!d_.isChildOfCanvas(n))return;const i=n[n.length-1].fingerprint;io(this._editor.model.getNodeById(i))?this.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key)||(this.contextKeyService.setContext(bm.editingMode.key,fm.EditText),this._editor.recordSelectionChanges((()=>{this._editor.viewModel.setSelectionById(i)})),this._editor.viewModel.toggleVisibility(i,!1),this._idOfCurrentEditing=i,this.showTextEditor(e),this._editor.fork()):console.warn("非文字节点")}showTextEditor(e){const{target:t}=e,{targetPath:n}=t,i=n[n.length-1].fingerprint,r=new NT(i,this._editor);r.onUpdate(this._handleContentChange.bind(this)),r.onExit(this._exitEditing.bind(this)),this._editor.view.addContentWidget(r,Do.High),this._widget=r}_handleContentChange(e){const{content:t}=e;this._editor.add((e=>{e.updateNodeById(this._idOfCurrentEditing,{content:t})}))}_exitEditing(){if(this._widget){this._editor.view.removeContentWidget(this._widget),this._widget=null,this._editor.commitAndMerge(),this.contextKeyService.getContextKeyValue(bm.editingMode.key)===fm.EditText&&(this._editor.viewModel.toggleVisibility(this._idOfCurrentEditing,!0),this.contextKeyService.setContext(bm.editingMode.key,fm.None)),this._idOfCurrentEditing=null;const e=this._editor.getRichTextEditor();e&&(e.destroy(),this._editor.storeRichTextEditor(null))}}},C(s,"ID","editor.contrib.textEdit"),s);LT=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?DT(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&RT(t,n,o),o})([PT(0,Ol),PT(1,Lf)],LT),pm(LT.ID,LT);const UT=Math.PI;function FT(e){const t=e*(180/UT);return t<0?t+360:t}function BT(e){return e*UT/180}class jT{constructor(e,t,n){C(this,"fromX"),C(this,"fromY"),C(this,"targetId"),C(this,"fromRect"),C(this,"scale"),C(this,"fromAngleOfTarget"),C(this,"currentAngleOfTarget"),C(this,"mx"),C(this,"fromAngleOfHandle"),C(this,"originX"),C(this,"originY"),C(this,"startTime"),C(this,"endTime",null),this.editor=n,this.targetId=t;const i=n.view.getViewport();this.scale=i.scale,this.fromX=e.event.posX/this.scale,this.fromY=e.event.posY/this.scale;const r=n.view.getElementRectById(t);if(this.fromRect=r,this.startTime=Date.now(),this.fromRect.mx){let e=this.fromRect.mx?Math.acos(this.fromRect.mx.a):0;this.fromRect.mx.b<0&&(e=-e),this.fromAngleOfTarget=e*(180/UT)}else this.fromAngleOfTarget=0;this.originY=(r.top+r.bottom)/2,this.originX=(r.left+r.right)/2,this.fromAngleOfHandle=FT(Math.atan2(this.fromY-this.originY,this.fromX-this.originX))}isChanged(){return!si(this.currentAngleOfTarget)&&!Ci(this.currentAngleOfTarget,this.fromAngleOfTarget)}shouldHandleDragAction(){return this.endTime&&this.endTime-this.startTime>100}moveTo(e){this.endTime=Date.now();const t=e.event.posX/this.scale,n=e.event.posY/this.scale,i=FT(Math.atan2(n-this.originY,t-this.originX))-this.fromAngleOfHandle;let r=Math.round(this.fromAngleOfTarget+i);r<3&&r>0&&(r=0),r>-3&&r<0&&(r=0),r>180&&(r=r%360-360),r<-180&&(r=r%360+360),this.currentAngleOfTarget=r;const o=BT(r),s={a:Math.cos(o),b:Math.sin(o),c:-Math.sin(o),d:Math.cos(o),tx:0,ty:0};return this.mx=s,s}}class VT extends zo{constructor(e,t,n,i,r){super(),C(this,"_cloned"),C(this,"_border"),C(this,"_queue"),C(this,"_handle"),this._target=e,this._originX=t,this._originY=n,this._fromRect=i,this._editor=r,this._register(this._queue=new Q_)}render(e){this._cloned=this._target.cloneNode(!0);const t=this._cloned.querySelector("web-widget");t&&t.remove(),this._cloned.removeAttribute("data-hide");const n=this._fromRect.mx||b_.Identity;Object.assign(this._cloned.style,{position:"absolute","user-select":"none",left:Xi(this._fromRect.left),top:Xi(this._fromRect.top),width:Xi(this._fromRect.width),height:Xi(this._fromRect.height),margin:"0",transform:qi(n)}),this._border=document.createElement("div"),Object.assign(this._border.style,{position:"absolute",border:"1px solid #c4bec4","user-select":"none",left:Xi(this._fromRect.left),top:Xi(this._fromRect.top),width:Xi(this._fromRect.width),height:Xi(this._fromRect.height),margin:"0","box-sizing":"border-box",transform:qi(n)}),e.appendChild(this._cloned),e.appendChild(this._border);const i=this._editor.view.canvasHostDomNode.contentWindow;this._handle=this._register(new KT(e,this._originX,this._originY,i,this._editor.view.getViewport().scale))}update(e,t,n,i){this._queue.push((()=>{Object.assign(this._cloned.style,{transform:qi(i)}),Object.assign(this._border.style,{transform:qi(i)}),this._handle.update(e,t,n)}))}}const zT="http://www.w3.org/2000/svg";class KT extends zo{constructor(e,t,n,i,r){super(),C(this,"pathTo"),C(this,"arc"),C(this,"angleOriginX"),C(this,"angleOriginY"),this.view=i,this.scale=r;const o=document.createElementNS(zT,"svg"),s=document.createElementNS(zT,"g");o.appendChild(s);const a=document.createElementNS(zT,"path"),l=this.pathTo=document.createElementNS(zT,"path"),c=this.arc=document.createElementNS(zT,"path");s.appendChild(l),s.appendChild(a),s.appendChild(c);const d=e.ownerDocument.body,u=d.getBoundingClientRect();o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("viewBox",`0 0 ${u.width} ${u.height}`),o.setAttribute("width",u.width.toString()),o.setAttribute("height",u.height.toString());for(const f of[a,l,c])f.setAttribute("stroke","#c4bec4"),f.setAttribute("fill","transparent");const{scrollX:h,scrollY:p}=i;this.angleOriginX=t-h,this.angleOriginY=n-p,a.setAttribute("d",`M ${this.angleOriginX} ${this.angleOriginY} h 120`),Object.assign(o.style,{position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px","z-index":"100","user-select":"none","pointer-events":"none"}),d.appendChild(o),this._register(jo((()=>o.remove())))}update(e,t,n){const i=BT(n),r=120*Math.cos(i),o=120*Math.sin(i);let s,a;this.pathTo.setAttribute("d",`M ${this.angleOriginX} ${this.angleOriginY} l ${r} ${o}`),n>0?(s=0,a=n):(s=n+360,a=0),this.arc.setAttribute("d",function(e,t,n,i,r){const o=WT(e,t,n,r),s=WT(e,t,n,i),a=r-i<=180?"0":"1";return["M",o.x,o.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}(this.angleOriginX,this.angleOriginY,80,s,a))}}function WT(e,t,n,i){const r=BT(i);return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}var HT=Object.defineProperty,$T=Object.getOwnPropertyDescriptor,qT=(e,t)=>(n,i)=>t(n,i,e);let YT=(a=class extends zo{constructor(e,t){super(),C(this,"_dragRequest",null),C(this,"_targetWidget",null),C(this,"_tipWidget",null),C(this,"events",new Vo),this._editor=e,this.contextKeyService=t,this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this._register(this.events),this.handleViewModeChange()}handleContextKeyChangeEvent(e){e.affectsSome(new Set([bm.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===gm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const e=this._editor.view;this.events.add(e.onMouseDragStart(this._onDragStart.bind(this))),this.events.add(e.onMouseDrag(this._onDrag.bind(this))),this.events.add(e.onMouseDrop(this._onDrop.bind(this))),this.events.add(e.onMouseDropCanceled(this._onDropCanceled.bind(this)))}_onDragStart(e){const{targetPath:t}=e.target,n=t[t.length-1];let i;d_.isDraggableWidget(t)&&"dragRotate"===n.fingerprint&&(i=n.detail),i&&!this.contextKeyService.getContextKeyValue(bm.isAnimationEditing.key)&&this.contextKeyService.getContextKeyValue(bm.editingMode.key)===fm.Focus&&(this._dragRequest=new jT(e,i,this._editor))}_onDrag(e){if(!this._dragRequest)return;const t=this._dragRequest.moveTo(e);this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.DragRotate&&this.contextKeyService.setContext(bm.editingMode.key,fm.DragRotate),this._dragRequest.shouldHandleDragAction()&&(this._showHints(),this._targetWidget.update(e.event.posX,e.event.posY,this._dragRequest.currentAngleOfTarget,t),this._tipWidget.update(e.event.posX,e.event.posY,`${this._dragRequest.currentAngleOfTarget}°`))}_onDrop(e){if(this._dragRequest){if(this.contextKeyService.getContextKeyValue(bm.editingMode.key)!==fm.DragRotate)throw new Error("500");{const e=this._dragRequest.targetId;this._dragRequest.shouldHandleDragAction()&&this._dragRequest.isChanged()&&this._commit(),this._editor.viewModel.toggleVisibility(e,!0),this.contextKeyService.setContext(bm.editingMode.key,fm.Focus)}this._hideHints(),this._dragRequest=null}}_onDropCanceled(){if(this._dragRequest){if(this.contextKeyService.getContextKeyValue(bm.editingMode.key)===fm.DragRotate){this.contextKeyService.setContext(bm.editingMode.key,fm.None);const e=this._dragRequest.targetId;this._editor.viewModel.toggleVisibility(e,!0),this._editor.recordSelectionChanges((()=>{this._editor.viewModel.setSelectionById(e)}))}this._dragRequest=null}}_commit(){const e=this._editor.view.getViewport();this._editor.transform((t=>{var n;t.updateStyle(this._dragRequest.targetId,{transform:(n=this._dragRequest.currentAngleOfTarget,`rotateZ(${n}deg)`)},e.logicWidth)}))}_showHints(){const e=this._editor.view;if(!this._targetWidget){const{targetId:t,fromRect:n,originX:i,originY:r}=this._dragRequest,o=e.getElementById(t);this._targetWidget=new VT(o,i,r,n,this._editor),e.addContentWidget(this._targetWidget,Do.High,!1),this._editor.viewModel.toggleVisibility(t,!1),this._editor.view.updateOutline((e=>{e.length=0}))}this._tipWidget||(this._tipWidget=new sv(this._editor,this._editor.view.canvasHostDomNode.contentWindow),e.addContentWidget(this._tipWidget,Do.High,!1))}_hideHints(){this._targetWidget&&(this._editor.view.removeContentWidget(this._targetWidget),this._targetWidget=null),this._tipWidget&&(this._editor.view.removeContentWidget(this._tipWidget),this._tipWidget=null)}},C(a,"ID","editor.contrib.rotate"),a);YT=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?$T(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&HT(t,n,o),o})([qT(0,Ol),qT(1,Lf)],YT),pm(YT.ID,YT);hm(new class extends cm{constructor(){super({id:"deleteLeft",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.isAnimationEditing.negate(),bm.editingMode.isEqualTo(fm.Focus),bm.viewMode.isEqualTo(gm.Editing)),primary:Vf.Delete,secondary:[Vf.Backspace]}})}async runEditorCommand(e,t,n){const{model:i,viewModel:r,view:o}=t,s=r.selection.slice().filter((e=>{const t=i.getNodeById(e);return!(uo(t)||co(t))}));if(s.length<=0)return;const a=o.getViewport(),l=function(e){const t=[];e.forEach((e=>{const n=i.getNodeById(e);if(ho(n)){!("fixed"===i.getMatchedStyle(n.id,a.logicWidth).getAttr("position"))&&t.push({parent:n.from,node:n.id})}}));const n=i.getValue().nodes.filter((e=>ho(e))).length;if(t.length>=n)throw new Error("400");return t}(s);t.transform((e=>{if(l.length>0){const[t]=i.queryNodes((e=>co(e))),{orders:n}=i.getChildrenGridAreaInfo(t.id);l.sort(((e,t)=>n.findIndex((t=>t.id===e.node))>n.findIndex((e=>e.id===t.node))?-1:1)).forEach((t=>{e.removeGridNode(t.parent,t.node)}))}e.removeNodes(s),r.initSelection()}));e.get(Lf).setContext(bm.editingMode.key,fm.None)}});const GT=!!navigator.clipboard;class XT{constructor(){C(this,"clipboard",navigator.clipboard)}async set(e){var t;e&&await(null==(t=this.clipboard)?void 0:t.writeText(e))}async get(){var e;let t="";return t=await(null==(e=this.clipboard)?void 0:e.readText()),t}async getData(){var e;let t=null;return t=await(null==(e=this.clipboard)?void 0:e.read()),t}async clear(){var e;await(null==(e=this.clipboard)?void 0:e.writeText(""))}}const JT=new XT;async function QT(e){try{if(!GT)throw new Error("Clipboard API is not supported");await JT.set(e)}catch(t){!function(e){let t="";const n=function(e){const t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top=`${i}px`,n.setAttribute("readonly",""),n.value=e,n}(e);document.body.appendChild(n),t=function(e){let t;if("SELECT"===e.nodeName){const n=e;n.focus(),t=n.value}else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){const n=e,i=n.hasAttribute("readonly");i||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),i||n.removeAttribute("readonly"),t=n.value}else{e.hasAttribute("contenteditable")&&e.focus();const n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),null==n||n.removeAllRanges(),null==n||n.addRange(i),t=(null==n?void 0:n.toString())||""}return t}(n),document.execCommand("copy"),n.remove()}(e)}}const ZT=e=>e&&"object"==typeof e&&!!e.roots&&!!e.nodes&&!!e.styles&&!!e.links,eM=(e,t)=>{const{nodes:n}=t,i=n.find((t=>t.id===e));if(!i)throw new Error("404");const r=[i];let o=[e];do{const e=[];n.forEach((t=>{o.includes(t.from)&&(e.push(t.id),r.push(t))})),o=e}while(o.length>0);return di(r)};var tM,nM,iM,rM,oM,sM;(nM=tM||(tM={}))[nM.Root=0]="Root",nM[nM.Page=1]="Page",nM[nM.Container=2]="Container",nM[nM.Section=3]="Section",nM[nM.Normal=4]="Normal",(rM=iM||(iM={}))[rM.Normal=0]="Normal",rM[rM.AutoLayout=1]="AutoLayout",rM[rM.Other=2]="Other",(sM=oM||(oM={}))[sM.targePage=0]="targePage",sM[sM.targetSections=1]="targetSections",sM[sM.targetSelf=2]="targetSelf",sM[sM.targetContainers=3]="targetContainers";class aM{constructor(e,t,n,i){C(this,"_nodeMap",new Map),C(this,"_targetMap",new Map),C(this,"_cloneIdMap",new Map),C(this,"_appendAllNodes",[]),C(this,"_appendRootNodes",[]),C(this,"_lastSectionNode"),C(this,"_allTargetIsContainer",!1),C(this,"_allTargetFromSingle"),C(this,"_pageGridInfo"),this.fragment=e,this.targetIds=t,this.editor=n,this.i18n=i}do(){return this.graphify(),this.doPaste(),this._appendRootNodes}doPaste(){const e=this.checkPasteType(),{roots:t,nodes:n}=this.fragment,i=[],r=[],o=[];if(t.forEach((e=>{const{isFixed:t,nodeType:s}=this._nodeMap.get(e);if(t)i.push(e);else if(3===s)r.push(e);else if(0===s){let e;n.forEach((t=>{co(t)&&(e=t),ho(t)&&t.from===(null==e?void 0:e.id)&&r.push(t.id)}))}else o.push(e)})),this.pasteFixedNodes(i),this.pasteSectionNodes(r),o.length<=0)return this._appendRootNodes;if(2===e)this.pasteToSelf(t);else if(0===e){const e=this.getCenterPosSection();this.pasteToContainers(o,[e.id])}else if(3===e){let e=[];this._allTargetIsContainer?e=this.targetIds:this._allTargetFromSingle?e=[this._allTargetFromSingle]:To(),e.length>0&&this.pasteToContainers(o,e)}this.handleAnimations()}getMatchedStyleFromFragmentById(e){const{styles:t}=this.fragment,{model:n,view:i}=this.editor,r=i.getViewport(),{breakpoints:o}=n.getValue();return new Gr(Tl(e,t,o,r.logicWidth))}graphify(){const{roots:e,nodes:t}=this.fragment,{model:n,view:i}=this.editor,r=i.getViewport(),[o]=n.queryNodes((e=>co(e)));if(!o)throw new Error("404");if(this._pageGridInfo=n.getChildrenGridAreaInfo(null==o?void 0:o.id),e.length<=0||this.targetIds.length<=0)throw new Error("500");e.forEach((e=>{const n=t.find((t=>t.id===e)),i=this.getMatchedStyleFromFragmentById(e),{nodeType:r,styleType:o,isFixed:s}=lM(n,i.attrs);this._nodeMap.set(e,{id:e,order:n.order,from:n.from,nodeType:r,styleType:o,isFixed:s})})),this.targetIds.forEach((e=>{const t=n.getNodeById(e),i=n.getMatchedStyle(e,null==r?void 0:r.logicWidth),{nodeType:o,styleType:s,isFixed:a}=lM(t,i.attrs);this._targetMap.set(e,{id:e,order:t.order,from:t.from,nodeType:o,styleType:s,isFixed:a})}))}checkPasteType(){const{roots:e}=this.fragment,t=(e,t)=>e>t?-1:1;if(Lr(e.slice(0).sort(t),this.targetIds.slice(0).sort(t)))return 2;const{model:n}=this.editor,i=[],r=[],o=[],s=this.targetIds.length;let a;const l=[];if(this.targetIds.forEach((e=>{const t=this._targetMap.get(e),{nodeType:s,isFixed:c,from:d}=t;if(void 0===a?a=d:d!==a&&(a=null),3===s?c?i.push(e):r.push(e):2===s?i.push(e):1===s&&o.push(e),!c&&1!==s)if(3===s)l.push(e);else{const t=n.getAncestorNodesOfId(e).find((e=>ho(e)));t?l.push(t.id):To()}})),this._allTargetFromSingle=a,this._allTargetIsContainer=r.length+i.length===s,l.length>0){const e=l.sort(((e,t)=>{const n=this.findSectionIndex(e);return this.findSectionIndex(t)>n?1:-1}));this._lastSectionNode=e[0]}return o.length>0?0:this._allTargetIsContainer||this._allTargetFromSingle?3:0}findSectionIndex(e){const{orders:t}=this._pageGridInfo;return t.findIndex((t=>t.id===e))}generateComId(){return`comp-${ri()}`}handleAnimations(){const{model:e}=this.editor,t=e.getValue(),{animations:n,nodes:i}=t,r=new Set(i.map((e=>e.id))),o=Array.from(this._cloneIdMap.entries()).reduce(((e,[t,n])=>(e.set(n,t),e)),new Map),s=[];n.forEach((e=>{const t=e.effects.targetId;if(!r.has(t)){if(!o.has(t))return;e.effects.targetId=o.get(t)}s.push(e)})),t.animations=s}cloneNode(e,t){const n=((e,t)=>{const{styles:n,links:i,triggers:r=[],animations:o=[]}=t,s=eM(e,t),a=s.map((e=>e.id)),l=n.filter((e=>a.includes(e.targetId))),c=i.filter((e=>a.includes(e.targetId))),d=r.filter((e=>a.includes(e.targetId))),u=d.map((e=>e.id)),h=o.filter((e=>u.includes(e.triggerId))),[p]=s;return di({nodes:s,node:p,styles:l,links:c,triggers:d,animations:h})})(e,this.fragment),i=new Map,{node:r,links:o,styles:s,nodes:a,triggers:l=[],animations:c=[]}=n;a.forEach((e=>{const t=this.generateComId();this._cloneIdMap.set(t,e.id),i.set(e.id,t);const n=e.from;e.from=i.get(n),e.id=t})),r.id=i.get(r.id),s.forEach((e=>{e.id=ri();const t=i.get(e.targetId);e.targetId=t})),o.forEach((e=>{e.id=ri();const t=i.get(e.targetId);e.targetId=t}));const d=new Map;return l.forEach((e=>{const t=e.id;e.id=ri(),d.set(t,e.id);const n=i.get(e.targetId);e.targetId=n})),c.forEach((e=>{var t;e.id=ri();const n=d.get(e.triggerId);e.triggerId=n;const r=e.effects.targetId;i.get(r)&&(e.effects.targetId=i.get(r)),(null==(t=e.timeline)?void 0:t.scrollOffsets)&&e.timeline.scrollOffsets.forEach((e=>{ai(e)||(e.target=i.get(e.target))}))})),t&&(r.from=t),di({node:r,nodes:a,links:o,styles:s,animations:c,triggers:l})}createCloneNodesLabel(e){const{model:t}=this.editor,{nodes:n}=t.getValue();e.forEach(((t,i)=>{const{label:r,componentType:o,subType:s}=t.meta;if(!r||((e,t,n,i)=>{const r=e.t(n||t);return new RegExp(`^${r} (\\d+)?$`).test(i)})(this.i18n,o,s,r)){const r=[...n,...e.slice(0,i+1)],o=Ms(this.i18n,r,t.meta.componentType,t.meta.subType);t.meta.label=o}}))}appendFragmentNode(e,t){const{model:n}=this.editor,i=n.getValue(),{nodes:r,styles:o,links:s,node:a,animations:l=[],triggers:c=[]}=e;return this.createCloneNodesLabel(r),r.find((e=>e.id===a.id)).from=t,i.nodes.push(...r),i.styles.push(...o),i.links.push(...s),i.animations.push(...l),i.triggers.push(...c),this._appendAllNodes.push(...r),this._appendRootNodes.push(a),r}pasteFixedNodes(e){var t,n;if(e.length<=0)return;const{model:i}=this.editor,r=e.map((e=>this.cloneNode(e))).sort(((e,t)=>Is(e.node.order,t.node.order))),o=e.sort(((e,t)=>Is(this._nodeMap.get(t).order,this._nodeMap.get(e).order))),[s]=o,a=null!=(n=null==(t=i.getNodeById(s)&&i.getNextSiblingNodeOfId(s))?void 0:t.id)?n:null,l="root";r.forEach((e=>{const[t]=this.appendFragmentNode(e,l);a&&i.reparentNode(t.id,l,a)}))}pasteSectionNodes(e){var t,n,i,r;if(e.length<=0)return;const{model:o}=this.editor,s=e.map((e=>this.cloneNode(e))).sort(((e,t)=>{const n=this._cloneIdMap.get(e.node.id),i=this._cloneIdMap.get(t.node.id),r=this.getMatchedStyleFromFragmentById(n),o=this.getMatchedStyleFromFragmentById(i),{rowStart:s,columnStart:a}=Er(r.attrs),{rowStart:l,columnStart:c}=Er(o.attrs);return l>s||a>c?-1:1}));let a=this._lastSectionNode;if(!this._lastSectionNode){const e=s[s.length-1];a=this._cloneIdMap.get(e.node.id)}if(!a)throw new Error("404");const[l]=o.queryNodes(co),c=l.id,{rowsTemplate:d}=this._pageGridInfo,u=e.map((()=>"auto"));o.updateAllBpStyles(c,{"grid-template-rows":ir([...d,...u])},!1);const h=null!=(n=o.getNodeById(a)&&(null==(t=o.getNextSiblingNodeOfId(a))?void 0:t.id))?n:null,p=this.findSectionIndex(a),f=null!=(r=null==(i=-1!==p&&this._pageGridInfo.orders[p+1])?void 0:i.id)?r:null;s.forEach((e=>{const[t]=this.appendFragmentNode(e,c);o.reparentNode(t.id,c,h),o.reorderGridNode(c,f,t.id)}))}pasteToContainers(e,t){const{model:n}=this.editor;t.forEach((t=>{var i,r;const o=e.map((e=>this.cloneNode(e))).sort(((e,t)=>Is(e.node.order,t.node.order))),s=this.targetIds.map((e=>n.getNodeById(e))).filter((e=>e.from===t)).sort(((e,t)=>Is(e.order,t.order)));let a=null;if(s.length>0){const e=s[s.length-1],t=n.getNodeById(e.id);a=null!=(r=null==(i=t&&n.getNextSiblingNodeOfId(e.id))?void 0:i.id)?r:null}o.forEach((e=>{const[i]=this.appendFragmentNode(e,t);n.reparentNode(i.id,t,a),this.checkChildStyleIsValidInContainer(i.id,t)}))}))}pasteToSelf(e){const{model:t}=this.editor;e.map((e=>this.cloneNode(e))).sort(((e,t)=>Is(e.node.order,t.node.order))).forEach((e=>{var n,i;const{node:r}=e,o=this._cloneIdMap.get(r.id),{from:s}=this._nodeMap.get(o),a=null!=(i=null==(n=t.getNextSiblingNodeOfId(o))?void 0:n.id)?i:null,[l]=this.appendFragmentNode(e,s);t.reparentNode(l.id,s,a),this.checkChildStyleIsValidInContainer(l.id,s)}))}checkChildStyleIsValidInContainer(e,t){const{view:n,model:i}=this.editor,r=n.getViewport().logicWidth,o=i.getMatchedStyle(e,r),s=i.getMatchedStyle(t,r);if(!((e,t)=>{if(br(e))return!0;const n=Er(e);if(wr(t))return"grid"!==e.display&&!n;if("grid"===t.display)return!!Er(e);return console.warn("非常规样式",e,t),!0})(o.attrs,s.attrs)){const t=(e=>wr(e)?w({},xr):"grid"===e.display?Cr:{})(s.attrs);i.updateAllBpStyles(e,t,!1)}}getCenterPosSection(){const{view:e,model:t}=this.editor,n=e.getViewCanvasCenterPos();let i=e.getNodesFromVector(n).find((e=>ho(e)));if(!i){const e=t.queryNodes((e=>ho(e))).sort(((e,t)=>{var n,i;return Is(null!=(n=null==e?void 0:e.order)?n:"0",null!=(i=null==t?void 0:t.order)?i:"0")}));if(e.length<=0)throw new Error("404");[i]=e.slice(-1)}return i}}function lM(e,t){let n=4,i=0;if(uo(e)){n=0,i=2;return{nodeType:n,styleType:i,isFixed:!1}}const r=br(t);return co(e)?n=1:ho(e)?n=3:po(e)&&(n=2),i=wr(t)?1:"grid"===t.display?0:2,{nodeType:n,styleType:i,isFixed:r}}const cM=e=>{const t=e.length;if(t<=0)return null;if(t<=1)return e[0];const n=e.findIndex((e=>(gi(1===e.roots.length),"root"===e.roots[0])));return-1===n?e.reduce(((e,t)=>{const{nodes:n,styles:i,roots:r,links:o,animations:s=[],triggers:a=[]}=t;return e.nodes.push(...n),e.styles.push(...i),e.links.push(...o),e.animations.push(...s),e.animations||(e.animations=[]),e.triggers||(e.triggers=[]),e.triggers.push(...a),e.roots.push(...r),e}),e[0]):e.reduce(((e,t,i)=>{if(i===n)return e;const r=e.nodes.find(co),o=e.styles.find((e=>e.targetId===r.id)),s=e.nodes.filter(ho);let a=s.length,{nodes:l,styles:c,roots:d,links:u,triggers:h=[],animations:p=[]}=t;if(l=l.filter((e=>{let t=!0;if((uo(e)||co(e))&&(t=!1),t)if(ho(e)){Reflect.set(e,"from",r.id);c.filter((t=>t.targetId===e.id)).forEach((e=>{if(Er(e)){const t=Sr({rowStart:a+1,rowEnd:a+2,columnStart:1,columnEnd:2});Object.assign(e,t)}})),a++}else d.includes(e.id)&&Reflect.set(e,"from",s[0].id);else u=u.filter((t=>t.targetId!==e.id)),c=c.filter((t=>t.targetId!==e.id));return t})),a!==s.length){const e=new Array(a).fill("auto"),t=ir(e);Reflect.set(o,"grid-template-rows",t)}return e.animations||(e.animations=[]),e.triggers||(e.triggers=[]),e.nodes.push(...l),e.links.push(...u),e.styles.push(...c),e.animations.push(...p),e.triggers.push(...h),e}),e[n])};function dM(e,t){return t.slice().filter((t=>{const n=e.getNodeById(t);return n&&!co(n)&&!uo(n)}))}hm(new class extends cm{constructor(){super({id:"copy",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.hasAnySelection,bm.isAnimationEditing.negate(),bm.editingMode.isEqualTo(fm.Focus),bm.viewMode.isEqualTo(gm.Editing)),primary:Jf.CtrlCmd|Vf.KEY_C}})}async runEditorCommand(e,t,n){var i;const{model:r,view:o,viewModel:s}=t,a=dM(r,s.selection);if(a.length<=0)return;const l=o.getViewport(),c=r.cloneFragment(a,null!=(i=null==l?void 0:l.logicWidth)?i:null);r.setClonedFragment(c),QT(JSON.stringify(c))}}),hm(new class extends cm{constructor(){super({id:"^paste",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.hasAnySelection,bm.isAnimationEditing.negate(),bm.editingMode.isEqualTo(fm.Focus),bm.viewMode.isEqualTo(gm.Editing)),primary:Jf.CtrlCmd|Vf.KEY_V}}),C(this,"_iframePasteEvent"),C(this,"_isClipboardApiValid",!1),C(this,"_isPasteEventHandled",!1),GT&&JT.get().then((()=>{this._isClipboardApiValid=!0})).catch((e=>{this._isClipboardApiValid=!1})),this._register(Rg(document,mg,this.onPaste.bind(this))),this._register(sg.registerCommand("pasteFragment",((e,t,n,i)=>{if(!i)return void console.warn("Paste No Editor");const r=e.get(Ml),o=new aM(t,n,i,r),{viewModel:s}=i,a=o.do();s.clearSelection(),a.forEach((e=>{s.appendSelectionById(e.id)}))})))}async runEditorCommand(e,t,n){this._iframePasteEvent||(this._iframePasteEvent=this._register(Rg(t.view.canvasHostDomNode.contentDocument,mg,this.onPaste.bind(this))));try{if(!this._isClipboardApiValid)throw new Error("Clipboard API is not supported");const e=await JT.getData();if(!this._isPasteEventHandled&&e&&e.length>0){const[t]=e,[n]=t.types;n&&Sm.emit(n,{type:n,data:t})}this._isPasteEventHandled=!1}catch(i){console.warn("Commad Paste Error. ",i),this._isPasteEventHandled=!1}}onPaste(e){const{target:t,clipboardData:n}=e;if(!n)return;if(t){const e=["INPUT","TEXTAREA","TEXTFIELD"],n=(t.tagName||"").toUpperCase();if(e.some((e=>n.includes(e)&&document.activeElement===t))||t.isContentEditable)return}e.preventDefault();const{files:i,items:r}=n;let o,s;i.length>0?([o]=i,this._isPasteEventHandled=!0):this._isClipboardApiValid||r.length>0&&([o]=r),o&&(s=o.type,Sm.emit(s,{type:s,data:o}))}}),hm(new class extends cm{constructor(){super({id:"cut",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.hasAnySelection,bm.isAnimationEditing.negate(),bm.editingMode.isEqualTo(fm.Focus),bm.viewMode.isEqualTo(gm.Editing)),primary:Jf.CtrlCmd|Vf.KEY_X}})}async runEditorCommand(e,t,n){var i;const{model:r,viewModel:o,view:s}=t,a=dM(r,o.selection);if(a.length<=0)return;const l=s.getViewport(),c=r.cloneFragment(a,null!=(i=null==l?void 0:l.logicWidth)?i:null);t.transform((e=>{r.removeNodes(a),o.initSelection()})),r.setClonedFragment(c),QT(JSON.stringify(c))}}),hm(new class extends cm{constructor(){super({id:"duplicate",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.hasAnySelection,bm.isAnimationEditing.negate(),bm.editingMode.isEqualTo(fm.Focus),bm.viewMode.isEqualTo(gm.Editing)),primary:Jf.CtrlCmd|Vf.KEY_D}})}async runEditorCommand(e,t,n){var i;const{viewModel:r,model:o,view:s}=t,a=dM(o,r.selection);if(a.length<=0)return;const l=s.getViewport(),c=o.cloneFragment(a,null!=(i=null==l?void 0:l.logicWidth)?i:null),d=e.get(ng);t.transform((()=>{d.executeCommand("pasteFragment",c,a,t)}))}});const uM={type:"container",title:"容器",icon:"Container",style:{width:"30%",height:"auto","min-height":"280px",display:"grid","grid-template-rows":ir(["1fr"]),"grid-template-columns":ir(["1fr"]),"margin-left":"0","margin-right":"0","margin-bottom":"0","margin-top":"0"},props:{},meta:{tagName:"DIV",wrapper:!1,type:"Container",componentType:qr.Container}};hm(new class extends cm{constructor(){super({id:"wrap",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.isAnimationEditing.negate(),ff.or(bm.wrapMode.isEqualTo(_m.WrapAble),bm.wrapMode.isEqualTo(_m.Both)),bm.viewMode.isEqualTo(gm.Editing)),primary:Jf.CtrlCmd|Vf.KEY_G}})}async runEditorCommand(e,t,n){const i=e.get(Lf).getContextKeyValue(bm.wrapMode.key);i!==_m.WrapAble&&i!==_m.Both||this.createContainerNode(t)}createContainerNode(e){const{view:t,model:n,viewModel:i}=e,r=i.selection.slice().sort(((e,t)=>Is(n.getNodeById(e).order,n.getNodeById(t).order))),o=t.getGroupRectByIds(r),s=n.getNodeById(r[0]).from,a=n.getNodeById(s);if(!a)throw new Error("404");const{style:l,meta:c,props:d}=di(uM),u=t.createStyleFromHitPosition(o,a,l);u.width=`${o.width}px`,u.height=`${o.height}px`,delete l["min-height"],Object.assign(l,u);const h={ref:s,direction:Es.inward},p=t.getViewport().logicWidth;let f;i.clearSelection();const g=Symbol("wrapFork");e.fork(g),e.add((()=>{f=n.addNode(h,d,c),n.updateStyle(f.id,l)})),t.nextTick((()=>{const o=r.map((e=>{const i=t.getElementRectById(e),r=n.getMatchedStyle(e,p).attrs;return t.createStyleFromHitPosition(i,f,r)}));e.add((()=>{f=n.addNode(h,d,c),n.updateStyle(f.id,l),function(e,t){r.forEach(((i,r)=>{const o=t[r];n.reparentNode(i,e.id),n.updateAllBpStyles(i,o)}))}(f,o),i.setSelectionById(f.id)})),e.commitAndMerge(g)}),(()=>!(!f||!t.getComputedStyleOfId(f.id))))}}),hm(new class extends cm{constructor(){super({id:"unwrap",kbOpts:{weight:ag.EditorCore,kbExpr:ff.and(bm.isAnimationEditing.negate(),ff.or(bm.wrapMode.isEqualTo(_m.UnwrapAble),bm.wrapMode.isEqualTo(_m.Both)),bm.viewMode.isEqualTo(gm.Editing)),primary:Jf.CtrlCmd|Jf.Shift|Vf.KEY_G}})}async runEditorCommand(e,t,n){const i=e.get(Lf);i.setContext(bm.editingMode.key,fm.None);const r=i.getContextKeyValue(bm.wrapMode.key);r!==_m.UnwrapAble&&r!==_m.Both||this.removeContainerNode(t)}removeContainerNode(e){const{view:t,model:n,viewModel:i}=e,r=i.selection.slice(0),[o]=r,s=n.getNodeById(o),a=null==s?void 0:s.from;if(!a)throw new Error("404");const l=n.getNodeById(a);if(!l)throw new Error("404");const c=n.getChildrenNodesOfId(s.id),d=t.getViewport().logicWidth;e.transform((e=>{i.clearSelection(),c.forEach((i=>{const r=t.getElementRectById(i.id),o=n.getMatchedStyle(i.id,d).attrs,s=t.createStyleFromHitPosition(r,l,o);e.reparentNode(i.id,l.id),e.updateStyle(i.id,s,d)})),e.removeNode({ref:s.id}),i.initSelection()}))}});var hM=Object.defineProperty,pM=Object.getOwnPropertyDescriptor,fM=(e,t)=>(n,i)=>t(n,i,e);class gM extends cm{constructor(e){super({id:"zoomIn",kbOpts:{weight:ag.EditorCore,primary:Jf.CtrlCmd|Vf.US_EQUAL}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}class mM extends cm{constructor(e){super({id:"zoomOut",kbOpts:{weight:ag.EditorCore,primary:Jf.CtrlCmd|Vf.US_MINUS}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}class _M extends cm{constructor(e){super({id:"zoomReset",kbOpts:{weight:ag.EditorCore,primary:Jf.CtrlCmd|Vf.KEY_0}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}class vM extends cm{constructor(e){super({id:"resetViewport",kbOpts:{weight:ag.EditorCore,primary:Jf.CtrlCmd|Jf.Shift|Vf.KEY_0}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}let yM=(C(l=class extends zo{constructor(e,t,n){super(),this._editor=e,this.contextKeyService_=t,this.configurationService=n,this.registerCommand();const i=e.view.canvasHostDomNode.contentWindow;this._register(Rg(i,kg,(e=>this.handleScroll(e)),{passive:!1})),this._register(Rg(window,kg,(e=>this.handleScroll(e)),{passive:!1}))}registerCommand(){this._register(hm(new gM((()=>this.stepZoom(.1))))),this._register(hm(new mM((()=>this.stepZoom(-.1))))),this._register(hm(new _M((()=>this.zoomReset())))),this._register(hm(new vM((()=>this.resetViewport())))),this._register(sg.registerCommand("zoom",((e,t)=>{Number.isFinite(t)&&this.doZoom(t)})))}handleScroll(e){if(this._editor.getMode()!==gm.Preview&&!document.hidden&&document.hasFocus()&&(e.ctrlKey||e.metaKey)){e.preventDefault(),e.stopPropagation();const{deltaY:t,x:n,y:i}=e;let r=Math.abs(t)/500;r=Math.min(.05,r),this.smoothZoom(t>0?-r:r)}}smoothZoom(e){const t=this._editor.view.getViewport(),{scale:n}=t,i=n+e,[r,o]=this.getZoomLimit(),s=ki(r,i,o);this.doZoom(s)}zoomReset(){const e=this._editor.view,t=e.getViewport().logicWidth,n=e.boundaryDomNode.getBoundingClientRect(),i=getComputedStyle(e.boundaryDomNode),r=parseFloat(i.paddingTop),o=parseFloat(i.paddingBottom),s=parseFloat(i.paddingRight),a=parseFloat(i.paddingLeft),l=w({},b_.Identity),c=n.height-r-o,d=n.width-a-s;t>d?e.boundaryDomNode.scrollLeft=(t-d)/2:l.tx=(d-t)/2,e.setViewport(t,c,l)}resetViewport(){const e=this._editor.view,t=this.configurationService.getValue("zoom.initLogicWidth"),n=e.boundaryDomNode.getBoundingClientRect(),i=getComputedStyle(e.boundaryDomNode),r=parseFloat(i.paddingTop),o=parseFloat(i.paddingBottom),s=parseFloat(i.paddingRight),a=parseFloat(i.paddingLeft),l=w({},b_.Identity),c=n.height-r-o,d=n.width-a-s;t>d?e.boundaryDomNode.scrollLeft=(t-d)/2:l.tx=(d-t)/2,e.setViewport(t,c,l)}getZoomLimit(){return[this.configurationService.getValue("zoom.minZoomLevel"),this.configurationService.getValue("zoom.maxZoomLevel")]}stepZoom(e){const t=this._editor.view.getViewport(),{scale:n}=t,[i,r]=this.getZoomLimit();let o=Math.round(10*(n+e))/10;o=ki(i,o,r),this.doZoom(o)}doZoom(e){const t=this._editor.view,n=t.getViewport(),i=t.boundaryDomNode.getBoundingClientRect(),r=getComputedStyle(t.boundaryDomNode),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),a=parseFloat(r.paddingRight),l=parseFloat(r.paddingLeft),c=w({},n.mx);c.a=e,c.d=e;const d=(i.height-o-s)/e,u=n.logicWidth*e,h=i.width-l-a;if(console.log("checkwidth",h,u),u>h){const e=(u-n.logicWidth)/2;c.tx=e;const i=(u-h)/2;t.boundaryDomNode.scrollLeft=i}else c.tx=(h-n.logicWidth)/2;t.setViewport(n.logicWidth,d,c)}},"ID","editor.contrib.zoom"),l);yM=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?pM(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&hM(t,n,o),o})([fM(0,Ol),fM(1,Lf),fM(2,Wm)],yM),pm(yM.ID,yM);var wM=Object.defineProperty,bM=Object.getOwnPropertyDescriptor,xM=(e,t)=>(n,i)=>t(n,i,e);class CM{constructor(e,t,n,i,r){C(this,"fromX"),C(this,"fromViewport"),C(this,"posX"),C(this,"posY"),C(this,"_timer",0),C(this,"toX"),this._editor=e,this.dir=n,this.minResizeLevel=i,this.maxResizeLevel=r,this.fromX=t.event.screenX;const o=e.view.getViewport();this.fromViewport=di(o)}moveTo(e){const{screenX:t,posX:n,posY:i}=e.event;this.posX=n,this.posY=i,t!==this.toX&&(this.toX=t,this.commit())}get delta(){return si(this.toX)?0:this.toX-this.fromX}commit(){if(0===this.delta)return;const e=this._editor.view,t=e.getViewport(),n=t.logicWidth,i=this.delta*this.dir/t.scale,r=w({},this.fromViewport.mx);let o=this.fromViewport.logicWidth-2*i,s=o*t.scale;const a=e.boundaryDomNode.getBoundingClientRect(),l=getComputedStyle(e.boundaryDomNode),c=parseFloat(l.paddingRight),d=parseFloat(l.paddingLeft),u=a.width-d-c;if(Number.isFinite(this.maxResizeLevel)&&o>this.maxResizeLevel){if(n===this.maxResizeLevel)return;o=this.maxResizeLevel}if(Number.isFinite(this.minResizeLevel)&&o<this.minResizeLevel){if(n===this.minResizeLevel)return;o=this.minResizeLevel}s>u&&(s=u,o=s/t.scale,o>this.maxResizeLevel&&(o=this.maxResizeLevel));const h=(u-o)/2;r.tx=Math.max(h,0),h<0&&(e.boundaryDomNode.scrollLeft=-h),e.setViewport(o,this.fromViewport.logicHeight,r)}addAutoIncreatTimer(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout((()=>{this._timer=0,this.commit()}),50)}removeAutoIncreatTimer(){this._timer&&clearTimeout(this._timer),this._timer=0}}let kM=(c=class extends zo{constructor(e,t,n){super(),C(this,"_tipWidget"),C(this,"dragRequest"),this._editor=e,this.configurationService=t,this.contextKeyService=n;const i=e.view;this._register(i.onMouseDragStart(this.handleDragStart.bind(this))),this._register(i.onMouseDrag(this.handleDrag.bind(this))),this._register(i.onMouseDrop(this.handleDrop.bind(this))),this._register(i.onMouseDropCanceled(this.handleDropCanceled.bind(this))),this._register(sg.registerCommand("resizeCanvasWidth",((e,t)=>{Number.isFinite(t)&&this.setWidth(t)}))),this._register(sg.registerCommand("fitCanvas",(e=>{this.fit()})))}showDragTargets(){this._tipWidget||(this._tipWidget=new sv(this._editor,this._editor.view.canvasHostDomNode.contentWindow),this._editor.view.addOuterWidget(this._tipWidget,Do.High,!1))}hideDragTargets(){this._tipWidget&&(this._editor.view.removeOuterWidget(this._tipWidget),this._tipWidget=null)}handleDragStart(e){const{targetPath:t}=e.target,n=t[t.length-1];if(!n)return;if("canvasResize"!==n.fingerprint)return;const[i,r]=this.getResizeLimit();this.dragRequest=new CM(this._editor,e,"left"===n.detail?1:-1,i,r),this.contextKeyService.setContext(bm.editingMode.key,fm.None),this._editor.viewModel.clearSelection(),this.showDragTargets()}handleDrag(e){if(this.dragRequest&&(this.dragRequest.moveTo(e),this._tipWidget)){const{logicWidth:e,logicHeight:t}=this._editor.view.getViewport(),n=`${Math.ceil(e)} × ${Math.ceil(t)}`,i=this.getBpIcon(e),{posX:r,posY:o}=this.dragRequest;si(r)||si(o)||this._tipWidget.update(r,o,`${i} ${n}`)}}getBpIcon(e){const t="display:block;width:16px;height:16px;margin-right:4px;fill:white;";let n=`<i class="icon" style="${t}"><svg width="16" height="16" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M5 2.25C2.92893 2.25 1.25 3.92893 1.25 6V15C1.25 17.0711 2.92893 18.75 5 18.75H19C21.0711 18.75 22.75 17.0711 22.75 15V6C22.75 3.92893 21.0711 2.25 19 2.25H5ZM2.75 6C2.75 4.75736 3.75736 3.75 5 3.75H19C20.2426 3.75 21.25 4.75736 21.25 6V15C21.25 16.2426 20.2426 17.25 19 17.25H5C3.75736 17.25 2.75 16.2426 2.75 15V6ZM8 21.75H16V20.25H8V21.75Z" />\n      </svg></i>`;return e<751?n=`<i class="icon" style="${t}"><svg width="16" height="16" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M9 1.25C6.92893 1.25 5.25 2.92893 5.25 5V19C5.25 21.0711 6.92893 22.75 9 22.75H15C17.0711 22.75 18.75 21.0711 18.75 19V5C18.75 2.92893 17.0711 1.25 15 1.25H9ZM6.75 5C6.75 3.75736 7.75736 2.75 9 2.75H15C16.2426 2.75 17.25 3.75736 17.25 5V19C17.25 20.2426 16.2426 21.25 15 21.25H9C7.75736 21.25 6.75 20.2426 6.75 19V5ZM10.5 19.75H13.5V18.25H10.5V19.75Z" />\n      </svg></i>`:e<1001&&(n=`<i class="icon" style="${t}"><svg width="16" height="16" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M3.25 5C3.25 2.92893 4.92893 1.25 7 1.25H17C19.0711 1.25 20.75 2.92893 20.75 5V19C20.75 21.0711 19.0711 22.75 17 22.75H7C4.92893 22.75 3.25 21.0711 3.25 19V5ZM7 2.75C5.75736 2.75 4.75 3.75736 4.75 5V19C4.75 20.2426 5.75736 21.25 7 21.25H17C18.2426 21.25 19.25 20.2426 19.25 19V5C19.25 3.75736 18.2426 2.75 17 2.75H7Z" />\n      </svg></i>`),n}handleDrop(e){this.hideDragTargets(),this.dragRequest&&(this.dragRequest.removeAutoIncreatTimer(),this.dragRequest=null)}handleDropCanceled(e){this.hideDragTargets(),this.dragRequest&&(this.dragRequest.removeAutoIncreatTimer(),this.dragRequest=null)}getResizeLimit(){return[this.configurationService.getValue("zoom.minLogicWidth"),this.configurationService.getValue("zoom.maxLogicWidth")]}setWidth(e){const t=this._editor.view,n=t.getViewport();if(e===n.logicWidth)return;const i=w({},n.mx),r=e*n.scale,o=t.boundaryDomNode.getBoundingClientRect(),s=getComputedStyle(t.boundaryDomNode),a=parseFloat(s.paddingRight),l=parseFloat(s.paddingLeft),c=o.width-l-a,[d,u]=this.getResizeLimit();if(!(Number.isFinite(u)&&e>u||Number.isFinite(d)&&e<d)){if(r>c){const n=(r-e)/2;i.tx=n;const o=r-c;t.boundaryDomNode.scrollLeft=o/2}else i.tx=(c-e)/2;t.setViewport(e,n.logicHeight,i)}}fit(){const e=this._editor.view,t=e.getViewport(),n=w({},t.mx),i=e.boundaryDomNode.getBoundingClientRect(),r=getComputedStyle(e.boundaryDomNode),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),a=parseFloat(r.paddingRight),l=parseFloat(r.paddingLeft),c=i.width-l-a,d=(window.innerHeight-i.top-o-s)/n.a,u=t.logicWidth*n.a;if(u>c){const i=(u-t.logicWidth)/2;n.tx=i;const r=(u-c)/2;e.boundaryDomNode.scrollLeft=r}else n.tx=(c-t.logicWidth)/2;e.setViewport(t.logicWidth,d,n)}},C(c,"ID","editor.contrib.responsiveResize"),c);kM=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?bM(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&wM(t,n,o),o})([xM(0,Ol),xM(1,Wm),xM(2,Lf)],kM),pm(kM.ID,kM);hm(new class extends cm{constructor(){super({id:"undo",kbOpts:{weight:ag.EditorCore,kbExpr:bm.viewMode.isEqualTo(gm.Editing),primary:Jf.CtrlCmd|Vf.KEY_Z}})}runEditorCommand(e,t,n){const i=e.get(Lo);i.canUndo()&&i.undo()}}),hm(new class extends cm{constructor(){super({id:"redo",kbOpts:{weight:ag.EditorCore,kbExpr:bm.viewMode.isEqualTo(gm.Editing),primary:Jf.CtrlCmd|Jf.Shift|Vf.KEY_Z,mac:{primary:Jf.CtrlCmd|Jf.Shift|Vf.KEY_Z}}})}runEditorCommand(e,t,n){const i=e.get(Lo);i.canRedo()&&i.redo()}});class EM extends zo{constructor(){super(...arguments),C(this,"_imageLoadingBarrier",new Map),C(this,"_fontResourceProviders",new Set),C(this,"_imageCache",new Map)}dispose(){super.dispose(),this._imageLoadingBarrier.clear(),this._fontResourceProviders.clear(),this._imageCache.clear()}getPlaceHolderImage(e,t){const n=new Blob([`<svg width="${e}" height="${t}" xmlns="http://www.w3.org/2000/svg"><circle cx="0" cy="0" r="1" opacity="0" /></svg>`],{type:"image/svg+xml"}),i=URL.createObjectURL(n);return{url:i,dispose(){URL.revokeObjectURL(i)}}}loadImage(e){if(!this._imageLoadingBarrier.has(e)){const t=new Bp;fetch(e).then((e=>e.blob())).then((n=>{const i=new FileReader;i.onloadend=()=>{const n=i.result;this._imageCache.set(e,n),t.open();document.createElement("img").src=n},i.onerror=()=>{console.log("500")},i.readAsDataURL(n)})),this._imageLoadingBarrier.set(e,t)}return this._imageLoadingBarrier.get(e).wait()}getImageCache(e){return this._imageCache.get(e)||""}registerFontResourceProvider(e){if(this._fontResourceProviders.has(e))throw new Error("400");return this._fontResourceProviders.add(e),jo((()=>this._fontResourceProviders.delete(e)))}async queryFontResource(e,t){const n=[];for(const i of this._fontResourceProviders)n.push(i.provideFontResource(e,t));return(await Promise.all(n)).filter((e=>!!e))}}const SM=Kr("eventBusService");var IM;(IM||(IM={})).paste="paste";class OM extends zo{constructor(){super(...arguments),C(this,"_onMessage",this._register(new xs)),C(this,"_onEvent",this._register(new xs))}dispose(){super.dispose(),this._onMessage.dispose(),this._onEvent.dispose()}onMessage(e){return this._onMessage.event(e)}postMessage(e){this._onMessage.fire(e)}onEvent(e){return this._onEvent.event(e)}postEvent(e){this._onEvent.fire(e)}}class TM{constructor(e,t=[],n=!1){C(this,"ctor"),C(this,"staticArguments"),C(this,"supportsDelayedInstantiation"),this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}C(TM,"__SyncDescriptorBrand");class MM{constructor(...e){C(this,"_entries",new Map);for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}dispose(){for(const[e,t]of this._entries){if(e!==Vr&&!(t instanceof TM)){const e=Reflect.get(t,"dispose");"function"==typeof e&&e.call(t)}this._entries.delete(e)}}}const NM=Kr("lifecycleService");var AM,RM,DM;!function(e){e[e.Starting=1]="Starting",e[e.Bootstraped=2]="Bootstraped",e[e.EditorCreated=3]="EditorCreated",e[e.ExtensionActivated=4]="ExtensionActivated"}(AM||(AM={})),(DM=RM||(RM={}))[DM.ViewFocusChanged=0]="ViewFocusChanged";class PM extends zo{onFocusChanged(e){return!1}handleEvents(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];switch(n.type){case RM.ViewFocusChanged:this.onFocusChanged(n);break;default:console.info("View received unknown event: "),console.info(n)}}}}class LM{constructor(e,t,n=null,i=null){C(this,"element"),C(this,"type"),C(this,"detail"),C(this,"targetPath"),this.element=e,this.type=t,this.detail=n,this.targetPath=i}}class UM{constructor(e){C(this,"_viewHelper"),this._viewHelper=e}}class FM{constructor(e,t,n){C(this,"_ctx"),C(this,"target"),C(this,"targetPath"),C(this,"pos"),this.pos=t,this._ctx=e,n?(this.target=n,this.targetPath=this.getTargetPath(n)):(this.target=null,this.targetPath=[])}getTargetPath(e){return c_.collect(e)}fulfill(e,t=null){return new LM(this.target,e,t,this.targetPath)}withTarget(e){return new FM(this._ctx,this.pos,e)}}class BM{constructor(e){C(this,"_viewHelper"),this._viewHelper=e}createMouseTarget(e,t){const n=new UM(this._viewHelper),i=new FM(n,e,t);return this._createMouseTarget(n,i,!1)}createMouseTargetWithoutHittest(e,t){const n=new UM(this._viewHelper),i=new FM(n,e,t);return this._createMouseTarget(n,i,!1)}_createMouseTarget(e,t,n){if(null===t.target)return n?t.fulfill(r_.Unknown):this._createMouseTarget(e,t.withTarget(null),!0);const i=t;let r=null;return r=r||this._hitTestCanvas(i),r=r||this._hitTestCanvasOverlay(i),r=r||this._hitTestContentWidget(i),r=r||this._hitTestSpaceOutsideCanvas(i),si(r)&&(r=t.fulfill(r_.Unknown)),r}_hitTestCanvas(e){return d_.isChildOfCanvas(e.targetPath)?e.fulfill(r_.Canvas):null}_hitTestCanvasOverlay(e){if(d_.isCanvasOverlay(e.targetPath)||d_.isTransparentContentWidget(e.targetPath)){const t=this._viewHelper.hitTest(e.pos.x,e.pos.y);if(t.length>0)return e.withTarget(t[0]).fulfill(r_.Canvas)}return null}_hitTestContentWidget(e){return d_.isBlockingContentWidget(e.targetPath)?e.fulfill(r_.Widgets):null}_hitTestSpaceOutsideCanvas(e){if(function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}(this._viewHelper.viewDomNode,e.target)){const t=this._viewHelper.hitTest(e.pos.x,e.pos.y);if(t.length>0)return e.withTarget(t[0]).fulfill(r_.Canvas)}return null}}let jM=!1;const VM=new WeakMap;function zM(e){if(!e.parent||e.parent===e)return null;try{const t=e.location,n=e.parent.location;if("null"!==t.origin&&"null"!==n.origin&&(t.protocol!==n.protocol||t.hostname!==n.hostname||t.port!==n.port))return jM=!0,null}catch(_8){return jM=!0,null}return e.parent}function KM(e,t=window.top){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const r=function(e){let t=VM.get(e);if(!t){t=[];let n,i=e;do{n=zM(i),n?t.push({window:i,iframeElement:i.frameElement||null}):t.push({window:i,iframeElement:null}),i=n}while(i);VM.set(e,t)}return t.slice(0)}(e);for(const o of r){if(o.window===t)break;if(!o.iframeElement)break;const e=o.iframeElement.getBoundingClientRect();n+=e.top,i+=e.left}return{top:n,left:i}}class WM{constructor(e,t){C(this,"_pageCoordinatesBrand"),this.x=e,this.y=t}}class HM{constructor(e,t,n){C(this,"_editorMouseEventBrand"),C(this,"browserEvent"),C(this,"leftButton"),C(this,"middleButton"),C(this,"rightButton"),C(this,"buttons"),C(this,"target"),C(this,"detail"),C(this,"posX"),C(this,"posY"),C(this,"screenX"),C(this,"screenY"),C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"timestamp"),C(this,"pos"),this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;let{pageX:i,pageY:r}=e;const o=t.contentWindow,s=KM(o,self);if(e.view!==o){const t=e.view.frameElement,{scale:a}=n,{scrollX:l,scrollY:c}=o;if(t){const e=s.top-c*a;i=(i-(s.left-l*a))/a,r=(r-e)/a}else i=(i-s.left)/a+l,r=(r-s.top)/a+c}this.screenX=e.screenX,this.screenY=e.screenY,this.posX=i,this.posY=r,this.pos=new WM(this.posX,this.posY)}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class $M{constructor(e,t){this.ref=e,this.viewportQuery=t}create(e){return new HM(e,this.ref,this.viewportQuery())}onContextMenu(e,t){return Rg(e,"contextmenu",(e=>{t(this.create(e))}))}onMouseUp(e,t){return Rg(e,"mouseup",(e=>{t(this.create(e))}))}onMouseDown(e,t){return Rg(e,wg,(e=>{t(this.create(e))}))}onMouseLeave(e,t){return Rg(e,Cg,(e=>{t(this.create(e))}))}onMouseEnter(e,t){return Rg(e,xg,(e=>{t(this.create(e))}))}onMouseMoveThrottled(e,t,n,i){return function(e,t,n,i,r){return new Pg(e,t,n,i,r)}(e,"mousemove",t,((e,t)=>n(e,this.create(t))),i)}onMouseMove(e,t){return Rg(e,bg,(e=>{t(this.create(e))}))}onDBClick(e,t){return Rg(e,vg,(e=>{t(this.create(e))}))}onMouseWheel(e,t){return Rg(e,kg,(e=>{t(this.create(e))}),{passive:!1})}}class qM extends PM{constructor(e,t){super(),C(this,"viewController"),C(this,"viewHelper"),C(this,"mouseTargetFactory"),C(this,"_mouseDownOperation"),C(this,"lastMouseLeaveTime",-1),C(this,"lastMouseMoveTarget"),C(this,"lastEmittedMouseEnter"),this.viewHelper=t,this.viewController=e,this.mouseTargetFactory=new BM(t),this._mouseDownOperation=this._register(new YM(this.viewController,this.viewHelper,((e,t)=>this._createMouseTarget(e,t)),(e=>n.create(e))));const n=new $M(this.viewHelper.canvasHostDomNode,this.viewHelper.getViewport),i=this.viewHelper.canvasHostDomNode.contentDocument.body,{boundaryDomNode:r}=this.viewHelper;this._register(n.onContextMenu(i,(e=>this._onContextMenu(e,!0)))),this._register(n.onContextMenu(r,(e=>this._onContextMenu(e,!0)))),this._register(n.onMouseMove(i,(e=>this._onMouseMove(e)))),this._register(n.onMouseMove(r,(e=>this._onMouseMove(e)))),this._register(n.onMouseDown(i,(e=>this._onMouseDown(e)))),this._register(n.onMouseDown(r,(e=>this._onMouseDown(e)))),this._register(n.onDBClick(i,(e=>this._onDbClick(e)))),this._register(n.onDBClick(this.viewHelper.canvasHostDomNode,(e=>this._onDbClick(e)))),this._register(n.onMouseLeave(r,(e=>this._onMouseLeaveEditingArea(e)))),this._register(Rg(window,Mg,(e=>this._onWindowBlur(e)))),this._register(Rg(document,Ng,(e=>this._onPageVisibilityChange(e)))),this._register(n.onMouseWheel(this.viewHelper.canvasHostDomNode.contentWindow,this._onMouseWheel.bind(this))),this._register(Rg(i,kg,(e=>this.handleScroll(e)),{passive:!1,capture:!0}))}_createMouseTarget(e,t){return this.mouseTargetFactory.createMouseTarget(e.pos,t?e.target:null)}handleScroll(e){if(this.viewHelper.getEditorMode()===gm.Preview)return;const{pageX:t,pageY:n}=e,i=this.viewHelper.hitTest(t,n),{deltaX:r,deltaY:o}=e;let s=!1;i.forEach((e=>{const{scrollTop:t,scrollLeft:n}=e,{overflowX:i,overflowY:a}=getComputedStyle(e),l=i===Li.scroll||i===Li.auto,c=a===Li.scroll||a===Li.auto;l&&e.scrollBy(r,0),c&&e.scrollBy(0,o),s||(s=e.scrollTop!==t||e.scrollLeft!==n)})),s&&(e.preventDefault(),e.stopPropagation(),this.viewHelper.reMeasureCanvasRect())}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this._mouseDownOperation.isActive())return;const t=this._createMouseTarget(e,!0);if(t.type!==r_.Unknown){const n=t.element,i=this.lastMouseMoveTarget;if(n!==(null==i?void 0:i.element)){if(n){const n={event:e,target:t};this.viewController.emitMouseEnter(n),this.lastEmittedMouseEnter=t}i&&n.contains(i.element)&&this.viewController.emitMouseLeave({event:e,target:this.lastMouseMoveTarget}),this.lastMouseMoveTarget=t}}else this._handleMouseLeave(e)}_handleMouseLeave(e){this.lastEmittedMouseEnter&&(this.viewController.emitMouseLeave({event:e,target:this.lastEmittedMouseEnter}),this.lastMouseMoveTarget=null,this.lastEmittedMouseEnter=null)}_onMouseLeaveEditingArea(e){this._handleMouseLeave(e)}_onWindowBlur(e){this._handleMouseLeave(null)}_onPageVisibilityChange(e){document.hidden&&this.lastEmittedMouseEnter&&(this.viewController.emitMouseLeave({event:null,target:this.lastEmittedMouseEnter}),this.lastMouseMoveTarget=null,this.lastEmittedMouseEnter=null)}_onDbClick(e){this.viewController.emitDbClick({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0);if(this.viewController.emitMouseDown({event:e,target:t}),this.viewHelper.getEditingMode()===fm.EditText)return;const n=d_.isChildOfCanvas(t.targetPath),i=d_.isDraggableWidget(t.targetPath);(e.leftButton||e.middleButton)&&(n||i)&&(e.preventDefault(),this._mouseDownOperation.start(t,e))}_onMouseWheel(e){this._onMouseMove(e)}}class YM extends zo{constructor(e,t,n,i){super(),C(this,"_viewController"),C(this,"_viewHelper"),C(this,"_mouseMoveMonitor"),C(this,"_mouseState"),C(this,"_isActive"),C(this,"_lastMouseEvent"),this._createMouseTarget=n,this._createMouseEvent=i,this._viewController=e,this._viewHelper=t,this._mouseMoveMonitor=t.mouseMoveMonitor,this._mouseState=new XM,this._isActive=!1,this._lastMouseEvent=null}isActive(){return this._isActive}_onMouseDownThenMove(e){const t=this._createMouseEvent(e);this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.isDragAndDrop&&this._viewController.emitMouseDrag({event:t,target:null})}start(e,t){if(this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.trySetCount(t.detail,null),t.detail=this._mouseState.count,!this._mouseState.altKey&&t.detail<2&&!this._isActive){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._viewController.emitMouseDragStart({event:t,target:this._createMouseTarget(t,!0)});let e=!1;this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewDomNode,this._viewHelper.canvasHostDomNode,t.target,t.buttons,(t=>{e=!0,this._onMouseDownThenMove(t)}),(t=>{t&&e?this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:null}):this._viewController.emitMouseDropCanceled(),this._stop()}))}}_stop(){this._isActive=!1}}const GM=class{constructor(){C(this,"_altKey"),C(this,"_ctrlKey"),C(this,"_metaKey"),C(this,"_shiftKey"),C(this,"_leftButton"),C(this,"_middleButton"),C(this,"_lastMouseDownPosition"),C(this,"_lastMouseDownPositionEqualCount"),C(this,"_lastMouseDownCount"),C(this,"_lastSetMouseDownCountTime"),C(this,"isDragAndDrop"),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}trySetCount(e,t){const n=(new Date).getTime();n-this._lastSetMouseDownCountTime>GM.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition===t?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};let XM=GM;C(XM,"CLEAR_MOUSE_DOWN_COUNT_TIME",400);class JM{constructor(e,t){C(this,"handler"),this.viewController=e,this.viewHelper=t,this.handler=new qM(e,t)}dispose(){this.handler&&this.handler.dispose()}}var QM=(e,t)=>{for(const[n,i]of t)e[n]=i;return e};var ZM,eN,tN=QM(Pd({components:{ShadowRootScript:function(){return th("script",{type:"text/javascript"},["(function attachShadowRoots(root) {\n  root.querySelectorAll('template[shadowroot]').forEach(template => {\n    const mode = template.getAttribute('shadowroot');\n    const host = template.parentNode;\n    const shadowRoot = template.parentNode.attachShadow({ mode });\n    const attachInternals = host.attachInternals;\n \n    Object.assign(host, {\n      attachShadow() {\n        shadowRoot.innerHTML = '';\n        return shadowRoot;\n      },\n      attachInternals() {\n        const ei = attachInternals\n          ? attachInternals.call(this, arguments)\n          : {};\n        return Object.create(ei, {\n          shadowRoot: { value: shadowRoot }\n        });\n      }\n    });\n \n    shadowRoot.appendChild(template.content);\n    template.remove();\n    attachShadowRoots(shadowRoot);\n  });\n})(document);"])}},props:{vm:Object}}),[["render",function(e,t,n,i,r,o){const s=Ru("Node"),a=Ru("ShadowRootScript");return Ku(),qu(Uu,null,[e.vm.children?(Ku(!0),qu(Uu,{key:0},ch(e.vm.children,(e=>(Ku(),Yu(s,{key:e.id,vm:e},null,8,["vm"])))),128)):rh("",!0),th(a)],64)}]]);(eN=ZM||(ZM={})).BODY="body",eN.HEAD="head";const nN={cursor:"pointer","text-decoration":"none",position:"absolute",display:"block",top:"0px",right:"0px",bottom:"0px",left:"0px",overflow:"hidden","background-color":"transparent","border-color":"rgba(255, 255, 255, 1)","border-width":"0px","border-style":"solid","border-radius":"0px","z-index":1},iN={position:"absolute",height:"100%",width:"100%","object-fit":"cover",left:"0px",top:"0px"},rN={height:"100%",width:"100%",display:"block",borderWidth:"0px"},oN=(e,t)=>`${e}: ${t};`;const sN='\n  font-feature-settings: "liga" 0;\n  overflow-wrap: break-word;\n  -webkit-line-break: after-white-space;\n  color: inherit;\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-box-decoration-break: clone;\n  inline-size: 100%;\n'.replace(/\n/g,""),aN="\n  content: '';\n  display: inline-block;\n  padding-left: 99%;\n".replace(/\n/g,"");class lN{constructor(e,t,n){this.styleViewModel=e,this.options=t,this.shouldAddReset=n}checkWrapMedia(e){const t=this.styleViewModel.media||null;if(!t)return e;const n=[];return null!=t.maxWidth&&n.push(`(max-width: ${t.maxWidth}px)`),`@media ${n.join(" and ")} {${e}}`}makePreset(){const e=Object.create(null),{forImage:t,forSVG:n,targetId:i,media:r,forLink:o}=this.styleViewModel;(t||n)&&(e.position="relative",e.overflow="hidden"),o&&!r&&(e.position="relative"),t||o||(e.isolation="isolate");const s=hi(e).reduce(((t,n)=>t+=oN(n,e[n])),"");return s?`.${i} {${s}}`:""}makeStyleContent(){const{styleViewModel:{attrs:e,forText:t},options:n}=this,i=n.editMode&&"sticky"===e.position,r=Object.entries(e).reduce(((r,[o,s])=>{if(["order"===o,i&&["position","top"].includes(o),"height"===o&&rr(e["aspect-ratio"]),"aspect-ratio"===o,t&&Ji(o),n.editMode&&o.startsWith("scroll-snap"),o.startsWith("--")].some((e=>e)))return r;let a=oN(o,s);const l=Oo[o];return l&&l.length>0&&l.forEach((e=>{a+=oN(`${e}${o}`,s)})),`${r}${a}`}),"");return r?`${function(e){const{targetId:t,selectorType:n,subSelector:i}=e;return n&&i?`.${t} ${n} ${i}`:`.${t}`}(this.styleViewModel)} {${r}}`:""}afterTextStyleContent(){const{targetId:e,forText:t,attrs:n}=this.styleViewModel;if(!t)return"";const i=!!n["text-overflow"],r=Object.entries(n).reduce(((e,[t,n])=>function(e,t=!1){return e.startsWith("font")||e.startsWith("text")||e.startsWith("word")||e.startsWith("line")||e.startsWith("letter")||"color"===e||"vertical-align"===e||"white-space"===e||t&&function(e){return["overflow","width","height","white-space","text-overflow"].includes(e)}(e)}(t,i)||Ji(t)||function(e){return e.startsWith("list-style")}(t)?"flex"===n?e:["color","font-size","font-weight","letter-spacing","line-height","text-shadow"].includes(t)?`${e}${oN(t,"inherit")}`:`${e}${oN(t,n)}`:e),"");return`.${e} > * {${this.shouldAddReset?sN:""}${r}}`}makeTextJustifyHack(){const{targetId:e,forText:t,attrs:n}=this.styleViewModel;if(!t)return"";return"justify"===n["text-align"]?`.${e} > *:after {${aN}}`:""}makeTextDynamicFontSizeHack(){const{targetId:e,forText:t,attrs:n}=this.styleViewModel;if(!t)return"";const{"font-size":i}=n;if(!(function(e){const{"--font-size-min":t,"--font-size-max":n}=e;return Boolean(n&&t)}(n)&&i&&i.includes("clamp")))return"";const r=/clamp\((.+),(.+),(.+)\)/.exec(i);if(!r)return"";const[,,o]=r;return`@supports not (font-size: clamp(2px,1px,3px)) { .${e} { font-size: ${o}; } }`}afterSvgStyleContent(){const{forSVG:e,forImage:t,forVideo:n,targetId:i}=this.styleViewModel;if(e||t||n){const e=(r=iN,Object.entries(r).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1")}:${t}`)).join(";"));return e?`.${i} > * { ${e} }`:""}var r;return""}afterAspectRatioStyleContent(){const{targetId:e,attrs:t}=this.styleViewModel;if(rr(t["aspect-ratio"])){return`.${e}::before { content: attr(x); display: block; padding-top: ${wi(1/parseFloat(t["aspect-ratio"]))}; }`}return""}toString(){var e;const{options:t,styleViewModel:{media:n}}=this;if(n&&(null==(e=t.viewports)?void 0:e.length)&&t.viewports.every((e=>e.width>n.maxWidth||e.height<n.minWidth)))return"";const i=[this.makeStyleContent(),this.afterTextStyleContent(),this.makeTextJustifyHack(),this.makeTextDynamicFontSizeHack(),this.afterSvgStyleContent(),this.afterAspectRatioStyleContent()].join(""),r=[];return this.shouldAddReset&&r.push(this.makePreset()),i&&r.push(this.checkWrapMedia(i)),r.filter(Boolean).join("\n")}}class cN{constructor(e,t){this.styles=e,this.options=t}toString(){const e=this.styles.filter((e=>e.selectorType&&e.subSelector)),t=this.styles.filter((t=>!e.includes(t))),n=[...e,...t],i=[],r=new Set;for(const o of n){const e=!r.has(o.targetId),t=new lN(o,this.options,e);i.push(t.toString()),r.add(o.targetId)}return i.join("\n")}}function dN(e){return e.map((e=>`@font-face {font-family: ${e.family};src: ${e.src};}`)).join("\n")}const uN={"data-iliad":"",type:"text/css"},hN="__editor_styles",pN=Pd({props:{styles:Array,ctx:Object},setup(e){const t=_d(e),n=Dd("positionMonitor"),i=_h||Sd,r=xd((()=>new cN(t.value.styles,{editMode:!t.value.ctx.preview}).toString()));return Wd((()=>n.onBeforeMount(ZM.HEAD,hN))),Hd((()=>n.onMounted(ZM.HEAD,hN,i.ctx.$el))),$d((()=>n.onBeforeUpdate(ZM.HEAD,hN))),qd((()=>n.onUpdated(ZM.HEAD,hN))),Yd((()=>n.onBeforeUnmount(ZM.HEAD,hN))),Gd((()=>n.onUnmounted(ZM.HEAD,hN))),()=>th("style",uN,[r.value])}});const fN={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20230308/iliad-runtime/dist/d873f25b63116883d0611f512482dea6.js"},gN={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221116/iliad-runtime/dist/641290516cf8360803a5270610cb7630.js"},mN={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221220/iliad-runtime/dist/1e9620fc950f44e136c01d9c0cb1effe.js"},_N={imports:{vue:"https://st0.dancf.com/package/npm/gaoding/widget-vue/0.0.1/dist/index.system.js"}},vN={"data-iliad":"",type:"systemjs-importmap"},yN=Pd({props:{cb:Function},mounted(){const{runtime:e}=this.$refs;e.onload=()=>{this.cb()}},render:()=>th(Uu,null,[th("script",lh(fN,{ref:"runtime"}),null)])});var wN=QM(Pd({components:{RuleSet:pN,FontFaces:function({fonts:e}){return th("style",lh(uN,{"data-herer":!0}),[dN(e)])},Reset:function({ctx:e}){return th(Uu,null,[th("style",uN,["html, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, font, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, figcaption, figure, main,\nnav, button, section, header, footer, title {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  vertical-align: baseline;\n  background: transparent;\n  box-sizing: border-box;\n}\n\nbody {\n  font-size: 10px;\n  font-family: Arial, Helvetica, sans-serif;\n  overflow-x: auto;\n  overflow-y: auto;\n}\n\nol, ul {\n  margin: 0;\n}\n\nblockquote, q {\n  quotes: none;\n}\n\nins {\n  text-decoration: none;\n}\n\ndel {\n  text-decoration: line-through;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\na {\n  cursor: pointer;\n  text-decoration: none;\n  color: inherit;\n}\n\nhtml, body {\n  height: 100%;\n}\n\n:focus {\n  outline: none;\n}\n\n*[data-in-shadow] {\n  pointer-events: none;\n}\n\na[href] {\n  pointer-events: auto;\n}\n\n.link-node {\n  cursor: pointer;\n}\n\npicture > img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n"]),!e.preview&&th("style",{type:"text/css"},[":focus-visible {\n  outline: none;\n}\n\n[data-hide] {\n  visibility: hidden;\n}\n\n* {\n  user-select: none;\n}\n\nbody {\n  overflow-x: hidden;\n}\n"]),th("script",{id:"click-script","data-enabled":e.preview,type:"text/javascript"},["window.addEventListener('click', e => {\n  const clickScript = document.querySelector('#click-script');\n  if (!(clickScript && clickScript.dataset.enabled === 'true')) return;\n  const { target, composedPath } = e;\n  let path = [];\n  try {\n    path = composedPath?.() || [];\n  } catch (err) {\n    path = getAncestorNodes(target);\n    console.warn(err);\n  }\n  let linkNode = null;\n  if (target.tagName !== 'A') {\n    linkNode = path.find(cv => typeof cv.className === 'string' && cv.className.includes('link-node'));\n  } else {\n    linkNode = target;\n  }\n  if (!linkNode) return;\n  const href = linkNode.getAttribute('href');\n  if (!href.startsWith('#')) return;\n  const anchorTarget = document.querySelector(href);\n  if (!anchorTarget) return;\n  e.preventDefault();\n  anchorTarget.scrollIntoView();\n});\n\n// 获取符合条件的父节点 如果没有 返回null\nfunction getAncestorNodes(target) {\n  const elements = [target];\n  let index = 0;\n  do {\n    const parent = elements[index].parentElement;\n    if (parent) {\n      elements.push(parent);\n    }\n    index++;\n  } while (elements[index]);\n  return elements;\n}\n"])])},WebWidgetCommon:yN,WebWidgetImportMap:th("script",vN,[JSON.stringify(_N)])},props:{fonts:Object,styles:Object,ctx:Object,readyCB:Function}}),[["render",function(e,t,n,i,r,o){const s=Ru("FontFaces"),a=Ru("Reset"),l=Ru("RuleSet"),c=Ru("WebWidgetImportMap"),d=Ru("WebWidgetCommon");return Ku(),qu(Uu,null,[th(s,{fonts:e.fonts.value},null,8,["fonts"]),th(a,{ctx:e.ctx},null,8,["ctx"]),th(l,{styles:e.styles.value,ctx:e.ctx},null,8,["styles","ctx"]),th(c),e.ctx.shouldLoadWebWidgetRuntime?(Ku(),Yu(d,{key:0,cb:e.readyCB},null,8,["cb"])):rh("",!0)],64)}]]);const bN={inject:["positionMonitor"],beforeMount(){this.positionMonitor.onBeforeMount(ZM.BODY,this.vm.id)},mounted(){this.positionMonitor.onMounted(ZM.BODY,this.vm.id,this.$el)},beforeUpdate(){this.positionMonitor.onBeforeUpdate(ZM.BODY,this.vm.id)},updated(){this.positionMonitor.onUpdated(ZM.BODY,this.vm.id,this.$el)},beforeUnmount(){this.positionMonitor.onBeforeUnmount(ZM.BODY,this.vm.id)},unmounted(){this.positionMonitor.onUnmounted(ZM.BODY,this.vm.id)}},xN=Pd({name:"Content",mixins:[bN],inject:["positionMonitor"],inheritAttrs:!0,props:{vm:Object},render(){var e,t;const{vm:n}=this,{link:i,props:{content:r}}=n;let o=(null==(t=null==(e=n.meta)?void 0:e.tagName)?void 0:t.toLowerCase())||"div",s={};return i&&(o="a",s={target:i.target,href:i.href}),np(o,b(w({},s),{innerHTML:r}))}}),CN=Pd({name:"Tag",mixins:[bN],inject:["positionMonitor"],inheritAttrs:!0,props:{vm:Object},render(){var e,t,n;const i=this.vm,r=(null==(t=null==(e=i.meta)?void 0:e.tagName)?void 0:t.toLowerCase())||"div";return th(r,{"data-in-shadow":(null==(n=i.meta)?void 0:n.isInShadow)||null,"data-ct":i.meta.componentType||null,"data-t":i.meta.type||null},{default:()=>[this.$slots.default?this.$slots.default():null,this.$slots.cover?this.$slots.cover():null]})}}),kN=Pd({name:"WebWidgetProxy",mixins:[bN],inject:["positionMonitor","ctx"],inheritAttrs:!0,props:{vm:Object},data:()=>({innerStyle:w({},rN)}),mounted(){const{widget:e}=this.$refs;e&&this.registerWidgetStateChangeListener(e,this.positionMonitor)},updated(){const e=this.positionMonitor,{widget:t}=this.$refs;t&&(this.stateWatcher||this.registerWidgetStateChangeListener(t,e),"mounted"===t.state&&(null==t||t.update({data:this.vm.props.data}).catch((e=>{console.warn("Web Widget Update Error ",e)}))))},methods:{registerWidgetStateChangeListener(e,t){this.stateWatcher=e.addEventListener("statechange",(()=>{t.measure()}))}},render(){var e;const t=this.vm,{type:n,src:i,data:r}=t.props,{innerStyle:o}=this;return th("div",null,[(null==(e=this.ctx)?void 0:e.webWidgetReady)&&th(Ru("web-widget"),{ref:"widget",type:n,src:i,data:r,style:o},null)])}}),EN=Pd({name:"Video",inject:["positionMonitor"],inheritAttrs:!0,props:{vm:Object},render(){const{vm:e}=this;return np("div",[np("video",w({},e.props)),this.$slots.cover?this.$slots.cover():null])}}),SN=Pd({name:"Image",mixins:[bN],inject:["positionMonitor","resourceService"],inheritAttrs:!0,props:{vm:Object},data:()=>({src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}),watch:{"vm.props.src":function(){this.loadImage()}},created(){this.blob=this.resourceService.getPlaceHolderImage(this.vm.props.intrinsicWidth,this.vm.props.intrinsicHeight),this.src=this.blob.url,this.loadImage()},unmounted(){this.blob&&(Bo(this.blob),this.blob=null)},methods:{loadImage(){const e=this.vm.props.src;this.resourceService.loadImage(e).then((()=>{this.src=this.resourceService.getImageCache(e)}))}}}),IN=["src"];var ON=QM(SN,[["render",function(e,t,n,i,r,o){return Ku(),qu("div",null,[eh("img",{src:e.src},null,8,IN),dh(e.$slots,"cover")])}]]);var TN=QM(Pd({name:"Svg",mixins:[bN],inheritAttrs:!0,props:{vm:Object},mounted(){this.appendSvg()},methods:{appendSvg(){this.$el.insertAdjacentHTML("afterbegin",this.vm.props.content)}}}),[["render",function(e,t,n,i,r,o){return Ku(),qu("span",null,[dh(e.$slots,"cover")])}]]);const MN=["href","target"];var NN=QM({props:{vm:Object},computed:{com(){const{vm:e}=this;return io(e)?xN:ro(e)?ON:oo(e)?TN:ao(e)?EN:so(e)?kN:CN},hasLink(){return!!this.vm.link},linkHref(){const{link:e}=this.vm;return null==e?void 0:e.href},linkTarget(){const{link:e}=this.vm;return null==e?void 0:e.target},innerStyle(){return this.hasLink?w({},nN):{}},idAttr(){var e,t;return null!=(t=null==(e=this.vm.props)?void 0:e.id)?t:null}}},[["render",function(e,t,n,i,r,o){const s=Ru("Node",!0);return Ku(),Yu((a=o.com,ma(a)?Pu("components",a,!1)||a:a||Du),{vm:n.vm,id:o.idAttr,class:ea([n.vm.id,{"link-node":o.hasLink}]),"data-fprt":n.vm.id,"data-hide":n.vm.hide||null},function(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(ha(i))for(let t=0;t<i.length;t++)e[i[t].name]=i[t].fn;else i&&(e[i.name]=i.fn)}return e}({default:Td((()=>[n.vm.children?(Ku(!0),qu(Uu,{key:0},ch(n.vm.children,(e=>(Ku(),Yu(s,{key:e.id,vm:e},null,8,["vm"])))),128)):rh("",!0)])),_:2},[o.hasLink?{name:"cover",fn:Td((()=>[eh("a",{class:"linkTarget",href:o.linkHref,target:o.linkTarget,style:Xs(o.innerStyle)},null,12,MN)]))}:void 0]),1032,["vm","id","class","data-fprt","data-hide"]);var a}]]),AN=Object.defineProperty,RN=Object.getOwnPropertyDescriptor,DN=(e,t)=>(n,i)=>t(n,i,e);let PN=(d=class extends zo{constructor(e,t,n,i,r,o,s){super(),C(this,"canvasContext"),this.frame=e,this.positionMonitor=t,this.viewModel=n,this.view=i,this.resourceService=r,this.model=s;const a=!!customElements.get("web-widget");this.canvasContext=od({preview:!1,webWidgetReady:a,shouldLoadWebWidgetRuntime:!a}),this.mountApp(),this._register(o.onDidChangeContext((e=>{e.affectsSome(PN.watchKeys)&&(this.canvasContext.preview=o.getContextKeyValue(bm.viewMode.key)===gm.Preview)})))}get document(){return this.frame.contentDocument}get body(){if(!this.document)throw new Error("404");return this.document.body}get head(){if(!this.document)throw new Error("404");return this.document.head}isWebWidgetSrc(e){var t;for(const n of this.model.getValue().nodes)if(so(n)&&(null==(t=n.meta)?void 0:t.src)===e)return!0;return!1}isImportSrc(e){return Array.from(Object.values(_N.imports)).includes(e)}watchMutation(){const e=new MutationObserver((e=>{for(const t of e)for(const e of[t.addedNodes,t.removedNodes])for(const n of e){if(n.nodeType===n.ELEMENT_NODE){const e=n;if(e.hasAttribute("data-fprt"))continue;if(e.hasAttribute("data-iliad"))continue;if("SCRIPT"===e.tagName){const t=e.getAttribute("src");if(t){if(this.isImportSrc(t))continue;if(this.isWebWidgetSrc(t))continue}}}console.warn(new Error("iliad canvas mutated"),t)}}));e.observe(this.body,{childList:!0}),e.observe(this.head,{childList:!0}),this._register(jo((()=>{e.disconnect()})))}mountApp(){const{root:e,styles:t,fonts:n}=this.viewModel,{onViewportUpdated:i}=this.view,r=_d(1/0);i((()=>{const e=this.view.getViewport();r.value=e.logicWidth}));const o=xp(function(e,t,n,i){return()=>th(wN,{styles:e,fonts:t,ctx:i,readyCB:n},null)}(t,n,(()=>{this.canvasContext.webWidgetReady=!0}),this.canvasContext));o.provide("positionMonitor",this.positionMonitor),o.mount(this.head),this._register(jo((()=>{o.unmount()})));const s=xp((a=e,()=>th(tN,{vm:a.value},null)));var a;s.provide("positionMonitor",this.positionMonitor),s.provide("ctx",this.canvasContext),s.provide("resourceService",this.resourceService),s.component("Node",NN);const l=this.document.createElement("div");this.body.appendChild(l),c_.write(l,s_.Canvas),s.mount(l),this.positionMonitor.onMounted(ZM.BODY,"root",l),this._register(jo((()=>{s.unmount(),this.positionMonitor.onUnmounted(ZM.BODY,"root")}))),this.watchMutation()}},C(d,"watchKeys",new Set([bm.viewMode.key])),d);PN=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?RN(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&AN(t,n,o),o})([DN(2,No),DN(3,Ro),DN(4,Dy),DN(5,Lf),DN(6,Wr)],PN);let LN=1;class UN extends zo{constructor(e,t){super(),C(this,"_widgets",[]),C(this,"_layers",new Map),C(this,"domNode"),C(this,"_height",0),this.view=t;const n=e.contentDocument.createElement("div");e.contentDocument.body.appendChild(n),this.domNode=n,c_.write(n,s_.CanvasOverlay),Object.assign(n.style,{position:"absolute",zIndex:100,top:0,right:0,left:0,overflow:"hidden"}),hi(Do).forEach((e=>{const t=document.createElement("div");t.dataset.layer=e,this._layers.set(e,t),n.appendChild(t)})),e.contentDocument.body.setAttribute("tabIndex","0")}updateViewPort(e,t,n){this._height!==e&&(this.domNode.style.height=Xi(e),this._height=e)}addWidget(e,t,n=!0){const i=this.getLayer(t),r=document.createElement("div");i.appendChild(r),e.render(r),n&&c_.write(r,s_.ContentWidget);const o=(++LN).toString();r.dataset.id=o,this._widgets.push({id:o,widget:e,el:r})}removeWidget(e){const t=Ar(this._widgets,(t=>t.widget===e));if(t<0)throw new Error("404");const n=this._widgets[t];n.el.style.display="none",this._widgets.splice(t,1),Up((()=>{n.el.remove()}))}getLayer(e){if(!this._layers.has(e))throw new Error("500");return this._layers.get(e)}getWidgetById(e){const t=Uo(this._widgets,(t=>t.id===e));return t?t.widget:null}dispose(){super.dispose(),this._widgets.forEach((({el:e})=>e.remove())),this._widgets.length=0,this.domNode.remove()}show(){this.domNode.style.display="block"}hide(){this.domNode.style.display="none"}}class FN{constructor(){C(this,"onContextMenu",null),C(this,"onMouseMove",null),C(this,"onMouseEnter",null),C(this,"onMouseLeave",null),C(this,"onMouseDown",null),C(this,"onMouseUp",null),C(this,"onMouseDrag",null),C(this,"onMouseDragStart",null),C(this,"onMouseDrop",null),C(this,"onMouseDropCanceled",null),C(this,"onDbClick",null)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseEnter(e){this.onMouseEnter&&this.onMouseEnter(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDragStart(e){this.onMouseDragStart&&this.onMouseDragStart(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitDbClick(e){this.onDbClick&&this.onDbClick(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:e.target}:e}}class BN{constructor(e,t){C(this,"viewModel"),C(this,"userInputEvents"),this.viewModel=e,this.userInputEvents=t}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseEnter(e){this.userInputEvents.emitMouseEnter(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDragStart(e){this.userInputEvents.emitMouseDragStart(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitDbClick(e){this.userInputEvents.emitDbClick(e)}}var jN=Object.defineProperty,VN=Object.getOwnPropertyDescriptor,zN=(e,t)=>(n,i)=>t(n,i,e);let KN=class extends zo{constructor(e,t,n,i){super(),C(this,"rects",new Map),C(this,"elements",new Map),C(this,"_onUpdated",this._register(new xs)),C(this,"onUpdate",this._onUpdated.event),C(this,"_onWorkspaceTreeUpdated",this._register(new xs)),C(this,"onWorkspaceTreeUpdated",this._onWorkspaceTreeUpdated.event),C(this,"_scale",1),C(this,"_measureDelayer",this._register(new zp(0))),C(this,"_gcDelayer",this._register(new zp(16))),C(this,"_workspaceTreeUpdateDelayer",this._register(new zp(0))),C(this,"_domChangeBarrier",null),C(this,"_styleChangeBarrier",null),C(this,"disposableStore",new Vo),C(this,"_connected"),this.frameElement=e,this.model=t,this.view=n,this.viewModel=i,this._register(this.disposableStore),this.connect(),this._register(Rg(e.contentWindow,Ig,(e=>this.handleWindowSizeChange())))}dispose(){super.dispose(),this.disconnect()}disconnect(){this._connected=!1,this.disposableStore.dispose()}connect(){this._connected=!0,this.disposableStore=new Vo;const e=this.model.getValue();this.disposableStore.add(jo(Jh(e.nodes,(()=>this.startDOMChangeRecord()),{deep:!0}))),this.disposableStore.add(jo(Jh(e.styles,(()=>this.startStyleChangeRecord()),{deep:!0}))),this.disposableStore.add(jo(Jh(e.breakpoints,(()=>this.startStyleChangeRecord()),{deep:!0})))}startDOMChangeRecord(){this._domChangeBarrier||(this._domChangeBarrier=new Bp,this._domChangeBarrier.wait().then((()=>{this._workspaceTreeUpdateDelayer.trigger((()=>{this._onWorkspaceTreeUpdated.fire()}))})))}startStyleChangeRecord(){this._styleChangeBarrier||(this._styleChangeBarrier=new Bp,this._styleChangeBarrier.wait().then((()=>{this._workspaceTreeUpdateDelayer.trigger((()=>{this._onWorkspaceTreeUpdated.fire()}))})))}handleWindowSizeChange(){this.measure()}measure(){this._connected&&this._measureDelayer.trigger((()=>{this._connected&&this._doMeasure()}))}_doMeasure(){var e;const t=this.view.getViewport(),{logicHeight:n}=t;if(!this.frameElement.isConnected)return;const i=this.frameElement.contentDocument.body.scrollTop,r=this.frameElement.contentDocument.body.scrollLeft,o=i,s=i+n,a=[],l=[{node:this.viewModel.root.value,isAncestorPositionFixed:!1}];for(;l.length;){let{node:e,isAncestorPositionFixed:t}=l.pop();const{rect:n,isInPositionFixedChain:c}=this.measureOne(e,i,r,t),d=n&&(n.top-s>5||o-n.bottom>5);t=t||c;for(let i=0,r=e.children.length;i<r;i++)d?a.push({node:e.children[i],isAncestorPositionFixed:t}):l.push({node:e.children[i],isAncestorPositionFixed:t})}a.length?Up((()=>{var e;const t=this.frameElement.contentDocument.body.scrollTop,n=this.frameElement.contentDocument.body.scrollLeft;for(;a.length;){let{node:e,isAncestorPositionFixed:i}=a.pop();const{isInPositionFixedChain:r}=this.measureOne(e,t,n,i);i=i||r;for(let t=0,n=e.children.length;t<n;t++)a.push({node:e.children[t],isAncestorPositionFixed:i})}null==(e=this._styleChangeBarrier)||e.open(),this._onUpdated.fire()}),8):(null==(e=this._styleChangeBarrier)||e.open(),this._onUpdated.fire())}measureOne(e,t,n,i){const{id:r}=e,{_scale:o}=this;if(c_.shouldNotBeMeasured(r))return;const s=this.elements.get(r);if(!s)throw new Error("404");const a=s.getBoundingClientRect(),{width:l,height:c,top:d,right:u,bottom:h,left:p}=a,f=getComputedStyle(s),g="fixed"===f.position;(g||i)&&(t=0,n=0);let m={width:l*o,height:c*o,top:(d+t)*o,right:(u+n)*o,bottom:(h+t)*o,left:(p+n)*o,mx:null};if(lo(e)){const{transform:e}=f;if("none"!==e&&"matrix(1, 0, 0, 1, 0, 0)"!==e){const n=p+l/2,i=d+c/2,r=b_.parse(e);m.mx=r;const a=s.clientHeight+bi(f.borderTop)+bi(f.borderBottom),u=s.clientWidth+bi(f.borderLeft)+bi(f.borderRight);m={mx:r,width:u*o,height:a*o,top:(i-a/2+t)*o,right:(n+u/2)*o,bottom:(i+a/2+t)*o,left:(n-u/2)*o}}}return this.rects.has(r)?Object.assign(this.rects.get(r),m):this.rects.set(r,m),{rect:m,isInPositionFixedChain:g||i}}onBeforeMount(e,t){}onMounted(e,t,n){e===ZM.BODY&&this.elements.set(t,n),this._onDone(e,t)}onBeforeUpdate(e,t){}onUpdated(e,t,n){e===ZM.BODY&&this.elements.set(t,n),this._onDone(e,t)}onBeforeUnmount(e,t){}onUnmounted(e,t){this._onDone(e,t),this._gcDelayer.trigger((()=>this._gc()))}_onDone(e,t){this.measure()}_gc(){const e=new Set,t=this.model.getValue();if(t){for(const n of t.nodes)e.add(n.id);for(const[t,n]of this.elements)e.has(t)||this.elements.delete(t)}}hitTest(e,t){const n=[],i=this.viewModel.root.value,r=[{node:i}],{scrollX:o,scrollY:s}=this.frameElement.contentWindow,a=(i,r)=>{const{id:a}=i;if(c_.shouldNotBeSelected(a))return;const l=this.elements.get(a);if(!l)return;if(l.hasAttribute("data-in-shadow"))return;const c=this.rects.get(a);if(!c)return;let d=e,u=t;r&&(d-=o,u-=s);const{top:h,left:p,bottom:f,right:g,mx:m,width:_,height:v}=c;if(m){const e=d-(p+g)/2,t=u-(h+f)/2,i=m.a*e+m.b*t,r=m.a*t-m.b*e,o=+v/2,s=-_/2,l=+_/2;-v/2<=r&&o>=r&&s<=i&&l>=i&&n.unshift(a)}else h<=u&&f>=u&&p<=d&&g>=d&&n.unshift(a)};for(;r.length;){const{node:e,isInPositionFixedChain:t}=r.pop();a(e,t);for(let n=0,o=e.children.length;n<o;n++){const s=e.children[o-n-1];let a=!1;if(e===i){a=!co(this.model.getNodeById(s.id))}const l=t||a;r.push({node:s,isInPositionFixedChain:l})}}return n}getElementRect(e){const t=Y_(e);if(!t)throw new Error("400");return this.getElementRectById(t)}getElementRectById(e){return w({},this.rects.get(e))}scale(e){e!==this._scale&&(this._scale=e)}};KN=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?VN(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&jN(t,n,o),o})([zN(1,Wr),zN(2,Ro),zN(3,No)],KN);var WN,HN;(HN=WN||(WN={}))[HN.vertical=0]="vertical",HN[HN.horizontal=1]="horizontal";class $N extends zo{constructor(){super(),C(this,"_onDevToolsToggled",this._register(new xs)),C(this,"onDevToolsToggled",this._onDevToolsToggled.event),C(this,"isOpen",!1),C(this,"orientation");const e=new Vp;this._register(e),e.cancelAndSet((()=>this.detect()),200),this._register(Rg(window,Mg,this.detect.bind(this))),this._register(Rg(window,Tg,this.detect.bind(this)))}detect(){const e=window.outerWidth-window.innerWidth>160,t=window.outerHeight-window.innerHeight>160,n=e?0:1;t&&e||!e&&!t?(this.isOpen&&this._onDevToolsToggled.fire(!1),this.isOpen=!1,this.orientation=void 0):(this.isOpen&&this.orientation===n||this._onDevToolsToggled.fire(!0),this.isOpen=!0,this.orientation=n)}}const qN=Pd({name:"Breadcrumbs",inject:["i18nService"],props:{parts:Array,hasTrigger:Boolean},render(){const{parts:e,hasTrigger:t=!1}=this;return e.length?th("div",{className:"breadcrumbs-wrapper"},[th("style",{type:"text/css"},[".breadcrumbs-wrapper {\n  position: absolute;\n  transform: translateY(-100%);\n  top: -4px;\n  left: 0;\n  display: flex;\n  flex-direction: row;\n  font-family: sans-serif;\n  -webkit-font-smoothing: antialiased;\n  font-size: 10px;\n  line-height: 1.2;\n  color: #c3daff;\n  cursor: default;\n  user-select: none;\n}\n\n.breadcrumbs {\n  background: #116dff;\n  display: flex;\n  align-items: center;\n  border-radius: 4px;\n  width: fit-content;\n  white-space: nowrap;\n  padding: 0 8px;\n  line-height: 20px;\n  margin-right: 4px;\n  max-width: 500px;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n.breadcrumbs::-webkit-scrollbar {\n  display: none;\n}\n\n.breadcrumbs_part:hover {\n  color: #ffffff;\n  cursor: pointer;\n}\n\n.breadcrumbs_part {\n  max-width: 0;\n  visibility: hidden;\n}\n\n.breadcrumbs_part:first-child,\n.breadcrumbs:hover .breadcrumbs_part {\n  max-width: fit-content;\n  visibility: visible;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n\n.chevron {\n  fill: hsla(0, 0%, 100%, 0.7);\n  margin-top: 2px;\n  margin-right: 4px;\n  transform: rotate(180deg);\n}\n\n.breadcrumbs_part:first-child .chevron {\n  transform: rotate(180deg);\n}\n\n.breadcrumbs:hover .chevron {\n  transform: rotate(180deg);\n}\n\n.trigger-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n  background: #ff4f95;\n  border-radius: 4px;\n}\n\n.trigger-icon svg {\n  display: block;\n  width: 16px;\n  height: 16px;\n  fill: #ffffff;\n}\n"]),th("div",{className:"breadcrumbs"},[e.map(((e,t)=>th("div",{className:"breadcrumbs_part","data-fprt":"breadcrumbs","data-detail":e.id},[t>0&&th("svg",{xmlns:"http://www.w3.org/2000/svg",width:"4",height:"7",viewBox:"0 0 4 7",class:"chevron"},[th("path",{d:"M3.737 3.737l-3-3-.473.473 2.527 2.527L.264 6.264l.473.473z"},null)]),th("span",{className:"item"},[this.i18nService.t(e.label)])])))]),t&&th("div",{className:"trigger-icon"},[th("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",role:"img","aria-hidden":"true"},[th("path",{d:"M13 1L5 13H10V23L18 10H13V1Z"},null)])])]):null}});var YN=Object.defineProperty,GN=Object.getOwnPropertyDescriptor,XN=(e,t)=>(n,i)=>t(n,i,e);let JN=1,QN=class extends zo{constructor(e,t,n){super(),C(this,"_widgets",[]),C(this,"_layers",new Map),C(this,"domNode"),C(this,"wrapper"),C(this,"scrollableContainer"),C(this,"_toolbarProps"),C(this,"_toolbar"),C(this,"_outline"),C(this,"_outlineProps"),C(this,"_height",0),C(this,"_scrollTop",0),C(this,"_scrollLeft",0),this.view=t,this.i18nService=n;const i=document.createElement("div");e.appendChild(i),Object.assign(i.style,{position:"absolute",zIndex:100,top:0,left:0,width:0,height:0,"transform-origin":"top center"});const r=document.createElement("div");i.appendChild(r),this.wrapper=i,this.domNode=r,c_.write(r,s_.CanvasOverlay),Object.assign(r.style,{position:"absolute",top:"0px",left:"0px",width:"0px","transform-origin":"0 0",transform:"translateX(50%)"}),this.scrollableContainer=document.createElement("div"),this.scrollableContainer.style.position="absolute",this.domNode.appendChild(this.scrollableContainer),hi(Do).forEach((e=>{const t=document.createElement("div");t.dataset.layer=e,this._layers.set(e,t),this.scrollableContainer.appendChild(t)})),this.mountToolbar(),this.mountOutline()}transform(e,t,n){const i=qi(n),r={width:Xi(e),transform:i};Object.assign(this.wrapper.style,r)}updateToolbar(e){e(this._toolbarProps)}mountToolbar(){const e=document.createElement("div");var t;this.getLayer(Do.Medium).appendChild(e),e.setAttribute("data-fprt",s_.ContentWidget),this._toolbarProps=od({show:!1}),this._toolbar=xp((t=this._toolbarProps,()=>{if(!t.show)return null;const{a:e}=t.vmx,n=g_(t),i=xd((()=>{var e,i;return{position:"absolute",top:Xi((null==(e=t.rect)?void 0:e.top)+n.value.offsetTop),left:Xi((null==(i=t.rect)?void 0:i.left)+n.value.offsetLeft),display:t.hideToolbarUI?"none":"flex","justify-content":"center","align-items":"flex-start","flex-direction":"row","transform-origin":"top left",transform:t.vmx?qi(t.vmx):"none","z-index":"9"}})),r=xd((()=>{var i;return{position:"absolute",top:Xi(n.value.offsetTop+(t.rect.above?t.rect.top+74*e:t.rect.top)),left:Xi(n.value.offsetLeft+(null==(i=t.rect)?void 0:i.left)),transform:t.vmx?qi(t.vmx):"none","transform-origin":"top left"}}));return th(Uu,null,[t.breadcrumbs&&th("div",{style:r.value},[th(qN,lh(t.breadcrumbs,{hasTrigger:t.hasTrigger}),null)]),th("div",{id:"toolbar",className:"toolbar",style:i.value,"data-fprt":"toolbar"},null)])})),this._toolbar.provide("scrolls",this.view.scrolls),this._toolbar.provide("i18nService",this.i18nService),this._toolbar.mount(e),this._register(jo((()=>this._toolbar.unmount())))}updateOutline(e){e(this._outlineProps)}mountOutline(){const e=document.createElement("div");this.getLayer(Do.Medium).appendChild(e),e.setAttribute("data-fprt",s_.ContentWidget),this._outlineProps=od([]),this._outline=xp(B_(this._outlineProps)),this._outline.provide("scrolls",this.view.scrolls),this._outline.provide("i18nService",this.i18nService),this._outline.mount(e),this._register(jo((()=>this._outline.unmount())))}updateViewPort(e,t,n){this._height!==e&&(this.scrollableContainer.style.height=Xi(e),this._height=e),this._scrollTop!==t&&(this.scrollableContainer.style.top=Xi(-t),this._scrollTop=t),this._scrollLeft!==n&&(this.scrollableContainer.style.left=Xi(-n),this._scrollLeft=n)}addWidget(e,t,n=!0){const i=this.getLayer(t),r=document.createElement("div"),o=(++JN).toString();r.dataset.id=o,this._widgets.push({id:o,widget:e,el:r}),i.appendChild(r),e.render(r),n&&c_.write(r,s_.ContentWidget)}removeWidget(e){const t=Ar(this._widgets,(t=>t.widget===e));if(t<0)return void console.error("404");const n=this._widgets[t];n.el.style.display="none",this._widgets.splice(t,1),Up((()=>{n.el.remove()}))}getLayer(e){if(!this._layers.has(e))throw new Error("500");return this._layers.get(e)}getWidgetById(e){const t=Uo(this._widgets,(t=>t.id===e));return t?t.widget:null}dispose(){super.dispose(),this._widgets.forEach((({el:e})=>e.remove())),this._widgets.length=0,this.domNode.remove()}show(){this.domNode.style.display="block"}hide(){this.domNode.style.display="none"}};QN=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?GN(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&YN(t,n,o),o})([XN(1,Ro),XN(2,Ml)],QN);class ZN extends zo{constructor(e){super(),C(this,"domNode"),C(this,"left"),C(this,"right"),C(this,"leftTag"),C(this,"rightTag");const t=document.createElement("div");e.appendChild(t),this.mountRight(t),this.mountLeft(t),t.className="canvas-resize-wrapper",this.domNode=t}transform(e,t,n){const i=qi(n),r={width:Xi(e),height:Xi(t),transform:i,transformOrigin:"top center"};Object.assign(this.domNode.style,r),Object.assign(this.left.style,{transform:`scaleX(${1/n.a})`,transformOrigin:"top right"}),Object.assign(this.right.style,{transform:`scaleX(${1/n.a})`,transformOrigin:"top left"}),Object.assign(this.leftTag.style,{transform:`scaleY(${1/n.a}) translate(-50%, -50%)`,transformOrigin:"center center"}),Object.assign(this.rightTag.style,{transform:`scaleY(${1/n.a}) translate(-50%, -50%)`,transformOrigin:"center center"})}mountRight(e){const t=document.createElement("div");t.className="canvas-resize canvas-resize--right";const n=document.createElement("i");n.className="canvas-resize-tag",t.appendChild(n),e.appendChild(t),t.dataset.detail="right",t.setAttribute("data-drag",""),c_.write(t,"canvasResize"),Object.assign(t.style,{width:Xi(16),top:"0px",bottom:"0px",right:Xi(-24),cursor:"ew-resize"}),this.right=t,this.rightTag=n}mountLeft(e){const t=document.createElement("div");t.className="canvas-resize canvas-resize--left";const n=document.createElement("i");n.className="canvas-resize-tag",t.appendChild(n),e.appendChild(t),t.dataset.detail="left",t.setAttribute("data-drag",""),c_.write(t,"canvasResize"),Object.assign(t.style,{width:Xi(16),top:"0px",bottom:"0px",left:Xi(-24),cursor:"ew-resize"}),this.left=t,this.leftTag=n}dispose(){super.dispose(),this.domNode.remove()}}class eA{constructor(){C(this,"_hooks",new Vo),C(this,"_ctx"),C(this,"mask")}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this.mask&&this.mask.remove(),this._hooks.clear();const n=this._ctx.onStopCallback;this._ctx=null,e&&n&&n(t)}isMonitoring(){return!!this._ctx}startMonitoring(e,t,n,i,r,o){if(this.isMonitoring())return;this._ctx={mouseMoveCallback:r,initialButtons:i,initialElement:n,onStopCallback:o};const s=n.ownerDocument.defaultView,a=t.contentWindow,l=e.ownerDocument.defaultView;if(s!==a)this.coverUpIframe(n);else{let e=2;this._hooks.add(Rg(a,bg,(t=>{t.buttons!==i||t.buttons===i&&0===i?e>0?e--:this.stopMonitoring(!0):this._ctx.mouseMoveCallback(t)}))),this._hooks.add(Rg(a,yg,(e=>{this.stopMonitoring(!0,e)})))}this._hooks.add(Rg(l,bg,(e=>{e.buttons===i?this._ctx.mouseMoveCallback(e):this.stopMonitoring(!0)}))),this._hooks.add(Rg(l,yg,(e=>{this.stopMonitoring(!0,e)}))),this._hooks.add(Rg(l,Mg,(()=>{this.stopMonitoring(!0)}))),this._hooks.add(Rg(l.document,Ng,(()=>{document.hidden&&this.stopMonitoring(!0)})))}coverUpIframe(e){const t=document.createElement("div"),n=getComputedStyle(e);Object.assign(t.style,{position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",zIndex:"100",opacity:"0",cursor:n.cursor}),t.className="mask",e.ownerDocument.body.appendChild(t),this.mask=t}}var tA=Object.defineProperty,nA=Object.getOwnPropertyDescriptor,iA=(e,t)=>(n,i)=>t(n,i,e);let rA=class extends zo{constructor(e,t,n,i,r,o,s){super(),C(this,"_contentWidgets",new Set),C(this,"_onMouseUp",this._register(new xs)),C(this,"onMouseUp",this._onMouseUp.event),C(this,"_onMouseDown",this._register(new xs)),C(this,"onMouseDown",this._onMouseDown.event),C(this,"_onMouseDrag",this._register(new xs)),C(this,"onMouseDrag",this._onMouseDrag.event),C(this,"_onMouseDragStart",this._register(new xs)),C(this,"onMouseDragStart",this._onMouseDragStart.event),C(this,"_onMouseDrop",this._register(new xs)),C(this,"onMouseDrop",this._onMouseDrop.event),C(this,"_onMouseDropCanceled",this._register(new xs)),C(this,"onMouseDropCanceled",this._onMouseDropCanceled.event),C(this,"_onContextMenu",this._register(new xs)),C(this,"onContextMenu",this._onContextMenu.event),C(this,"_onMouseMove",this._register(new xs)),C(this,"onMouseMove",this._onMouseMove.event),C(this,"_onMouseLeave",this._register(new xs)),C(this,"onMouseLeave",this._onMouseLeave.event),C(this,"_onMouseEnter",this._register(new xs)),C(this,"onMouseEnter",this._onMouseEnter.event),C(this,"_onDbClick",this._register(new xs)),C(this,"onDbClick",this._onDbClick.event),C(this,"_onPositionUpdated",this._register(new xs)),C(this,"onPositionUpdated",this._onPositionUpdated.event),C(this,"_onViewportUpdated",this._register(new xs)),C(this,"onViewportUpdated",this._onViewportUpdated.event),C(this,"_onWorkspaceTreeUpdated",this._register(new xs)),C(this,"onWorkspaceTreeUpdated",this._onWorkspaceTreeUpdated.event),C(this,"pointerHandler"),C(this,"positionMonitor"),C(this,"mouseMoveMonitor"),C(this,"domNode"),C(this,"canvasHostDomNode"),C(this,"boundaryDomNode"),C(this,"viewCanvas"),C(this,"canvasOverlay"),C(this,"outerOverlay"),C(this,"canvasResizer"),C(this,"iframeReserved"),C(this,"_scrolls"),C(this,"_rootRectCache"),C(this,"_cachedMedia"),C(this,"disposed",!1),this.model=n,this.resourceService=r,this.contextKeyService=o,this.commandService=s,i.store(Ro,this),this._scrolls=od({scrollX:0,scrollY:0}),this.boundaryDomNode=e,this.boundaryDomNode.style.overflow="auto hidden",this.domNode=document.createElement("div"),e.appendChild(this.domNode),this._register(jo((()=>this.domNode.remove()))),this.domNode.style.position="relative";const a=new FN;a.onContextMenu=e=>this._onContextMenu.fire(e),a.onMouseMove=e=>this._onMouseMove.fire(e),a.onMouseLeave=e=>this._onMouseLeave.fire(e),a.onMouseEnter=e=>this._onMouseEnter.fire(e),a.onMouseDown=e=>this._onMouseDown.fire(e),a.onMouseUp=e=>this._onMouseUp.fire(e),a.onMouseDrag=e=>this._onMouseDrag.fire(e),a.onMouseDragStart=e=>this._onMouseDragStart.fire(e),a.onMouseDrop=e=>this._onMouseDrop.fire(e),a.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),a.onDbClick=e=>this._onDbClick.fire(e),this.canvasResizer=this._register(new ZN(this.domNode)),this.mouseMoveMonitor=this._register(new eA);const l=document.createElement("iframe");l.title="editor",this.domNode.appendChild(l);const c=getComputedStyle(e),d=parseFloat(c.paddingTop),u=parseFloat(c.paddingBottom);Object.assign(l.style,{border:"none",transform:"scale(1) translateZ(0px)",transformOrigin:"left top",transformStyle:"preserve-3d",width:"100%","transform-origin":"top center",height:`calc(100% - ${Xi(d+u)})`}),l.focus(),this.canvasHostDomNode=l,this._register(jo((()=>l.remove()))),this._register(this.positionMonitor=i.createInstance(KN,l));const h=new BN(t,a);this._register(this.viewCanvas=i.createInstance(PN,l,this.positionMonitor)),this.canvasOverlay=this._register(new UN(l,this)),this.outerOverlay=this._register(i.createInstance(QN,this.domNode)),this._register(this.pointerHandler=new JM(h,this._createPointerHandlerHelper())),this._register(o.onDidChangeContext((e=>{if(e.affectsSome(new Set([bm.viewMode.key]))){o.getContextKeyValue(bm.viewMode.key)===gm.Preview?(this.canvasOverlay.hide(),this.outerOverlay.hide(),this.updateCanvasCursor(Fi.default)):(this.canvasOverlay.show(),this.outerOverlay.show())}}))),this._register(Rg(this.canvasHostDomNode.contentWindow,Og,(()=>this.handleScroll()),{passive:!1})),this._register(Rg(this.canvasHostDomNode.contentWindow,Ig,(()=>this.handleIFrameResize()))),this._register(Rg(window,Ig,(()=>this.handleWindowResize()))),this._register(this.positionMonitor.onUpdate((()=>{this.handleScroll(),this._onPositionUpdated.fire(),this._updateResizer()}))),this._register(this.positionMonitor.onWorkspaceTreeUpdated((()=>this._onWorkspaceTreeUpdated.fire()))),this._register(i.createInstance(qg,l.contentDocument.body));this._register(new $N).onDevToolsToggled((e=>{this.positionMonitor.measure()}))}get scrolls(){return this._scrolls}_createPointerHandlerHelper(){return{viewDomNode:this.domNode,canvasHostDomNode:this.canvasHostDomNode,boundaryDomNode:this.boundaryDomNode,hitTest:(e,t)=>this.positionMonitor.hitTest(e,t).map((e=>this.viewCanvas.body.querySelector(`[data-fprt="${e}"]`))).filter(Boolean),getContentWidgetById:e=>this.canvasOverlay.getWidgetById(e),mouseMoveMonitor:this.mouseMoveMonitor,getViewport:()=>this.getViewport(),reMeasureCanvasRect:()=>this.reMeasureCanvasRect(),getEditorMode:()=>this.contextKeyService.getContextKeyValue(bm.viewMode.key),getEditingMode:()=>this.contextKeyService.getContextKeyValue(bm.editingMode.key)}}handleScroll(){if(this.isInPreviewMode())return;if(!this.canvasHostDomNode.contentDocument)return;const{scrollX:e,scrollY:t}=this.canvasHostDomNode.contentWindow;this._scrolls.scrollX=e,this._scrolls.scrollY=t;const{body:n}=this.canvasHostDomNode.contentDocument,{firstElementChild:i}=n,r=i.getBoundingClientRect().height,o=n.scrollTop,s=n.scrollLeft;this.canvasOverlay.updateViewPort(r,o,s),this.outerOverlay.updateViewPort(r,o,s)}handleIFrameResize(){this._doGetCurrentViewport()}handleWindowResize(){this.commandService.executeCommand("fitCanvas")}addContentWidget(e,t,n=!0){this._contentWidgets.has(e)&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets.add(e),this.canvasOverlay.addWidget(e,t,n)}removeContentWidget(e){if(!this._contentWidgets.has(e))throw new Error("404");e.dispose(),this._contentWidgets.delete(e),this.canvasOverlay.removeWidget(e)}addOuterWidget(e,t,n=!0){this._contentWidgets.has(e)&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets.add(e),this.outerOverlay.addWidget(e,t,n)}removeOuterWidget(e){if(!this._contentWidgets.has(e))throw new Error("404");e.dispose(),this._contentWidgets.delete(e),this.outerOverlay.removeWidget(e)}updateOutline(e){this.outerOverlay.updateOutline(e)}updateToolbar(e){this.outerOverlay.updateToolbar(e)}getElementRectById(e){if(":viewport"===e){const e=this.getViewport();return{top:0,left:0,right:e.logicWidth,bottom:e.logicHeight,width:e.logicWidth,height:e.logicHeight}}return this.positionMonitor.getElementRectById(e)}getGroupRectByIds(e,t=!0){if(e.length<=0)throw new Error("500");const n=e.map((e=>this.getElementRectById(e))).map((e=>t?I_(e):e)),i={left:Math.min(...n.map((e=>e.left))),right:Math.max(...n.map((e=>e.right))),top:Math.min(...n.map((e=>e.top))),bottom:Math.max(...n.map((e=>e.bottom)))};return b(w({},i),{width:i.right-i.left,height:i.bottom-i.top})}setViewport(e,t,n){let i;if(i=Number.isFinite(n)?{a:n,b:0,c:0,d:n,tx:0,ty:0}:n,e<1)throw new Error("400");const r=qi(i),o={width:Xi(e),height:Xi(t),transform:r},{a:s,d:a}=i;Object.assign(this.domNode.style,{width:Xi(e*s),height:Xi(t*a)});const l=Math.min(this.getElementRectById("root").height,t);Object.assign(this.canvasHostDomNode.style,o),this.canvasResizer.transform(e,l,i),this.outerOverlay.transform(e,t,i),this._doGetCurrentViewport(),this._onViewportUpdated.fire()}_updateResizer(){var e;const t=this.getElementRectById("root");if((null==(e=this._rootRectCache)?void 0:e.height)!==t.height){const{logicWidth:e,logicHeight:n,mx:i}=this.getViewport(),r=Math.min(this.getElementRectById("root").height,n);this.canvasResizer.transform(e,r,i),this._rootRectCache=t}}_getStylesheets(){return this.canvasHostDomNode.contentDocument.styleSheets}getViewport(){return this._cachedMedia||this._doGetCurrentViewport(),this._cachedMedia}_doGetCurrentViewport(){if(!this.canvasHostDomNode.contentWindow)return;const e=this.canvasHostDomNode.contentWindow.innerWidth,t=this.canvasHostDomNode.contentWindow.innerHeight,n=getComputedStyle(this.canvasHostDomNode),i="none"===n.transform?b_.Identity:b_.parse(n.transform),r=i.a;i.a!==i.d&&console.error("500");const o={logicWidth:parseFloat(n.width),logicHeight:parseFloat(n.height),visualWidth:Math.round(e*r),visualHeight:Math.round(t*r),scale:r,mx:i};return this._cachedMedia=o,o}getElementById(e){if(":viewport"===e)return this.viewCanvas.body;const t="root"===e?"canvas":e;return this.viewCanvas.body.querySelector(`[data-fprt="${t}"]`)}getComputedStyleOfId(e){const t=this.getElementById(e);if(!t)throw new Error("404");return getComputedStyle(t)}getContainingBlockOfId(e){return function(e){if(void 0===e)throw new Error('"el" parameter is required.');if(!(e instanceof Element))throw new Error('"el" parameter must be a Element instance.');const{position:t}=getComputedStyle(e);if("static"===t||"relative"===t){let t=e.parentElement;for(;t;){const{display:e}=getComputedStyle(t);if("block"===e||"inline-block"===e||"list-item"===e||"table"===e||"flex"===e||"grid"===e)return t;t=t.parentElement}}if("absolute"===t){let t=e.parentElement;for(;t;){const{position:e,transform:n,filter:i,willChange:r}=getComputedStyle(t);if("static"!==e||"none"!==n||"transform"===r||"perspective"===r||"none"!==i||"filter"===r)return t;t=t.parentElement}return e.ownerDocument}if("fixed"===t){let t=e.parentElement;for(;t;){const{transform:e,filter:n,willChange:i}=getComputedStyle(t);if("none"!==e||"transform"===i||"perspective"===i||"none"!==n||"filter"===i)return t;t=t.parentElement}return e.ownerDocument.defaultView}return null}(this.getElementById(e))}getElementFingerPrint(e){return Y_(e)}getViewCanvasCenterPos(){var e,t;const n=null!=(t=null==(e=this.canvasHostDomNode)?void 0:e.contentDocument.querySelector("body").scrollTop)?t:0,{logicWidth:i,logicHeight:r}=this.getViewport();return{x:i/2,y:n+r/2}}hitTest(e,t){return this.positionMonitor.hitTest(e,t)}scrollNodeIntoView(e,t){const n=this.canvasHostDomNode.contentDocument.querySelector(`.${e}`);if(!n)return;const{logicHeight:i,scale:r}=this.getViewport(),o=this.canvasHostDomNode.contentDocument.body,s=o.scrollTop,a=i/r,l=s,c=l+a,d=n.getBoundingClientRect(),u=d.top+s;if(u>l&&u<c)return;const h=u+d.height/2-a/2;if(!t)return void(o.scrollTop=h);const p=(h-s)/20;let f=0;const g=setInterval((()=>{o.scrollTop+=p,f++,f>20&&clearInterval(g)}),15)}getNodesFromVector(e){const{model:t}=this,{x:n,y:i}=e,r=this.hitTest(n,i);return t.queryNodes((e=>r.indexOf(e.id)>-1)).sort(((e,t)=>r.indexOf(e.id)-r.indexOf(t.id)))}createStyleFromHitPosition(e,t,n){const i=Object.create(null),r=this.getViewport();let o=this.getElementRectById(t.id);const s=this.getComputedStyleOfId(t.id);if(wr(s)){const t=w({},xr);if(!n.width||!Gi(n.width)){const i=tr(n.width)||ji.px;t.width=iv(e.width,"width",i,o,r)}if(!n.height||!Gi(n.height)){const i=tr(n.height)||ji.px;t.height=iv(e.height,"height",i,o,r)}return t}const a=Object.create(null),{left:l,top:c}=e,d=lw({x:l,y:c},n,o,s);d.containerRect&&(o=d.containerRect),Object.assign(a,d);const{dockStatus:u}=cw(e,n,o,s,r,!0,!1);Object.assign(a,u);const h="flex"===s.display,p="grid"===s.display;if(h&&"column"!==s.flexDirection)throw new Error("500");if(!h&&!p)throw new Error("500");const f=dw(e,n,o,s,a,r);return Object.assign(i,f),i}internal_disconnect(){this.positionMonitor.disconnect()}internal_connect(){this.positionMonitor.connect()}updateCanvasCursor(e){if(this.isInPreviewMode())return;const t=[this.canvasHostDomNode.contentDocument.body,this.boundaryDomNode];for(const n of t){n.style.cursor!==e&&(n.style.cursor=e)}}isInPreviewMode(){return this.contextKeyService.getContextKeyValue(bm.viewMode.key)===gm.Preview}nextTick(e,t=(()=>!0)){const n=this.onPositionUpdated((()=>{t()&&(n.dispose(),e())}))}reMeasureCanvasRect(){this.positionMonitor.measure()}internal_getWidgetInnerHTML(){return Array.from(this.viewCanvas.body.querySelectorAll("web-widget")).reduce(((e,t)=>(e[Y_(t.parentElement)]=t.shadowRoot.innerHTML,e)),Object.create(null))}dispose(){super.dispose(),this.disposed=!0,this.iframeReserved&&this.iframeReserved.remove()}};function oA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oA(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}rA=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?nA(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&tA(t,n,o),o})([iA(1,No),iA(2,Wr),iA(3,Vr),iA(4,Dy),iA(5,Lf),iA(6,ng)],rA);var aA={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},lA=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cv(this,e),this.init(t,n)}return uv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||aA,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,sA(sA({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),e}()),cA=function(){function e(){cv(this,e),this.observers={}}return uv(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function dA(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function uA(e){return null==e?"":""+e}function hA(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function pA(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return r()?{}:{obj:e,k:i(o.shift())}}function fA(e,t,n){var i=pA(e,t,Object);i.obj[i.k]=n}function gA(e,t){var n=pA(e,t),i=n.obj,r=n.k;if(i)return i[r]}function mA(e,t,n){var i=gA(e,n);return void 0!==i?i:gA(t,n)}function _A(e,t,n){for(var i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):_A(e[i],t[i],n):e[i]=t[i]);return e}function vA(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var yA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function wA(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return yA[e]})):e}var bA="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,xA=[" ",",","?","!",";"];function CA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CA(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}function SA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),r=e,o=0;o<i.length;++o){if(!r)return;if("string"==typeof r[i[o]]&&o+1<i.length)return;if(void 0===r[i[o]]){for(var s=2,a=i.slice(o,o+s).join(n),l=r[a];void 0===l&&i.length>o+s;)s++,l=r[a=i.slice(o,o+s).join(n)];if(void 0===l)return;if(t.endsWith(a)){if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a]}var c=i.slice(o+s).join(n);return c?SA(l,c,n):void 0}r=r[i[o]]}return r}}var IA=function(e){fv(n,cA);var t=EA(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return cv(this,n),i=t.call(this),bA&&cA.call(hv(i)),i.data=e||{},i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return uv(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split("."));var a=gA(this.data,s);return a||!o||"string"!=typeof n?a:SA(this.data&&this.data[e]&&this.data[e][t],n,r)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=t,t=(s=e.split("."))[1]),this.addNamespaces(t),fA(this.data,s,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(i=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var a=gA(this.data,s)||{};i?_A(a,n,r):a=kA(kA({},a),n),fA(this.data,s,a),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?kA(kA({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(),OA={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,i,r))})),t}};function TA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function MA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TA(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}var AA={},RA=function(e){fv(n,cA);var t=NA(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cv(this,n),i=t.call(this),bA&&cA.call(hv(i)),hA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,hv(i)),i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=lA.create("translator"),i}return uv(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var i=xA.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!r.test(e);if(!o){var s=e.indexOf(n);s>0&&!r.test(e.substring(0,s))&&(o=!0)}return o}(e,n,i));if(o&&!s){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:r};var l=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(r=l.shift()),e=l.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t,i){var r=this;if("object"!==lv(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],t),a=s.key,l=s.namespaces,c=l[l.length-1],d=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(u){var h=t.nsSeparator||this.options.nsSeparator;return c+h+a}return a}var p=this.resolve(e,t),f=p&&p.res,g=p&&p.usedKey||a,m=p&&p.exactUsedKey||a,_=Object.prototype.toString.apply(f),v=["[object Number]","[object Function]","[object RegExp]"],y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(w&&f&&b&&v.indexOf(_)<0&&("string"!=typeof y||"[object Array]"!==_)){if(!t.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,MA(MA({},t),{},{ns:l})):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(o){var x="[object Array]"===_,C=x?[]:{},k=x?m:g;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var S="".concat(k).concat(o).concat(E);C[E]=this.translate(S,MA(MA({},t),{joinArrays:!1,ns:l})),C[E]===S&&(C[E]=f[E])}f=C}}else if(w&&"string"==typeof y&&"[object Array]"===_)(f=f.join(y))&&(f=this.extendTranslation(f,e,t,i));else{var I=!1,O=!1,T=void 0!==t.count&&"string"!=typeof t.count,M=n.hasDefaultValue(t),N=T?this.pluralResolver.getSuffix(d,t.count,t):"",A=t["defaultValue".concat(N)]||t.defaultValue;!this.isValidLookup(f)&&M&&(I=!0,f=A),this.isValidLookup(f)||(O=!0,f=a);var R=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,D=R&&O?void 0:f,P=M&&A!==f&&this.options.updateMissing;if(O||I||P){if(this.logger.log(P?"updateKey":"missingKey",d,c,a,P?A:f),o){var L=this.resolve(a,MA(MA({},t),{},{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var B=0;B<F.length;B++)U.push(F[B]);else"all"===this.options.saveMissingTo?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);var j=function(e,n,i){var o=M&&i!==f?i:D;r.options.missingKeyHandler?r.options.missingKeyHandler(e,c,n,o,P,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,c,n,o,P,t),r.emit("missingKey",e,c,n,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?U.forEach((function(e){r.pluralResolver.getSuffixes(e,t).forEach((function(n){j([e],a+n,t["defaultValue".concat(n)]||A)}))})):j(U,a,A))}f=this.extendTranslation(f,e,t,p,i),O&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(c,":").concat(a)),(O||I)&&this.options.parseMissingKeyHandler&&(f="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(a,I?f:void 0):this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(MA(MA({},n),{interpolation:MA(MA({},this.options.interpolation),n.interpolation)}));var s,a="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var l=e.match(this.interpolator.nestingRegexp);s=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=MA(MA({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),a){var d=e.match(this.interpolator.nestingRegexp);s<(d&&d.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate.apply(o,i.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var u=n.postProcess||this.options.postProcess,h="string"==typeof u?[u]:u;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=OA.handle(h,e,t,this.options&&this.options.postProcessPassResolved?MA({i18nResolved:i},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var l=s.extractFromKey(e,a),c=l.key;n=c;var d=l.namespaces;s.options.fallbackNS&&(d=d.concat(s.options.fallbackNS));var u=void 0!==a.count&&"string"!=typeof a.count,h=u&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),p=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);d.forEach((function(e){s.isValidLookup(t)||(o=e,!AA["".concat(f[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(AA["".concat(f[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!s.isValidLookup(t)){r=n;var o,l=[c];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(l,c,n,e,a);else{var d;u&&(d=s.pluralResolver.getSuffix(n,a.count,a));var f="_zero";if(u&&(l.push(c+d),h&&l.push(c+f)),p){var g="".concat(c).concat(s.options.contextSeparator).concat(a.context);l.push(g),u&&(l.push(g+d),h&&l.push(g+f))}}for(;o=l.pop();)s.isValidLookup(t)||(i=o,t=s.getResource(n,e,o,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),n}();function DA(e){return e.charAt(0).toUpperCase()+e.slice(1)}var PA=function(){function e(t){cv(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=lA.create("languageUtils")}return uv(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=DA(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=DA(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=DA(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var i=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=n.getLanguagePartFromCode(e);if(n.isSupportedCode(i))return t=i;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=function(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&o(n.formatLanguageCode(e))})),r}}]),e}(),LA=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],UA={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},FA=["v1","v2","v3"],BA={zero:0,one:1,two:2,few:3,many:4,other:5};function jA(){var e={};return LA.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:UA[t.fc]}}))})),e}var VA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cv(this,e),this.languageUtils=t,this.options=n,this.logger=lA.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=jA()}return uv(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(e,t){return BA[e]-BA[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):i.numbers.map((function(i){return t.getSuffix(e,i,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),r=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var o=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!FA.includes(this.options.compatibilityJSON)}}]),e}();function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function KA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zA(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cv(this,e),this.logger=lA.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return uv(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:wA,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?vA(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?vA(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?vA(t.nestingPrefix):t.nestingPrefixEscaped||vA("$t("),this.nestingSuffix=t.nestingSuffix?vA(t.nestingSuffix):t.nestingSuffixEscaped||vA(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var d=function(e){if(e.indexOf(a.formatSeparator)<0){var r=mA(t,l,e);return a.alwaysFormat?a.format(r,void 0,n,KA(KA(KA({},i),t),{},{interpolationkey:e})):r}var o=e.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(mA(t,l,s),c,n,KA(KA(KA({},i),t),{},{interpolationkey:s}))};this.resetRegExp();var u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?c(a.escape(e)):c(e)}}].forEach((function(t){for(s=0;r=t.regex.exec(e);){var n=r[1].trim();if(void 0===(o=d(n)))if("function"==typeof u){var l=u(e,r,i);o="string"==typeof l?l:""}else if(i&&i.hasOwnProperty(n))o="";else{if(h){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=uA(o));var c=t.safeValue(o);if(e=e.replace(r[0],c),h?(t.regex.lastIndex+=c.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=KA({},o);function a(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var i=e.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,s)).replace(/'/g,'"');try{s=JSON.parse(r),t&&(s=KA(KA({},t),s))}catch(_8){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),_8),"".concat(e).concat(n).concat(r)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=d.shift(),l=d,c=!0}if((i=t(a.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=uA(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),c&&(i=l.reduce((function(e,t){return r.format(e,t,o.lng,KA(KA({},o),{},{interpolationkey:n[1].trim()}))}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),e}();function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HA(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cv(this,e),this.logger=lA.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,$A($A({},n),{},{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,$A({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,$A({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,$A({},n)).format(e)}},this.init(t)}return uv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"format",value:function(e,t,n,i){var r=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var i=e.split("(");t=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(e){if(e){var t=yv(e.split(":")),i=t[0],r=t.slice(1).join(":");"false"===r.trim()&&(n[i.trim()]=!1),"true"===r.trim()&&(n[i.trim()]=!0),isNaN(r.trim())||(n[i.trim()]=parseInt(r.trim(),10)),n[i.trim()]||(n[i.trim()]=r.trim())}}))}return{formatName:t,formatOptions:n}}(t),s=o.formatName,a=o.formatOptions;if(r.formats[s]){var l=e;try{var c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},d=c.locale||c.lng||i.locale||i.lng||n;l=r.formats[s](e,d,$A($A($A({},a),i),c))}catch(u){r.logger.warn(u)}return l}return r.logger.warn("there was no format function for ".concat(s)),e}),e)}}]),e}();function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function GA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YA(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}var JA=function(e){fv(n,cA);var t=XA(n);function n(e,i,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return cv(this,n),o=t.call(this),bA&&cA.call(hv(o)),o.backend=e,o.store=i,o.services=r,o.languageUtils=r.languageUtils,o.options=s,o.logger=lA.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,s.backend,s),o}return uv(n,[{key:"queueLoad",value:function(e,t,n,i){var r=this,o=[],s=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=e.split("|"),r=i[0],o=i[1];t&&this.emit("failedLoading",r,o,t),n&&this.store.addResourceBundle(r,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){var i,a,l,c,d,u;i=n.loaded,a=o,c=pA(i,[r],Object),d=c.obj,u=c.k,d[u]=d[u]||[],l&&(d[u]=d[u].concat(a)),l||d[u].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&r<5?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*o,s)}),o):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),t.loaded(e,i,s)}))}},{key:"saveMissing",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,i,null,GA(GA({},o),{},{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,n,i))}}]),n}();function QA(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===lv(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===lv(e[2])||"object"===lv(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ZA(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_8){return!1}}();return function(){var n,i=mv(e);if(t){var r=mv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return gv(this,n)}}function iR(){}function rR(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var oR=function(e){fv(n,cA);var t=nR(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(cv(this,n),e=t.call(this),bA&&cA.call(hv(e)),e.options=ZA(i),e.services={},e.logger=lA,e.modules={external:[]},rR(hv(e)),r&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,r),gv(e,hv(e));setTimeout((function(){e.init(i,r)}),0)}return e}return uv(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var i=QA();function r(e){return e?"function"==typeof e?new e:e:null}if(this.options=tR(tR(tR({},i),this.options),ZA(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=tR(tR({},i.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?lA.init(r(this.modules.logger),this.options):lA.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=qA);var s=new PA(this.options);this.store=new IA(this.options.resources,this.options);var a=this.services;a.logger=lA,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new VA(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(a.formatter=r(o),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new WA(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new JA(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new RA(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=iR),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=dA(),h=function(){var t=function(t,i){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(i),n(t,i)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iR,i=n,r="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var o=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(r)s(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),i(e)}))}else i(null)}},{key:"reloadResources",value:function(e,t,n){var i=dA();return e||(e=this.languages),t||(t=this.options.ns),n||(n=iR),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&OA.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=dA();this.emit("languageChanging",e);var r=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var s="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||r(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,o){o?(r(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,t,n){var i=this,r=function e(t,r){var o;if("object"!==lv(r)){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([t,r].concat(a))}else o=tR({},r);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns;var c=i.options.keySeparator||".",d=n?"".concat(n).concat(c).concat(t):t;return i.t(d,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||r&&!s(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=dA();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=dA();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iR,r=tR(tR(tR({},this.options),t),{isClone:!0}),o=new n(r),s=["store","services","language"];return s.forEach((function(t){o[t]=e[t]})),o.services=tR({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new RA(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e].concat(n))})),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}();_v(oR,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new oR(e,t)}));var sR=oR.createInstance();sR.createInstance=oR.createInstance,sR.createInstance,sR.init,sR.loadResources,sR.reloadResources,sR.use,sR.changeLanguage,sR.getFixedT,sR.t,sR.exists,sR.setDefaultNamespace,sR.hasLoadedNamespace,sR.loadNamespaces,sR.loadLanguages;var aR={"w.page":"页面",Image:"图片",Container:"容器",Section:"模块",Symbol:"符号",Text:"文字",SVG:"图形",Video:"视频",Page:"页面",WebWidget:"物料",RichText:"富文本",LayouterVert:"布局",LayouterHoriz:"布局",AutoLayouterVert:"垂直排版",AutoLayouterHoriz:"水平排版",Button:"按钮",Title:"标题",Paragraph:"段落","w.design":"设计","w.interaction":"交互","w.animation":"动画","w.animation.presets":"动画效果","w.animation.direction":"方向","w.animation.appearance":"出场","w.animation.transition":"转场","w.animation.none":"无","w.animation.custom":"自定义","w.animation.scroll.key":"关键帧","w.animation.scroll.keyStart":"起始","w.animation.scroll.keyEnd":"结束","w.animation.scroll.scrollProgress":"进度","w.animation.scroll.elementEnterProgress":"元素进入","w.animation.scroll.elementExitProgress":"元素离开","w.animation.timing.effect":"效果","w.animation.timing.effectPreset":"效果预设","w.animation.timing.delay":"延迟","w.animation.timing.duration":"持续时长","w.animation.timing.easing":"缓动","w.animation.appearance.fadeIn":"渐显","w.animation.appearance.clipFade":"显示","w.animation.appearance.clipSlide":"划入","w.animation.appearance.grow":"轻微放大","w.animation.appearance.growBig":"放大","w.animation.appearance.shrink":"轻微缩小","w.animation.appearance.shrinkBig":"缩小","w.animation.appearance.slide":"滑动","w.animation.appearance.flip":"翻转","w.animation.appearance.spin":"旋转进入","w.animation.appearance.zoom":"弹出","w.animation.appearance.drop":"掉落","w.animation.appearance.spring":"弹簧","w.animation.appearance.scroll":"滚动","w.animation.transition.fadeIn":"渐显","w.animation.transition.fadeOut":"渐隐","w.animation.transition.grow":"增大","w.animation.transition.shrink":"收缩","w.animation.transition.slide":"滑动","w.animation.transition.slideGrow":"滑动增大","w.animation.transition.skew":"歪斜","w.animation.transition.swing":"摆动","w.animation.transition.swingGrow":"摆动增大","w.animation.transition.spin":"旋转","w.animation.transform.scale":"缩放","w.animation.transform.translate":"偏移","w.animation.transform.skew":"斜切","w.animation.transform.rotate":"旋转","w.animation.easing.EaseOutQuad":"减速-缓和","w.animation.easing.EaseInQuad":"加速-缓和","w.animation.easing.EaseOutCubic":"减速","w.animation.easing.EaseInCubic":"加速","w.animation.easing.EaseInOutCubic":"加速减速","w.animation.easing.EaseOutBack":"弹出","w.animation.easing.EaseOutElastic":"震荡","w.animation.easing.EaseOutBounce":"弹跳","w.animation.easing.Linear":"线性","w.animation.control.preview":"预览","w.animation.control.finish":"完成","w.animation.control.open":"开启","w.animation.control.close":"关闭","w.animation.control.loop":"循环","w.animation.control.mirror":"镜像","w.animation.control.3d":"3D效果","w.animation.control.animationMissed":"请先添加动画效果","w.animation.control.selectTips":"请选择任意对象，自定义动画效果","w.trigger":"触发","w.trigger.intersection":"进入视图","w.trigger.click":"点击","w.trigger.hover":"悬停","w.trigger.press":"按住","w.trigger.scroll":"页面滚动","w.trigger.mouseenter":"光标移入","w.trigger.mouseleave":"光标移出","w.trigger.mousedown":"鼠标按下","w.trigger.mouseup":"鼠标抬起","w.setting":"设置","w.background.fill":"填充","w.background.gradient":"渐变","w.background.pattern":"图案","w.background.pureColor":"纯色","w.background.angle":"角度","w.background.selectImage":"选择图片","w.background.fillStyle":"填充方式","w.background.fillStyle.cover":"充满","w.background.fillStyle.contain":"适合","w.background.fillStyle.tile":"平铺","w.background.zoom":"缩放","w.padding":"边距","w.unit.auto":"自动","w.unit.fitContent":"适应内容","w.unit.px":"像素 (px)","w.unit.percentage":"百分比 (%)","w.unit.vw":"视窗宽度 (vw)","w.unit.vh":"视窗高度 (vh)","w.display":"图层","w.display.visible":"显示","w.display.hidden":"隐藏","w.layout":"排版","w.layout.position":"位置","w.layout.positionType":"位置类型","w.layout.topOffset":"顶部偏移","w.layout.width":"宽度","w.layout.height":"高度","w.layout.overflow":"溢出","w.layout.scrollDirection":"滚动方向","w.flexibleSize":"尺寸范围","w.flexibleSize.widthRange":"宽度","w.flexibleSize.heightRange":"高度","w.position.default":"默认","w.position.fixed":"固定","w.position.sticky":"粘性","w.overflow.visible":"显示","w.overflow.hidden":"隐藏","w.overflow.scroll":"滚动","w.sizeType.flexible":"弹性","w.sizeType.static":"静态","w.autoLayout":"自动布局","w.autoLayout.direction":"方向","w.autoLayout.gap":"间距","w.appearance":"样式","w.opacity":"透明度","w.border":"描边","w.border.width":"粗细","w.border.style":"类型","w.border.style.solid":"实线","w.border.style.dashed":"虚线","w.shadow":"投影","w.shadow.offset":"偏移","w.shadow.blur":"模糊","w.shadow.spread":"延展","w.shadow.color":"颜色","w.roundedCorner":"圆角","w.roundedCorner.multiple":"多种","w.filter.blur":"图层模糊","w.backdropFilter.blur":"背景模糊","w.link.type.none":"无","w.link.type.site":"网址","w.link.type.anchor":"锚点","w.link.type.phone":"电话号码","w.link.type.email":"邮箱","w.link.href":"选择页面","w.link.target":"标签页打开","w.link.title.anchor":"选择锚点","w.link.title.phone":"电话号码","w.link.title.email":"邮箱地址","w.link.target.self":"当前标签页打开","w.link.target.blank":"新标签页打开","w.link.placeholder.site":"粘贴或输入网址","w.link.placeholder.phone":"粘贴或输入电话号码","w.link.placeholder.email":"粘贴或输入邮箱地址","w.link.anchorEmpty":"暂无锚点","w.dialog.cancel":"取消","w.dialog.confirm":"确定","w.link.listEmpty":"无链接","w.link.listEmpty.desc":"从左侧列表选择要跳转的类型","w.link":"链接","w.anchor":"锚点","w.anchor.name":"锚点名称","w.text":"文本","w.text.fontFamily":"字体","w.text.fontWeight":"字重","w.text.fontSize":"字号","w.text.textAlign":"段落对齐","w.text.lineHeight":"间距","w.text.textDecoration":"装饰","w.text.more":"更多","w.text.list":"列表","w.menu.returnHome":"返回首页","w.menu.import":"文件导入","w.layer.layers":"图层","w.component.add":"添加","w.component.basic":"基础","w.component.title":"标题","w.component.paragraph":"段落","w.component.image":"图片","w.component.resource":"资源库","w.component.layout":"布局","w.component.container":"容器","w.component.titleContent":"这是一个标题","w.component.paragraphContent":"我们都是设计师，因为我们都在刻意设计我们的生活、我们的房间和我们做事的方式。----唐纳德·A·诺曼","w.contextmenu.cut":"剪切","w.contextmenu.copy":"复制","w.contextmenu.paste":"粘贴","w.contextmenu.duplicate":"创建副本","w.contextmenu.rename":"重命名","w.contextmenu.toggleVisibility":"显示/隐藏图层","w.contextmenu.delete":"删除","w.contextmenu.unwrap":"移除容器","w.contextmenu.wrap":"放置到容器中","w.contextmenu.apply":"应用到所有断点","w.contextmenu.apply.success":"已应用到所有断点","w.contextmenu.addAnchor":"设置为锚点","w.contextmenu.sectionOrder":"模块顺序","w.contextmenu.layerOrder":"图层顺序","w.contextmenu.layerUp":"上移","w.contextmenu.layerToTop":"移动到最上方","w.contextmenu.layerDown":"下移","w.contextmenu.layerToBottom":"移动到最下方","w.contextmenu.clipboardInvalid":"请使用快捷键操作：Ctrl + V","w.nav.preview":"预览","w.nav.edit":"返回编辑","w.nav.publish":"发布","w.zoom.zoomIn":"放大","w.zoom.zoomOut":"缩小","w.zoom.100%":"缩放到100%","w.device.adjustTips":"断点必须介于320px与10000px之间","w.device.desktop":"桌面端","w.device.desktop.breakpoint":"编辑效果适合1001px及以上设备显示","w.device.desktop.desc":"从该断点开始编辑。在该断点的编辑会应用在所有断点，除非在更小断点编辑过。","w.device.phone":"移动端","w.device.phone.breakpoint":"编辑效果适合320-750px设备显示","w.device.phone.desc":"在该断点编辑会应用在478px及以下尺寸。","w.device.tablet":"Pad","w.device.tablet.breakpoint":"编辑效果适合751-1000px设备显示","w.device.tablet.desc":"在该断点编辑会应用在1000px及以下尺寸，除非在更小断点编辑过。","ext.market.publish":"发布","ext.market.re-publish":"重新发布","ext.market.enterTitle":"请输入页面标题","ext.market.publishing":"发布中...","ext.market.published":"发布","w.attribute":"自定义<{{name}}>属性","w.attribute.rule":"名称以 data- 开头只能包含字母、数字、破折号(-)、句号(.)、冒号(:)和下划线(_)任何大写字母都会被转换为小写","w.attribute.duplicate":"该名称已被占用","w.attribute.empty":"名称不能为空","w.attribute.add":"添加属性","w.attribute.key":"名称","w.attribute.value":"值","w.attribute.value.placeholder":"自定义","w.unit.fillContainer":"充满容器","ext.market.import.unsupported":"不支持的文件类型","ext.market.import.dropFile":"将 JSON/PSD/Sketch 文件拖拽到此处，或者","ext.market.import.selectFile":"选择文件...","ext.market.import.parsing":"文件解析中...","ext.market.import.import":"文件导入","ext.market.record.networkError":"网络存在异常。","ext.market.record.networkErrorDes":"网络存在异常，请确保网络恢复后再进行操作。","ext.market.record.networkErrorConfirm":"刷新","ext.market.record.networkErrorSaveTip":"网络异常，请等待网络恢复后重新尝试。","ext.market.record.autoSaveError":"自动保存发生异常，请尝试手动 ctrl/cmd + s 保存。","ext.market.record.manualSaveError":"保存失败，请稍后重试。","ext.market.record.backupTips":"该浏览器存在未保存的变更，是否恢复？","ext.market.parser.parseError":"文件解析失败，请检查设计文件是否符合规范。","w.anchor.message.exists":"锚点名称已存在","w.interaction.add":"添加事件","w.interaction.event":"全局自定义事件","w.interaction.trigger":"触发","w.interaction.eventType":"事件名称","w.interaction.value":"值","w.interaction.click":"点击","w.interaction.mouseover":"悬停","w.interaction.mouseenter":"鼠标移入","w.interaction.mouseleave":"鼠标移出","w.interaction.mouseup":"鼠标按下","w.interaction.mousedown":"鼠标抬起","w.text.currentWork":"当前作品","w.text.zh":"中文","w.text.en":"英文","w.component.autoLayout.row":"栏","w.component.autoLayout.col":"列","w.component.autoLayout.scroll":"滑块","w.component.autoLayout.page":"翻页","w.component.autoLayout.wrap":"自动换行","w.autoLayout.wrap":"换行","w.autoLayout.wrap.wrap":"是","w.autoLayout.wrap.nowrap":"否","w.autoLayout.addItem":"添加子项","w.layout.scrollSnap":"滚动吸附","w.layout.scrollSnap.none":"无","w.layout.scrollSnap.mandatory":"强制吸附","w.layout.scrollSnap.proximity":"靠近吸附","w.layout.scrollSnap.left":"开端","w.layout.scrollSnap.center":"居中","w.layout.scrollSnap.right":"末端","w.display.scroll":"__未翻译__","w.node.tagName":"HTML 标签","w.linkOrAnchor":"链接","w.linkOrAnchor.rel":"Rel 属性","w.image.alt":"Alt 属性","w.image":"图像","w.image.ossResize":"图像压缩","w.image.ossResize.maxWidth":"最大宽度","w.image.ossResize.quality":"图像质量"};var lR,cR={"w.page":"Page",Image:"Image",Container:"Container",Section:"Section",Symbol:"Symbol",Text:"Text",SVG:"Shape",Video:"Video",Page:"Page",WebWidget:"WebWidget",RichText:"RichText",LayouterVert:"Layouter",LayouterHoriz:"Layouter",AutoLayouterVert:"AutoLayouterVert",AutoLayouterHoriz:"AutoLayouterHoriz",Button:"Button",Title:"Title",Paragraph:"Paragraph","w.design":"Design","w.animation":"Animation","w.animation.direction":"Direction","w.animation.presets":"Animation Presets","w.animation.appearance":"__未翻译__","w.animation.transition":"__未翻译__","w.animation.none":"None","w.animation.custom":"Custom","w.animation.scroll.key":"__未翻译__","w.animation.scroll.keyStart":"__未翻译__","w.animation.scroll.keyEnd":"__未翻译__","w.animation.scroll.scrollProgress":"__未翻译__","w.animation.scroll.elementEnterProgress":"__未翻译__","w.animation.scroll.elementExitProgress":"__未翻译__","w.animation.timing.effect":"Effect","w.animation.timing.effectPreset":"Effect Preset","w.animation.timing.delay":"Delay","w.animation.timing.duration":"Duration","w.animation.timing.easing":"Easing","w.animation.appearance.fadeIn":"__未翻译__","w.animation.appearance.clipFade":"__未翻译__","w.animation.appearance.clipSlide":"__未翻译__","w.animation.appearance.grow":"__未翻译__","w.animation.appearance.growBig":"__未翻译__","w.animation.appearance.shrink":"__未翻译__","w.animation.appearance.shrinkBig":"__未翻译__","w.animation.appearance.slide":"__未翻译__","w.animation.appearance.flip":"__未翻译__","w.animation.appearance.spin":"__未翻译__","w.animation.appearance.zoom":"__未翻译__","w.animation.appearance.drop":"__未翻译__","w.animation.appearance.spring":"__未翻译__","w.animation.appearance.scroll":"__未翻译__","w.animation.transition.fadeIn":"__未翻译__","w.animation.transition.fadeOut":"__未翻译__","w.animation.transition.grow":"__未翻译__","w.animation.transition.shrink":"__未翻译__","w.animation.transition.slide":"__未翻译__","w.animation.transition.slideGrow":"__未翻译__","w.animation.transition.skew":"__未翻译__","w.animation.transition.swing":"__未翻译__","w.animation.transition.swingGrow":"__未翻译__","w.animation.transition.spin":"__未翻译__","w.animation.transform.scale":"Scale","w.animation.transform.translate":"Translate","w.animation.transform.skew":"Skew","w.animation.transform.rotate":"Rotate","w.animation.easing.EaseOutQuad":"EaseOutQuad","w.animation.easing.EaseInQuad":"EaseInQuad","w.animation.easing.EaseOutCubic":"EaseOutCubic","w.animation.easing.EaseInCubic":"EaseInCubic","w.animation.easing.EaseInOutCubic":"EaseInOutCubic","w.animation.easing.EaseOutBack":"EaseOutBack","w.animation.easing.EaseOutElastic":"EaseOutElastic","w.animation.easing.EaseOutBounce":"EaseOutBounce","w.animation.easing.Linear":"EaseLinear","w.animation.control.preview":"Preview","w.animation.control.finish":"Finish","w.animation.control.open":"Open","w.animation.control.close":"Close","w.animation.control.loop":"Loop","w.animation.control.mirror":"Mirror","w.animation.control.3d":"3D Effect","w.animation.control.animationMissed":"Add animation effect first.","w.animation.control.selectTips":"Select target to add animation effect.","w.trigger":"Trigger","w.trigger.click":"On Click","w.trigger.hover":"On Hover","w.trigger.press":"On Press","w.trigger.scroll":"On Scroll","w.trigger.mouseenter":"Mouse Enter","w.trigger.mouseleave":"Mouse Leave","w.trigger.mousedown":"Mouse Down","w.trigger.mouseup":"Mouse Up","w.setting":"Setting","w.background.gradient":"Gradient","w.background.pattern":"Pattern","w.background.pureColor":"Pure Color","w.background.angle":"Angle","w.background.selectImage":"Select An Image","w.background.fillStyle":"Fill Style","w.background.fillStyle.cover":"Cover","w.background.fillStyle.contain":"Contain","w.background.fillStyle.tile":"Tile","w.background.zoom":"Zoom","w.background.fill":"Fill","w.padding":"Padding","w.unit.auto":"Auto","w.unit.fitContent":"FitContent","w.unit.px":"px","w.unit.percentage":"%","w.unit.vw":"vw","w.unit.vh":"vh","w.display":"Display","w.display.visible":"Visible","w.display.hidden":"Hidden","w.layout":"Layout","w.layout.position":"Position","w.layout.positionType":"Position Type","w.layout.topOffset":"TopOffset","w.layout.width":"Width","w.layout.height":"Height","w.layout.overflow":"Overflow","w.layout.scrollDirection":"Scroll Direction","w.flexibleSize":"Flexible Size","w.flexibleSize.widthRange":"Width Range","w.flexibleSize.heightRange":"Height Range","w.position.default":"Default","w.position.fixed":"Fixed","w.position.sticky":"Sticky","w.overflow.visible":"Visible","w.overflow.hidden":"Hidden","w.overflow.scroll":"Scroll","w.sizeType.flexible":"Flexible","w.sizeType.static":"Static","w.autoLayout":"Auto Layout","w.autoLayout.direction":"Direction","w.autoLayout.gap":"Gap","w.appearance":"Appearance","w.opacity":"Opacity","w.border":"Border","w.border.width":"Width","w.border.style":"Style","w.border.style.solid":"Solid","w.border.style.dashed":"Dashed","w.shadow":"Shadow","w.shadow.offset":"Offset","w.shadow.blur":"Blur","w.shadow.spread":"Spread","w.shadow.color":"Color","w.roundedCorner":"Rounded Corner","w.roundedCorner.multiple":"Multiple","w.filter.blur":"Blur","w.backdropFilter.blur":"Backdrop Blur","w.link.type.none":"None","w.link.type.site":"Site","w.link.type.anchor":"Anchor","w.link.type.phone":"Phone","w.link.type.email":"Email","w.link.href":"__未翻译__","w.link.target":"__未翻译__","w.link.title.anchor":"__未翻译__","w.link.title.phone":"Phone Number","w.link.title.email":"Email Address","w.link.target.self":"__未翻译__","w.link.target.blank":"__未翻译__","w.link.placeholder.site":"__未翻译__","w.link.placeholder.phone":"__未翻译__","w.link.placeholder.email":"__未翻译__","w.link.anchorEmpty":"__未翻译__","w.dialog.cancel":"Cancel","w.dialog.confirm":"Confirm","w.link.listEmpty":"__未翻译__","w.link.listEmpty.desc":"__未翻译__","w.link":"Link","w.anchor":"Anchor","w.anchor.name":"Anchor Name","w.text":"Text","w.text.fontFamily":"Font Family","w.text.fontWeight":"Font Weight","w.text.fontSize":"Font Size","w.text.textAlign":"Text Align","w.text.lineHeight":"Line Height","w.text.textDecoration":"Text Decoration","w.text.more":"More","w.text.list":"List","w.menu.returnHome":"Return Home","w.menu.import":"Import File","w.layer.layers":"Layers","w.component.add":"Add","w.component.basic":"Basic","w.component.title":"Title","w.component.paragraph":"Paragraph","w.component.image":"Image","w.component.resource":"Resource","w.component.layout":"Layout","w.component.container":"Container","w.component.titleContent":"__未翻译__","w.component.paragraphContent":"__未翻译__","w.contextmenu.cut":"Cut","w.contextmenu.copy":"Copy","w.contextmenu.paste":"Paste","w.contextmenu.duplicate":"Duplicate","w.contextmenu.rename":"Rename","w.contextmenu.toggleVisibility":"Toggle Visibility","w.contextmenu.delete":"Delete","w.contextmenu.unwrap":"Remove Container","w.contextmenu.wrap":"Place in Container","w.contextmenu.apply":"Apply to All Breakpoints","w.contextmenu.apply.success":"__未翻译__","w.contextmenu.addAnchor":"Add Anchor","w.contextmenu.sectionOrder":"Section Order","w.contextmenu.layerOrder":"Layer Order","w.contextmenu.layerUp":"Layer Up","w.contextmenu.layerToTop":"Layer To Top","w.contextmenu.layerDown":"Layer Down","w.contextmenu.layerToBottom":"Layer To Bottom","w.contextmenu.clipboardInvalid":"Try Command Ctrl + V Please.","w.nav.preview":"Preview","w.nav.edit":"Edit","w.nav.publish":"Publish","w.zoom.zoomIn":"Zoom In","w.zoom.zoomOut":"Zoom Out","w.zoom.100%":"100%","w.device.adjustTips":"__未翻译__","w.device.desktop":"__未翻译__","w.device.desktop.breakpoint":"__未翻译__","w.device.desktop.desc":"__未翻译__","w.device.phone":"__未翻译__","w.device.phone.breakpoint":"__未翻译__","w.device.phone.desc":"__未翻译__","w.device.tablet":"__未翻译__","w.device.tablet.breakpoint":"__未翻译__","w.device.tablet.desc":"__未翻译__","ext.market.publish":"Publish","ext.market.re-publish":"Republish","ext.market.enterTitle":"Enter Page Title","ext.market.publishing":"Publishing...","ext.market.published":"Publish","w.attribute":"Define <{{name}}> Attribute","w.attribute.rule":"__未翻译__","w.attribute.duplicate":"__未翻译__","w.attribute.empty":"__未翻译__","w.attribute.add":"Add Attribute","w.attribute.key":"Key","w.attribute.value":"Value","w.attribute.value.placeholder":"Custom","w.unit.fillContainer":"__未翻译__","ext.market.import.unsupported":"__未翻译__","ext.market.import.dropFile":"__未翻译__","ext.market.import.selectFile":"__未翻译__","ext.market.import.parsing":"__未翻译__","ext.market.import.import":"__未翻译__","ext.market.record.networkError":"There is a network exception.","ext.market.record.networkErrorDes":"Unprocessed changes are saved in your browser. When the network is restored, these changes are automatically saved to a cloud file.","ext.market.record.networkErrorConfirm":"Refresh","ext.market.record.networkErrorSaveTip":"When the network is restored, unsaved changes are automatically saved to the cloud file.","ext.market.record.autoSaveError":"An exception occurred with auto-save, please try to save manually ctrl/cmd + s.","ext.market.record.manualSaveError":"Save failed, please try again later.","ext.market.record.backupTips":"There are unsaved changes in this browser, do you want to restore them?","ext.market.parser.parseError":"File parsing failed, please check if the design file conforms to the specification.","w.anchor.message.exists":"__未翻译__","w.interaction":"__未翻译__","w.interaction.add":"__未翻译__","w.interaction.event":"__未翻译__","w.interaction.trigger":"__未翻译__","w.interaction.eventType":"__未翻译__","w.interaction.value":"__未翻译__","w.interaction.click":"__未翻译__","w.interaction.mouseover":"__未翻译__","w.interaction.mouseenter":"__未翻译__","w.interaction.mouseleave":"__未翻译__","w.interaction.mouseup":"__未翻译__","w.interaction.mousedown":"__未翻译__","w.text.currentWork":"__未翻译__","w.text.zh":"__未翻译__","w.text.en":"__未翻译__","w.component.autoLayout.row":"__未翻译__","w.component.autoLayout.col":"__未翻译__","w.component.autoLayout.scroll":"__未翻译__","w.component.autoLayout.page":"__未翻译__","w.component.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap.wrap":"__未翻译__","w.autoLayout.wrap.nowrap":"__未翻译__","w.autoLayout.addItem":"__未翻译__","w.layout.scrollSnap":"__未翻译__","w.layout.scrollSnap.none":"__未翻译__","w.layout.scrollSnap.left":"__未翻译__","w.layout.scrollSnap.center":"__未翻译__","w.layout.scrollSnap.right":"__未翻译__","w.layout.scrollSnap.proximity":"__未翻译__","w.layout.scrollSnap.mandatory":"__未翻译__","w.trigger.intersection":"__未翻译__","w.display.scroll":"__未翻译__","w.node.tagName":"__未翻译__","w.linkOrAnchor":"__未翻译__","w.linkOrAnchor.rel":"__未翻译__","w.image.alt":"__未翻译__","w.image":"__未翻译__","w.image.ossResize":"__未翻译__","w.image.ossResize.maxWidth":"__未翻译__","w.image.ossResize.quality":"__未翻译__"};class dR{constructor(){C(this,"_serviceBrand"),sR.init({lng:"zh",fallbackLng:"en",resources:{en:{translation:cR},zh:{translation:aR}}})}get instance(){return sR}t(e,t,n){return n?this.instance.t(e,t,n):this.instance.t(e,t)}}class uR{constructor(e){C(this,"data"),C(this,"incoming",new Map),C(this,"outgoing",new Map),this.data=e}}class hR{constructor(e){C(this,"_nodes",new Map),this._hashFn=e}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new uR(e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const e=this._findCycle(i,t);if(e)return e;t.delete(n)}}insertVertex(e){this.lookupOrInsertNode(e)}topologicalSort(){const e=[],t=new Set,{_hashFn:n}=this;function i(r,o=null){if(t.has(r))return;const s=n(r.data),a=Array.isArray(o)?o:[];a.push(r),t.add(r),r.outgoing.forEach((e=>{if(-1!==a.indexOf(e)){const t=n(e.data);throw new Error("Circular chain found: "+s+" must be before "+t+" due to a direct order specification, but "+t+" must be before "+s+" based on other specifications.")}i(e,a.slice())})),e.unshift(r.data)}return this._nodes.forEach((e=>i(e))),e}}class pR extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!=(t=e.findCycleSlow())?t:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}function fR(e){return!!e&&Reflect.has(Object.getPrototypeOf(e).constructor,"__SyncDescriptorBrand")}class gR{constructor(e=new MM,t=!1,n){C(this,"_services"),C(this,"_strict"),C(this,"_parent"),C(this,"_activeInstantiations",new Set),this._services=e,this._strict=t,this._parent=n,this._services.set(Vr,this)}createChild(e){return new gR(e,this._strict,this)}invokeFunction(e,...t){const n=_R.traceInvocation(e);let i=!1;try{return e({get:e=>{if(i)throw(t="service accessor is only valid during the invocation of its target method")?new Error(`Illegal state: ${t}`):new Error("Illegal state");var t;const r=this._getOrCreateServiceInstance(e,n);if(!r)throw new Error(`[invokeFunction] unknown service '${e}'`);return r}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return fR(e)?(n=_R.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=_R.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=jr(e).sort(((e,t)=>e.index-t.index)),r=[];for(const s of i){const t=this._getOrCreateServiceInstance(s.id,n);t||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${s.id}.`,!1),r.push(t)}const o=i.length>0?i[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const n=o-t.length;t=n>0?t.concat(new Array(n)):t.slice(0,o)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(fR(this._services.get(e)))this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const n=this._getServiceInstanceOrDescriptor(e);return fR(n)?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new hR((e=>e.id.toString()));let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const t=o.pop();if(i.lookupOrInsertNode(t),r++>1e3)throw new pR(i);for(const n of jr(t.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(n.id);if(r||this._throwIfStrict(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`,!0),fR(r)){const e={id:n.id,desc:r,_trace:t._trace.branch(n.id,!0)};i.insertEdge(t,e),o.push(e)}}}for(;;){const e=i.roots();if(0===e.length){if(!i.isEmpty())throw new pR(i);break}for(const{data:t}of e){if(fR(this._getServiceInstanceOrDescriptor(t.id))){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}i.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,r){if(fR(this._services.get(e)))return this._createServiceInstance(t,n,i,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const n=new Fp((()=>this._createInstance(e,t,i)));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];const i=n.value;let r=i[t];return"function"!=typeof r||(r=r.bind(i),e[t]=r),r},set:(e,t,i)=>(n.value[t]=i,!0)})}return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(t),this._strict)throw new Error(e)}get services(){const e=this;return{get:t=>e.invokeFunction((e=>e.get(t)))}}dispose(){}store(e,t){this._services.set(e,t)}}!function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(lR||(lR={}));const mR=class{constructor(e,t){C(this,"_start",Date.now()),C(this,"_dep",[]),this.type=e,this.name=t}static traceInvocation(e){return mR._None}static traceCreation(e){return mR._None}branch(e,t){const n=new mR(2,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;mR._totals+=e;let t=!1;const n=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(n,i){const r=[],o=new Array(n+1).join("\t");for(const[s,a,l]of i._dep)if(a&&l){t=!0,r.push(`${o}CREATES -> ${s}`);const i=e(n+1,l);i&&r.push(i)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${mR._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(n.join("\n"))}};let _R=mR;var vR,yR;C(_R,"_None",new class extends mR{constructor(){super(-1,null)}stop(){}branch(){return this}}),C(_R,"_totals",0),(yR=yR||{}).stringify=(vR={"visit_linear-gradient":function(e){return vR.visit_gradient(e)},"visit_repeating-linear-gradient":function(e){return vR.visit_gradient(e)},"visit_radial-gradient":function(e){return vR.visit_gradient(e)},"visit_repeating-radial-gradient":function(e){return vR.visit_gradient(e)},visit_gradient:function(e){var t=vR.visit(e.orientation);return t&&(t+=", "),e.type+"("+t+vR.visit(e.colorStops)+")"},visit_shape:function(e){var t=e.value,n=vR.visit(e.at),i=vR.visit(e.style);return i&&(t+=" "+i),n&&(t+=" at "+n),t},"visit_default-radial":function(e){var t="",n=vR.visit(e.at);return n&&(t+=n),t},"visit_extent-keyword":function(e){var t=e.value,n=vR.visit(e.at);return n&&(t+=" at "+n),t},"visit_position-keyword":function(e){return e.value},visit_position:function(e){return vR.visit(e.value.x)+" "+vR.visit(e.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(e){return vR.visit_color(e.value,e)},visit_hex:function(e){return vR.visit_color("#"+e.value,e)},visit_rgb:function(e){return vR.visit_color("rgb("+e.value.join(", ")+")",e)},visit_rgba:function(e){return vR.visit_color("rgba("+e.value.join(", ")+")",e)},visit_color:function(e,t){var n=e,i=vR.visit(t.length);return i&&(n+=" "+i),n},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(e){var t="",n=e.length;return e.forEach((function(e,i){t+=vR.visit(e),i<n-1&&(t+=", ")})),t},visit:function(e){if(!e)return"";if(e instanceof Array)return vR.visit_array(e,"");if(e.type){var t=vR["visit_"+e.type];if(t)return t(e);throw Error("Missing visitor visit_"+e.type)}throw Error("Invalid node.")}},function(e){return vR.visit(e)}),(yR=yR||{}).parse=function(){var e=/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,t=/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,n=/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,i=/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,r=/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,a=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,d=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,u=/^\(/,h=/^\)/,p=/^,/,f=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,m=/^rgb/i,_=/^rgba/i,v=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,y="";function w(e){var t=new Error(y+": "+e);throw t.source=y,t}function b(){var e=N(x);return y.length>0&&w("Invalid input not EOF"),e}function x(){return C("linear-gradient",e,E)||C("repeating-linear-gradient",t,E)||C("radial-gradient",n,S)||C("repeating-radial-gradient",i,S)}function C(e,t,n){return k(t,(function(t){var i=n();return i&&(U(p)||w("Missing comma before color stops")),{type:e,orientation:i,colorStops:N(A)}}))}function k(e,t){var n=U(e);if(n){U(u)||w("Missing (");var i=t(n);return U(h)||w("Missing )"),i}}function E(){return L("directional",r,1)||L("angular",d,1)}function S(){var e,t,n=I();return n&&((e=[]).push(n),t=y,U(p)&&((n=I())?e.push(n):y=t)),e}function I(){var e=function(){var e=L("shape",/^(circle)/i,0);e&&(e.style=P()||O());return e}()||function(){var e=L("shape",/^(ellipse)/i,0);e&&(e.style=D()||O());return e}();if(e)e.at=T();else{var t=O();if(t){e=t;var n=T();n&&(e.at=n)}else{var i=M();i&&(e={type:"default-radial",at:i})}}return e}function O(){return L("extent-keyword",o,1)}function T(){if(L("position",/^at/,0)){var e=M();return e||w("Missing positioning value"),e}}function M(){var e={x:D(),y:D()};if(e.x||e.y)return{type:"position",value:e}}function N(e){var t=e(),n=[];if(t)for(n.push(t);U(p);)(t=e())?n.push(t):w("One extra comma");return n}function A(){var e=L("hex",f,1)||k(_,(function(){return{type:"rgba",value:N(R)}}))||k(m,(function(){return{type:"rgb",value:N(R)}}))||L("literal",g,0);return e||w("Expected color definition"),e.length=D(),e}function R(){return U(v)[1]}function D(){return L("%",l,1)||L("position-keyword",s,1)||P()}function P(){return L("px",a,1)||L("em",c,1)}function L(e,t,n){var i=U(t);if(i)return{type:e,value:i[n]}}function U(e){var t,n;return(n=/^[\n\r\t\s]+/.exec(y))&&F(n[0].length),(t=e.exec(y))&&F(t[0].length),t}function F(e){y=y.substr(e)}return function(e){return y=e.toString(),b()}}();var wR=yR.parse;var bR,xR;function CR(e,t=e){return[{color:e,length:"0%"},{color:t,length:"100%"}]}(xR=bR||(bR={})).color="color",xR.linear="linear",xR.image="image";const kR={type:bR.color,color:"rgba(224, 224, 224, 1)",colorStops:[],orientation:0,imageUrl:""},ER=b(w({},kR),{size:"cover",repeat:"repeat",position:"0% 0%"});function SR(e){const{"background-image":t="","background-size":n="","background-repeat":i="","background-position":r=""}=e,o=function(e){const t=/((?:[^"']|".*?"|'.*?')*?)([(,)]|$)/g;return function n(){for(let i=[];;){let r=t.exec(e);if("("===r[2]?(i.push(r[1].trim()+"("+n().join(",")+")"),r=t.exec(e)):i.push(r[1].trim()),[",",")"].includes(r[2])&&r[1].endsWith("%")&&(i[i.length-1]+=r[1]),","!==r[2])return i.filter(Boolean)}}()}(t),s=n.split(","),a=r.split(","),l=i.split(",");return o.map(((e,t)=>{const n=w(w({},di(ER)),function(e){const t=di(kR);if(function(e){return e.trim().startsWith("linear-gradient")}(e)){const[n]=wR(e);n.orientation&&(fi("linear-gradient"===n.type,mi.badRequest),fi("angular"===n.orientation.type,mi.badRequest),t.orientation=xi(n.orientation.value));const i=n.colorStops.map((e=>{fi("rgba"===e.type,mi.badRequest);const[t,n,i,r=1]=e.value,o={length:"",color:`rgba(${t},${n},${i},${r})`};if(e.length){const{type:t,value:n}=e.length;fi("%"===t,mi.badRequest),o.length=`${n}${t}`}return o}));1===[...new Set(i.map((e=>e.color)))].length?(t.type=bR.color,t.color=i[0].color):(t.type=bR.linear,t.colorStops=i)}else{t.type=bR.image;const i=(null==(n=/(?:\(['"]?)(.*?)(?:['"]?\))/.exec(e))?void 0:n[1])||"";t.imageUrl=i}var n;return t}(e));return n.size=s[t]||ER.size,n.repeat=l[t]||ER.repeat,n.position=a[t]||ER.position,n}))}function IR(e){return`linear-gradient(${e}, ${e})`}function OR(e,t){return`linear-gradient(${t}deg, ${e.map((e=>`${e.color} ${e.length}`)).join(",")})`}function TR(e){return{color:e}}var MR="_pageName_1diaw_1",NR="_editorArea_1diaw_9",AR="_canvasContainer_1diaw_14",RR="_bg_1diaw_24";function DR(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=DR(e[n]):t[n]=e[n]})),t}function PR(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!PR(e[n],t[n]))return!1}else{const r=[];for(i in e)r.push(i);r.sort();const o=[];for(i in t)o.push(i);if(o.sort(),!PR(r,o))return!1;for(n=0;n<r.length;n++)if(!PR(e[r[n]],t[r[n]]))return!1}return!0}function LR(e){return Object.keys(e)}const UR=Object.prototype.hasOwnProperty;function FR(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const n in e)if(UR.call(e,n)){const i=e[n];"object"!=typeof i||Object.isFrozen(i)||t.push(i)}}return e}const BR=navigator.userAgent;var jR;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(jR||(jR={}));const VR=BR.indexOf("Windows")>=0,zR=BR.indexOf("Macintosh")>=0,KR=BR.indexOf("Linux")>=0,WR=BR.indexOf("Firefox")>=0,HR=BR.indexOf("AppleWebKit")>=0,$R=!(BR.indexOf("Chrome")>=0)&&BR.indexOf("Safari")>=0;var qR;BR.indexOf("iPad")>=0||$R&&navigator.maxTouchPoints,BR.indexOf("Edge/")>=0&&BR.indexOf("WebView/"),BR.indexOf("Electron/"),BR.indexOf("Android"),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(qR||(qR={}));const YR=zR?2:VR?1:3;var GR;function XR(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const i=e.charCodeAt(n),o=t.charCodeAt(r);if(i<o)return-1;if(i>o)return 1}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}function JR(e){return e>=GR.a&&e<=GR.z}function QR(e){return e>=GR.A&&e<=GR.Z}function ZR(e){return e.split("").map(((e,t)=>e.toUpperCase()===e?`${0!==t?"-":""}${e.toLowerCase()}`:e)).join("")}!function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM"}(GR||(GR={}));class eD{constructor(){C(this,"segment"),C(this,"value"),C(this,"key"),C(this,"left"),C(this,"mid"),C(this,"right")}isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class tD{constructor(e){C(this,"_iter"),C(this,"_root"),this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;for(this._root||(this._root=new eD,this._root.segment=n.value()),i=this._root;;){const e=n.cmp(i.segment);if(e>0)i.left||(i.left=new eD,i.left.segment=n.value()),i=i.left;else if(e<0)i.right||(i.right=new eD,i.right.segment=n.value()),i=i.right;else{if(!n.hasNext())break;n.next(),i.mid||(i.mid=new eD,i.mid.segment=n.value()),i=i.mid}}const r=i.value;return i.value=t,i.key=e,r}get(e){var t;return null==(t=this._getNode(e))?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),i=[];let r=this._root;for(;r;){const e=n.cmp(r.segment);if(e>0)i.push([1,r]),r=r.left;else if(e<0)i.push([-1,r]),r=r.right;else{if(!n.hasNext()){for(t?(r.left=void 0,r.mid=void 0,r.right=void 0):r.value=void 0;i.length>0&&r.isEmpty();){const[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}r=t}break}n.next(),i.push([0,r]),r=r.mid}}}findSubstr(e){const t=this._iter.reset(e);let n,i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())return n.mid?this._entries(n.mid):void 0;t.next(),n=n.mid}}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}const nD=BR||"",iD=new Map;var rD;iD.set("false",!1),iD.set("true",!0),iD.set("isMac",zR),iD.set("isLinux",KR),iD.set("isWindows",VR),iD.set("isEdge",nD.indexOf("Edg/")>=0),iD.set("isFirefox",nD.indexOf("Firefox")>=0),iD.set("isChrome",nD.indexOf("Chrome")>=0),iD.set("isSafari",nD.indexOf("Safari")>=0),iD.set("isIPad",nD.indexOf("iPad")>=0),function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"}(rD||(rD={}));const oD=class{constructor(){C(this,"type",0)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return lD.INSTANCE}};let sD=oD;C(sD,"INSTANCE",new oD);const aD=class{constructor(){C(this,"type",1)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return sD.INSTANCE}};let lD=aD;C(lD,"INSTANCE",new aD);const cD=on("contextKeyService");class dD{constructor(e=!0){C(this,"_value"),C(this,"_from"),C(this,"_to"),this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(this._value.charCodeAt(this._to)===GR.Period){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?XR(e,this._value,0,e.length,this._from,this._to):function(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const s=e.charCodeAt(n),a=t.charCodeAt(r);if(s===a)continue;const l=s-a;if(!(32===l&&QR(a)||-32===l&&QR(s)))return JR(s)&&JR(a)?l:XR(e.toLowerCase(),t.toLowerCase(),n,i,r,o)}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}const uD=class{constructor(e){C(this,"element"),C(this,"next"),C(this,"prev"),this.element=e,this.next=uD.Undefined,this.prev=uD.Undefined}};let hD=uD;C(hD,"Undefined",new uD(void 0));class pD{constructor(){C(this,"_first",hD.Undefined),C(this,"_last",hD.Undefined),C(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===hD.Undefined}clear(){this._first=hD.Undefined,this._last=hD.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new hD(e);if(this._first===hD.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==hD.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==hD.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==hD.Undefined&&e.next!==hD.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===hD.Undefined&&e.next===hD.Undefined?(this._first=hD.Undefined,this._last=hD.Undefined):e.next===hD.Undefined?(this._last=this._last.prev,this._last.next=hD.Undefined):e.prev===hD.Undefined&&(this._first=this._first.next,this._first.prev=hD.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==hD.Undefined;)yield e.element,e=e.next}}function fD(){}function gD(e){const t=this;let n,i=!1;return function(){return i||(i=!0,n=e.apply(t,arguments)),n}}class mD extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function _D(e){if((t=e)&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]){const t=[];for(const n of e)if(n)try{n.dispose()}catch(_8){t.push(_8)}if(1===t.length)throw t[0];if(t.length>1)throw new mD(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e;var t}function vD(e){const t={dispose:gD((()=>{e()}))};return t}class yD{constructor(){C(this,"_toDispose",new Set),C(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{_D(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}C(yD,"DISABLE_DISPOSED_WARNING",!1);class wD{constructor(){C(this,"_store",new yD),this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}C(wD,"None",Object.freeze({dispose(){}}));class bD{constructor(){C(this,"dispose",(()=>{})),C(this,"unset",(()=>{})),C(this,"isset",(()=>!1))}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>void 0!==t,this.dispose=()=>{t&&(t(),t=void 0)},this}}const xD=on("commandService");class CD{constructor(){C(this,"_commands",new Map)}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return!!e&&e.charCodeAt(0)===GR.Caret&&(e=e.substr(1)),this.registerCommand({id:e,handler:t})}let{id:n}=e;!!n&&n.charCodeAt(0)===GR.Caret&&(n=n.substr(1));let i=this._commands.get(n);i||(i=new pD,this._commands.set(n,i));const r=i.unshift(e);return vD((()=>{r();const e=this._commands.get(n);(null==e?void 0:e.isEmpty())&&this._commands.delete(n)}))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return t[Symbol.iterator]().next().value}getCommands(){const e=new Map;for(const t of this._commands.keys()){const n=this.getCommand(t);n&&e.set(t,n)}return e}clear(){for(const[e,t]of this._commands.entries())t.clear();this._commands.clear()}}const kD="CommandsRegistry";let ED=Reflect.get(globalThis,kD);ED||(ED=new CD,Reflect.set(globalThis,kD,ED));const SD=ED;let ID;const OD=class{static get defaultCanvasWidth(){return window.innerWidth-this.canvasResizerWidth-this.configPanelWidth}static registerInstance(e){ID||(ID=e,window.__editor=e,window.dispatchEvent(OD.onEditorCreated))}static dispose(){ID.dispose(),ID=null}static get editor(){return ID}static get logicWidth(){return ID.view.getViewport().logicWidth}static get model(){return null==ID?void 0:ID.model}static get view(){return null==ID?void 0:ID.view}static get viewModel(){return null==ID?void 0:ID.viewModel}static transform(e){return null==ID?void 0:ID.transform(e)}static recordSelectionChanges(e){return null==ID?void 0:ID.recordSelectionChanges(e)}static fork(){return null==ID?void 0:ID.fork()}static add(e){return null==ID?void 0:ID.add(e)}static commitAndMerge(){return null==ID?void 0:ID.commitAndMerge()}static checkout(){return null==ID?void 0:ID.checkout()}static undo(){return ID.undo()}static redo(){return ID.redo()}static get isInBaseBreakpoint(){if(!ID)return!1;const{breakpoints:e}=this.model.getValue(),t=[...e].sort(((e,t)=>t.maxWidth-e.maxWidth))[0];return this.logicWidth>t.maxWidth}static getComputedStyleOfId(e){return null==ID?void 0:ID.view.getComputedStyleOfId(e)}static getDeclaredStyle(e){return null==ID?void 0:ID.model.getMatchedStyle(e,this.viewportWidth).attrs}static get viewportWidth(){if(!ID)return;const{logicWidth:e}=this.view.getViewport();return this.isInBaseBreakpoint?void 0:e}static getSelectorStyleInCurrentVP(e,t,n){const i=this.viewportWidth;return null==ID?void 0:ID.model.getStyleBySelector(e,t,n,i).attrs}static updateCurrentStyle(e,t){return null==ID?void 0:ID.model.updateStyle(e,t,this.viewportWidth)}static setViewportWidth(e){OD.execEditorCommand("resizeCanvasWidth",e),setTimeout((()=>{OD.execEditorCommand("fitCanvas")}),0)}static resetEditorViewport(){OD.execEditorCommand("resetViewport")}static initSelection(){OD.viewModel.initSelection()}static execEditorCommand(e,...t){null==ID||ID.invokeWithinContext((n=>{n.get(xD).executeCommand(e,...t)}))}static getContainerNodesFromViewPos(e){const{view:t}=this,n=e||t.getViewCanvasCenterPos();let i=t.getNodesFromVector(n);return i=i.filter((e=>fo(e))),i}static transformClientVectorToViewVector(e){const{canvasHostDomNode:t,scrolls:n}=this.view,{scale:i}=this.view.getViewport(),r=t.getBoundingClientRect(),{scrollX:o,scrollY:s}=n;return{x:(e.x-r.left)/i+o,y:(e.y-r.top)/i+s}}static getContextKeyValue(e,t){ID?ID.invokeWithinContext((n=>{const i=n.get(cD).getContextKeyValue(e);t(i)})):t()}static setContextKeyValue(e,t,n){ID?ID.invokeWithinContext((i=>{i.get(cD).setContext(e,t),null==n||n(t)})):null==n||n()}static onDidContextKeysChange(e,t,n){ID?ID.invokeWithinContext((i=>{const r=i.get(cD).onDidChangeContext((n=>{n.affectsSome(new Set(e))&&t(n)}));n(r)})):n()}static getEditorService(e,t){ID?ID.invokeWithinContext((n=>{const i=n.get(e);null==t||t(i)})):null==t||t(null)}static queryValidNodesByIds(e,t){if(!this.model)return[];return e.map((e=>this.model.getNodeById(e))).filter((e=>{var n;return!!e&&(null==(n=null==t?void 0:t(e))||n)}))}static updateModel(e,t){const n=OD.editor;var i;i=e,Wt(Reflect.get(i,"triggers"))&&Reflect.set(i,"triggers",[]),Wt(Reflect.get(i,"animations"))&&Reflect.set(i,"animations",[]),n.replaceModel(e);const r=e.nodes.find((e=>co(e)));if(r){n.viewModel.setSelectionById(r.id),OD.execEditorCommand("resetViewport");const e=(null==t?void 0:t.width)||0;e?OD.execEditorCommand("resizeCanvasWidth",e):OD.execEditorCommand("fitCanvas")}}static get richTextEditor(){return OD.editor.getRichTextEditor()}};let TD=OD;C(TD,"canvasResizerWidth",56),C(TD,"configPanelWidth",256),C(TD,"navBarHeight",56),C(TD,"pageNameHeight",24),C(TD,"canvasVerticalPadding",24),C(TD,"onEditorCreated",new Event("__onEditorCreated"));var MD={meta:{title:"稿定设计"},nodes:[{id:"c1dmp",props:{},meta:{tagName:"DIV",wrapper:!1,type:"Page",componentType:"Page"},from:"root",order:"0.1"},{id:"comp-k5cfsti11",props:{},meta:{tagName:"SECTION",wrapper:!1,type:"Container",componentType:"Section"},from:"c1dmp",order:"0.1"},{id:"root",props:{}}],styles:[{targetId:"c1dmp",id:"ss1",height:"auto",display:"grid","grid-template-rows":"minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"relative","background-image":"linear-gradient(rgba(255,255,255,1), rgba(255,255,255,1))"},{targetId:"comp-k5cfsti11",id:"ss3","align-self":"stretch","justify-self":"stretch","grid-row-start":"1","grid-column-start":"1","grid-row-end":"2","grid-column-end":"2",height:"500px",display:"grid","grid-template-rows":"minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",width:"100%"}],links:[],animations:[],triggers:[],interactions:[],breakpoints:[{id:"b1",maxWidth:1e3,minWidth:751},{id:"b2",maxWidth:750,minWidth:320}]};const ND=e=>`editor-${e}`,AD=E({key:ND("model"),default:MD}),RD=E({key:ND("bp"),default:[]}),DD=E({key:ND("viewport"),default:null}),PD=S({key:ND("current-bp"),get({get:e}){const{breakpoints:t}=e(AD);return function(e,t){var n;const i=null!=(n=null==t?void 0:t.logicWidth)?n:window.innerWidth;return e.find((e=>i>=e.minWidth&&i<=e.maxWidth))}(t,e(DD))}}),LD=E({key:ND("selection"),default:[]}),UD=S({key:ND("group-style"),get:({get:e})=>function(e){const t={};return e.forEach((e=>{const{targetId:n,selectorType:i,subSelector:r}=e;i&&r||(t[n]||(t[n]=[]),t[n].push(e))})),t}(e(AD).styles)}),FD=E({key:ND("root"),default:{id:"",props:{},children:[],hide:!0}}),BD=S({key:ND("selection-style"),get({get:e}){const[t]=e(LD),n=e(UD),{breakpoints:i}=e(AD);e(PD);const r=Tl(t,n[t]||[],function(e){return e.filter((e=>"__baseBreakpointId__"!==e.id))}(i),TD.viewportWidth);return new Gr(r).attrs}}),jD=S({key:ND("selected-node"),get({get:e}){const{nodes:t}=e(AD),[n]=e(LD);return t.find((e=>e.id===n))}}),VD=S({key:ND("selected-link"),get({get:e}){const{links:t}=e(AD),[n]=e(LD);return t.find((e=>e.targetId===n))}}),zD=S({key:ND("selected-trigger"),get({get:e}){const{triggers:t}=e(AD),[n]=e(LD),i=e(jD),r=Boolean(i&&co(i));return t.filter((e=>e.targetId===n||r&&!e.targetId))}});var KD,WD,HD={tree:"_tree_1nib3_1",visibleToggle:"_visibleToggle_1nib3_5",renameInput:"_renameInput_1nib3_10",visiableBtn:"_visiableBtn_1nib3_15",hide:"_hide_1nib3_19",triggerBtn:"_triggerBtn_1nib3_23",triggerBtnSelected:"_triggerBtnSelected_1nib3_28",suffixContainer:"_suffixContainer_1nib3_32",highlightTreeItem:"_highlightTreeItem_1nib3_40",stickyTreeItem:"_stickyTreeItem_1nib3_43"};function $D(e,t){if(!e)throw t instanceof Error?t:new Error(t)}function qD(e,t){const n=t instanceof Error?t:new Error(t);e||console.error(n)}function YD(e){return 100*e+"%"}function GD(e){return parseFloat(e||"0")}function XD(e){return parseInt(e||"0",10)}function JD(e,t,n){return Math.min(Math.max(t,e),n)}function QD(e){return"normal"===e?0:parseFloat(e)}function ZD(e){const t=/blur\((\d+)px\)?/;if(!t.test(e))return 0;const[,n]=t.exec(e);return parseInt(n)}function eP(e){return`blur(${e=bP(e)})`}!function(e){e.notFound="404",e.badRequest="400",e.internalError="500"}(KD||(KD={})),function(e){e.webkit="-webkit-",e.moz="-moz-",e.ms="-ms-",e.o="-o-"}(WD||(WD={}));const tP="0px";var nP,iP,rP,oP,sP;function aP(e){return e.split(" ").map((e=>parseFloat(e.trim())))}function lP(e,t,n){const i=aP(t.gridTemplateRows),r=aP(t.gridTemplateColumns),o=QD(t.columnGap),s=QD(t.rowGap),a=parseFloat(t.paddingTop),l=parseFloat(t.paddingLeft),{rowStart:c,rowEnd:d,columnStart:u,columnEnd:h}=function(e){const t=XD(e.gridRowStart),n=XD(e.gridRowEnd),i=XD(e.gridColumnStart),r=XD(e.gridColumnEnd);return qD(Xt(t)&&Xt(n)&&Xt(i)&&Xt(r)),{rowStart:t,rowEnd:n,columnStart:i,columnEnd:r}}(e),p=[];for(let w=0,b=r.length,x=n.left+l;w<=b;w++)p.push(x),x=x+r[w]+o;const f=[];for(let w=0,b=i.length,x=n.top+a;w<=b;w++)f.push(x),x=x+i[w]+s;if(c>f.length)throw new Error(KD.internalError);if(u>p.length)throw new Error(KD.internalError);const g=f[c-1],m=f[d-1]-s,_=p[u-1],v=p[h-1]-o,y=Object.create(null);return y.top=g,y.bottom=m,y.left=_,y.right=v,y.width=y.right-y.left,y.height=y.bottom-y.top,y}!function(e){e.grid="grid",e.flex="flex",e.inlineGrid="inline-grid",e.inlineFlex="inline-flex",e.none="none",e.listItem="list-item",e.block="block"}(nP||(nP={})),function(e){e.row="row",e.column="column"}(iP||(iP={})),function(e){e.wrap="wrap",e.nowrap="nowrap"}(rP||(rP={})),function(e){e.none="static",e.fixed="fixed",e.sticky="sticky"}(oP||(oP={})),function(e){e.visible="visible",e.hidden="hidden",e.scroll="scroll",e.auto="auto"}(sP||(sP={}));const cP=["rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ","perspective"],dP={rotateX:"0",rotateY:"0",rotateZ:"0",scaleX:"1",scaleY:"1",scaleZ:"1",skewX:"0",skewY:"0",translateX:"0",translateY:"0",translateZ:"0",perspective:"0"};function uP(e){const t=e,{perspective:n}=t,i=x(t,["perspective"]);let r="";return n&&(r+=`perspective(${n}) `),Object.keys(i).forEach((e=>{r+=`${e}(${i[e]}) `})),r}function hP(e){const t=`(${cP.join("|")})\\((.+?)\\)`,n=new RegExp(t,"g"),i={};return Array.from(e.matchAll(n),(e=>e)).forEach((e=>{const t=e[1],n=e[2];if(i[t]){if(i[t]!==dP[t])throw new Error("unimplemented");i[t]=n}else i[t]=n;return e})),i}var pP,fP,gP;function mP(e){return $t(e)&&"auto"===e}function _P(e){return!e||mP(e)}function vP(e){return $t(e)&&e.endsWith("px")}function yP(e){return $t(e)&&e.endsWith("fr")}function wP(e){return function(e){return $t(e)&&e.endsWith("vh")}(e)||function(e){return $t(e)&&e.endsWith("vw")}(e)}function bP(e){const t=parseFloat(`${e}`);return Number.isFinite(t)?`${e}px`:`${e}`}!function(e){e.default="default",e.pointer="pointer",e.grab="grab",e.move="move",e.text="text"}(pP||(pP={})),function(e){e.px="px",e["%"]="%",e.vw="vw",e.vh="vh",e.fr="fr"}(fP||(fP={})),function(e){e.auto="auto",e.fitContent="fit-content"}(gP||(gP={}));const xP=[fP.px,fP["%"],fP.vw,fP.vh],CP=[gP.auto,gP.fitContent],kP=Object.values(fP),EP=e=>!e,SP=e=>e===gP.fitContent,IP=e=>EP(e)||mP(e)||SP(e),OP=(e,t=kP)=>{if(!IP(e))return t.find((t=>e.endsWith(t)))},TP=e=>{const t=OP(e),n=parseFloat(e);return Number.isInteger(n)||Number.isNaN(n)?n:t===fP.px?parseFloat(n.toFixed(0)):parseFloat(n.toFixed(1))},MP=e=>e.map((e=>e.includes("minmax")?e:e.includes("fr")||e.includes("auto")?`minmax(0px, ${e})`:e)).join(" ");var NP,AP;!function(e){e.none="none",e.start="start",e.end="end",e.center="center"}(NP||(NP={})),function(e){e.none="none",e.mandatory="both mandatory",e.proximity="both proximity"}(AP||(AP={}));const RP=gD((()=>{try{const e=document.createElement("div");return document.body.appendChild(e),getComputedStyle(e)}catch{return{}}}))();class DP{constructor(){}static isVisible(e){try{return!(TD.getComputedStyleOfId(e.id).display===nP.none)}catch{return!1}}static toggleVisibility(e){const{id:t}=e,n=DP.isVisible(e);TD.transform((e=>{if(n){const e=TD.getComputedStyleOfId(t).display;TD.updateCurrentStyle(t,{"--display-cache":e,display:nP.none})}else{const e=TD.getDeclaredStyle(t)["--display-cache"];TD.updateCurrentStyle(t,{display:e})}}))}}var PP,LP;function UP(e){const{itemType:t,dragRef:n,dropRef:i,index:r,key:o,canDrag:s,onHover:a,onDrop:l,onDragEnd:c}=e,[{isDragging:d},u,h]=I({type:t,item:()=>({index:r,key:o}),collect:e=>({isDragging:e.isDragging()}),canDrag:s,end:c}),[{handlerId:p,isOver:f},g]=O({accept:t,collect(e){const t=e.isOver({shallow:!0});return{handlerId:e.getHandlerId(),isOver:t}},drop(e,t){t.didDrop()||null==l||l(e,{index:r,key:o},t)},hover(e,t){null==a||a(e,{index:r,key:o},t)}});return u(n),g(i),{handlerId:p,isOver:f,isDragging:d,previewRef:h}}function FP(e,t,n){const{top:i,left:r,height:o,bottom:s,right:a}=e,{x:l,y:c}=t;if(l<r||l>a||c<i||c>s)return PP.none;if(n){const e=o/2;return c>=i&&c<i+e?PP.top:c>=i+e&&c<=i+o?PP.bottom:PP.none}const d=o/3;return c>=i&&c<i+d?PP.top:c>=i+d&&c<i+2*d?PP.middle:c>=i+2*d&&c<=i+o?PP.bottom:PP.none}function BP(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}(LP=PP||(PP={})).top="top",LP.middle="middle",LP.bottom="bottom",LP.none="none";const jP="https://cdn.dancf.com/fe-assets/iliad/img/842c31cc6b01fd2da3508756d2604dec.png",VP="https://cdn.dancf.com/fe-assets/iliad/img/6371c8955ce4e8dd7e0c647aa147e9cd.png",zP="https://cdn.dancf.com/fe-assets/iliad/img/80ea05507651832bf21185047b5d7b96.png",KP="https://cdn.dancf.com/fe-assets/iliad/img/0f45e3be7f29fc07d0e7598ca787deef.png",WP="https://cdn.dancf.com/fe-assets/iliad/img/1c621e91641e2b6c1e6f3cd386de61ab.png",HP="https://cdn.dancf.com/fe-assets/iliad/img/1643a80b4bcc9dd544c8d420a0c640c5.png",$P="https://cdn.dancf.com/fe-assets/20220311/iliad/src/assets/e3b2ad563645116071dc8ae5a0c72162.png",qP="https://cdn.dancf.com/fe-assets/20220311/iliad/src/assets/dd8280d24b3e4ddaa44a73e85fee716f.png",YP="https://cdn.dancf.com/fe-assets/iliad/img/a839b977695ff2132eee93793363f4a5.png",GP="https://cdn.dancf.com/fe-assets/iliad/img/206babab05618d5f63497009fa14be8a.png",XP="https://cdn.dancf.com/fe-assets/20220602/iliad/img/fec4bef9209ebf65fb28e5cf4edf5726.png",JP="https://cdn.dancf.com/fe-assets/20220125/Users/sjz/Desktop/deceb4892c0e6983c1fd84685bee19b1.png";var QP="_iliadTreeItem_1fbdd_5",ZP="_pageIliadTreeItem_1fbdd_12",eL="_treeItem_1fbdd_20",tL="_treeItemSubSelected_1fbdd_23",nL="_treeItemSubStart_1fbdd_27",iL="_treeItemSubEnd_1fbdd_31",rL="_treeItemDragging_1fbdd_35";var oL,sL="_flexCenter_150li_1",aL="_hideScrollbar_150li_12",lL="_textEllipsis_150li_21",cL="_dropIndicator_150li_26",dL="_dropIndicatorTop_150li_39",uL="_dropIndicatorBottom_150li_62",hL="_logicBackground_150li_86";(oL||(oL={})).treeItem="treeItem";const pL={overId:"",setOverId:e=>{},overPart:PP.none,setOverPart:e=>{},draggingNode:null,setDraggingNode:e=>{}},fL=T.exports.createContext(pL);function gL(e){const{nodes:t,treeClass:n,onItemEnter:i,onItemLeave:r,onDragStart:o,onDragEnd:s}=e,[a,l]=T.exports.useState(""),[c,d]=T.exports.useState(PP.none),[u,h]=T.exports.useState(null),{run:p}=M((e=>{const t=e.target;if(!t||!t.className.includes("tree-item"))return;const n=t.getAttribute("data-id");n?null==i||i(e,n):null==r||r()}),{wait:20}),{run:f}=M((()=>{null==r||r()}),{wait:20});return T.exports.useEffect((()=>{u?(null==r||r(),null==o||o(u)):(l(null),d(PP.none),null==s||s())}),[u]),k(fL.Provider,{value:{overId:a,overPart:c,setOverId:l,setOverPart:d,draggingNode:u,setDraggingNode:h},children:k("div",{className:n,onMouseMove:p,onMouseLeave:f,children:t.map((t=>k(mL,{node:t,others:e},t.key)))})})}function mL(e){const{overId:t,overPart:n,setOverId:i,setOverPart:r,setDraggingNode:o}=T.exports.useContext(fL),[s,a]=T.exports.useState(!1),l=T.exports.useRef(0),{model:c}=TD,{node:d,others:u}=e,{children:h,key:p,prefix:f,suffix:g,offset:m,label:_,labelSlot:v,negative:y,canDrag:w,isDragging:b,selected:x,empty:C,ispage:E,subSelected:S,subStart:I,subEnd:O,nodeItemClass:P}=d,{onSelect:L,onToggle:U,onContextMenu:F,onDblClick:B,onDrop:j,expandNodes:V,expandKeys:z,selectedKeys:K,treeItemClass:W}=u,H=V.findIndex((e=>e===p)),$=z.includes(p),q=c.getNodeById(p),Y=T.exports.useRef(null),G=T.exports.useRef(null),X=!!q&&co(q),J=!!q&&fo(q),Q=!!q&&ho(q)&&"root"!==q.from,Z=K.length,ee=!!q&&"root"===q.from,te=Z>0&&TD.queryValidNodesByIds(K,(e=>ho(e)&&"root"!==e.from)).length===Z,ne=Z>0&&TD.queryValidNodesByIds(K,(e=>"root"===e.from)).length===Z,ie=K.includes(d.key),{run:re}=M(((e,t,n)=>{var o;const s=n.isOver({shallow:!0});let a=null,l=PP.none;const u=K.filter((e=>!c.isAncestorNodeOfId(e,d.key))).length>0&&!(ie||ne&&!ee||te&&!Q);if(s&&u){const e=null==(o=G.current)?void 0:o.getBoundingClientRect(),t=n.getClientOffset();if(e&&t){const n=32,{top:i,left:r,width:o,right:s}=e,c=FP({top:i,left:r,width:o,right:s,height:n,bottom:e.top+n},t,!J||te);l=c,a=d.key,!(!te&&Q||ee&&!ne)||c!==PP.bottom&&c!==PP.top?c===PP.bottom&&(J&&!Q&&$&&h.length>0?(l=PP.top,a=h[0]):X&&(a=null,l=PP.none)):(l=PP.none,a=null)}}a&&(i(a),r(l))}),{wait:10}),{run:oe}=M(((e,t,n)=>{var o;i(null),r(PP.none);const s=null==(o=G.current)?void 0:o.getBoundingClientRect(),a=n.getClientOffset();if(s&&a){const e=32,{top:t,left:n,width:i,right:r}=s,o=FP({top:t,left:n,width:i,right:r,height:e,bottom:s.top+e},a,!J||te);let l=d.key,c=o;o===PP.bottom&&J&&$&&h.length>0&&(l=h[0],c=PP.top),c!==PP.none&&(null==j||j(l,c))}}),{wait:10}),{handlerId:se,previewRef:ae,isDragging:le}=UP({itemType:oL.treeItem,dragRef:Y,dropRef:G,canDrag:w,index:H,key:d.key,onDrop:oe,onHover:re});T.exports.useEffect((()=>{o(le?d:null)}),[le]),T.exports.useEffect((()=>{t===p&&n===PP.middle?l.current||(l.current=setTimeout((()=>{null==U||U(null,d),l.current=0}),1e3)):(l.current&&clearTimeout(l.current),l.current=0)}),[t,n]);const ce={"--indicator-left":20*m+8+"px"},de=T.exports.useMemo((()=>{let e="";return t===d.key&&(e=n===PP.top?dL:n===PP.bottom?uL:""),a(n===PP.middle),e}),[t,n]),ue=T.exports.useMemo((()=>s&&t===p),[t,s,p]);return k("div",{ref:BP([G,Y]),"data-index":H,"data-id":p,"data-handler-id":se,className:N(["tree-item-container",eL,de,W,cL,b?rL:"",S?tL:"",I?nL:"",O?iL:"",P]),style:ce,onDoubleClick:e=>{e.stopPropagation(),null==B||B(e,d)},children:A(R,{"data-id":p,label:_,open:$,offset:m,selected:x,negative:y,over:ue,empty:C,dir:"ltr",className:N(["tree-item",QP,E?ZP:""]),"sp-tree-item-select":e=>{e.stopPropagation(),null==L||L(e,d)},"sp-tree-item-toggle":e=>{e.stopPropagation(),null==U||U(e,d)},contextmenu:e=>{e.stopPropagation(),e.preventDefault(),null==F||F(e,d)},children:[f,g,v,k(D,{connect:ae,src:YP})]},p)})}var _L,vL;let yL,wL;function bL(){const[e,t]=P(IL);function n(e,n){if(yL||(yL=document.querySelector("#contextMenuPopover")),!yL)return;const{innerWidth:i,innerHeight:r}=window,{width:o,height:s}=yL.getBoundingClientRect();let{x:a,y:l}=e,c=l+20;a+o>i&&(a=i-o),c+s>r&&(c=r-s);const d=n||_L.view;wL&&(clearTimeout(wL),wL=null),t({show:!0,from:d,x:a,y:c})}function i(){wL=setTimeout((()=>{t({show:!1,from:_L.view,x:0,y:0}),wL=null}),200)}return{status:e,showContextMenu:n,hideContextMenu:i,handleContextMenu:function(e,t,r){const{view:o,viewModel:s,model:a}=TD,l=o.getNodesFromVector(e).filter((e=>!!e&&!co(e)&&!uo(e)));if(l.length<=0)return void i();const c=l.shift(),[d]=Oy(TD.editor,c.id,r);if(!d)return void i();d&&!s.isIdSelected(d)&&(r&&!s.selection.some((e=>{const t=a.getNodeById(e);return t&&!co(t)&&!ho(t)&&a.isAncestorNodeOfId(e,d)}))||!r)&&TD.recordSelectionChanges((()=>{s.setSelectionById(d)})),n(t)}}}(vL=_L||(_L={})).layer="layer",vL.view="view";const xL=e=>`editorMenu-${e}`;var CL,kL;(kL=CL||(CL={})).layer="layer",kL.add="add";const EL=E({key:xL("toolbar"),default:null}),SL=E({key:xL("config-panel-visible"),default:!0}),IL=E({key:xL("context-menu"),default:{show:!1,from:_L.view,x:0,y:0}}),OL=E({key:xL("layer-rename-node"),default:null}),TL=E({key:xL("current-animation-trigger-id"),default:null}),ML=E({key:xL("current-animation-target-id"),default:null}),NL=E({key:xL("current-animation-effect-key"),default:"to"});var AL,RL,DL="_pointValid_1hf7m_1";function PL(e){const t=e,{name:n,onClick:i,className:r,color:o="",style:s={}}=t,a=x(t,["name","onClick","className","color","style"]),l=`editor:${n}`;return k(L,w({className:N(DL,r),name:l,click:i,style:w({color:o},s)},a),n)}(RL=AL||(AL={})).WidthFill="WidthFill",RL.WidthFixed="WidthFixed",RL.WidthHug="WidthHug",RL.HeightFill="HeightFill",RL.HeightFixed="HeightFixed",RL.HeightHug="HeightHug",RL.LayoutSliding="LayoutSliding",RL.LayoutWrap="LayoutWrap",RL.LayoutHorz="LayoutHorz",RL.LayoutVert="LayoutVert",RL.SpacingHoriz="SpacingHoriz",RL.SpacingVert="SpacingVert",RL.LayoutPageturn="LayoutPageturn";var LL="_drawer_1weoy_1",UL="_content_1weoy_21",FL="_header_1weoy_28",BL="_title_1weoy_37",jL="_divider_1weoy_46",VL="_close_1weoy_51";var zL=T.exports.forwardRef((function(e,t){const n=T.exports.useRef(null),{onClose:i,children:r,title:o,visible:s=!0,className:a=""}=e;return T.exports.useImperativeHandle(t,(()=>({containerRef:n}))),s?A("div",{className:N(LL,a),children:[A("div",{className:FL,children:[k("span",{className:BL,children:o}),k("div",{className:VL,onClick:i,children:k(PL,{name:"Close"})})]}),k(U,{className:jL}),k("div",{ref:n,className:N(UL,aL),children:r})]}):null}));const KL=F.createContext(Object.create(null));function WL(){const{i18nService:e}=T.exports.useContext(KL);return qD(e),e.instance}function HL(e,t){const n=new B(e),i=new B(t);return n.gt(i)?1:-1}var $L,qL;(qL=$L||($L={})).ToTop="layerToTop",qL.ToBottom="layerToBottom",qL.Up="layerUp",qL.Down="layerDown",qL.Current="Current";class YL{static layerStatus(e){const t={disabled:!0,upDisabled:!0,downDisabled:!0,toTopDisabled:!0,toBottomDisabled:!0},{viewModel:n,model:i}=e,{selection:r}=n;if(1!==r.length)return t;const[o]=r,s=i.getParentNodeOfId(r[0]);let a=0,l=-1;if(s){const{orders:e}=i.getChildrenGridAreaInfo(null==s?void 0:s.id);a=e.length,l=e.findIndex((e=>e.id===o)),-1!==l&&(t.toBottomDisabled=t.downDisabled=l>=a-1,t.upDisabled=t.toTopDisabled=l<=0)}return t.disabled=-1===l,t}static layerUp(e){const{disabled:t,upDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!ho(a))return;const l=i.getParentNodeOfId(s);qD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=JL(c,s,$L.Up);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerDown(e){const{disabled:t,downDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!ho(a))return;const l=i.getParentNodeOfId(s);qD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=JL(c,s,$L.Down);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerToTop(e){const{disabled:t,toTopDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!ho(a))return;const l=i.getParentNodeOfId(s);qD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=JL(c,s,$L.ToTop);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerToBottom(e){const{disabled:t,toBottomDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!ho(a))return;const l=i.getParentNodeOfId(s);qD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=JL(c,s,$L.ToBottom);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerMove(e,t,n){var i,r;const{model:o,viewModel:s}=e,{selection:a}=s;let l=TD.queryValidNodesByIds(a,(e=>ho(e)&&"root"!==e.from));if(!t||l.length<=0)return;const[c]=o.queryNodes((e=>co(e))),{orders:d}=o.getChildrenGridAreaInfo(c.id),u=d.findIndex((e=>e.id===t.id));if(-1===u)return;const h=n===$L.Current?d[u].id:null!=(r=null==(i=d[u+1])?void 0:i.id)?r:null,p=n===$L.Current?1:-1;l=l.filter((e=>e.id!==h)),l.length<=0||e.transform((e=>{l.sort(((e,t)=>d.findIndex((t=>t.id===e.id))>d.findIndex((e=>e.id===t.id))?p:-p)).forEach((t=>{e.reorderGridNode(c.id,h,t.id)}))}))}}class GL{static hasPageNode(e){const{viewModel:t}=e,{selection:n}=t;return TD.queryValidNodesByIds(n,(e=>co(e))).length>0}static layerStatus(e){const{viewModel:t,model:n}=e,{selection:i}=t,r={disabled:!0,upDisabled:!0,downDisabled:!0,toTopDisabled:!0,toBottomDisabled:!0};if(this.hasPageNode(e))return r;const o=!i.some((e=>!!n.getNextSiblingNodeOfId(e))),s=!i.some((e=>{const t=n.getPreviousSiblingNodeOfId(e);return!!t&&!co(t)}));return r.toTopDisabled=r.upDisabled=o,r.toBottomDisabled=r.downDisabled=s,r.disabled=o&&s,r}static layerUp(e){const{disabled:t,upDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{var t;const n=r.getNodeById(e),i=r.getNextSiblingNodeOfId(e);if(n&&i){const o=r.getNextSiblingNodeOfId(i.id);s.push({ref:null!=(t=null==o?void 0:o.id)?t:null,id:e,order:n.order})}})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>HL(t.order,e.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerDown(e){const{disabled:t,downDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{const t=r.getNodeById(e),n=r.getPreviousSiblingNodeOfId(e);t&&n&&s.push({ref:n.id,id:e,order:t.order})})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>HL(t.order,e.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerToTop(e){const{disabled:t,toTopDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{const t=r.getNodeById(e);t&&s.push({ref:null,id:e,order:t.order})})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>HL(e.order,t.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerToBottom(e){const{disabled:t,toBottomDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{const t=r.getNodeById(e);if(t){const n=r.getParentNodeOfId(e);qD(n);const i=r.getChildrenNodesOfId(null==n?void 0:n.id);let o=i[0];co(o)&&(o=i[1]),s.push({ref:o.id,id:e,order:t.order})}})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>HL(e.order,t.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerMove(e,t,n){const{model:i,viewModel:r,view:o}=e,{selection:s}=r,a=i.getParentNodeOfId(null==t?void 0:t.id);if(!t||!a)return;const l=s.filter((e=>!i.isAncestorNodeOfId(e,t.id)));if(l.length<=0)return;const c="root"===(null==t?void 0:t.from);let d=[];if(c){if(co(t)&&n===$L.Current)return;d=TD.queryValidNodesByIds(l,(e=>!ho(e)&&!uo(e)&&!co(e)&&"root"===e.from))}else d=TD.queryValidNodesByIds(l,(e=>!ho(e)&&!uo(e)&&!co(e)&&"root"!==e.from));if(d.length<=0)return;const u=n===$L.Current?t:i.getNextSiblingNodeOfId(t.id),h=(e,t)=>$L.Current?HL(e.order,t.order):HL(t.order,e.order);e.transform((()=>{c||d.sort(((e,t)=>HL(e.order,t.order))).forEach((e=>{if(e.from!==a.id){const t=TD.getDeclaredStyle(e.id),n=o.getElementRectById(e.id),r=o.createStyleFromHitPosition(n,a,t);i.reparentNode(e.id,a.id),TD.updateCurrentStyle(e.id,r)}})),d.sort(h).forEach((e=>{var t;i.reorderNode(e.id,null!=(t=null==u?void 0:u.id)?t:null)}))}))}}class XL{static isShow(){if(!TD.editor)return!1;const{model:e,viewModel:t}=TD,{selection:n}=t;if(n.length<=0)return!1;let i=0,r=0,o=0;return n.forEach((t=>{const n=e.getNodeById(t);!n||uo(n)?o++:ho(n)?this.isPositionFixed(n)?r++:i++:r++})),!o&&(!i||!r)}static isPositionFixed(e){return TD.getDeclaredStyle(e.id).position===oP.fixed}static isAllGridSection(){const{viewModel:e,model:t}=TD,{selection:n}=e;return n.some((e=>{const n=t.getNodeById(e);return n&&ho(n)&&!this.isPositionFixed(n)}))}static get Service(){qD(this.isShow());return this.isAllGridSection()?YL:GL}}function JL(e,t,n){var i,r,o,s;const a=e.findIndex((e=>e.id===t));let l=!1;qD(-1!==a);let c=null;return n===$L.ToTop?(l=a>0,c=e[0].id):n===$L.ToBottom?(l=a<e.length-1,c=null):n===$L.Up?(l=a>0,c=null!=(r=null==(i=e[a-1])?void 0:i.id)?r:null):n===$L.Down&&(l=a<e.length-1,c=null!=(s=null==(o=e[a+2])?void 0:o.id)?s:null),c===t&&(c=null),{able:l,ref:c}}function QL(e){return vP(e)}function ZL(e){return`url(${e})`}class eU{}C(eU,"isAuto",mP),C(eU,"isNone",EP),C(eU,"isFitContent",SP),C(eU,"getValueUnit",OP),C(eU,"getNumericValue",TP),C(eU,"fromValue",((e,t)=>`${TP(`${e}${t}`)}${t}`)),C(eU,"toPX",bP);function tU(e){const{"overflow-x":t,"overflow-y":n}=e;return t===sP.scroll||n===sP.scroll?sP.scroll:t||n||sP.visible}function nU(e){var t,n;const i=T.exports.useContext(KL),r=null==(t=i.instantiationService)?void 0:t.invokeFunction((e=>e.get(kn))),{resolved:o}=function(e){const[t,{setTrue:n,setFalse:i}]=j(!1),[r,o]=T.exports.useState(),[s,a]=T.exports.useState(),l=V();return T.exports.useEffect((()=>{e.then((e=>{l.current||(n(),o(e))})).catch((e=>{l.current||(a(e),i())}))}),[e]),{resolved:t,value:r,reason:s}}((null==r?void 0:r.when(En.EditorCreated))||Promise.reject().catch(fD));return o?null==(n=i.instantiationService)?void 0:n.invokeFunction((t=>t.get(e))):null}const iU=on("keybindingService");function rU(){const{t:e}=WL(),t=nU(iU),n=z(LD),{model:i}=TD,r=z(FD),o=z(PD),[s,a]=T.exports.useState([]),[l,c]=T.exports.useState(),[d,u]=T.exports.useState(),h=T.exports.useRef(),[p,f]=P(EL),[g,m]=P(OL),{showContextMenu:_}=bL(),[v]=TD.editor?i.queryNodes((e=>co(e))):[],y=p===CL.layer,x=z(TL),C=z(ML),E=T.exports.useRef(null),S=T.exports.useMemo((()=>Boolean(x&&C)),[x,C]);T.exports.useEffect((()=>{y&&L()}),[y]),T.exports.useEffect((()=>{g?null==t||t.setShouldDispatchKeyEventClassNames([]):null==t||t.setShouldDispatchKeyEventClassNames(["editorDispatchKeyEventClass"])}),[g,t]),T.exports.useEffect((()=>{const e=[];n.forEach((t=>{if(!i.getNodeById(t))return;const n=i.getAncestorNodesOfId(t);if(v.id!==t||s.includes(t)){const t=n.map((e=>e.id)).filter((e=>!s.includes(e)));e.push(...t)}else e.push(t)})),e.length>0&&a([...s,...e]),h.current&&!n.includes(h.current)&&(h.current=null),L()}),[n]),K((()=>{!function(e,t=!1){if(!TD.editor)return;let n;if(e){const t=TD.model.getNodeById(e);t&&!uo(t)&&([n]=Ry(TD,e,!1))}TD.view.updateOutline((e=>{const i=e.slice().filter((e=>!e.ignorable));n&&i.push(b(w({},n),{ignorable:!0,isAnimationEditing:t})),e.length=0,e.push(...i)}))}(l&&TD.viewModel.isIdSelected(l)?null:l||null,S)}),[l],{wait:30});const{triggers:I}=z(AD),{section:O,selection:M}=function(e){const{model:t}=TD,n=T.exports.useMemo((()=>{const[t]=e.slice(-1);return null!=t?t:null}),[e]);return{section:T.exports.useMemo((()=>{var e,i;if(!t)return null;const r=t.getNodeById(n);if(!r||uo(r)||co(r))return null;if(ho(r))return n;return null!=(i=null==(e=t.getAncestorNodesOfId(n).find((e=>ho(e))))?void 0:e.id)?i:null}),[n]),selection:n}}(n);!function(e,t,n){var i;const r=null==(i=e.current)?void 0:i.containerRef.current,o=(e,t)=>{if(!r)return;const n=r.querySelector(`[data-id="${e}"]`);if(!n)return;const{scrollTop:i,offsetHeight:o}=r,s=i,a=s+o,l=n.getBoundingClientRect(),c=l.top+i;if(c>s&&c<a)return;const d=c+l.height/2-o/2;if(!t)return void(r.scrollTop=d);const u=20,h=(d-i)/u;let p=0;const f=setInterval((()=>{r.scrollTop+=h,p++,p>u&&clearInterval(f)}),300/u)};W((async()=>{t&&n&&(await un(0),o(t,!0))}),[t,n])}(E,M,y);const R=T.exports.useMemo((()=>{let t=[];const o=[],a=[];return function r(c,u={parentId:null,offset:0,selected:!1,negative:!1,fixed:!1}){let{offset:h,negative:p,selected:f,fixed:_,parentId:v}=u;const{id:y,children:w,meta:b}=c,x=!DP.isVisible(c);let E=!1;if("root"===v){const e=TD.getDeclaredStyle(y);E=e.position===oP.fixed,E&&(h=0)}const T=function(e){const{meta:t}=e;let n=null==t?void 0:t.componentType;const i=null==t?void 0:t.subType;if(i)i===Jr.LayouterHoriz?n="Layout":i===Zr.Title?n="Text":i===Zr.Paragraph&&(n="Paragraph");else if(n===qr.Page)n="Pages";else if(n===qr.SVG)n="Star";else if(n===qr.Container){wr(TD.getDeclaredStyle(e.id))&&(n=function(e){var t;const n=AL.LayoutHorz,i=null==(t=TD.model)?void 0:t.getNodeById(e),r=TD.getDeclaredStyle(e);if(!i||!r)return n;const{"flex-wrap":o=rP.nowrap,"flex-direction":s=iP.row,"scroll-snap-type":a=AP.none}=r,l=tU(r);if(o===rP.wrap)return AL.LayoutWrap;if(l===sP.scroll)return a!==AP.none?AL.LayoutPageturn:AL.LayoutSliding;return s===iP.row?AL.LayoutHorz:s===iP.column?AL.LayoutVert:n}(e.id))}return k(PL,{name:n,size:"m",slot:"icon"})}(c),M=(null==b?void 0:b.label)||e(xy(c)),R=function(e,t){var n;const{id:i}=e;if(g!==i)return null;const r=(null==(n=e.meta)?void 0:n.label)||t;return k(H,{slot:"label",size:"xs",autofocus:!0,value:r,className:HD.renameInput,blur:e=>{var t,n;!function(e,t){if(m(null),!t)return;const{model:n}=TD,i=n.getNodeById(e),r=DR((null==i?void 0:i.meta)||{});r.label=t,TD.transform((()=>{n.updateNodeMetaById(e,r)}))}(i,null!=(n=null==(t=null==e?void 0:e.target)?void 0:t.value)?n:"")},onKeyUp:e=>{"Enter"===e.code&&e.target.blur()}})}(c,M),D=co(c),P=uo(c);let L="";ho(c)&&(L=O===y?N(HD.highlightTreeItem,HD.stickyTreeItem):HD.highlightTreeItem);const U=p||x,F=I.some((e=>e.targetId===y)),B=!D,j=!!d&&n.includes(c.id),V=S?C===c.id:n.includes(c.id),z=function(e,t,n,i,r,o){const s=o||!i&&(co(e)||l!==e.id)||g===e.id,a=t?"EyeOff":"Eye";return k("span",{slot:"value",children:A("div",{className:HD.suffixContainer,children:[r&&k(PL,{className:N(HD.triggerBtn,n?HD.triggerBtnSelected:""),name:"Trigger",size:"m"}),k(PL,{className:N(HD.visiableBtn,s?HD.hide:""),name:a,size:"m",onClick:t=>{t.stopPropagation(),function(e){const t=TD.viewModel.getViewModelNodeById(e);if(!t)return;DP.toggleVisibility(t)}(e.id)}})]})})}(c,x,V,U,F,S),K=f;D&&(t=i.getChildrenGridAreaInfo(c.id).orders);const W=w.slice(0).filter((({id:e})=>i.getNodeById(e))).sort(((e,n)=>{const r=null==e?void 0:e.id,o=null==n?void 0:n.id;if(D){return HL(t.findIndex((e=>e.id===r)),t.findIndex((e=>e.id===o)))}{const e=i.getNodeById(r),t=i.getNodeById(o);return qD((null==e?void 0:e.order)&&(null==t?void 0:t.order)),HL(t.order,e.order)}})),$=W.map((e=>e.id)),q=$.length<=0||D,Y=o.length;let G=!1,X=!1;Y>0&&(G=!o[Y-1].subSelected&&K,X=K,K&&(o[Y-1].subEnd=!1));const J={key:y,label:M,prefix:T,suffix:z,labelSlot:R,negative:U,offset:h,empty:q,ispage:D,canDrag:B,isDragging:j,children:$,selected:V,subSelected:K,subStart:G,subEnd:X,nodeItemClass:L};P||(E||_?a.push(J):(o.push(J),D&&o.push(...a))),(s.includes(y)||P)&&W.forEach((e=>r(e,{offset:h+1,negative:U,selected:f||!D&&V,fixed:E||_,parentId:null==c?void 0:c.id})))}(r,{offset:-2,negative:!1,selected:!1,parentId:null,fixed:!1}),o}),[O,r.children,l,d,n,s,g,o,S,C]),D=T.exports.useMemo((()=>R.map((e=>e.key))),[R]);function L(){TD.getContextKeyValue(bm.editingMode.key,(e=>{e===fm.None&&TD.setContextKeyValue(bm.editingMode.key,fm.Focus)}))}return k(zL,{className:"editorDispatchKeyEventClass",visible:y,title:e("w.layer.layers"),onClose:function(){f(null)},ref:E,children:k(gL,{treeClass:HD.tree,treeItemClass:HD.treeItem,nodes:R,expandKeys:s,selectedKeys:n,expandNodes:D,onDrop:function(e,t){if(t===PP.none||!e)return;const{model:i,view:r}=TD,o=i.getNodeById(e);if(!o||n.length<=0)return;const l=n.filter((t=>t!==e&&!i.isAncestorNodeOfId(t,e)));if(!(l.length<=0))if(t===PP.middle&&fo(o)){s.includes(o.id)||a([...s,o.id]);const e=TD.queryValidNodesByIds(l,(e=>!ho(e)&&!uo(e)&&!co(e)&&"root"!==e.from));if(e.length<=0)return;TD.transform((()=>{e.sort(((e,t)=>HL(e.order,t.order))).forEach((e=>{const t=i.getParentNodeOfId(e.id);if(t&&t!==o){const t=TD.getDeclaredStyle(e.id),n=r.getElementRectById(e.id),s=r.createStyleFromHitPosition(n,o,t);i.reparentNode(e.id,o.id),TD.updateCurrentStyle(e.id,s)}}))}))}else if(ho(o)&&"root"!==o.from){const e=t===PP.top?$L.Current:$L.Down;null==YL||YL.layerMove(TD,o,e)}else{const e=t===PP.top?$L.Up:$L.Current;GL.layerMove(TD,o,e)}},onDblClick:function(e,t){if(S)return;const{shiftKey:n,ctrlKey:i,metaKey:r}=e;if(n||i||r)return;const{key:o}=t;setTimeout((()=>{m(o)}))},onSelect:function(e,t){const{key:r}=t,{detail:{event:o}}=e;o.stopPropagation();const s=!S&&(o.ctrlKey||o.metaKey),a=!S&&o.shiftKey,{viewModel:l}=TD,c=r,d=l.isIdSelected(c);if(1===n.length&&l.isIdSelected(v.id)&&c!==v.id)h.current=c,TD.recordSelectionChanges((()=>{l.setSelectionById(c)}));else{if(a){if(!d){const e=[];if(h.current){const t=D.findIndex((e=>e===h.current)),n=D.findIndex((e=>e===c)),i=Math.max(t,n),r=Math.min(t,n);qD(-1!==r&&-1!==i);const o=D.slice(r,i+1);e.push(...o)}const t=e.reverse().filter(((t,r)=>!e.slice(r).concat(n).some((e=>i.isAncestorNodeOfId(e,t))))),r=[],o=[];t.forEach((e=>{const t=n.filter((t=>i.isAncestorNodeOfId(e,t)));r.push(e),o.push(...t)})),(r.length>0||o.length>0)&&TD.recordSelectionChanges((()=>{r.length>0&&r.forEach((e=>l.appendSelectionById(e))),o.length>0&&o.forEach((e=>l.removeSelectionById(e)))}))}}else if(s){const e=[],t=[];if(d)t.push(c);else if(!n.some((e=>i.isAncestorNodeOfId(e,c)))){const[n,i]=Oy(TD,c,!1);t.push(...i),n&&e.push(n)}(e.length>0||t.length>0)&&TD.recordSelectionChanges((()=>{e.length>0&&e.forEach((e=>l.appendSelectionById(e))),t.length>0&&t.forEach((e=>l.removeSelectionById(e)))}))}else TD.recordSelectionChanges((()=>{l.setSelectionById(c)})),c!==v.id&&"root"!==c&&setTimeout((()=>{TD.view.scrollNodeIntoView(c,!0)}),50);d||(h.current=c)}},onToggle:function(e,t){const{key:n}=t,i=s.slice(0),r=i.findIndex((e=>e===n));-1===r?i.push(n):i.splice(r,1),a(i)},onDragStart:function(e){const{viewModel:t}=TD,{key:n}=e;c(null),t.isIdSelected(n)||TD.recordSelectionChanges((()=>{t.setSelectionById(n)})),u(n)},onDragEnd:function(){u(null)},onContextMenu:function(e,t){if(S)return;const{key:n}=t,{clientX:i,clientY:r}=e,o={x:i,y:r},{viewModel:s}=TD;s.isIdSelected(n)||TD.recordSelectionChanges((()=>{s.setSelectionById(n)})),setTimeout((()=>{_(o,_L.layer)}))},onItemEnter:function(e,t){l!==t&&c(t)},onItemLeave:function(){c(null)}})})}var oU="_dragSketch_20qr9_1",sU="_componentContainer_20qr9_13";var aU,lU="_menuItem_73mpj_1",cU="_menuIcon_73mpj_16",dU="_menuTitle_73mpj_24";!function(e){e[e.backward=0]="backward",e[e.forward=1]="forward",e[e.inward=2]="inward",e[e.outward=3]="outward",e[e.self=4]="self",e[e.ancestors=5]="ancestors",e[e.descendants=6]="descendants"}(aU||(aU={}));const uU=new Uint8Array(16),hU=[];for(let os=0;os<256;os++)hU.push(os.toString(16).padStart(2,"0"));let pU;function fU(){pU(uU),uU[6]=15&uU[6]|64,uU[8]=63&uU[8]|128;let e=0,t="";return t+=hU[uU[e++]],t+=hU[uU[e++]],t+=hU[uU[e++]],t+=hU[uU[e++]],t+="-",t+=hU[uU[e++]],t+=hU[uU[e++]],t+="-",t+=hU[uU[e++]],t+=hU[uU[e++]],t+="-",t+=hU[uU[e++]],t+=hU[uU[e++]],t+="-",t+=hU[uU[e++]],t+=hU[uU[e++]],t+=hU[uU[e++]],t+=hU[uU[e++]],t+=hU[uU[e++]],t+=hU[uU[e++]],t}pU="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};function gU(){const{i18nService:e}=T.exports.useContext(KL);return{addNodeToViewPos:(t,n,i=!1)=>{var r;const{renderWidth:o=500,renderHeight:s=500}=t,{props:a,meta:l,styles:c=[],children:d=[]}=DR(t),{x:u,y:h}=n,p=u,f=h,g=TD.getContainerNodesFromViewPos({x:p,y:f}).filter((e=>fo(e))),{view:m,viewModel:_,model:v}=TD;let[y]=g,[x,C]=[u,h];if(!y){const[e]=v.queryNodes((e=>co(e))),{orders:t}=v.getChildrenGridAreaInfo(e.id),n=null==(r=t[t.length-1])?void 0:r.id,i=TD.model.getNodeById(n);if(!i)throw new Error("404");y=i;const o=m.getElementRectById(n),{width:s,height:a,top:l,left:c}=o;x=c+s/2,C=l+a/2}const k=x-o/2,E=C-s/2,S={top:E,left:k,width:o,height:s,bottom:E+s,right:k+o},I={ref:y.id,direction:Es.inward},O=i?TD.add:TD.transform;let T;const{nodes:M}=v.getValue();return O((t=>{const n=((e,t,n,i)=>{const r=e.t(i||n),o=new RegExp(`^${r} (\\d+)?$`),s=t.map((e=>{var t,n;const i=null!=(n=null==(t=e.meta)?void 0:t.label)?n:"";let r="0";if(i){const e=o.exec(i);e&&(r=e[1]?e[1]:"0")}return parseInt(r)}));return`${r} ${Math.max(...s)+1}`})(e,M,l.componentType,l.subType),i=t.addNode(I,a,b(w({},l),{label:n}));c.forEach((e=>{const{style:n,breakpointWidth:r,selectorType:o,subSelector:s}=e;let a={};!r&&!(o&&s)&&(a=m.createStyleFromHitPosition(S,y,n)),t.updateStyle(i.id,w(w({},n),a),r,o,s)})),d.forEach((e=>{const n=t.addNode({ref:i.id,direction:Es.inward},{},e.meta);e.styles.forEach((e=>{t.updateStyle(n.id,e.style,e.breakpointWidth)}))})),_.setSelectionById(i.id),T=i})),T}}}function mU(e){const{t:t}=WL(),n=e,{sketchRef:i}=n,r=x(n,["sketchRef"]),{title:o,icon:s,renderWidth:a=500,renderHeight:l=280}=r,[,c]=P(EL),{onDrag:d,onDragStart:u,onDragEnd:h}=function({width:e,height:t,props:n,sketchRef:i}){const r=T.exports.useRef(null),o=T.exports.useRef(null),s=z(DD),{addNodeToViewPos:a}=gU(),l=(null==s?void 0:s.scale)||1,[,c]=P(EL),d=e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="move"},u=e=>{e.stopPropagation(),e.preventDefault();const{clientX:t,clientY:i}=e,r=TD.transformClientVectorToViewVector({x:t,y:i});return a(n,r),TD.setContextKeyValue(bm.editingMode.key,fm.Focus),!1};function h(){const e=document.createElement("div"),t={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",cursor:"grabbing","z-index":"var(--iliad-editor-above-canvas-overlay-index)"};return Object.assign(e.style,t),document.body.appendChild(e),e.ondragover=d,e.ondrop=u,e}return{onDrag:e=>{e.stopPropagation(),r.current||(r.current=h());const{clientX:t,clientY:n}=e,i=TD.transformClientVectorToViewVector({x:t,y:n});let s;const a=TD.getContainerNodesFromViewPos(i);if(a.length>0){const e=a.shift();[s]=Ry(TD,e.id,!0)}TD.view.updateOutline((e=>{e.length=0,s&&e.push(s)})),o.current&&"hidden"!==o.current.style.visibility&&(o.current.style.visibility="hidden")},onDragStart:n=>{var r;n.stopPropagation();const s=e*l,a=t*l;i.current&&(Object.assign(i.current.style,{width:`${s}px`,height:`${a}px`}),null==(r=n.dataTransfer)||r.setDragImage(i.current,s/2,a/2)),o.current=document.querySelector("#layerAddContainer")},onDragEnd:e=>{var t;e.stopPropagation(),i.current&&Object.assign(i.current.style,{width:0,height:0}),null==(t=r.current)||t.remove(),r.current=null,o.current=null,c(null),TD.view.updateOutline((e=>{e.length=0}))}}}({width:a,height:l,props:r,sketchRef:i}),{addNodeToViewPos:p}=gU();return A("div",{className:lU,onClick:function(){const e=TD.view.getViewCanvasCenterPos();p(r,e),c(null),TD.setContextKeyValue(bm.editingMode.key,fm.Focus)},onDragStart:u,onDrag:d,onDragEnd:h,draggable:!0,children:[k("p",{className:cU,children:k(PL,{name:s})}),k("p",{className:dU,children:t(o)})]})}var _U="_menusItem_1ad17_1",vU="_menusTitle_1ad17_6",yU="_menusList_1ad17_24";function wU(e){const{t:t}=WL(),{title:n,type:i,list:r,sketchRef:o}=e;return r.length<=0?null:A("div",{className:_U,children:[k("p",{className:vU,children:t(n)}),k("div",{children:k("div",{className:yU,children:r.map((e=>k(mU,w({sketchRef:o},e),`${e.type}-${e.title}`)))})})]},`menus-${i}`)}const bU={name:"系统字体",value:"system-ui",locales:["zh"]},xU={"--font-size-min":"","--font-size-max":"","--font-size-max-width":""},CU=new Map,kU=new ResizeObserver((e=>{const t=new Map;e.forEach((e=>{const n=e.target.getBoundingClientRect();t.set(e.target,n)})),t.forEach(((e,t)=>{const n=CU.get(t);null==n||n.callbacks.forEach((t=>t(e)))}))}));var EU;!function(e){e.width="width",e.height="height"}(EU||(EU={}));const SU={top:EU.height,bottom:EU.height,left:EU.width,right:EU.width,width:EU.width,"min-width":EU.width,"max-width":EU.width,height:EU.height,"min-height":EU.height,"max-height":EU.height,"padding-top":EU.width,"padding-right":EU.width,"padding-bottom":EU.width,"padding-left":EU.width,"margin-top":EU.width,"margin-right":EU.width,"margin-bottom":EU.width,"margin-left":EU.width};function IU(e,t,n){const i=TD.view.getViewport();if(!e)return"";let r="";const o=TD.getComputedStyleOfId(e);if($D(n,KD.badRequest),$D(i,KD.badRequest),n===fP.px)r=o[t];else{if(n===fP["%"]){const n=function(e){const t=TD.view.getContainingBlockOfId(e);let n=0,i=0;if(t instanceof HTMLElement){const e=getComputedStyle(t);n=parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight),i=parseFloat(e.height)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)}else{const{logicWidth:e,logicHeight:t}=TD.view.getViewport();n=e,i=t}return{width:n,height:i}}(e)[SU[t]],i=o.getPropertyValue(t);return $D(QL(i)&&!Number.isNaN(n),KD.internalError),YD(XD(i)/n)}if(n===fP.vw)return XD(o[t])/i.logicWidth*100+"vw";if(n===fP.vh)return XD(o[t])/i.logicHeight*100+"vh";console.warn(KD.notFound)}return r}function OU(e){const t=z(jD);return n=>IU(null==t?void 0:t.id,e,n)}var TU,MU;(MU=TU||(TU={})).start="flex-start",MU.end="flex-end",MU.center="center";const NU=Object.freeze(w({"--auto-layout":"true",display:nP.flex,"flex-direction":"row","justify-content":TU.start,"align-items":TU.start,width:gP.fitContent,height:gP.fitContent,"grid-template-rows":"","grid-template-columns":""},{"grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"})),AU=Object.freeze({"flex-shrink":"0"});var RU,DU;(DU=RU||(RU={}))[DU.topLeft=0]="topLeft",DU[DU.topCenter=1]="topCenter",DU[DU.topRight=2]="topRight",DU[DU.midLeft=3]="midLeft",DU[DU.midCenter=4]="midCenter",DU[DU.midRight=5]="midRight",DU[DU.bottomLeft=6]="bottomLeft",DU[DU.bottomCenter=7]="bottomCenter",DU[DU.bottomRight=8]="bottomRight";const PU=Object.freeze({tagName:"DIV",wrapper:!1,componentType:qr.Container});class LU{static isAutoLayout(e){return wr(TD.getDeclaredStyle(e))}static isAutoLayoutItem(e){const t=TD.model.getParentNodeOfId(e);return!!t&&this.isAutoLayout(t.id)}static showAutoLayout(e,t){const[n]=e;return 1===e.length&&fo(t)&&this.isAutoLayout(n)}addAutoLayout(e){const{model:t}=TD,[n]=e;if(1===e.length){const e=t.getChildrenNodesOfId(n),i=w(w({},NU),function(e){const t={},n=TD.model.getChildrenNodesOfId(e);return t["flex-direction"]=WU(n.map((e=>e.id))),t}(n));TD.transform((()=>{const r=KU(e.map((e=>e.id)),i["flex-direction"]),o=zU(r,i["flex-direction"]);i["row-gap"]=bP(o),i["column-gap"]=bP(o),TD.model.updateAllBpStyles(n,i,!1),TD.model.updateStyle(n,AU,void 0,">","*"),r.forEach((e=>{t.reorderNode(e,null)})),r.forEach((e=>{TD.model.updateAllBpStyles(e,b(w({},xr),{width:IU(e,"width",fP.px),height:IU(e,"height",fP.px)}),!1)}))}))}else{const i={ref:n,direction:Es.backward},r=w(w({},NU),function(e){const t=TD.model.getParentNodeOfId(e[0]);$D(t,KD.badRequest);const n=TD.view.getGroupRectByIds(e),i=TD.view.createStyleFromHitPosition(n,t,{});return delete i.width,delete i.height,i["flex-direction"]=WU(e),i}(e)),o=KU(e,r["flex-direction"]),s=zU(o,r["flex-direction"]);let a;r["row-gap"]=bP(s),r["column-gap"]=bP(s),TD.fork(),TD.add((()=>{a=t.addNode(i,{},PU)})),TD.view.nextTick((()=>{TD.add((()=>{a=t.addNode(i,{},PU),o.forEach((e=>t.reparentNode(e,a.id,null))),TD.model.updateAllBpStyles(a.id,r,!1),TD.model.updateStyle(a.id,AU,void 0,">","*"),e.forEach((e=>{TD.model.updateAllBpStyles(e,b(w({},xr),{width:IU(e,"width",fP.px),height:IU(e,"height",fP.px)}),!1)})),TD.viewModel.setSelectionById(a.id)})),TD.commitAndMerge()}),(()=>Boolean(TD.view.getComputedStyleOfId(a.id))))}}deleteAutoLayout(e){const t={display:nP.grid,"--auto-layout":"false","flex-direction":"","justify-content":"","align-items":"","row-gap":"","column-gap":"","grid-template-rows":MP(["1fr"]),"grid-template-columns":MP(["1fr"])},n=LU.getContainerDirection(e),i=TD.model.getChildrenNodesOfId(e).map((e=>e.id)),r=i.map((e=>TD.view.getElementRectById(e))),o=TD.getComputedStyleOfId(e),s=e=>{const t=GD(o[e]);return isNaN(t)?0:t},a=s("rowGap"),l=s("columnGap");t.width=o.width,t.height=o.height,TD.transform((()=>{TD.model.updateAllBpStyles(e,t),TD.model.updateStyle(e,{"flex-shrink":""},void 0,">","*");let o=0;i.forEach(((e,t)=>{const i={width:IU(e,"width",fP.px),height:IU(e,"height",fP.px)};n===iP.row?(TD.model.updateAllBpStyles(e,w(b(w({},Cr),{"margin-left":bP(o)}),i)),o+=l+r[t].width):n===iP.column?(TD.model.updateAllBpStyles(e,w(b(w({},Cr),{"margin-top":bP(o)}),i)),o+=a+r[t].height):console.error(KD.badRequest)}))}))}getContainerAlign(e){return function(e){const{"justify-content":t=TU.start,"align-items":n=TU.start}=e,i={"justify-content":t,"align-items":n};return VU.findIndex((e=>PR(i,e)))}(TD.getDeclaredStyle(e))}alignContainer(e,t){const n=function(e){return DR(VU[e])}(t);TD.updateCurrentStyle(e,n)}static getContainerDirection(e){const{"flex-direction":t=iP.row}=TD.getDeclaredStyle(e);return t}setContainerDirection(e,t){const n={};n["flex-direction"]=t,n.width=gP.fitContent,n.height=gP.fitContent,UU(e,t===iP.row?"width":"height"),TD.updateCurrentStyle(e,n)}static createFR(e=1,t){return{"flex-grow":e.toString(),"flex-basis":tP,[t]:bP(0)}}static setItemWidthToFillContainer(e,t){var n;const i=TD.model.getParentNodeOfId(e);$D(i);LU.getContainerDirection(i.id)===iP.row?TD.updateCurrentStyle(e,LU.createFR(t,"width")):TD.updateCurrentStyle(e,{"align-self":"stretch",width:gP.auto});const r=TD.getDeclaredStyle(i.id);return!!SP(null!=(n=r.width)?n:"")&&(jU(i,"width"),!0)}static setItemHeightToFillContainer(e,t){var n;const i=TD.model.getParentNodeOfId(e);$D(i);LU.getContainerDirection(i.id)===iP.row?TD.updateCurrentStyle(e,{"align-self":"stretch",height:gP.auto}):TD.updateCurrentStyle(e,LU.createFR(t,"height"));const r=TD.getDeclaredStyle(i.id);return!!SP(null!=(n=r.height)?n:"")&&(jU(i,"height"),!0)}static unsetItemHeightFromFillContainer(e){const t=TD.model.getParentNodeOfId(e);$D(t);LU.getContainerDirection(t.id)===iP.row?TD.updateCurrentStyle(e,{"align-self":RP.alignSelf}):TD.updateCurrentStyle(e,kr)}static unsetItemWidthFromFillContainer(e){const t=TD.model.getParentNodeOfId(e);$D(t);LU.getContainerDirection(t.id)===iP.row?TD.updateCurrentStyle(e,kr):TD.updateCurrentStyle(e,{"align-self":RP.alignSelf})}static isItemGrowAtMainAxis(e){const{"flex-grow":t="","flex-basis":n}=TD.getDeclaredStyle(e);return n===tP&&"number"==typeof XD(t)}static isItemGrowAtCounterAxis(e,t){const n=TD.getDeclaredStyle(e);return"stretch"===n["align-self"]&&n[t]===gP.auto}static isWidthFillContainer(e){try{const t=TD.model.getParentNodeOfId(e);$D(t);const n=LU.getContainerDirection(t.id);return!!LU.isAutoLayoutItem(e)&&(n===iP.row&&this.isItemGrowAtMainAxis(e)||n===iP.column&&this.isItemGrowAtCounterAxis(e,"width"))}catch{return!1}}static isHeightFillContainer(e){try{const t=TD.model.getParentNodeOfId(e);$D(t);const n=LU.getContainerDirection(t.id);return n===iP.column&&this.isItemGrowAtMainAxis(e)||n===iP.row&&this.isItemGrowAtCounterAxis(e,"height")}catch{return!1}}}function UU(e,t){if(!LU.isAutoLayout(e))return!1;return TD.model.getChildrenNodesOfId(e).some((e=>!!function(e,t){var n;const i=TD.getDeclaredStyle(e.id),r=null!=(n=i[t])?n:gP.auto;return!SP(r)&&(!(vP(r)&&!LU.isItemGrowAtMainAxis(e.id)&&!LU.isItemGrowAtCounterAxis(e.id,t))&&!wP(r))}(e,t)&&("width"===t?LU.unsetItemWidthFromFillContainer(e.id):LU.unsetItemHeightFromFillContainer(e.id),TD.updateCurrentStyle(e.id,{[t]:IU(e.id,t,fP.px)}),!0)))}function FU(e,t){const n=TD.getDeclaredStyle(e);return i=n[t],$t(i)&&i.endsWith("%");var i}function BU(e,t){var n;const i=TD.model.getParentNodeOfId(e);if(!i)return!1;const r=TD.getDeclaredStyle(i.id);if(!wr(r))return!1;const o=null!=(n=r[t])?n:gP.auto;return!!SP(o)&&(jU(i,t),!0)}function jU(e,t){const n=TD.getComputedStyleOfId(e.id);TD.updateCurrentStyle(e.id,{[t]:n[t]})}const VU=[{"justify-content":TU.start,"align-items":TU.start},{"justify-content":TU.start,"align-items":TU.center},{"justify-content":TU.start,"align-items":TU.end},{"justify-content":TU.center,"align-items":TU.start},{"justify-content":TU.center,"align-items":TU.center},{"justify-content":TU.center,"align-items":TU.end},{"justify-content":TU.end,"align-items":TU.start},{"justify-content":TU.end,"align-items":TU.center},{"justify-content":TU.end,"align-items":TU.end}];function zU(e,t){if(e.length<=1)return 0;const n=e.map((e=>TD.view.getElementRectById(e)));let i=0;return n.forEach(((e,r)=>{const o=n[r+1];o&&(t===iP.row?i+=Math.max(o.left-e.right,0):i+=Math.max(o.top-e.bottom,0))})),Math.ceil(i/(n.length-1))}function KU(e,t){const n=e.map((e=>b(w({},TD.view.getElementRectById(e)),{id:e})));let i=[];return i=t===iP.row?n.sort(((e,t)=>e.left-t.left)).map((e=>e.id)):n.sort(((e,t)=>e.top-t.top)).map((e=>e.id)),i}function WU(e){if(!e.length)return iP.row;return function(e){const t=(e=KU(e,iP.row)).map((e=>TD.view.getElementRectById(e))),n=zU(e,iP.row),i=Math.min(...t.map((e=>e.top)));let r;const o=DR(t).map((e=>(e.top=i,e.bottom=e.top+e.height,r&&(e.left=r.right+n,e.right=e.left+e.width),r=e,e)));return HU(t,o)}(e)<function(e){const t=(e=KU(e,iP.column)).map((e=>TD.view.getElementRectById(e))),n=zU(e,iP.column),i=Math.min(...t.map((e=>e.left)));let r;const o=DR(t).map((e=>(e.left=i,e.right=e.left+e.width,r&&(e.top=r.bottom+n,e.bottom=e.top+e.height),r=e,e)));return HU(t,o)}(e)?iP.row:iP.column}function HU(e,t){let n=0;return e.forEach(((e,i)=>{const r=t[i];n+=function(e,t){const n=Math.abs(e.left-t.left),i=Math.abs(e.top-t.top);return Math.sqrt(Math.pow(n,2)+Math.pow(i,2))}(e,r)})),n}const $U={"justify-self":fr.start,"align-self":fr.start},qU=b(w({},TR("rgba(51, 51, 51, 1)")),{"font-family":bU.value}),YU=w(w({width:"500px",height:"auto","font-weight":"700","font-size":"24px","text-align":"center","line-height":"1.3"},qU),$U),GU=w(w({width:"500px",height:"auto","font-weight":"400","font-size":"16px","text-align":"left","line-height":"1.5"},qU),$U),XU=w({width:bP(500),height:bP(375),"aspect-ratio":(500/375).toString()},$U),JU=w(b(w({},NU),{width:"720px",height:"360px","row-gap":"16px","column-gap":"16px"}),$U),QU=b(w(b(w({},xr),{"background-image":IR(function(e){const t=$(e).toRgb();return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}("#e0e0e0"))}),LU.createFR()),{width:"100%",height:"100%"});const ZU=w({width:"500px",height:"280px",display:"grid","grid-template-rows":MP(["1fr"]),"grid-template-columns":MP(["1fr"])},$U),eF=w({},$U),tF={type:"image",title:"w.component.image",icon:"Image",styles:[{style:XU}],props:{src:JP},meta:{componentType:qr.Image},renderWidth:500,renderHeight:375};function nF(e){const t=e,{meta:n={},styles:i=[]}=t,r=x(t,["meta","styles"]);return w({props:{},meta:w({tagName:"DIV",componentType:qr.Container},n),renderWidth:720,renderHeight:360,styles:[...i,{selectorType:">",subSelector:"*",style:{"flex-shrink":"0"}}]},r)}function iF(e){return w({meta:{tagName:"DIV",componentType:qr.Container},styles:[{style:w({},QU)}]},e)}const rF={styles:[{style:b(w(w({},QU),kr),{width:"576px"})}]},oF={styles:[{style:b(w(w({},QU),kr),{width:"576px"})}]},sF={styles:[{style:b(w(w({},QU),kr),{width:"168px",height:"168px"})}]};q.t("w.component.basic"),q.t("w.component.title"),q.t("w.component.paragraph"),q.t("w.component.image"),q.t("w.component.resource"),q.t("w.component.layout"),q.t("w.component.container"),q.t("w.component.autoLayout.row"),q.t("w.component.autoLayout.col"),q.t("w.component.autoLayout.scroll"),q.t("w.component.autoLayout.page"),q.t("w.component.autoLayout.wrap");const aF=FR([{type:"atom",title:"w.component.basic",list:[{type:"title",title:"w.component.title",icon:"Text",styles:[{style:YU}],props:{content:"<h1>这是一个标题</h1>"},meta:{tagName:"DIV",componentType:qr.RichText,subType:Zr.Title},renderWidth:500,renderHeight:32},{type:"paragraph",title:"w.component.paragraph",icon:"Paragraph",styles:[{style:GU}],props:{content:"<p>我们都是设计师，因为我们都在刻意设计我们的生活、我们的房间和我们做事的方式。----唐纳德·A·诺曼</p>"},meta:{tagName:"DIV",wrapper:!1,componentType:qr.RichText,subType:Zr.Paragraph},renderWidth:500,renderHeight:48},tF,{type:"container",title:"w.component.container",icon:"Container",styles:[{style:ZU}],props:{},meta:{tagName:"DIV",wrapper:!1,componentType:qr.Container},renderWidth:500,renderHeight:280}]},{type:"layout",title:"w.component.layout",list:[nF({title:"w.component.autoLayout.row",type:"row",icon:AL.LayoutHorz,styles:[{style:JU},{breakpointWidth:750,style:b(w({},JU),{width:"360px","flex-direction":"column"})}],children:[iF({}),iF({}),iF({}),iF({})],meta:{label:"w.component.autoLayout.row"}}),nF({title:"w.component.autoLayout.col",type:"col",icon:AL.LayoutVert,styles:[{style:b(w({},JU),{"flex-direction":"column"})}],children:[iF({}),iF({}),iF({}),iF({})],meta:{label:"w.component.autoLayout.col"}}),nF({title:"w.component.autoLayout.scroll",type:"scroll",icon:AL.LayoutSliding,styles:[{style:b(w({},JU),{"--overflow-direction":"x","overflow-x":sP.scroll})}],children:[iF(rF),iF(rF),iF(rF),iF(rF)],meta:{label:"w.component.autoLayout.scroll"}}),nF({title:"w.component.autoLayout.page",type:"page",icon:AL.LayoutPageturn,styles:[{style:b(w({},JU),{"--overflow-direction":"x","overflow-x":sP.scroll,"scroll-snap-type":AP.mandatory})},{style:{"scroll-snap-align":NP.start},selectorType:">",subSelector:"*"}],children:[iF(oF),iF(oF),iF(oF),iF(oF)],meta:{label:"w.component.autoLayout.page"}}),nF({title:"w.component.autoLayout.wrap",type:"wrap",icon:AL.LayoutSliding,styles:[{style:b(w({},JU),{"flex-wrap":rP.wrap})}],children:[iF(sF),iF(sF),iF(sF),iF(sF),iF(sF),iF(sF)],meta:{label:"w.component.autoLayout.wrap"}})]},{type:"resource",title:"w.component.resource",list:[]}]),lF=on("UIOptionListService");function cF(){const{t:e}=WL(),[t,n]=P(EL),i=t===CL.add,r=T.exports.useRef(null),o=function(){const e=nU(lF),{data:t=[]}=Y((()=>(null==e?void 0:e.getComponents({}))||Promise.resolve([])),{cacheKey:"editor-components",refreshDeps:[e]});return t}(),s=T.exports.useMemo((()=>{const e=DR(aF),t=e.find((e=>"resource"===e.type)),n=o.map((e=>(e=>{const{title:t,config:n,src:i,data:r,renderWidth:o,renderHeight:s}=e;return{type:"web-widget",title:t,icon:"Container",styles:[{style:b(w({},eF),{width:`${o}px`,height:`${s}px`})}],props:{data:r,type:"system",src:i},meta:{config:n,componentType:qr.WebWidget},renderWidth:o,renderHeight:s}})(e)));return null==t||t.list.push(...n),e}),[o]);return A(zL,{visible:i,title:e("w.component.add"),onClose:function(){n(null)},dir:"ltr",children:[k("div",{className:sU,children:s.map(((e,t)=>A("div",{children:[k(wU,w({sketchRef:r},e),`${e.type}-${t}`),t<s.length-1?k(U,{}):null]},`${e.type}-${t}`)))}),k("img",{id:"dragSketch",ref:r,className:oU,alt:""})]})}var dF;!function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE"}(dF||(dF={}));class uF{constructor(){C(this,"_keyCodeToStr"),C(this,"_strToKeyCode"),this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const hF=new uF,pF=new uF,fF=new uF;var gF,mF,_F;!function(){function e(e,t,n=t,i=n){hF.define(e,t),pF.define(e,n),fF.define(e,i)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}(),function(e){e.toString=function(e){return hF.keyCodeToStr(e)},e.fromString=function(e){return hF.strToKeyCode(e)},e.toUserSettingsUS=function(e){return pF.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return fF.keyCodeToStr(e)},e.fromUserSettings=function(e){return pF.strToKeyCode(e)||fF.strToKeyCode(e)}}(gF||(gF={})),function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"}(mF||(mF={})),function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"}(_F||(_F={}));class vF{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}function yF(e,t){if(0===e)return null;const n=(65535&e)>>>0;if(0!==(4294901760&e)>>>16)throw new Error("chordkeybinding is not su");return function(e,t){const n=!!(2048&e),i=!!(256&e),r=t===qR.Macintosh?i:n,o=!!(1024&e),s=!!(512&e),a=t===qR.Macintosh?n:i;return new vF(r,o,s,a,255&e)}(n,t)}class wF{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyLabel"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=r}}var bF,xF,CF,kF,EF,SF,IF={layerGrab:"_layerGrab_1bol0_1",grab:"_grab_1bol0_10",grabbing:"_grabbing_1bol0_13"};function OF(e){const{container:t}=e,n=T.exports.useRef(null),i=function(e,t){var n,i;const[r,o]=T.exports.useState(bF.default),[s,a]=T.exports.useState(0),[l,c]=T.exports.useState(0),[d,u]=T.exports.useState(0),[h,p]=T.exports.useState(0),[f,g]=T.exports.useState(!1),m=TD.view,_=m.getViewport().scale,v=null==(i=null==(n=m.canvasHostDomNode)?void 0:n.contentDocument)?void 0:i.querySelector("body");G("keydown",(e=>{const t=gF.fromString(e.code);f||t!==dF.Space||document.activeElement!==document.body||(e.preventDefault(),o(bF.grab)),g(!0)})),G("keyup",(()=>{r!==bF.default&&o(bF.default),g(!1)}));const y=T.exports.useRef();return T.exports.useEffect((()=>{y.current=r===bF.default?null:e}),[r]),G("mousedown",(e=>{var n;if(r===bF.grab&&(null==t?void 0:t.current)){const{clientX:i,clientY:r}=e,s=t.current.scrollLeft,l=null!=(n=null==v?void 0:v.scrollTop)?n:0;a(i),c(r),u(s),p(l),o(bF.grabbing)}}),{target:y.current}),G("mousemove",(e=>{if(r===bF.grabbing&&(null==t?void 0:t.current)){const{clientX:n,clientY:i}=e,r=n-s,o=i-l;v&&(v.scrollTop=h-o/_),t.current.scrollLeft=d-r}}),{target:y.current}),G("mouseup",(()=>{r===bF.grabbing&&o(bF.grab)}),{target:y.current}),r}(null==n?void 0:n.current,t);return T.exports.useEffect((()=>{document.activeElement===TD.view.canvasHostDomNode&&TD.view.canvasHostDomNode.blur()}),[]),i===bF.default?null:k("div",{className:N([IF[i],IF.layerGrab]),ref:n})}(xF=bF||(bF={})).default="default",xF.grab="grab",xF.grabbing="grabbing";class TF{constructor(){}static isItemDocked(e,t){Tn()}dockItem(e,t){Tn()}undockItem(e,t){Tn()}static isHorizontalDocked(e){Tn()}static isVerticalDocked(e){Tn()}}(kF=CF||(CF={})).horizontalCenter="horizontalCenter",kF.verticalCenter="verticalCenter",(SF=EF||(EF={})).horizontalSpaceBetween="horizontalSpaceBetween",SF.verticalSpaceBetween="verticalSpaceBetween";const MF=w(w({},dr),CF),NF=w(w(w({},dr),CF),EF),AF={[MF.left]:{"justify-self":fr.start},[MF.right]:{"justify-self":fr.end},[MF.top]:{"align-self":fr.start},[MF.bottom]:{"align-self":fr.end},[MF.horizontalCenter]:{"justify-self":fr.center},[MF.verticalCenter]:{"align-self":fr.center}},RF={"margin-left":tP,"margin-right":tP},DF={"margin-top":tP,"margin-bottom":tP},PF={[MF.left]:RF,[MF.right]:RF,[MF.top]:DF,[MF.bottom]:DF,[MF.horizontalCenter]:RF,[MF.verticalCenter]:DF},LF={horizontal:[MF.left,MF.right,MF.horizontalCenter],vertical:[MF.top,MF.bottom,MF.verticalCenter]};class UF extends TF{static isSameAncestor(e){const t=e.map((e=>TD.model.getAncestorNodesOfId(e).map((e=>e.id)).join("")));return 1===[...new Set(t)].length}alignItems(e,t){if(1===e.length){$D(t in MF);const[n]=e,i=TD.model.getParentNodeOfId(n);$D(null==i?void 0:i.id,KD.badRequest);const r={};Object.assign(r,AF[t]),Object.assign(r,PF[t]);const{width:o,height:s}=TD.getComputedStyleOfId(n);UF.isHorizontalDocked(n)&&LF.horizontal.includes(t)&&(r.width=o),UF.isVerticalDocked(n)&&LF.vertical.includes(t)&&(r.height=s),TD.updateCurrentStyle(n,r)}else{const n=function(e,t){const n=TD.view.getGroupRectByIds(e);return t===NF.horizontalSpaceBetween?function(e,t){const n=[],{width:i}=t,r=e.map((e=>TD.view.getElementRectById(e))),o=r.reduce(((e,t)=>e+t.width),0),s=(i-o)/(e.length-1);let a=t.left;return e.forEach(((e,t)=>{const i=r[t],o=a-i.left;n.push(BF(e,o,0)),a=a+s+i.width})),n}(e,n):t===NF.verticalSpaceBetween?function(e,t){const n=[],{height:i}=t,r=e.map((e=>TD.view.getElementRectById(e))),o=r.reduce(((e,t)=>e+t.height),0),s=(i-o)/(e.length-1);let a=t.top;return e.forEach(((e,t)=>{const i=r[t],o=a-i.top;n.push(BF(e,0,o)),a=a+s+i.height})),n}(e,n):e.map((e=>function(e,t,n){const i={},r=function(e,t,n){const i=TD.view.getElementRectById(e),r={x:n.left+n.width/2,y:n.top+n.height/2},o={x:i.left+i.width/2,y:i.top+i.height/2};switch(t){case MF.left:return n.left-i.left;case MF.horizontalCenter:return r.x-o.x;case MF.right:return n.right-i.right;case MF.top:return n.top-i.top;case MF.verticalCenter:return r.y-o.y;case MF.bottom:return n.bottom-i.bottom;default:return 0}}(e,t,n);LF.horizontal.includes(t)?Object.assign(i,BF(e,r,0)):LF.vertical.includes(t)&&Object.assign(i,BF(e,0,r));return i}(e,t,n)))}(e,t);$D(UF.isSameAncestor(e),"多选对齐只能操作相同层级节点"),e.forEach(((e,t)=>{TD.updateCurrentStyle(e,n[t])}))}}static isHorizontalUndocked(e){const t=TD.getDeclaredStyle(e);return _r(t)}static isHorizontalDocked(e){return UF.isItemDocked(e,mr.left)&&UF.isItemDocked(e,mr.right)}static isVerticalUndocked(e){const t=TD.getDeclaredStyle(e);return vr(t)}static isVerticalDocked(e){return UF.isItemDocked(e,mr.top)&&UF.isItemDocked(e,mr.bottom)}static isItemDocked(e,t){const n=TD.getDeclaredStyle(e);return yr(n,t)}dockItem(e,t){const n=FF(e),{offsetLeft:i,offsetRight:r,offsetTop:o,offsetBottom:s}=n,a={};switch(t){case mr.left:a["margin-left"]=eU.toPX(i),UF.isItemDocked(e,mr.right)?(a["justify-self"]=fr.stretch,a.width=gP.auto):(a["justify-self"]=fr.start,a["margin-right"]=tP);break;case mr.right:a["margin-right"]=eU.toPX(r),UF.isItemDocked(e,mr.left)?(a["justify-self"]=fr.stretch,a.width=gP.auto):(a["justify-self"]=fr.end,a["margin-left"]=tP);break;case mr.top:a["margin-top"]=eU.toPX(o),UF.isItemDocked(e,mr.bottom)?(a["align-self"]=fr.stretch,a.height=gP.auto):(a["align-self"]=fr.start,a["margin-bottom"]=tP);break;case mr.bottom:a["margin-bottom"]=eU.toPX(s),UF.isItemDocked(e,mr.top)?(a["align-self"]=fr.stretch,a.height=gP.auto):(a["align-self"]=fr.end,a["margin-top"]=tP);break;case mr.around:a["justify-self"]=fr.stretch,a["align-self"]=fr.stretch,a["margin-left"]=eU.toPX(i),a["margin-right"]=eU.toPX(r),a["margin-top"]=eU.toPX(o),a["margin-bottom"]=eU.toPX(s),a.width=gP.auto,a.height=gP.auto;break;default:console.error(KD.badRequest)}TD.updateCurrentStyle(e,a)}undockItem(e,t){const n={},i=FF(e),{computedStyle:r,dockWidth:o,dockHeight:s,offsetLeft:a,offsetTop:l}=i,c=2*(a+GD(r.width)/2-o/2),d=2*(l+GD(r.height)/2-s/2);switch(t){case mr.left:UF.isItemDocked(e,mr.right)?(n["justify-self"]=fr.end,n["margin-left"]=tP,n.width=r.width):(n["justify-self"]=fr.center,n["margin-left"]=eU.toPX(c),n["margin-right"]=tP);break;case mr.right:UF.isItemDocked(e,mr.left)?(n["justify-self"]=fr.start,n["margin-right"]=tP,n.width=r.width):(n["justify-self"]=fr.center,n["margin-left"]=eU.toPX(c),n["margin-right"]=tP);break;case mr.top:UF.isItemDocked(e,mr.bottom)?(n["align-self"]=fr.end,n["margin-top"]=tP,n.height=r.height):(n["align-self"]=fr.center,n["margin-top"]=eU.toPX(d),n["margin-bottom"]=tP);break;case mr.bottom:UF.isItemDocked(e,mr.top)?(n["align-self"]=fr.start,n["margin-bottom"]=tP,n.height=r.height):(n["align-self"]=fr.center,n["margin-top"]=eU.toPX(d),n["margin-bottom"]=tP);break;case mr.none:n["justify-self"]=fr.center,n["align-self"]=fr.center,n["margin-left"]=eU.toPX(c),n["margin-top"]=eU.toPX(d),n.width=r.width,n.height=r.height,n["margin-right"]=tP,n["margin-bottom"]=tP;break;default:console.error(KD.badRequest)}TD.updateCurrentStyle(e,n)}}function FF(e){const t=TD.view.getElementById(e),n=TD.view.getComputedStyleOfId(e),i=TD.model.getParentNodeOfId(e);$D(i&&t,KD.badRequest),$D(fo(i)||co(i),KD.badRequest);const r=TD.view.getComputedStyleOfId(i.id),o=TD.view.getElementRectById(e),s=TD.view.getElementRectById(i.id),a=function(e,t){return[t.top,t.right,t.bottom,t.left].some((e=>!Number.isNaN(e)))?t:e}(s,lP(n,r,s)),l=function(e,t){return{offsetLeft:e.left-t.left,offsetRight:t.right-e.right,offsetTop:e.top-t.top,offsetBottom:t.bottom-e.bottom}}(o,a);return b(w({},l),{computedStyle:n,parentComputedStyle:r,dockWidth:a.width,dockHeight:a.height})}function BF(e,t,n){const i=FF(e),{offsetLeft:r,offsetRight:o,offsetTop:s,offsetBottom:a}=i,{marginLeft:l,marginTop:c}=TD.getComputedStyleOfId(e),d={};return UF.isHorizontalUndocked(e)?d["margin-left"]=eU.toPX(XD(l)+2*t):UF.isHorizontalDocked(e)?(d["margin-left"]=eU.toPX(r+t),d["margin-right"]=eU.toPX(o-t)):UF.isItemDocked(e,MF.right)?d["margin-right"]=eU.toPX(o-t):d["margin-left"]=eU.toPX(r+t),UF.isVerticalUndocked(e)?d["margin-top"]=eU.toPX(XD(c)+2*n):UF.isVerticalDocked(e)?(d["margin-top"]=eU.toPX(s+n),d["margin-bottom"]=eU.toPX(a-n)):UF.isItemDocked(e,MF.bottom)?d["margin-bottom"]=eU.toPX(a-n):d["margin-top"]=eU.toPX(s+n),d}function jF(e,t){const{sampleRate:n}=t,{js_filter:i}=X(e)||{};let r=null;window.addEventListener("unhandledrejection",(function(t){var o;if("function"==typeof i&&!1===i(t))return;e.gdbehaviour&&(r=e.gdbehaviour.getCollect());const s=((null==(o=t.reason)?void 0:o.stack)||"").split("\n");s.shift();const a={w_msg:t.reason.message||t.type,w_file:"",w_line:"",w_col:"",category:J,stack:s,sampleRate:n,bl1:JSON.stringify(r)};e.report(a)}))}function VF(e,t){const{sampleRate:n}=t,{js_filter:i}=X(e)||{};let r=null;window.addEventListener("error",(function(t){if("function"==typeof i&&!1===i(t))return;e.gdbehaviour&&(r=e.gdbehaviour.getCollect());const o=(t.error.stack||"").split("\n");o.shift();const s={w_msg:t.message,w_file:t.filename,w_line:t.lineno,w_col:t.colno,category:J,stack:o,sampleRate:n,bl1:JSON.stringify(r)};e.report(s)}))}class zF{constructor(e,t){C(this,"firstRouteTriggered",!1),C(this,"collectlen",10),C(this,"collect",[]),C(this,"wpk"),C(this,"router"),this.wpk=e,this.router=t,this.routerCollection(),this.clickCollection(),this.logCollection()}routerChange(e){if(this.router)this.router.onReady((()=>{var t;if(!this.firstRouteTriggered){const n=null==(t=this.router)?void 0:t.fullPath,i=Q();this.firstRouteTriggered=!0,e({page:n,sourcePage:i})}})),this.router.onChange(((t,n)=>{let i="";const r=t;this.firstRouteTriggered?i=n:(i=Q(),this.firstRouteTriggered=!0),e({page:r,sourcePage:i})}));else if(!this.firstRouteTriggered){const t=location.href,n=Q();this.firstRouteTriggered=!0,e({page:t,sourcePage:n})}}routerCollection(){this.routerChange((({page:e,sourcePage:t})=>{const{device_id:n,user_id:i}=this.wpk.slsParams||{};this.setCollect("router.change",{deviceId:n,userId:i,page:e,sourcePage:t})}))}clickCollection(){window.addEventListener("click",(e=>{const t=te(e.target,5),n=ne(e.target,100);this.setCollect("ui.click",{xpath:t,outerhtml:n})}),!0)}logCollection(){const e=this.setCollect.bind(this),t=["warn","error"];for(let n=0;n<t.length;n++){const i=t[n];window.console[i]&&"function"==typeof window.console[i]&&Z(window.console,i,(function(t){return function(){const n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];e("console",{level:i,message:n}),t&&Function.prototype.apply.call(t,window.console,n)}}))}}getCollect(){return this.collect}setCollect(e,t){const n=Object.assign(t,{time:ee()});"router.change"!==e?(this.collect.length>=this.collectlen&&this.collect.splice(1,1),this.collect.push({type:e,data:n})):this.collect=[{type:e,data:n}]}}function KF(e,t){const n=new zF(e,t);e.gdbehaviour=n}var WF,HF;(HF=WF||(WF={})).dev="dev",HF.prod="prod",HF.stage="stage",HF.fat="fat",HF.development="development";const $F=parseInt(1730638056723),qF="production"!==WF.development,YF=["prod","stage"].includes("production");console.log(`Reporter is ${qF?"open":"close"}. Env: production ${$F}`);let GF=null;qF&&(GF=new ie({bid:YF?"sls-37116e81e4edc2aefa":"sls-f57aba5542dcb8d1ba",env:"production",app_type:"web",app_name:"iliad-editor",app_version:"0.3.2",app_vct:$F,err_config:{js_sample_rate:1,res_sample_rate:1}}));class XF extends T.exports.Component{constructor(e){super(e),C(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){null==GF||GF.error(e,{bl1:t.componentStack}),console.error(e,t)}render(){return this.state.hasError?k("h6",{children:"Something went wrong."}):this.props.children}}function JF(e){return t=>{const n=z(jD),i=z(BD),r=z(LD);if(!n||!i||!r.length)return null;const o=w({node:n,style:i,selection:r},t),{node:s,style:a,selection:l}=o;return s&&a&&l?k(XF,{children:k(e,w({},o))}):null}}var QF="_input_1l986_1";var ZF="_label_eibsq_1";function eB(e){const t=e,{children:n,className:i}=t,r=x(t,["children","className"]);return k(re,b(w({className:N(ZF,i),"side-aligned":"start"},r),{children:n}))}var tB="_item_1ccd5_1",nB="_normalMargin_1ccd5_4",iB="_itemDisabled_1ccd5_7",rB="_fieldContent_1ccd5_10";function oB(e){const t=e,{children:n,className:i="",label:r,disabled:o,required:s,sideAligned:a="start",labelStyle:l,contentStyle:c,margin:d="normal",empty:u=!1}=t,h=x(t,["children","className","label","disabled","required","sideAligned","labelStyle","contentStyle","margin","empty"]);return u?null:A("div",b(w({className:N(tB,i,{[iB]:o,[nB]:"normal"===d})},h),{children:[k(eB,{disabled:o,required:s,sideAligned:a,style:l,children:r}),k("div",{className:rB,style:c,children:n})]}))}var sB="_input_1pqhx_1",aB="_logicInput_1pqhx_8",lB="_inputWrap_1pqhx_12",cB="_inputWithIcon_1pqhx_21",dB="_icon_1pqhx_25";function uB(e){G("keyup",(t=>{var n;"Enter"===t.code&&(null==(n=e.current)||n.blur())}),{target:e})}const hB=T.exports.forwardRef(((e,t)=>{const n=T.exports.useRef(null),i=e,{value:r="",suffix:o="",onChange:s,className:a,onFocus:l,onBlur:c,logic:d,onInput:u,autofocus:h,children:p,disabled:f}=i,g=x(i,["value","suffix","onChange","className","onFocus","onBlur","logic","onInput","autofocus","children","disabled"]),[m,_]=T.exports.useState(h),v=m?`${r}`:`${r}${o}`;return G("focus",(function(e){f||(null==l||l(e.target.value),_(!0),setTimeout((()=>{var e;null==(e=n.current)||e.select()}),50))}),{target:n}),G("blur",(function(e){null==c||c(e.target.value),_(!1)}),{target:n}),G("input",(function(e){null==u||u(e.target.value)}),{target:n}),uB(n),T.exports.useEffect((()=>{var e;(null==(e=n.current)?void 0:e.value)&&n.current.value!==v&&(n.current.value=v)})),k(H,b(w({className:N(sB,d?aB:"",a),ref:BP([n,t]),value:v,change:function(e){const t=e.target.value;var n;o&&(n=t).length===Number.parseFloat(n).toString().length?null==s||s(`${t}${o}`):null==s||s(t)},autofocus:h,disabled:f},g),{children:p}))}));function pB(e){const t=e,{name:n,className:i,style:r}=t,o=x(t,["name","className","style"]);return A("div",{className:N(lB,o.logic?hL:"",i),style:r,children:[k(hB,w({className:cB},o)),k(PL,{className:dB,name:n})]})}var fB="_title_1yto1_1",gB="_titleSecondary_1yto1_10",mB="_icon_1yto1_13";const _B=T.exports.forwardRef(((e,t)=>{const n=e,{children:i,className:r,variant:o="primary",action:s="",slotAdd:a}=n,l=x(n,["children","className","variant","action","slotAdd"]),c="add"===s,d="delete"===s;return A("h2",b(w({ref:t,className:N(r,fB,{[gB]:"secondary"===o})},l),{children:[i,c&&k(PL,{className:mB,name:"Add"}),d&&k(PL,{className:mB,name:"Remove"}),a]}))}));var vB,yB,wB="_divider_1agvc_1";function bB(){return k(U,{className:N(wB)})}(yB=vB||(vB={})).page="page",yB.site="site",yB.anchor="anchor",yB.phone="phone",yB.email="email",yB.none="none";const xB=/#.*$/,CB=/\/\//;function kB(e){return CB.test(e)||/^\//.test(e)}function EB(e){return xB.test(e)}class SB{static stringify(e){return e.anchor?`${e.href}#${e.anchor}`:e.href}static parse(e){const[t,n=""]=e.split("#");return{href:t,anchor:n}}}class IB{static stringify(e,t){const n=this.URIClassMap[e];if(!n)throw new Error("404");return n.stringify(t)}static parse(e){const t=function(e){return/^mailto:/.test(e)}(n=e)?vB.email:function(e){return/^tel:/.test(e)}(n)?vB.phone:EB(n)?vB.anchor:kB(n)?vB.site:vB.page;var n;const i=this.URIClassMap[t];if(!i)throw new Error("404");return w({type:t},i.parse(e))}}C(IB,"URIClassMap",{site:class{static stringify(e){let t=e.href;return kB(e.href)||(t=`//${e.href}`),t}static parse(e){return{href:e,anchor:""}}},phone:class{static stringify(e){return`tel:${e.href}`}static parse(e){const t=e.match(/^tel:(.+)/);return{href:t?t[1]:"",anchor:""}}},page:class{static stringify(e){return e.href}static parse(e){return{href:e,anchor:""}}},anchor:SB,email:class{static stringify(e){return`mailto:${e.href}`}static parse(e){const t=e.match(/^mailto:(.+)/);return{href:t?t[1]:"",anchor:""}}}});var OB="_toastContainer_mkv14_15";const TB={default:"",success:"positive",info:"info",warning:"warning",error:"negative"},MB={top:"_toastPlacementTop_mkv14_26",bottom:"_toastPlacementBottom_mkv14_30"};function NB(e){const[t,n]=T.exports.useState(!0),{type:i="default",duration:r=2e3,message:o="",actionText:s,showClose:a,onAction:l,close:c}=e,d={timeout:r,variant:TB[i],closeable:a};return T.exports.useEffect((()=>{t||null==c||c()}),[t]),A(se,b(w({open:t},d),{dir:"ltr",close:()=>{console.log("close"),n(!1)},children:[o,s?k(ae,{slot:"action",variant:"overBackground",quiet:!0,dir:"ltr",role:"button",size:"m",onClick:()=>{null==l||l()},children:s}):null]}))}function AB(e){const{placement:t="bottom"}=e,{container:n,remove:i}=function(e){const t=document.querySelector("sp-theme");if(!t)throw new Error("404");let n=t.querySelector("#toastContainer");return n||(n=document.createElement("sp-theme"),n.color="dark",n.size="m",n.dir="ltr",n.id="toastContainer",n.className=`${OB} ${MB[e]}`,t.appendChild(n)),{slot:t,container:n,remove:()=>{null==n||n.remove()}}}(t),r=()=>{i()};return oe.exports.render(k(NB,b(w({},e),{close:r})),n),r}q.t("w.anchor"),q.t("w.anchor.message.exists");var RB=JF((function(e){var t;const{node:n}=e,i=null!=(t=n.props.id)?t:"",{links:r,nodes:o}=z(AD),{t:s}=WL();return A("div",{children:[k(_B,{variant:i?"primary":"secondary",action:i?"delete":"add",onClick:i?function(){TD.transform((e=>{e.updateNodeById(n.id,{id:""})}))}:function(){var e,t;const i=`${null!=(t=null==(e=n.meta)?void 0:e.label)?t:s(xy(n))}${fU().slice(0,3)}`.replace(/\s/g,"");TD.transform((e=>{e.updateNodeById(n.id,{id:i})}))},children:s("w.anchor")}),i&&k(oB,{label:s("w.anchor.name"),margin:"none",children:k(hB,{className:QF,value:i,onChange:function(e){!function(e){return e.filter((e=>e.props.id)).map((e=>e.props.id))}(o).includes(e)?TD.transform((t=>{t.updateNodeById(n.id,{id:e}),function(e,t,n){e.filter((e=>EB(e.href)&&SB.parse(e.href).anchor===t)).forEach((e=>{const t=SB.parse(e.href).href;TD.model.updateLink(e.targetId,SB.stringify({href:t,anchor:n}),e.target,e.rel)}))}(r,i,e)})):AB({message:s("w.anchor.message.exists")})},required:!0,pattern:"[一-龥a-zA-Z0-9_-]*"})}),k(bB,{})]})}));var DB={container:"_container_puqqr_1",tabs:"_tabs_puqqr_4",tabContent:"_tabContent_puqqr_10",label:"_label_puqqr_17",imageUploader:"_imageUploader_puqqr_20",uploadHandle:"_uploadHandle_puqqr_34",itemsWrap:"_itemsWrap_puqqr_44",bgSizePicker:"_bgSizePicker_puqqr_49",linearSlider:"_linearSlider_puqqr_53",itemWrap:"_itemWrap_puqqr_62",itemDragHandle:"_itemDragHandle_puqqr_68",bgRow:"_bgRow_puqqr_76",bgDesc:"_bgDesc_puqqr_80"};var PB="_fieldGroup_1phd0_1",LB="_colorArea_1phd0_6",UB="_colorSlider_1phd0_9",FB="_inputGroup_1phd0_13",BB="_input_1phd0_13",jB="_opacitySlider_1phd0_27";function VB(e){const{className:t,color:n="#000000",onChange:i,autofocusInput:r=!1}=e,o=T.exports.useRef(),s=T.exports.useMemo((()=>$(n)),[n]),a=XD(""+100*s.toRgb().a),{run:l,cancel:c}=le(((e,t)=>{const n=$(e);n.setAlpha((null!=t?t:a)/100);const{r:r,g:o,b:s,a:l}=n.toRgb();null==i||i(`rgba(${r},${o},${s},${l})`)}),{wait:15});function d(e){const t=parseInt(e);l(n,t)}ce(c);const u=CR("transparent",s.toHexString());return A("div",{className:N(PB,t),children:[k(de,{className:LB,color:n,input:function(e){l(e.target.color)}}),k(ue,{className:UB,color:n,input:function(e){l(e.target.color)}}),k(he,{className:jB,value:a,min:0,max:100,step:1,labelVisibility:"none",input:e=>d(e.target.value),style:{backgroundImage:OR(u,90)}}),A("div",{className:FB,children:[k(hB,{ref:o,autofocus:r,className:BB,value:s.toHexString(),onChange:function(e){l(e)}}),k(hB,{className:BB,value:a,suffix:"%",onChange:d})]})]})}var zB="_panel_xsz69_13",KB="_content_xsz69_21";const WB={placement:"none",receivesFocus:"auto"},HB={click:"click",hover:"mouseenter"};function $B(e){const{trigger:t,content:n,interaction:i="click",options:r=WB,title:o,disabled:s,popoverStyle:a={},fitToConfigPanel:l=!1,triggerClass:c,triggerRef:d,panelClass:u}=e,[h,p]=pe(e,{valuePropName:"visible",trigger:"onVisibleChange",defaultValue:!1}),[f,g]=pe(e,{valuePropName:"position",trigger:"onPositionChange",defaultValue:[0,0]}),m=T.exports.useRef(0),_=T.exports.useRef(null),v=T.exports.useRef(null),y=T.exports.useRef(null);function b(e){e.type===HB[i]&&E()}function C(){"hover"===i&&(m.current=setTimeout((()=>{S()}),100))}function E(){clearTimeout(m.current),s||async function(){var e;const t=_.current,n=v.current;if(t&&n){const o=function(){var e;return null==(e=v.current)?void 0:e.querySelector("[autofocus=true]:not([disabled])")}();null==o||o.focus();const s=r,{receivesFocus:a}=s,c=x(s,["receivesFocus"]);if(y.current=await me.open(t,i,n,o?c:r),!h&&p(!0),l){const i=(null==(e=null==d?void 0:d.current)?void 0:e.getBoundingClientRect())||t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=JD(0,window.innerWidth-256-r.width-1,window.innerWidth-r.width),s=JD(0,i.top,window.innerHeight-r.height);g([o,s])}}}()}function S(){var e;null==(e=y.current)||e.call(y),I()}function I(){h&&p(!1)}return G("mouseenter",(()=>{"hover"===i&&clearTimeout(m.current)}),{target:v}),G("mouseleave",(()=>{C()}),{target:v}),G("sp-closed",I,{target:_.current}),G("move",(function(e){const t=e.detail.offset;g([t.x,t.y])}),{target:v.current}),T.exports.useEffect((()=>()=>{S()}),[]),T.exports.useEffect((()=>{h?E():S()}),[h]),T.exports.useEffect((()=>{var e;if(!o)try{null==(e=v.current)||e.header.remove()}catch{}})),A(T.exports.Fragment,{children:[k("div",{className:c,ref:_,onClick:b,onMouseEnter:b,onMouseLeave:C,children:t}),k(fe,{color:"light",scale:"medium",children:k(ge,{ref:v,className:N(u,zB),title:o,dismissable:!!o,close:S,moveable:!0,posx:f[0],posy:f[1],style:w({display:h?"block":"none",paddingTop:o?tP:bP(10)},a),children:k("div",{className:KB,children:n})})})]})}function qB(e){const{onChange:t}=e,n=T.exports.useRef(null);function i(e){t(e.target.value)}return T.exports.useEffect((()=>{var e;return null==(e=n.current)||e.addEventListener("change",i),()=>{var e;null==(e=n.current)||e.removeEventListener("change",i)}}),[n.current,i]),k(_e,w({ref:n},e))}var YB="_item_fb0li_1",GB="_activeItem_fb0li_13",XB="_add_fb0li_17",JB="_colorRect_fb0li_32";function QB(e){const t=e,{src:n}=t,i=x(t,["src"]);return k("img",w({src:n},i))}function ZB(e){const t=e,{active:n=!1,logic:i=!1,children:r,className:o}=t,s=x(t,["active","logic","children","className"]);return k("div",b(w({className:N(YB,o,{[GB]:n,[hL]:i})},s),{children:r}))}function ej(e){const{visible:t}=e,n=t?"Eye":"EyeDisplay";return k("span",{style:{cursor:"pointer"},children:k(PL,{name:n,style:{color:"#949494"}},n)})}function tj(e){const{t:t}=WL();return k(nj,w({src:HP,text:t("w.component.add")},e))}function nj(e){const t=e,{src:n,text:i}=t,r=x(t,["src","text"]);return A("div",b(w({className:XB},r),{children:[k(QB,{src:n,width:20}),k("span",{children:i})]}))}function ij(e){const t=e,{color:n,name:i,background:r,text:o}=t,s=x(t,["color","name","background","text"]);return A("div",b(w({className:XB},s),{children:[k("div",{className:JB,style:r?{background:r}:{},children:k(PL,{name:i,style:n?{fill:n}:{}})}),k("span",{children:o})]}))}function rj(e){return k("div",w({className:JB},e))}var oj="_del_kno2e_1";function sj(e){return k("div",b(w({},e),{className:oj,children:"—"}))}function aj(){return new Promise(((e,t)=>{const n=document.createElement("input");n.type="file",n.accept='accept="image/*"',n.style.display="none",n.click(),n.addEventListener("change",(()=>{e(n.files),n.remove()}))}))}const lj=on("fileStorageService");var cj="_logicRadio_wwwad_1";function dj(e){const t=e,{logic:n=!1,selected:i="",options:r,onChange:o,radioStyle:s}=t,a=x(t,["logic","selected","options","onChange","radioStyle"]),[l,c]=T.exports.useState("");return T.exports.useEffect((()=>{const e=setTimeout((()=>{c(i)}));return()=>{e&&clearTimeout(e)}}),[i]),k(ve,b(w({className:n?cj:"",selected:l,change:function(e){const{target:t,currentTarget:n}=e;if(t!==n)return;const i=e.currentTarget.selected;null==o||o(i)},type:"button"},a),{children:r.map((e=>k(ye,{value:e.value,disabled:e.disabled,type:"button",style:s,children:e.label},e.value)))}))}const uj=T.exports.createContext({});function hj(e){const[t,n]=we(-1);return k(uj.Provider,{value:{dropIndex:t,setDropIndex:n},children:e.children})}const pj={[PP.top]:0,[PP.bottom]:1};function fj(e){const{dropIndex:t,setDropIndex:n}=T.exports.useContext(uj),{dropRef:i,onDrop:r,size:o}=e,{run:s}=le(((e,t,r)=>{var o;const s=r.isOver({shallow:!0});let a=-1;const l=null==(o=i.current)?void 0:o.getBoundingClientRect(),c=r.getClientOffset();if(s&&l&&c){const e=FP(l,c,!1),i=pj[e];isFinite(i)&&(a=t.index+i,n(a))}}),{wait:10});function a(){n(-1)}const l=UP(b(w({},e),{onHover:s,onDrop(e,n,i){a(),e.index!==n.index&&(n.index=JD(0,t,o),null==r||r(e,n,i))},onDragEnd(e,n){if(!n.didDrop()){if(e.index===t)return;const i=JD(0,t,o);null==r||r(e,{index:i},n)}a()}}));return b(w({},l),{dropIndex:t})}function gj(e,t,n){if(n<t)e.splice(n,0,...e.splice(t,1));else{const i=e[t];e.splice(n,0,i),e.splice(t,1)}}var mj,_j,vj;(_j=mj||(mj={})).cover="cover",_j.contain="contain",_j.tile="tile",(vj||(vj={})).bgItem="bgItem";const yj=[{value:bR.color,label:"w.background.pureColor"},{value:bR.linear,label:"w.background.gradient"},{value:bR.image,label:"w.background.pattern"}];var wj,bj,xj,Cj;(bj=wj||(wj={})).first="rgba(224, 224, 224, 1)",bj.second="rgba(0, 0, 0, 0.2)",(Cj=xj||(xj={})).start="rgba(0, 0, 0, 1)",Cj.end="rgba(0, 0, 0, 0)";var kj=JF((function(e){const{style:t,animationStyle:n,addStyle:i}=e,r=Boolean(null==n?void 0:n["background-image"]),[o,s]=T.exports.useState(-1),a=SR(t),l=a.length>1,c=nU(lj),{t:d}=WL();function u(e){const t=function(e){const t=[],n=[],i=[],r=[];return e.forEach((e=>{const{colorStops:o,orientation:s,size:a,type:l,imageUrl:c,repeat:d=ER.repeat,position:u=ER.position,color:h}=e;l===bR.image?t.push(function(e){return`url(${e})`}(c)):l===bR.linear?t.push(OR(o,s)):l===bR.color&&t.push(IR(h)),n.push(a),i.push(d),r.push(u)})),{"background-image":t.join(","),"background-size":n.join(","),"background-repeat":i.join(","),"background-position":r.join(",")}}(e);i(t)}function h(e,t){const n=e.index,i=t.index;gj(a,n,i),u(a)}return k(hj,{children:k("div",{className:DB.container,children:k(oB,{label:d("w.background.fill"),labelStyle:{alignSelf:"start"},children:A("div",{className:DB.itemsWrap,children:[a.map(((e,t)=>k(Sj,{logic:r,index:t,size:a.length,item:e,onChange:e=>{e?function(e,t){a[e]=t,u(a)}(t,e):function(e){a.splice(e,1),u(a)}(t)},open:o===t,onOpen:()=>function(e){s(e)}(t),onClose:()=>{s(-1)},onDrop:h,canDrag:l,storageService:c},t))),k(tj,{onClick:function(){const e=0===a.length?wj.first:wj.second;a.unshift(b(w({},DR(ER)),{color:e})),u(a),setTimeout((()=>{s(0)}),200)}})]})})})})}));const Ej={width:"12px",height:"12px"};function Sj(e){const{index:t,onDrop:n,canDrag:i,size:r}=e,o=T.exports.useRef(null),s=T.exports.useRef(null),{handlerId:a,previewRef:l,dropIndex:c}=fj({dragRef:o,dropRef:s,itemType:vj.bgItem,index:t,onDrop:n,canDrag:i,size:r}),d=0===t&&0===c,u=t===r-1&&c===r;return A("div",{ref:BP([s]),className:N(DB.itemWrap,sL,cL,{[dL]:c===t||d,[uL]:u}),"data-handler-id":a,children:[k(D,{connect:l,src:YP}),k("div",{ref:o,className:DB.itemDragHandle,children:i&&k(PL,{name:"Menu",color:"#949494",style:Ej})}),k(Ij,w({},e))]})}function Ij(e){var t;const{item:n,logic:i=!1,onChange:r,open:o=!1,onOpen:s,onClose:a,storageService:l}=e,[c,d]=T.exports.useState(0),[u,h]=T.exports.useState(mj.cover),p=u===mj.tile,{size:f="100%",imageUrl:g="",colorStops:m,orientation:_,type:v,color:y}=n,x=v===bR.color?y:"",C=x?$(x).toHex():"",E=T.exports.useRef(new Map),{t:S}=WL();function I(e,t){!function(e){d(e)}(e),function(e,t){n.colorStops[e].length=`${t}%`,r(n)}(e,t)}const O=g?{backgroundImage:ZL(g)}:{},M=T.exports.useMemo((()=>n.type===bR.color?{backgroundColor:x}:n.type===bR.linear?{backgroundImage:OR(m,_)}:{backgroundImage:ZL(g||HP),backgroundSize:"cover"}),[n]),N="0%"!==n.size,R=k("div",{onClick:()=>{return e=!N,n.size=e?"100%":"0%",void r(n);var e},children:k(ej,{visible:N})}),D=k(sj,{onClick:function(){r(null),a()}}),P=T.exports.useMemo((()=>n.type===bR.color?C.toUpperCase():n.type===bR.linear?S("w.background.gradient"):S("w.background.pattern")),[n,C]);return A(ZB,{className:DB.bgRow,logic:i,active:o,children:[k($B,{triggerClass:DB.bgDesc,title:S("w.background.fill"),visible:o,onVisibleChange:function(e){e?s():a()},trigger:A(be,{children:[k(rj,{style:M}),k("div",{children:P})]}),content:A("div",{className:DB.tabs,children:[k(dj,{className:DB.singleLineField,selected:n.type,options:yj.map((e=>b(w({},e),{label:S(e.label)}))),onChange:function(e){const t=e;E.current.set(n.type,DR(n)),function(e){var t;const{colorStops:i,imageUrl:r="",orientation:o,color:s}=null!=(t=E.current.get(e))?t:{};e===bR.color?n.color=null!=s?s:ER.color:e===bR.image?n.imageUrl=r:(o&&(n.orientation=o),n.colorStops=null!=i?i:CR(xj.start,xj.end))}(t),n.type=t,r(n)},radioStyle:{padding:"13px 24px"}}),k(Oj,{selected:n.type===bR.color,children:k("div",{className:DB.tabContent,children:k(VB,{color:null!=x?x:wj.first,onChange:function(e){$D(n.type===bR.color,KD.internalError),n.color=e,r(n)},autofocusInput:!0})})}),k(Oj,{selected:n.type===bR.linear,children:A("div",{className:DB.tabContent,children:[k(he,{className:DB.linearSlider,min:0,max:100,step:1,labelVisibility:"none",variant:"range",click:function(){},style:{backgroundImage:OR(m,90)},children:m.map(((e,t)=>k(qB,{slot:"handle",value:parseInt(e.length),highlight:c===t,max:"next",min:"previous",onChange:e=>I(t,e),autofocus:0===t},t)))}),k(oB,{className:DB.clearFieldItemMargin,label:S("w.background.angle"),margin:"none",children:k(hB,{value:_,suffix:"°",onChange:function(e){n.orientation=XD(e),r(n)}})}),k(U,{}),k(VB,{color:null==(t=m[c])?void 0:t.color,onChange:function(e){n.colorStops[c].color=e,r(n)}})]})}),k(Oj,{selected:n.type===bR.image,children:A("div",{className:DB.tabContent,children:[k("div",{className:DB.imageUploader,style:O,children:k(ae,{variant:"primary",className:DB.uploadHandle,click:function(){aj().then((async e=>{const t=null==e?void 0:e.item(0);$D(t,KD.badRequest);const i=await(null==l?void 0:l.put(t));$D(i,KD.badRequest),n.imageUrl=i,r(n)}))},children:S("w.background.selectImage")})}),A("div",{children:[k(oB,{label:S("w.background.fillStyle"),margin:"none",children:A(xe,{className:DB.bgSizePicker,value:u,change:function(e){const{target:t,currentTarget:i}=e,o=e.target.value;t===i&&(h(o),o===mj.tile?(n.size="100%",n.repeat="repeat",n.position=ER.position):(n.size=o,n.repeat="no-repeat",n.position="center"),r(n))},children:[k(Ce,{value:mj.cover,children:S("w.background.fillStyle.cover")}),k(Ce,{value:mj.contain,children:S("w.background.fillStyle.contain")}),k(Ce,{value:mj.tile,children:S("w.background.fillStyle.tile")})]})}),p&&k(oB,{label:S("w.background.zoom"),children:k(hB,{value:parseInt(f),suffix:"%",onChange:function(e){n.size=e,r(n)}})})]})]})})]}),fitToConfigPanel:!0}),R,D]})}function Oj({selected:e,children:t}){return e?k("div",{children:t}):null}var Tj="_container_1smuc_1",Mj="_trigger_1smuc_5";function Nj(e){const t=e,{className:n,pickerClass:i,color:r="#000000",onChange:o,autofocusInput:s,visible:a,onVisibleChange:l}=t,c=x(t,["className","pickerClass","color","onChange","autofocusInput","visible","onVisibleChange"]),d=a&&l?{visible:a,onVisibleChange:l}:{};return k("div",b(w({className:N(Tj,n)},c),{children:k($B,w({title:"颜色",trigger:k("div",{className:Mj,style:{backgroundColor:r}}),content:k(VB,{className:i,color:r,onChange:o,autofocusInput:s}),fitToConfigPanel:!0},d))}))}var Aj,Rj,Dj={itemContainer:"_itemContainer_tatp2_1",borderPopTrigger:"_borderPopTrigger_tatp2_4",radioGroup:"_radioGroup_tatp2_7"};(Rj=Aj||(Aj={})).none="none",Rj.dotted="dotted",Rj.dashed="dashed",Rj.solid="solid",q.t("w.border.style.solid"),q.t("w.border.style.dashed");const Pj={[Aj.solid]:"w.border.style.solid",[Aj.dashed]:"w.border.style.dashed"},Lj={"border-width":"1px","border-color":"#000000","border-style":Aj.solid};var Uj=JF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=WL(),{"border-width":o="","border-style":s="","border-color":a=""}=t,l=[{label:r("w.border.style.solid"),value:Aj.solid},{label:r("w.border.style.dashed"),value:Aj.dashed}],c=o&&a,d=XD(o),u=!!a&&$(a).getAlpha()>0,[h,p]=T.exports.useState(!1),[f,g]=T.exports.useState(!1),m=Boolean((null==n?void 0:n["border-color"])||(null==n?void 0:n["border-width"]));return k("div",{className:Dj.container,children:k(oB,{label:r("w.border"),children:c?A(ZB,{logic:m,className:Dj.itemContainer,active:h||f,children:[k(Nj,{color:a,onChange:e=>i({"border-color":e}),autofocusInput:!0,visible:f,onVisibleChange:g}),k($B,{triggerClass:Dj.borderPopTrigger,title:r("w.border"),trigger:A(be,{children:[d,",",r(Pj[s])]}),content:A(T.exports.Fragment,{children:[k(oB,{label:r("w.border.style"),margin:"none",children:k(dj,{className:Dj.radioGroup,selected:s,options:l,onChange:e=>i({"border-style":e}),radioStyle:{padding:"4px 24px"}})}),k(oB,{label:r("w.border.width"),children:k(hB,{value:d,onChange:function(e){e=e.includes("px")?e:bP(e),i({"border-width":e})}})})]}),fitToConfigPanel:!0,visible:h,onVisibleChange:p}),k("div",{onClick:()=>function(e){const t=$(a);e?t.setAlpha(1):t.setAlpha(0),i({"border-color":t.toRgbString()})}(!u),children:k(ej,{visible:u})}),k(sj,{onClick:function(){i({"border-width":"","border-color":"","border-style":""})}})]}):k(tj,{onClick:function(){i(Lj)}})})})}));var Fj="_container_vaww1_1",Bj="_fieldContent_vaww1_11",jj="_itemWrap_vaww1_17",Vj="_itemDragHandle_vaww1_23",zj="_halfLineInput_vaww1_32",Kj="_singleLineInput_vaww1_36",Wj="_row_vaww1_40",Hj="_descTrigger_vaww1_43";const $j=/,(?![^\(]*\))/,qj=/\s(?![^(]*\))/,Yj=/^[0-9]+[a-zA-Z%]+?$/,Gj=e=>{const t=e.split(qj),n=t.includes("inset"),i=t.slice(-1)[0],r=Xj(i)?void 0:i,o=t.filter((e=>"inset"!==e)).filter((e=>e!==r)),[s,a,l,c]=o;return{inset:n,offsetX:s,offsetY:a,blurRadius:l,spreadRadius:c,color:r}},Xj=e=>"0"===e||Yj.test(e),Jj={offsetX:tP,offsetY:"4px",blurRadius:"4px",spreadRadius:tP,color:"rgba(0, 0, 0, 0.25)"};function Qj(e){return e.split($j).map((e=>e.trim())).filter(Boolean).map(Gj)}function Zj(e,t){const n=[];return e.forEach((e=>{const{offsetX:i,offsetY:r,blurRadius:o="",color:s}=e,a=t?"":e.spreadRadius;n.push(`${i} ${r} ${o} ${a} ${s}`)})),n.join(",")}var eV;(eV||(eV={})).shadow="shadow";var tV=JF((function(e){const{style:t,animationStyle:n,node:i,updateStyle:r}=e,[o,s]=T.exports.useState(-1),{t:a}=WL(),l=io(i),c=l?"text-shadow":"box-shadow",d=Qj(t[c]||""),u=d.length>1,h=Boolean(null==n?void 0:n[c]);function p(e){r({[c]:Zj(e,l)})}function f(e,t){const n=e.index,i=t.index;gj(d,n,i),p(d)}return k(hj,{children:k("div",{className:Fj,children:k(oB,{label:a("w.shadow"),labelStyle:{alignSelf:"start"},children:A("div",{className:Bj,children:[d.map(((e,t)=>k(nV,{logic:h,index:t,size:d.length,item:e,onChange:e=>{e?function(e,t){d[e]=t,p(d)}(t,e):function(e){d.splice(e,1),p(d)}(t)},open:o===t,onOpen:()=>function(e){s(e)}(t),onClose:()=>{s(-1)},onDrop:f,canDrag:u,isTextElement:l},t))),k(tj,{onClick:function(){d.unshift(w({},Jj)),p(d)}})]})})})})}));function nV(e){const{index:t,onDrop:n,canDrag:i,size:r}=e,o=T.exports.useRef(null),s=T.exports.useRef(null),{handlerId:a,previewRef:l,dropIndex:c}=fj({dragRef:o,dropRef:s,itemType:eV.shadow,index:t,onDrop:n,canDrag:i,size:r}),d=0===t&&0===c,u=t===r-1&&c===r;return A("div",{ref:BP([s]),className:N(jj,sL,cL,{[dL]:c===t||d,[uL]:u}),"data-handler-id":a,children:[k(D,{connect:l,src:YP}),k("div",{ref:o,className:Vj,children:i&&k(PL,{name:"Menu",color:"#949494",style:{width:12,height:12}})}),k(iV,w({},e))]})}function iV(e){const{t:t}=WL(),{item:n,logic:i=!1,onChange:r,open:o=!1,onOpen:s,onClose:a,isTextElement:l}=e,{offsetX:c,offsetY:d,blurRadius:u,spreadRadius:h,color:p}=n,[f,g]=T.exports.useState(!1);function m(e,t){n[t]=`${e}px`,r(n)}const _=T.exports.useMemo((()=>{const{a:e}=$(p).toRgb();return 0!==e}),[p]),v=k("div",{onClick:()=>function(e){const t=$(p);e?t.setAlpha(1):t.setAlpha(0),n.color=t.toRgbString(),r(n)}(!_),children:k(ej,{visible:_})}),y=k(sj,{onClick:function(){r(null),a()}}),w=T.exports.useMemo((()=>A("div",{children:[XD(c),", ",XD(d),", ",XD(u),", ",XD(h)]})),[n,v,y]);return A(ZB,{className:Wj,logic:i,active:o||f,children:[k(Nj,{color:p,onChange:function(e){n.color=e,r(n)},autofocusInput:!0,visible:f,onVisibleChange:g}),k($B,{triggerClass:Hj,title:t("w.shadow"),visible:o,onVisibleChange:function(e){e?s():a()},trigger:w,content:A("div",{children:[A(oB,{label:t("w.shadow.offset"),margin:"none",children:[k(hB,{className:zj,value:XD(c),onChange:e=>m(e,"offsetX")}),k(hB,{className:zj,value:XD(d),onChange:e=>m(e,"offsetY"),style:{marginLeft:"6px"}})]}),k(oB,{label:t("w.shadow.blur"),children:k(hB,{className:Kj,value:XD(u),onChange:e=>m(e,"blurRadius")})}),!l&&k(oB,{label:t("w.shadow.spread"),children:k(hB,{className:Kj,value:XD(h),onChange:e=>m(e,"spreadRadius")})})]}),fitToConfigPanel:!0}),v,y]})}var rV="_input_1l986_1";var oV=JF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=WL(),o=parseFloat((null==t?void 0:t.opacity)||"1"),s=Math.floor(100*o),a=Boolean(null==n?void 0:n.opacity);return k(oB,{label:r("w.opacity"),children:k(hB,{logic:a,className:rV,value:s,suffix:"%",onChange:function(e){const t=(Math.min(parseInt(e),100)/100).toString();i({opacity:t})}})})}));var sV,aV,lV="_singleInput_8qhdb_1",cV="_multiInputGroup_8qhdb_4",dV="_multiInput_8qhdb_4",uV="_divider_8qhdb_16",hV="_icon_8qhdb_22";(aV=sV||(sV={}))[aV.single=0]="single",aV[aV.multi=1]="multi",aV[aV.topLeft=2]="topLeft",aV[aV.topRight=3]="topRight",aV[aV.bottomRight=4]="bottomRight",aV[aV.bottomLeft=5]="bottomLeft";const pV={0:jP,1:GP,2:VP,3:zP,4:KP,5:WP};var fV=JF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=WL(),{"border-top-left-radius":o=tP,"border-top-right-radius":s=tP,"border-bottom-right-radius":a=tP,"border-bottom-left-radius":l=tP}=t,c=Boolean((null==n?void 0:n["border-top-left-radius"])||(null==n?void 0:n["border-top-right-radius"])||(null==n?void 0:n["border-bottom-right-radius"])||(null==n?void 0:n["border-bottom-left-radius"])),[d,u]=T.exports.useState(0),h=1===[...new Set([o,s,a,l])].length;function p(e,t){i({[e]:bP(t)})}function f(){u(1)}T.exports.useEffect((()=>{u(h?0:1)}),[]);const g=k("div",{className:uV});return A(oB,{label:r("w.roundedCorner"),children:[0===d?k(be,{children:k(hB,{logic:c,className:lV,value:h?XD(o):r("w.roundedCorner.multiple"),onChange:function(e){e=bP(e),i({"border-top-left-radius":e,"border-top-right-radius":e,"border-bottom-right-radius":e,"border-bottom-left-radius":e})}})}):A("div",{className:N(cV,sL,c?hL:""),children:[k(hB,{logic:c,className:dV,value:XD(o),onFocus:()=>u(2),onChange:e=>p("border-top-left-radius",e),onBlur:f}),g,k(hB,{logic:c,className:dV,value:XD(s),onFocus:()=>u(3),onChange:e=>p("border-top-right-radius",e),onBlur:f}),g,k(hB,{logic:c,className:dV,value:XD(a),onFocus:()=>u(4),onChange:e=>p("border-bottom-right-radius",e),onBlur:f}),g,k(hB,{logic:c,className:dV,value:XD(l),onFocus:()=>u(5),onChange:e=>p("border-bottom-left-radius",e),onBlur:f})]}),k(QB,{className:hV,src:pV[d],width:32,onClick:function(){u(0===d?1:0)}})]})}));q.t("w.display"),q.t("w.display.hidden"),q.t("w.display.scroll");var gV=JF((function(e){const{style:t,node:n,nodeStyle:i,animationStyle:r,updateStyle:o}=e,{t:s}=WL(),a=Boolean(r),l=T.exports.useMemo((()=>t.display||""),[n,t]),c=T.exports.useMemo((()=>a?i:t),[n,a]),d=T.exports.useMemo((()=>{const e=null==c?void 0:c.display;return(e===nP.none?null==c?void 0:c["--display-cache"]:e)||nP.block}),[c]),u=T.exports.useMemo((()=>[{value:d,label:"w.display.visible"},{value:nP.none,label:"w.display.hidden"}]),[d]),h=Boolean((null==r?void 0:r.display)&&!((null==r?void 0:r.display)===nP.block&&!t.display));return k(oB,{label:s("w.display"),margin:"none",children:k(dj,{logic:h,selected:l,options:u.map((e=>b(w({},e),{label:s(e.label)}))),onChange:e=>{const t={display:e};a||e!==nP.none||""===l||Reflect.set(t,"--display-cache",l),o(t)},radioStyle:{padding:"3px 23px"}})})})),mV={};var _V=JF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=WL(),o="backdrop-filter",s=T.exports.useMemo((()=>ZD(t[o]||"")),[t]),a=Boolean(null==n?void 0:n[o]),l=Boolean(n);return k(oB,{label:r("w.backdropFilter.blur"),children:k(be,{children:k(hB,{logic:a,className:mV.singleInput,value:s,onChange:function(e){!e||0!==parseInt(e)||l?i({[o]:eP(e)}):i({[o]:""})}})})})})),vV={};var yV=JF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=WL(),o="filter",s=T.exports.useMemo((()=>ZD(t.filter||"")),[t]),a=Boolean(null==n?void 0:n.filter);return k(oB,{label:r("w.filter.blur"),children:k(be,{children:k(hB,{logic:a,className:vV.singleInput,value:s,onChange:function(e){i(e?{[o]:eP(e)}:{[o]:""})}})})})}));var wV=JF((function(e){const{node:t,animationStyle:n}=e,{t:i}=WL(),r=ho(t),o=ro(t),s=ao(t),a=oo(t),l=o||s||a,c=Boolean(n);return A("div",{children:[!c&&k(_B,{children:i("w.appearance")}),k(gV,w({},e)),k(oV,w({},e)),!l&&k(kj,w({},e)),k(Uj,w({},e)),!r&&A(be,{children:[k(tV,w({},e)),k(fV,w({},e)),k(yV,w({},e)),k(_V,w({},e))]}),k(bB,{})]})}));var bV="_container_1xyd5_1",xV="_gap_1xyd5_3",CV="_wrapInput_1xyd5_6",kV="_halfInput_1xyd5_10",EV="_alignTypes_1xyd5_14",SV="_gapInputGroup_1xyd5_26";const IV=[{label:k(PL,{slot:"icon",name:"DirectionDown"}),value:iP.column},{label:k(PL,{slot:"icon",name:"DirectionRight"}),value:iP.row}],OV=Object.values({HorizTop:"HorizTop",HorizCenters:"HorizCenters",HorizBottom:"HorizBottom"}),TV=Object.values({VertLeft:"VertLeft",VertCenters:"VertCenters",VertRight:"VertRight"}),MV=new Array(9).fill(-1);var NV=JF((function(e){const{selection:t,style:n,node:i,updateStyle:r}=e,{"flex-wrap":o=rP.nowrap,"row-gap":s=tP,"column-gap":a=tP}=n,l=new LU,c=LU.showAutoLayout(t,i),d=LU.getContainerDirection(i.id),u=l.getContainerAlign(i.id),{t:h}=WL(),p=[{label:k("span",{children:h("w.autoLayout.wrap.wrap")}),value:rP.wrap},{label:k("span",{children:h("w.autoLayout.wrap.nowrap")}),value:rP.nowrap}];function f(e){r({"row-gap":bP(e)})}function g(e){r({"column-gap":bP(e)})}return A("div",{className:bV,children:[k(_B,{action:c?"delete":"add",variant:c?"primary":"secondary",onClick:c?function(){l.deleteAutoLayout(i.id)}:function(){l.addAutoLayout(t)},children:h("w.autoLayout")}),c&&A(be,{children:[A(oB,{label:h("w.autoLayout.direction"),contentStyle:{alignItems:"flex-start",gap:4},margin:"none",children:[k(dj,{className:CV,selected:d,options:IV,onChange:e=>{return t=e,void TD.transform((()=>{l.setContainerDirection(i.id,t)}));var t},radioStyle:{padding:"3px 8px"}}),k("div",{className:EV,style:{gridAutoFlow:d===iP.row?"column":"row"},children:MV.map(((e,t)=>{const n=((e,t)=>e===iP.row?OV[t%3]:TV[t%3])(d,t);return k(PL,{name:n,onClick:()=>{return e=t,void TD.transform((()=>{l.alignContainer(i.id,e)}));var e},color:u===t?"#000":"#E0E0E0",className:"icon"+t,style:{width:"14px",height:"14px"}},t+n)}))})]}),k(oB,{label:h("w.autoLayout.wrap"),className:xV,children:k(dj,{className:CV,selected:o,options:p,onChange:e=>{r({"flex-wrap":e})},radioStyle:{padding:"3px 11px"}})}),k(oB,{label:h("w.autoLayout.gap"),children:o===rP.wrap?A("div",{className:SV,children:[k(pB,{className:kV,value:XD(a),onChange:g,name:AL.SpacingHoriz}),k(pB,{className:kV,value:XD(s),onChange:f,name:AL.SpacingVert})]}):k(pB,{value:d===iP.row?XD(a):XD(s),onChange:d===iP.row?g:f,name:d===iP.row?AL.SpacingHoriz:AL.SpacingVert})})]}),k(bB,{})]})}));var AV="_iconList_1h8pg_1",RV="_item_1h8pg_8",DV="_itemDisabled_1h8pg_13";var PV=JF((function(e){const{selection:t}=e,n=new UF,i=t.length>1&&UF.isSameAncestor(t);function r(e){TD.transform((()=>{n.alignItems(t,e)}))}return A("div",{children:[A("div",{className:AV,children:[k(PL,{className:RV,name:"AlignLeft",onClick:()=>r(NF.left)}),k(PL,{name:"AlignHorizCenters",className:RV,onClick:()=>r(NF.horizontalCenter)}),k(PL,{className:RV,name:"AlignRight",onClick:()=>r(NF.right)}),k(PL,{className:RV,name:"AlignTop",onClick:()=>r(NF.top)}),k(PL,{className:RV,name:"AlignVertCenters",onClick:()=>r(NF.verticalCenter)}),k(PL,{className:RV,name:"AlignBottom",onClick:()=>r(NF.bottom)}),k(PL,{className:N({[RV]:!0,[DV]:!i}),name:"AlignArrangeHoriz",onClick:()=>r(NF.horizontalSpaceBetween)}),k(PL,{className:N({[RV]:!0,[DV]:!i}),name:"AlignArrangeVert",onClick:()=>r(NF.verticalSpaceBetween)})]}),k(bB,{})]})}));var LV={positionField:"_positionField_l0typ_1",positionWrap:"_positionWrap_l0typ_3",positionMid:"_positionMid_l0typ_10",positionInput:"_positionInput_l0typ_16",dockWrap:"_dockWrap_l0typ_20",dockBorder:"_dockBorder_l0typ_28",dockDirection:"_dockDirection_l0typ_38",dockTop:"_dockTop_l0typ_45",dockMid:"_dockMid_l0typ_50",dockLeft:"_dockLeft_l0typ_54",dockCenter:"_dockCenter_l0typ_57",dockRight:"_dockRight_l0typ_59",dockBottom:"_dockBottom_l0typ_63",dockPoint:"_dockPoint_l0typ_68",activeDockPoint:"_activeDockPoint_l0typ_76",centerDockPoint:"_centerDockPoint_l0typ_79",activeDockLine:"_activeDockLine_l0typ_89",activeDockLineY:"_activeDockLineY_l0typ_93",activeDockLineX:"_activeDockLineX_l0typ_98",rangeSizeTriggerDisabled:"_rangeSizeTriggerDisabled_l0typ_103",rangeSizeTrigger:"_rangeSizeTrigger_l0typ_103",rangeSizeInput:"_rangeSizeInput_l0typ_115",rangeSizeDivider:"_rangeSizeDivider_l0typ_118",sizeRatio:"_sizeRatio_l0typ_122",singleLineField:"_singleLineField_l0typ_130",halfInput:"_halfInput_l0typ_134",ratioIcon:"_ratioIcon_l0typ_138",ratioIconActive:"_ratioIconActive_l0typ_142",whInput:"_whInput_l0typ_147",sizeInput:"_sizeInput_l0typ_150",optionItem:"_optionItem_l0typ_154",picker:"_picker_l0typ_158",iconSlot:"_iconSlot_l0typ_161"};var UV,FV,BV="_container_1bh4e_1",jV="_field_1bh4e_11",VV="_picker_1bh4e_15";function zV(e){const t=T.exports.useRef(null),n=e,{value:i="",logic:r,options:o,onChange:s,children:a,style:l={},menuItemClass:c}=n,d=x(n,["value","logic","options","onChange","children","style","menuItemClass"]);return T.exports.useEffect((()=>{r&&Reflect.set(l,"--spectrum-picker-m-background-color","var(--spectrum-global-color-static-magenta-100)")}),[r]),T.exports.useEffect((()=>{t.current&&(t.current.value=i)}),[i]),A(xe,b(w({ref:t,style:l,value:i,change:s},d),{children:[o.map((e=>k(Ce,{className:c,value:e.value,disabled:e.disabled,children:e.label},e.value))),a]}))}q.t("w.unit.auto"),q.t("w.unit.fitContent"),q.t("w.unit.px"),q.t("w.unit.percentage"),q.t("w.unit.vw"),q.t("w.unit.vh"),q.t("w.unit.fillContainer"),(FV=UV||(UV={})).auto="w.unit.auto",FV.fitContent="w.unit.fitContent",FV.fillContainer="w.unit.fillContainer",FV.px="w.unit.px",FV["%"]="w.unit.percentage",FV.vw="w.unit.vw",FV.vh="w.unit.vh";const KV=[{value:fP.px,label:UV.px},{value:fP["%"],label:UV["%"]},{value:fP.vw,label:UV.vw},{value:fP.vh,label:UV.vh},{value:gP.auto,label:UV.auto},{value:gP.fitContent,label:UV.fitContent}];function WV(e){const t=e,{value:n="",units:i=xP,onChange:r,className:o,defaultValue:s,disabled:a,logic:l=!1,unitConverter:c,autofocus:d}=t,u=x(t,["value","units","onChange","className","defaultValue","disabled","logic","unitConverter","autofocus"]),h=i.length<=1||a,p=T.exports.useRef(null),{t:f}=WL(),[g,{setTrue:m,setFalse:_}]=j(!1),v=eU.isNone(n),y=eU.isAuto(n),C=eU.isFitContent(n),E=eU.getValueUnit(n),S=eU.getNumericValue(n),I=T.exports.useMemo((()=>v?"-":y?f(UV.auto):C?f(UV.fitContent):E===fP.px?S:`${S}${E}`),[v,y,E,S]),O=T.exports.useMemo((()=>v?"":y?f(UV.auto):C?f(UV.fitContent):Number.isNaN(S)?n:S),[n,S]),M=g?O:I;return A("div",b(w({className:N(BV,o)},u),{children:[k(hB,{className:jV,ref:p,logic:l,autofocus:d,focused:g,onBlur:_,onFocus:m,value:M,onChange:function(e){let t=E||fP.px;const i=eU.getValueUnit(e);if(t=null!=i?i:t,IP(e))null==r||r(e,e);else if(Number.isNaN(parseFloat(e)))null==r||r(n);else{const n=eU.fromValue(parseFloat(e),t);null==r||r(n,t)}},disabled:a}),!h&&k(zV,{className:VV,icons:"only",quiet:!0,logic:l,options:KV.filter((e=>i.includes(e.value))).map((e=>b(w({},e),{label:f(e.label)}))),onChange:function(e){var t;const n=null==(t=e.target)?void 0:t.value;if(CP.includes(n))null==r||r(n,n);else{const e=null==c?void 0:c(n),t=Number.isNaN(S)?0:S;null==r||r(null!=e?e:`${t}${n}`,n)}},disabled:a})]}))}class HV extends TF{static isItemDocked(e,t){const n=TD.getDeclaredStyle(e);return yr(n,t)}dockItem(e,t){const n={top:HV.isItemDocked(e,mr.top),right:HV.isItemDocked(e,mr.right),bottom:HV.isItemDocked(e,mr.bottom),left:HV.isItemDocked(e,mr.left)};if(t===mr.around){const e=!0;Object.assign(n,{top:e,right:e,bottom:e,left:e})}else Object.assign(n,{[t]:!0});const{view:i,model:r}=TD,o=i.getElementRectById(e),s=r.getNodeById(e),a=qV(n,o,i,!!s&&ho(s));TD.updateCurrentStyle(e,a)}undockItem(e,t){const n={top:HV.isItemDocked(e,mr.top),right:HV.isItemDocked(e,mr.right),bottom:HV.isItemDocked(e,mr.bottom),left:HV.isItemDocked(e,mr.left)};if(t===mr.none){const e=!1;Object.assign(n,{top:e,right:e,bottom:e,left:e})}else Object.assign(n,{[t]:!1});const{view:i,model:r}=TD,o=i.getElementRectById(e),s=r.getNodeById(e),a=qV(n,o,i,!!s&&ho(s));TD.updateCurrentStyle(e,a)}static isHorizontalDocked(e){return HV.isItemDocked(e,mr.left)&&HV.isItemDocked(e,mr.right)}static isVerticalDocked(e){return HV.isItemDocked(e,mr.top)&&HV.isItemDocked(e,mr.bottom)}}function $V(){const e={"margin-top":"","margin-right":"","margin-bottom":"","margin-left":"",top:"",right:"",bottom:"",left:""};return e}function qV(e,t,n,i){const{left:r,top:o,right:s,bottom:a}=e,{width:l,height:c}=t,{offsetTop:d,offsetRight:u,offsetBottom:h,offsetLeft:p}=function(e,t){const{logicWidth:n,logicHeight:i}=t.getViewport(),{left:r,top:o,bottom:s,right:a}=e;return{offsetTop:o,offsetBottom:i-s,offsetLeft:r,offsetRight:n-a}}(t,n),f=$V();return r&&s?(f.width="auto",f.left="0",f.right="0",f["margin-left"]=`${p}px`,f["margin-right"]=`${u}px`):s?(f.width=i?"100%":`${l}px`,f.right="0",f["margin-right"]=`${u}px`):(f.width=i?"100%":`${l}px`,f.left="0",f["margin-left"]=`${p}px`),o&&a?(f.height="auto",f.top="0",f.bottom="0",f["margin-top"]=`${d}px`,f["margin-bottom"]=`${h}px`):a?(f.height=`${c}px`,f.bottom="0",f["margin-bottom"]=`${h}px`):(f.height=`${c}px`,f.top="0",f["margin-top"]=`${d}px`),f}var YV,GV;(GV=YV||(YV={})).x="x",GV.y="y",GV.xy="xy";const XV=Object.values(fP);function JV(e){var t;const n=e,{value:i="",units:r=XV,onChange:o,logic:s=!1,className:a,disabled:l,unitConverter:c,options:d,inputStyle:u={},highlight:h}=n,p=x(n,["value","units","onChange","logic","className","disabled","unitConverter","options","inputStyle","highlight"]),f=r.length<=1||l,{t:g}=WL(),m=eU.isNone(i),_=eU.isAuto(i),v=eU.isFitContent(i),y=OP(i),C=TP(i),E=y===fP.px?void 0:y,S=null==(t=d.find((e=>e.value===(null!=y?y:i))))?void 0:t.icon,I=T.exports.useMemo((()=>m?"-":_?g(UV.auto):v?g(UV.fitContent):y===fP.px?C:Number.isNaN(C)?i:C),[i]);return A("div",b(w({className:N(LV.sizeInput,a)},p),{children:[k(hB,{tabIndex:-1,className:LV.whInput,value:I,onChange:function(e){let t=null!=y?y:fP.px;const n=eU.getValueUnit(e);if(t=null!=n?n:t,IP(e))null==o||o(e,e);else if(Number.isNaN(parseFloat(e)))null==o||o(i);else{const n=eU.fromValue(parseFloat(e),t);null==o||o(n,t)}},disabled:l,suffix:E,style:u,logic:s}),k(zV,{className:LV.picker,onChange:function(e){var t;const n=null==(t=e.target)?void 0:t.value;if(n===fP.fr)null==o||o("1fr",n);else if(CP.includes(n))null==o||o(n,n);else{const e=null==c?void 0:c(n),t=Number.isNaN(C)?0:C;null==o||o(null!=e?e:`${t}${n}`,n)}},disabled:f,options:d.filter((e=>r.includes(e.value))),icons:"only",logic:s,children:S&&k(PL,{className:LV.iconSlot,slot:"label",color:f?"rgba(0,0,0,0.24)":"#1F1F1F",name:S})})]}))}function QV(e){const{t:t}=WL();return A("div",{className:N(LV.optionItem,sL),children:[k(PL,{color:"#1F1F1F",slot:"icon",name:e.iconName}),k("span",{children:t(e.label)})]})}const ZV=[{value:fP.px,label:k(QV,{iconName:AL.WidthFixed,label:UV.px}),icon:AL.WidthFixed},{value:fP["%"],label:k(QV,{iconName:AL.WidthFill,label:UV["%"]}),icon:AL.WidthFill},{value:fP.vw,label:k(QV,{iconName:AL.WidthFill,label:UV.vw}),icon:AL.WidthFill},{value:fP.vh,label:k(QV,{iconName:AL.WidthFill,label:UV.vh}),icon:AL.WidthFill}],ez=[...ZV,{value:fP.fr,label:k(QV,{iconName:AL.WidthFill,label:UV.fillContainer}),icon:AL.WidthFill},{value:gP.auto,label:k(QV,{iconName:AL.WidthHug,label:UV.auto}),icon:AL.WidthHug},{value:gP.fitContent,label:k(QV,{iconName:AL.WidthHug,label:UV.fitContent}),icon:AL.WidthHug}],tz=[...ZV,{value:fP.fr,label:k(QV,{iconName:AL.HeightFill,label:UV.fillContainer}),icon:AL.HeightFill},{value:gP.auto,label:k(QV,{iconName:AL.HeightHug,label:UV.auto}),icon:AL.HeightHug},{value:gP.fitContent,label:k(QV,{iconName:AL.HeightHug,label:UV.fitContent}),icon:AL.HeightHug}],nz=[{label:"w.layout.scrollSnap.none",value:AP.none},{label:"w.layout.scrollSnap.proximity",value:AP.proximity},{label:"w.layout.scrollSnap.mandatory",value:AP.mandatory}],iz=[{label:"w.layout.scrollSnap.left",value:NP.start},{label:"w.layout.scrollSnap.center",value:NP.center},{label:"w.layout.scrollSnap.right",value:NP.end}];function rz(e){var t,n;const{t:i}=WL(),{style:r,node:o}=e,{"scroll-snap-type":s=AP.none}=r,a=tU(r)===sP.scroll,l=nz.map((e=>b(w({},e),{label:i(e.label)}))),c=iz.map((e=>b(w({},e),{label:i(e.label)}))),d=null!=(n=null==(t=TD.getSelectorStyleInCurrentVP(o.id,">","*"))?void 0:t["scroll-snap-align"])?n:NP.none,u=s!==AP.none;function h(e){const t=e.target.value;TD.transform((()=>{TD.updateCurrentStyle(o.id,{"scroll-snap-type":t}),d===NP.none&&p({"scroll-snap-align":NP.start})}))}function p(e){TD.model.updateStyle(o.id,e,TD.viewportWidth,">","*")}return a?k(oB,{label:i("w.layout.scrollSnap"),children:u?A(be,{children:[k(zV,{className:LV.halfInput,value:s,options:l,onChange:h}),k(zV,{className:LV.halfInput,value:d,options:c,onChange:function(e){const t=e.target.value;TD.transform((()=>{p({"scroll-snap-align":t})}))},style:{marginLeft:"4px"}})]}):k(zV,{className:LV.singleLineField,value:s,options:l,onChange:h})}):null}q.t("w.layout.scrollSnap"),q.t("w.layout.scrollSnap.none"),q.t("w.layout.scrollSnap.mandatory"),q.t("w.layout.scrollSnap.proximity"),q.t("w.layout.scrollSnap.left"),q.t("w.layout.scrollSnap.center"),q.t("w.layout.scrollSnap.right"),q.t("w.sizeType.flexible"),q.t("w.sizeType.static"),q.t("w.overflow.visible"),q.t("w.overflow.hidden"),q.t("w.overflow.scroll");const oz=[{value:sP.visible,label:"w.overflow.visible"},{value:sP.hidden,label:"w.overflow.hidden"},{value:sP.scroll,label:"w.overflow.scroll"}],sz={label:"垂直",value:YV.y},az=[{label:"水平",value:YV.x},sz,{label:"水平&垂直",value:YV.xy}];q.t("w.position.default"),q.t("w.position.fixed"),q.t("w.position.sticky");const lz=[{label:"w.position.default",value:"static"},{label:"w.position.fixed",value:"fixed"},{label:"w.position.sticky",value:"sticky"}];var cz,dz,uz,hz,pz,fz;function gz(e){const{style:t,updater:n,node:i}=e,r=Cz(),{t:o}=WL(),{width:s=gP.auto,height:a=gP.auto}=t,l=QL(s)||UF.isHorizontalDocked(i.id),c=QL(a)||UF.isVerticalDocked(i.id),d=l&&c;function u(e){return t=>{const i={[e]:t};n.updateStyle(i)}}return k($B,{trigger:k("div",{className:N(LV.rangeSizeTrigger,{[LV.rangeSizeTriggerDisabled]:d}),children:o("w.flexibleSize")}),content:A(be,{children:[A(oB,{label:o("w.flexibleSize.widthRange"),disabled:l,margin:"none",children:[k(kz,{className:LV.rangeSizeInput,value:t["min-width"],onChange:u("min-width"),unitConverter:r.width,disabled:l}),k("span",{className:LV.rangeSizeDivider,children:"—"}),k(kz,{className:LV.rangeSizeInput,value:t["max-width"],onChange:u("max-width"),unitConverter:r.width,disabled:l})]}),A(oB,{label:o("w.flexibleSize.heightRange"),disabled:c,children:[k(kz,{className:LV.rangeSizeInput,value:t["min-height"],onChange:u("min-height"),unitConverter:r.height,disabled:c}),k("span",{className:LV.rangeSizeDivider,children:"—"}),k(kz,{className:LV.rangeSizeInput,value:t["max-height"],onChange:u("max-height"),unitConverter:r.height,disabled:c})]})]}),disabled:d,title:o("w.flexibleSize"),fitToConfigPanel:!0})}(dz=cz||(cz={})).width="子项目宽度单位调整为像素",dz.height="子项目高度单位调整为像素",(hz=uz||(uz={})).width="自动排版宽度单位调整为像素",hz.height="自动排版高度单位调整为像素",(fz=pz||(pz={})).width="自动宽度单位调整为像素",fz.height="自动高度单位调整为像素";var mz,_z=JF((function(e){var t;const{style:n,node:i,updateStyle:r,addStyle:o,commitAndMerge:s}=e,a={updateStyle:r,addStyle:o,commitAndMerge:s},{width:l=gP.auto,height:c=gP.auto,"--overflow-direction":d=YV.xy,"aspect-ratio":u,top:h="0","flex-grow":p,"align-self":f}=n,{model:g}=TD,m=n.position||oP.none,_=m===oP.fixed,v=_?new HV:new UF,y=tU(n),x=ho(i),{handlePositionTypeChange:C,disabled:E}=function(e){const t=e=>e===oP.fixed,{view:n,model:i}=TD,{nodes:r}=z(AD),o=r.find((e=>uo(e))),s=r.find((e=>co(e))),a=UF.isItemDocked(e.id,mr.left),l=UF.isItemDocked(e.id,mr.right),c=UF.isItemDocked(e.id,mr.top),d=UF.isItemDocked(e.id,mr.bottom),u=r.filter((e=>ho(e))).filter((e=>"root"!==e.from)).length<=1&&ho(e),h=ho(e),p=()=>{const e=$V();return e["grid-row-start"]="",e["grid-row-end"]="",e["grid-column-start"]="",e["grid-column-end"]="",e},f=(e,t)=>{const{logicWidth:n,logicHeight:i}=t.getViewport(),{scrollX:r,scrollY:o}=t.scrolls,{left:s,top:u,width:p,height:f}=e,g=u-o,m=i-(g+f),_=s-r,v=n-(_+p),y={},w=!h&&l,b=!h&&d;return a&&w?(y.width=gP.auto,y.left="0",y.right="0",y["margin-left"]=`${_}px`,y["margin-right"]=`${v}px`):w?(y.width=`${p}px`,y.right="0",y["margin-right"]=`${v}px`):(y.width=h?"100%":`${p}px`,y.left="0",y["margin-left"]=`${_}px`),c&&b?(y.height=gP.auto,y.top="0",y.bottom="0",y["margin-top"]=`${g}px`,y["margin-bottom"]=`${m}px`):b?(y.height=`${f}px`,y.bottom="0",y["margin-bottom"]=`${m}px`):(y.height=`${f}px`,y.top="0",y["margin-top"]=`${g}px`),y};return{handlePositionTypeChange:(r,a)=>{var l;const c=n.getViewport(),d={position:a===oP.none?"":a};if(!t(r)&&!t(a))return a===oP.sticky&&(d.top="0px"),void TD.transform((()=>{i.updateAllBpStyles(e.id,d)}));if(Object.assign(d,p()),!t(r)&&t(a)){const t=n.getElementRectById(e.id),r=f(t,n);Object.assign(d,r),TD.transform((()=>{if(h){const t=n.getComputedStyleOfId(e.id),r=t["grid-row-start"],o=t["grid-row-end"];d["--grid-row-start"]=r,d["--grid-row-end"]=o,i.removeGridNode(s.id,e.id)}i.reparentNode(e.id,o.id),i.updateAllBpStyles(e.id,d)}))}else if(t(r)&&!t(a)){let t,r=null;const o=n.getElementRectById(e.id);if(h){const n=i.getMatchedStyle(e.id),a=n.attrs["--grid-row-start"]||"1",c=n.attrs["--grid-row-end"]||"2";$D(!!a&&!!c,KD.notFound);const{orders:u}=i.getChildrenGridAreaInfo(s.id),h=u.find((e=>{const{rowStart:t}=e.gridArea;return t>=parseInt(a)}));d["--grid-row-start"]="",d["--grid-row-end"]="",d.width="100%",d.height=`${o.height}px`,r=null!=(l=null==h?void 0:h.id)?l:null,t=s}else{const{scrollX:r,scrollY:a}=n.scrolls;Object.assign(o,{left:o.left+r,right:o.right+r,top:o.top+a,bottom:o.bottom+a});let l={x:o.left,y:o.top},u=TD.getContainerNodesFromViewPos(l).filter((e=>ho(e)));if(u.length<=0&&(l={x:0,y:o.top},u=TD.getContainerNodesFromViewPos(l).filter((e=>ho(e)))),u.length<=0){const{orders:e}=i.getChildrenGridAreaInfo(s.id),t=o.top<0?e.shift():e.pop();u=[i.getNodeById(null==t?void 0:t.id)]}if(u.length<=0)throw new Error("404");t=u[0];const h=i.getMatchedStyle(e.id,c.logicWidth).attrs,p=n.createStyleFromHitPosition(o,t,h);h.width&&!_P(h.width)||(p.width=`${o.width}px`),h.height&&!_P(h.height)||(p.height=`${o.height}px`),Object.assign(d,p)}a===oP.sticky&&(d.top="0px"),TD.transform((()=>{i.reparentNode(e.id,t.id,r),i.updateAllBpStyles(e.id,d),h&&i.insertGridNode(s.id,r,e.id,Ir.addForward)}))}},disabled:u}}(i),S=ro(i)||ao(i)||oo(i),I=io(i)||fo(i)||ho(i),O=I&&y===sP.scroll&&!io(i),M=T.exports.useMemo((()=>{if(x)return m===oP.fixed;const e=g.getParentNodeOfId(i.id);return!!e&&!LU.isAutoLayout(e.id)}),[i.id,m]),R=m===oP.sticky,D=function(e){return!Number.isNaN(parseFloat(e))}(u),P=D?"Locked":"Unlocked",L=T.exports.useMemo((()=>{const e=[...xP];return LU.isAutoLayout(i.id)||io(i)||so(i)?e.push(gP.fitContent):ho(i)&&e.push(gP.auto),e}),[i]),U=Cz(),{t:F}=WL(),B=T.exports.useMemo((()=>LU.isAutoLayoutItem(i.id)?[...L,fP.fr]:L),[L]),j=T.exports.useMemo((()=>LU.isAutoLayoutItem(i.id)?[...L,fP.fr]:L),[x,i,L]),V=T.exports.useMemo((()=>{if(LU.isAutoLayoutItem(i.id)){const e=TD.model.getParentNodeOfId(i.id),t=LU.getContainerDirection(e.id);if(t===iP.row&&LU.isItemGrowAtMainAxis(i.id))return`${p}fr`;if(t===iP.column&&LU.isItemGrowAtCounterAxis(i.id,"width"))return"1fr"}return yP(l)?gP.auto:l}),[i,l,f,p]),K=T.exports.useMemo((()=>{if(LU.isAutoLayoutItem(i.id)){const e=TD.model.getParentNodeOfId(i.id),t=LU.getContainerDirection(e.id);if(t===iP.column&&LU.isItemGrowAtMainAxis(i.id))return`${p}fr`;if(t===iP.row&&LU.isItemGrowAtCounterAxis(i.id,"height"))return"1fr"}return yP(c)?gP.auto:c}),[i,c,f,p]),W=T.exports.useMemo((()=>{var e;const t=null==(e=lz.find((e=>e.value===m)))?void 0:e.label;return F(t)}),[m]);return A("div",{className:LV.container,children:[k(_B,{children:F("w.layout")}),M&&k(be,{children:A("div",{className:LV.positionField,children:[k(eB,{children:F("w.layout.position")}),k(_?xz:bz,w({updater:a,layoutService:v},e))]})}),k(oB,{label:F("w.layout.positionType"),children:k(xe,{className:LV.singleLineField,value:m,change:e=>{C(m,e.target.value)},label:W,children:lz.map((e=>k(Ce,{value:e.value,disabled:e.value===oP.fixed&&E,children:F(e.label)},e.value)))})}),R&&k(oB,{label:F("w.layout.topOffset"),children:k(WV,{className:LV.singleLineField,value:h,onChange:function(e){e!==h&&r({top:e})},unitConverter:U.top})}),!x&&k(oB,{label:F("w.layout.width"),children:k(JV,{value:V,onChange:function(e,t){TD.transform((()=>{const n=_?HV:UF;eU.isAuto(l)&&e!==l&&n.isHorizontalDocked(i.id)&&v.undockItem(i.id,mr.right),t!==fP.fr?(LU.isWidthFillContainer(i.id)&&(console.log("取消 FR"),LU.unsetItemWidthFromFillContainer(i.id)),t===fP["%"]&&BU(i.id,"width")&&AB({message:uz.width}),e===gP.fitContent&&UU(i.id,"width")&&AB({message:cz.width}),TD.updateCurrentStyle(i.id,{width:e})):LU.setItemWidthToFillContainer(i.id,XD(e))&&AB({message:uz.width})}))},unitConverter:U.width,units:B,options:ez})}),A(oB,{label:F("w.layout.height"),contentStyle:{position:"relative"},children:[k(JV,{disabled:D,value:K,onChange:function(e,t){TD.transform((()=>{const n=_?HV:UF;if(eU.isAuto(c)&&e!==c&&n.isVerticalDocked(i.id)&&v.undockItem(i.id,mr.bottom),t!==fP.fr){if(LU.isHeightFillContainer(i.id)&&(console.log("取消 FR"),LU.unsetItemHeightFromFillContainer(i.id)),t===fP["%"]){const e=TD.model.getParentNodeOfId(i.id);e&&ho(e)&&function(e,t){const n=TD.model.getParentNodeOfId(e);return!!n&&(!!_P(TD.getDeclaredStyle(n.id)[t])&&(jU(n,t),!0))}(i.id,"height")?AB({message:pz.height}):BU(i.id,"height")&&AB({message:uz.height})}var r,o;x&&e===gP.auto&&(r=i.id,o="height",TD.model.getChildrenNodesOfId(r).some((e=>!!FU(e.id,o)&&(TD.updateCurrentStyle(e.id,{[o]:IU(e.id,o,fP.px)}),!0))))&&AB({message:cz.height}),e===gP.fitContent&&UU(i.id,"height")&&AB({message:cz.height}),S&&!D?TD.updateCurrentStyle(i.id,{height:e||c}):TD.updateCurrentStyle(i.id,{height:e})}else LU.setItemHeightToFillContainer(i.id,XD(e))&&AB({message:uz.height})}))},units:j,unitConverter:U.height,options:tz}),S&&A("div",{className:N(LV.sizeRatio,sL),onClick:function(){const e={},{width:t,height:n}=TD.getComputedStyleOfId(i.id);D?(e["aspect-ratio"]="auto",e.height=n):(e["aspect-ratio"]=""+XD(t)/XD(n),e.height=gP.auto),r(e)},children:[k(QB,{src:$P,width:8}),k(PL,{className:N(LV.ratioIcon,{[LV.ratioIconActive]:D}),name:P},P),k(QB,{src:qP,width:8})]})]}),k(oB,{children:k(gz,b(w({},e),{updater:a}))}),I&&k(oB,{label:F("w.layout.overflow"),children:k(dj,{className:LV.singleLineField,selected:y,options:oz.map((e=>b(w({},e),{label:F(e.label)}))),onChange:function(e){const t={};d===YV.x?t["overflow-x"]=e:(d===YV.y||(t["overflow-x"]=e),t["overflow-y"]=e),r(t)},radioStyle:{padding:"3px 11px"}})}),O&&k(oB,{label:F("w.layout.scrollDirection"),children:k(xe,{className:LV.singleLineField,value:d,change:function(e){const t=e.target.value,n={"--overflow-direction":t};t===YV.x?(n["overflow-x"]=y,n["overflow-y"]=sP.hidden):t===YV.y?(n["overflow-x"]=sP.hidden,n["overflow-y"]=y):(n["overflow-x"]=y,n["overflow-y"]=y),r(n)},label:null==(t=az.find((e=>e.value===d)))?void 0:t.label,children:az.map((e=>k(Ce,{value:e.value,children:e.label},e.value)))})}),k(rz,w({},e)),k(bB,{})]})}));function vz(e){const t=e,{active:n=!1}=t,i=x(t,["active"]);return k("div",w({className:N({[LV.dockPoint]:!0,[LV.activeDockPoint]:n})},i))}function yz(e){return k("div",w({className:N({[LV.centerDockPoint]:!0})},e))}function wz(e){const{direction:t}=e;return k("div",{className:N({[LV.activeDockLine]:!0,[LV.activeDockLineX]:0===t,[LV.activeDockLineY]:1===t})})}function bz(e){const{style:t,updater:n,node:i,layoutService:r}=e,o=UF.isItemDocked(i.id,mr.left),s=UF.isItemDocked(i.id,mr.right),a=UF.isItemDocked(i.id,mr.top),l=UF.isItemDocked(i.id,mr.bottom),c=Cz();function d(e){TD.transform((()=>{UF.isItemDocked(i.id,e)?r.undockItem(i.id,e):r.dockItem(i.id,e)}))}return A("div",{className:LV.positionWrap,children:[k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-top"],onChange:e=>n.updateStyle({"margin-top":e}),unitConverter:c.marginTop}),A("div",{className:LV.positionMid,children:[k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-left"],onChange:e=>n.updateStyle({"margin-left":e}),unitConverter:c.marginLeft}),A("div",{className:LV.dockWrap,children:[k("div",{className:LV.dockBorder}),A("div",{className:N(LV.dockTop,LV.dockDirection),onClick:()=>d(mr.top),children:[k(vz,{active:a}),a&&k(wz,{direction:1})]}),A("div",{className:LV.dockMid,children:[A("div",{className:N(LV.dockLeft,LV.dockDirection),onClick:()=>d(mr.left),children:[k(vz,{active:o}),o&&k(wz,{direction:0})]}),k("div",{className:N(LV.dockCenter,LV.dockDirection),onClick:function(){TD.transform((()=>{UF.isItemDocked(i.id,mr.none)?r.dockItem(i.id,mr.around):r.undockItem(i.id,mr.none)}))},children:k(yz,{})}),A("div",{className:N(LV.dockRight,LV.dockDirection),onClick:()=>d(mr.right),children:[s&&k(wz,{direction:0}),k(vz,{active:s})]})]}),A("div",{className:N(LV.dockBottom,LV.dockDirection),onClick:()=>d(mr.bottom),children:[l&&k(wz,{direction:1}),k(vz,{active:l})]})]}),k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-right"],onChange:e=>n.updateStyle({"margin-right":e}),unitConverter:c.marginRight})]}),k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-bottom"],onChange:e=>n.updateStyle({"margin-bottom":e}),unitConverter:c.marginBottom})]})}function xz(e){const{style:t,updater:n,node:i,layoutService:r}=e,o=HV.isItemDocked(i.id,mr.left),s=HV.isItemDocked(i.id,mr.right),a=HV.isItemDocked(i.id,mr.top),l=HV.isItemDocked(i.id,mr.bottom),c=Cz(),d=ho(i);function u(e){TD.transform((()=>{HV.isItemDocked(i.id,e)?r.undockItem(i.id,e):r.dockItem(i.id,e)}))}return A("div",{className:LV.positionWrap,children:[k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-top"],onChange:e=>n.updateStyle({"margin-top":e}),unitConverter:c.marginTop}),A("div",{className:LV.positionMid,children:[k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-left"],onChange:e=>n.updateStyle({"margin-left":e}),unitConverter:c.marginLeft,disabled:d}),A("div",{className:LV.dockWrap,children:[k("div",{className:LV.dockBorder}),A("div",{className:N(LV.dockTop,LV.dockDirection),onClick:()=>u(mr.top),children:[k(vz,{active:a}),a&&k(wz,{direction:1})]}),A("div",{className:LV.dockMid,children:[A("div",{className:N(LV.dockLeft,LV.dockDirection),onClick:()=>u(mr.left),children:[k(vz,{active:o}),o&&k(wz,{direction:0})]}),k("div",{className:N(LV.dockCenter,LV.dockDirection),onClick:function(){TD.transform((()=>{HV.isItemDocked(i.id,mr.around)?r.undockItem(i.id,mr.none):r.dockItem(i.id,mr.around)}))},children:k(yz,{})}),A("div",{className:N(LV.dockRight,LV.dockDirection),onClick:()=>u(mr.right),children:[s&&k(wz,{direction:0}),k(vz,{active:s})]})]}),A("div",{className:N(LV.dockBottom,LV.dockDirection),onClick:()=>u(mr.bottom),children:[l&&k(wz,{direction:1}),k(vz,{active:l})]})]}),k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-right"],onChange:e=>n.updateStyle({"margin-right":e}),unitConverter:c.marginRight,disabled:d})]}),k(kz,{className:LV.positionInput,value:null==t?void 0:t["margin-bottom"],onChange:e=>n.updateStyle({"margin-bottom":e}),unitConverter:c.marginBottom})]})}function Cz(){return{top:OU("top"),width:OU("width"),height:OU("height"),marginTop:OU("margin-top"),marginRight:OU("margin-right"),marginBottom:OU("margin-bottom"),marginLeft:OU("margin-left")}}function kz(e){return k(WV,w({units:xP},e))}!function(e){e[e.x=0]="x",e[e.y=1]="y"}(mz||(mz={}));var Ez="_container_d9pil_1",Sz="_fieldGroup_d9pil_4",Iz="_mid_d9pil_10",Oz="_field_d9pil_4",Tz="_lockIcon_d9pil_19",Mz="_lockIconActive_d9pil_26",Nz="_iconActive_d9pil_30";function Az(e){return k(WV,w({units:xP},e))}var Rz=JF((function(e){const{style:t,updateStyle:n}=e,{"padding-top":i="","padding-right":r="","padding-bottom":o="","padding-left":s=""}=t,a=[i,r,o,s].some((e=>!eU.isNone(e))),[l,c]=T.exports.useState(!0),d=l?"Locked":"Unlocked",u={paddingTop:OU("padding-top"),paddingRight:OU("padding-right"),paddingBottom:OU("padding-bottom"),paddingLeft:OU("padding-left")},{t:h}=WL();function p(e){n({"padding-top":e,"padding-right":e,"padding-bottom":e,"padding-left":e})}function f(e,t){l?p(e):n({[t]:e})}return A("div",a?{className:Ez,children:[k(_B,{action:"delete",onClick:function(){p("")},children:h("w.padding")}),A("div",{className:Sz,children:[k(Az,{className:Oz,value:i,onChange:e=>f(e,"padding-top"),unitConverter:u.paddingTop}),A("div",{className:Iz,children:[k(Az,{className:Oz,value:s,onChange:e=>f(e,"padding-left"),unitConverter:u.paddingLeft}),k("div",{className:N(Tz,sL,{[Mz]:l}),onClick:()=>c(!l),children:k(PL,{className:N({[Nz]:l}),name:d},d)}),k(Az,{className:Oz,value:r,onChange:e=>f(e,"padding-right"),unitConverter:u.paddingRight})]}),k(Az,{className:Oz,value:o,onChange:e=>f(e,"padding-bottom"),unitConverter:u.paddingBottom})]}),k(bB,{})]}:{className:Ez,children:[k(_B,{variant:"secondary",action:"add",onClick:function(){p(bP(16))},children:h("w.padding")}),k(bB,{})]})}));var Dz,Pz,Lz,Uz,Fz,Bz,jz,Vz,zz="_container_smv5h_1",Kz="_colorWrap_smv5h_3",Wz="_fontWeightPicker_smv5h_12",Hz="_fullInput_smv5h_15",$z="_spaceInput_smv5h_18",qz="_radioGroup_smv5h_26",Yz="_textDecorationIconActive_smv5h_34",Gz="_moreOption_smv5h_37";(Pz=Dz||(Dz={})).left="left",Pz.right="right",Pz.center="center",Pz.justify="justify",(Uz=Lz||(Lz={})).top="flex-start",Uz.middle="center",Uz.bottom="flex-end",(Bz=Fz||(Fz={})).bold="bold",Bz.italic="italic",Bz.underline="underline",Bz.lineThrough="line-through",Bz.none="none",(Vz=jz||(jz={})).decimal="decimal",Vz.disc="disc",Vz.none="none";const Xz={thin:"100",light:"300",regular:"400",medium:"500",bold:"700"};class Jz{constructor(e){C(this,"updater"),this.updater=e}setFontFamily(e){this.updater.updateStyle({"font-family":e})}setFontWeight(e){this.updater.updateStyle({"font-weight":e})}setFontColor(e){this.updater.updateStyle({color:e})}setFontSize(e){this.updater.updateStyle({"font-size":e})}isDynamicFontSize(e){return Boolean(e["--font-size-min"]&&e["--font-size-max"])}setDynamicFontSize(e,t){const n=parseInt(e),i=(({minSize:e,maxSize:t,maxWidth:n})=>{const i="calc( var(--font-size-min) * 1px )";return{"--font-size-min":`${e}`,"--font-size-max":`${t}`,"--font-size-max-width":`${n}`,"font-size":`clamp(${i},calc( calc( var(--font-size-max) - var(--font-size-min) ) * calc( (100vw - calc( var(--font-size-min-width) * 1px )) / calc( var(--font-size-max-width) - var(--font-size-min-width) ) ) + ${i} ),calc( var(--font-size-max) * 1px ))`}})({minSize:n,maxSize:n,maxWidth:t});this.updater.updateStyle(i)}unsetDynamicFontSize(e){const t=b(w({},xU),{"font-size":bP(e)});this.updater.updateStyle(t)}updateDynamicFontSize(e,t){const[n,i]=e.map((e=>parseInt(e))),r=Math.max(n,i),o=Math.min(n,i);this.updater.updateStyle({"--font-size-max":`${r}`,"--font-size-min":`${o}`,"--font-size-max-width":`${t}`})}setInlineAlign(e){this.updater.updateStyle({"text-align":e})}setBlockAlign(e){let t="";switch(e){case Lz.bottom:t="flex-end";break;case Lz.middle:t="center";break;case Lz.top:t="flex-start";break;default:On()}this.updater.updateStyle({"justify-content":t,"align-items":"center",display:"flex","flex-direction":"column"})}setLineHeight(e){this.updater.updateStyle({"line-height":e})}setLetterSpacing(e){this.updater.updateStyle({"letter-spacing":e})}getTextDecorationOverride(e,t){const n={},i=this.isTextDecorationActive(e,t);return t===Fz.bold?n["font-weight"]=i?Xz.regular:Xz.bold:t===Fz.italic?n["font-style"]=i?RP.fontStyle:t:t===Fz.underline||t===Fz.lineThrough?n["text-decoration-line"]=i?RP.textDecorationLine:t:console.error(KD.badRequest),n}toggleTextDecoration(e,t){const n=this.getTextDecorationOverride(e,t);this.updater.updateStyle(n)}isTextDecorationActive(e,t){const{"font-weight":n,"font-style":i,"text-decoration-line":r}=e;return t===Fz.bold?n===Xz.bold:t===Fz.italic?i===Fz.italic:t===Fz.underline?r===Fz.underline:t===Fz.lineThrough?r===Fz.lineThrough:void console.error(KD.badRequest)}setListType(e){On()}getListType(){On()}}var Qz="_option_1c1l9_1";function Zz(e){const t=e,{children:n,disabled:i,title:r}=t,o=x(t,["children","disabled","title"]);return k($B,w({trigger:k(ke,{quiet:!0,className:Qz,disabled:i,children:k(PL,{slot:"icon",name:"MoreHoriz"})}),content:n,disabled:i,title:r,fitToConfigPanel:!0},o))}var eK="_group_eqwbn_1",tK="_groupOptionDivider_eqwbn_3";const nK={indicatorSeparator:(e,t)=>b(w({},e),{display:"none"}),dropdownIndicator:(e,t)=>b(w({},e),{color:"#1F1F1F"}),groupHeading:(e,t)=>b(w({},e),{fontWeight:600,fontSize:"12px",color:"#C2C2C2",paddingBottom:"4px"}),menuList:(e,t)=>b(w({},e),{padding:"8px"}),container:(e,t)=>b(w({},e),{height:"32px",minHeight:"32px"}),control:(e,t)=>b(w({},e),{height:"32px",minHeight:"32px",alignContent:"center",borderWidth:"0px",background:"#F5F5F5",borderRadius:"6px"}),menu:(e,t)=>b(w({},e),{borderRadius:"12px",boxShadow:"0px 0px 1px rgba(0, 0, 0, 0.16), 0px 6px 32px 4px rgba(0, 0, 0, 0.08)",zIndex:10}),option:(e,t)=>b(w({},e),{backgroundColor:t.isFocused||t.isSelected?"var(--spectrum-global-color-gray-300)":e.backgroundColor,borderRadius:"6px",overflow:"hidden"})},iK=e=>{const{children:t,isSelected:n,innerRef:i,innerProps:r}=e,o=e.getStyles("option",e);return A("div",b(w({ref:i},r),{style:b(w({},o),{display:"flex",justifyContent:"space-between"}),children:[k("div",{children:t}),n&&k(PL,{name:"Done",color:"var(--spectrum-global-color-gray-900)"})]}))},rK=e=>A("div",{className:eK,children:[k(Se.Group,w({},e)),k(U,{className:tK})]});function oK(e){const t=e,{className:n,components:i}=t,r=x(t,["className","components"]);return k(Ee,w({placeholder:"",className:N(n),styles:nK,theme:e=>b(w({},e),{colors:w({},e.colors)}),components:w({Option:iK,Group:rK},i)},r))}const sK=Ie.create({name:"doc",topNode:!0,content:"block+"}),aK=Ie.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",addAttributes:()=>({}),parseHTML:()=>[{tag:"p",getAttrs:e=>({})}],renderHTML({node:e,HTMLAttributes:t}){return["p",w({},Oe(this.options.HTMLAttributes,t)),0]}}),lK=Ie.create({name:"text",group:"inline"});function cK(e){return{default:null,parseHTML:t=>{var n;return null==(n=t.style.getPropertyValue(e))?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>{const n=t[e];return n?{style:`${e}: ${n}`}:{}},keepOnSplit:!0}}const dK=Te.create({name:"textStyleImpl",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{color:cK("color"),"font-size":cK("font-size"),"font-family":cK("font-family"),"font-weight":cK("font-weight"),"font-style":cK("font-style"),"text-decoration-line":cK("text-decoration-line"),"line-height":cK("line-height"),"letter-spacing":cK("letter-spacing")}}],addCommands:()=>({setStyle:e=>({chain:t,commands:n})=>{const{"text-align":i}=e;return $t(i)?i?n.setTextAlign(i):n.unsetTextAlign():t().setMark("textStyle",e).removeEmptyTextStyle().run()}})}),uK=[1,2,3,4,5,6],hK=Ie.create({name:"heading",content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML:()=>uK.map((e=>({tag:`h${e}`,attrs:{level:e}}))),renderHTML({node:e,HTMLAttributes:t}){return[`h${uK.includes(e.attrs.level)?e.attrs.level:uK[0]}`,Oe(this.options.HTMLAttributes,t),0]},addInputRules(){return uK.map((e=>Me({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}}),pK=Ie.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",Oe(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:i})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:r}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=i.extensionManager,a=r||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&o){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.setHardBreak()}}}),fK=new DOMParser;var gK,mK;(mK=gK||(gK={})).orderedList="orderedList",mK.bulletList="bulletList";class _K extends Jz{constructor(e,t){super(e),C(this,"node"),C(this,"_stashOnUpdate"),this.node=t}static get isTextRangeSelected(){const e=TD.richTextEditor;if(!e)return!1;const{from:t,to:n}=e.state.selection;return e.getCharacterCount()!==n-t}static get isAllTextSelected(){return!this.isTextRangeSelected}setRangeTextStyle(e){const t=TD.richTextEditor;return null==t?void 0:t.chain().focus().setStyle(e).run()}stashTextEditorUpdate(e){e&&(this._stashOnUpdate=e.options.onUpdate,e.off("update",this._stashOnUpdate))}popTextEditorUpdate(e){e&&e.on("update",this._stashOnUpdate)}createOffscreenRichTextEditor(){const e=function(e){const t=document.createElement(e);return t.style.position="fixed",t.style.top="-100000px",t.style.left="-100000px",t}("div");document.body.append(e);const t=TD.view.getElementById(this.node.id);qD(t);const n=function(e,t,n,i=fD){const r=new Ne({element:e,extensions:[Ae,pK,sK,aK,hK,lK,Re,dK,De.configure({types:["paragraph"],alignments:["left","center","right","justify"],defaultAlignment:""}),Pe.configure({itemTypeName:"listItem",HTMLAttributes:{}}),Le.configure({itemTypeName:"listItem",HTMLAttributes:{}}),Ue],content:t.innerHTML,onUpdate({editor:e}){const t=fK.parseFromString(e.getHTML(),"text/html");Array.from(t.body.children).forEach((e=>{var n;if(0===e.childNodes.length&&(e.innerHTML="&#8203;"),"BR"===(null==(n=e.lastElementChild)?void 0:n.tagName)){const n=t.createElement("br");n.className="trailingBreak",e.appendChild(n)}})),n(t.body.innerHTML)},onDestroy:i}),o=t.className.split(/\s/i);return r.view.dom.classList.add(...o),r}(e,t,fD);return n.commands.selectAll(),n}removeAllTextStyle(e){var t;const n=this.createOffscreenRichTextEditor();n.chain().focus().setStyle(e).run();const i=n.getHTML();return null==(t=n.view.dom.parentElement)||t.remove(),n.destroy(),i}updateNodeContent(e){this.stashTextEditorUpdate(TD.richTextEditor),TD.model.updateNodeById(this.node.id,{content:e}),this.popTextEditorUpdate(TD.richTextEditor)}removeContentStyle(e){const t=this.removeAllTextStyle(e);this.updateNodeContent(t)}setFontFamily(e){_K.isAllTextSelected?TD.transform((()=>{super.setFontFamily(e),this.removeContentStyle({"font-family":""})})):this.setRangeTextStyle({"font-family":e})}setFontWeight(e){_K.isAllTextSelected?TD.transform((()=>{super.setFontWeight(e),this.removeContentStyle({"font-weight":""})})):this.setRangeTextStyle({"font-weight":e})}setFontColor(e){_K.isAllTextSelected?TD.transform((()=>{super.setFontColor(e),this.removeContentStyle({color:""})})):this.setRangeTextStyle({color:e})}setFontSize(e){_K.isAllTextSelected?TD.transform((()=>{super.setFontSize(e),this.removeContentStyle({"font-size":""})})):this.setRangeTextStyle({"font-size":e})}isDynamicFontSize(e){return Boolean(e["--font-size-min"]&&e["--font-size-max"])}setDynamicFontSize(e,t){_K.isAllTextSelected&&TD.transform((()=>{super.setDynamicFontSize(e,t),this.removeContentStyle({"font-size":""})}))}unsetDynamicFontSize(e){_K.isAllTextSelected&&TD.transform((()=>{super.unsetDynamicFontSize(e),this.removeContentStyle({"font-size":""})}))}updateDynamicFontSize(e,t){_K.isAllTextSelected&&TD.transform((()=>{super.updateDynamicFontSize(e,t)}))}setInlineAlign(e){_K.isAllTextSelected?TD.transform((()=>{super.setInlineAlign(e),this.removeContentStyle({"text-align":""})})):this.setRangeTextStyle({"text-align":e})}setBlockAlign(e){_K.isAllTextSelected&&TD.transform((()=>{super.setBlockAlign(e)}))}setLineHeight(e){_K.isAllTextSelected?TD.transform((()=>{super.setLineHeight(e),this.removeContentStyle({"line-height":""})})):this.setRangeTextStyle({"line-height":e})}setLetterSpacing(e){_K.isAllTextSelected?TD.transform((()=>{super.setLetterSpacing(e),this.removeContentStyle({"letter-spacing":""})})):this.setRangeTextStyle({"letter-spacing":e})}toggleTextDecoration(e,t){const n=super.getTextDecorationOverride(e,t);_K.isAllTextSelected?TD.transform((()=>{super.toggleTextDecoration(e,t);const i=function(e,t){e=DR(e);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=t);return e}(n,"");this.removeContentStyle(i)})):this.setRangeTextStyle(n)}doSetListType(e){var t;const n=null!=(t=TD.richTextEditor)?t:this.createOffscreenRichTextEditor(),i=()=>n.chain().focus().toggleOrderedList().run(),r=()=>n.chain().focus().toggleBulletList().run();switch(e){case jz.decimal:i();break;case jz.disc:r();break;case jz.none:n.isActive(gK.bulletList)?r():i();break;default:On()}return n.getHTML()}getListType(){const e=TD.richTextEditor;return e?e.isActive(gK.bulletList)?jz.disc:e.isActive(gK.orderedList)?jz.decimal:jz.none:jz.none}setListType(e){if(TD.richTextEditor)this.doSetListType(e);else{const t=this.doSetListType(e);this.updateNodeContent(t)}}}function vK(){const[e,t]=we(!1);return G(TD.onEditorCreated.type,(()=>{t(!0)}),{target:window}),e}var yK="_fontSizeInput_bl81w_1",wK="_fontSizeInputDynamic_bl81w_5",bK="_bar_bl81w_9",xK="_toggleBtn_bl81w_13";const CK={b1:1e3,b2:750,default:1920};function kK(e){const{style:t,animationStyle:n,styleChangedMap:i,textService:r}=e,o=z(jD),s=z(PD),{model:a}=TD,l=T.exports.useMemo((()=>{const{styles:e}=a.getValue(),n=e.find((e=>e.targetId===(null==o?void 0:o.id)&&(null==e?void 0:e.breakpointId)===(null==s?void 0:s.id)));return(null==n?void 0:n["font-size"])?n:t}),[o,s,t]),c=T.exports.useMemo((()=>r.isDynamicFontSize(l)),[l,t]),{"font-size":d,"--font-size-max":u=d,"--font-size-min":h=d}=l,{t:p}=WL(),f=Fe((e=>{if(c){const t=s?CK[s.id]:CK.default;r.updateDynamicFontSize(e,t)}else r.setFontSize(e)})),g=Fe((()=>{if(c)r.unsetDynamicFontSize(u);else{const e=s?CK[s.id]:CK.default;r.setDynamicFontSize(d,e)}})),m=Boolean(n);return A(oB,{label:p("w.text.fontSize"),children:[c?A(T.exports.Fragment,{children:[k(WV,{logic:i["--font-size-min"],className:wK,value:bP(h),onChange:e=>{f([e,u])},units:[fP.px]}),k("i",{className:bK,children:"-"}),k(WV,{logic:i["--font-size-max"],className:wK,value:bP(u),onChange:e=>{f([h,e])},units:[fP.px]})]}):k(WV,{logic:i["font-size"],className:yK,value:d,onChange:f,units:[fP.px]}),k(ke,{className:xK,disabled:m,selected:c,onClick:g,children:k(PL,{name:"TextScale"})})]})}function EK(e){const{show:t,children:n}=e;return t?k(T.exports.Fragment,{children:n}):null}const SK=[bU].map((e=>({label:e.name,value:e.value,locales:e.locales}))),IK=Object.keys(Xz).map((e=>({value:Xz[e],label:e}))),OK=[{value:Dz.left,label:k(PL,{name:"FormatLeft"})},{value:Dz.center,label:k(PL,{name:"FormatCenter"})},{value:Dz.right,label:k(PL,{name:"FormatRight"})},{value:Dz.justify,label:k(PL,{name:"FormatJustified"})}],TK=[{value:Lz.top,label:k(PL,{name:"FormatAlignTop"})},{value:Lz.middle,label:k(PL,{name:"FormatAlignMedium"})},{value:Lz.bottom,label:k(PL,{name:"FormatAlignBottom"})}],MK=[{value:Fz.bold,iconName:"TextBold"},{value:Fz.italic,iconName:"TextItaly"},{value:Fz.underline,iconName:"TextUnderline"},{value:Fz.lineThrough,iconName:"TextDeleteline"}],NK=[{value:jz.none,label:k("div",{children:"-"})},{value:jz.disc,label:k(PL,{name:"FormatListBulleted"})},{value:jz.decimal,label:k(PL,{name:"FormatListNumbered"})}],AK=(e,t)=>e.label.toLowerCase().includes(t.toLowerCase()),RK={marginLeft:"4px"};var DK=JF((function(e){const{node:t,animationStyle:n,updateStyle:i,addStyle:r}=e,o={addStyle:r,updateStyle:i},{t:s}=WL(),a=Boolean(n),l=function(e){const{style:t,node:n}=e,[i,r]=T.exports.useState({}),o=TD.richTextEditor,s=function(){const[e,t]=T.exports.useState(!1),n=vK();return T.exports.useEffect((()=>{TD.editor.onTextEditorCreated((()=>{t(!!TD.richTextEditor)}))}),[n]),e}(),a=Fe((()=>{if(!o)return;const e=o.getAttributes("textStyle"),t=function(e){e=DR(e);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];delete e[t],e[ZR(t)]=n}return e}(o.getAttributes("paragraph"));r(UK(t,e))}));return T.exports.useEffect((()=>{if(o)return a(),o.on("update",a),o.on("selectionUpdate",a),()=>{o.off("update",a),o.off("selectionUpdate",a)}}),[s,o]),n&&t?UK(w({},t),i):{}}(e),{"font-family":c="","line-height":d="1.2","font-weight":u=Xz.regular,"letter-spacing":h="0em","text-align":p=Dz.left,"justify-content":f=Lz.top,color:g="#000000"}=l,m=function(){const e=function(){const e=nU(lF),{data:t=[]}=Y((()=>(null==e?void 0:e.getFonts({freeOfCharge:!0}))||Promise.resolve([])),{cacheKey:"editor-fonts",refreshDeps:[e]});return t}();return T.exports.useMemo((()=>{const t=e.map((e=>({label:e.title,value:e.family,preview:e.preview,locales:e.locales})));return[...SK,...t]}),[e])}(),[_,v]=Be("__iliad_fontUsageCacheKey",{defaultValue:{}}),y=function(e,t){const{fontfaces:n=[]}=z(AD),i=n.map((e=>e.family)),r=e.filter((e=>i.includes(e.value))).filter((e=>t[e.value])).sort(((e,n)=>t[n.value]-t[e.value])),o=e.filter((e=>!r.includes(e))),s=o.filter((e=>e.locales.includes("zh"))).sort(((e,t)=>e.value===bU.value?-1:t.value===bU.value?1:LK(e,t))),a=o.filter((e=>!s.includes(e))).sort(LK),{t:l}=WL();return T.exports.useMemo((()=>r.length?[{label:l("w.text.currentWork"),options:r},{label:l("w.text.zh"),options:s},{label:l("w.text.en"),options:a}]:[...s,...a]),[r,s,a,l])}(m,_),x=e=>Boolean(n&&n[e]),C={"--font-size-min":x("--font-size-min"),"--font-size-max":x("--font-size-max"),"font-size":x("font-size"),"font-family":x("font-family"),"line-height":x("line-height"),"font-weight":x("font-weight"),"letter-spacing":x("letter-spacing"),"text-align":x("text-align"),color:x("color"),"justify-content":x("justify-content")},E=a?new Jz(o):new _K(b(w({},o),{updateStyle:e=>{TD.updateCurrentStyle(t.id,e)}}),t),S=no(t)&&!a,I=T.exports.useMemo((()=>m.find((e=>e.value===c))),[m,c]);return A("div",{className:N(zz,"textEditorExitWhitelist"),children:[!a&&k(_B,{children:s("w.text")}),k(oB,{empty:a,label:s("w.text.fontFamily"),margin:"none",children:k(oK,{className:Hz,value:I,onChange:function(e){var t;const n=null!=(t=null==e?void 0:e.value)?t:bU.value;E.setFontFamily(n),v(b(w({},_),{[n]:Date.now()}))},options:y,components:{Option:FK},filterOption:AK})}),A(oB,{label:s("w.text.fontWeight"),children:[k(zV,{logic:C["font-weight"],className:Wz,value:u,onChange:function(e){E.setFontWeight(e.target.value)},options:IK,menuItemClass:"textEditorExitWhitelist"}),k("div",{className:N(Kz,C.color?hL:""),children:k(Nj,{color:g,onChange:e=>E.setFontColor(e),autofocusInput:!0,pickerClass:"textEditorExitWhitelist"})})]}),k(EK,{show:!a,children:k(kK,b(w({},e),{textService:E,styleChangedMap:C}))}),k(oB,{empty:a,label:s("w.text.textAlign"),children:k(dj,{logic:C["text-align"],selected:p,options:OK,onChange:function(e){E.setInlineAlign(e)},radioStyle:{padding:"3px 9.5px"}})}),k(oB,{empty:a,label:"",children:k(dj,{logic:C["justify-content"],selected:f,options:TK,onChange:function(e){E.setBlockAlign(e)},radioStyle:{padding:"3px 15.5px"}})}),A(oB,{label:s("w.text.lineHeight"),children:[k(pB,{logic:C["line-height"],className:$z,value:YD(GD(d)),onChange:function(e){E.setLineHeight((XD(e)/100).toString())},name:"FormatPacingLines"}),k(pB,{className:$z,logic:C["letter-spacing"],style:RK,value:YD(GD(h)),onChange:function(e){E.setLetterSpacing(XD(e)/100+"em")},name:"FormatSpacingLetter"})]}),k(oB,{empty:a,label:s("w.text.textDecoration"),children:k("div",{className:qz,children:MK.map((e=>k(PL,{name:e.iconName,onClick:()=>{return t=e.value,void E.toggleTextDecoration(l,t);var t},className:N({[Yz]:E.isTextDecorationActive(l,e.value)})},e.value)))})}),S&&k(PK,b(w({},e),{textService:E})),k(bB,{})]})}));function PK(e){const{t:t}=WL(),{textService:n}=e;return k("div",{className:Gz,children:k(Zz,{title:t("w.text.more"),panelClass:"textEditorExitWhitelist",children:k(oB,{label:t("w.text.list"),children:k(dj,{selected:n.getListType(),options:NK,onChange:e=>function(e){n.setListType(e)}(e)})})})})}function LK(e,t){return e.value.charCodeAt(0)-t.value.charCodeAt(0)}function UK(e,...t){return t.forEach((t=>{for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i&&(e[n]=i)}})),e}function FK(e){const{children:t,isSelected:n,innerProps:i,data:r}=e,o=e.getStyles("option",e);return A("div",b(w({},i),{style:b(w({},o),{display:"flex",justifyContent:"space-between"}),children:[r.preview?k(QB,{src:r.preview,height:"16px",loading:"lazy"}):k("div",{style:{color:"black"},children:t}),n&&k(PL,{name:"Done",color:"var(--spectrum-global-color-gray-900)"})]}))}q.t("w.text.currentWork"),q.t("w.text.zh"),q.t("w.text.en");var BK="_container_1hm2m_1",jK="_field_1hm2m_4";function VK(){const e=z(jD),{addStyle:t,commitAndMerge:n}=function(){const e=T.exports.useRef({}),t=z(jD);function n(n){$D(t&&n,KD.badRequest),TD.model.updateMode===Hr.None&&(console.log("fork"),TD.fork(),e.current={}),Object.assign(e.current,n),TD.add((()=>{TD.updateCurrentStyle(t.id,e.current)}))}return{commitAndMerge:()=>{var t;$D((null==(t=TD.model)?void 0:t.updateMode)===Hr.Add),console.log("commitAndMerge",e.current),TD.commitAndMerge(),e.current={}},addStyle:n}}();return{updateStyle:t=>{$D(e&&t,KD.badRequest),TD.transform((()=>{console.log("updateStyle",t),TD.updateCurrentStyle(e.id,t)}))},addStyle:t,commitAndMerge:n}}function zK(){const e=z(jD),t=z(LD),n=VK();T.exports.useEffect((()=>()=>{TD.model.updateMode===Hr.Add&&n.commitAndMerge()}),[t]),qD(e);const i=1===t.length,r=t.length>1&&UF.isSameAncestor(t)||i&&fo(e)&&!ho(e),o=io(e)&&i,s=T.exports.useMemo((()=>{const t=TD.model.getParentNodeOfId(e.id);return!!t&&!LU.isAutoLayout(t.id)}),[e.id]),a=(ho(e)||fo(e))&&i;return A("div",{className:BK,children:[s&&k(PV,w({},n)),k("div",{className:jK,children:i&&k(_z,w({},n))}),k("div",{className:jK,children:o&&k(DK,w({},n))}),k("div",{className:jK,children:r&&k(NV,w({},n))}),k("div",{className:jK,children:i&&k(wV,w({},n))}),k("div",{className:jK,children:a&&k(Rz,w({},n))}),k("div",{className:jK,children:i&&k(RB,w({},n))})]})}var KK="_container_1vktp_1";function WK(){const{t:e}=WL(),t=VK();return T.exports.useEffect((()=>()=>{TD.model.updateMode===Hr.Add&&t.commitAndMerge()}),[]),A("div",{className:KK,children:[k(_B,{style:{paddingBottom:0},children:e("w.page")}),k(bB,{}),k(kj,w({},t)),k(bB,{}),k(Rz,w({},t))]})}var HK="_container_g370z_1",$K="_attributeItem_g370z_6",qK="_attributeItemText_g370z_12",YK="_attributeIcon_g370z_22",GK="_popContent_g370z_30",XK="_attributeButtons_g370z_36",JK="_attributeButton_g370z_36",QK="_attrNameInput_g370z_48",ZK="_attributeEditError_g370z_53";var eW="_container_1e53t_1",tW="_input_1e53t_5",nW="_item_1e53t_9",iW="_itemContent_1e53t_18",rW="_itemContentActive_1e53t_30",oW="_triggerName_1e53t_33",sW="_actionName_1e53t_36",aW="_editIcon_1e53t_40",lW="_editIconActive_1e53t_46",cW="_delIcon_1e53t_49",dW="_popContent_1e53t_53";function uW(){return!0}function hW(e){const t=T.exports.useRef(null),n=e,{value:i,onChange:r,className:o,checkValidity:s=uW}=n,a=x(n,["value","onChange","className","checkValidity"]),[l,c]=T.exports.useState(!0);function d(e){c(s(e.target.value))}return G("input",d,{target:t}),T.exports.useEffect((()=>{c(s(i))}),[i]),k(H,w({ref:t,className:N(o),value:i,change:e=>null==r?void 0:r(e.target.value),onInput:d,invalid:!l,multiline:!0},a))}q.t("w.interaction.event"),q.t("w.interaction.add"),q.t("w.interaction.trigger"),q.t("w.interaction.eventType"),q.t("w.interaction.value"),q.t("w.interaction.click"),q.t("w.interaction.mouseover"),q.t("w.interaction.mouseenter"),q.t("w.interaction.mouseleave"),q.t("w.interaction.mouseup"),q.t("w.interaction.mousedown");const pW="w.interaction.event",fW="w.interaction.add",gW="w.interaction.trigger",mW="w.interaction.eventType",_W="w.interaction.value",vW=[{label:"w.interaction.click",value:"click"},{label:"w.interaction.mouseenter",value:"mouseenter"},{label:"w.interaction.mouseleave",value:"mouseleave"},{label:"w.interaction.mouseup",value:"mouseup"},{label:"w.interaction.mousedown",value:"mousedown"}];var yW=JF((function(e){var t;const{t:n}=WL(),{node:i}=e,r=function(){const e=z(jD),{interactions:t=[],triggers:n}=z(AD);if(!e)return[];const i=n.filter((t=>t.targetId===e.id)).map((e=>e.id));return t.filter((e=>i.includes(e.triggerId)))}(),[o,s]=T.exports.useState(null),[a,l]=T.exports.useState(null),[c,d]=T.exports.useState(!1),u=T.exports.useMemo((()=>({current:document.getElementById(""+("interaction-item-"+(null==a?void 0:a.id)))})),[a]);function h(e){TD.transform((()=>{TD.model.removeInteraction(e)})),f()}function p(e){setTimeout((()=>{l(e);const{triggers:t}=TD.model.getValue(),n=t.find((t=>t.id===e.triggerId));$D(n),s(n),d(!0)}),200)}function f(){s(null),l(null),d(!1)}return A("section",{className:eW,children:[k(_B,{variant:r.length?"primary":"secondary",action:"add",onClick:function(){TD.transform((()=>{p(TD.model.addInteraction(Qn.click,"",{},i.id))}))},children:n(pW)}),r.map((e=>k(wW,{interaction:e,onEdit:p,onDelete:h,active:!(!a||a.id!==e.id)},e.id))),k($B,{title:n(fW),trigger:null,visible:c,onVisibleChange:function(e){d(e),!1===e&&($D(o),$D(a),TD.transform((()=>{TD.model.updateInteraction(a.id,a),TD.model.updateTrigger(o.id,o)})),f())},content:A("div",{className:dW,children:[k(oB,{label:n(gW),margin:"none",children:k(zV,{className:tW,value:null==o?void 0:o.type,onChange:function(e){const t=e.target.value;$D(o),s(b(w({},o),{type:t}))},options:vW.map((e=>b(w({},e),{label:n(e.label)})))})}),k(oB,{label:n(mW),children:k(hB,{className:tW,value:null==a?void 0:a.eventType,onChange:function(e){$D(a),l(b(w({},a),{eventType:e}))}})}),k(oB,{label:n(_W),children:k(hW,{className:tW,value:JSON.stringify(null!=(t=null==a?void 0:a.detail)?t:{}),onChange:function(e){try{$D(a);const t=JSON.parse(e);$D(Yt(t)),l(b(w({},a),{detail:t}))}catch(_8){console.error(_8)}},checkValidity:Jt})})]}),triggerRef:u,fitToConfigPanel:!0}),k(bB,{})]})}));function wW(e){var t,n,i;const{onEdit:r,interaction:o,onDelete:s,active:a}=e,{triggers:l}=z(AD),c=l.find((e=>e.id===o.triggerId)),{t:d}=WL(),u=null!=(i=d(null!=(n=null==(t=vW.find((e=>e.value===(null==c?void 0:c.type))))?void 0:t.label)?n:""))?i:null==c?void 0:c.type,h=!!o.eventType,p=h?"#FFFFFF":"#949494";return A("div",{id:"interaction-item-"+o.id,className:N(sL,nW),children:[A("div",{className:N(iW,{[rW]:a}),onClick:()=>r(o),children:[k("span",{className:oW,children:u}),k("span",{className:N(aW,sL,{[lW]:h}),children:k(PL,{name:"Event",color:p})}),k("span",{className:sW,children:o.eventType})]}),k(PL,{className:cW,name:"Remove",onClick:()=>{s(o.id)}})]})}var bW="_fullInput_yav9h_1";const xW=["H1","H2","H3","H4","H5","H6","P"].reduce(((e,t)=>{const n={label:t,value:t};return e.push(n),e}),[]),CW=["ARTICLE","ASIDE","BUTTON","DIV","FIGCAPTION","FIGURE","FOOTER","HEADER","MAIN","NAV","SECTION"].reduce(((e,t)=>{const n={label:t,value:t};return e.push(n),e}),[]);q.t("w.node.tagName");var kW=JF((function(e){const{t:t}=WL(),{node:n}=e,i=T.exports.useMemo((()=>{var e,t;if(io(n)){const t=n.props.content;if(!t)return"P";return(null==(e=(new DOMParser).parseFromString(t,"text/html").body.firstElementChild)?void 0:e.tagName)||"P"}return(null==(t=n.meta)?void 0:t.tagName)||"DIV"}),[n]),r=T.exports.useMemo((()=>io(n)?xW:CW),[n]);return io(n)||fo(n)||co(n)?A("div",{children:[k(oB,{label:t("w.node.tagName"),margin:"none",children:k(zV,{className:bW,value:i,onChange:function(e){const t=e.target.value;i!==t&&TD.transform((e=>{var i;if(io(n)){const r=n.props.content,o=null==(i=n.meta)?void 0:i.subType;if(!r)return;const s=(new DOMParser).parseFromString(r,"text/html"),a=s.createElement("div");for(const e of s.body.childNodes)if(e.nodeType!==s.ELEMENT_NODE)a.appendChild(e);else{const n=s.createElement(t);n.innerHTML=e.innerHTML,a.appendChild(n)}e.updateNodeById(n.id,{content:a.innerHTML}),"P"===t&&o!==Zr.Paragraph&&e.updateNodeMetaById(n.id,{subType:Zr.Paragraph}),t.startsWith("H")&&o!==Zr.Title&&e.updateNodeMetaById(n.id,{subType:Zr.Title})}else e.updateNodeMetaById(n.id,{tagName:t})}))},options:r},n.id)}),k(bB,{})]}):null}));var EW="_fullInput_yav9h_1";const SW=LR(Ws).reduce(((e,t)=>{const n={label:t,value:t};return e.push(n),e}),[]);q.t("w.linkOrAnchor"),q.t("w.linkOrAnchor.rel");var IW=JF((function(e){const{t:t}=WL(),{node:n}=e,i=TD.model.getLink(n.id);if(!i)return null;const r=i.rel||"";return A("div",{children:[k(_B,{children:t("w.linkOrAnchor")}),k(oB,{label:t("w.linkOrAnchor.rel"),margin:"none",children:k(zV,{className:EW,value:r,onChange:function(e){const t=e.target.value;r!==t&&TD.transform((e=>{e.updateLink(i.targetId,i.href,i.target,t)}))},options:SW})}),k(bB,{})]})}));var OW="_input_1g5ee_1";const TW=["100","80","60","40","20"].reduce(((e,t)=>{const n={label:t+"%",value:t};return e.push(n),e}),[]);q.t("w.image"),q.t("w.image.alt"),q.t("w.image.ossResize"),q.t("w.image.ossResize.maxWidth"),q.t("w.image.ossResize.quality");var MW=JF((function(e){var t;const{node:n}=e,{t:i}=WL();if(!ro(n))return null;const r=n.props.alt||"",o=null==(t=n.meta)?void 0:t.ossResize,s=(null==o?void 0:o.quality)||"80",a=(null==o?void 0:o.maxWidth)||"2560",l=o?()=>{TD.transform((e=>{e.updateNodeMetaById(n.id,{ossResize:void 0})}))}:()=>{TD.transform((e=>{e.updateNodeMetaById(n.id,{ossResize:{quality:"80",maxWidth:"2560"}})}))};return A("div",{children:[k(_B,{children:i("w.image")}),k(oB,{label:i("w.image.alt"),children:k(hB,{className:OW,value:r,onChange:e=>{r!==e&&TD.transform((t=>{t.updateNodeById(n.id,{alt:e})}))}})}),k(bB,{}),k(_B,{variant:o?"primary":"secondary",action:o?"delete":"add",onClick:l,children:i("w.image.ossResize")}),A(EK,{show:o,children:[k(oB,{label:i("w.image.ossResize.quality"),children:k(zV,{className:OW,value:s,onChange:e=>{const t=e.target.value;t!==s&&TD.transform((e=>{e.updateNodeMetaById(n.id,{ossResize:{quality:t}})}))},options:TW})}),k(oB,{label:i("w.image.ossResize.maxWidth"),children:k(hB,{className:OW,value:a,onChange:e=>{e!==a&&e&&TD.transform((t=>{t.updateNodeMetaById(n.id,{ossResize:{maxWidth:e}})}))},required:!0,pattern:"[1-9][0-9]*"})})]}),k(bB,{})]})}));function NW(e){const t={};for(const n of e)t[n.name]=n.value;return t}function AW(){return A("section",{className:HK,children:[k(RW,{}),k(bB,{}),k(yW,{}),k(kW,{}),k(IW,{}),k(MW,{})]})}const RW=JF((e=>{var t;const{t:n}=WL(),{node:i}=e,[r,o]=T.exports.useState([]),s=(null==(t=i.meta)?void 0:t.componentType)?n(xy(i)):"元素",a=n("w.attribute",{name:s}),[l,c]=T.exports.useState(-1);function d(){c(-1)}return je((()=>{var e;const t=Object.entries(null!=(e=i.props)?e:{}).filter((([e])=>e.startsWith("data-"))).map((([e,t])=>({name:e,value:t})));o(t)}),[i.props]),A(T.exports.Fragment,{children:[k(_B,{variant:r.length?"primary":"secondary",action:"add",onClick:function(){o([...r,{name:"data-",value:""}]),setTimeout((()=>{c(r.length)}),100)},children:a}),r.map(((e,t)=>k(DW,{visible:l===t,node:i,attribute:e,onClose:d,onShow:()=>function(e){c(e)}(t),onConfirm:(t,n)=>function(e,t,n){e||TD.transform((e=>{const o=NW(r.filter((e=>e!==n))),s=b(w({},o),{[t.name]:t.value});n.name!==t.name&&Wt(o[n.name])&&Reflect.set(s,n.name,void 0),e.updateNodeById(i.id,s),d()}))}(t,n,e),onRemove:()=>function(e){TD.transform((t=>{const n=w({},NW(r));Reflect.set(n,e.name,void 0),t.updateNodeById(i.id,n)}));const t=DR(r),n=t.findIndex((t=>t.name===e.name));t.splice(n,1),o(t)}(e)},t)))]})}));function DW(e){const{attribute:t,node:n,onShow:i,onClose:r,onConfirm:o,onRemove:s,visible:a}=e,{t:l}=WL(),[c,d]=T.exports.useState(""),[u,h]=T.exports.useState(Ve(t));function p(e){if(!e)return"";const i=[{check:()=>/^(data-)([A-Za-z0-9:._-]+)+$/.test(e),message:l("w.attribute.rule")},{check:()=>{const i=Object.keys(n.props);return e===t.name||!i.includes(e)},message:l("w.attribute.duplicate")}].find((e=>!e.check()));return(null==i?void 0:i.message)||""}function f(){r()}return A("div",{className:N(sL,$K),children:[k($B,{title:l("w.attribute.add"),visible:a,onVisibleChange:function(e){e?(i(),h(Ve(t)),d(p(u.name))):f()},triggerClass:N(qK,lL),trigger:k("span",{children:`${t.name}="${t.value}"`}),content:A("div",{className:GK,children:[k(oB,{label:l("w.attribute.key"),children:A("div",{className:QK,children:[k(hB,{placeholder:"data-",value:u.name,maxlength:64,onInput:function(e){const t=e.toLowerCase(),n=p(t);d(n),h(b(w({},u),{name:t}))},invalid:!!c}),c&&k(PW,{children:c})]})}),k(oB,{label:l("w.attribute.value"),children:k(hW,{placeholder:l("w.attribute.value.placeholder"),value:u.value,onChange:function(e){h(b(w({},u),{value:e}))},style:{width:"100%"}})}),A("div",{className:XK,children:[k(ae,{className:JK,variant:"secondary",click:f,children:l("w.dialog.cancel")}),k(ae,{className:JK,variant:"cta",click:function(){o(c,u)},children:l("w.dialog.confirm")})]})]}),fitToConfigPanel:!0,options:b(w({},WB),{closeOnClickOutside:!1})}),k(PL,{className:YK,name:"Remove",onClick:()=>s(t)})]})}function PW(e){const t=e,{children:n}=t,i=x(t,["children"]);return k("span",b(w({className:ZK},i),{children:n}))}var LW={title:"_title_1d19q_1",addMenu:"_addMenu_1d19q_10"},UW=Object.defineProperty,FW=(e,t,n)=>(((e,t,n)=>{t in e?UW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let BW=document,jW=window;const VW=new Map,zW=new Map,KW=new Map,WW=new Map,HW=new Map,$W=new Map,qW=new Map,YW=new Map,GW=new Map,XW=[zW,KW,WW,HW,$W,qW],JW=new Map,QW=new Map,ZW=new Map,eH=new Map;let tH=new WeakMap;const nH=e=>{e&&(e.timeline&&e.timeline.detachAnimation(e),e.cancel(),e.effect.clear(),e.dispose())},iH=e=>{e&&e.hasAttribute("style")&&e.removeAttribute("style")},rH=()=>{Array.from(JW.values()).forEach(nH),Array.from(QW.values()).forEach(nH),Array.from(ZW.values()).forEach(nH),Array.from(eH.values()).forEach(nH),Array.from(VW.values()).forEach((e=>{e.deactivate()})),JW.clear(),QW.clear(),ZW.clear(),eH.clear(),GW.clear(),YW.clear(),tH=new WeakMap,(()=>{const e=XW.reduce(((e,t)=>e.concat(Array.from(t.keys()))),[]);GW.clear(),Array.from(new Set(e)).forEach(iH)})(),XW.forEach((e=>e.clear()))};function oH(...e){throw e.length&&console.error(...e),new Error("not reached")}function sH(...e){throw e.length&&console.error(...e),new Error("not implemented")}function aH(e){return function(e){return void 0===e}(e)||null===e}const lH=e=>"number"==typeof e,cH=e=>"string"==typeof e,dH=Array.isArray;function uH(e,t,n){if(lH(e)&&lH(t)&&isFinite(e)&&isFinite(t))return e*(1-n)+t*n;if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){const i=[];for(let r=0;r<e.length;r++)i.push(uH(e[r],t[r],n));return i}sH()}function hH(e,t,n){return function(i){return n(uH(e,t,i))}}const pH=Object.create(null);function fH(e,t,n){Reflect.has(pH,n)||(pH[n]={parser:e,merger:t})}function gH(e,t,n){for(let i=0;i<n.length;i++){fH(e,t,n[i])}}function mH(e,t,n){if(t===n)return function(){return t};const i=pH[e];if(!i)return console.warn(`Animation Runtime: Property ${e} handler missed.`),null;const r=i.parser(t),o=i.parser(n);if(void 0!==r&&void 0!==o){const e=i.merger(r,o),s=hH(e.left,e.right,e.format);return function(e){return 0===e?t:1===e?n:s(e)}}return["background-size","background-repeat","background-position"].includes(e)?function(e){return n}:(console.warn(`Animation Runtime: Property ${e} unvalid value.`),null)}function _H(e){return e.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function vH(e,t,n){return Math.min(t,Math.max(e,n))}function yH(e){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e))return Number(e)}function wH(e,t){return{left:e,right:t,format:_H}}function bH(e,t){return function(n,i){return{left:n,right:i,format:n=>_H(vH(e,t,n))}}}function xH(e,t){return{left:e,right:t,format:e=>Math.round(e).toString()}}function CH(e,t){const n=e.exec(t);if(n){const i=e.ignoreCase?n[0].toLowerCase():n[0];return[[...i],t.substr(i.length)]}}function kH(e,t){const n=e(t=t.replace(/^\s*/,""));if(n)return[n[0],n[1].replace(/^\s*/,"")]}function EH(e,t,n){e=kH.bind(null,e);const i=[];for(;;){let r=e(n);if(!r)return[i,n];if(i.push(r[0]),r=CH(t,n=r[1]),!r||""===r[1])return[i,n];n=r[1]}}function SH(e,t){let n,i=0;for(n=0;n<t.length&&(!/\s|,/.test(t[n])||0!==i);n++)if("("===t[n])i++;else if(")"===t[n]&&(i--,0===i&&n++,i<=0))break;const r=e(t.substr(0,n));return aH(r)?void 0:[r,t.substr(n)]}function IH(e){return function(t){const n=e(t);return n&&(n[0]=void 0),n}}function OH(e,t){const n=[];for(let i=0;i<e.length;i++){const r=kH(e[i],t);if(!r||""===r[0])return;void 0!==r[0]&&n.push(r[0]),t=r[1]}if(""===t)return n}function TH(e,t,n){const i=[],r=[],o=[];let s=0;for(let a=0;a<n.length;a++){const l=n[a];if("function"==typeof l){const n=l(e[s],t[s++]);i.push(n.left),r.push(n.right),o.push(n.format)}else i.push(0),r.push(0),o.push((e=>l))}return{left:i,right:r,format(e){let t="";for(let n=0;n<e.length;n++)t+=o[n](e[n]);return t}}}gH((function(e){const t=e.trim().split(/\s*[\s,]\s*/);if(0===t.length)return;const n=[];for(let i=0;i<t.length;i++){const e=yH(t[i]);if(void 0===e)return;n.push(e)}return n}),(function(e,t){if(e.length===t.length)return{left:e,right:t,format:e=>e.map(_H).join(" ")}}),["stroke-dasharray"]),gH(yH,bH(0,1/0),["border-image-width","line-height"]),gH(yH,bH(0,1),["opacity","shape-image-threshold"]),gH(yH,(function(e,t){if(0!==e)return bH(0,1/0)(e,t)}),["flex-grow","flex-shrink"]),gH(yH,xH,["z-index"]),gH(yH,xH,["--font-size-min"]),gH(yH,xH,["--font-size-max"]);const MH=function(e,t,n,i,r){const o=[],s=[],a=[],l=function(e,t){let n=e,i=t;for(;n&&i;)n>i?n%=i:i%=n;return n=e*t/(n+i),n}(i.length,r.length);for(let c=0;c<l;c++){const e=t(i[c%i.length],r[c%r.length]);if(!e)return;o.push(e.left),s.push(e.right),a.push(e.format)}return{left:o,right:s,format(t){const i=t.map((function(e,t){return a[t](e)})).join(n);return e?e(i):i}}}.bind(null,null),NH=BW.createElementNS("http://www.w3.org/1999/xhtml","canvas");NH.width=NH.height=1;const AH=NH.getContext("2d");function RH(e){e=e.trim(),AH.fillStyle="#000",AH.fillStyle=e;const t=AH.fillStyle;if(AH.fillStyle="#fff",AH.fillStyle=e,t!==AH.fillStyle)return;AH.fillRect(0,0,1,1);const n=AH.getImageData(0,0,1,1).data;AH.clearRect(0,0,1,1);const i=n[3]/255;return[n[0]*i,n[1]*i,n[2]*i,i]}function DH(e,t){return{left:e,right:t,format(e){if(e[3])for(let n=0;n<3;n++)e[n]=Math.round((t=e[n]/e[3],Math.max(0,Math.min(255,t))));var t;return e[3]=vH(0,1,e[3]),"rgba("+e.join(",")+")"}}}gH(RH,DH,["background-color","border-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]);const PH=SH.bind(null,RH);function LH(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=LH(e[n]):t[n]=e[n]})),t}function UH(e){return Object.keys(e)}function FH(e){const t=/([\+\-\w\.]+|[\(\)\*\/])/g;let n;function i(){const i=t.exec(e);n=i?i[0]:void 0}function r(){if("("!==n)return function(){const e=Number(n);return i(),e}();i();const e=s();return")"!==n?NaN:(i(),e)}function o(){let e=r();for(;"*"===n||"/"===n;){const t=n;i();const o=r();"*"===t?e*=o:e/=o}return e}function s(){let e=o();for(;"+"===n||"-"===n;){const t=n;i();const r=o();"+"===t?e+=r:e-=r}return e}return i(),s()}function BH(e,t){if("0"===(t=t.trim().toLowerCase())&&"px".search(e)>=0)return{px:0};if(!/^[^(]*$|^calc/.test(t))return;t=t.replace(/calc\(/g,"(");const n={};t=t.replace(e,(function(e){return n[e]=null,"U"+e}));const i="U("+e.source+")";let r=t.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+i,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,"");const o=[/N\*(D)/g,/(N|D)[*/]N/g,/(N|D)O\1/g,/\((N|D)\)/g];let s=0;for(;s<o.length;)o[s].test(r)?(r=r.replace(o[s],"$1"),s=0):s++;if("D"===r){for(const e of UH(n)){const r=FH(t.replace(new RegExp("U"+e,"g"),"").replace(new RegExp(i,"g"),"*0"));if(!isFinite(r))return;n[e]=r}return n}}function jH(e,t){return VH(e,t,!0)}function VH(e,t,n=!1){const i=Array.from(new Set([...UH(e),...UH(t)]));return{left:i.map((function(t){return e[t]||0})),right:i.map((function(e){return t[e]||0})),format(e){const t=e.map((function(t,r){return 1===e.length&&n&&(t=Math.max(t,0)),_H(t)+i[r]})).join(" + ");return e.length>1?"calc("+t+")":t}}}const zH="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",KH=BH.bind(null,new RegExp(zH,"g")),WH=BH.bind(null,new RegExp(zH+"|%","g")),HH=BH.bind(null,/deg|rad|grad|turn/g),$H=SH.bind(null,WH),qH=SH.bind(null,KH),YH=EH.bind(void 0,qH,/^/),GH=EH.bind(void 0,YH,/^,/),XH=MH.bind(void 0,jH," ");gH((function(e){const t=GH(e);if(t&&""===t[1])return t[0]}),MH.bind(void 0,XH,","),["background-size"]),gH(WH,jH,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","border-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),gH(WH,VH,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"]);const JH=function(){function e(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][2]*e[1][1]*e[2][0]-e[1][2]*e[2][1]*e[0][0]-e[2][2]*e[0][1]*e[1][0]}function t(e){const t=n(e);return[e[0]/t,e[1]/t,e[2]/t]}function n(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function i(e,t,n,i){return[n*e[0]+i*t[0],n*e[1]+i*t[1],n*e[2]+i*t[2]]}return function(r){const o=[r.slice(0,4),r.slice(4,8),r.slice(8,12),r.slice(12,16)];if(1!==o[3][3])return null;const s=[];for(let e=0;e<4;e++)s.push(o[e].slice());for(let e=0;e<3;e++)s[e][3]=0;if(0===e(s))return null;const a=[];let l;if(o[0][3]||o[1][3]||o[2][3]){a.push(o[0][3]),a.push(o[1][3]),a.push(o[2][3]),a.push(o[3][3]);const t=function(t){const n=1/e(t),i=t[0][0],r=t[0][1],o=t[0][2],s=t[1][0],a=t[1][1],l=t[1][2],c=t[2][0],d=t[2][1],u=t[2][2],h=[[(a*u-l*d)*n,(o*d-r*u)*n,(r*l-o*a)*n,0],[(l*c-s*u)*n,(i*u-o*c)*n,(o*s-i*l)*n,0],[(s*d-a*c)*n,(c*r-i*d)*n,(i*a-r*s)*n,0]],p=[];for(let e=0;e<3;e++){let n=0;for(let i=0;i<3;i++)n+=t[3][i]*h[i][e];p.push(n)}return p.push(1),h.push(p),h}(s);l=function(e,t){const n=[];for(let i=0;i<4;i++){let r=0;for(let n=0;n<4;n++)r+=e[n]*t[n][i];n.push(r)}return n}(a,[[(c=t)[0][0],c[1][0],c[2][0],c[3][0]],[c[0][1],c[1][1],c[2][1],c[3][1]],[c[0][2],c[1][2],c[2][2],c[3][2]],[c[0][3],c[1][3],c[2][3],c[3][3]]])}else l=[0,0,0,1];var c;const d=o[3].slice(0,3),u=[];u.push(o[0].slice(0,3));const h=[];h.push(n(u[0])),u[0]=t(u[0]);const p=[];u.push(o[1].slice(0,3)),p.push(QH(u[0],u[1])),u[1]=i(u[1],u[0],1,-p[0]),h.push(n(u[1])),u[1]=t(u[1]),p[0]/=h[1],u.push(o[2].slice(0,3)),p.push(QH(u[0],u[2])),u[2]=i(u[2],u[0],1,-p[1]),p.push(QH(u[1],u[2])),u[2]=i(u[2],u[1],1,-p[2]),h.push(n(u[2])),u[2]=t(u[2]),p[1]/=h[2],p[2]/=h[2];const f=(g=u[1],m=u[2],[g[1]*m[2]-g[2]*m[1],g[2]*m[0]-g[0]*m[2],g[0]*m[1]-g[1]*m[0]]);var g,m;if(QH(u[0],f)<0)for(let e=0;e<3;e++)h[e]*=-1,u[e][0]*=-1,u[e][1]*=-1,u[e][2]*=-1;const _=u[0][0]+u[1][1]+u[2][2]+1;let v,y;return _>1e-4?(v=.5/Math.sqrt(_),y=[(u[2][1]-u[1][2])*v,(u[0][2]-u[2][0])*v,(u[1][0]-u[0][1])*v,.25/v]):u[0][0]>u[1][1]&&u[0][0]>u[2][2]?(v=2*Math.sqrt(1+u[0][0]-u[1][1]-u[2][2]),y=[.25*v,(u[0][1]+u[1][0])/v,(u[0][2]+u[2][0])/v,(u[2][1]-u[1][2])/v]):u[1][1]>u[2][2]?(v=2*Math.sqrt(1+u[1][1]-u[0][0]-u[2][2]),y=[(u[0][1]+u[1][0])/v,.25*v,(u[1][2]+u[2][1])/v,(u[0][2]-u[2][0])/v]):(v=2*Math.sqrt(1+u[2][2]-u[0][0]-u[1][1]),y=[(u[0][2]+u[2][0])/v,(u[1][2]+u[2][1])/v,.25*v,(u[1][0]-u[0][1])/v]),[d,h,p,y,l]}}();function QH(e,t){let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}function ZH(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function e$(e){const t=e.rad||0;return((e.deg||0)/360+(e.grad||0)/400+(e.turn||0))*(2*Math.PI)+t}function t$(e){switch(e.t){case"rotatex":{const t=e$(e.d[0]);return[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1]}case"rotatey":{const t=e$(e.d[0]);return[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1]}case"rotate":case"rotatez":{const t=e$(e.d[0]);return[Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1]}case"rotate3d":{let t=e.d[0],n=e.d[1],i=e.d[2];const r=e$(e.d[3]),o=t*t+n*n+i*i;if(0===o)t=1,n=0,i=0;else if(1!==o){const e=Math.sqrt(o);t/=e,n/=e,i/=e}const s=Math.sin(r/2),a=s*Math.cos(r/2),l=s*s;return[1-2*(n*n+i*i)*l,2*(t*n*l+i*a),2*(t*i*l-n*a),0,2*(t*n*l-i*a),1-2*(t*t+i*i)*l,2*(n*i*l+t*a),0,2*(t*i*l+n*a),2*(n*i*l-t*a),1-2*(t*t+n*n)*l,0,0,0,0,1]}case"scale":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0],0,0,0,0,1];case"scale3d":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,e.d[2],0,0,0,0,1];case"skew":{const t=e$(e.d[0]),n=e$(e.d[1]);return[1,Math.tan(n),0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]}case"skewx":{const t=e$(e.d[0]);return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]}case"skewy":{const t=e$(e.d[0]);return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]}case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e.d[0].px||0,e.d[1].px||0,0,1];case"translatex":return[1,0,0,0,0,1,0,0,0,0,1,0,e.d[0].px||0,0,0,1];case"translatey":return[1,0,0,0,0,1,0,0,0,0,1,0,0,e.d[0].px||0,0,1];case"translatez":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,e.d[0].px||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e.d[0].px||0,e.d[1].px||0,e.d[2].px||0,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,e.d[0].px?-1/e.d[0].px:0,0,0,0,1];case"matrix":return[e.d[0],e.d[1],0,0,e.d[2],e.d[3],0,0,0,0,1,0,e.d[4],e.d[5],0,1];case"matrix3d":return e.d;default:console.assert(!1,"Transform item type "+e.t+" conversion to matrix not yet implemented.")}}function n$(e){return 0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(t$).reduce(ZH)}function i$(e){return[JH(n$(e))]}const r$=function(){function e(e,t){const n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(let i=0;i<4;i++)for(let r=0;r<4;r++)for(let o=0;o<4;o++)n[i][r]+=t[i][o]*e[o][r];return n}return function(t,n,i,r,o){let s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];for(let e=0;e<4;e++)s[e][3]=o[e];for(let e=0;e<3;e++)for(let n=0;n<3;n++)s[3][e]+=t[n]*s[n][e];const a=r[0],l=r[1],c=r[2],d=r[3],u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];u[0][0]=1-2*(l*l+c*c),u[0][1]=2*(a*l-c*d),u[0][2]=2*(a*c+l*d),u[1][0]=2*(a*l+c*d),u[1][1]=1-2*(a*a+c*c),u[1][2]=2*(l*c-a*d),u[2][0]=2*(a*c-l*d),u[2][1]=2*(l*c+a*d),u[2][2]=1-2*(a*a+l*l),s=e(s,u);const h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];i[2]&&(h[2][1]=i[2],s=e(s,h)),i[1]&&(h[2][1]=0,h[2][0]=i[0],s=e(s,h)),i[0]&&(h[2][0]=0,h[1][0]=i[0],s=e(s,h));for(let e=0;e<3;e++)for(let t=0;t<3;t++)s[e][t]*=n[e];return(p=s)[0][2]||p[0][3]||p[1][2]||p[1][3]||p[2][0]||p[2][1]||p[2][2]||p[2][3]||p[3][2]||p[3][3]?s[0].concat(s[1],s[2],s[3]):[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]];var p}}();function o$(e,t,n){let i=QH(e,t);var r,o,s;r=i,o=-1,s=1,i=Math.max(Math.min(r,s),o);let a=[];if(1===i)a=e;else{const r=Math.acos(i),o=1*Math.sin(n*r)/Math.sqrt(1-i*i);for(let s=0;s<4;s++)a.push(e[s]*(Math.cos(n*r)-i*o)+t[s]*o)}return a}function s$(e){const t={};for(const n in e)t[n]=-e[n];return t}function a$(e){return CH(/^(left|center|right|top|bottom)\b/i,e)||$H(e)}const l$={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}};function c$(e,t){const n=EH(a$,/^/,t);if(!n||""!==n[1])return;const i=n[0];if(i[0]=i[0]||"center",i[1]=i[1]||"center",3===e&&(i[2]=i[2]||{px:0}),i.length===e){if(/top|bottom/.test(i[0])||/left|right/.test(i[1])){const e=i[0];i[0]=i[1],i[1]=e}if(/left|right|center|Object/.test(i[0])&&/top|bottom|center|Object/.test(i[1]))return i.map((function(e){return"object"==typeof e?e:l$[e]}))}}const d$=MH.bind(null,VH," ");function u$(e){const t=EH(a$,/^/,e);if(!t)return;const n=t[0],i=[{"%":50},{"%":50}];let r=0,o=!1;for(let s=0;s<n.length;s++){let e=n[s];"string"==typeof e?(o=/bottom|right/.test(e),r={left:0,right:0,center:r,top:1,bottom:1}[e],i[r]=l$[e],"center"===e&&r++):(o&&(e=s$(e),e["%"]=(e["%"]||0)+100),i[r]=e,r++,o=!1)}return[i,t[1]]}gH(c$.bind(null,3),d$,["transform-origin"]),gH(c$.bind(null,2),d$,["perspective-origin"]);function h$(e){const t={inset:!1,lengths:[],color:null};const n=EH((function(e){let n=CH(/^inset/i,e);return n?(t.inset=!0,n):(n=$H(e),n?(t.lengths.push(n[0]),n):(n=PH(e),n?(t.color=n[0],n):void 0))}),/^/,e);if(n&&n[0].length)return[t,n[1]]}gH((function(e){const t=EH(u$,/^,/,e);if(t&&""===t[1])return t[0]}),MH.bind(null,d$,", "),["background-position","object-position"]);gH((function(e){"none"===e&&(e="0px 0px 0px 0px rgba(0,0,0,0)");const t=EH(h$,/^,/,e);if(t&&""===t[1])return t[0]}),function(e,t,n,i){const r=[],o=[];function s(e){return{inset:e,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(let a=0;a<n.length||a<i.length;a++){const e=n[a]||s(i[a].inset),t=i[a]||s(n[a].inset);r.push(e),o.push(t)}return MH(e,t,r,o)}.bind(null,(function(e,t){for(;e.lengths.length<Math.max(e.lengths.length,t.lengths.length);)e.lengths.push({px:0});for(;t.lengths.length<Math.max(e.lengths.length,t.lengths.length);)t.lengths.push({px:0});if(e.inset!==t.inset||!!e.color!=!!t.color)return;const n=[];let i;const r=[[],0],o=[[],0];for(let s=0;s<e.lengths.length;s++){const i=VH(e.lengths[s],t.lengths[s],2===s);r[0].push(i.left),o[0].push(i.right),n.push(i.format)}if(e.color&&t.color){const n=DH(e.color,t.color);r[1]=n.left,o[1]=n.right,i=n.format}return{left:r,right:o,format(t){let r=e.inset?"inset ":" ";for(let e=0;e<n.length;e++)r+=n[e](t[0][e])+" ";return i&&(r+=i(t[1])),r}}}),", "),["box-shadow","text-shadow"]);const p$=SH.bind(null,WH),f$=EH.bind(void 0,p$,/^/),g$=MH.bind(void 0,VH," "),m$=MH.bind(void 0,g$,",");function _$(e){return function(t){let n=0;return e.map((function(e){return null===e?t[n++]:e}))}}function v$(e){return e}gH((function(e){const t=CH(/^circle/,e);if(t&&t[0])return["circle"].concat(OH([IH(CH.bind(void 0,/^\(/)),p$,IH(CH.bind(void 0,/^at/)),u$,IH(CH.bind(void 0,/^\)/))],t[1]));const n=CH(/^ellipse/,e);if(n&&n[0])return["ellipse"].concat(OH([IH(CH.bind(void 0,/^\(/)),f$,IH(CH.bind(void 0,/^at/)),u$,IH(CH.bind(void 0,/^\)/))],n[1]));const i=CH(/^polygon/,e);return i&&i[0]?["polygon"].concat(OH([IH(CH.bind(void 0,/^\(/)),(r=CH.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),o="nonzero,",function(e){const t=r(e);return t||[o,e]}),GH,IH(CH.bind(void 0,/^\)/))],i[1])):void 0;var r,o}),(function(e,t){if(e[0]===t[0])return"circle"===e[0]?TH(e.slice(1),t.slice(1),["circle(",VH," at ",d$,")"]):"ellipse"===e[0]?TH(e.slice(1),t.slice(1),["ellipse(",XH," at ",d$,")"]):"polygon"===e[0]&&e[1]===t[1]?TH(e.slice(2),t.slice(2),["polygon(",e[1],m$,")"]):void 0}),["shape-outside"]);const y$={px:0},w$={deg:0},b$={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],v$],matrix3d:["NNNNNNNNNNNNNNNN",v$],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",_$([null,null,1]),v$],scalex:["N",_$([null,1,1]),_$([null,1])],scaley:["N",_$([1,null,1]),_$([1,null])],scalez:["N",_$([1,1,null])],scale3d:["NNN",v$],skew:["Aa",null,v$],skewx:["A",null,_$([null,w$])],skewy:["A",null,_$([w$,null])],translate:["Tt",_$([null,null,y$]),v$],translatex:["T",_$([null,y$,y$]),_$([null,y$])],translatey:["T",_$([y$,null,y$]),_$([y$,null])],translatez:["L",_$([y$,y$,null])],translate3d:["TTL",v$]};function x$(e){return e.toFixed(6).replace(".000000","")}function C$(e,t){let n,i;return e.decompositionPair!==t&&(e.decompositionPair=t,n=i$(e)),t.decompositionPair!==e&&(t.decompositionPair=e,i=i$(t)),null==n[0]||null==i[0]?{left:[!1],right:[!0],format:n=>n?t[0].d:e[0].d}:(n[0].push(0),i[0].push(1),{left:n,right:i,format(e){const t=o$(n[0][3],i[0][3],e[5]);return r$(e[0],e[1],e[2],t,e[4]).map(x$).join(",")}})}function k$(e){return e.replace(/[xy]/,"")}function E$(e){return e.replace(/(x|y|z|3d)?$/,"3d")}function S$(e){return 400===(e=vH(100,900,e=100*Math.round(e/100)))?"normal":700===e?"bold":String(e)}var I$;gH((function(e){if("none"===(e=e.toLowerCase().trim()))return[];const t=/\s*(\w+)\(([^)]*)\)/g,n=[];let i,r=0;for(;i=t.exec(e);){if(i.index!==r)return;r=i.index+i[0].length;const o=i[1],s=Reflect.get(b$,o);if(!s)return;const a=i[2].split(","),l=s[0];if(l.length<a.length)return;const c=[];for(let e=0;e<l.length;e++){const t=a[e],n=l[e];let i;if(t){i=Reflect.get({A:function(e){return"0"===e.trim()?w$:HH(e)},N:yH,T:WH,L:WH},n.toUpperCase())(t)}else i=Reflect.get({a:w$,n:c[0],t:y$},n);if(void 0===i)return;c.push(i)}if(n.push({t:o,d:c}),t.lastIndex===e.length)return n}}),(function(e,t){const n=i$&&!0;let i=!1;if(!e.length||!t.length){e.length||(i=!0,e=t,t=[]);for(let n=0;n<e.length;n++){const i=e[n].t,r=e[n].d,o="scale"===i.sub(0,5)?1:0;t.push({t:i,d:r.map((function(e){if("number"==typeof e)return o;const t={};for(const n in e)t[n]=o;return t}))})}}let r=[],o=[],s=[];if(e.length!==t.length){if(!n)return;const i=C$(e,t);r=[i.left],o=[i.right],s=[["matrix",[i.format]]]}else for(let c=0;c<e.length;c++){const i=e[c].t,d=t[c].t;let u=e[c].d,h=t[c].d;const p=Reflect.get(b$,i),f=Reflect.get(b$,d);let g;if(l=d,"perspective"===(a=i)&&"perspective"===l||("matrix"===a||"matrix3d"===a)&&("matrix"===l||"matrix3d"===l)){if(!n)return;const i=C$([e[c]],[t[c]]);r.push(i.left),o.push(i.right),s.push(["matrix",[i.format]]);continue}if(i===d)g=i;else if(p[2]&&f[2]&&k$(i)===k$(d))g=k$(i),u=p[2](u),h=f[2](h);else{if(!p[1]||!f[1]||E$(i)!==E$(d)){if(!n)return;const i=C$(e,t);r=[i.left],o=[i.right],s=[["matrix",[i.format]]];break}g=E$(i),u=p[1](u),h=f[1](h)}const m=[],_=[],v=[];for(let e=0;e<u.length;e++){const t=("number"==typeof u[e]?wH:VH)(u[e],h[e]);m[e]=t.left,_[e]=t.right,v.push(t.format)}r.push(m),o.push(_),s.push([g,v])}var a,l;if(i){const e=r;r=o,o=e}return{left:r,right:o,format:e=>e.map((function(e,t){const n=e.map((function(e,n){return s[t][1][n](e)})).join(",");return"matrix"===s[t][0]&&16===n.split(",").length&&(s[t][0]="matrix3d"),s[t][0]+"("+n+")"})).join(" ")}}),["transform"]),gH((function(e){const t=Number(e);if(!(isNaN(t)||t<100||t>900||t%100!=0))return t}),(function(e,t){return{left:e,right:t,format:S$}}),["font-weight"]),(I$=I$||{}).stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var n=e.visit(t.orientation);return n&&(n+=", "),t.type+"("+n+e.visit(t.colorStops)+")"},visit_shape:function(t){var n=t.value,i=e.visit(t.at),r=e.visit(t.style);return r&&(n+=" "+r),i&&(n+=" at "+i),n},"visit_default-radial":function(t){var n="",i=e.visit(t.at);return i&&(n+=i),n},"visit_extent-keyword":function(t){var n=t.value,i=e.visit(t.at);return i&&(n+=" at "+i),n},"visit_position-keyword":function(e){return e.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,n){var i=t,r=e.visit(n.length);return r&&(i+=" "+r),i},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(t){var n="",i=t.length;return t.forEach((function(t,r){n+=e.visit(t),r<i-1&&(n+=", ")})),n},visit:function(t){if(!t)return"";if(t instanceof Array)return e.visit_array(t,"");if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}throw Error("Invalid node.")}};return function(t){return e.visit(t)}}(),(I$=I$||{}).parse=function(){var e=/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,t=/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,n=/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,i=/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,r=/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,a=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,d=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,u=/^\(/,h=/^\)/,p=/^,/,f=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,m=/^rgb/i,_=/^rgba/i,v=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,y="";function w(e){var t=new Error(y+": "+e);throw t.source=y,t}function b(){var e=N(x);return y.length>0&&w("Invalid input not EOF"),e}function x(){return C("linear-gradient",e,E)||C("repeating-linear-gradient",t,E)||C("radial-gradient",n,S)||C("repeating-radial-gradient",i,S)}function C(e,t,n){return k(t,(function(t){var i=n();return i&&(U(p)||w("Missing comma before color stops")),{type:e,orientation:i,colorStops:N(A)}}))}function k(e,t){var n=U(e);if(n){U(u)||w("Missing (");var i=t(n);return U(h)||w("Missing )"),i}}function E(){return L("directional",r,1)||L("angular",d,1)}function S(){var e,t,n=I();return n&&((e=[]).push(n),t=y,U(p)&&((n=I())?e.push(n):y=t)),e}function I(){var e=function(){var e=L("shape",/^(circle)/i,0);e&&(e.style=P()||O());return e}()||function(){var e=L("shape",/^(ellipse)/i,0);e&&(e.style=D()||O());return e}();if(e)e.at=T();else{var t=O();if(t){e=t;var n=T();n&&(e.at=n)}else{var i=M();i&&(e={type:"default-radial",at:i})}}return e}function O(){return L("extent-keyword",o,1)}function T(){if(L("position",/^at/,0)){var e=M();return e||w("Missing positioning value"),e}}function M(){var e={x:D(),y:D()};if(e.x||e.y)return{type:"position",value:e}}function N(e){var t=e(),n=[];if(t)for(n.push(t);U(p);)(t=e())?n.push(t):w("One extra comma");return n}function A(){var e=L("hex",f,1)||k(_,(function(){return{type:"rgba",value:N(R)}}))||k(m,(function(){return{type:"rgb",value:N(R)}}))||L("literal",g,0);return e||w("Expected color definition"),e.length=D(),e}function R(){return U(v)[1]}function D(){return L("%",l,1)||L("position-keyword",s,1)||P()}function P(){return L("px",a,1)||L("em",c,1)}function L(e,t,n){var i=U(t);if(i)return{type:e,value:i[n]}}function U(e){var t,n;return(n=/^[\n\r\t\s]+/.exec(y))&&F(n[0].length),(t=e.exec(y))&&F(t[0].length),t}function F(e){y=y.substr(e)}return function(e){return y=e.toString(),b()}}();var O$,T$,M$,N$,A$,R$,D$,P$=I$.parse;function L$(e,t){if(!e)throw t instanceof Error?t:new Error(t)}function U$(e,t){const n=t instanceof Error?t:new Error(t);e||console.error(n)}function F$(e,t,n){return Math.min(Math.max(t,e),n)}function B$(e){return`blur(${e=function(e){const t=parseFloat(`${e}`);return Number.isFinite(t)?`${e}px`:`${e}`}(e)})`}!function(e){e.notFound="404",e.badRequest="400",e.internalError="500"}(O$||(O$={})),function(e){e.webkit="-webkit-",e.moz="-moz-",e.ms="-ms-",e.o="-o-"}(T$||(T$={})),function(e){e.grid="grid",e.flex="flex",e.inlineGrid="inline-grid",e.inlineFlex="inline-flex",e.none="none",e.listItem="list-item",e.block="block"}(M$||(M$={})),function(e){e.row="row",e.column="column"}(N$||(N$={})),function(e){e.wrap="wrap",e.nowrap="nowrap"}(A$||(A$={})),function(e){e.none="static",e.fixed="fixed",e.sticky="sticky"}(R$||(R$={})),function(e){e.visible="visible",e.hidden="hidden",e.scroll="scroll",e.auto="auto"}(D$||(D$={}));const j$=["rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ","perspective"],V$={rotateX:"0",rotateY:"0",rotateZ:"0",scaleX:"1",scaleY:"1",scaleZ:"1",skewX:"0",skewY:"0",translateX:"0",translateY:"0",translateZ:"0",perspective:"0"};function z$(e){const t=function(e){const t=`(${j$.join("|")})\\((.+?)\\)`,n=new RegExp(t,"g"),i={};return Array.from(e.matchAll(n),(e=>e)).forEach((e=>{const t=e[1],n=e[2];if(i[t]){if(i[t]!==V$[t])throw new Error("unimplemented");i[t]=n}else i[t]=n;return e})),i}(e),n={};Object.keys(t).forEach((e=>{Reflect.set(n,e,V$[e])}));return function(e){const t=e,{perspective:n}=t,i=x(t,["perspective"]);let r="";n&&(r+=`perspective(${n}) `);return Object.keys(i).forEach((e=>{r+=`${e}(${i[e]}) `})),r}(n)}var K$,W$,H$,$$,q$;!function(e){e.default="default",e.pointer="pointer",e.grab="grab",e.move="move",e.text="text"}(K$||(K$={})),function(e){e.px="px",e["%"]="%",e.vw="vw",e.vh="vh",e.fr="fr"}(W$||(W$={})),function(e){e.auto="auto",e.fitContent="fit-content"}(H$||(H$={})),W$.px,W$["%"],W$.vw,W$.vh,H$.auto,H$.fitContent,Object.values(W$),function(e){e.none="none",e.start="start",e.end="end",e.center="center"}($$||($$={})),function(e){e.none="none",e.mandatory="both mandatory",e.proximity="both proximity"}(q$||(q$={})),function(e){const t=this;let n,i=!1;return function(){return i||(i=!0,n=e.apply(t,arguments)),n}}((()=>{try{const e=document.createElement("div");return document.body.appendChild(e),getComputedStyle(e)}catch{return{}}}))();var Y$,G$;function X$(e){const t=[];return e.forEach((e=>{const{colorStops:n,orientation:i,type:r,imageUrl:o,color:s}=e;r===Y$.image?t.push(function(e){return`url(${e})`}(o)):r===Y$.linear?t.push(function(e,t){return`linear-gradient(${t}deg, ${e.map((e=>`${e.color} ${e.length}`)).join(",")})`}(n,i)):r===Y$.color&&t.push(function(e){return`linear-gradient(${e}, ${e})`}(s))})),t.join(",")}!function(e){e.color="color",e.linear="linear",e.image="image"}(Y$||(Y$={})),Y$.color,function(e){e.color="color",e.linear="linear",e.image="image"}(G$||(G$={}));const J$={type:G$.color,color:"rgba(0, 0, 0, 0)",colorStops:[],orientation:0,imageUrl:""};function Q$(e){const t=LH(J$);if(function(e){return e.trim().startsWith("linear-gradient")}(e)){const[n]=P$(e);n.orientation&&(L$("linear-gradient"===n.type,O$.badRequest),L$("angular"===n.orientation.type,O$.badRequest),t.orientation=(i=n.orientation.value,parseInt(i||"0",10)));const r=n.colorStops.map((e=>{L$("rgba"===e.type||"rgb"===e.type,O$.badRequest);const[t,n,i,r=1]=e.value,o={length:"",color:`rgba(${t},${n},${i},${r})`};if(e.length){const{type:t,value:n}=e.length;L$("%"===t,O$.badRequest),o.length=`${n}${t}`}return o}));1===[...new Set(r.map((e=>e.color)))].length?(t.type=G$.color,t.color=r[0].color):(t.type=G$.linear,t.colorStops=r)}else{t.type=G$.image;const i=(null==(n=/(?:\(['"]?)(.*?)(?:['"]?\))/.exec(e))?void 0:n[1])||"";t.imageUrl=i}var n,i;return t}function Z$(e){if("none"===e||!e)return LH([J$]);return function(e){const t=/((?:[^"']|".*?"|'.*?')*?)([(,)]|$)/g;return function n(){for(let i=[];;){let r=t.exec(e);if("("===r[2]?(i.push(r[1].trim()+"("+n().join(",")+")"),r=t.exec(e)):i.push(r[1].trim()),[",",")"].includes(r[2])&&r[1].endsWith("%")&&(i[i.length-1]+=r[1]),","!==r[2])return i.filter(Boolean)}}()}(e).map(Q$)}function eq(e){return e.match(/(\d(\.\d+)?)+/g).map((e=>parseFloat(e)))}function tq(e){return eq(e)[3]}function nq(e){const t=e,{color:n,type:i}=t,r=x(t,["color","type"]);if(i!==G$.color)return null;const o=[{length:"0%",color:n},{length:"100%",color:n}];return b(w({},r),{color:n,type:G$.linear,colorStops:o,orientation:90})}function iq(e,t){const{left:n,right:i}=function(e,t){const n=e=>{const{color:t,colorStops:n,type:i}=e;return i===G$.image||(i===G$.color?1===tq(t):i===G$.linear?!n.map((e=>tq(e.color))).some((e=>1!==e)):void 0)},i=(e=e.filter((e=>e.type!==G$.image))).findIndex(n);-1!==i&&(e=e.slice(0,i+1));const r=t.findIndex(n);if(-1!==r&&(t=t.slice(0,r+1)),t[t.length-1].type===G$.image){const n=LH(t[t.length-1]);e.push(n)}return{left:e,right:t}}(e,t);if(n.length!==i.length){const e=Math.max(n.length,i.length),t=Math.min(n.length,i.length),r=new Array(e-t).fill(LH(J$));(n.length===t?n:i).splice(Math.floor(t/2),0,...r)}U$(n.length===i.length);for(let r=0;r<n.length;r++){const e=nq(n[r]);e&&(n[r]=e);const t=nq(i[r]);t&&(i[r]=t);const o=i[r],s=n[r];if(o.type===G$.image&&U$(s.type===G$.image),s.type===G$.linear&&o.type===G$.linear){const e=o.colorStops,t=s.colorStops;if(t.length!==e.length){const n=Math.max(t.length,e.length),i=Math.min(t.length,e.length),r=n-i,o=t.length===i?t:e,s=o[o.length-1],a=parseInt(s.length.replace("%","")),l=new Array(r).fill({length:"",color:s.color}).map(((e,t)=>{const n=`${(100-a)/r*t+a}%`;return b(w({},e),{length:n})}));o.splice(Math.ceil(i/2),0,...l)}}}return{left:n,right:i}}function rq(e){const{colorStops:t,type:n,orientation:i}=e,r=[];let o=0;return n!==G$.linear||(o++,r.push(i),t.forEach((e=>{const{color:t,length:n}=e,i=parseInt(n),s=eq(t);o+=5,r.push(i,...s)}))),{count:o,inits:r}}function oq(e){return Z$(e)}function sq(e){return B$(e)}gH(oq,(function(e,t){const{left:n,right:i}=iq(e,t);return{left:n.reduce(((e,t)=>{const{inits:n}=rq(t);return e.push(...n),e}),[]),right:i.reduce(((e,t)=>{const{inits:n}=rq(t);return e.push(...n),e}),[]),format(e){let t=0;return X$(i.map((n=>{const{count:i}=rq(n),r=e.slice(t,t+i);t+=i;return n.type===G$.linear?function(e,t){const n=e,{type:i,colorStops:r}=n,o=x(n,["type","colorStops"]);if(i!==G$.linear)return;const s=t[0],a=r.map(((e,n)=>{const i=5*n+1,r=t.slice(i,i+5),[o,...s]=r;return{length:`${o}%`,color:function(e){const[t,n,i,r]=e;return`rgba(${t},${n},${i},${r})`}(s)}}));return b(w({},o),{type:i,colorStops:a,orientation:s})}(n,r):n})))}}}),["background-image"]),SH.bind(null,oq),gH((function(e){return function(e){const t=/blur\((\d+)px\)?/;if(!t.test(e))return 0;const[,n]=t.exec(e);return parseInt(n)}(e)}),(function(e,t){return{left:e,right:t,format:sq}}),["filter","backdrop-filter"]);gH(String,(function(e,t){const n=[e,t].find((e=>"none"!==e));return e!==t&&[e,t].some((e=>"none"===e))?{left:1,right:1,format:()=>n}:null}),["display"]);const aq=["background-color","background-image","background-size","border-width","border-color","border-image-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-left-color","border-left-width","border-right-color","border-right-width","border-top-color","border-top-left-radius","border-top-right-radius","border-top-width","top","right","bottom","left","width","height","margin-bottom","margin-left","margin-right","margin-top","padding-bottom","padding-left","padding-right","padding-top","max-height","max-width","min-height","min-width","z-index","box-shadow","outline-width","outline-offset","font-size","--font-size-min","--font-size-max","font-weight","letter-spacing","line-height","word-spacing","text-decoration-color","text-indent","vertical-align","text-shadow","rotate","scale","skew","translate","perspective","perspective-origin","transform-origin","transform","color","clip","clip-path","filter","backdrop-filter","opacity","visibility","display","mask-border","mask-position","mask-size","shape-margin","shape-image-threshold","shape-outside","fill","flood-color","lighting-color","outline-color","stop-color","stroke","stroke-dashoffset","stroke-dasharray","flex-grow","flex-shrink","flex-basis","background-position","object-position"];var lq,cq,dq,uq,hq,pq,fq,gq,mq,_q,vq,yq,wq;!function(e){e.document="document",e.scroll="scroll"}(lq||(lq={})),function(e){e.normal="normal",e.reverse="reverse",e.alternate="alternate",e["alternate-reverse"]="alternate-reverse"}(cq||(cq={})),function(e){e.none="none",e.forwards="forwards",e.backwards="backwards",e.both="both",e.auto="auto"}(dq||(dq={})),function(e){e.group="group",e.sequence="sequence"}(uq||(uq={})),function(e){e.appearance="appearance",e.transition="transition"}(hq||(hq={})),function(e){e.start="start",e.end="end"}(pq||(pq={})),function(e){e.vertical="vertical",e.horizontal="horizontal",e.block="block",e.inline="inline"}(fq||(fq={})),function(e){e.enter="enter",e.exit="exit"}(gq||(gq={})),function(e){e.load="load",e.click="click",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.intersection="@intersection",e.loadScroll="@loadScroll",e.appear="@appear",e.mousedown="mousedown",e.mouseup="mouseup"}(mq||(mq={})),(vq=_q||(_q={})).inactive="inactive",vq.before="before",vq.active="active",vq.after="after",(wq=yq||(yq={})).idle="idle",wq.running="running",wq.paused="paused",wq.finished="finished",Object.freeze([]);class bq extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function xq(e){if((t=e)&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]){const t=[];for(const n of e)if(n)try{n.dispose()}catch(_8){t.push(_8)}if(1===t.length)throw t[0];if(t.length>1)throw new bq(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e;var t}class Cq{constructor(){FW(this,"_toDispose",new Set),FW(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{xq(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}FW(Cq,"DISABLE_DISPOSED_WARNING",!1);class kq{constructor(){FW(this,"_store",new Cq),this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}FW(kq,"None",Object.freeze({dispose(){}}));class Eq{constructor(){FW(this,"_value"),FW(this,"_isDisposed",!1)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null==(t=this._value)||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null==(e=this._value)||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class Sq{constructor(){FW(this,"dispose",(()=>{})),FW(this,"unset",(()=>{})),FW(this,"isset",(()=>!1))}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>void 0!==t,this.dispose=()=>{t&&(t(),t=void 0)},this}}const Iq=new WeakMap;function Oq(e){const t=e.effect.target;Iq.has(t)||Iq.set(t,[]);Iq.get(t).push(e)}function Tq(e){const t=e.effect.target,n=Iq.get(t),i=n.indexOf(this);-1!==i&&n.splice(i,1)}let Mq=1;const Nq=new WeakMap;class Aq extends kq{constructor(){super(...arguments),FW(this,"animations",[]),FW(this,"pendingEffects",new Set),FW(this,"pendingTask")}asDocumentTimeline(){return null}attachAnimation(e){this.animations.includes(e)||this.animations.push(e),function(e){Nq.has(e)&&sH(),Nq.set(e,Mq++)}(e)}detachAnimation(e){const t=this.animations.indexOf(e);t>-1&&this.animations.splice(t),this.animations.length<=0&&this.dispose()}applyDirtiedAnimation(e){Oq(e),this.doTick(!1,[e]),this.applyPendingEffects()}animationFrameCallback(){this.pendingTask=null,this.doTick(!0,this.animations),this.applyPendingEffects()}doTick(e,t){const{currentTime:n}=this;this.pendingTask&&(cancelAnimationFrame(this.pendingTask),this.pendingTask=null);let i=!1;const r=[],o=[];for(const s of t){s.tick(n);const{inEffect:e}=s.effect;e?Oq(s):Tq(s),this.pendingEffects.add(s.effect);const t=s.playState;t===yq.running&&(i=!0);e||t===yq.running?r.push(s):o.push(s)}return this.monotonical&&i&&(this.pendingTask=requestAnimationFrame((()=>this.animationFrameCallback()))),[r,o]}applyPendingEffects(){for(const e of this.pendingEffects)e.apply();this.pendingEffects.clear()}}function Rq(e){return aH(e)}function Dq(e){return!aH(e)}const Pq=performance.now();class Lq extends Aq{constructor(){super(),FW(this,"zeroTime"),this.zeroTime=Pq}attachAnimation(e){super.attachAnimation(e),e.ready.then((()=>{this.applyDirtiedAnimation(e)}))}get currentTime(){return Rq(this.zeroTime)?null:(performance.now()-this.zeroTime)/1e3}get phase(){return _q.active}get monotonical(){return!0}asDocumentTimeline(){return this}}var Uq,Fq,Bq,jq,Vq,zq,Kq,Wq;(Fq=Uq||(Uq={})).percentage="percentage",Fq.number="number",Fq.px="px";class Hq{static parse(e,t){sH()}}(jq=Bq||(Bq={})).length="length",jq.angle="angle",jq.time="time",jq.frequency="frequency",jq.resolution="resolution",jq.flex="flex",jq.percent="percent";class $q extends Hq{constructor(e,t){super(),this.value=e,this.unit=t}toString(){return`${this.value}${function(e){switch(e){case Uq.percentage:return"%";case"number":return"";default:return e.toLowerCase()}}(this.unit)}`}}(zq=Vq||(Vq={})).percent=function(e){return new $q(e,Uq.percentage)},zq.px=function(e){return new $q(e,Uq.px)},function(e){e.child=">",e.descendant=" ",e.sibling="~",e.attribute="[]",e.pseudoClass=":",e.pseudoElement=":"}(Kq||(Kq={})),function(e){e.visited="visited",e.active="active",e.hover="hover"}(Wq||(Wq={}));const qq={"backdrop-filter":[T$.webkit]};function Yq(e){const t=getComputedStyle(e);return!(e!==BW.scrollingElement&&("visible"===t.overflow||"clip"===t.overflow))}function Gq(e,t){const n="horizontal-tb"===getComputedStyle(e).writingMode;let i=t;return i===fq.block?i=n?fq.vertical:fq.horizontal:i===fq.inline&&(i=n?fq.horizontal:fq.vertical),i}function Xq(e){const t=Object.create(null);return aq.forEach((n=>{Reflect.set(t,n,e.getPropertyValue(n));(qq[n]||[]).forEach((i=>{const r=`${i}${n}`;Reflect.set(t,r,e.getPropertyValue(r))}))})),t}"function"==typeof requestIdleCallback&&"function"==typeof cancelIdleCallback||Object.freeze({didTimeout:!0,timeRemaining:()=>15});const Jq="mouseup",Qq="mousedown",Zq="mousemove",eY="wheel",tY="scroll";class nY{constructor(e,t,n,i){FW(this,"_handler"),FW(this,"_node"),FW(this,"_type"),FW(this,"_options"),this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function iY(e,t,n,i){return new nY(e,t,n,i)}function rY(e){const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof HTMLElement||e instanceof n}function oY(e,t){let n=0,i=0,r=e;for(;r&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop)&&(n+=r.offsetLeft-("BODY"!==r.tagName?r.scrollLeft:0),i+=r.offsetTop-("BODY"!==r.tagName?r.scrollTop:0),r=r.offsetParent,!r||!t||r!==t););return{top:i,left:n}}function sY(e){return"none"!==getComputedStyle(e).display}function aY(e){return cH(e)}class lY extends Aq{constructor(e=Object.create(null)){super(),FW(this,"_source"),FW(this,"_updateEvent",this._register(new Eq)),FW(this,"orientation"),FW(this,"delcaredScrollOffsets"),this.orientation=e.orientation||fq.block,this.delcaredScrollOffsets=(e.scrollOffsets||[]).map((e=>{if(aY(e))return e;if(e.threshold){if(!isFinite(e.threshold))throw TypeError("Invalid threshold.");if(e.threshold<0||e.threshold>1)throw TypeError("threshold must be in the range [0, 1]")}return w({edge:pq.start,threshold:0},e)})),this.source=e.source||BW.body,this.source||oH()}get monotonical(){return!1}attachAnimation(e){super.attachAnimation(e),e.ready.then((()=>{this.applyDirtiedAnimation(e)}))}detachAnimation(e){var t;null==(t=this._updateEvent.value)||t.dispose(),super.detachAnimation(e)}get source(){return this._source}set source(e){this.source&&this._updateEvent.clear(),e&&(this._source=e,this._updateEvent.value=iY(e===BW.body?BW:e,tY,this.tickAnimations.bind(this))),this.tickAnimations()}tickAnimations(){for(const e of this.animations)e.tick(this.currentTime),e.effect.apply()}get scrollOffsets(){return this.delcaredScrollOffsets}resolveScrollTimelineOffsets(){const e=[];let t=!0;0===this.scrollOffsets.length?(e.push(this.resolveScrollTimelineOffset("auto",t)),t=!1,e.push(this.resolveScrollTimelineOffset("auto",t))):1===this.scrollOffsets.length&&(e.push(this.resolveScrollTimelineOffset("auto",t)),t=!1);for(const n of this.scrollOffsets){const i=this.resolveScrollTimelineOffset(n,t);if(null===i)return[];e.push(i),t=!1}return e}resolveScrollTimelineOffset(e,t){return aY(e)?this.resolveContainerBasedOffset(e,t):this.resolveElementBasedOffset(e,t)}resolveContainerBasedOffset(e,t){if(!this.source||!sY(this.source)||!Yq(this.source))return null;const n=uY(this.source,this.orientation);if("auto"===e){return dY(new $q(t?0:100,Uq.percentage),n)}if(e){return dY(function(e,t=!0){if(e instanceof Hq)return e instanceof $q?e:null;if(!t)return null;const n=e.trim().match(/^(-?[0-9]*\.?[0-9]*)(px|%)$/);if(n){const e=n[1];let t;const i=n[2];return i?"%"===i?t=Uq.percentage:"px"===i?t=Uq.px:sH():t=Uq.number,new $q(+e,t)}return null}(e),n)}return null}resolveElementBasedOffset(e,t){const{source:n}=this;if(!n||!sY(n)||!Yq(n))return null;const{target:i}=e,r=e.threshold;if(!i||!sY(i))return null;let o=i.parentElement;for(;o!==BW.body&&!Yq(o);)o=o.parentElement;if(o!==n)return null;const{top:s,left:a}=oY(i,n);let l;const c=Gq(n,this.orientation);l=e.edge===pq.start?c===fq.vertical?s+i.clientHeight:a+i.clientWidth:c===fq.vertical?s-n.clientHeight:a-n.clientWidth;const d=r*(c===fq.vertical?i.clientHeight:i.clientWidth);e.edge===pq.start?l-=d:l+=d;return l=F$(0,l,uY(n,this.orientation)),l}get effectiveScrollOffsets(){return this.resolveScrollTimelineOffsets()}get phase(){if(!this.source)return _q.inactive;if(!sY(this.source))return _q.inactive;if(!Yq(this.source))return _q.inactive;const{effectiveScrollOffsets:e}=this;if(0===e.length)return _q.inactive;const t=cY(this.source,this.orientation),n=e[0],i=e[e.length-1];(aH(n)||aH(i))&&oH();const r=this.resolveContainerBasedOffset("auto",!1);return t<n?_q.before:t>=i&&i<r?_q.after:_q.active}calculateScrollTimelineProgress(e,t=this.resolveScrollTimelineOffsets()){let n;for(n=t.length-2;n>=0&&!(t[n]<=e&&e<t[n+1]);n--);const i=t[n];return(n+(e-i)/(t[n+1]-i))*(1/(t.length-1))}get duration(){return 1}get currentTime(){const{effectiveScrollOffsets:e}=this;if(!(this.source&&sY(this.source)&&Yq(this.source)&&e.length))return null;const t=cY(this.source,this.orientation),n=e[0],i=e[e.length-1];if((aH(n)||aH(i))&&oH(),t<n)return 0;if(t>=i)return this.duration;return this.calculateScrollTimelineProgress(t)*this.duration}}function cY(e,t){const n="horizontal-tb"===getComputedStyle(e).writingMode;let i=e.scrollTop;return(t===fq.horizontal||t===fq.inline&&n||t===fq.block&&!n)&&(i=Math.abs(e.scrollLeft)),i}function dY(e,t){if(e instanceof $q){if(e.unit===Uq.percentage)return e.value*t/100;if(e.unit===Uq.px)return e.value;throw TypeError("Unhandled unit type "+e.unit)}throw TypeError("Unsupported value type: "+typeof e)}function uY(e,t){const n=Gq(e,t);return n===fq.vertical?e.scrollHeight-e.clientHeight:n===fq.horizontal?e.scrollWidth-e.clientWidth:void 0}var hY,pY;function fY(e){return 1-gY(1-e)}function gY(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function mY(e){return e}function _Y(e){return function(t){return Math.pow(t,e)}}function vY(e){return function(t){return 1-Math.pow(1-t,e)}}function yY(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}}(pY=hY||(hY={})).BackIn="backIn",pY.BackOut="backOut",pY.BackInOut="backInOut",pY.BounceIn="bounceIn",pY.BounceOut="bounceOut",pY.BounceInOut="bounceInOut",pY.CircularIn="circularIn",pY.CircularOut="circularOut",pY.CircularInOut="circularInOut",pY.ElasticIn="elasticIn",pY.ElasticOut="elasticOut",pY.ElasticInOut="elasticInOut",pY.ExponentialIn="exponentialIn",pY.ExponentialOut="exponentialOut",pY.ExponentialInOut="exponentialInOut",pY.Linear="linear",pY.QuadraticIn="quadraticIn",pY.QuadraticOut="quadraticOut",pY.QuadraticInOut="quadraticInOut",pY.CubicIn="cubicIn",pY.CubicOut="cubicOut",pY.CubicInOut="cubicInOut",pY.QuarticIn="quarticIn",pY.QuarticOut="quarticOut",pY.QuarticInOut="quarticInOut",pY.QuinticIn="quinticIn",pY.QuinticOut="quinticOut",pY.QuinticInOut="quinticInOut",pY.SinusoidalIn="sinusoidalIn",pY.SinusoidalOut="sinusoidalOut",pY.SinusoidalInOut="sinusoidalInOut";const wY=_Y(2),bY=vY(2),xY=yY(2),CY=_Y(3),kY=vY(3),EY=yY(3),SY=_Y(4),IY=vY(4),OY=yY(4),TY=_Y(5),MY=vY(5),NY=yY(5);var AY=Object.freeze(Object.defineProperty({__proto__:null,get EaseType(){return hY},backIn:function(e){const t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){const t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:fY,bounceOut:gY,bounceInOut:function(e){return e<.5?.5*fY(2*e):.5*gY(2*e-1)+.5},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){let t,n=.1;const i=.4;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=i*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},linear:mY,quadraticIn:wY,quadraticOut:bY,quadraticInOut:xY,cubicIn:CY,cubicOut:kY,cubicInOut:EY,quarticIn:SY,quarticOut:IY,quarticInOut:OY,quinticIn:TY,quinticOut:MY,quinticInOut:NY,sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return-.5*(Math.cos(Math.PI*e)-1)}},Symbol.toStringTag,{value:"Module"}));function RY(e,t,n,i){return e<0||e>1||n<0||n>1?mY:function(r){if(r<=0){let o=0;return e>0?o=t/e:!t&&n>0&&(o=i/n),o*r}if(r>=1){let o=0;return n<1?o=(i-1)/(n-1):1===n&&e<1&&(o=(t-1)/(e-1)),1+o*(r-1)}let o,s=0,a=1;function l(e,t,n){return 3*e*(1-n)*(1-n)*n+3*t*(1-n)*n*n+n*n*n}for(;s<a;){o=(s+a)/2;const c=l(e,n,o);if(Math.abs(r-c)<1e-5)return l(t,i,o);c<r?s=o:a=o}return l(t,i,o)}}const DY={ease:RY(.25,.1,.25,1),"ease-in":RY(.42,0,1,1),"ease-out":RY(0,0,.58,1),"ease-in-out":RY(.42,0,.58,1)};function PY(e){if("linear"===e)return mY;if(Array.isArray(e)&&e.every((e=>isFinite(e)))){return RY(...e)}if(cH(e)){if(Reflect.has(AY,e))return Reflect.get(AY,e);if(Reflect.has(DY,e))return Reflect.get(DY,e)}return mY}const LY={delay:0,duration:0,easing:"linear",endDelay:0,fill:dq.auto,iterationStart:0,iterations:1,direction:cq.normal};class UY{constructor(e){FW(this,"totalDuration"),FW(this,"easingFunction"),FW(this,"delay"),FW(this,"duration"),FW(this,"easing"),FW(this,"endDelay"),FW(this,"fill"),FW(this,"iterationStart"),FW(this,"iterations"),FW(this,"direction"),FW(this,"activeDuration");const t=w(w({},LY),e);UH(t).forEach((e=>{Reflect.set(this,e,t[e])})),this.activeDuration=this.duration*this.iterations,this.easingFunction=PY(t.easing)}}function FY(e,t,n){e.style.setProperty(t,n)}function BY(e,t){e.style.removeProperty(t)}function jY(e,t){return"CSSStyleDeclaration"===e.constructor.name?e.getPropertyValue(t):e[t]}class VY{constructor(e,t,n){FW(this,"animation"),FW(this,"target"),FW(this,"effectTiming"),FW(this,"iterationProgress"),FW(this,"interpolations"),FW(this,"keyframes"),FW(this,"propertySpecificKeyframeGroups"),FW(this,"reservedStyle"),FW(this,"_cleared",!1),FW(this,"currentDirection"),FW(this,"beforeFlag"),this.target=e;const i=new UY(n);this.effectTiming=i;const r=t.reduce(((e,t)=>(UH(t).forEach((n=>{if("unit"===n)return;const i=t[n];Reflect.set(e,n,i)})),e)),{});this.keyframes=function(e,t,n){const i=t.reduce(((e,t)=>e+(isFinite(t.unit)?t.unit:1)),0);let r,o=0;const s=(e,t,n)=>{if(!r){const t=GW.get(e)||[getComputedStyle(e)];r=t[t.length-1]}let i=jY(r,t);if("transform"===t&&"none"===i)return z$(n);if(!i){const e=qq[t]||[];for(let n=0;n<e.length;n++){const o=`${e[n]}${t}`;if(i=jY(r,o),i)break}}return i||""},a=e=>e.replace(/rgb\((\d+),\s*(\d+),\s*(\d+)\)?/g,((...e)=>{const[,t,n,i]=e;return`rgba(${t},${n},${i},1)`}));return t.reduce(((t,r)=>{const l=Object.create(null),c=Object.create(null);return UH(r).forEach((t=>{if("unit"===t)return;const n=r[t];return cH(n)?(l[t]=a(s(e,t,n)),void(c[t]=a(n))):(U$(n[0]||n[1]),Array.isArray(n)&&2===n.length?(l[t]=a(n[0]||s(e,t)),void(c[t]=a(n[1]||s(e,t)))):void oH())})),l.easing=n.easing,c.easing=n.easing,l.offset=o/i,o+=isFinite(r.unit)?r.unit:1,c.offset=o/i,t.push(l),t.push(c),t}),[])}(e,t,i),this.propertySpecificKeyframeGroups=function(e){const t=Object.create(null);for(const n of e){const e=UH(n);for(const i of e){if("offset"===i||"easing"===i||"computedOffset"===i)continue;const e={offset:n.offset,easing:n.easing,value:n[i]};Reflect.has(t,i)||(t[i]=[]),t[i].push(e)}}for(const n of UH(t)){const e=t[n];if(0!==e[0].offset||e.length>1&&1!==e[e.length-1].offset)throw new DOMException("Partial keyframes are not supported","NotSupportedError")}return t}(this.keyframes);const{interpolations:o,unhandleKeys:s}=function(e){const t=[],n=[];for(const i of UH(e)){const r=e[i];for(let e=0;e<r.length-1;e++){let o=e,s=e+1;const a=r[o].offset,l=r[s].offset;let c=a,d=l;0===e&&(c=-1/0,0===l&&(s=o)),e===r.length-2&&(d=1/0,1===a&&(o=s));const u=mH(i,r[o].value,r[s].value);u?t.push({applyFrom:c,applyTo:d,startOffset:r[o].offset,endOffset:r[s].offset,easingFunction:PY(r[o].easing),property:i,interpolation:u}):n.push(i)}}return t.sort(((e,t)=>e.startOffset-t.startOffset)),{interpolations:t,unhandleKeys:n}}(this.propertySpecificKeyframeGroups);this.interpolations=o,this.reservedStyle=s.map((e=>{const t=r[e];return{key:e,value:dH(t)?t[0]:t}}))}getTiming(){return this.effectTiming}interpolate(){if(Dq(this.iterationProgress)){const{iterationProgress:e}=this;for(const t of this.interpolations)if(e>=t.applyFrom&&e<t.applyTo){const n=e-t.startOffset,i=t.endOffset-t.startOffset,r=0===i?0:t.easingFunction(n/i),o=t.interpolation(r);FY(this.target,t.property,o);const s=qq[t.property];s&&s.length>0&&s.forEach((e=>{FY(this.target,`${e}${t.property}`,o)}))}for(const t of this.reservedStyle)FY(this.target,t.key,t.value)}else{for(const e of UH(this.propertySpecificKeyframeGroups))BY(this.target,e);for(const e of UH(this.reservedStyle))BY(this.target,e)}}get localTime(){return this.animation?this.animation.currentTime:null}get endTime(){return this.effectTiming.delay+this.effectTiming.activeDuration+this.effectTiming.endDelay}get phase(){const{localTime:e}=this;if(Rq(e))return _q.inactive;const{endTime:t}=this,{delay:n,activeDuration:i}=this.effectTiming;return n>=0&&e<Math.min(n,t)||n<0&&e<Math.abs(n)?_q.before:n>=0&&e>Math.min(n+i,t)?_q.after:_q.active}inPlay(){return this.phase===_q.active&&this.animation&&this.animation.playState!==yq.finished}current(){return this.inPlay()||this.animation&&this.animation.playbackRate>0&&this.phase===_q.before||this.animation&&this.animation.playbackRate<0&&this.phase===_q.after}get inEffect(){return Dq(this.activeTime)}get activeTime(){const{phase:e,localTime:t}=this,{fill:n,activeDuration:i,delay:r}=this.effectTiming;return e===_q.before?n===dq.backwards||n===dq.both?Math.max(t-r,0):null:e===_q.active?t-r:e===_q.after?n===dq.forwards||n===dq.both?Math.max(Math.min(t-r,i),0):null:e===_q.inactive?null:void oH()}get iterationDuration(){return this.effectTiming.duration}get iterationCount(){return this.effectTiming.iterations}get iterationStart(){return this.effectTiming.iterationStart}get activeDuration(){return this.effectTiming.activeDuration}get overallProgress(){const{activeTime:e,iterationDuration:t}=this;if(Rq(e))return null;let n;return n=0===t?this.phase===_q.before?0:this.iterationCount:e/t,n+this.iterationStart}get simpleIterationProgress(){const{overallProgress:e}=this;if(Rq(e))return null;let t;t=e===1/0?this.iterationStart%1:e%1;const{phase:n,activeTime:i,activeDuration:r,iterationCount:o}=this;return 0!==t||n!==_q.active&&n!==_q.after||i!==r||0===o||(t=1),t}get currentIteration(){const{activeTime:e}=this;return Rq(e)?null:this.phase===_q.after&&this.iterationCount===1/0?1/0:1===this.simpleIterationProgress?Math.floor(this.overallProgress)-1:Math.floor(this.overallProgress)}get playbackDirection(){return this.effectTiming.direction}get directedProgress(){const{simpleIterationProgress:e}=this;if(Rq(e))return null;let t=this.playbackDirection;if(this.playbackDirection!==cq.normal&&this.playbackDirection!==cq.reverse){let e=this.currentIteration;this.playbackDirection===cq["alternate-reverse"]&&(e+=1),t=e===1/0||e%2==0?cq.normal:cq.reverse}return this.currentDirection=t,t===cq.normal?e:1-e}get transformedProgress(){const{directedProgress:e,currentDirection:t,phase:n}=this;if(Rq(e))return null;const i=t===cq.normal,r=n===_q.before&&!0===i||n===_q.after&&!1===i;return this.beforeFlag=r,e}apply(){const{localTime:e}=this;if(!Rq(e))return this._cleared||(this.iterationProgress=this.transformedProgress,this.interpolate()),!aH(this.iterationProgress)}clear(){this.iterationProgress=null,this._cleared=!0,this.interpolate()}}function zY(e,t){return(t||document).querySelector("."+e)}const KY=class{constructor(e){FW(this,"element"),FW(this,"next"),FW(this,"prev"),this.element=e,this.next=KY.Undefined,this.prev=KY.Undefined}};let WY=KY;FW(WY,"Undefined",new KY(void 0));class HY{constructor(){FW(this,"_first",WY.Undefined),FW(this,"_last",WY.Undefined),FW(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===WY.Undefined}clear(){this._first=WY.Undefined,this._last=WY.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new WY(e);if(this._first===WY.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==WY.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==WY.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==WY.Undefined&&e.next!==WY.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===WY.Undefined&&e.next===WY.Undefined?(this._first=WY.Undefined,this._last=WY.Undefined):e.next===WY.Undefined?(this._last=this._last.prev,this._last.next=WY.Undefined):e.prev===WY.Undefined&&(this._first=this._first.next,this._first.prev=WY.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==WY.Undefined;)yield e.element,e=e.next}}let $Y,qY,YY,GY=!1,XY=!1,JY="en";const QY="object"==typeof self?self:"object"==typeof global?global:{};let ZY;void 0!==QY.vscode&&void 0!==QY.vscode.process?ZY=QY.vscode.process:"undefined"!=typeof process&&(ZY=process);const eG="string"==typeof(null==(u=null==ZY?void 0:ZY.versions)?void 0:u.electron)&&"renderer"===(null==ZY?void 0:ZY.type);if(eG&&(null==ZY||ZY.sandboxed),"object"!=typeof navigator||eG)if("object"==typeof ZY){ZY.platform,ZY.platform,GY="linux"===ZY.platform,GY&&ZY.env.SNAP&&ZY.env.SNAP_REVISION,ZY.env.CI||ZY.env.BUILD_ARTIFACTSTAGINGDIRECTORY,$Y="en",JY="en";const e=ZY.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];$Y=t.locale,JY=n||"en",qY=t._translationsConfigFile}catch(_8){}}else console.error("Unable to resolve platform.");else YY=navigator.userAgent,YY.indexOf("Windows"),YY.indexOf("Macintosh"),(YY.indexOf("Macintosh")>=0||YY.indexOf("iPad")>=0||YY.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,GY=YY.indexOf("Linux")>=0,XY=!0,$Y=navigator.language,JY=$Y;var tG;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(tG||(tG={})),XY&&QY.importScripts;const nG=YY,iG=JY;var rG,oG;!function(e){e.value=function(){return iG},e.isDefaultVariant=function(){return 2===iG.length?"en"===iG:iG.length>=3&&("e"===iG[0]&&"n"===iG[1]&&"-"===iG[2])},e.isDefault=function(){return"en"===iG}}(rG||(rG={})),(()=>{if("function"==typeof QY.postMessage&&!QY.importScripts){const e=[];QY.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),QY.postMessage({vscodeScheduleAsyncWork:i},"*")}}})(),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(oG||(oG={}));const sG=!!(nG&&nG.indexOf("Chrome")>=0);nG&&nG.indexOf("Firefox"),!sG&&nG&&nG.indexOf("Safari"),nG&&nG.indexOf("Edg/"),nG&&nG.indexOf("Android");const aG=QY.performance&&"function"==typeof QY.performance.now;class lG{constructor(e){FW(this,"_highResolution"),FW(this,"_startTime"),FW(this,"_stopTime"),this._highResolution=aG&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new lG(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?QY.performance.now():Date.now()}}const cG=new class{constructor(){FW(this,"unexpectedErrorHandler"),FW(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function dG(e){(function(e){if(e instanceof uG)return!0;return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message})(e)||cG.onUnexpectedError(e)}class uG extends Error{constructor(){super("Canceled"),this.name=this.message}}var hG;!function(e){function t(e){return(t,n=null,i)=>{let r=!1;const o=e((e=>{if(!r)return o?o.dispose():r=!0,t.call(n,e)}),null,i);return r&&o.dispose(),o}}function n(e){let t;const n=new _G({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}e.None=()=>kq.None,e.once=t,e.map=function(e,t){return n(((n,i=null,r)=>e((e=>n.call(i,t(e))),null,r)))},e.filter=function(e,t){return n(((n,i=null,r)=>e((e=>t(e)&&n.call(i,e)),null,r)))},e.snapshot=n,e.toPromise=function(e){return new Promise((n=>t(e)(n)))}}(hG||(hG={}));const pG=class{constructor(e){FW(this,"_name"),FW(this,"_stopWatch"),FW(this,"_listenerCount",0),FW(this,"_invocationCount",0),FW(this,"_elapsedOverall",0),this._name=`${e}_${pG._idPool++}`}start(e){this._stopWatch=new lG(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let fG=pG;FW(fG,"_idPool",0);class gG{constructor(e){this.value=e}static create(){var e;return new gG(null!=(e=(new Error).stack)?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class mG{constructor(e,t,n){FW(this,"subscription",new Sq),this.callback=e,this.callbackThis=t,this.stack=n}invoke(e){this.callback.call(this.callbackThis,e)}}class _G{constructor(e){var t;FW(this,"_options"),FW(this,"_leakageMon"),FW(this,"_perfMon"),FW(this,"_disposed",!1),FW(this,"_event"),FW(this,"_deliveryQueue"),FW(this,"_listeners"),this._options=e,this._leakageMon=void 0,this._perfMon=(null==(t=this._options)?void 0:t._profName)?new fG(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(),null==(n=null==(t=this._options)?void 0:t.onLastListenerRemove)||n.call(t),null==(i=this._leakageMon)||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,r,o;this._listeners||(this._listeners=new HY);const s=this._listeners.isEmpty();let a,l;s&&(null==(i=this._options)?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(l=gG.create(),a=this._leakageMon.check(l,this._listeners.size+1));const c=new mG(e,t,l),d=this._listeners.push(c);s&&(null==(r=this._options)?void 0:r.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null==(o=this._options)?void 0:o.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,t);const u=c.subscription.set((()=>{if(a&&a(),!this._disposed&&(d(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}));return n instanceof Cq?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new HY);for(const t of this._listeners)this._deliveryQueue.push([t,e]);for(null==(t=this._perfMon)||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{e.invoke(t)}catch(_8){dG(_8)}}null==(n=this._perfMon)||n.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}class vG extends kq{constructor(e,t,n){super(),FW(this,"_event",this._register(new _G)),FW(this,"listeners",this._register(new Cq)),FW(this,"firedCount",0),this.model=e,this.target=t,this.count=n}deactivate(){this.listeners.clear()}get event(){return this._event.event}start(e){const{running:t,reversingShorteningFactor:n}=this;t&&t.playState!==yq.finished&&t.pause();const i=function(e,t=1,n){const i=LG(e.timeline),r=LH(e.effects);n&&Reflect.set(r.timing,"fill",n);const o=UG(r,t),s=new NG(o,i);return tH.set(s,e),s}(this.model,n,e);this.running=i,t&&(t.cancel(),this.completed=t),i.ready.then((()=>{i.play(),this.fire(i)}))}fire(e){this.firedCount<this.count&&(this._event.fire({trigger:this,animation:e}),e.finished.finally((()=>{this.firedCount++,this.running===e&&(this.running=void 0,this.completed=e),this.firedCount>=this.count&&this.deactivate()})))}}const yG=new class extends kq{constructor(){super(),FW(this,"_document"),FW(this,"_moveListener"),FW(this,"_eventEnterEmitter",new _G),FW(this,"_eventLeaveEmitter",new _G),FW(this,"_enterTargets",new Set),FW(this,"_leaveTargets",new Set),FW(this,"_prevHoverTargets",new Set),this._document=document}hasEvent(){return void 0!==this._moveListener}addEvent(){this._moveListener||(this._moveListener=this._register(iY(this._document,Zq,this.handleMove.bind(this))))}removeEvent(){this._moveListener&&(this._moveListener.dispose(),this._moveListener=void 0)}provideDocument(e){this._document=e}dispose(){super.dispose(),this.removeEvent(),this._enterTargets.clear(),this._leaveTargets.clear(),this._eventEnterEmitter.dispose(),this._eventLeaveEmitter.dispose()}handleMove(e){const t=this._prevHoverTargets,n=new Set(e.composedPath().filter(rY));for(const i of this._enterTargets)!t.has(i)&&n.has(i)&&this._eventEnterEmitter.fire({target:i});for(const i of this._leaveTargets)t.has(i)&&!n.has(i)&&this._eventLeaveEmitter.fire({target:i});this._prevHoverTargets=n}addEnterTarget(e,t){return this._enterTargets.add(e),this.handleBindTargetsChange(),this._eventEnterEmitter.event((n=>{n.target===e&&t()}))}addLeaveTarget(e,t){return this._leaveTargets.add(e),this.handleBindTargetsChange(),this._eventLeaveEmitter.event((n=>{n.target===e&&t()}))}removeEnterTarget(e){this._enterTargets.delete(e),this.handleBindTargetsChange()}removeLeaveTarget(e){this._leaveTargets.delete(e),this.handleBindTargetsChange()}handleBindTargetsChange(){this._enterTargets.size+this._leaveTargets.size<=0?this.removeEvent():this.addEvent()}};class wG extends vG{constructor(e,t,n,i){super(e,t,n),FW(this,"triggerTarget"),this.type=i;const{effects:r}=this.model;this.triggerTarget=zY(r.targetId,BW)}activate(){this.type===mq.mouseenter&&this.listeners.add(yG.addEnterTarget(this.target,(()=>{this.addComputedStyle(),this.start(),YW.set(this.triggerTarget,mq.mouseenter)}))),this.type===mq.mouseleave&&this.listeners.add(yG.addLeaveTarget(this.target,(()=>{this.deleteClickComputeStyle(),this.start(this.checkFillMode()),this.deleteComputeStyle(),YW.set(this.triggerTarget,mq.mouseleave)})))}deactivate(){super.deactivate(),this.type===mq.mouseenter&&yG.removeEnterTarget(this.target),this.type===mq.mouseleave&&yG.removeLeaveTarget(this.target),this.deleteComputeStyle()}checkFillMode(){if(HW.has(this.triggerTarget)){if((GW.get(this.triggerTarget)||[]).length>1)return dq.both}return null}addComputedStyle(){if(HW.has(this.triggerTarget)){const e=this.model.id,t=GW.get(this.triggerTarget)||[];if(t.some((t=>t.animationId===e)))return;const n=Xq(getComputedStyle(this.triggerTarget));GW.set(this.triggerTarget,[...t,b(w({},n),{animationId:e,triggerType:mq.mouseenter})])}}deleteComputeStyle(){if(GW.has(this.triggerTarget)){const e=GW.get(this.triggerTarget)||[];if(e.some((e=>e.triggerType===mq.mouseenter))){const t=e.filter((e=>e.triggerType!==mq.mouseenter));t.length<=0?GW.delete(this.triggerTarget):GW.set(this.triggerTarget,t)}}}deleteClickComputeStyle(){if(GW.has(this.triggerTarget)){const e=GW.get(this.triggerTarget)||[];if(e.some((e=>e.triggerType===mq.mousedown))){const t=e.filter((e=>e.triggerType!==mq.mousedown));t.length<=0?GW.delete(this.triggerTarget):GW.set(this.triggerTarget,t)}}}get running(){return JW.get(this.model)}get completed(){return QW.get(this.model)}set running(e){JW.set(this.model,e)}set completed(e){QW.set(this.model,e)}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==yq.finished&&(t.pause(),e=F$(0,t.effect.transformedProgress,1)),e}}var bG,xG,CG,kG,EG,SG;(xG=bG||(bG={}))[xG.NONE=0]="NONE",xG[xG.ENTER=1]="ENTER";class IG extends vG{constructor(e,t,n,i,r,o,s,a){super(e,t,n),FW(this,"prevScrollY"),FW(this,"fireOnActive",!1),FW(this,"targetStatus",0),this.animationTarget=i,this.orientation=r,this.edge=o,this.threshold=s,this.phase=a}activate(e=!1){this.activeCheck(),this.listeners.add(iY(jW,eY,this.handleScroll.bind(this))),this.fireOnActive=e,e&&this.handleScroll()}deactivate(){this.listeners.clear()}checkScroll(){const e=jW.scrollY,t=e-this.prevScrollY;this.prevScrollY=e;const{edge:n,threshold:i,target:r}=this;let o=r.parentElement;for(;o!==BW.body&&!Yq(o);)o=o.parentElement;const s=Gq(o,this.orientation);let a;n===pq.start?s===fq.vertical?a=oY(r).top+r.clientHeight:sH():s===fq.vertical?a=oY(r).top-jW.innerHeight:sH();const l=i*(s===fq.vertical?r.clientHeight:r.clientWidth);return n===pq.start?a-=l:a+=l,{scrollOffset:a,preOffsetY:t}}handleScroll(){const{phase:e}=this,t=jW.scrollY,{scrollOffset:n,preOffsetY:i}=this.checkScroll();t>n&&(0===this.targetStatus&&e===gq.enter&&i>=0&&this.canStart()&&this.start(),0===this.targetStatus&&(this.targetStatus=1)),t<n&&(1===this.targetStatus&&e===gq.exit&&i>=0&&this.canStart()&&this.start(),1===this.targetStatus&&(this.targetStatus=0))}activeCheck(){const{phase:e}=this,t=jW.scrollY,{scrollOffset:n}=this.checkScroll();t>n&&(e===gq.enter?this.targetStatus=0:this.targetStatus=1),t<n&&(e===gq.exit?this.targetStatus=0:this.targetStatus=1),this.handleScroll()}get running(){return ZW.get(this.model)}get completed(){return eH.get(this.model)}set running(e){ZW.set(this.model,e)}set completed(e){eH.set(this.model,e)}canStart(){const{phase:e}=this,{running:t,completed:n}=this,{target:i,model:r}=this;if(e===gq.enter){if(tH.get(t)===r)return!1;return!(zW.get(i)||[]).filter((e=>e!==r)).some((e=>tH.get(n)===e))}if(e===gq.exit){if(tH.get(t)===r)return!1;const e=zW.get(i)||[];if(!e.length)return!0;if(e.some((e=>tH.get(n)===e)))return!0}return!1}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==yq.finished&&this.phase===gq.enter&&(t.pause(),e=F$(0,t.effect.transformedProgress,1)),e}}(kG=CG||(CG={})).play="play",kG.pause="pause",(SG=EG||(EG={})).pending="pending",SG.resolved="resolved",SG.rejected="rejected";class OG{constructor(){FW(this,"promise"),FW(this,"state",EG.pending),FW(this,"nativeResolve"),FW(this,"nativeReject"),this.state=EG.pending,this.nativeResolve=this.nativeReject=null,this.promise=new Promise(((e,t)=>{this.nativeResolve=e,this.nativeReject=t}))}resolve(e){this.state=EG.resolved,this.nativeResolve(e)}reject(e){this.state=EG.rejected,this.promise.catch((()=>{})),this.nativeReject(e)}}const TG=[];let MG=!1;class NG extends kq{constructor(e,t=new Lq){super(),FW(this,"effect"),FW(this,"_timeline"),FW(this,"playbackRate",1),FW(this,"currentReadyPromise"),FW(this,"initialCurrentReadyPromise"),FW(this,"currentFinishedPromise"),FW(this,"_startTime"),FW(this,"holdTime"),FW(this,"readyTime"),FW(this,"holdPhase"),FW(this,"previousCurrentTime"),FW(this,"pendingTasks",new Map),FW(this,"pendingFinishNotificationSteps"),FW(this,"pendingPlaybackRate"),FW(this,"resetCurrentTimeOnResume",!1),FW(this,"_onfinish",this._register(new _G)),FW(this,"_oncancel",this._register(new _G)),FW(this,"_onremove",this._register(new _G)),this.initialCurrentReadyPromise=Promise.resolve(this),this.currentFinishedPromise=new OG,this.effect=e,e.animation=this,this.timeline=t}get timeline(){return this._timeline}set timeline(e){const t=this.timeline;if(e===t)return;const n=this.playState,i=this.currentTime,r=this.timeline?this.timeline.phase:null;let o;o=Rq(i)?null:0===this.endTime?0:i/this.endTime;const s=t instanceof lY,a=e&&e instanceof lY;this._timeline&&this._timeline.detachAnimation(this),this._timeline=e;const l=this.pending;if(this.resetCurrentTimeOnResume=!1,a){this.applyPendingPlaybackRate();const e=this.playbackRate>=0?0:this.effectEnd;n===yq.running||n===yq.finished?this.startTime=e:n===yq.paused&&(Dq(o)?(this.resetCurrentTimeOnResume=!0,this.startTime=null,this.holdTime=o*this.endTime,this.holdPhase=r):this.startTime=e),l&&(this.currentReadyPromise&&this.currentReadyPromise.state!==EG.resolved||(this.currentReadyPromise=new OG))}else s&&Dq(o)&&(this.currentTime=o*this.endTime);Dq(this.startTime)&&(this.holdTime=null,this.holdPhase=null),this.updateFinishedState(!1,!1),this.timeline&&this.timeline.attachAnimation(this)}get ready(){return this.currentReadyPromise?this.currentReadyPromise.promise:this.initialCurrentReadyPromise}get finished(){return this.currentFinishedPromise.promise}get onfinish(){return this._onfinish.event}get oncancel(){return this._oncancel.event}get onremove(){return this._onremove.event}get currentTime(){return Dq(this.holdTime)?this.holdTime:!this.timeline||this.timeline.phase===_q.inactive||Rq(this.startTime)?null:(this.timeline.currentTime-this.startTime)*this.playbackRate}silentlySetTheCurrentTime(e){if(Rq(e)&&Dq(this.currentTime))throw new TypeError;Dq(this.holdTime)||Rq(this.startTime)||!this.timeline||this.timeline.phase===_q.inactive||0===this.playbackRate?this.holdTime=e:this.startTime=this.timeline.currentTime-e/this.playbackRate,this.timeline&&this.timeline.phase!==_q.inactive||(this.startTime=null),this.previousCurrentTime=null}set currentTime(e){this.silentlySetTheCurrentTime(e),this.hasPendingTask(CG.pause)&&(this.holdTime=e,this.applyPendingPlaybackRate(),this.startTime=null,this.cancelPendingTask(CG.pause),this.currentReadyPromise.resolve(this)),this.updateFinishedState(!0,!1)}calculateCurrentTime(){const e=this.timeline.currentTime;return Rq(e)||Rq(this.startTime)?null:(e-this.startTime)*this.playbackRate}updateFinishedState(e,t){if(!this.timeline)return;const n=e?this.currentTime:this.calculateCurrentTime();Dq(n)&&Dq(this.startTime)&&!this.pending&&(this.playbackRate>0&&n>=this.effectEnd?e?this.holdTime=n:Dq(this.previousCurrentTime)?this.holdTime=Math.max(this.previousCurrentTime,this.effectEnd):this.holdTime=this.effectEnd:this.playbackRate<0&&n<=0?e?this.holdTime=n:Dq(this.previousCurrentTime)?this.holdTime=Math.min(this.previousCurrentTime,0):this.holdTime=0:0!==this.playbackRate&&this.timeline&&(e&&Dq(this.holdTime)&&(this.startTime=this.timeline.currentTime-this.holdTime/this.playbackRate),this.holdTime=null)),this.previousCurrentTime=this.currentTime;const i=this.playState===yq.finished;let r;var o;i&&(r=()=>{this.playState===yq.finished&&(this.currentFinishedPromise.resolve(this),this.pendingFinishNotificationSteps=null)},t?this.pendingFinishNotificationSteps&&(!function(e){const t=TG.indexOf(e);t>-1&&TG.splice(t,1)}(this.pendingFinishNotificationSteps),this.pendingFinishNotificationSteps=null,r()):this.pendingFinishNotificationSteps||(this.pendingFinishNotificationSteps=r,o=r,TG.push(o),MG||queueMicrotask((()=>{MG=!1;for(const e of TG)e();TG.length=0})))),!i&&this.currentFinishedPromise&&this.currentFinishedPromise.state===EG.resolved&&(this.currentFinishedPromise=new OG)}hasPendingTask(e){return this.pendingTasks.has(e)}queuePendingTask(e,t){this.pendingTasks.set(e,t)}cancelPendingTask(e){this.pendingTasks.delete(e)}runPendingTask(e){const t=this.pendingTasks.get(e);this.pendingTasks.delete(e),"function"==typeof t&&t()}get startTime(){return this._startTime}set startTime(e){Rq(this.timeline&&this.timeline.phase!==_q.inactive?this.timeline.currentTime:null)&&Dq(this.startTime)&&(this.holdTime=null);const t=this.currentTime;this.applyPendingPlaybackRate(),this._startTime=e,Dq(this.startTime)?0!==this.playbackRate&&(this.holdTime=null):this.holdTime=t,this.pending&&(this.cancelPendingTask(CG.pause),this.cancelPendingTask(CG.play),this.currentReadyPromise.resolve(this)),this.updateFinishedState(!0,!1)}applyPendingPlaybackRate(){this.pendingPlaybackRate&&(this.playbackRate=this.pendingPlaybackRate,this.pendingPlaybackRate=null)}get playState(){const e=this.currentTime;if(Rq(this.currentTime)&&Rq(this.startTime)&&!this.pending)return yq.idle;if(this.hasPendingTask(CG.pause)||Rq(this.startTime)&&!this.hasPendingTask(CG.play))return yq.paused;if(Dq(e)){if(this.playbackRate>0&&e>=this.effectEnd)return yq.finished;if(this.playbackRate<0&&e<=0)return yq.finished}return yq.running}get effectEnd(){const e=this.effect.getTiming(),t=e.delay+e.endDelay+e.iterations*e.duration;return Math.max(0,t)}get startDelay(){return this.effect.getTiming().delay}get endTime(){return Math.max(this.startTime+this.startDelay+this.activeDuration+this.endDelay,0)}get activeDuration(){return this.effect.getTiming().activeDuration}get endDelay(){return this.effect.getTiming().endDelay}get pending(){return this.hasPendingTask(CG.play)||this.hasPendingTask(CG.pause)}get effectivePlaybackRate(){return this.pendingPlaybackRate||this.playbackRate}createReadyPromise(){this.currentReadyPromise=new OG}resetPendingTasks(){this.pending&&(this.hasPendingTask(CG.play)&&this.cancelPendingTask(CG.play),this.hasPendingTask(CG.pause)&&this.cancelPendingTask(CG.pause),this.applyPendingPlaybackRate(),this.currentReadyPromise.reject(new DOMException("AbortError","AbortError")),this.currentReadyPromise=new OG)}cancel(){this.playState!==yq.idle&&(this.resetPendingTasks(),this.currentFinishedPromise.reject(new DOMException("AbortError","AbortError")),this.currentFinishedPromise=new OG),this.holdTime=null,this.startTime=null}finish(){if(0===this.effectivePlaybackRate||this.effectivePlaybackRate>0&&this.effectEnd===1/0)throw new DOMException("","InvalidStateError");this.applyPendingPlaybackRate();const e=this.playbackRate>0?this.effectEnd:0;this.silentlySetTheCurrentTime(e),Rq(this.startTime)&&this.timeline&&(this.startTime=this.timeline.currentTime-e/this.playbackRate),this.hasPendingTask(CG.pause)&&Dq(this.startTime)&&(this.holdTime=null,this.cancelPendingTask(CG.pause),this.currentReadyPromise.resolve(this)),this.hasPendingTask(CG.play)&&Dq(this.startTime)&&(this.cancelPendingTask(CG.play),this.currentReadyPromise.resolve(this)),this.updateFinishedState(!0,!0)}play(e=!0){const t=this.hasPendingTask(CG.pause);let n=!1,i=null;const r=!this.timeline.monotonical,o=this.currentTime;if(this.effectivePlaybackRate>0&&e&&(Rq(o)||o<0||o>=this.effectEnd))i=0;else if(this.effectivePlaybackRate<0&&e&&(Rq(o)||o<=0||o>this.effectEnd)){if(this.effectEnd===1/0)throw new DOMException("","InvalidStateError");i=this.effectEnd}else 0===this.effectivePlaybackRate&&Rq(o)&&(i=0);if(Dq(i)&&(r?(this.startTime=i,this.holdTime=null,this.applyPendingPlaybackRate()):this.holdTime=i),Dq(this.holdTime)&&(this.startTime=null),this.pending&&(this.cancelPendingTask(CG.pause),this.cancelPendingTask(CG.play),n=!0),Rq(this.holdTime)&&null===i&&!t&&null===this.pendingPlaybackRate)return;const s=this.ready;!1!==n||this.pending||this.createReadyPromise(),this.queuePendingTask(CG.play,(()=>{Rq(this.startTime)&&Rq(this.holdTime)&&oH();const e=this.readyTime;if(Dq(this.holdTime)){let t;this.applyPendingPlaybackRate(),t=this.playbackRate?e-this.holdTime/this.playbackRate:e,this.startTime=t,0!==this.playbackRate&&(this.holdTime=null)}else if(Dq(this.startTime)&&Dq(this.pendingPlaybackRate)){const t=(e-this.startTime)*this.playbackRate;let n;this.applyPendingPlaybackRate(),0===this.playbackRate&&(this.holdTime=t),n=0!==this.playbackRate?e-t/this.playbackRate:e,this.startTime=n}this.currentReadyPromise.state===EG.pending&&this.currentReadyPromise.resolve(this),this.updateFinishedState(!1,!1),this.timeline.applyDirtiedAnimation(this)})),s.then((()=>{this.readyTime=this.timeline.currentTime,this.runPendingTask(CG.play)}))}pause(){if(this.hasPendingTask(CG.pause))return;if(this.playState===yq.paused)return;let e=null;const t=!this.timeline.monotonical;if(Rq(this.currentTime))if(this.playbackRate>=0)e=0;else{if(this.effectEnd===1/0)throw new DOMException("","InvalidStateErro");e=this.effectEnd}Dq(e)&&(t?this.startTime=e:this.holdTime=e);let n=!1;this.hasPendingTask(CG.play)&&(this.cancelPendingTask(CG.play),n=!0),n||this.pending||this.createReadyPromise(),setTimeout((()=>{this.runPendingTask(CG.pause)})),this.queuePendingTask(CG.pause,(()=>{const e=this.timeline.currentTime;Dq(this.startTime)&&Rq(this.holdTime)&&(this.holdTime=(e-this.startTime)*this.playbackRate),this.applyPendingPlaybackRate(),this.startTime=null,this.currentReadyPromise.resolve(this),this.updateFinishedState(!1,!1),this.timeline.applyDirtiedAnimation(this)}))}tick(e){if(Rq(e))return;const t=this.playState;t!==yq.running&&t!==yq.finished||(this.currentTime=(e-this.startTime)*this.playbackRate,t===yq.finished&&0!==this.effectivePlaybackRate&&(this.holdTime=null),this.updateFinishedState(!1,!1))}}class AG extends vG{constructor(e,t,n,i){super(e,t,n),FW(this,"triggerTarget"),this.type=i;const{effects:r}=this.model;this.triggerTarget=zY(r.targetId,BW)}activate(){this.type===mq.mousedown&&this.listeners.add(iY(this.target,Qq,(()=>{this.addComputeStyle(),this.start(),YW.set(this.triggerTarget,mq.mousedown)}))),this.type===mq.mouseup&&this.listeners.add(iY(this.target,Jq,(()=>{YW.set(this.triggerTarget,mq.mouseleave),this.start(this.checkFillMode()),YW.set(this.triggerTarget,mq.mouseup)})))}deactivate(){super.deactivate(),this.deleteComputeStyle()}checkFillMode(){if(qW.has(this.triggerTarget)){if((GW.get(this.triggerTarget)||[]).length>1)return dq.both}return null}addComputeStyle(){const e=qW.has(this.triggerTarget),t=YW.get(this.triggerTarget)===mq.mouseup;if(e&&!t){const e=this.model.id,t=GW.get(this.triggerTarget)||[];if(t.some((t=>t.animationId===e)))return;const n=Xq(getComputedStyle(this.triggerTarget));GW.set(this.triggerTarget,[...t,b(w({},n),{animationId:e,triggerType:mq.mousedown})])}}deleteComputeStyle(){if(GW.has(this.triggerTarget)){const e=GW.get(this.triggerTarget)||[];if(e.some((e=>e.triggerType===mq.mousedown))){const t=e.filter((e=>e.triggerType!==mq.mousedown));t.length<=0?GW.delete(this.triggerTarget):GW.set(this.triggerTarget,t)}}}get running(){return JW.get(this.model)}get completed(){return QW.get(this.model)}set running(e){JW.set(this.model,e)}set completed(e){QW.set(this.model,e)}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==yq.finished&&(t.pause(),e=F$(0,t.effect.transformedProgress,1)),e}}class RG extends vG{constructor(e,t,n){super(e,t,n)}activate(){this.start()}deactivate(){super.deactivate()}get running(){return JW.get(this.model)}get completed(){return QW.get(this.model)}set running(e){JW.set(this.model,e)}set completed(e){QW.set(this.model,e)}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==yq.finished&&(t.pause(),e=F$(0,t.effect.transformedProgress,1)),e}}function DG(e){return!Reflect.has(e,"type")}function PG(e){var t,n,i,r,o,s,a,l;const{trigger:c,effects:d}=e;if(DG(d)||sH(),c){const{type:u}=c,h=zY(d.targetId,BW);switch(u){case mq.mouseenter:case mq.mouseleave:{const n=new wG(e,zY(c.targetId,BW),null!=(t=c.count)?t:1/0,u);VW.set(e,n),n.type===mq.mouseenter&&WW.set(h,e),n.type===mq.mouseleave&&HW.set(h,e),n.activate();break}case mq.mousedown:case mq.mouseup:{const t=new AG(e,zY(c.targetId,BW),null!=(n=c.count)?n:1/0,u);VW.set(e,t),t.type===mq.mousedown&&$W.set(h,e),t.type===mq.mouseup&&qW.set(h,e),t.activate();break}case mq.intersection:{const t=new IG(e,zY(c.targetId,BW),null!=(i=c.count)?i:1/0,h,null!=(r=c.intersectionOrientation)?r:fq.block,null!=(o=c.intersectionEdge)?o:pq.start,null!=(s=c.intersectionThreshold)?s:0,null!=(a=c.intersectionPhase)?a:gq.enter);VW.set(e,t),t.phase===gq.enter?(zW.has(h)||zW.set(h,[]),zW.get(h).push(e)):(KW.has(h)||KW.set(h,[]),KW.get(h).push(e));break}case mq.load:case mq.loadScroll:{const t=new RG(e,zY(c.targetId,BW),null!=(l=c.count)?l:1/0);VW.set(e,t),zW.has(h)||zW.set(h,[]),zW.get(h).push(e);break}}}else sH()}function LG(e){let t;if(e){const n=[];if(e.scrollOffsets)for(const t of e.scrollOffsets)if(aY(t))n.push(t);else{const e=zY(t.target,BW);n.push({target:e,threshold:t.threshold,edge:t.edge})}const i={source:zY(e.source,BW),orientation:e.orientation,scrollOffsets:n};t=new lY(i)}else t=new Lq;return t}function UG(e,t=1){DG(e)||sH();const n=new UY(e.timing),i=LH(e.timing);return 1!==t&&n.activeDuration!==1/0&&(i.delay=n.delay*t,i.duration=n.duration*t,i.endDelay=n.endDelay*t),new VY(zY(e.targetId,BW),e.effect,i)}const FG=(e,t)=>{const n=((e,t)=>e.map((e=>{const{triggerId:n}=e,i=t.find((e=>e.id===n));return b(w({},e),{trigger:i})})).filter((e=>!!e.trigger)))(e,t);yG.provideDocument(BW),yG.hasEvent()&&yG.removeEvent(),function(e){for(const t of e)PG(t);for(const t of zW.values())for(const e of t){Reflect.set(window,"enter",e);const t=VW.get(e);t&&t.activate(!0)}for(const t of KW.values())for(const e of t){Reflect.set(window,"exit",e);const t=VW.get(e);t&&t.activate()}}(n)},BG=new Map,jG=new Set,VG=e=>{const{targetId:t}=e.effects;return t?zY(t,BW):null},zG=e=>{const t=LG(e.timeline),n=VG(e);n&&jG.add(n);const i=UG(e.effects,1);return new NG(i,t)},KG=(e,t,n)=>{let i=0;const r=new Set;for(const s of e){const a=BG.get(s);a&&nH(a);const l=zG(s);BG.set(s,l);const c=VG(s);r.add(c),l.ready.then((()=>{l.play(),l.finished.finally((()=>{const{timeline:r}=l;r instanceof lY||r instanceof DocumentTimeline||(nH(l),BG.delete(s),t&&o()),i++,i>=e.length&&(null==n||n())}))}))}const o=()=>{if(!(r.size<=0)){for(const e of r)iH(e),e&&jG.delete(e);GW.clear()}};return o},WG=e=>{Array.from(BG.values()).forEach(nH),Array.from(jG).forEach(iH),GW.clear(),jG.clear(),null==e||e()};var HG;HG=()=>{const e=document.querySelector('[type="application/interaction+json"]');if(!e)return;const t=JSON.parse(e.textContent),{animations:n=[],triggers:i=[]}=t;FG(n,i)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),HG()})):HG(),q.t("w.trigger.intersection"),q.t("w.trigger.hover"),q.t("w.trigger.press"),q.t("w.trigger.scroll");const $G=[{type:Qn.intersection,title:"w.trigger.intersection"},{type:Qn.mouseenter,title:"w.trigger.hover"},{type:Qn.mousedown,title:"w.trigger.press"},{type:"divider"},{type:Qn.loadScroll,title:"w.trigger.scroll"}];var qG,YG,GG,XG;(YG=qG||(qG={})).left="left",YG.right="right",YG.down="down",YG.up="up",(XG=GG||(GG={})).fadeIn="fadeIn",XG.clipFade="clipFade",XG.clipSlide="clipSlide",XG.grow="grow",XG.growBig="growBig",XG.shrink="shrink",XG.shrinkBig="shrinkBig",XG.flip="flip",XG.spin="spin",XG.spring="spring",XG.zoom="zoom",XG.slide="slide",XG.drop="drop",XG.scroll="scroll",q.t("w.animation.easing.EaseOutQuad"),q.t("w.animation.easing.EaseInQuad"),q.t("w.animation.easing.EaseOutCubic"),q.t("w.animation.easing.EaseInCubic"),q.t("w.animation.easing.EaseInOutCubic"),q.t("w.animation.easing.EaseOutBack"),q.t("w.animation.easing.EaseOutElastic"),q.t("w.animation.easing.EaseOutBounce"),q.t("w.animation.easing.Linear");const JG=[{label:"w.animation.easing.EaseOutQuad",value:hY.QuadraticOut,icon:"Easeoutquad"},{label:"w.animation.easing.EaseInQuad",value:hY.QuadraticIn,icon:"Easeinquad"},{label:"w.animation.easing.EaseOutCubic",value:hY.CubicOut,icon:"Easeoutcubic"},{label:"w.animation.easing.EaseInCubic",value:hY.CubicIn,icon:"Easeincubic"},{label:"w.animation.easing.EaseInOutCubic",value:hY.CubicInOut,icon:"Easeinoutcubic"},{label:"w.animation.easing.EaseOutBack",value:hY.BackOut,icon:"Easeoutback"},{label:"w.animation.easing.EaseOutElastic",value:hY.ElasticOut,icon:"Easeoutelastic"},{label:"w.animation.easing.EaseOutBounce",value:hY.BounceOut,icon:"Easeoutbounce"},{label:"w.animation.easing.Linear",value:hY.Linear,icon:"Linear"}];var QG,ZG;(ZG=QG||(QG={})).fadeIn="fadeIn",ZG.fadeOut="fadeOut",ZG.grow="grow",ZG.shrink="shrink",ZG.slide="slide",ZG.slideGrow="slideGrow",ZG.skew="skew",ZG.swing="swing",ZG.swingGrow="swingGrow",ZG.spin="spin",q.t("w.animation.appearance"),q.t("w.animation.transition"),Wn.appearance,Wn.transition,q.t("w.animation.appearance.fadeIn"),q.t("w.animation.appearance.clipFade"),q.t("w.animation.appearance.clipSlide"),q.t("w.animation.appearance.grow"),q.t("w.animation.appearance.growBig"),q.t("w.animation.appearance.shrink"),q.t("w.animation.appearance.shrinkBig"),q.t("w.animation.appearance.slide"),q.t("w.animation.appearance.flip"),q.t("w.animation.appearance.spin"),q.t("w.animation.appearance.zoom"),q.t("w.animation.appearance.drop"),q.t("w.animation.appearance.spring"),q.t("w.animation.appearance.scroll");const eX=[{label:"w.animation.appearance.fadeIn",type:GG.fadeIn,thumb:XP,props:{opacity:"0.5"},easing:hY.CubicOut},{label:"w.animation.appearance.grow",type:GG.grow,thumb:XP,props:{transform:uP({scaleX:"0.8",scaleY:"0.8"}),opacity:"0"},easing:hY.CubicIn},{label:"w.animation.appearance.growBig",type:GG.growBig,thumb:XP,props:{transform:uP({scaleX:"0",scaleY:"0"}),opacity:"0"},easing:hY.CubicIn},{label:"w.animation.appearance.shrink",type:GG.shrink,thumb:XP,props:{transform:uP({scaleX:"1.2",scaleY:"1.2"}),opacity:"0"},easing:hY.CubicIn},{label:"w.animation.appearance.shrinkBig",type:GG.shrinkBig,thumb:XP,props:{transform:uP({scaleX:"2",scaleY:"2"}),opacity:"0"},easing:hY.CubicIn},{label:"w.animation.appearance.slide",type:GG.slide,thumb:XP,directions:{[qG.up]:{transform:uP({translateY:"20%"}),opacity:"0"},[qG.down]:{transform:uP({translateY:"-20%"}),opacity:"0"},[qG.left]:{transform:uP({translateX:"20%"}),opacity:"0"},[qG.right]:{transform:uP({translateX:"-20%"}),opacity:"0"}},easing:hY.CubicIn},{label:"w.animation.appearance.flip",type:GG.flip,thumb:XP,directions:{[qG.up]:{transform:uP({perspective:"800px",rotateX:"-90deg"})},[qG.down]:{transform:uP({perspective:"800px",rotateX:"90deg"})},[qG.left]:{transform:uP({perspective:"800px",rotateY:"90deg"})},[qG.right]:{transform:uP({perspective:"800px",rotateY:"-90deg"})}},easing:hY.CubicIn},{label:"w.animation.appearance.spin",type:GG.spin,thumb:XP,props:{transform:uP({scaleX:"0",scaleY:"0",rotateZ:"-1440deg"}),opacity:"0"},easing:hY.CubicIn},{label:"w.animation.appearance.zoom",type:GG.zoom,thumb:XP,props:{transform:uP({scaleX:"0",scaleY:"0"})},easing:hY.BackOut},{label:"w.animation.appearance.drop",type:GG.drop,thumb:XP,props:{transform:uP({translateY:"-50%"}),opacity:"0"},easing:hY.BounceOut},{label:"w.animation.appearance.spring",type:GG.spring,thumb:XP,props:{transform:uP({scaleX:"0",scaleY:"0"}),opacity:"0"},easing:hY.ElasticOut},{label:"w.animation.appearance.scroll",type:GG.scroll,thumb:XP,directions:{[qG.up]:{transform:uP({translateY:"100vh"})},[qG.down]:{transform:uP({translateY:"-100vh"})},[qG.left]:{transform:uP({translateX:"100vw"})},[qG.right]:{transform:uP({translateX:"-100vw"})}},easing:hY.Linear}];q.t("w.animation.transition.fadeIn"),q.t("w.animation.transition.fadeOut"),q.t("w.animation.transition.grow"),q.t("w.animation.transition.shrink"),q.t("w.animation.transition.slide"),q.t("w.animation.transition.slideGrow"),q.t("w.animation.transition.skew"),q.t("w.animation.transition.swing"),q.t("w.animation.transition.swingGrow"),q.t("w.animation.transition.spin");const tX=[{label:"w.animation.transition.fadeIn",type:QG.fadeIn,thumb:XP,props:{opacity:"1"},easing:hY.QuadraticOut},{label:"w.animation.transition.fadeOut",type:QG.fadeOut,thumb:XP,props:{opacity:".5"},easing:hY.QuadraticOut},{label:"w.animation.transition.grow",type:QG.grow,thumb:XP,props:{transform:uP({scaleX:"1.1",scaleY:"1.1"})},easing:hY.QuadraticOut},{label:"w.animation.transition.shrink",type:QG.shrink,thumb:XP,props:{transform:uP({scaleX:"0.9",scaleY:"0.9"})},easing:hY.QuadraticOut},{label:"w.animation.transition.slide",type:QG.slide,thumb:XP,directions:{[qG.up]:{transform:uP({translateY:"-10%"})},[qG.down]:{transform:uP({translateY:"10%"})},[qG.left]:{transform:uP({translateX:"-10%"})},[qG.right]:{transform:uP({translateX:"10%"})}},easing:hY.QuadraticOut},{label:"w.animation.transition.slideGrow",type:QG.slideGrow,thumb:XP,directions:{[qG.up]:{transform:uP({translateY:"-10%",scaleX:"1.05",scaleY:"1.05"})},[qG.down]:{transform:uP({translateY:"10%",scaleX:"1.05",scaleY:"1.05"})},[qG.left]:{transform:uP({translateX:"-10%",scaleX:"1.05",scaleY:"1.05"})},[qG.right]:{transform:uP({translateX:"10%",scaleX:"1.05",scaleY:"1.05"})}},easing:hY.QuadraticOut},{label:"w.animation.transition.skew",type:QG.skew,thumb:XP,props:{transform:uP({skewX:"1.05deg",skewY:"1.05deg"})},easing:hY.QuadraticOut},{label:"w.animation.transition.swing",type:QG.swing,thumb:XP,props:{transform:uP({rotateZ:"3deg"})},easing:hY.QuadraticOut},{label:"w.animation.transition.swingGrow",type:QG.swingGrow,thumb:XP,props:{transform:uP({rotateZ:"3deg",scaleX:"1.05",scaleY:"1.05"})},easing:hY.QuadraticOut},{label:"w.animation.transition.spin",type:QG.spin,thumb:XP,props:{transform:uP({rotateZ:"720deg"})},easing:hY.CubicInOut}],nX=new Map,iX=new Map,rX=e=>{const t={};return Object.keys(e).sort(((e,t)=>e>t?-1:1)).forEach((n=>{"transform"===n?Reflect.set(t,"transform",hP(e.transform)):Reflect.set(t,n,e[n])})),t},oX=(e,t)=>{t.forEach((t=>{const{props:n,type:i,directions:r}=t;function o(t,n){const r=rX(t);e.set(JSON.stringify(r),{type:i,direction:n})}n?o(n,null):(qD(r),Object.keys(r).forEach((e=>{o(r[e],e)})))}))};oX(nX,eX),oX(iX,tX);const sX=(e,t,n)=>{let i;return i=e===Wn.appearance?((e,t=qG.left)=>{const n=eX.find((t=>t.type===e));qD(n);const{props:i,directions:r,easing:o}=n;return DR({value:i||r[t],easing:o})})(t,n):((e,t=qG.left)=>{const n=tX.find((t=>t.type===e));qD(n);const{props:i,directions:r,easing:o}=n;return DR({value:i||r[t],easing:o})})(t,n),i};class aX{constructor(e="",t=localStorage){this.prefixKey=e,this.storage=t}getKey(e){return`${this.prefixKey}${e}`.toUpperCase()}set(e,t,n=604800){const i=JSON.stringify({value:t,expire:null!==n?(new Date).getTime()+1e3*n:null});this.storage.setItem(this.getKey(e),i)}get(e,t=null){const n=this.storage.getItem(this.getKey(e));if(n)try{const t=JSON.parse(n),{value:i,expire:r}=t;if(null===r||r>=Date.now())return i;this.remove(this.getKey(e))}catch(_8){return t}return t}remove(e){this.storage.removeItem(this.getKey(e))}clear(){this.storage.clear()}}const lX=!!navigator.clipboard;class cX{constructor(){C(this,"clipboard",navigator.clipboard)}async set(e){var t;e&&await(null==(t=this.clipboard)?void 0:t.writeText(e))}async get(){var e;let t="";return t=await(null==(e=this.clipboard)?void 0:e.readText()),t}async getData(){var e;let t=null;return t=await(null==(e=this.clipboard)?void 0:e.read()),t}async clear(){var e;await(null==(e=this.clipboard)?void 0:e.writeText(""))}}const dX=(({prefixKey:e="",storage:t=localStorage}={})=>new aX(e,t))({storage:localStorage,prefixKey:"iliad-editor"}),uX=new cX;var hX="_scrollBar_m81d8_1",pX="_scrollBarBlock_m81d8_18";var fX="_bodyS_67lkz_1";const gX="wheel",mX="keydown",_X="keyup";class vX{constructor(e,t,n,i){C(this,"_handler"),C(this,"_node"),C(this,"_type"),C(this,"_options"),this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function yX(e,t,n,i){return new vX(e,t,n,i)}function wX(){var e;const{view:t}=TD,{canvasHostDomNode:n}=t,i=null==(e=n.contentDocument)?void 0:e.body,r=T.exports.useRef();if(!r.current){const e=document.querySelector("#canvasContainer");r.current=e}const[o,s]=T.exports.useState(0),a=T.exports.useMemo((()=>`${Math.floor(100*o)}%`),[o]),{run:l}=M((()=>{const{scrollTop:e,scrollHeight:t,clientHeight:n}=i;if(t<=n)return void s(1);s(e/(t-n))}),{wait:20});return T.exports.useEffect((()=>{l();const e=yX(i,gX,l);return()=>{e.dispose()}}),[]),oe.exports.createPortal(k("div",{className:hX,children:k("div",{className:N(fX,lL,pX),children:a})}),r.current)}var bX,xX,CX={};(xX=bX||(bX={})).start="start",xX.end="end",q.t("w.animation.scroll.key"),q.t("w.animation.scroll.keyStart"),q.t("w.animation.scroll.keyEnd"),q.t("w.animation.scroll.scrollProgress"),q.t("w.animation.scroll.elementEnterProgress"),q.t("w.animation.scroll.elementExitProgress");const kX=[{key:bX.start,value:bX.start,label:"w.animation.scroll.keyStart"},{key:bX.end,value:bX.end,label:"w.animation.scroll.keyEnd"}];function EX(e){const{scrollKey:t,setScrollKey:n,scrollValues:i,updateScrollValue:r}=e,o=i.some((e=>$t(e))),{t:s}=WL(),a=T.exports.useMemo((()=>{const e=kX.findIndex((e=>e.value===t));return i[e]}),[i,t]),l=e=>{r(t,e)};return A(be,{children:[k(oB,{label:s("w.animation.scroll.key"),children:k(dj,{className:CX.singleLineField,selected:t,options:kX.map((e=>b(w({},e),{label:s(e.label)}))),onChange:e=>{n(e)},radioStyle:{padding:"3px 23px"}})}),o?k(SX,{scrollValue:a,onChange:l}):k(IX,{edge:a.edge,scrollValue:a,onChange:l}),k(EK,{show:o,children:k(wX,{})})]})}function SX({scrollValue:e,onChange:t}){const{t:n}=WL();return k(oB,{label:n("w.animation.scroll.scrollProgress"),children:k(hB,{className:CX.input,value:(i=e,i.replace("%","")),onChange:e=>{const n=parseInt(e);t(`${n}%`)},suffix:"%"})});var i}function IX({scrollValue:e,edge:t,onChange:n}){const{t:i}=WL(),{threshold:r}=e,o=Math.floor(100*r),s=t===$n.start?"w.animation.scroll.elementEnterProgress":"w.animation.scroll.elementExitProgress";return k(oB,{label:i(s),children:k(hB,{className:CX.input,value:o,onChange:t=>{const i=parseFloat((parseFloat(t)/100).toFixed(2));n(b(w({},e),{threshold:i}))},suffix:"%"})})}var OX,TX,MX,NX,AX,RX,DX,PX,LX,UX,FX,BX,jX,VX;!function(e){e.percentage="percentage",e.number="number",e.px="px"}(OX||(OX={}));!function(e){e.length="length",e.angle="angle",e.time="time",e.frequency="frequency",e.resolution="resolution",e.flex="flex",e.percent="percent"}(TX||(TX={}));class zX extends class{static parse(e,t){Tn()}}{constructor(e,t){super(),this.value=e,this.unit=t}toString(){return`${this.value}${function(e){switch(e){case OX.percentage:return"%";case"number":return"";default:return e.toLowerCase()}}(this.unit)}`}}!function(e){e.percent=function(e){return new zX(e,OX.percentage)},e.px=function(e){return new zX(e,OX.px)}}(MX||(MX={})),function(e){e.document="document",e.scroll="scroll"}(NX||(NX={})),function(e){e.normal="normal",e.reverse="reverse",e.alternate="alternate",e["alternate-reverse"]="alternate-reverse"}(AX||(AX={})),function(e){e.none="none",e.forwards="forwards",e.backwards="backwards",e.both="both",e.auto="auto"}(RX||(RX={})),function(e){e.group="group",e.sequence="sequence"}(DX||(DX={})),function(e){e.appearance="appearance",e.transition="transition"}(PX||(PX={})),function(e){e.start="start",e.end="end"}(LX||(LX={})),function(e){e.vertical="vertical",e.horizontal="horizontal",e.block="block",e.inline="inline"}(UX||(UX={})),function(e){e.enter="enter",e.exit="exit"}(FX||(FX={})),function(e){e.load="load",e.click="click",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.intersection="@intersection",e.loadScroll="@loadScroll",e.appear="@appear",e.mousedown="mousedown",e.mouseup="mouseup"}(BX||(BX={})),function(e){e.child=">",e.descendant=" ",e.sibling="~",e.attribute="[]",e.pseudoClass=":",e.pseudoElement=":"}(jX||(jX={})),function(e){e.visited="visited",e.active="active",e.hover="hover"}(VX||(VX={})),WD.webkit;const KX=(e,t,n)=>w({duration:e,easing:t,delay:0,fill:jn.none},n),WX=e=>e.replace(";",""),HX=(e,t="")=>e.replace(WX(t),""),$X=(e,t="")=>`${WX(t)} ${e}`,qX=(e,t)=>{const n=uP(e);return`${$X(n,t)}`},YX=e=>{const{effect:t}=e,n=!t.some((e=>{const t=e,{unit:n}=t,i=x(t,["unit"]);return Object.values(i).some((e=>!Gt(e)))})),i=!t.some((e=>{const t=e,{unit:n}=t,i=x(t,["unit"]);return Object.values(i).some((e=>!$t(e)))}));return qD(n||i),n?Wn.appearance:Wn.transition},GX=(e,t="")=>{const n=((e,t="")=>{const{effect:n}=e;return n.map((e=>{const n={},i={},r=e,{unit:o}=r,s=x(r,["unit"]);return Object.keys(s).forEach((e=>{const t=s[e];Gt(t)?(Reflect.set(n,e,t[0]),Reflect.set(i,e,t[1])):Reflect.set(i,e,t)})),[i,n].forEach((e=>{if(e.transform&&t){const n=HX(e.transform,t);Reflect.set(e,"transform",n)}})),{from:n,to:i,unit:o}}))})(e,t);qD(1===n.length);const[i]=n;return i},XX=(e,t="to",n="")=>GX(e,n)[t];function JX(e,t){const{triggers:n,animations:i}=z(AD),r=ze(NL),o=n.find((t=>t.id===e));qD(o,"Trigger can not be empty. ");const s=T.exports.useMemo((()=>i.filter((e=>e.triggerId===o.id))),[i,o]),a=s.filter((e=>e.effects.targetId===t));qD(a.length<=2,"Animation model is less than 2 in target.");const[l]=a,c=o.type===Qn.intersection||o.type===Qn.loadScroll?Wn.appearance:Wn.transition;return T.exports.useEffect((()=>{const e=c===Wn.appearance?"from":"to";r(e)}),[e,t]),{trigger:o,animation:l,triggerAnimations:s,triggerAnimationType:c}}function QX(e,t){const[n,i]=T.exports.useState({});return T.exports.useEffect((()=>{let n=null;n=t?t.effects.timing:(e=>{let t;switch(e){case Qn.intersection:t=KX(1.2,hY.Linear);break;case Qn.loadScroll:t=KX(1,hY.Linear);break;default:t=KX(.2,hY.Linear)}return t})(e.type),i(n)}),[t]),{timing:n,setTiming:i,updateTiming:e=>{i(w(w({},n),e))}}}function ZX(e){const t=z(PD);qD(e);const{nodeStyle:n,computedStyle:i}=T.exports.useMemo((()=>({nodeStyle:TD.getDeclaredStyle(e),computedStyle:DR(TD.view.getComputedStyleOfId(e))})),[e,t]);return{nodeStyle:n,computedStyle:i,createEffect:(t,i,r)=>{const o={to:{},from:{}};if(i.to&&i.from)Reflect.set(o,"to",i.to),Reflect.set(o,"from",i.from);else{const e=t===Wn.appearance?"from":"to";Reflect.set(o,e,i)}const s=((e,t,n)=>{const i={},{from:r,to:o}=t;return Array.from(new Set([...Object.keys(r),...Object.keys(o)])).filter((e=>r[e]||o[e])).forEach((t=>{let s;if(s=e===Wn.appearance?[r[t]||null,o[t]||null]:o[t],"transform"===t){const e=n.transform||"";if(Gt(s)){const t=hP(s[0]||""),n=hP(s[1]||"");Array.from(new Set([...Object.keys(t),...Object.keys(n)])).forEach((e=>{t[e]||Reflect.set(t,e,dP[e]),n[e]||Reflect.set(n,e,dP[e])})),s=[t,n].map((t=>qX(t,e)))}else{const t=hP(s||"");s=qX(t,e)}}Reflect.set(i,t,s)})),i})(t,o,n);return((e,t,n)=>({targetId:e,effect:[t],timing:n}))(e,s,r)}}}const eJ={[Qn.intersection]:Qn.intersection,[Qn.mouseenter]:Qn.mouseleave,[Qn.mousedown]:Qn.mouseup},tJ={[Wn.appearance]:jn.backwards,[Wn.transition]:jn.forwards},nJ={intersectionEdge:$n.end,intersectionPhase:Xn.enter,intersectionThreshold:0},iJ={intersectionEdge:$n.end,intersectionPhase:Xn.exit,intersectionThreshold:1};function rJ(e,t,n){const{model:i}=TD,{animations:r,triggers:o}=z(AD),s=z(NL),{createEffect:a}=ZX(e),{mirrorTrigger:l,mirrorAnimation:c}=T.exports.useMemo((()=>{if(!t||!n)return{mirrorAnimation:null,mirrorTrigger:null};const{effects:e}=t,{targetId:i}=e,a=XX(e,s);a.transform&&Reflect.set(a,"transform",hP(a.transform));const l="from"===s?"to":"from",c=r.filter((e=>e.id!==t.id)).find((e=>{const{triggerId:t,effects:r}=e,{targetId:s}=r;if(!s||s!==i)return!1;const c=XX(r,l);if(c.transform&&Reflect.set(c,"transform",hP(c.transform)),!PR(c,a))return!1;const d=o.find((e=>e.id===t));return(null==d?void 0:d.targetId)===(null==n?void 0:n.targetId)&&(u=null==n?void 0:n.type,(null==d?void 0:d.type)===eJ[u]);var u})),d=o.find((e=>e.id===(null==c?void 0:c.triggerId)));return{mirrorAnimation:c||null,mirrorTrigger:d||null}}),[r,o,t,n]);qD(c&&l||!c&&!l);const d=e=>{const t=YX(e)===Wn.appearance?Wn.transition:Wn.appearance,n=XX(e,s),i=e.timing,r=tJ[t];return a(t,n,b(w({},i),{fill:r}))};return{mirrorTrigger:l,mirrorAnimation:c,addMirrorAnimation:s=>{const a=t||s;if(!a)return;const l=d(a.effects),c=n,{targetId:u=null,type:h,id:p}=c,f=x(c,["targetId","type","id"]),g=eJ[h];let m=o.find((t=>{if(t.id===n.id)return!1;if(t.type===Qn.intersection){const{intersectionEdge:e,intersectionPhase:n,intersectionThreshold:i}=t;if(!PR({intersectionEdge:e,intersectionPhase:n,intersectionThreshold:i},iJ))return!1}return t.targetId===u&&t.type===g&&r.some((n=>n.triggerId===t.id&&n.effects.targetId===e))}));m||(g===Qn.intersection&&Object.assign(f,iJ),m=i.addTrigger(g,u,f)),i.addAnimation(m.id,l)},removeMirrorAnimation:()=>{if(!c||!l)return;i.removeAnimation(c.id);const{animations:e}=i.getValue();e.some((e=>e.triggerId===l.id))||i.removeTrigger(l.id)},updateAnimationEffects:e=>{if(t&&(i.updateAnimationEffects(t.id,e),c)){const t=d(e);i.updateAnimationEffects(c.id,t)}}}}function oJ(e,t,n){if(e){const i=n.transform;return XX(e.effects,t,i)}return{}}function sJ(e){const{model:t}=TD,n=`page${function(){const e=location.href,t=/id=(\d+)/;if(e.match(t)){const n=t.exec(e);if(n)return n[1]}return""}()}-${e}`,i=T.exports.useRef(!1),[r,o]=T.exports.useState([]),s=Ke(r),a=()=>{const e=s.current;dX.set(n,e.join(","))},{run:l,cancel:c}=le(a,{wait:50});return T.exports.useEffect((()=>{i.current&&l()}),[r]),T.exports.useEffect((()=>{const e=(()=>{const e=dX.get(n),i=e?e.split(","):[],{triggers:r}=t.getValue(),o=new Set(r.map((e=>e.id)));return i.filter((e=>{const[t,n]=e.split("|");return!(!n||!o.has(t))}))})();return o(e),i.current=!0,()=>{a(),c()}}),[]),{ids:r,addIds:e=>{o(Array.from(new Set([...r,...e])))},removeIds:e=>{const t=r.filter((t=>!e.includes(t)));o(t)}}}function aJ(e,t){const n=e.type===Qn.loadScroll,i=z(ML),[r,o]=T.exports.useState([]),s=e.targetId,a=!s;T.exports.useEffect((()=>{if(n)if(t&&t.timeline&&t.timeline.scrollOffsets)o(t.timeline.scrollOffsets);else{const e=((e,t)=>t?["0%","100%"]:[{edge:$n.start,threshold:1,target:e},{edge:$n.end,threshold:1,target:e}])(s,a);o(e)}return()=>{o([])}}),[i,e]);return{scrollValues:r,setScrollValues:o,updateScrollValue:(e,n)=>{const i=e===bX.start?0:1,s=r.slice();s[i]=n,t?(qD(t.timeline),TD.transform((()=>{TD.model.updateAnimationTimeline(t.id,b(w({},t.timeline),{scrollOffsets:s}))}))):o(s)},createNewScrollTimeline:()=>({timelineType:Ln.scroll,scrollOffsets:r})}}var lJ="_triggerItem_10uiq_1",cJ="_triggerBlock_10uiq_11",dJ="_animationTrigger_10uiq_14",uJ="_triggerItemDivider_10uiq_20",hJ="_animationTriggerEditBtn_10uiq_24";var pJ={tabContent:"_tabContent_xw4wx_1",animationItem:"_animationItem_xw4wx_6",animationThumbBox:"_animationThumbBox_xw4wx_15",active:"_active_xw4wx_25",animationThumb:"_animationThumb_xw4wx_15",animationItemTitle:"_animationItemTitle_xw4wx_34"};const fJ=[{value:qG.right,label:k(PL,{slot:"icon",name:"DirectionRight"})},{value:qG.left,label:k(PL,{slot:"icon",name:"DirectionLeft"})},{value:qG.up,label:k(PL,{slot:"icon",name:"DirectionUp"})},{value:qG.down,label:k(PL,{slot:"icon",name:"DirectionDown"})}];function gJ(e){const{curAnimationTab:t=Wn.transition,initTransform:n="",hasAnimation:i,clearAnimation:r,handleSelect:o,handleHover:s,cancelHover:a,handleVisibleChange:l,animation:c,open:d}=e,{t:u}=WL(),{animationType:h,presetType:p,direction:f}=function(e,t=""){const n=z(NL);return T.exports.useMemo((()=>{let i=null,r=null,o=Wn.appearance;if(e){o=YX(e.effects);const s=XX(e.effects,n);if(s.transform&&t){const e=HX(s.transform,t);Reflect.set(s,"transform",e)}const a=(o===Wn.appearance?nX:iX).get(JSON.stringify(rX(s)));a&&(r=a.type,i=a.direction)}return{presetType:r,direction:i,animationType:o}}),[e,n])}(c,n),g=T.exports.useMemo((()=>{if(!c||h!==t)return null;return(h===Wn.appearance?eX:tX).find((e=>e.type===p))||null}),[h,p,t,c]);let m="w.animation.none";i&&(m=g?g.label:"w.animation.custom");const _=u(m),v=i?"#ffffff":"#858585",y=i?"#F55897":"#ffffff";return k($B,{popoverStyle:{width:"256px"},title:u("w.animation.presets"),visible:d,onVisibleChange:()=>{l()},trigger:k(ij,{name:"Effect",text:_,color:v,background:y}),content:k(mJ,{hasAnimation:i,selectedPreset:g,direction:f,presetType:p,animationType:h,curAnimationTab:t,handleHover:s,cancelHover:a,handleSelect:o,clearAnimation:r}),fitToConfigPanel:!0})}function mJ(e){const{selectedPreset:t,hasAnimation:n,animationType:i,clearAnimation:r,handleHover:o,cancelHover:s,handleSelect:a,curAnimationTab:l,direction:c,presetType:d}=e,{t:u}=WL(),h=T.exports.useMemo((()=>Boolean(null==t?void 0:t.directions)),[t]),p=qG.left;return A("div",{className:pJ.animationContent,children:[l===Wn.appearance&&A("div",{className:pJ.tabContent,children:[k(_J,{active:!n,onSelect:r}),eX.map((e=>k(vJ,b(w({},e),{active:i===Wn.appearance&&d===e.type,onSelect:()=>{a(Wn.appearance,e,c||p)},onHoverIn:()=>{o(Wn.appearance,e,c||p)},onHoverOut:()=>{s()}}),`${Wn.appearance}-${e.type}`)))]}),l===Wn.transition&&A("div",{className:pJ.tabContent,children:[k(_J,{active:!n,onSelect:r}),tX.map((e=>k(vJ,b(w({},e),{active:i===Wn.transition&&d===e.type,onSelect:()=>{a(Wn.transition,e,c||p)},onHoverIn:()=>{o(Wn.transition,e,c||p)},onHoverOut:()=>{s()}}),`${Wn.transition}-${e.type}`)))]}),h&&k(oB,{label:u("w.animation.direction"),contentStyle:{justifyContent:"flex-end"},children:k(dj,{className:pJ.halfInput,selected:c||p,options:fJ,onChange:e=>{a(i,t,e)},radioStyle:{padding:"3px 6.1px"}})})]})}function _J(e){const{t:t}=WL(),{onSelect:n,active:i}=e,r=T.exports.useRef();return G("click",(()=>{n()}),{target:r}),A("div",{className:pJ.animationItem,ref:r,children:[k("div",{className:N(pJ.animationThumbBox,{[pJ.active]:i}),children:k(PL,{size:"xl",color:"#E0E0E0",name:"Linear"})}),k("p",{className:pJ.animationItemTitle,children:t("w.animation.none")})]})}function vJ(e){const{t:t}=WL(),{label:n,thumb:i,onSelect:r,onHoverIn:o,onHoverOut:s,active:a}=e,l=T.exports.useRef();return G("click",(()=>{r()}),{target:l}),G("mouseenter",(()=>{o()}),{target:l}),G("mouseleave",(()=>{s()}),{target:l}),A("div",{className:pJ.animationItem,ref:l,children:[k("div",{className:N(pJ.animationThumbBox,{[pJ.active]:a}),children:k("img",{className:pJ.animationThumb,src:i,alt:""})}),k("p",{className:pJ.animationItemTitle,children:t(n)})]})}function yJ(e){const{triggerId:t,targetId:n,className:i="",outlineWidth:r="2px",triggerHasAnimation:o=!1}=e,{trigger:s,animation:a}=JX(t,n),l=Boolean(a)||o,[c,d]=T.exports.useState(!1),{nodeStyle:u,createEffect:h}=ZX(n),{updateAnimationEffects:p,removeMirrorAnimation:f}=rJ(n,a,s),g=s.type===Qn.intersection?Wn.appearance:Wn.transition,m=(e,t,i,r)=>{qD(!!n,"TargetId can not be null");const{value:o,easing:a}=sX(e,t.type,r),l=s.type===Qn.intersection?1.2:.2,c=KX(l,a,{fill:i});return h(e,o,c)},_=T.exports.useRef(),{run:v,cancel:y}=le(((e,n,i)=>{_.current&&clearTimeout(_.current),WG();const r=fU(),o=e===Wn.transition?jn.forwards:jn.backwards,s=m(e,n,o,i),a=KG([{id:r,effects:s,triggerId:t}],!1,(()=>{_.current=setTimeout((()=>{a(),_.current=void 0}),1e3)}))}),{wait:500});return k(ZB,{className:i,active:c,style:{outlineWidth:r,padding:"6px 0"},children:k(gJ,{curAnimationTab:g,trigger:s,animation:a,hasAnimation:l,initTransform:u.transform||"",open:c,handleHover:v,cancelHover:y,handleSelect:(e,n,i)=>{const r=e===Wn.transition?jn.forwards:jn.backwards,o=m(e,n,r,i);TD.transform((()=>{a?p(o):TD.model.addAnimation(t,o)})),setTimeout((()=>{v(e,n,i)}),50)},clearAnimation:()=>{TD.transform((()=>{a&&(f(),TD.model.removeAnimation(a.id))}))},handleVisibleChange:()=>{d(!c)}})})}function wJ(e){const{t:t}=WL(),{trigger:n}=e,{type:i,id:r}=n,[o]=z(LD),s=o,a=$G.find((e=>e.type===i)),l=ze(TL),c=ze(ML),{animations:d}=z(AD),u=d.find((e=>e.triggerId===r))||null,h=Boolean(u),{removeMirrorAnimation:p}=rJ(s,u,n);return a?A("div",{className:lJ,children:[k("div",{className:cJ,children:k(_B,{action:"delete",onClick:()=>{const{model:e}=TD;TD.transform((()=>{p(),e.removeTrigger(r)}))},style:{height:"48px",padding:"0",marginBottom:"0"},children:t(a.title)})}),k("div",{className:cJ,children:A(oB,{label:t("w.trigger"),labelStyle:{alignSelf:"start"},contentStyle:{flexDirection:"row",width:"100%"},style:{marginTop:"0"},children:[k(yJ,{triggerHasAnimation:h,className:dJ,triggerId:n.id,targetId:s}),k(ke,{className:hJ,click:()=>{l(r),c(o)},children:k(PL,{slot:"icon",name:"Edit"})})]})}),k(U,{className:uJ})]}):null}const bJ=e=>{const t=[Qn.mouseleave,Qn.mouseup];return e.type===Qn.intersection?(e=>{const{intersectionEdge:t,intersectionPhase:n,intersectionThreshold:i}=e;return PR({intersectionEdge:t,intersectionPhase:n,intersectionThreshold:i},iJ)})(e):t.includes(e.type)};function xJ(){const e=function(){const e=z(zD);return T.exports.useMemo((()=>e.filter((e=>!bJ(e))).reverse()),[e])}();return k(be,{children:e.map((e=>k(wJ,{trigger:e},e.id)))})}function CJ(){const{t:e}=WL();return k(_B,{style:{padding:"0",marginBottom:"8px",color:"rgba(0, 0, 0, 0.42)"},slotAdd:k(kJ,{}),children:e("w.trigger")})}function kJ(){const{t:e}=WL(),t=z(jD);return k("span",{children:A(We,{quiet:!0,className:LW.addMenu,children:[$G.map((n=>{const{type:i}=n;return"divider"===i?k(U,{style:{margin:"4px 0"}},n.type):k(Ce,{style:{width:"144px"},value:n.type,click:()=>{(e=>{if(t)switch(e.type){case Qn.intersection:TD.transform((()=>{TD.model.addTrigger(e.type,t.id,w({},nJ))}));break;default:{let n=t.id;e.type===Qn.loadScroll&&co(t)&&(n=null),TD.transform((()=>{TD.model.addTrigger(e.type,n)}));break}}})(n)},children:e(n.title)},n.type)})),k(PL,{slot:"icon",className:LW.icon,name:"Add"})]})})}function EJ(){return z(jD)?A("div",{className:N(LW.triggerContainer,aL),children:[k(CJ,{}),k(U,{className:LW.triggerItemDivider}),k(xJ,{})]}):null}function SJ(e){const t=e,{showText:n}=t,i=x(t,["showText"]);return A(be,{children:[n&&k(DK,w({},i)),k(wV,w({},i))]})}var IJ="_singleLineField_18slj_1";const OJ=[];for(let os=0;os<16;os++)OJ.push({label:100*os+"ms",value:""+os/10});function TJ(e){var t,n,i,r;const{showOthers:o,timing:s,updateTiming:a}=e,l=`${s.duration}`,c=`${s.delay}`,d=null==(t=s.easing)?void 0:t.toString(),{t:u}=WL(),h=z(TL),p=z(ML);return qD(h&&p),A("div",{children:[k(EK,{show:o,children:k(oB,{label:u("w.animation.timing.effectPreset"),children:k(yJ,{className:IJ,triggerId:h,targetId:p,outlineWidth:"1px"})})}),k(EK,{show:o,children:k(oB,{label:u("w.animation.timing.delay"),children:k(xe,{className:IJ,value:c,change:e=>{a({delay:parseFloat(e.target.value)})},label:null==(n=OJ.find((e=>e.value===c)))?void 0:n.label,children:OJ.map((e=>k(Ce,{value:e.value,children:e.label},e.value)))})})}),k(oB,{label:u("w.animation.timing.duration"),children:k(xe,{className:IJ,value:l,change:e=>{a({duration:parseFloat(e.target.value)})},label:null==(i=OJ.find((e=>e.value===l)))?void 0:i.label,children:OJ.map((e=>k(Ce,{value:e.value,children:e.label},e.value)))})}),k(oB,{label:u("w.animation.timing.easing"),children:k(xe,{className:IJ,value:d,change:e=>{a({easing:e.target.value})},icons:"none",label:null==(r=OJ.find((e=>e.value===d)))?void 0:r.label,children:JG.map((e=>A(Ce,{value:e.value,children:[k(PL,{slot:"icon",name:e.icon}),u(e.label)]},e.value)))})}),k(bB,{})]})}var MJ={itemsWrap:"_itemsWrap_1o1if_1",itemRowWrap:"_itemRowWrap_1o1if_8",sizeRatio:"_sizeRatio_1o1if_16",ratioIcon:"_ratioIcon_1o1if_25",ratioIconActive:"_ratioIconActive_1o1if_29"};function NJ(e){const{t:t}=WL(),{transformState:n,transformChanged:i,onTransformChange:r,is3D:o}=e,{scaleX:s,scaleY:a,scaleZ:l}=n,c=(e,t)=>{let n=null;"x"!==e&&"y"!==e||!d||(n=parseFloat(s)/parseFloat(a));const i={[`scale${e.toUpperCase()}`]:t},o=t.includes(".")?t.split(".")[1].length:0;if(n){const r=parseFloat(t);if("x"===e){const e=r/n;Reflect.set(i,"scaleY",e.toFixed(o))}else{const e=r*n;Reflect.set(i,"scaleX",e.toFixed(o))}}r(i)},[d,u]=T.exports.useState(!0),h=d?"Locked":"Unlocked";return k(oB,{label:t("w.animation.transform.scale"),labelStyle:{alignSelf:"start"},children:A("div",{className:MJ.itemsWrap,children:[A("div",{className:MJ.itemRowWrap,children:["X",k(hB,{logic:i.scaleX,className:MJ.input,value:s,onChange:e=>{c("x",e)}})]}),A("div",{className:MJ.itemRowWrap,children:["Y",k(hB,{logic:i.scaleY,className:MJ.input,value:a,onChange:e=>{c("y",e)}})]}),o&&A("div",{className:MJ.itemRowWrap,children:["Z",k(hB,{logic:i.scaleZ,className:MJ.input,value:l,onChange:e=>{c("z",e)}})]}),A("div",{className:N(MJ.sizeRatio,sL),onClick:()=>{u(!d)},children:[k(QB,{src:$P,width:8}),k(PL,{className:N(MJ.ratioIcon,{[MJ.ratioIconActive]:d}),name:h},h),k(QB,{src:qP,width:8})]})]})})}var AJ={itemsWrap:"_itemsWrap_lq6ex_1",itemRowWrap:"_itemRowWrap_lq6ex_8"};function RJ(e){const{t:t}=He(),{transformState:n,transformChanged:i,onTransformChange:r,is3D:o}=e,{rotateX:s,rotateY:a,rotateZ:l}=n,c=(e,t)=>{r({[`rotate${e.toUpperCase()}`]:t})},d=e=>e.replace("deg",""),u=e=>e.includes("deg")||"0"===e?e:`${e}deg`;return k(oB,{label:t("w.animation.transform.rotate"),children:A("div",{className:AJ.itemsWrap,children:[o&&A("div",{className:AJ.itemRowWrap,children:["X",k(hB,{logic:i.rotateX,className:AJ.input,value:d(s),onChange:e=>{const t=parseInt(e).toString();c("x",u(t))},suffix:"°"})]}),o&&A("div",{className:AJ.itemRowWrap,children:["Y",k(hB,{logic:i.rotateY,className:AJ.input,value:d(a),onChange:e=>{const t=parseInt(e).toString();c("y",u(t))},suffix:"°"})]}),A("div",{className:AJ.itemRowWrap,children:["Z",k(hB,{logic:i.rotateZ,className:AJ.input,value:d(l),onChange:e=>{const t=parseInt(e).toString();c("z",u(t))},suffix:"°"})]})]})})}var DJ="_itemsWrap_2ubzz_4",PJ="_itemRowWrap_2ubzz_11";const LJ=[...xP];function UJ(e){const{t:t}=WL(),n=z(ML);qD(n);const{transformState:i,transformChanged:r,onTransformChange:o,is3D:s}=e,{translateX:a,translateY:l,translateZ:c}=i,d=["0px","0%","0vw","0vh"],u=(e,t)=>{d.includes(t)&&(t="0"),o({[`translate${e.toUpperCase()}`]:t})},h=(e,t)=>IU(n,"y"===e?"top":"left",t);return k(oB,{label:t("w.animation.transform.translate"),children:A("div",{className:DJ,children:[A("div",{className:PJ,children:["X",k(JV,{inputStyle:{width:"69px"},logic:r.translateX,value:a,onChange:e=>{u("x",e)},unitConverter:e=>h("x",e),units:LJ,options:ZV})]}),A("div",{className:PJ,children:["Y",k(JV,{inputStyle:{width:"69px"},logic:r.translateY,value:l,onChange:e=>{u("y",e)},units:LJ,unitConverter:e=>h("y",e),options:ZV})]}),s&&A("div",{className:PJ,children:["Z",k(JV,{inputStyle:{width:"69px"},logic:r.translateZ,value:c,onChange:e=>{u("z",e)},units:LJ,unitConverter:e=>h("z",e),options:ZV})]})]})})}var FJ,BJ,jJ,VJ,zJ,KJ={itemsWrap:"_itemsWrap_lq6ex_1",itemRowWrap:"_itemRowWrap_lq6ex_8"};function WJ(e){const{t:t}=WL(),{transformState:n,transformChanged:i,onTransformChange:r}=e,{skewX:o,skewY:s}=n,a=(e,t)=>{r({[`skew${e.toUpperCase()}`]:t})},l=e=>e.replace("deg",""),c=e=>e.includes("deg")||"0"===e?e:`${e}deg`;return k(oB,{label:t("w.animation.transform.skew"),children:A("div",{className:KJ.itemsWrap,children:[A("div",{className:KJ.itemRowWrap,children:["X",k(hB,{logic:i.skewX,className:KJ.input,value:l(o),onChange:e=>{const t=parseInt(e).toString();a("x",c(t))},suffix:"°"})]}),A("div",{className:KJ.itemRowWrap,children:["Y",k(hB,{logic:i.skewY,className:KJ.input,value:l(s),onChange:e=>{const t=parseInt(e).toString();a("y",c(t))},suffix:"°"})]})]})})}function HJ(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=qe(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=HJ(e[n]):t[n]=e[n]})),t}!function(e){e.GET="get",e.HAS="has",e.ITERATE="iterate"}(FJ||(FJ={})),function(e){e.SET="set",e.ADD="add",e.DELETE="delete",e.CLEAR="clear"}(BJ||(BJ={})),new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter($e)),function(e){e.SKIP="__v_skip",e.IS_REACTIVE="__v_isReactive",e.IS_READONLY="__v_isReadonly",e.RAW="__v_raw"}(jJ||(jJ={})),function(e){e[e.INVALID=0]="INVALID",e[e.COMMON=1]="COMMON",e[e.COLLECTION=2]="COLLECTION"}(VJ||(VJ={})),function(e){e[e.none=0]="none",e[e.update=1]="update",e[e.undoRedo=2]="undoRedo"}(zJ||(zJ={}));const $J=T.exports.forwardRef(((e,t)=>{const{animationStyle:n,updateStyle:i,is3D:r}=e,{transformState:o,transformChanged:s,showTransformState:a}=T.exports.useMemo((()=>{const e=hP(n.transform||""),t={};return Object.keys(dP).forEach((n=>{const i=e[n]&&e[n]!==dP[n];Reflect.set(t,n,i)})),{transformState:e,transformChanged:t,showTransformState:w(w({},dP),e)}}),[n]),l=e=>{const t=HJ(o);Object.keys(e).forEach((n=>{const i=e[n];i===dP[n]?Reflect.deleteProperty(t,n):Reflect.set(t,n,i)}));const n=uP(t);i({transform:n})};return Ye((()=>{if(!r){const e={};["rotateX","rotateY","scaleZ","translateZ"].forEach((t=>{Reflect.set(e,t,dP[t])})),l(e)}}),[r]),T.exports.useImperativeHandle(t,(()=>({reset3DEffect:()=>{l({scaleZ:dP.scaleZ,rotateX:dP.rotateX,rotateY:dP.rotateY,translateZ:dP.translateZ})}}))),A(be,{children:[k(UJ,{is3D:r,transformState:a,transformChanged:s,onTransformChange:l}),k(NJ,{is3D:r,transformState:a,transformChanged:s,onTransformChange:l}),k(WJ,{transformState:a,transformChanged:s,onTransformChange:l}),k(RJ,{is3D:r,transformState:a,transformChanged:s,onTransformChange:l}),k(bB,{})]})}));var qJ,YJ,GJ={animationViewContainer:"_animationViewContainer_wlepn_1",animationBar:"_animationBar_wlepn_10",animationControlBar:"_animationControlBar_wlepn_19",previewButton:"_previewButton_wlepn_28",finishButton:"_finishButton_wlepn_34",actionBar:"_actionBar_wlepn_41"};function XJ(){var e,t;const{t:n}=WL(),[i,r]=P(TL),[o,s]=P(ML),[a,l]=P(NL),{model:c}=TD;qD(o&&i);const d=z(jD),u=c.getNodeById(o),{animation:h,trigger:p,triggerAnimationType:f,triggerAnimations:g}=JX(i,o),m=p.type===Qn.loadScroll,_=T.exports.useMemo((()=>"from"===a?bX.start:bX.end),[a]),{scrollValues:v,updateScrollValue:y,createNewScrollTimeline:x}=aJ(p,h),{mirrorAnimation:C,addMirrorAnimation:E,removeMirrorAnimation:S,updateAnimationEffects:I}=rJ(o,h,p),{ids:O,addIds:M,removeIds:R}=sJ("animation-3D-ids"),{ids:D,addIds:L,removeIds:U}=sJ("animation-mirror-ids"),F=null!=(t=null==(e=$G.find((e=>e.type===p.type)))?void 0:e.title)?t:"",{nodeStyle:B,computedStyle:j,createEffect:V}=ZX(o),{style:K,animationStyle:W,pairEffectProps:H,mergeStyle:$,commitAndMerge:q}=function(e,t,n,i){const r=z(NL),o=T.exports.useMemo((()=>{const e=oJ(t,r,n);return Object.keys(e).reduce(((t,n)=>(e[n]&&Reflect.set(t,n,e[n]),t)),{})}),[e,t,r]),s=T.exports.useMemo((()=>t?GX(t.effects):{from:{},to:{}}),[e,t]);return{style:T.exports.useMemo((()=>w(w({},n),o)),[o,n]),animationStyle:o,pairEffectProps:s,mergeStyle:e=>{const t=w(w({},o),e);return Object.keys(e).forEach((r=>{("transform"===r&&!e[r]||"transform"!==r&&(n[r]?e[r]===n[r]:e[r]===i[r]))&&Reflect.deleteProperty(t,r)})),t},commitAndMerge:fD}}(o,h,B,j),{timing:Y,updateTiming:G}=QX(p,h),{initAnimationOverrideStyle:X,unInitAnimationOverrideStyle:J,updateAnimationOverrideStyle:Q}=function(e){const{viewModel:t}=TD,n=z(NL),i=(e,t)=>{const n=w({},t);return n.transform&&(n.transform=$X(n.transform,e.transform)),n};return{initAnimationOverrideStyle:()=>{e.forEach((e=>{const{effects:r}=e,{targetId:o}=r,s=TD.getDeclaredStyle(o),a=oJ(e,n,s),l=i(s,a);t.addOverrideStyle(o,l)}))},unInitAnimationOverrideStyle:()=>{t.clearAllOverrideStyle()},updateAnimationOverrideStyle:(e,n)=>{const[r]=t.getOverrideStyle(e),o=TD.getDeclaredStyle(e),s=i(o,n);r?t.updateOverrideStyle(r.id,s):t.addOverrideStyle(e,s)}}}(g),Z=T.exports.useRef(),[ee,te]=T.exports.useState(!1),ne=T.exports.useRef(),ie=T.exports.useRef(),re=T.exports.useMemo((()=>f!==Wn.appearance),[f]),oe=!m,se=T.exports.useMemo((()=>`${i}|${o}`),[i,o]),ae=T.exports.useMemo((()=>D.includes(se)),[se,D]),le=T.exports.useMemo((()=>O.includes(se)),[se,O]),ce=T.exports.useMemo((()=>Y.iterations===1/0),[Y]),de=T.exports.useMemo((()=>{const e=c.getNodeById(o);return qD(e),io(e)}),[o]);qD(d&&u),T.exports.useEffect((()=>{if(h){const e=XX(h.effects,a),{transform:t=""}=e,n=hP(t);["perspective","scaleZ","rotateX","rotateY","translateZ"].some((e=>n[e]&&n[e]!==dP[e]))&&!le&&M([se])}}),[o]),T.exports.useEffect((()=>{h&&C&&!ae&&L([se])}),[h,C]),T.exports.useEffect((()=>(X(),()=>{J()})),[a]),T.exports.useEffect((()=>(AB({message:n("w.animation.control.selectTips"),duration:3e3}),()=>{ne.current=void 0,s(null),WG()})),[]);const ue=T.exports.useMemo((()=>eQ(W)),[W]);T.exports.useEffect((()=>{Q(o,W)}),[W]);const he=e=>{if(G(e),h){const t=DR(h.effects);Reflect.set(t,"timing",w(w({},Y),e)),TD.transform((()=>{I(t)}))}},pe=e=>{const t=DR(H),n=$(e);Reflect.set(t,a,n);const{to:r,from:o}=t;if([r,o].some((e=>!eQ(e)&&Object.values(e).some((e=>Boolean(e)))))){const e=h?YX(h.effects):f,n=m?jn.both:tJ[e],r=V(e,t,b(w({},Y),{fill:n}));TD.transform((()=>{if(h)I(r);else{let e;qD(!C),m&&(e=x());const t=c.addAnimation(i,r,e);ae&&E(t)}}))}else h&&!ue&&TD.transform((()=>{C&&S(),c.removeAnimation(h.id)}))},fe={node:d,style:K,nodeStyle:B,animationStyle:W,selection:[o],updateStyle:pe,commitAndMerge:q,addStyle:pe},ge={loopShow:oe,mirrorShow:re,is3D:le,isMirror:ae,isLoop:ce,handleLoopChange:e=>{he({iterations:e?1/0:1})},handleMirrorChange:()=>{ae?(h&&C&&TD.transform((()=>{S()})),U([se])):(h&&!C&&TD.transform((()=>{E()})),L([se]))},handle3DChange:()=>{var e;le?(R([se]),null==(e=Z.current)||e.reset3DEffect()):M([se])},handleRemoveEffect:()=>{h&&TD.transform((()=>{S(),c.removeAnimation(h.id)}))}};return A(T.exports.Fragment,{children:[A("div",{className:N(GJ.animationViewContainer,aL),children:[k(_B,{style:{marginTop:"8px"},children:n(F)}),k(EK,{show:m&&v.length>0,children:k(EX,{scrollKey:_,setScrollKey:e=>{const t=e===bX.start?"from":"to";l(t)},scrollValues:v,updateScrollValue:y})}),k(bB,{}),k(_B,{style:{marginTop:"-8px"},slotAdd:k(ZJ,w({},ge)),children:n("w.animation.timing.effect")}),k(TJ,{showOthers:!m,timing:Y,updateTiming:he}),k(SJ,w({showText:de},fe)),k($J,{ref:Z,is3D:le,nodeStyle:B,animationStyle:W,updateStyle:pe})]}),k(JJ,{previewDisabled:g.length<=0,playing:ee,onFinish:()=>{r(null),s(null)},onPreview:()=>{const e=p.type===Qn.loadScroll;var t;ee?(ne.current=void 0,WG(),X(),e&&te(!1)):(null==(t=ie.current)||t.call(ie),J(),TD.view.nextTick((()=>{ne.current=()=>{ie.current=void 0,X()};const e=g.map((e=>{const t=DR(e);return t.effects.timing.iterations=1,t}));ie.current=KG(e,!0,(()=>{var e;null==(e=ne.current)||e.call(ne),ne.current=void 0}))})),e&&te(!0))}})]})}function JJ(e){const{t:t}=WL(),{previewDisabled:n,playing:i,onFinish:r,onPreview:o}=e;return k("div",{className:GJ.animationBar,children:A("div",{className:GJ.animationControlBar,children:[k(ae,{variant:"primary",disabled:n,click:o,className:GJ.previewButton,children:k(PL,{slot:"icon",name:i?"Stop":"Play"})}),k(ae,{click:r,className:GJ.finishButton,children:t("w.animation.control.finish")})]})})}(YJ=qJ||(qJ={})).open="open",YJ.close="close";const QJ=[{value:qJ.close,label:"w.animation.control.close"},{value:qJ.open,label:"w.animation.control.open"}];function ZJ(e){const[t,n]=T.exports.useState(!1),{t:i}=WL(),{isLoop:r,is3D:o,isMirror:s,loopShow:a,mirrorShow:l,handleLoopChange:c,handle3DChange:d,handleMirrorChange:u,handleRemoveEffect:h}=e;return k("span",{className:GJ.actionBar,children:k($B,{popoverStyle:{width:"256px"},title:i("w.animation.presets"),visible:t,onVisibleChange:()=>{n(!t)},trigger:k(ke,{quiet:!0,className:GJ.addMenu,children:k(PL,{slot:"icon",className:GJ.icon,name:"MoreHoriz"})}),content:A("div",{children:[k(EK,{show:a,children:k(oB,{label:i("w.animation.control.loop"),children:k(dj,{selected:r?qJ.open:qJ.close,options:QJ.map((e=>b(w({},e),{label:i(e.label)}))),onChange:e=>{c(e===qJ.open)},radioStyle:{padding:"13px 23px"}})})}),k(EK,{show:l,children:k(oB,{label:i("w.animation.control.mirror"),children:k(dj,{selected:s?qJ.open:qJ.close,options:QJ.map((e=>b(w({},e),{label:i(e.label)}))),onChange:e=>{u(e===qJ.open)},radioStyle:{padding:"13px 23px"}})})}),k(oB,{label:i("w.animation.control.3d"),children:k(dj,{selected:o?qJ.open:qJ.close,options:QJ.map((e=>b(w({},e),{label:i(e.label)}))),onChange:e=>{d(e===qJ.open)},radioStyle:{padding:"13px 23px"}})})]}),fitToConfigPanel:!0})})}function eQ(e){return Object.keys(e).length<=0}var tQ="_animationItem_179lx_1";function nQ(e){const{tab:t}=e,n=z(LD),[i,r]=P(TL),[o,s]=P(ML);T.exports.useEffect((()=>()=>{r(null),s(null)}),[t]);const a=()=>{var e;TD.setContextKeyValue(bm.isAnimationEditing.key,!1),null==(e=TD.viewModel)||e.popSelection()},l=T.exports.useMemo((()=>Boolean(i&&o)),[i,o]);return T.exports.useEffect((()=>{var e;return l&&(TD.setContextKeyValue(bm.isAnimationEditing.key,l),null==(e=TD.viewModel)||e.stashSelection()),()=>{l&&a()}}),[l]),T.exports.useEffect((()=>()=>{a()}),[]),1!==n.length?null:k("section",{className:tQ,children:k(l?XJ:EJ,{})})}var iQ,rQ,oQ="_configPanel_1m4cs_1",sQ="_tabs_1m4cs_10",aQ="_tabButton_1m4cs_22",lQ="_tabPanel_1m4cs_30",cQ="_drawer_1m4cs_34",dQ="_animationDrawer_1m4cs_46";function uQ(e,t){const[n,i]=we(),r=vK();function o(){TD.getContextKeyValue(e,(e=>{i(e)}))}return T.exports.useEffect((()=>{let t;return TD.onDidContextKeysChange([e],o,(e=>{t=e})),()=>{null==t||t.dispose()}}),[r,e]),T.exports.useEffect(o,[r,...t]),n}function hQ(){const e=uQ(bm.viewMode.key,[]),t=e===gm.Editing,n=e===gm.Preview;return{editorMode:null!=e?e:gm.Editing,isInEditingMode:t,isInPreviewMode:n,setEditorMode:function(e){TD.editor.setMode(e)}}}function pQ(){const e=z(jD);if(!e)return null;const t=co(e);return k("div",{className:N(cQ,aL),children:k(t?WK:zK,{})})}function fQ(e){return k("div",{className:N(cQ,dQ,aL),children:k(nQ,w({},e))})}function gQ(){const{t:e}=WL(),[t]=P(SL),n=z(LD),{isInPreviewMode:i,editorMode:r}=hQ(),o=Ge(n,((e,t)=>!Qt(e,t,Object.is))),[s,a]=T.exports.useState(iQ.design),l="configPanelTabs";return T.exports.useEffect((()=>{document.querySelectorAll("active-overlay").forEach((e=>e.remove()))}),[o]),T.exports.useEffect((()=>{var e;const t=null==(e=TD.view)?void 0:e.getViewport();t&&(TD.setViewportWidth(t.logicWidth+1),setTimeout((()=>{TD.setViewportWidth(t.logicWidth)}),100))}),[r]),!t||i?null:k("div",{className:oQ,children:A(Xe,{id:l,className:sQ,selected:iQ.design,change:function(e){var t;(null==(t=e.target)?void 0:t.id)===l&&a(e.target.selected||iQ.design)},children:[k(Je,{className:aQ,value:iQ.design,children:e("w.design")}),k(Je,{className:aQ,value:iQ.animation,children:e("w.animation")}),k(Je,{className:aQ,value:iQ.settings,children:e("w.setting")}),k(Qe,{className:lQ,value:iQ.design,children:k(pQ,{})}),k(Qe,{className:lQ,value:iQ.animation,children:k(fQ,{tab:s})}),k(Qe,{className:lQ,value:iQ.settings,children:k(AW,{})})]})})}(rQ=iQ||(iQ={})).design="design",rQ.animation="animation",rQ.settings="settings";var mQ="_container_z577f_1",_Q="_left_z577f_8",vQ="_mid_z577f_13",yQ="_bp_z577f_22",wQ="_activeBp_z577f_32",bQ="_viewportInputWrap_z577f_45",xQ="_viewportInput_z577f_45",CQ="_viewportInputUnit_z577f_61",kQ="_right_z577f_65",EQ="_navBtnIcon_z577f_78",SQ="_iconDisabled_z577f_81",IQ="_buttonGroup_z577f_85",OQ="_popoverMenu_z577f_91",TQ="_hoverPopoverMenu_z577f_95",MQ="_devicePopoverTitle_z577f_99",NQ="_devicePopoverContent_z577f_108",AQ="_devicePopoverExplain_z577f_117",RQ="_icon_z577f_81",DQ="_iconAlign_z577f_148";var PQ,LQ,UQ="_container_1frck_1",FQ="_editorToolbar_1frck_4",BQ="_siteManage_1frck_38 _itemHover_1frck_23 _activeItem_1frck_30 _itemLayout_1frck_17",jQ="_layer_1frck_42 _itemHover_1frck_23 _activeItem_1frck_30 _itemLayout_1frck_17",VQ="_add_1frck_46 _itemHover_1frck_23 _activeItem_1frck_30 _itemLayout_1frck_17",zQ="_menuBtnIcon_1frck_50",KQ="_divider_1frck_54",WQ="_popoverMenu_1frck_59";(LQ=PQ||(PQ={})).NOT_CREATED="NOT_CREATED",LQ.SAVED="SAVED",LQ.MODIFIED="MODIFIED";const HQ=on("recordService");function $Q(){const{t:e}=WL(),[t,n]=P(EL),i=nU(HQ);function r(){n(null)}function o(e){n(e)}function s(){window.location.href="/"}function a(){null==i||i.import()}function l(){return A(Ze,{className:WQ,children:[A(Ce,{click:s,children:[k(PL,{slot:"icon",name:"Home"}),e("w.menu.returnHome")]}),k(et,{}),A(Ce,{click:a,children:[k(PL,{slot:"icon",name:"Add"}),e("w.menu.import")]})]})}return T.exports.useEffect((()=>{var e;t||null==(e=document.activeElement)||e.blur(),TD.execEditorCommand("fitCanvas")}),[t]),A("div",{className:N([UQ,"editorDispatchKeyEventClass"]),children:[A("div",{className:FQ,children:[k($B,{options:{placement:"bottom-start"},content:k(l,{}),trigger:k("div",{tabIndex:1,className:N({[BQ]:!0}),children:k(PL,{className:zQ,name:"Menu"})})}),k(U,{className:KQ,vertical:!0}),k("div",{tabIndex:2,className:N({[jQ]:!0}),onClick:()=>t===CL.layer?r():o(CL.layer),children:k(PL,{className:zQ,name:"Layers"})}),k("div",{tabIndex:3,className:N({[VQ]:!0}),onClick:()=>t===CL.add?r():o(CL.add),children:k(PL,{className:zQ,name:"Add"})})]}),k("div",{})]})}var qQ="_buttonDisabled_ilxqq_12",YQ="_navButton_ilxqq_20 _buttonHover_ilxqq_1";function GQ(e){const t=e,{children:n,onClick:i,disabled:r}=t,o=x(t,["children","onClick","disabled"]);return k("div",b(w({className:N(YQ,{[qQ]:r}),onClick:function(e){i&&i(e)}},o),{children:n}))}var XQ,JQ="_saveButtonContainer_1kh4r_1",QQ="_saveButtonMessage_1kh4r_26",ZQ="_buttonDisabled_1kh4r_31",eZ="_saveStatusInfo_1kh4r_37",tZ="_saveStatusWarning_1kh4r_41",nZ="_saveStatusError_1kh4r_45",iZ="_saveStatusCompleted_1kh4r_49",rZ="_savingIcon_1kh4r_53",oZ="_savingIconCircle1_1kh4r_77",sZ="_savingIconCircle2_1kh4r_84",aZ="_savingIconCircle3_1kh4r_91",lZ="_pointerIcon_1kh4r_116";!function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"}(XQ||(XQ={}));class cZ{constructor(){C(this,"_coreKeybindings"),C(this,"_extensionKeybindings"),C(this,"_cachedMergedKeybindings"),this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(YR===qR.Windows){if(e&&e.win)return e.win}else if(YR===qR.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}static bindToCurrentPlatform2(e){if(YR===qR.Windows){if(e&&e.win)return e.win}else if(YR===qR.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=cZ.bindToCurrentPlatform(e);if(t&&t.primary){const n=yF(t.primary,YR);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const i=yF(t.secondary[n],YR);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,-n-1,e.when)}}setExtensionKeybindings(e){const t=[];let n=0;for(let i=0,r=e.length;i<r;i++){const r=e[i],o=cZ.bindToCurrentPlatform2(r);o&&o.primary&&(t[n++]={keybinding:o.primary,command:r.id,commandArgs:r.args,when:r.when,weight1:r.weight,weight2:0,extensionId:r.extensionId||null,isBuiltinExtension:r.isBuiltinExtension||!1})}this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return this.registerKeybindingRule(e),SD.registerCommand(e)}static _mightProduceChar(e){return e>=dF.KEY_0&&e<=dF.KEY_9||(e>=dF.KEY_A&&e<=dF.KEY_Z||(e===dF.US_SEMICOLON||e===dF.US_EQUAL||e===dF.US_COMMA||e===dF.US_MINUS||e===dF.US_DOT||e===dF.US_SLASH||e===dF.US_BACKTICK||e===dF.ABNT_C1||e===dF.ABNT_C2||e===dF.US_OPEN_SQUARE_BRACKET||e===dF.US_BACKSLASH||e===dF.US_CLOSE_SQUARE_BRACKET||e===dF.US_QUOTE||e===dF.OEM_8||e===dF.OEM_102))}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&cZ._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,r,o){YR===qR.Windows&&this._assertNoCtrlAlt(e,t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:i,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(pZ)),this._cachedMergedKeybindings.slice(0)}clear(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}}const dZ="KeybindingsRegistry";let uZ=Reflect.get(globalThis,dZ);uZ||(uZ=new cZ,Reflect.set(globalThis,dZ,uZ));const hZ=uZ;function pZ(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}class fZ extends cm{constructor(e){super({id:"save",kbOpts:{weight:XQ.WorkbenchContrib,primary:_F.CtrlCmd|dF.KEY_S}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}function gZ(){return k("div",{className:rZ,children:A("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentcolor",xmlns:"http://www.w3.org/2000/svg",children:[k("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75 9C5.75 6.65279 7.65279 4.75 10 4.75C11.8145 4.75 13.3653 5.88747 13.9745 7.49086L14.2341 8.17414L14.9238 7.9322C15.2597 7.81439 15.6215 7.75 16 7.75C17.7949 7.75 19.25 9.20507 19.25 11C19.25 11.0908 19.2463 11.1806 19.239 11.2693L19.1966 11.788L19.6676 12.0093C20.6041 12.4493 21.25 13.4 21.25 14.5C21.25 15.848 20.2801 16.9695 19 17.2047V18.7209C21.1116 18.4734 22.75 16.6781 22.75 14.5C22.75 12.9776 21.9495 11.6434 20.7488 10.8932C20.692 8.31918 18.5877 6.25 16 6.25C15.6916 6.25 15.3895 6.2795 15.0967 6.33593C14.1364 4.50243 12.2152 3.25 10 3.25C6.90712 3.25 4.38459 5.69193 4.25521 8.75298C2.47946 9.59416 1.25 11.4027 1.25 13.5C1.25 15.8783 2.83138 17.8872 5 18.5326V16.938C3.67557 16.3593 2.75 15.0377 2.75 13.5C2.75 11.8664 3.79496 10.475 5.2552 9.96133L5.78335 9.77555L5.7554 9.21638C5.75181 9.14476 5.75 9.07263 5.75 9Z"}),k("circle",{className:oZ,cx:"8",cy:"18",r:"1.25"}),k("circle",{className:sZ,cx:"12",cy:"18",r:"1.25"}),k("circle",{className:aZ,cx:"16",cy:"18",r:"1.25"})]})})}function mZ(){const[e,t]=T.exports.useState(!1),[n,i]=T.exports.useState(!1),{editorMode:r}=hQ(),{recordService:o,message:s,status:a,type:l,setMessage:c,setType:d}=function(){const e=nU(HQ),[t,n]=T.exports.useState(),[i,r]=T.exports.useState(""),[o,s]=T.exports.useState("");return T.exports.useEffect((()=>{let t;return e&&(t=e.onUpdated((({status:e,message:t,type:i})=>{n(e),r(t||""),s(i||"info")}))),()=>{t&&t.dispose()}}),[e]),{recordService:e,status:t,message:i,type:o,setMessage:r,setType:s,setStatus:n}}(),u=e||!o||!window.navigator.onLine;async function h(){}!function(e,t){let n;T.exports.useEffect((()=>(e===gm.Editing&&(n=hm(new fZ(t))),()=>{null==n||n.dispose()})),[e,t])}(r,h);const p=n?"CloudDone":"CloudOff";return s||a===PQ.MODIFIED||n||e?A("div",{className:N(JQ,{[ZQ]:u}),children:[k("button",{className:N({[eZ]:"info"===l,[tZ]:"warning"===l,[nZ]:"error"===l,[iZ]:n}),disabled:u,onClick:h,children:e?k(gZ,{}):k(PL,{name:p})}),s?A("div",{className:QQ,children:[k("span",{children:s}),k("svg",{className:lZ,width:"36",height:"5",viewBox:"0 0 36 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:k("path",{d:"M19.2882 1.17113L22.3557 3.95976C23.092 4.62911 24.0514 5 25.0464 5L10.5518 5C11.4875 5 12.3937 4.67194 13.1125 4.07289L16.6625 1.11456C17.4293 0.475611 18.5497 0.499748 19.2882 1.17113Z",fill:"#383838"})})]}):null]}):null}function _Z(e){const t=e,{children:n}=t,i=x(t,["children"]);return k(fe,{color:"light",scale:"medium",children:k(tt,b(w({},i),{children:n}))})}const vZ=on("undoRedoService");function yZ(){const{isInEditingMode:e}=hQ();return k(fe,{color:"dark",scale:"medium",children:A("div",{className:mQ,style:{height:`${TD.navBarHeight}px`},children:[e&&k("div",{className:_Q,children:k($Q,{})}),k(SZ,{}),k(wZ,{})]})})}function wZ(){const{t:e}=WL(),t=z(DD),[n,i]=P(SL),{isInEditingMode:r,setEditorMode:o}=hQ(),s=nU(HQ);return T.exports.useEffect((()=>{setTimeout((()=>{TD.execEditorCommand("fitCanvas")}),0)}),[n]),A("div",r?{className:kQ,children:[k(mZ,{}),A(_Z,{placement:"bottom-start",children:[A(GQ,{slot:"trigger",children:[(100*((null==t?void 0:t.scale)||1)).toFixed(0),"%"]}),k(nt,{slot:"click-content",children:k(xZ,{})})]}),k("div",{className:IQ,children:k(CZ,{})}),k(ae,{variant:"primary",onClick:function(){setTimeout((()=>{o(gm.Preview),null==s||s.preview()}))},children:e("w.nav.preview")}),k(bZ,{}),k(GQ,{onClick:()=>i(!n),children:k(PL,{className:EQ,name:"Tune"})})]}:{className:kQ,children:[k(ae,{variant:"primary",onClick:function(){o(gm.Editing)},children:e("w.nav.edit")}),k(bZ,{style:{marginRight:24}})]})}function bZ(e){let{isInEditingMode:t,setEditorMode:n}=hQ();return k(ae,b(w({variant:"cta",onClick:async function(){t&&n(gm.Preview),await un(4);const e=document.querySelector('iframe[title="editor"]').contentDocument,i=`\n<html>\n<head>\n${e.head.innerHTML}\n</head>\n<body>\n${e.body.firstElementChild.innerHTML}\n</body>\n</html>\n`;t&&n(gm.Editing);const r=new File([i],"export.html",{type:"text/plain;charset=utf-8"});it.exports.saveAs(r)}},e),{children:"导出"}))}function xZ(){const{t:e}=WL();return A(Ze,{className:OQ,change:e=>{!function(e){switch(e){case"zoomOut":TD.execEditorCommand("zoomOut");break;case"zoomIn":TD.execEditorCommand("zoomIn");break;case"zoomReset":TD.execEditorCommand("zoomReset")}}(e.target.value)},children:[A(Ce,{value:"zoomIn",children:[A("span",{slot:"value",children:[k(PL,{name:"Command",className:DQ}),k(PL,{name:"Add",className:DQ})]}),e("w.zoom.zoomIn")]}),A(Ce,{value:"zoomOut",children:[A("span",{slot:"value",children:[k(PL,{name:"Command",className:DQ}),k(PL,{name:"Remove",className:DQ})]}),e("w.zoom.zoomOut")]}),A(Ce,{value:"zoomReset",children:[A("span",{slot:"value",children:[k(PL,{name:"Command",className:DQ}),k("span",{className:N([RQ,DQ]),children:"0"})]}),e("w.zoom.100%")]})]})}function CZ(){const{canUndo:e,canRedo:t}=function(){const[e,t]=T.exports.useState({canRedo:!1,canUndo:!1}),n=vK(),i=nU(vZ),{run:r}=le((()=>{i&&t({canUndo:i.canUndo(),canRedo:i.canRedo()})}),{wait:50});return T.exports.useEffect((()=>{var e;r();const t=null==(e=TD.model)?void 0:e.onUpdated(r);return()=>{null==t||t.dispose()}}),[n]),e}();return A(T.exports.Fragment,{children:[k(GQ,{onClick:function(){TD.undo()},children:k(PL,{className:N({[EQ]:!0,[SQ]:!e}),name:"Undo"})}),k(GQ,{onClick:function(){TD.redo()},children:k(PL,{className:N({[EQ]:!0,[SQ]:!t}),name:"Redo"})})]})}var kZ,EZ;function SZ(){const[e,t]=T.exports.useState(0),n=z(RD),i=z(PD),r=z(DD),{t:o}=WL(),s=T.exports.useRef(null);return uB(s),T.exports.useEffect((()=>{(null==r?void 0:r.logicWidth)&&t(r.logicWidth)}),[null==r?void 0:r.logicWidth]),A("div",{className:vQ,children:[k("div",{className:IQ,children:n.map((e=>{const{maxWidth:t}=e;let r=kZ.Desktop,o={title:"w.device.desktop",content:"w.device.desktop.breakpoint",explain:"w.device.desktop.desc"};return t<=750?(r=kZ.Smartphone,o={title:"w.device.phone",content:"w.device.phone.breakpoint",explain:"w.device.phone.desc"}):t<=1e3&&(r=kZ.TabletMac,o={title:"w.device.tablet",content:"w.device.tablet.breakpoint",explain:"w.device.tablet.desc"}),A(_Z,{placement:"bottom",children:[k("div",{slot:"trigger",onClick:()=>function(e){const t=n.find((t=>t.id===e)),i=n[1].maxWidth;$D(t),"__baseBreakpointId__"===e?TD.defaultCanvasWidth<i?TD.setViewportWidth(i+100):TD.resetEditorViewport():t.minWidth>750?TD.setViewportWidth(768):(r=t,r.minWidth>300?TD.setViewportWidth(360):TD.setViewportWidth(null==t?void 0:t.minWidth));var r}(e.id),className:N({[yQ]:!0,[wQ]:r===kZ.Desktop?!i:(null==i?void 0:i.id)===e.id}),children:k(PL,{className:EQ,name:r})}),k(nt,{slot:"hover-content",delayed:!0,children:k(IZ,{detail:o})})]},e.id)}))}),A("div",{className:bQ,children:[k("input",{ref:s,className:xQ,type:"text",value:e,onChange:e=>t(e.target.value),onBlur:e=>{!function(e){if(e>1e4||e<320)return AB({message:o("w.device.adjustTips"),duration:2e3,showClose:!1}),void((null==r?void 0:r.logicWidth)&&t(null==r?void 0:r.logicWidth));TD.setViewportWidth(e)}(function(e){var n;const i=parseInt(null==(n=e.target)?void 0:n.value);if(Number.isNaN(i)){const e=(null==r?void 0:r.logicWidth)||320;return t(e),e}return i}(e))}}),k("span",{className:CQ,children:"px"})]})]})}function IZ(e){const{t:t}=WL(),{title:n,content:i,explain:r}=e.detail;return A("div",{className:TQ,children:[k("p",{className:MQ,children:t(n)}),k("p",{className:NQ,children:t(i)}),k("p",{className:AQ,children:t(r)})]})}(EZ=kZ||(kZ={})).Desktop="Desktop",EZ.Smartphone="Smartphone",EZ.TabletMac="TabletMac",q.t("w.device.desktop"),q.t("w.device.desktop.breakpoint"),q.t("w.device.desktop.desc"),q.t("w.device.phone"),q.t("w.device.phone.breakpoint"),q.t("w.device.phone.desc"),q.t("w.device.tablet"),q.t("w.device.tablet.breakpoint"),q.t("w.device.tablet.desc");var OZ="_toolbar_1d429_1";var TZ="_wrapper_1v0un_1",MZ="_underlay_1v0un_13",NZ="_dialog_1v0un_21",AZ="_content_1v0un_25",RZ="_leftBar_1v0un_30",DZ="_rightBar_1v0un_39",PZ="_footer_1v0un_45",LZ="_radioItem_1v0un_54",UZ="_linkBtn_1v0un_58";var FZ={emptyContent:"_emptyContent_1akk1_1",emptyWord:"_emptyWord_1akk1_14",emptyTitle:"_emptyTitle_1akk1_21",fieldItem:"_fieldItem_1akk1_29",inputItem:"_inputItem_1akk1_34"};q.t("w.link.type.none"),q.t("w.link.type.site"),q.t("w.link.type.anchor"),q.t("w.link.type.phone"),q.t("w.link.type.email");const BZ=[{value:vB.none,title:"w.link.type.none",content:VZ},{value:vB.site,title:"w.link.type.site",content:function(e){const{t:t}=WL(),{linkInfo:n,onChange:i}=e,r=WZ();return A("div",{className:FZ.pageContent,children:[k(KZ,{id:"site",label:t("w.link.href"),children:k(H,{className:FZ.inputItem,autofocus:r,value:n.href,placeholder:t("w.link.placeholder.site"),change:e=>{i("href",e)}})}),k(KZ,{id:"target",label:t("w.link.target"),children:k(zZ,{target:n.target,onChange:e=>{i("target",e)}})})]})}},{value:vB.anchor,title:"w.link.type.anchor",content:function(e){const{t:t}=WL(),{pageList:n,anchorList:i,linkInfo:r,onChange:o}=e;n.map((e=>{const{title:t,value:n}=e;return{label:t,value:n}}));const s="none",a=i.length>0?i.map((e=>{const{title:t,value:n}=e;return{label:t,value:n}})):[{label:t("w.link.anchorEmpty"),value:s}],l=i.length<=0;return k("div",{className:FZ.pageContent,children:k(KZ,{id:"anchor",label:t("w.link.title.anchor"),children:k(zV,{className:FZ.inputItem,disabled:l,value:l?s:r.anchor,options:a,onChange:e=>{o("anchor",e)}})})})}},{value:vB.phone,title:"w.link.type.phone",content:function(e){const{t:t}=WL(),{linkInfo:n,onChange:i}=e,r=WZ();return k("div",{className:FZ.pageContent,children:k(KZ,{id:"phone",label:t("w.link.title.phone"),children:k(H,{className:FZ.inputItem,autofocus:r,value:n.href,placeholder:t("w.link.placeholder.phone"),change:e=>{i("href",e)}})})})}},{value:vB.email,title:"w.link.type.email",content:function(e){const{t:t}=WL(),{linkInfo:n,onChange:i}=e,r=WZ();return k("div",{className:FZ.pageContent,children:k(KZ,{id:"email",label:t("w.link.title.email"),children:k(H,{className:FZ.inputItem,autofocus:r,value:n.href,placeholder:t("w.link.placeholder.email"),change:e=>{i("href",e)}})})})}}];function jZ(e){var t,n;const{linkInfo:i,onChange:r,pageList:o,anchorList:s}=e,a=null!=(t=null==i?void 0:i.type)?t:vB.none,l=(null==(n=BZ.find((e=>e.value===a)))?void 0:n.content)||VZ;return k(l,{pageList:o,anchorList:s,linkInfo:i,onChange:r})}function VZ(){const{t:e}=WL();return A("div",{className:FZ.emptyContent,children:[k("p",{className:FZ.emptyTitle,children:e("w.link.listEmpty")}),k("p",{className:FZ.emptyWord,children:e("w.link.listEmpty.desc")})]})}function zZ(e){const{target:t,onChange:n}=e,i=WZ(),{t:r}=WL();return A(ve,{autofocus:i,name:"linkTargetType",vertical:!0,selected:t,change:n,children:[k(ye,{emphasized:!0,value:"_self",className:FZ.inputItem,children:r("w.link.target.self")},"_self"),k(ye,{emphasized:!0,value:"_blank",className:FZ.inputItem,children:r("w.link.target.blank")},"_blank")]})}function KZ(e){const{label:t,id:n,children:i}=e;return A("div",{className:FZ.fieldItem,children:[k(re,{for:n,children:t}),i]})}function WZ(){const[e,t]=T.exports.useState(!1);return T.exports.useEffect((()=>{let e=setTimeout((()=>{t(!0),e=0}),100);return()=>{clearTimeout(e)}}),[]),e}const HZ=[],$Z={type:vB.none,href:"",anchor:"",target:"_blank",rel:Ws[""]};function qZ(e){const{link:t,open:n,onClose:i}=e,{removeLink:r,updateLink:o}=function(){const e=z(LD);return{updateLink:t=>{const n=t,{type:i,target:r,rel:o}=n,s=x(n,["type","target","rel"]);if("none"===i)return;const a=IB.stringify(i,s),[l]=e;l&&a&&r?TD.transform((e=>{e.updateLink(l,a,r,o)})):console.error(KD.badRequest)},removeLink:()=>{const[t]=e;t?TD.transform((e=>{e.removeLink(t)})):console.error(KD.badRequest)}}}(),[s,a]=T.exports.useState(!1),[l,c]=T.exports.useState($Z),{nodes:d}=z(AD),{t:u}=WL(),h=T.exports.useMemo((()=>d.filter((e=>{var t;return!!(null==(t=e.props)?void 0:t.id)})).map((e=>{const{id:t}=e.props;return{title:t,value:t}}))),[d]);function p(e){if(e){const{href:t,target:n}=e;let{href:i,type:r,anchor:o=""}=IB.parse(t);return r!==vB.anchor||h.find((e=>e.value===o))?r===vB.page&&HZ.find((e=>e.value===i))&&(i=""):o="",{target:n,href:i,type:r,anchor:o}}return w({},$Z)}function f(){i&&i()}return T.exports.useEffect((()=>{if(n){const e=p(t);c(e)}}),[n]),T.exports.useEffect((()=>{const e=p(t);c(e)}),[t]),T.exports.useEffect((()=>{const{type:e,href:t,anchor:n}=l,i=e!==vB.none&&(e!==vB.anchor&&!t||e===vB.anchor&&!n);a(i)}),[l]),n?A("div",{className:TZ,children:[k(rt,{open:!0,className:MZ}),A(ge,{divider:!0,title:u("w.link"),dismissable:!0,className:NZ,close:f,children:[A("div",{className:AZ,children:[k("div",{className:RZ,children:k(ve,{vertical:!0,name:"linkType",selected:l.type,change:function(e){var t,n,i,r,o;const s=null==(t=e.target)?void 0:t.value;if(void 0===s)return;let a="_self",l="",d="";[vB.page,vB.anchor].includes(s)&&(l=null!=(i=null==(n=HZ[0])?void 0:n.value)?i:"",s===vB.anchor&&(d=null!=(o=null==(r=h[0])?void 0:r.value)?o:"")),[vB.page,vB.site].includes(s)&&(a="_blank"),c({type:s,href:l,target:a,anchor:d})},children:BZ.map((e=>k(ye,{emphasized:!0,value:e.value,className:LZ,children:u(e.title)},e.value)))})}),k(U,{vertical:!0}),k("div",{className:DZ,children:k(jZ,{linkInfo:l,pageList:HZ,anchorList:h,onChange:function(e,t){var n;c(b(w({},l),{[e]:null==(n=t.target)?void 0:n.value}))}})})]}),k(U,{}),k("div",{className:PZ,children:A(ot,{children:[k(ae,{variant:"secondary",className:UZ,onClick:f,children:u("w.dialog.cancel")}),k(ae,{variant:"cta",className:UZ,disabled:s,onClick:function(){const{type:e}=l;e===vB.none?r():o(l),f()},children:u("w.dialog.confirm")})]})})]})]}):null}var YZ="_btn_ldfe6_1";function GZ(){return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:YZ,onClick:function(){TD.execEditorCommand("wrap")},children:"放置在容器中"}),k(U,{vertical:!0})]})}function XZ(){const e=z(LD);if(1===e.length&&LU.isAutoLayout(e[0]))return null;return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:YZ,onClick:function(){TD.execEditorCommand("unwrap")},children:"移除容器"}),k(U,{vertical:!0})]})}const JZ=e=>{const[t,n]=T.exports.useState(e.data),[i,r]=T.exports.useState(!0),o=[...st.materialRenderers];return A(T.exports.Fragment,{children:[k(at.JsonForms,{schema:e.dataSchema,data:t,renderers:o,cells:st.materialCells,onChange:({errors:e,data:t})=>{(null==e?void 0:e.length)?r(!1):(r(!0),n(t))}}),k(lt,{onClick:()=>{var n;return null==(n=e.onDataChange)?void 0:n.call(e,t)},disabled:!i,color:"primary",variant:"contained",children:"Confirm"})]})};var QZ=()=>{let e,t;return{async mount({container:n,data:i,context:r}){t=document.createElement("div");const o=ct(b(w({},dt()),{insertionPoint:t}));n.appendChild(t),e=ut.render(k(ht,{jss:o,children:k(JZ,{data:i.data,dataSchema:i.dataSchema,onDataChange:e=>{r.update({data:e})}})}),t)},async unmount({container:n}){e&&e.unmount?e.unmount():ut.unmountComponentAtNode(t),n.innerHTML=""}}};const{INITIAL:ZZ,UPDATING:e0,MOUNTED:t0}=pt;var n0=({data:e,dataSchema:t,dataUserInterface:n,onDataChange:i})=>{const r=T.exports.createRef(),o=!!n;if(!t&&!n)throw new Error("options.dataSchema or options.dataUserInterface must exist");return T.exports.useEffect((()=>{const n=r.current;n.createRenderRoot=()=>n,n.data=o?e:{data:e,dataSchema:t},n.application=QZ;let s=ZZ;n.addEventListener("statechange",(()=>{const e=(t=n.data,JSON.parse(JSON.stringify(t)));var t;s===e0&&n.state===t0&&i(e),s=n.state})),n.inactive=!1}),[]),k(T.exports.Fragment,{children:k("web-widget",{name:"web-widget-data-form",ref:r,inactive:!0})})};var i0="_panelContent_1ukq2_1",r0="_panelWrapper_1ukq2_7";var o0="_btn_ldfe6_1";var s0="_btn_ldfe6_1";function a0(e){return e.reduce(((e,t)=>e+t),0)}const l0=[{component:function(){const e=z(VD),t=!!e,n=document.querySelector("sp-theme"),[i,r]=T.exports.useState(!1);return n?A("div",{children:[k(ke,{quiet:!0,selected:t,onClick:()=>{r(!0)},children:k(PL,{slot:"icon",name:"Link"})}),oe.exports.createPortal(k(qZ,{link:e,open:i,onClose:()=>{r(!1)}}),n)]}):null},filter:(e,t)=>1===t.length&&!ho(e)&&!so(e)},{component:function(){const e=z(jD),t=nU(lj);return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:o0,onClick:function(){aj().then((async n=>{const i=null==n?void 0:n.item(0);$D(i,KD.badRequest);const r=await(null==t?void 0:t.put(i));$D(r,KD.badRequest),TD.transform((t=>{t.updateNodeById(null==e?void 0:e.id,{src:r})}))}))},children:"替换图片"}),k(U,{vertical:!0})]})},filter:(e,t)=>1===t.length&&ro(e)},{component:function(){var e,t;const n=z(jD),[i,r]=T.exports.useState(null),[o,s]=T.exports.useState(!1);if(T.exports.useEffect((()=>{o||r(null)}),[o]),je((()=>{f()}),[n]),!n)return null;const{meta:a,props:l,id:c}=n,d=null!=(e=null==a?void 0:a.config)?e:"",u=!d,h=null!=(t=null==l?void 0:l.data)?t:{},p=document.querySelector("sp-theme");if(!p)return null;function f(){TD.commitAndMerge(),s(!1)}return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,click:function(){TD.fork(),async function(){const e=await async function(e){return(await fetch(e,{method:"GET",mode:"cors",cache:"default",headers:{"Content-Type":"application/json"}})).json()}(d);r(e.dataSchema||null)}(),s(!0)},disabled:u,children:k(PL,{slot:"icon",name:"Settings"})}),o&&i?oe.exports.createPortal(k(ge,{title:"物料设置",dismissable:!0,divider:!0,className:r0,open:o,close:f,children:k("div",{className:i0,children:k(n0,{data:h,dataSchema:i,onDataChange:function(e){const t=DR(e);TD.add((e=>{e.updateNodeById(c,b(w({},l),{data:t}))}))}})})}),p):null]})},filter:(e,t)=>1===t.length&&so(e)},{component:function(){const e=z(jD),{t:t}=WL();return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:s0,onClick:function(){$D(e);const{width:t="",height:n="","flex-direction":i=iP.row}=TD.getDeclaredStyle(e.id),{width:r,height:o}=TD.view.getElementRectById(e.id),s={},a=TD.model.getChildrenNodesOfId(e.id),l=SP(t),c=SP(n),d=a.map((e=>TD.view.getElementRectById(e.id))),u=a0(d.map((e=>e.width))),h=a0(d.map((e=>e.height)));i===iP.row&&u>r&&(s.width="100px"),i===iP.column&&h>o&&(s.height="100px"),i===iP.row&&a.some((e=>{var t;return QL(null!=(t=TD.getDeclaredStyle(e.id).width)?t:"")}))&&(s.width="100px"),i===iP.column&&a.some((e=>{var t;return QL(null!=(t=TD.getDeclaredStyle(e.id).height)?t:"")}))&&(s.height="100px"),l&&(s.width="100px"),c&&(s.height="100px"),Object.keys(s).length&&Object.assign(s,w({},kr)),TD.transform((t=>{const n=iF({styles:[{style:w(w({},QU),s)}]}),i=t.addNode({ref:e.id,direction:Es.inward},{},n.meta);n.styles.forEach((e=>{t.updateStyle(i.id,e.style,e.breakpointWidth)}))}))},children:t("w.autoLayout.addItem")}),k(U,{vertical:!0})]})},filter:(e,t)=>1===t.length&&LU.isAutoLayout(e.id)},{component:function(){const e=z(LD),t=uQ(bm.wrapMode.key,[e]);return t===_m.None?null:A(T.exports.Fragment,{children:[(t===_m.WrapAble||t===_m.Both)&&k(GZ,{}),(t===_m.UnwrapAble||t===_m.Both)&&k(XZ,{})]})},filter:(e,t)=>!0}];function c0(){const e=document.querySelector(".toolbar"),{status:t,showContextMenu:n,hideContextMenu:i}=bL(),r=z(jD),o=z(LD);if(!e||!r||co(r))return null;const s=l0.filter((({filter:e})=>e(r,o))).map((({component:e})=>e));return oe.exports.createPortal(A("div",{className:OZ,children:[s.map(((e,t)=>k(e,{},t))),k(ke,{quiet:!0,click:function(e){if(t.show)i();else{const t={x:e.clientX,y:e.clientY};n(t)}},children:k(PL,{slot:"icon",name:"MoreHoriz"})})]}),e)}var d0="_popover_1lehv_3";var u0="_popoverMenu_ml8zv_1";var h0="_iconWrap_clnmf_1",p0="_menuItem_clnmf_5";var f0="_iconWrap_xdkpv_1",g0="_popoverMenu_xdkpv_4";class m0 extends cm{constructor(){super({id:"layerUp",kbOpts:{weight:XQ.WorkbenchContrib,primary:_F.CtrlCmd|dF.US_CLOSE_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){XL.Service.layerUp(t)}}class _0 extends cm{constructor(){super({id:"layerDown",kbOpts:{weight:XQ.WorkbenchContrib,primary:_F.CtrlCmd|dF.US_OPEN_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){XL.Service.layerDown(t)}}class v0 extends cm{constructor(){super({id:"layerToTop",kbOpts:{weight:XQ.WorkbenchContrib,primary:_F.CtrlCmd|_F.Alt|dF.US_CLOSE_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){XL.Service.layerToTop(t)}}class y0 extends cm{constructor(){super({id:"layerToBottom",kbOpts:{weight:XQ.WorkbenchContrib,primary:_F.CtrlCmd|_F.Alt|dF.US_OPEN_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){XL.Service.layerToBottom(t)}}var w0={};var b0={};var x0={};function C0(e){return k(Ce,w({className:p0},e))}function k0(e){return t=>{const n=z(jD),i=z(LD),{t:r}=WL();return i.length<=0||!n?null:k(e,w({node:n,selections:i,t:r},t))}}const E0=k0((function(e){const{t:t,selections:n}=e,i=U0(n);return A(C0,{click:function(){var t;TD.execEditorCommand("cut"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},disabled:i.length<=0,children:[A("span",{slot:"value",className:b0.iconWrap,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelX"})]}),t("w.contextmenu.cut")]})})),S0=k0((function(e){const{t:t,selections:n}=e,i=U0(n);return A(C0,{click:function(){var t;TD.execEditorCommand("copy"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},disabled:i.length<=0,children:[A("span",{slot:"value",className:w0.iconWrap,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelC"})]}),t("w.contextmenu.copy")]})})),I0=k0((function(e){const{t:t}=e,{model:n}=TD,i=function(){const[e,t]=T.exports.useState(null);return T.exports.useEffect((()=>{uX.get().then((e=>{const n=JSON.parse(e);ZT(n)?t(n):t(null)})).catch((()=>{t(null)}))}),[]),e}(),r=null==n?void 0:n.getClonedFragment();return A(C0,{click:function(){var n;lX?TD.execEditorCommand("paste"):AB({message:t("w.contextmenu.clipboardInvalid"),duration:2e3,showClose:!1}),null==(n=null==e?void 0:e.onHandler)||n.call(e)},disabled:lX&&!i&&!r,children:[A("span",{slot:"value",className:x0.iconWrap,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelV"})]}),t("w.contextmenu.paste")]})})),O0=k0((function(e){const{t:t}=WL(),n=U0(z(LD));return A(C0,{disabled:n.length<=0,click:function(){var t;TD.execEditorCommand("duplicate"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[A("span",{slot:"value",className:h0,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelD"})]}),t("w.contextmenu.duplicate")]})})),T0=k0((function(e){const{t:t,selections:n}=e,i=ze(OL);return k(C0,{disabled:n.length>1,click:function(){var t;const[r]=n;i(r),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:t("w.contextmenu.rename")})})),M0=k0((function(e){const{t:t,selections:n}=e,i=n.length<=0,{viewModel:r}=TD;return k(C0,{disabled:i,click:function(){var t;n.forEach((e=>{const t=r.getViewModelNodeById(e);t&&DP.toggleVisibility(t)})),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:t("w.contextmenu.toggleVisibility")})})),N0=k0((function(e){const{t:t,selections:n}=e,i=n.length<=0;return A(C0,{disabled:i,click:function(){var t;TD.execEditorCommand("deleteLeft"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[k(PL,{name:"Backspace",slot:"value"}),t("w.contextmenu.delete")]})})),A0=k0((function(e){const{selections:t}=e,n=t.length>=1,i=!(1===t.length&&LU.isAutoLayout(t[0]));return n||i?A(be,{children:[k(et,{}),n&&k(D0,w({},e)),i&&k(R0,w({},e))]}):null})),R0=k0((function(e){const{t:t,selections:n}=e,i=uQ(bm.wrapMode.key,[n]),r=i!==_m.UnwrapAble&&i!==_m.Both;return r?null:A(C0,{disabled:r,click:function(){var t;TD.execEditorCommand("unwrap"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[A("span",{slot:"value",className:h0,children:[k(PL,{name:"Command"}),k(PL,{name:"Shift"}),k(PL,{name:"LabelG"})]}),t("w.contextmenu.unwrap")]})})),D0=k0((function(e){const{t:t,selections:n}=e,i=uQ(bm.wrapMode.key,[n]);if(n.length<1)return null;const r=i!==_m.WrapAble&&i!==_m.Both;return A(C0,{disabled:r,click:function(){var t;TD.execEditorCommand("wrap"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[A("span",{slot:"value",className:h0,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelG"})]}),t("w.contextmenu.wrap")]})})),P0=k0((function(e){const{t:t,selections:n}=e,[i]=n;return 1===n.length?A(be,{children:[k(et,{}),k(C0,{click:function(){var n;null==(n=null==e?void 0:e.onHandler)||n.call(e);const{view:r,model:o}=TD;r.getViewport();const s=o.queryNodes((e=>o.isAncestorNodeOfId(i,e.id))).map((e=>e.id)),a=[i,...s];TD.transform((()=>{a.forEach((e=>{const t=DR(TD.getDeclaredStyle(e));Reflect.deleteProperty(t,"breakpointId"),Reflect.deleteProperty(t,"targetId"),Reflect.deleteProperty(t,"id"),o.updateAllBpStyles(e,t)}))})),AB({message:t("w.contextmenu.apply.success"),duration:2e3,showClose:!1})},children:t("w.contextmenu.apply")})]}):null})),L0=k0((function(e){const{t:t}=e,[n,i]=T.exports.useState(!1),r=XL.Service.layerStatus(TD),o=XL.isAllGridSection()?t("w.contextmenu.sectionOrder"):t("w.contextmenu.layerOrder"),{editorMode:s}=hQ();!function(e){let t=[];T.exports.useEffect((()=>(e===gm.Editing&&(t.push(hm(new m0)),t.push(hm(new _0)),t.push(hm(new v0)),t.push(hm(new y0))),()=>{t.forEach((e=>{null==e||e.dispose()})),t=[]})),[e])}(s);const{open:a}=e;function l(t){var n;TD.execEditorCommand(t),null==(n=e.onHandler)||n.call(e)}return T.exports.useEffect((()=>{a||i(!1)}),[a]),k($B,{options:{placement:"right-start"},interaction:"hover",visible:n,disabled:r.disabled,onVisibleChange:i,trigger:A(C0,{disabled:r.disabled,children:[k(PL,{slot:"value",name:"ArrowRight"}),o]}),content:A(Ze,{className:g0,children:[A(C0,{disabled:r.upDisabled,click:()=>{l($L.Up)},children:[A("span",{slot:"value",className:f0,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelClosebracket"})]}),t("w.contextmenu.layerUp")]}),A(C0,{disabled:r.toTopDisabled,click:()=>{l($L.ToTop)},children:[A("span",{slot:"value",className:f0,children:[k(PL,{name:"Command"}),k(PL,{name:"Option"}),k(PL,{name:"LabelClosebracket"})]}),t("w.contextmenu.layerToTop")]}),A(C0,{disabled:r.downDisabled,click:()=>{l($L.Down)},children:[A("span",{slot:"value",className:f0,children:[k(PL,{name:"Command"}),k(PL,{name:"LabelOpenbracket"})]}),t("w.contextmenu.layerDown")]}),A(C0,{disabled:r.toBottomDisabled,click:()=>{l($L.ToBottom)},children:[A("span",{slot:"value",className:f0,children:[k(PL,{name:"Command"}),k(PL,{name:"Option"}),k(PL,{name:"LabelOpenbracket"})]}),t("w.contextmenu.layerToBottom")]})]})})}));function U0(e){const{model:t}=TD;return e.slice().filter((e=>{const n=t.getNodeById(e);return n&&!co(n)&&!uo(n)}))}function F0(e){const{clickHandler:t,show:n,from:i}=e,r=XL.isShow();return A(Ze,{className:u0,children:[r?A(be,{children:[k(L0,{open:n,onHandler:t}),k(et,{})]}):null,k(E0,{onHandler:t}),k(S0,{onHandler:t}),k(I0,{onHandler:t}),k(O0,{onHandler:t}),k(et,{}),i===_L.layer?k(T0,{onHandler:t}):null,k(M0,{onHandler:t}),k(N0,{onHandler:t}),k(A0,{onHandler:t}),k(P0,{onHandler:t})]})}var B0="_popoverMenu_ml8zv_1";function j0(e){const{clickHandler:t,from:n}=e;return k(Ze,{className:B0,children:n===_L.layer?k(T0,{onHandler:t}):null})}function V0(){const{status:e,hideContextMenu:t}=bL(),n=z(DD),i=Boolean(n),{model:r}=TD,{show:o,x:s,y:a,from:l}=e,c={transform:`translate(${s}px,${a}px)`},d=z(LD).some((e=>{const t=r.getNodeById(e);return t&&co(t)})),u=T.exports.useRef();function h(e){var n;null==e||e.preventDefault(),(null==(n=null==u?void 0:u.current)?void 0:n.contains(null==e?void 0:e.target))||t()}return function(e,t,n=!1){T.exports.useEffect((()=>{var i,r,o;let s=null,a=!1;function l(){s&&clearTimeout(s),s=null,a=!0}function c(){s=setTimeout((()=>{t()})),a=!1}return null==(i=e.current)||i.setAttribute("tabindex","-1"),null==(r=e.current)||r.addEventListener("focus",l,!0),null==(o=e.current)||o.addEventListener("blur",c,!0),n&&window.addEventListener("blur",l,!1),s=setTimeout((()=>{var t;a||null==(t=e.current)||t.focus()}),60),()=>{var t,i,r;s&&clearTimeout(s),null==(t=e.current)||t.removeAttribute("tabindex"),null==(i=e.current)||i.removeEventListener("focus",l,!0),null==(r=e.current)||r.removeEventListener("blur",c,!0),n&&window.addEventListener("blur",l,!1)}}),[e,t])}(u,(()=>{t()})),i?k(nt,{id:"contextMenuPopover",ref:u,className:d0,open:o,style:c,contextmenu:function(e){e.preventDefault()},children:k(d?j0:F0,{show:o,from:l,clickHandler:h})}):null}function z0(e){const[t,n]=T.exports.useState(null);return T.exports.useEffect((()=>{if(!e)return void n(null);const t=(i=e,r=n,{observe(){CU.has(i)?CU.get(i).callbacks.push(r):(CU.set(i,{callbacks:[r]}),kU.observe(i))},unobserve(){const e=CU.get(i);if(e){const t=e.callbacks.indexOf(r);t>=0&&e.callbacks.splice(t,1),e.callbacks.length||(CU.delete(i),kU.unobserve(i))}}});var i,r;return t.observe(),()=>t.unobserve()}),[e]),t}let K0,W0,H0,$0=!1,q0=!1,Y0="en";const G0="object"==typeof self?self:"object"==typeof global?global:{};let X0;void 0!==G0.vscode&&void 0!==G0.vscode.process?X0=G0.vscode.process:"undefined"!=typeof process&&(X0=process);const J0="string"==typeof(null==(h=null==X0?void 0:X0.versions)?void 0:h.electron)&&"renderer"===(null==X0?void 0:X0.type);if(J0&&(null==X0||X0.sandboxed),"object"!=typeof navigator||J0)if("object"==typeof X0){X0.platform,X0.platform,$0="linux"===X0.platform,$0&&X0.env.SNAP&&X0.env.SNAP_REVISION,X0.env.CI||X0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,K0="en",Y0="en";const e=X0.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];K0=t.locale,Y0=n||"en",W0=t._translationsConfigFile}catch(_8){}}else console.error("Unable to resolve platform.");else H0=navigator.userAgent,H0.indexOf("Windows"),H0.indexOf("Macintosh"),(H0.indexOf("Macintosh")>=0||H0.indexOf("iPad")>=0||H0.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,$0=H0.indexOf("Linux")>=0,q0=!0,K0=navigator.language,Y0=K0;var Q0;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(Q0||(Q0={})),q0&&G0.importScripts;const Z0=H0,e1=Y0;var t1,n1;!function(e){e.value=function(){return e1},e.isDefaultVariant=function(){return 2===e1.length?"en"===e1:e1.length>=3&&("e"===e1[0]&&"n"===e1[1]&&"-"===e1[2])},e.isDefault=function(){return"en"===e1}}(t1||(t1={})),(()=>{if("function"==typeof G0.postMessage&&!G0.importScripts){const e=[];G0.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),G0.postMessage({vscodeScheduleAsyncWork:i},"*")}}})(),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(n1||(n1={}));const i1=!!(Z0&&Z0.indexOf("Chrome")>=0);Z0&&Z0.indexOf("Firefox"),!i1&&Z0&&Z0.indexOf("Safari"),Z0&&Z0.indexOf("Edg/"),Z0&&Z0.indexOf("Android");class r1 extends wD{constructor(){super(...arguments),C(this,"_handlerMap",new Map)}register(e,t){e.forEach((e=>{if(this._handlerMap.has(e)){this._handlerMap.get(e).push(t)}else{const n=[t];this._handlerMap.set(e,n)}}))}emit(e,t){const n=this._handlerMap.get(e);n&&n.forEach((e=>{e(t)}))}remove(e){for(const t of this._handlerMap.values()){const n=t.findIndex((t=>t===e));-1!==n&&t.splice(n,1)}}clear(){this._handlerMap.clear()}}const o1="PasteHandlerRegistry";let s1;Reflect.has(G0,o1)?s1=Reflect.get(G0,o1):(s1=new r1,Reflect.set(G0,o1,s1));const a1=s1,l1=()=>{const e=nU(lj),t=z(DD),{model:n,view:i,viewModel:r}=TD,{addNodeToViewPos:o}=gU(),s=async e=>{const{data:t,type:n}=e;let i=null;const r=t.constructor.name;"DataTransferItem"===r?i=t.getAsFile():"File"===r?i=t:"ClipboardItem"===r&&(i=await t.getType(n)),c(i)},a=async e=>{const{data:t}=e,n=t.constructor.name;if("DataTransferItem"===n)t.getAsString((e=>{d(e)}));else if("ClipboardItem"===n){const e=await t.getType("text/plain"),n=await e.text();d(n)}},l=async e=>{var s;try{const a=await function(e="",t=""){return new Promise(((n,i)=>{const r=new Image;r.crossOrigin=t,r.onload=()=>{n(r)},r.onerror=()=>{i(new Error(`Image load error: ${e}`))},r.src=e}))}(e);let{width:l,height:c}=a;const d=null==t?void 0:t.logicWidth,u=.8;if(d&&l>d*u){const e=l/c;l=Math.floor(d*u),c=Math.floor(l/e)}const h=DR(tF);Object.assign(h,{props:{src:e},renderWidth:l,renderHeight:c}),Object.assign(h.styles[0],{width:`${l}px`,height:`${c}px`,"aspect-ratio":""+l/c});const p=r.selection.slice();let f=i.getViewCanvasCenterPos();const[g]=p;if(g){const e=n.getNodeById(g);if(e&&fo(e)){const e=i.getElementRectById(g);f={x:e.left+e.width/2,y:e.top+e.height/2}}}const m=o(h,f,!0);if(!m)throw new Error("404");const _=n.cloneFragment([m.id],null!=(s=null==t?void 0:t.logicWidth)?s:null);TD.add((()=>{TD.execEditorCommand("pasteFragment",_,p,TD.editor)})),TD.commitAndMerge(),setTimeout((()=>{const{selection:e}=r;e[0]&&i.scrollNodeIntoView(e[0])}))}catch(a){console.warn("Get Image From Url Failed.",a)}},c=async t=>{if(t)try{const n=await(null==e?void 0:e.put(t));n&&l(n)}catch(n){console.warn("Handle Paste Image Failed.",n)}},d=async t=>{if(t)try{const i=[],r=JSON.parse(t);if(Gt(r)&&!r.some((e=>!ZT(e)))?i.push(...r):ZT(r)&&(i.push(r),n.setClonedFragment(r)),i.length<=0)return;const o=[];for(let t=0;t<i.length;t++){const n=await(null==e?void 0:e.uploadInlineResources(i[t]));n&&o.push(n)}if(o.length<=0)throw new Error("Fragment Parsed Error.");u(o)}catch(i){console.warn("Handle Paste Text Failed.",i)}},u=e=>{const t=e.some((e=>"root"===e.roots[0]));if(h()&&t){const t=cM(e);if(!t)return;const n=DR(t);Reflect.deleteProperty(n,"roots");const i="__designDocumentMeta",r=Reflect.get(n.meta,i,{});TD.updateModel(n,r)}else TD.transform((()=>{e.forEach((e=>{const t=r.selection.slice();h()&&"root"===e.roots[0]||TD.execEditorCommand("pasteFragment",e,t,TD.editor)}))}))},h=()=>{const{nodes:e}=n.getValue();return e.length<=3},p=["image/jpeg","image/png","image/gif","image/bmp","image/webp"],f=["text/plain"];T.exports.useEffect((()=>(a1.register(p,s),a1.register(f,a),()=>{a1.remove(s),a1.remove(a)})),[e])};function c1(){const{isInPreviewMode:e}=hQ(),t=vK();T.exports.useEffect((()=>{e?function(){var e;if(!TD.editor)return;const{animations:t,triggers:n}=null==(e=TD.model)?void 0:e.getValue();FG(t,n)}():rH()}),[t,e])}function d1({slot:e}){var t,n;const i=T.exports.useRef(null),[r,o]=P(AD),s=ze(FD),a=ze(LD),[l,c]=P(DD),d=ze(RD),u=ze(ML),{handleContextMenu:h}=bL();l1(),c1();const p=Boolean(l),f=z0(null==(t=TD.view)?void 0:t.canvasHostDomNode),g=T.exports.useContext(KL),{run:m,cancel:_}=le(((e,t)=>{const n=e.model.getValue();o(DR(n)),d(function(e){const t=DR(e).sort(((e,t)=>t.maxWidth-e.maxWidth)),n=t[0];return n&&t.unshift({id:"__baseBreakpointId__",minWidth:n.maxWidth+1,maxWidth:Number.POSITIVE_INFINITY}),t}(DR(n.breakpoints))),s(DR(t.root.value))}),{wait:100});T.exports.useEffect((()=>{const e=function(e,t,n=Object.create(null)){let i;if(n.instantiationService)i=n.instantiationService;else{const e=new MM;e.set(Wm,new TM(i_)),e.set(SM,new TM(OM)),e.set(Lo,new TM(ks)),e.set(Lp,new TM(qg,[document.body])),e.set(Lf,new TM(nm)),e.set(ng,new TM(om)),e.set(Ml,new dR),e.set(Dy,new EM),i=new gR(e)}i.createInstance(Yl,di(e),!1),i.createInstance(Pp),i.createInstance(rA,t);const r=i.createInstance(Am);return i.invokeFunction((e=>{try{e.get(NM).phase=AM.EditorCreated}catch(_8){}})),r}(ei,i.current||document.body,g);TD.registerInstance(e);const{model:t,viewModel:n,view:r}=e;return t.onUpdated(m.bind(null,e,n)),n.onReconnected(m.bind(null,e,n)),n.onDidChangeSelection((()=>{const{selection:e}=n;e.length?TD.getContextKeyValue(bm.isAnimationEditing.key,(t=>{t?(qD(1===e.length),u(e[0])):a([...e])})):TD.initSelection()})),r.onWorkspaceTreeUpdated((()=>s(DR(n.root.value)))),r.onViewportUpdated((()=>{const e=r.getViewport();c(e)})),r.onMouseDown((()=>{var e;r.boundaryDomNode.contains(document.activeElement)||(document.activeElement instanceof HTMLElement&&(null==(e=document.activeElement)||e.blur()),r.boundaryDomNode.click())})),r.onContextMenu((t=>{t.event.preventDefault(),TD.getContextKeyValue(bm.isAnimationEditing.key,(n=>{n||((e,t)=>{var n,i;const{view:r}=t,{browserEvent:o,posX:s,posY:a}=e.event,l=r.canvasHostDomNode.getBoundingClientRect(),{left:c,top:d}=l,{scale:u}=r.getViewport(),{clientX:p,clientY:f}=o;let g=p,m=f;(null==(i=null==(n=r.canvasHostDomNode)?void 0:n.contentDocument)?void 0:i.contains(o.currentTarget))&&(g=p*u+c,m=f*u+d);const _={x:s,y:a},v=!e.event.ctrlKey&&!e.event.metaKey;setTimeout((()=>{h(_,{x:g,y:m},v)}))})(t,e)}))})),m(e,n),a([...n.selection]),c(r.getViewport()),TD.resetEditorViewport(),TD.view.nextTick((()=>{var e,t;TD.initSelection(),e=TD.view.canvasHostDomNode.contentDocument,t=TD.view.canvasHostDomNode.contentWindow,BW=e,jW=t})),()=>{_(),TD.dispose()}}),[]);const v=T.exports.useMemo((()=>{var e;const t={};return(null==l?void 0:l.visualWidth)&&i.current&&(null==l?void 0:l.visualWidth)+TD.canvasResizerWidth>(null==(e=i.current)?void 0:e.clientWidth)&&(t.justifyContent="flex-start",t.alignContent="flex-start"),t}),[l,i.current]);return A("div",{className:"",children:[k(yZ,{}),k(c0,{}),A("div",{className:RR,children:[k("div",{className:MR,style:{height:`${TD.pageNameHeight}px`,left:bP((null==f?void 0:f.left)||0)},onClick:function(){TD.initSelection()},children:null==(n=r.meta)?void 0:n.title}),A("div",{className:NR,children:[k(rU,{}),k(cF,{}),k("div",{ref:i,id:"canvasContainer",className:AR,style:v}),k(gQ,{})]})]}),k(V0,{}),p?k(OF,{container:i}):null,e&&k(e,{})]})}const u1=on("i18nService");var h1={"w.page":"页面",Image:"图片",Container:"容器",Section:"模块",Symbol:"符号",Text:"文字",SVG:"图形",Video:"视频",Page:"页面",WebWidget:"物料",RichText:"富文本",LayouterVert:"布局",LayouterHoriz:"布局",AutoLayouterVert:"垂直排版",AutoLayouterHoriz:"水平排版",Button:"按钮",Title:"标题",Paragraph:"段落","w.design":"设计","w.interaction":"交互","w.animation":"动画","w.animation.presets":"动画效果","w.animation.direction":"方向","w.animation.appearance":"出场","w.animation.transition":"转场","w.animation.none":"无","w.animation.custom":"自定义","w.animation.scroll.key":"关键帧","w.animation.scroll.keyStart":"起始","w.animation.scroll.keyEnd":"结束","w.animation.scroll.scrollProgress":"进度","w.animation.scroll.elementEnterProgress":"元素进入","w.animation.scroll.elementExitProgress":"元素离开","w.animation.timing.effect":"效果","w.animation.timing.effectPreset":"效果预设","w.animation.timing.delay":"延迟","w.animation.timing.duration":"持续时长","w.animation.timing.easing":"缓动","w.animation.appearance.fadeIn":"渐显","w.animation.appearance.clipFade":"显示","w.animation.appearance.clipSlide":"划入","w.animation.appearance.grow":"轻微放大","w.animation.appearance.growBig":"放大","w.animation.appearance.shrink":"轻微缩小","w.animation.appearance.shrinkBig":"缩小","w.animation.appearance.slide":"滑动","w.animation.appearance.flip":"翻转","w.animation.appearance.spin":"旋转进入","w.animation.appearance.zoom":"弹出","w.animation.appearance.drop":"掉落","w.animation.appearance.spring":"弹簧","w.animation.appearance.scroll":"滚动","w.animation.transition.fadeIn":"渐显","w.animation.transition.fadeOut":"渐隐","w.animation.transition.grow":"增大","w.animation.transition.shrink":"收缩","w.animation.transition.slide":"滑动","w.animation.transition.slideGrow":"滑动增大","w.animation.transition.skew":"歪斜","w.animation.transition.swing":"摆动","w.animation.transition.swingGrow":"摆动增大","w.animation.transition.spin":"旋转","w.animation.transform.scale":"缩放","w.animation.transform.translate":"偏移","w.animation.transform.skew":"斜切","w.animation.transform.rotate":"旋转","w.animation.easing.EaseOutQuad":"减速-缓和","w.animation.easing.EaseInQuad":"加速-缓和","w.animation.easing.EaseOutCubic":"减速","w.animation.easing.EaseInCubic":"加速","w.animation.easing.EaseInOutCubic":"加速减速","w.animation.easing.EaseOutBack":"弹出","w.animation.easing.EaseOutElastic":"震荡","w.animation.easing.EaseOutBounce":"弹跳","w.animation.easing.Linear":"线性","w.animation.control.preview":"预览","w.animation.control.finish":"完成","w.animation.control.open":"开启","w.animation.control.close":"关闭","w.animation.control.loop":"循环","w.animation.control.mirror":"镜像","w.animation.control.3d":"3D效果","w.animation.control.animationMissed":"请先添加动画效果","w.animation.control.selectTips":"请选择任意对象，自定义动画效果","w.trigger":"触发","w.trigger.intersection":"进入视图","w.trigger.click":"点击","w.trigger.hover":"悬停","w.trigger.press":"按住","w.trigger.scroll":"页面滚动","w.trigger.mouseenter":"光标移入","w.trigger.mouseleave":"光标移出","w.trigger.mousedown":"鼠标按下","w.trigger.mouseup":"鼠标抬起","w.setting":"设置","w.background.fill":"填充","w.background.gradient":"渐变","w.background.pattern":"图案","w.background.pureColor":"纯色","w.background.angle":"角度","w.background.selectImage":"选择图片","w.background.fillStyle":"填充方式","w.background.fillStyle.cover":"充满","w.background.fillStyle.contain":"适合","w.background.fillStyle.tile":"平铺","w.background.zoom":"缩放","w.padding":"边距","w.unit.auto":"自动","w.unit.fitContent":"适应内容","w.unit.px":"像素 (px)","w.unit.percentage":"百分比 (%)","w.unit.vw":"视窗宽度 (vw)","w.unit.vh":"视窗高度 (vh)","w.display":"图层","w.display.visible":"显示","w.display.hidden":"隐藏","w.layout":"排版","w.layout.position":"位置","w.layout.positionType":"位置类型","w.layout.topOffset":"顶部偏移","w.layout.width":"宽度","w.layout.height":"高度","w.layout.overflow":"溢出","w.layout.scrollDirection":"滚动方向","w.flexibleSize":"尺寸范围","w.flexibleSize.widthRange":"宽度","w.flexibleSize.heightRange":"高度","w.position.default":"默认","w.position.fixed":"固定","w.position.sticky":"粘性","w.overflow.visible":"显示","w.overflow.hidden":"隐藏","w.overflow.scroll":"滚动","w.sizeType.flexible":"弹性","w.sizeType.static":"静态","w.autoLayout":"自动布局","w.autoLayout.direction":"方向","w.autoLayout.gap":"间距","w.appearance":"样式","w.opacity":"透明度","w.border":"描边","w.border.width":"粗细","w.border.style":"类型","w.border.style.solid":"实线","w.border.style.dashed":"虚线","w.shadow":"投影","w.shadow.offset":"偏移","w.shadow.blur":"模糊","w.shadow.spread":"延展","w.shadow.color":"颜色","w.roundedCorner":"圆角","w.roundedCorner.multiple":"多种","w.filter.blur":"图层模糊","w.backdropFilter.blur":"背景模糊","w.link.type.none":"无","w.link.type.site":"网址","w.link.type.anchor":"锚点","w.link.type.phone":"电话号码","w.link.type.email":"邮箱","w.link.href":"选择页面","w.link.target":"标签页打开","w.link.title.anchor":"选择锚点","w.link.title.phone":"电话号码","w.link.title.email":"邮箱地址","w.link.target.self":"当前标签页打开","w.link.target.blank":"新标签页打开","w.link.placeholder.site":"粘贴或输入网址","w.link.placeholder.phone":"粘贴或输入电话号码","w.link.placeholder.email":"粘贴或输入邮箱地址","w.link.anchorEmpty":"暂无锚点","w.dialog.cancel":"取消","w.dialog.confirm":"确定","w.link.listEmpty":"无链接","w.link.listEmpty.desc":"从左侧列表选择要跳转的类型","w.link":"链接","w.anchor":"锚点","w.anchor.name":"锚点名称","w.text":"文本","w.text.fontFamily":"字体","w.text.fontWeight":"字重","w.text.fontSize":"字号","w.text.textAlign":"段落对齐","w.text.lineHeight":"间距","w.text.textDecoration":"装饰","w.text.more":"更多","w.text.list":"列表","w.menu.returnHome":"返回首页","w.menu.import":"文件导入","w.layer.layers":"图层","w.component.add":"添加","w.component.basic":"基础","w.component.title":"标题","w.component.paragraph":"段落","w.component.image":"图片","w.component.resource":"资源库","w.component.layout":"布局","w.component.container":"容器","w.component.titleContent":"这是一个标题","w.component.paragraphContent":"我们都是设计师，因为我们都在刻意设计我们的生活、我们的房间和我们做事的方式。----唐纳德·A·诺曼","w.contextmenu.cut":"剪切","w.contextmenu.copy":"复制","w.contextmenu.paste":"粘贴","w.contextmenu.duplicate":"创建副本","w.contextmenu.rename":"重命名","w.contextmenu.toggleVisibility":"显示/隐藏图层","w.contextmenu.delete":"删除","w.contextmenu.unwrap":"移除容器","w.contextmenu.wrap":"放置到容器中","w.contextmenu.apply":"应用到所有断点","w.contextmenu.apply.success":"已应用到所有断点","w.contextmenu.addAnchor":"设置为锚点","w.contextmenu.sectionOrder":"模块顺序","w.contextmenu.layerOrder":"图层顺序","w.contextmenu.layerUp":"上移","w.contextmenu.layerToTop":"移动到最上方","w.contextmenu.layerDown":"下移","w.contextmenu.layerToBottom":"移动到最下方","w.contextmenu.clipboardInvalid":"请使用快捷键操作：Ctrl + V","w.nav.preview":"预览","w.nav.edit":"返回编辑","w.nav.publish":"发布","w.zoom.zoomIn":"放大","w.zoom.zoomOut":"缩小","w.zoom.100%":"缩放到100%","w.device.adjustTips":"断点必须介于320px与10000px之间","w.device.desktop":"桌面端","w.device.desktop.breakpoint":"编辑效果适合1001px及以上设备显示","w.device.desktop.desc":"从该断点开始编辑。在该断点的编辑会应用在所有断点，除非在更小断点编辑过。","w.device.phone":"移动端","w.device.phone.breakpoint":"编辑效果适合320-750px设备显示","w.device.phone.desc":"在该断点编辑会应用在478px及以下尺寸。","w.device.tablet":"Pad","w.device.tablet.breakpoint":"编辑效果适合751-1000px设备显示","w.device.tablet.desc":"在该断点编辑会应用在1000px及以下尺寸，除非在更小断点编辑过。","ext.market.publish":"发布","ext.market.re-publish":"重新发布","ext.market.enterTitle":"请输入页面标题","ext.market.publishing":"发布中...","ext.market.published":"发布","w.attribute":"自定义<{{name}}>属性","w.attribute.rule":"名称以 data- 开头只能包含字母、数字、破折号(-)、句号(.)、冒号(:)和下划线(_)任何大写字母都会被转换为小写","w.attribute.duplicate":"该名称已被占用","w.attribute.empty":"名称不能为空","w.attribute.add":"添加属性","w.attribute.key":"名称","w.attribute.value":"值","w.attribute.value.placeholder":"自定义","w.unit.fillContainer":"充满容器","ext.market.import.unsupported":"不支持的文件类型","ext.market.import.dropFile":"将 JSON/PSD/Sketch 文件拖拽到此处，或者","ext.market.import.selectFile":"选择文件...","ext.market.import.parsing":"文件解析中...","ext.market.import.import":"文件导入","ext.market.record.networkError":"网络存在异常。","ext.market.record.networkErrorDes":"网络存在异常，请确保网络恢复后再进行操作。","ext.market.record.networkErrorConfirm":"刷新","ext.market.record.networkErrorSaveTip":"网络异常，请等待网络恢复后重新尝试。","ext.market.record.autoSaveError":"自动保存发生异常，请尝试手动 ctrl/cmd + s 保存。","ext.market.record.manualSaveError":"保存失败，请稍后重试。","ext.market.record.backupTips":"该浏览器存在未保存的变更，是否恢复？","ext.market.parser.parseError":"文件解析失败，请检查设计文件是否符合规范。","w.anchor.message.exists":"锚点名称已存在","w.interaction.add":"添加事件","w.interaction.event":"全局自定义事件","w.interaction.trigger":"触发","w.interaction.eventType":"事件名称","w.interaction.value":"值","w.interaction.click":"点击","w.interaction.mouseover":"悬停","w.interaction.mouseenter":"鼠标移入","w.interaction.mouseleave":"鼠标移出","w.interaction.mouseup":"鼠标按下","w.interaction.mousedown":"鼠标抬起","w.text.currentWork":"当前作品","w.text.zh":"中文","w.text.en":"英文","w.component.autoLayout.row":"栏","w.component.autoLayout.col":"列","w.component.autoLayout.scroll":"滑块","w.component.autoLayout.page":"翻页","w.component.autoLayout.wrap":"自动换行","w.autoLayout.wrap":"换行","w.autoLayout.wrap.wrap":"是","w.autoLayout.wrap.nowrap":"否","w.autoLayout.addItem":"添加子项","w.layout.scrollSnap":"滚动吸附","w.layout.scrollSnap.none":"无","w.layout.scrollSnap.mandatory":"强制吸附","w.layout.scrollSnap.proximity":"靠近吸附","w.layout.scrollSnap.left":"开端","w.layout.scrollSnap.center":"居中","w.layout.scrollSnap.right":"末端","w.display.scroll":"__未翻译__","w.node.tagName":"HTML 标签","w.linkOrAnchor":"链接","w.linkOrAnchor.rel":"Rel 属性","w.image.alt":"Alt 属性","w.image":"图像","w.image.ossResize":"图像压缩","w.image.ossResize.maxWidth":"最大宽度","w.image.ossResize.quality":"图像质量"};var p1={"w.page":"Page",Image:"Image",Container:"Container",Section:"Section",Symbol:"Symbol",Text:"Text",SVG:"Shape",Video:"Video",Page:"Page",WebWidget:"WebWidget",RichText:"RichText",LayouterVert:"Layouter",LayouterHoriz:"Layouter",AutoLayouterVert:"AutoLayouterVert",AutoLayouterHoriz:"AutoLayouterHoriz",Button:"Button",Title:"Title",Paragraph:"Paragraph","w.design":"Design","w.animation":"Animation","w.animation.direction":"Direction","w.animation.presets":"Animation Presets","w.animation.appearance":"__未翻译__","w.animation.transition":"__未翻译__","w.animation.none":"None","w.animation.custom":"Custom","w.animation.scroll.key":"__未翻译__","w.animation.scroll.keyStart":"__未翻译__","w.animation.scroll.keyEnd":"__未翻译__","w.animation.scroll.scrollProgress":"__未翻译__","w.animation.scroll.elementEnterProgress":"__未翻译__","w.animation.scroll.elementExitProgress":"__未翻译__","w.animation.timing.effect":"Effect","w.animation.timing.effectPreset":"Effect Preset","w.animation.timing.delay":"Delay","w.animation.timing.duration":"Duration","w.animation.timing.easing":"Easing","w.animation.appearance.fadeIn":"__未翻译__","w.animation.appearance.clipFade":"__未翻译__","w.animation.appearance.clipSlide":"__未翻译__","w.animation.appearance.grow":"__未翻译__","w.animation.appearance.growBig":"__未翻译__","w.animation.appearance.shrink":"__未翻译__","w.animation.appearance.shrinkBig":"__未翻译__","w.animation.appearance.slide":"__未翻译__","w.animation.appearance.flip":"__未翻译__","w.animation.appearance.spin":"__未翻译__","w.animation.appearance.zoom":"__未翻译__","w.animation.appearance.drop":"__未翻译__","w.animation.appearance.spring":"__未翻译__","w.animation.appearance.scroll":"__未翻译__","w.animation.transition.fadeIn":"__未翻译__","w.animation.transition.fadeOut":"__未翻译__","w.animation.transition.grow":"__未翻译__","w.animation.transition.shrink":"__未翻译__","w.animation.transition.slide":"__未翻译__","w.animation.transition.slideGrow":"__未翻译__","w.animation.transition.skew":"__未翻译__","w.animation.transition.swing":"__未翻译__","w.animation.transition.swingGrow":"__未翻译__","w.animation.transition.spin":"__未翻译__","w.animation.transform.scale":"Scale","w.animation.transform.translate":"Translate","w.animation.transform.skew":"Skew","w.animation.transform.rotate":"Rotate","w.animation.easing.EaseOutQuad":"EaseOutQuad","w.animation.easing.EaseInQuad":"EaseInQuad","w.animation.easing.EaseOutCubic":"EaseOutCubic","w.animation.easing.EaseInCubic":"EaseInCubic","w.animation.easing.EaseInOutCubic":"EaseInOutCubic","w.animation.easing.EaseOutBack":"EaseOutBack","w.animation.easing.EaseOutElastic":"EaseOutElastic","w.animation.easing.EaseOutBounce":"EaseOutBounce","w.animation.easing.Linear":"EaseLinear","w.animation.control.preview":"Preview","w.animation.control.finish":"Finish","w.animation.control.open":"Open","w.animation.control.close":"Close","w.animation.control.loop":"Loop","w.animation.control.mirror":"Mirror","w.animation.control.3d":"3D Effect","w.animation.control.animationMissed":"Add animation effect first.","w.animation.control.selectTips":"Select target to add animation effect.","w.trigger":"Trigger","w.trigger.click":"On Click","w.trigger.hover":"On Hover","w.trigger.press":"On Press","w.trigger.scroll":"On Scroll","w.trigger.mouseenter":"Mouse Enter","w.trigger.mouseleave":"Mouse Leave","w.trigger.mousedown":"Mouse Down","w.trigger.mouseup":"Mouse Up","w.setting":"Setting","w.background.gradient":"Gradient","w.background.pattern":"Pattern","w.background.pureColor":"Pure Color","w.background.angle":"Angle","w.background.selectImage":"Select An Image","w.background.fillStyle":"Fill Style","w.background.fillStyle.cover":"Cover","w.background.fillStyle.contain":"Contain","w.background.fillStyle.tile":"Tile","w.background.zoom":"Zoom","w.background.fill":"Fill","w.padding":"Padding","w.unit.auto":"Auto","w.unit.fitContent":"FitContent","w.unit.px":"px","w.unit.percentage":"%","w.unit.vw":"vw","w.unit.vh":"vh","w.display":"Display","w.display.visible":"Visible","w.display.hidden":"Hidden","w.layout":"Layout","w.layout.position":"Position","w.layout.positionType":"Position Type","w.layout.topOffset":"TopOffset","w.layout.width":"Width","w.layout.height":"Height","w.layout.overflow":"Overflow","w.layout.scrollDirection":"Scroll Direction","w.flexibleSize":"Flexible Size","w.flexibleSize.widthRange":"Width Range","w.flexibleSize.heightRange":"Height Range","w.position.default":"Default","w.position.fixed":"Fixed","w.position.sticky":"Sticky","w.overflow.visible":"Visible","w.overflow.hidden":"Hidden","w.overflow.scroll":"Scroll","w.sizeType.flexible":"Flexible","w.sizeType.static":"Static","w.autoLayout":"Auto Layout","w.autoLayout.direction":"Direction","w.autoLayout.gap":"Gap","w.appearance":"Appearance","w.opacity":"Opacity","w.border":"Border","w.border.width":"Width","w.border.style":"Style","w.border.style.solid":"Solid","w.border.style.dashed":"Dashed","w.shadow":"Shadow","w.shadow.offset":"Offset","w.shadow.blur":"Blur","w.shadow.spread":"Spread","w.shadow.color":"Color","w.roundedCorner":"Rounded Corner","w.roundedCorner.multiple":"Multiple","w.filter.blur":"Blur","w.backdropFilter.blur":"Backdrop Blur","w.link.type.none":"None","w.link.type.site":"Site","w.link.type.anchor":"Anchor","w.link.type.phone":"Phone","w.link.type.email":"Email","w.link.href":"__未翻译__","w.link.target":"__未翻译__","w.link.title.anchor":"__未翻译__","w.link.title.phone":"Phone Number","w.link.title.email":"Email Address","w.link.target.self":"__未翻译__","w.link.target.blank":"__未翻译__","w.link.placeholder.site":"__未翻译__","w.link.placeholder.phone":"__未翻译__","w.link.placeholder.email":"__未翻译__","w.link.anchorEmpty":"__未翻译__","w.dialog.cancel":"Cancel","w.dialog.confirm":"Confirm","w.link.listEmpty":"__未翻译__","w.link.listEmpty.desc":"__未翻译__","w.link":"Link","w.anchor":"Anchor","w.anchor.name":"Anchor Name","w.text":"Text","w.text.fontFamily":"Font Family","w.text.fontWeight":"Font Weight","w.text.fontSize":"Font Size","w.text.textAlign":"Text Align","w.text.lineHeight":"Line Height","w.text.textDecoration":"Text Decoration","w.text.more":"More","w.text.list":"List","w.menu.returnHome":"Return Home","w.menu.import":"Import File","w.layer.layers":"Layers","w.component.add":"Add","w.component.basic":"Basic","w.component.title":"Title","w.component.paragraph":"Paragraph","w.component.image":"Image","w.component.resource":"Resource","w.component.layout":"Layout","w.component.container":"Container","w.component.titleContent":"__未翻译__","w.component.paragraphContent":"__未翻译__","w.contextmenu.cut":"Cut","w.contextmenu.copy":"Copy","w.contextmenu.paste":"Paste","w.contextmenu.duplicate":"Duplicate","w.contextmenu.rename":"Rename","w.contextmenu.toggleVisibility":"Toggle Visibility","w.contextmenu.delete":"Delete","w.contextmenu.unwrap":"Remove Container","w.contextmenu.wrap":"Place in Container","w.contextmenu.apply":"Apply to All Breakpoints","w.contextmenu.apply.success":"__未翻译__","w.contextmenu.addAnchor":"Add Anchor","w.contextmenu.sectionOrder":"Section Order","w.contextmenu.layerOrder":"Layer Order","w.contextmenu.layerUp":"Layer Up","w.contextmenu.layerToTop":"Layer To Top","w.contextmenu.layerDown":"Layer Down","w.contextmenu.layerToBottom":"Layer To Bottom","w.contextmenu.clipboardInvalid":"Try Command Ctrl + V Please.","w.nav.preview":"Preview","w.nav.edit":"Edit","w.nav.publish":"Publish","w.zoom.zoomIn":"Zoom In","w.zoom.zoomOut":"Zoom Out","w.zoom.100%":"100%","w.device.adjustTips":"__未翻译__","w.device.desktop":"__未翻译__","w.device.desktop.breakpoint":"__未翻译__","w.device.desktop.desc":"__未翻译__","w.device.phone":"__未翻译__","w.device.phone.breakpoint":"__未翻译__","w.device.phone.desc":"__未翻译__","w.device.tablet":"__未翻译__","w.device.tablet.breakpoint":"__未翻译__","w.device.tablet.desc":"__未翻译__","ext.market.publish":"Publish","ext.market.re-publish":"Republish","ext.market.enterTitle":"Enter Page Title","ext.market.publishing":"Publishing...","ext.market.published":"Publish","w.attribute":"Define <{{name}}> Attribute","w.attribute.rule":"__未翻译__","w.attribute.duplicate":"__未翻译__","w.attribute.empty":"__未翻译__","w.attribute.add":"Add Attribute","w.attribute.key":"Key","w.attribute.value":"Value","w.attribute.value.placeholder":"Custom","w.unit.fillContainer":"__未翻译__","ext.market.import.unsupported":"__未翻译__","ext.market.import.dropFile":"__未翻译__","ext.market.import.selectFile":"__未翻译__","ext.market.import.parsing":"__未翻译__","ext.market.import.import":"__未翻译__","ext.market.record.networkError":"There is a network exception.","ext.market.record.networkErrorDes":"Unprocessed changes are saved in your browser. When the network is restored, these changes are automatically saved to a cloud file.","ext.market.record.networkErrorConfirm":"Refresh","ext.market.record.networkErrorSaveTip":"When the network is restored, unsaved changes are automatically saved to the cloud file.","ext.market.record.autoSaveError":"An exception occurred with auto-save, please try to save manually ctrl/cmd + s.","ext.market.record.manualSaveError":"Save failed, please try again later.","ext.market.record.backupTips":"There are unsaved changes in this browser, do you want to restore them?","ext.market.parser.parseError":"File parsing failed, please check if the design file conforms to the specification.","w.anchor.message.exists":"__未翻译__","w.interaction":"__未翻译__","w.interaction.add":"__未翻译__","w.interaction.event":"__未翻译__","w.interaction.trigger":"__未翻译__","w.interaction.eventType":"__未翻译__","w.interaction.value":"__未翻译__","w.interaction.click":"__未翻译__","w.interaction.mouseover":"__未翻译__","w.interaction.mouseenter":"__未翻译__","w.interaction.mouseleave":"__未翻译__","w.interaction.mouseup":"__未翻译__","w.interaction.mousedown":"__未翻译__","w.text.currentWork":"__未翻译__","w.text.zh":"__未翻译__","w.text.en":"__未翻译__","w.component.autoLayout.row":"__未翻译__","w.component.autoLayout.col":"__未翻译__","w.component.autoLayout.scroll":"__未翻译__","w.component.autoLayout.page":"__未翻译__","w.component.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap.wrap":"__未翻译__","w.autoLayout.wrap.nowrap":"__未翻译__","w.autoLayout.addItem":"__未翻译__","w.layout.scrollSnap":"__未翻译__","w.layout.scrollSnap.none":"__未翻译__","w.layout.scrollSnap.left":"__未翻译__","w.layout.scrollSnap.center":"__未翻译__","w.layout.scrollSnap.right":"__未翻译__","w.layout.scrollSnap.proximity":"__未翻译__","w.layout.scrollSnap.mandatory":"__未翻译__","w.trigger.intersection":"__未翻译__","w.display.scroll":"__未翻译__","w.node.tagName":"__未翻译__","w.linkOrAnchor":"__未翻译__","w.linkOrAnchor.rel":"__未翻译__","w.image.alt":"__未翻译__","w.image":"__未翻译__","w.image.ossResize":"__未翻译__","w.image.ossResize.maxWidth":"__未翻译__","w.image.ossResize.quality":"__未翻译__"};class f1{constructor(){C(this,"_serviceBrand"),ft.init({lng:"zh",fallbackLng:"en",resources:{en:{translation:p1},zh:{translation:h1}}})}get instance(){return ft}t(e,t,n){return n?this.instance.t(e,t,n):this.instance.t(e,t)}}function g1({instantiationService:e,slot:t}){const n=function(e){const t=e?e.invokeFunction((e=>e.get(u1))):new f1;return yt(t.instance),t}(e);return T.exports.useEffect((()=>{document.body.appendChild(function(e,t){const n=document.createElement("script");return n.type=e,n.innerHTML=t,n}("systemjs-importmap",'\n        {\n          "imports": {\n            "vue": "https://st0.dancf.com/package/npm/gaoding/widget-vue/0.0.1/dist/index.system.js"\n          }\n        }\n        ')),GF&&(GF.addPlugin(KF,null),GF.addPlugin(VF,{sampleRate:1}),GF.addPlugin(jF,{sampleRate:1}),GF.install())}),[]),k(KL.Provider,{value:{instantiationService:e,i18nService:n},children:k(T.exports.StrictMode,{children:k(gt,{children:A(fe,{className:"app-theme",color:"light",scale:"medium",children:[k(mt,{}),k(_t,{backend:vt,context:window,children:k(Pn,{children:k(d1,{slot:t})})})]})})})})}const m1=G0.performance&&"function"==typeof G0.performance.now;class _1{constructor(e){C(this,"_highResolution"),C(this,"_startTime"),C(this,"_stopTime"),this._highResolution=m1&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new _1(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?G0.performance.now():Date.now()}}var v1;!function(e){function t(e){return(t,n=null,i)=>{let r=!1;const o=e((e=>{if(!r)return o?o.dispose():r=!0,t.call(n,e)}),null,i);return r&&o.dispose(),o}}function n(e){let t;const n=new C1({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}e.None=()=>wD.None,e.once=t,e.map=function(e,t){return n(((n,i=null,r)=>e((e=>n.call(i,t(e))),null,r)))},e.filter=function(e,t){return n(((n,i=null,r)=>e((e=>t(e)&&n.call(i,e)),null,r)))},e.snapshot=n,e.toPromise=function(e){return new Promise((n=>t(e)(n)))}}(v1||(v1={}));const y1=class{constructor(e){C(this,"_name"),C(this,"_stopWatch"),C(this,"_listenerCount",0),C(this,"_invocationCount",0),C(this,"_elapsedOverall",0),this._name=`${e}_${y1._idPool++}`}start(e){this._stopWatch=new _1(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let w1=y1;C(w1,"_idPool",0);class b1{constructor(e){this.value=e}static create(){var e;return new b1(null!=(e=(new Error).stack)?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class x1{constructor(e,t,n){C(this,"subscription",new bD),this.callback=e,this.callbackThis=t,this.stack=n}invoke(e){this.callback.call(this.callbackThis,e)}}class C1{constructor(e){var t;C(this,"_options"),C(this,"_leakageMon"),C(this,"_perfMon"),C(this,"_disposed",!1),C(this,"_event"),C(this,"_deliveryQueue"),C(this,"_listeners"),this._options=e,this._leakageMon=void 0,this._perfMon=(null==(t=this._options)?void 0:t._profName)?new w1(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(),null==(n=null==(t=this._options)?void 0:t.onLastListenerRemove)||n.call(t),null==(i=this._leakageMon)||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,r,o;this._listeners||(this._listeners=new pD);const s=this._listeners.isEmpty();let a,l;s&&(null==(i=this._options)?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(l=b1.create(),a=this._leakageMon.check(l,this._listeners.size+1));const c=new x1(e,t,l),d=this._listeners.push(c);s&&(null==(r=this._options)?void 0:r.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null==(o=this._options)?void 0:o.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,t);const u=c.subscription.set((()=>{if(a&&a(),!this._disposed&&(d(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}));return n instanceof yD?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new pD);for(const t of this._listeners)this._deliveryQueue.push([t,e]);for(null==(t=this._perfMon)||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{e.invoke(t)}catch(_8){pn(_8)}}null==(n=this._perfMon)||n.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}const k1=on("logService");var E1,S1;(S1=E1||(E1={}))[S1.Trace=0]="Trace",S1[S1.Debug=1]="Debug",S1[S1.Info=2]="Info",S1[S1.Warning=3]="Warning",S1[S1.Error=4]="Error",S1[S1.Critical=5]="Critical",S1[S1.Off=6]="Off";class I1 extends wD{constructor(){super(...arguments),C(this,"level",2),C(this,"_onDidChangeLogLevel",this._register(new C1)),C(this,"onDidChangeLogLevel",this._onDidChangeLogLevel.event)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}const O1=on("environmentService");var T1,M1;(M1=T1||(T1={})).dev="dev",M1.fat="fat",M1.stage="stage",M1.prod="prod";const N1=on("resourceService");var A1;!function(e){e[e.APPLICATION=1]="APPLICATION"}(A1||(A1={}));const R1={properties:{},patternProperties:{}},D1={properties:{},patternProperties:{}};class P1{constructor(){C(this,"defaultValues"),C(this,"configurationProperties"),C(this,"excludedConfigurationProperties"),this.defaultValues={},this.configurationProperties={},this.excludedConfigurationProperties={}}getConfigurationProperties(){return this.configurationProperties}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=[];e.forEach((e=>{n.push(...this.validateAndRegisterProperties(e,t)),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e,t=!0,n=1){n=Ht(e.scope)?n:e.scope;const i=[],r=e.properties;if(r)for(const s in r){if(t&&B1(s)){delete r[s];continue}const e=r[s];this.updatePropertyDefaultValue(s,e),q1.test(s)?e.scope=void 0:e.scope=Ht(e.scope)?n:e.scope,!r[s].hasOwnProperty("included")||r[s].included?(this.configurationProperties[s]=r[s],!r[s].deprecationMessage&&r[s].markdownDeprecationMessage&&(r[s].deprecationMessage=r[s].markdownDeprecationMessage),i.push(s)):(this.excludedConfigurationProperties[s]=r[s],delete r[s])}const o=e.allOf;if(o)for(const s of o)i.push(...this.validateAndRegisterProperties(s,t,n));return i}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];Wt(n)&&(n=t.default),Wt(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n}registerJSONConfiguration(e){const t=e=>{const n=e.properties;if(n)for(const t in n)this.updateSchema(t,n[t]);const i=e.allOf;i&&i.forEach(t)};t(e)}updateSchema(e,t){switch(R1.properties[e]=t,t.scope){case 1:D1.properties[e]=t}}}const L1="configurationRegistry";let U1=Reflect.get(G0,L1);U1||(U1=new P1,Reflect.set(G0,L1,U1));const F1=U1;function B1(e){return e.trim()?q1.test(e)?`Cannot register '${e}. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`:void 0!==F1.getConfigurationProperties()[e]?`Cannot register '${e}'. This property is already registered.`:null:"Cannot register an empty property"}const j1=on("configurationService");var V1;function z1(e,t,n){const i=function(e,t){let n=e;for(const i of t){if("object"!=typeof n||null===n)return;n=n[i]}return n}(e,t.split("."));return void 0===i?n:i}function K1(e,t){const n=Object.create(null);for(const i in e)W1(n,i,e[i],t);return n}function W1(e,t,n,i){const r=t.split("."),o=r.pop();let s=e;for(let a=0;a<r.length;a++){const e=r[a];let n=s[e];switch(typeof n){case"undefined":n=s[e]=Object.create(null);break;case"object":break;default:return void i(`Ignoring ${t} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(n)}`)}s=n}if("object"==typeof s&&null!==s)try{s[o]=n}catch(_8){i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}else i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}function H1(e,t){$1(e,t.split("."))}function $1(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const i=e[n];"object"!=typeof i||Array.isArray(i)||($1(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}!function(e){e[e.USER=1]="USER",e[e.WORKSPACE=2]="WORKSPACE",e[e.DEFAULT=3]="DEFAULT",e[e.MEMORY=4]="MEMORY"}(V1||(V1={}));const q1=new RegExp("\\[.*\\]$");function Y1(e){return e.substring(1,e.length-1)}class G1{constructor(e={},t=[],n=[]){C(this,"isFrozen",!1),this._contents=e,this._keys=t,this._overrides=n}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?z1(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?z1(n,e):n:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;const n={};for(const i of function(e,t){if(!t)return e.filter(((t,n)=>e.indexOf(t)===n));const n=Object.create(null);return e.filter((e=>{const i=t(e);return!n[i]&&(n[i]=!0,!0)}))}([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[i];const r=t[i];r&&("object"==typeof e&&"object"==typeof r?(e=DR(e),this.mergeContents(e,r)):e=r),n[i]=e}return new G1(n,this.keys,this.overrides)}merge(...e){const t=DR(this.contents),n=DR(this.overrides),i=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const e of r.overrides){const[t]=n.filter((t=>Qt(t.identifiers,e.identifiers)));t?this.mergeContents(t.contents,e.contents):n.push(DR(e))}for(const e of r.keys)-1===i.indexOf(e)&&i.push(e)}return new G1(t,i,n)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const n of Object.keys(t))n in e&&Yt(e[n])&&Yt(t[n])?this.mergeContents(e[n],t[n]):e[n]=DR(t[n])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?FR(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}setValue(e,t){this.addKey(e),W1(this.contents,e,t,(e=>{throw new Error(e)}))}removeValue(e){this.removeKey(e)&&H1(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)0===e.indexOf(this.keys[n])&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}class X1{constructor(e,t=new G1,n=new G1,i=!0){C(this,"_workspaceConsolidatedConfiguration",null),this._defaultConfiguration=e,this._workspaceConfiguration=t,this._memoryConfiguration=n,this._freeze=i}getValue(e){return this.getConsolidateConfigurationModel().getValue(e)}updateValue(e,t){const n=this._memoryConfiguration;void 0===t?n.removeValue(e):n.setValue(e,t)}inspect(e){return{value:this.getConsolidateConfigurationModel().getValue(e)}}get defaults(){return this._defaultConfiguration}getConsolidateConfigurationModel(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys}}}static parseConfigurationModel(e){return new G1(e.contents,e.keys,e.overrides).freeze()}}class J1 extends G1{constructor(){const e=function(){const e=Object.create(null),t=F1.getConfigurationProperties();for(const n in t)W1(e,n,t[n].default,(e=>console.error(`Conflict in default settings: ${e}`)));return e}(),t=function(){const e=F1.getConfigurationProperties();return Object.keys(e)}(),n=[];for(const i of Object.keys(e))q1.test(i)&&n.push({identifiers:[Y1(i).trim()],keys:Object.keys(e[i]),contents:K1(e[i],(e=>console.error(`Conflict in default settings file: ${e}`)))});super(e,t,n)}}class Q1{constructor(){C(this,"_past"),C(this,"_future"),C(this,"locked"),C(this,"versionId"),this._past=[],this._future=[],this.locked=!1,this.versionId=1}test_getPast(){return this._past}test_getFuture(){return this._future}push(e){this._future.length=0,this._past.push(e),this.versionId++}pop(){this._future.length=0,this._past.pop(),this.versionId++}amend(e){if(!this._past.length)throw new Error("400");this._future.length=0;const t=this.getClosestPastElement();if(!t)throw new Error("500");return t.merge(e),t}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}dispose(){this.versionId++}}class Z1{constructor(e,t){C(this,"_defaultKeybindings"),C(this,"_keybindings"),C(this,"_defaultBoundCommands"),C(this,"_map"),C(this,"_lookupMap"),this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let n=0,i=e.length;n<i;n++){const t=e[n].command;t&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Z1.combine(e,t);for(let n=0,i=this._keybindings.length;n<i;n++){const e=this._keybindings[n];0!==e.keypressParts.length&&(e.when&&e.when.type===rD.False||this._addKeyPress(e.keypressParts[0],e))}}static _isTargetedForRemoval(e,t,n,i,r){if(e.command!==i)return!1;if(t&&e.keypressParts[0]!==t)return!1;if(n&&e.keypressParts[1]!==n)return!1;if(r){if(!e.when)return!1;if(!r.equals(e.when))return!1}return!0}static combine(e,t){e=e.slice(0);const n=[];for(const i of t){if(!i.command||0===i.command.length||"-"!==i.command.charAt(0)){n.push(i);continue}const t=i.command.substr(1),r=i.keypressParts[0],o=i.keypressParts[1],s=i.when;for(let n=e.length-1;n>=0;n--)this._isTargetedForRemoval(e[n],r,o,t,s)&&e.splice(n,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(void 0===n)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let i=n.length-1;i>=0;i--){const e=n[i];if(e.command===t.command)continue;const r=e.keypressParts.length>1,o=t.keypressParts.length>1;r&&o&&e.keypressParts[1]!==t.keypressParts[1]||Z1.whenIsEntirelyIncluded(e.when,t.when)&&this._removeFromLookupMap(e)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(void 0!==t)for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return void t.splice(n,1)}static whenIsEntirelyIncluded(e,t){return!t||!!e&&this._implies(e,t)}static _implies(e,t){const n=e=>e.type===rD.Or?e.expr:[e],i=n(e.negate()).concat(n(t));for(let r=0;r<i.length;r++){const e=i[r].negate();for(let t=r+1;t<i.length;t++){const n=i[t];if(e.equals(n))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(void 0===t||0===t.length)return[];const n=[];let i=0;for(let r=t.length-1;r>=0;r--)n[i++]=t[r];return n}lookupPrimaryKeybinding(e){const t=this._lookupMap.get(e);return void 0===t||0===t.length?null:t[t.length-1]}resolve(e,t){this._log(`| Resolving ${t}`);let n=null;const i=this._map.get(t);if(void 0===i)return this._log("\\ No keybinding entries."),null;n=i;const r=this._findCommand(e,n);return r?(this._log(`\\ From ${n.length} keybinding entries, matched ${r.command}, when: ${function(e){if(!e)return"no when condition";return`${e.serialize()}`}(r.when)}, source: ${o=r,o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}.`),{leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null);var o}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(Z1.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return!t||t.evaluate(e)}_log(...e){}}class e2{constructor(e,t){C(this,"_parent"),C(this,"_value"),C(this,"_id"),this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e=w(w({},e),this._value),delete e._contextId,e}}const t2=class extends e2{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let n2=t2;C(n2,"INSTANCE",new t2);const i2=class extends e2{constructor(e){super(e,null),C(this,"_values",new tD(new dD))}getValue(e){return 0!==e.indexOf(i2._keyPrefix)?super.getValue(e):this._values.has(e)?this._values.get(e):null}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach(((t,n)=>e[n]=t)),w(w({},e),super.collectAllValues())}};let r2=i2;C(r2,"_keyPrefix","config.");class o2{constructor(e,t,n){C(this,"_service"),C(this,"_key"),C(this,"_defaultValue"),this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class s2{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class a2 extends wD{constructor(e){super(),C(this,"_isDisposed"),C(this,"_myContextId"),C(this,"_onDidChangeContext",this._register(new C1)),C(this,"onDidChangeContext",this._onDidChangeContext.event),this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new o2(this,e,t)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return Z1.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new s2(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new s2(e))}getContext(e=null){return this._isDisposed?n2.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute("data-keybinding-context")){const t=e.getAttribute("data-keybinding-context");return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}}class l2 extends wD{constructor(e,t){super(),C(this,"_serviceBrand"),C(this,"_currentSingleModifier"),C(this,"_currentSingleModifierClearTimeout"),this._contextKeyService=e,this._commandService=t,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new dn}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return this._getResolver().lookupKeybindings(e).map((e=>e.resolvedKeybinding)).filter((e=>!!e))}lookupKeybinding(e){const t=this._getResolver().lookupPrimaryKeybinding(e);if(t)return t.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getDispatchParts();if(null===i)return null;const r=this._contextKeyService.getContext(t);return this._getResolver().resolve(r,i)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1,e)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();return null!==i&&null===this._currentSingleModifier?(this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._currentSingleModifier=null}),300),!1):null!==i&&i===this._currentSingleModifier?(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0,e)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_getCommandResult(e,t,n=!1){let i=null;if(n){const[t]=e.getSingleModifierDispatchParts();i=t}else[i]=e.getDispatchParts();let r=null;if(i){const e=this._contextKeyService.getContext(t);r=this._getResolver().resolve(e,i)}return{result:r,firstPart:i}}_doDispatch(e,t,n=!1,i){const{firstPart:r,result:o}=this._getCommandResult(e,t,n);let s=!1;if(r){if(o&&o.commandId){o.bubble||(s=!0);const e=o.commandArgs||[];e.push(i),this._commandService.executeCommand(o.commandId,e).then(void 0,(e=>{console.error(e)}))}return s}s=!0}}class c2{constructor(e){C(this,"_standardKeyboardEventBrand",!0),C(this,"browserEvent"),C(this,"target"),C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),C(this,"code"),C(this,"_asKeybinding");const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return gF.fromString(t)}return d2[e.keyCode]||dF.Unknown}(t),this.code=t.code}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}equals(e){return this._asKeybinding===e}}const d2=new Array(230),u2=new Array(dF.MAX_VALUE);!function(){for(let t=0;t<u2.length;t++)u2[t]=-1;function e(e,t){d2[e]=t,u2[t]=e}e(3,dF.PauseBreak),e(8,dF.Backspace),e(9,dF.Tab),e(13,dF.Enter),e(16,dF.Shift),e(17,dF.Ctrl),e(18,dF.Alt),e(19,dF.PauseBreak),e(20,dF.CapsLock),e(27,dF.Escape),e(32,dF.Space),e(33,dF.PageUp),e(34,dF.PageDown),e(35,dF.End),e(36,dF.Home),e(37,dF.LeftArrow),e(38,dF.UpArrow),e(39,dF.RightArrow),e(40,dF.DownArrow),e(45,dF.Insert),e(46,dF.Delete),e(48,dF.KEY_0),e(49,dF.KEY_1),e(50,dF.KEY_2),e(51,dF.KEY_3),e(52,dF.KEY_4),e(53,dF.KEY_5),e(54,dF.KEY_6),e(55,dF.KEY_7),e(56,dF.KEY_8),e(57,dF.KEY_9),e(65,dF.KEY_A),e(66,dF.KEY_B),e(67,dF.KEY_C),e(68,dF.KEY_D),e(69,dF.KEY_E),e(70,dF.KEY_F),e(71,dF.KEY_G),e(72,dF.KEY_H),e(73,dF.KEY_I),e(74,dF.KEY_J),e(75,dF.KEY_K),e(76,dF.KEY_L),e(77,dF.KEY_M),e(78,dF.KEY_N),e(79,dF.KEY_O),e(80,dF.KEY_P),e(81,dF.KEY_Q),e(82,dF.KEY_R),e(83,dF.KEY_S),e(84,dF.KEY_T),e(85,dF.KEY_U),e(86,dF.KEY_V),e(87,dF.KEY_W),e(88,dF.KEY_X),e(89,dF.KEY_Y),e(90,dF.KEY_Z),e(93,dF.ContextMenu),e(96,dF.NUMPAD_0),e(97,dF.NUMPAD_1),e(98,dF.NUMPAD_2),e(99,dF.NUMPAD_3),e(100,dF.NUMPAD_4),e(101,dF.NUMPAD_5),e(102,dF.NUMPAD_6),e(103,dF.NUMPAD_7),e(104,dF.NUMPAD_8),e(105,dF.NUMPAD_9),e(106,dF.NUMPAD_MULTIPLY),e(107,dF.NUMPAD_ADD),e(108,dF.NUMPAD_SEPARATOR),e(109,dF.NUMPAD_SUBTRACT),e(110,dF.NUMPAD_DECIMAL),e(111,dF.NUMPAD_DIVIDE),e(112,dF.F1),e(113,dF.F2),e(114,dF.F3),e(115,dF.F4),e(116,dF.F5),e(117,dF.F6),e(118,dF.F7),e(119,dF.F8),e(120,dF.F9),e(121,dF.F10),e(122,dF.F11),e(123,dF.F12),e(124,dF.F13),e(125,dF.F14),e(126,dF.F15),e(127,dF.F16),e(128,dF.F17),e(129,dF.F18),e(130,dF.F19),e(144,dF.NumLock),e(145,dF.ScrollLock),e(186,dF.US_SEMICOLON),e(187,dF.US_EQUAL),e(188,dF.US_COMMA),e(189,dF.US_MINUS),e(190,dF.US_DOT),e(191,dF.US_SLASH),e(192,dF.US_BACKTICK),e(193,dF.ABNT_C1),e(194,dF.ABNT_C2),e(219,dF.US_OPEN_SQUARE_BRACKET),e(220,dF.US_BACKSLASH),e(221,dF.US_CLOSE_SQUARE_BRACKET),e(222,dF.US_QUOTE),e(223,dF.OEM_8),e(226,dF.OEM_102),e(229,dF.KEY_IN_COMPOSITION),WR?(e(59,dF.US_SEMICOLON),e(107,dF.US_EQUAL),e(109,dF.US_MINUS),zR&&e(224,dF.Meta)):HR&&(e(91,dF.Meta),e(zR?93:92,dF.Meta))}();class h2{constructor(e,t,n,i,r,o,s){C(this,"_resolvedKeybindingItemBrand"),C(this,"resolvedKeybinding"),C(this,"keypressParts"),C(this,"bubble"),C(this,"command"),C(this,"commandArgs"),C(this,"when"),C(this,"isDefault"),C(this,"extensionId"),C(this,"isBuiltinExtension"),this.resolvedKeybinding=e,this.keypressParts=e?p2(e.getDispatchParts()):[],e&&0===this.keypressParts.length&&(this.keypressParts=p2(e.getSingleModifierDispatchParts())),this.bubble=!!t&&t.charCodeAt(0)===GR.Caret,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=s}}function p2(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i)return t;t.push(i)}return t}const f2=new class{constructor(e,t,n=t){C(this,"modifierLabels"),this.modifierLabels=[null],this.modifierLabels[qR.Macintosh]=e,this.modifierLabels[qR.Windows]=t,this.modifierLabels[qR.Linux]=n}toLabel(e,t,n){if(0===t.length)return null;const i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r],s=n(o);if(null===s)return null;i[r]=g2(o,s,this.modifierLabels[e])}return i.join(" ")}}({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function g2(e,t,n){if(null===t)return"";const i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),""!==t&&i.push(t),i.join(n.separator)}class m2 extends class extends class{}{constructor(e,t){if(super(),C(this,"_os"),C(this,"_parts"),0===t.length)throw new Error("400");this._os=e,this._parts=t}getLabel(){return f2.toLabel(this._os,this._parts,(e=>this._getLabel(e)))}getParts(){return this._parts.map((e=>this._getPart(e)))}_getPart(e){return new wF(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e))}getDispatchParts(){return this._parts.map((e=>this._getDispatchPart(e)))}getSingleModifierDispatchParts(){return this._parts.map((e=>this._getSingleModifierDispatchPart(e)))}}{constructor(e,t){super(t,[e])}_keyCodeToUILabel(e){if(this._os===qR.Macintosh)switch(e){case dF.LeftArrow:return"←";case dF.UpArrow:return"↑";case dF.RightArrow:return"→";case dF.DownArrow:return"↓"}return gF.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getDispatchPart(e){return m2.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=gF.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode!==dF.Ctrl||e.shiftKey||e.altKey||e.metaKey?e.keyCode!==dF.Shift||e.ctrlKey||e.altKey||e.metaKey?e.keyCode!==dF.Alt||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==dF.Meta||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}}var _2=Object.defineProperty,v2=Object.getOwnPropertyDescriptor,y2=(e,t)=>(n,i)=>t(n,i,e);const w2=["input","textarea","select","sp-textfield"];const b2=["-","=","0"];let x2=class extends l2{constructor(e,t,n){super(t,n),C(this,"_cachedResolver"),C(this,"_dynamicKeybindings"),C(this,"shouldDispatchKeyEventClassNames",[]),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(yX(e,mX,(e=>{if((e.ctrlKey||e.metaKey)&&b2.includes(e.key)&&e.preventDefault(),!(document.activeElement instanceof HTMLElement))return;const t=this.shouldDispatchKeyEventClassNames.length>0&&this.shouldDispatchKeyEventClassNames.some((e=>!!document.activeElement.closest(`.${e}`)));if(n=document.activeElement,(w2.includes(n.tagName.toLowerCase())||n.isContentEditable||"true"===n.contentEditable)&&!t)return;var n;const i=new c2(e);this._dispatch(i,i.target)&&(i.preventDefault(),i.stopPropagation())}))),this._register(yX(e.ownerDocument.defaultView,_X,(e=>{const t=new c2(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})))}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(hZ.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Z1(e,t)}return this._cachedResolver}setShouldDispatchKeyEventClassNames(e){this.shouldDispatchKeyEventClassNames=e}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const r of e){const e=r.when||void 0,o=r.keybinding;if(o){const s=this.resolveKeybinding(o);for(const o of s)n[i++]=new h2(o,r.command,r.commandArgs,e,t,null,!1)}else n[i++]=new h2(void 0,r.command,r.commandArgs,e,t,null,!1)}return n}resolveKeybinding(e){return[new m2(e,YR)]}resolveKeyboardEvent(e){const t=new vF(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new m2(t,YR)}};x2=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?v2(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&_2(t,n,o),o})([y2(1,cD),y2(2,xD)],x2);var C2=Object.defineProperty,k2=Object.getOwnPropertyDescriptor;let E2=class{constructor(e){C(this,"_needEventCommandIds",new Set),this._instantiationService=e}executeCommand(e,...t){const n=SD.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{const e=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}};function S2(e){return wt.hash(e)}function I2(){const e=URL.createObjectURL(new Blob([]));return URL.revokeObjectURL(e),e.split("/").pop()}function O2(e="",t=""){return new Promise(((n,i)=>{const r=new Image;r.crossOrigin=t,r.onload=()=>{n(r)},r.onerror=()=>{i(new Error(`Image load error: ${e}`))},r.src=e}))}E2=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?k2(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&C2(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(0,nn)],E2);const T2=on("marketRequestService"),M2=new Map([["NETWORK_ANOMALY",0],["CONTINUE",100],["SWITCHING_PROTOCOLS",101],["EARLY_HINTS",103],["OK",200],["CREATED",201],["ACCEPTED",202],["NON_AUTHORITATIVE_INFORMATION",203],["NO_CONTENT",204],["RESET_CONTENT",205],["PARTIAL_CONTENT",206],["MULTIPLE_CHOICES",300],["MOVED_PERMANENTLY",301],["FOUND",302],["SEE_OTHER",303],["NOT_MODIFIED",304],["TEMPORARY_REDIRECT",307],["PERMANENT_REDIRECT",308],["BAD_REQUEST",400],["UNAUTHORIZED",401],["PAYMENT_REQUIRED",402],["FORBIDDEN",403],["NOT_FOUND",404],["METHOD_NOT_ALLOWED",405],["NOT_ACCEPTABLE",406],["PROXY_AUTHENTICATION_REQUIRED",407],["REQUEST_TIMEOUT",408],["CONFLICT",409],["GONE",410],["LENGTH_REQUIRED",411],["PRECONDITION_FAILED",412],["PAYLOAD_TOO_LARGE",413],["URI_TOO_LONG",414],["UNSUPPORTED_MEDIA_TYPE",415],["RANGE_NOT_SATISFIABLE",416],["EXPECTATION_FAILED",417],["IM_A_TEAPOT",418],["UNPROCESSABLE_ENTITY",422],["TOO_EARLY",425],["UPGRADE_REQUIRED",426],["PRECONDITION_REQUIRED",428],["TOO_MANY_REQUESTS",429],["REQUEST_HEADER_FIELDS_TOO_LARGE",431],["UNAVAILABLE_FOR_LEGAL_REASONS",451],["INTERNAL_SERVER_ERROR",500],["NOT_IMPLEMENTED",501],["BAD_GATEWAY",502],["SERVICE_UNAVAILABLE",503],["GATEWAY_TIMEOUT",504],["HTTP_VERSION_NOT_SUPPORTED",505],["VARIANT_ALSO_NEGOTIATES",506],["INSUFFICIENT_STORAGE",507],["LOOP_DETECTED",508],["NOT_EXTENDED",510],["NETWORK_AUTHENTICATION_REQUIRED",511]]);var N2="_toast_mhiw0_1",A2="_toastPlacementTop_mhiw0_20",R2="_toastPlacementBottom_mhiw0_24",D2="_toastSeparator_mhiw0_28",P2="_toastClose_mhiw0_35",L2="_toastCloseIcon_mhiw0_42",U2="_toastButton_mhiw0_47";const F2={default:"#202123",info:"#1544EA",success:"#049A42",warning:"#F87107",error:"#F13025"};function B2(e){const{message:t,showClose:n,placement:i,type:r,buttons:o}=e,s=N(N2,"top"===i?A2:R2),a={"--background-color":F2[r||"default"]},l=Array.isArray(o)&&o.map((e=>k("span",{className:U2,onClick:e.handler,children:e.text},e.text)));return A("div",{className:s,style:a,children:[t,l,n&&A(be,{children:[k("i",{className:D2}),k("span",{className:P2,onClick:e.close,children:k(L,{className:L2,name:"editor:Close"})})]})]})}function j2(e){const{container:t,remove:n}=function(){const e=document.querySelector("sp-theme"),t=document.createElement("div");return e.appendChild(t),{slot:e,container:t,remove:()=>{e.contains(t)&&e.removeChild(t)}}}(),i=()=>n(),r=b(w({},e),{close:i});return e.duration&&setTimeout((()=>i()),e.duration),oe.exports.render(k(B2,w({},r)),t),i}function V2(e){const t=()=>e.confirmLogin(),n={[M2.get("UNAUTHORIZED")]:t,[M2.get("FORBIDDEN")]:t};return e=>{const t=n[e.status];return!!t&&(t(),!0)}}function z2(e){return t=>{const n=K2(t),i=V2(e),r=setTimeout((()=>{i(n)||(e=>{j2({message:e.message,duration:2e3,type:"error",placement:"top",showClose:!0})})(n)}));return Object.assign(n,{cancelErrorHandle:()=>{clearTimeout(r)}})}}function K2(e){var t,n,i,r,o;const s=(null==(n=null==(t=e.response)?void 0:t.data)?void 0:n.message)||e.message;return{status:(null==(r=null==(i=e.response)?void 0:i.data)?void 0:r.status)||(null==(o=e.request)?void 0:o.status),message:s,request:e.request,response:e.response}}function W2(e){const t=V2(e),n=function(){let e="";try{const t=JSON.parse(window.localStorage.getItem("token")||"null");e=(null==t?void 0:t.token)||""}catch(n){}return()=>e?Promise.resolve(e):bt.get("/api/token").then((t=>(e=t.data.data.token,e))).catch((n=>{const i=K2(n);return t(i),e="",e}))}();return()=>n().then((e=>({authorization:e})))}function H2(e){const t=e.get(T2).authClient;return{baseURL:e.get(O1).getCustomArgv("market","MARKET_ORIGIN"),withCredentials:!1,headerHandlers:[W2(t)],errorHandler:z2(t),apis:{postOSSToken:"POST public/tokens",postLandingPage:"POST manage/landing-pages",copyLandingPage:"POST manage/landing-pages/:id",getLandingPage:"GET manage/landing-pages/:id",putLandingPage:"PUT manage/landing-pages/:id",deleteLandingPage:"DELETE /manage/landing-pages/:id",getLandingPages:"GET manage/landing-pages",getLandingPageHistories:"GET manage/landing-pages/publish-histories",getLandingPageHistory:"GET manage/landing-pages/publish-histories/:id",recoverLandingPageHistory:"POST manage/landing-pages/publish-histories/:id",createLandingTemplate:"POST manage/landing-pages/:id/to-template"}}}var $2=Object.defineProperty,q2=Object.getOwnPropertyDescriptor,Y2=(e,t)=>(n,i)=>t(n,i,e);let G2=class{constructor(e,t){C(this,"_serviceBrand"),C(this,"oss"),this.requestService=e,this.instantiationService=t;const n=this.requestService.getClient(this._getAPIConfig());this.oss=new xt({getToken:e=>n.postOSSToken({type:"oss",key:e})})}_getAPIConfig(){return this.instantiationService.invokeFunction(H2)}_uuid(){const e=URL.createObjectURL(new Blob([]));return URL.revokeObjectURL(e),e.split("/").pop()}_getFileSuffix(e){return e.type.split("/").pop().replace(/\+\w+$/,"")}_generateFileName(e){return`${this._uuid()}.${this._getFileSuffix(e)}`}_generateFileKey(e){return`iliad-editor/${this._uuid()}.${this._getFileSuffix(e)}`}_blobToFile(e){return e instanceof File?e:new File([e],this._generateFileName(e))}get(e,t="blob"){return fetch(e).then((e=>e[t]()))}async put(e,t){const n=this._blobToFile(e),i=this._generateFileKey(e);return this.oss.upload(n,i,t).then((e=>`${e.actionUrl}${e.key}`))}async uploadInlineResources(e){const t=this,n=new Map,i=JSON.stringify(e,((e,t)=>{if(t&&"string"==typeof t&&((i=t)&&i.includes("data:")&&i.includes(";base64,"))){const e=t.split(/\s|\(|\)/).filter((e=>e.startsWith("data:")&&e.includes(";base64,")));if(e.length){const i=e.map((e=>{const n={key:S2(e),value:e};return t=t.replace(n.value,n.key),n}));return n.set(t,i),t}}var i;return t})),r=[...n].map((([e,i])=>{const r=i.map((({key:e,value:n})=>{const i=function(e,t=""){const n=t?`data:${t};base64,${e}`:e,[i,r]=n.split(","),o=window.atob(r),s=i.split(":")[1].split(";")[0],a=new ArrayBuffer(o.length),l=new Uint8Array(a);for(let c=0;c<o.length;c+=1)l[c]=o.charCodeAt(c);return new Blob([a],{type:s})}(n);return t.put(i).then((t=>({key:e,value:t})))}));return Promise.all(r).then((t=>{n.set(e,t)}))}));return await Promise.all(r),JSON.parse(i,((e,t)=>{if(t&&"string"==typeof t){const e=n.get(t);e&&e.forEach((({key:e,value:n})=>{t=t.replace(e,n)}))}return t}))}};G2=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?q2(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&$2(t,n,o),o})([Y2(0,T2),Y2(1,nn)],G2);const X2=on("outputService"),J2={},Q2=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in J2)return;J2[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((e,t)=>{i.addEventListener("load",e),i.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};function Z2(e){return new Promise((t=>{requestIdleCallback((()=>{t(e())}))}))}globalThis.requestIdleCallback=globalThis.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},globalThis.cancelIdleCallback=globalThis.cancelIdleCallback||function(e){clearTimeout(e)};let e5=null;function t5(){return e5?Promise.resolve(e5):Q2((()=>import("./renderWorker.b7b7b6ce.js")),[]).then((e=>{const t=new(0,e.default);return e5=Ct(t),e5}))}function n5(e){return JSON.parse(JSON.stringify(e))}async function i5(e,t){let n=0;e.breakpoints.forEach((e=>{n=Math.max(n,e.maxWidth)}));const i=1.4*n,r=await t5(),o=await r.renderSvg(n5(e),{viewport:{width:n,height:i}}),s=await O2(o),a=await Z2((()=>function(e,t,n){const i=200,r=Math.round(i*n/t),o=document.createElement("canvas");o.width=i,o.height=r;const s=o.getContext("2d");return s.fillStyle="#fff",s.fillRect(0,0,i,r),s.drawImage(e,0,0,t,n,0,0,i,r),o}(s,n,i)));return Z2((()=>function(e,t){return new Promise((n=>e.toBlob((e=>{n(e)}),t)))}(a,t)))}let r5=0;function o5(e,t,n){return function(){const e="$memoize"+r5++;let t;const n=function(n,i,r){let o=null,s=null;if("function"==typeof r.value?(o="value",s=r.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof r.get&&(o="get",s=r.get),!s)throw new Error("not supported");const a=`${e}:${i}`;r[o]=function(...e){return t=this,this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!0,enumerable:!1,writable:!0,value:s.apply(this,e)}),this[a]}};return n.clear=()=>{void 0!==t&&Object.getOwnPropertyNames(t).forEach((n=>{0===n.indexOf(e)&&delete t[n]}))},n}()(e,t,n)}const s5=Object.freeze((function(e,t){const n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));var a5;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof l5||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:v1.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s5})}(a5||(a5={}));class l5{constructor(){C(this,"_isCancelled",!1),C(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s5:(this._emitter||(this._emitter=new C1),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class c5{constructor(e){C(this,"_token"),C(this,"_parentListener"),this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new l5),this._token}cancel(){this._token?this._token instanceof l5&&this._token.cancel():this._token=a5.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof l5&&this._token.dispose():this._token=a5.None}}var d5=Object.defineProperty,u5=Object.getOwnPropertyDescriptor,h5=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?u5(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&d5(t,n,o),o},p5=(e,t)=>(n,i)=>t(n,i,e);let f5=class{constructor(e,t,n){C(this,"_serviceBrand"),this.instantiationService=e,this.storage=t,this.resourceService=n}get editorModel(){return this.instantiationService.invokeFunction((e=>e.get(Wr)))}async exportHtmlContent(){return async function(e){return(await t5()).renderHTML(n5(e))}(await this.processModel(this.editorModel))}async processModel(e){const{fontfaces:t=[]}=e.getValue(),n=function(e){const{nodes:t,styles:n}=e.getValue(),i=new Map,r=new Map;return n.forEach((e=>{var t;const n=null!=(t=r.get(e.targetId))?t:[];r.set(e.targetId,[...n,e])})),t.filter(no).forEach((e=>{(function(e){const t=new Map;if(!$t(e))return e;const{body:n}=(new DOMParser).parseFromString(e,"text/html");return n.querySelectorAll("*").forEach((e=>{if(function(e){const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof HTMLElement||e instanceof n}(e)){e.style.fontFamily.split(",").forEach((n=>{var i;n&&t.set(n,(null!=(i=t.get(n))?i:"")+e.textContent)}))}})),t})(e.props.content).forEach(((e,t)=>{var n;i.set(t,null!=(n=i.get(t))?n:""+e)}))})),i.forEach(((e,t)=>{i.set(t,[...new Set(e.split(""))].join(""))})),i}(e),i=(new c5).token,r=t.map((async e=>{var t,r;const o=null==(t=n.get(e.family))?void 0:t.split(""),s=await this.resourceService.queryFontResource({family:e.family,chars:o},i);return b(w({},e),{src:(null==(r=s[0])?void 0:r.src)||e.src})})),o=await Promise.all(r);return b(w({},e.getValue()),{fontfaces:o})}async exportHtmlBlob(){const e=await this.exportHtmlContent();return new Blob([e],{type:"text/html"})}async exportHtmlURL(){const e=await this.exportHtmlBlob();return this.storage.put(e).catch((e=>(e.cancelErrorHandle&&e.cancelErrorHandle(),console.error(e),"")))}async exportHtmlImage(e="image/jpeg"){const t=await i5(this.editorModel.getValue(),e);return this.storage.put(t).catch((e=>(e.cancelErrorHandle&&e.cancelErrorHandle(),console.error(e),"")))}};h5([o5],f5.prototype,"editorModel",1),f5=h5([p5(0,nn),p5(1,lj),p5(2,N1)],f5),on("templateConvertService");function g5(e,t){let n=null,i=e.filter((e=>{Reflect.deleteProperty(e,"$index");const{top:i,left:r,width:o,height:s}=e;e.top=i-t.top;if([["image","svg","group"].includes(e.type),r<0?o+r-t.width>=-4:o-t.width>=-4&&r<=4,Math.abs(s-t.height)<4,Math.abs(i+s-(t.top+t.height))<4].every((e=>e))){if(n){const t=n.width*n.height;n=o*s>t?e:n}else n=e;return!1}return!0}));if(n&&"group"===n.type){n.elements.forEach((e=>{e.top+=n.top,e.left+=n.left}));const e=g5(n.elements,{width:n.width,height:n.height,top:n.top,left:n.left});n=e.backgroundElement,i=[...i,...e.normalElements]}return{backgroundElement:n,normalElements:i}}async function m5(e){const t=await P5(e);return n=t.content,`data:image/svg+xml;base64,${window.btoa(window.decodeURIComponent(window.encodeURIComponent(n)))}`;var n}function _5(e){return kt(e,{scale:.1}).then((e=>e))}async function v5(e){if(!e)return null;const t={color:"",gradient:null,image:null},n="image"===e.type?e.url:await m5(e);if(n){const i=await _5(n);i.length&&(t.color=i[0].color,i.length>1&&"image"===e.type&&(t.image=e))}return t}function y5(e){const t=e.map(((e,t)=>async function(e,t){const{rect:n,elements:i}=e,{backgroundElement:r,normalElements:o}=g5(i,n),s=await v5(r);return{$index:t,uuid:I2(),title:`layout_${t}`,backgroundEffectImage:null,background:s,backgroundRepeat:"no-repeat",backgroundMask:null,height:n.height,width:n.width,mosaic:null,border:null,className:null,top:0,backgroundColor:"",backgroundImage:"",backgroundImageInfo:null,elements:o}}(e,t)));return Promise.all(t)}async function w5(e){const t=function(e){return function(e){const t=e.slice(0).sort(((e,t)=>e.top-t.top)),n=[];return t.length?(t.reduce(((e,t)=>t.top>=e.top+e.height?(n.push(e),t):t.top+t.height>=e.top+e.height||t.height>e.height?t:e)),n):[]}(e.elements.filter((t=>{const{width:n,height:i,left:r}=t;return[r<0?n+r-e.width>=-4:n-e.width>=-4&&r<=4,i>=16].every((e=>e))})))}(e);if(!t.length)return[e];const n=function(e,t){const n=e.map((e=>({rect:{top:e.rangs[0],left:0,width:t.width,height:e.rangs[1]-e.rangs[0]},elements:[]})));let i=0;const r=t.elements.slice();for(;r.length;){const e=r.pop();e.$index=i,i+=1;let o=0,s=0;n.forEach((({rect:n},i)=>{const r=(e.top>=n.top+n.height?0:Math.max(e.top+e.height-n.top,0))*(e.left<0?Math.max(Math.min(e.left+e.width,t.width),0):Math.max(Math.min(t.width-e.left,e.width),0));r>s&&(s=r,o=i)})),n[o].elements.push(e)}return n}(function(e,t){const n=e.map(((e,t)=>({order:t,rangs:[e.top,e.top+e.height]}))),i=n[0];i.rangs[0]>0&&n.unshift({order:i.order-.1,rangs:[0,i.rangs[0]]});const r=n[n.length-1];r.rangs[1]<t.height&&n.push({order:r.order+.1,rangs:[r.rangs[1],t.height]});let o=n.shift();const s=[o];for(;n.length;){const e=n.shift();if(e.rangs[0]-o.rangs[1]>16){const t={order:e.order-.1,rangs:[o.rangs[1],e.rangs[0]]};s.push(t),s.push(e)}else s.push(e);o=e}return s}(t,e),e);return await y5(n)}const b5=[bU.value];function x5(e){const t=$(e).toRgb();return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}function C5(e,t="px"){return"string"==typeof e?e:`${e}${t}`}function k5(e,t){const n=document.createElement("canvas");return n.width=e,n.height=t,n}function E5(e){return e?e.localTransform?e:Et(e):Et(new St)}function S5(e){const t={display:"grid","box-sizing":"border-box","grid-template-rows":MP(e.rows),"grid-template-columns":MP(e.columns)};return e.position&&(t.position=e.position),e.height&&(t.height=C5(e.height)),e.width&&(t.width=C5(e.width)),t}function I5(e){const t={"align-self":"stretch","justify-self":"stretch","grid-row-start":e.rowStart.toString(),"grid-row-end":e.rowEnd.toString(),"grid-column-start":e.columnStart.toString(),"grid-column-end":e.columnEnd.toString()};return e.alignSelf&&(t["align-self"]=e.alignSelf),e.justifySelf&&(t["justify-self"]=e.justifySelf),t}function O5(e){var t;const n={},i=(null==(t=e.background)?void 0:t.color)||"";if(i){const e=x5(i);Object.assign(n,{"background-image":IR(e),"background-size":"cover","background-repeat":"repeat"})}return n}function T5(e){var t;const n={},i=null==(t=e.background)?void 0:t.gradient;if(i){const e=i.stops.map((e=>`${x5(e.color)} ${100*e.offset+"%"}`)).join(",");Object.assign(n,{"background-image":`linear-gradient(${i.angle-90}deg, ${e})`,"background-size":"cover","background-repeat":"repeat"})}return n}function M5(e){const{naturalWidth:t,naturalHeight:n,width:i,height:r}=e,o=E5(e.imageTransform),s=t*o.scale.x,a=n*o.scale.y;return{renderWidth:s,renderHeight:a,cropWidth:i,cropHeight:r,topOffset:(a-r)/2-o.position.y,leftOffset:(s-i)/2-o.position.x}}function N5(e){const t={},n=e.background.image,i=null==n?void 0:n.url;if(n&&i){const e=M5(n);Object.assign(t,{"background-image":`url(${i})`,"background-size":`${e.renderWidth}px ${e.renderHeight}px`,"background-repeat":`${n.repeat||"no-repeat"}`,"background-position":`${-e.leftOffset}px ${-e.topOffset}px`})}return t}function A5(e,t=["color","gradient","image"]){const n={"overflow-x":"hidden","overflow-y":"hidden"};if(!e)return n;const i={color:O5,gradient:T5,image:N5};return t.forEach((t=>{const r=i[t];Object.assign(n,r(e))})),n}function R5(e){const t={tagName:"IMG",componentType:qr.Image},n={tagName:"SPAN",componentType:qr.SVG},i={tagName:"DIV",componentType:qr.Text},r={tagName:"DIV",componentType:qr.Container},o=new Map([["image",t],["mask",t],["ninePatch",t],["svg",n],["rect",n],["arrow",n],["brush",n],["text",i],["effect-text",i],["threeText",i],["group",r]]).get(e.type);return o||console.log("unknown element type",e.type),o||{tagName:"DIV",componentType:qr.Container}}async function D5(e){const{url:t,naturalWidth:n,naturalHeight:i}=e,r=E5(e.imageTransform);let o=null;if("mask"in e){(await _5(e.mask)).length>1&&(o=await O2(e.mask))}if(r.scale.x-1<=.001&&r.scale.y-1<=.001&&!o)return{src:t,intrinsicWidth:n,intrinsicHeight:i};const{renderHeight:s,renderWidth:a,cropHeight:l,cropWidth:c,topOffset:d,leftOffset:u}=M5(e),h=await O2(t),p=k5(a,s);p.getContext("2d").drawImage(h,0,0,a,s);const f=k5(c,l),g=f.getContext("2d");if(g.drawImage(p,u,d,c,l,0,0,c,l),o){g.globalCompositeOperation="destination-in";const e=k5(c,l);e.getContext("2d").drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,c,l),g.drawImage(e,0,0)}return{src:f.toDataURL(),originSrc:t,intrinsicWidth:c,intrinsicHeight:l}}async function P5(e){const{content:t,url:n}=e;let i=t;if(!t&&n&&(i=await fetch(n).then((e=>e.text()))),!i)return{content:""};const r=i.match(/\{\{colors\[\d+\]\}\}/g);return r&&r.length&&r.forEach((t=>{const n=t.replace(/\{|\}/g,""),r=x5(It(e,n,"#000"));i=i.replaceAll(t,r)})),{content:i}}function L5(e){const{content:t}=e;return Promise.resolve({content:t})}function U5(e){return(new Map([["image",()=>D5(e)],["mask",()=>D5(e)],["ninePatch",()=>D5(e)],["text",()=>L5(e)],["effect-text",()=>L5(e)],["threeText",()=>L5(e)],["svg",()=>P5(e)],["arrow",()=>P5(e)],["brush",()=>P5(e)],["rect",()=>async function(e){let t=e.radius;const n=Math.round(e.width-e.strokeWidth),i=Math.round(e.height-e.strokeWidth);n<2*t&&(t=n/2),i<2*t&&(t=i/2),t=t?t+.01:0;const r=e.strokeWidth/2,o=e.strokeWidth/2,s=t,a=t,l=Math.max(e.strokeWidth+1,e.width-e.strokeWidth),c=Math.max(e.strokeWidth+1,e.height-e.strokeWidth),d={};"dashed"===e.strokeLineStyle&&(d.strokeDasharray=`${2*e.strokeWidth} ${e.strokeWidth}`),"dotted"===e.strokeLineStyle&&(d.strokeLinecap="round",d.strokeDasharray="0 "+2*e.strokeWidth);const u=Object.entries(b(w({},d),{stroke:x5(e.stroke),strokeWidth:e.strokeWidth,fill:x5(e.fill||"transparent")})).map((([e,t])=>`${e}:${t}`)).join(";");return{content:`\n    <svg\n          width="${e.width}"\n          height="${e.height}"\n          viewBox="0 0 ${e.width} ${e.height}"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n      >\n          <rect\n              x="${r}"\n              y="${o}"\n              rx="${s}"\n              ry="${a}"\n              width="${l}"\n              height="${c}"\n              style="${u}"\n          />\n      </svg>\n    `}}(e)],["group",()=>Promise.resolve({})]]).get(e.type)||(()=>Promise.resolve({})))()}function F5(e){const{fontFamily:t,contents:n}=e,i=[t];Array.isArray(n)&&n.length&&n.forEach((e=>{e.fontFamily&&i.push(e.fontFamily)}));return b5.find((e=>{const t=e.split(" ").shift().toLowerCase();return i.some((e=>e.toLowerCase().includes(t)))}))||bU.value}function B5(e){const t=b(w({},TR(x5(e.color))),{width:C5(Math.ceil(e.width)),height:C5(Math.ceil(e.height)),"font-family":F5(e),"font-size":C5(e.fontSize),"font-weight":C5(e.fontWeight,""),"letter-spacing":C5(e.letterSpacing),"line-height":C5(100*(e.lineHeight||1.2),"%"),"text-align":e.textAlign});let n=e.width,i=0;const r=()=>{if(i>100)return;i+=1;(function(e,t){const n=R5(e),i=document.createElement(n.tagName);i.innerText=e.content,i.style.cssText=Object.entries(b(w({},t),{position:"fixed",top:"0px",left:`-${t.width}`,visibility:"hidden","overflow-wrap":"break-word","font-family":F5(e)})).map((([e,t])=>`${e}:${t}`)).join(";"),document.body.appendChild(i);const r=(i.scrollHeight-e.height)/e.height;return document.body.removeChild(i),r})(e,t)>.5&&(n+=2,t.width=C5(n),r())};return r(),t}function j5(e){return["text","effect-text","threeText"].includes(e.type)}function V5(e){const t={},n=e.shadows||"";n&&(j5(e)?t["text-shadow"]=n:t["box-shadow"]=n);const i=new Map([["text",()=>B5(e)],["group",()=>S5({columns:["1fr"],rows:["1fr"],position:"static"})]]).get(e.type);return i&&Object.assign(t,i()),t}function z5(e){const{layout:t,element:n}=e,i={},r=function(e){const{element:t,layout:n}=e,i={width:t.width,height:t.height,top:t.top,left:t.left,bottom:n.height-(t.top+t.height),right:n.width-(t.left+t.width),near:{top:!1,left:!1,bottom:!1,right:!1}};return i.near.top=i.top<=i.bottom,i.near.bottom=!i.near.top,i.near.left=i.left<i.right,i.near.right=!i.near.left,i}(e);return Object.assign(i,function(e,t){const n=t.width/2,i=e.left-(n-e.width/2);return{position:"static",width:C5(e.width),height:C5(e.height),"margin-top":C5(e.top),"margin-left":C5(2*i)}}(r,{width:t.width,height:t.height})),Object.assign(i,function(e){const t={};return j5(e)||"elements"in e&&e.elements.length||(t["aspect-ratio"]=""+e.width/e.height,t.height=""),t}(n)),Object.assign(i,I5({rowStart:1,rowEnd:2,columnStart:1,columnEnd:2,justifySelf:"center",alignSelf:"start"})),Object.assign(i,function(e){const t={},n=E5(e.transform);return t.transform=n.toString(),t}(n)),Object.assign(i,V5(n)),i}const K5={enable:!1,type:"color",opacity:1,width:10,direction:[1,1,1,1],image:"",imageRepeat:"round",imageSlice:{left:0,right:0,top:0,bottom:0},color:"#000000ff",$loaded:!1},W5=["filter","filterInfo","backgroundColor","backgroundImage","backgroundImageInfo","backgroundGradient","backgroundWatermarkEnable","backgroundRepeat"],H5=Ve(Ot({uuid:null,elements:[],title:"",backgroundImage:null,backgroundEffectImage:null,backgroundColor:"#ffffffff",background:{color:"#ffffffff",watermarkEnable:!1},backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},resourceType:"image",naturalDuration:0},backgroundWatermarkEnable:!1,backgroundRepeat:"no-repeat",backgroundGradient:null,backgroundMask:{color:"#000000FF",opacity:.7},height:480,width:640,mosaic:{enable:!1,type:-1,color:"#000000ff",url:"",imageUrl:"",tileWidth:0,tileHeight:0,blur:50,paths:[]},border:null,className:null,repeatId:null,repeatGroup:null,metaInfo:null,watermarkEnable:!1,filter:{contrast:0,sharpness:0,hueRotate:0,saturate:0,brightness:0,gaussianBlur:0,temperature:0,tint:0},filterInfo:null,userAdded:!1,$loaded:!1,$dragOver:!1,$backgroundLoaded:!1,$backgroundEditing:!1,$backgroundSelected:!1},W5));const $5=e=>{var t,n,i,r;if(function(e){var t,n,i;if((null==(t=e.background)?void 0:t.image)||(null==(n=e.background)?void 0:n.gradient))return e;const r=e.backgroundImageInfo&&b(w({},e.backgroundImageInfo),{url:e.backgroundImage,width:e.width,height:e.height,left:0,top:0,naturalWidth:e.backgroundImageInfo.width,naturalHeight:e.backgroundImageInfo.height,imageTransform:e.backgroundImageInfo.transform,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},repeat:e.backgroundRepeat,opacity:It(e,"backgroundImageInfo.opacity",1),filterInfo:e.filterInfo||null,filter:e.filter||null}),o={color:(null==(i=e.background)?void 0:i.color)||e.backgroundColor};e.backgroundGradient&&(o.gradient=e.backgroundGradient),r&&(o.image=r),e.background=Ve(o);for(const s of W5)delete e[s]}(e),It(e,"background.image")){const i=e.background.image;i.width||Nt(i,"width",e.width),i.height||Nt(i,"height",e.height),void 0===i.opacity&&Nt(i,"opacity",1),!(null==(t=i.imageTransform)?void 0:t.localTransform)&&Nt(e,"background.image.imageTransform",Et(i.imageTransform)),!(null==(n=i.transform)?void 0:n.localTransform)&&Nt(e,"background.image.transform",Et(i.transform))}const o=Object.assign(Ve(H5),{border:Ve(K5)});return Object.keys(o).forEach((t=>{const n=e[t];(At(n)||Rt(n))&&(e[t]=o[t])})),Nt(e,"background.color",function(e,t=null){return e?$(e).toString("rgb"):t}(It(e,"background.color","rgba(0,0,0,0)"))),!(null==(i=e.background)?void 0:i.image)||e.background.image.url||(null==(r=e.background.image.elementRefIds)?void 0:r.length)||(e.background.image=null),e};function q5(e){if("elements"in e&&e.elements.length){if(e.elements.length>1)return void e.elements.forEach((e=>q5(e)));if("group"===e.elements[0].type){const t=e.elements[0],n=t.elements.map((e=>(e.top+=t.top,e.left+=t.left,q5(e),e)));e.elements=n}}}async function Y5(e){Mt(e,{border:Ve(K5)},$5(e)),q5(e);const{backgroundElement:t,normalElements:n}=g5(e.elements,{top:0,left:0,width:e.width,height:e.height});e.elements=n;const i=await v5(t);return i&&(e.background=Mt(e.background,i)),e}const G5=(e,t,n=3)=>{const i=String(t);return`${e}${Array(n-i.length).fill(0).join("")}${i}`};class X5{constructor(e,t){C(this,"_serviceBrand"),C(this,"_model",null),this.template=e,this.storage=t,this._initModel()}_initModel(){this._model={schemaVersion:1,meta:{},nodes:[],styles:[],links:[],breakpoints:[],triggers:[],animations:[],interactions:[]}}_createRootNode(){this._model.nodes.push({id:"root",props:{}})}_createBreakpoints(){this._model.breakpoints=Ve(MD.breakpoints)}async _convertElement(e){var t;const{layout:n,element:i,parentNode:r,order:o}=e,s=R5(i),a=await U5(i),l={id:`comp_element_${i.type}_${I2()}`,from:r.id,props:a,meta:s,order:o},c=w({id:`s_${I2()}`,targetId:l.id,breakpointId:null},z5({element:i,layout:n,componentType:l.meta.componentType}));if("group"!==i.type)this._model.nodes.push(l),this._model.styles.push(c);else{if(!(null==(t=i.elements)?void 0:t.length))return;this._model.nodes.push(l),this._model.styles.push(c);const e=i.elements.map(((e,t)=>this._convertElement({layout:i,parentNode:l,order:G5(l.order,t),element:e})));await Promise.all(e)}}async _convertLayout(e){const{layout:t,parentNode:n,order:i}=e,r={id:`comp_section_${I2()}`,props:{},from:n.id,meta:{tagName:"SECTION",componentType:qr.Section},order:i},o=w(w(w({id:`s_${I2()}`,targetId:r.id,breakpointId:null,width:"100%"},S5({columns:["1fr"],rows:["1fr"],position:"static",height:t.height})),I5({rowStart:e.index+1,rowEnd:e.index+2,columnStart:1,columnEnd:2,alignSelf:"stretch",justifySelf:"stretch"})),A5(t,["color"]));this._model.nodes.push(r),this._model.styles.push(o);const s=t.elements.map(((e,n)=>this._convertElement({layout:t,element:e,parentNode:r,order:G5(r.order,n)})));await Promise.all(s)}_convertGlobalLayout(){var e;const{template:t,_model:n}=this,i=n.nodes[0],r={id:"comp_page",props:{},meta:{tagName:"DIV",componentType:qr.Page},from:i.id,order:"0.1"},o=w(w({id:`s_${I2()}`,targetId:r.id,breakpointId:null},S5({columns:["1fr"],rows:Array.from({length:t.layouts.length}).fill("auto"),position:"static",height:"auto"})),A5(null==(e=t.global)?void 0:e.layout));Reflect.deleteProperty(o,"overflow-x"),Reflect.deleteProperty(o,"overflow-y"),this._model.nodes.push(r),this._model.styles.push(o)}async _convertLayouts(){const{template:e,_model:t}=this,n=t.nodes[1],i=e.layouts.map(((e,t)=>this._convertLayout({index:t,layout:e,parentNode:n,order:G5(n.order,t)})));await Promise.all(i)}async _uploadResources(){const{storage:e,_model:t}=this;this._model=await this.storage.uploadInlineResources(t)}async convert(){return await async function(e){var t;(null==(t=e.global)?void 0:t.layout)&&(e.global.layout=await Y5(e.global.layout));const n=e.layouts.map((e=>Y5(e)));return e.layouts=await Promise.all(n),await Tt((e=>{if(["image","mask","ninePatch"].includes(e.type)&&(e.naturalWidth||(e.naturalWidth=e.width),e.naturalHeight||(e.naturalHeight=e.height)),["text","effect-text","threeText"].includes(e.type)){const t=e;t.content||(t.content=t.contents.reduce(((e,n)=>(Object.assign(t,n),e+n.content)),""))}}),!0,e.layouts),e}(this.template).then((e=>{this.template=e})),this._createRootNode(),this._createBreakpoints(),this._convertGlobalLayout(),await this._convertLayouts(),await this._uploadResources(),this._model}}const J5=on("fileParserService");var Q5="_fileImporter_l2srk_1",Z5="_fileImporterContent_l2srk_14",e4="_fileImporterDrag_l2srk_18",t4="_fileImporterDragIn_l2srk_35",n4="_fileImporterDragError_l2srk_39",i4="_fileImporterDragLoading_l2srk_43",r4="_fileImporterDes_l2srk_48",o4="_fileImporterError_l2srk_52",s4="_fileImporterButton_l2srk_56",a4="_fileImporterLoading_l2srk_78";let l4;function c4(){return l4}function d4(e,t){e&&Dt.addListeners(e,"receive",(e=>{const n=new Dt.Transmat(e);if(n.accept()&&n.hasType("application/json")){const e=JSON.parse(n.getData("application/json"));t(e)}}))}const u4=["image/vnd.adobe.photoshop","image/x-photoshop","application/json",".psd",".sketch",".json"].join(","),h4=/\.psd|sketch|json$/;function p4(e){const{t:t}=c4(),n="market-file-parser-input",[i,r]=T.exports.useState(!1),[o,s]=T.exports.useState(!1),[a,l]=T.exports.useState(""),c=T.exports.useRef();function d(t){r(!0),l(""),e.resolve(t.target.files[0])}T.exports.useEffect((()=>{d4(c.current,(t=>{r(!0),e.resolve(t)}))}),[c]);const u=N(e4,{[t4]:o,[n4]:!!a,[i4]:i});return k("section",{className:Q5,children:k(ge,{dismissable:!0,title:t(i?"ext.market.import.parsing":"ext.market.import.import"),className:Z5,close:function(){i||e.resolve(null)},children:A("div",{tabIndex:1,className:u,onDragOver:function(e){e.preventDefault(),s(!0),l("")},onDragLeave:function(e){e.preventDefault(),s(!1),l("")},onDrop:function(n){if(n.preventDefault(),n.stopPropagation(),!i&&(s(!1),n.dataTransfer.files.length)){const[i]=n.dataTransfer.files;h4.test(i.name)?(r(!0),e.resolve(i)):function(e,t=2e3){l(e),setTimeout((()=>{l("")}),t)}(t("ext.market.import.unsupported"))}},ref:c,children:[a||i?null:A(be,{children:[k("span",{className:r4,children:t("ext.market.import.dropFile")}),A("label",{className:s4,htmlFor:n,children:[t("ext.market.import.selectFile"),k("input",{type:"file",id:n,onChange:d,accept:u4})]})]}),a?k("span",{className:o4,children:a}):null,!i||a?null:A("div",{className:a4,children:[k("div",{}),k("div",{}),k("div",{}),k("div",{})]})]})})})}const f4={parseSVG:!0,parseWidget:!0,parseMultipleLayout:!0,autoIdentifyBackgroundImage:!0,autoIdentifyBackgroundColor:!0,parseGlobalBackground:!0,ignoreMetaInfo:!1,rasterizeText:!1,groupMode:"merge",defaultTextType:"content",imageQuality:90,imageMaxWidth:5e3,imageMaxHeight:5e3,loggerOptions:{disable:!0,isDebug:!1}};function g4(){window.Buffer=Pt.Buffer,window.arguments=window.arguments||[]}async function m4(e,t){const n=await(g4(),Q2((()=>import("./psd-to-templet.es.8633bc4c.js")),["assets/psd-to-templet.es.8633bc4c.js","assets/vendor.92282841.js","assets/vendor.76f26e25.css","assets/color-alchemy.es.54d38a0b.js"]).then((e=>e.default))),i=e=>{console.log(e)};return await n(e,b(w({},f4),{groupMode:"tag",fontMetricsMap:t.fontList,onProgress:({message:e,progress:t})=>{console.log(`${t}% ${e}`)},onError:i,onFail:i}))}async function _4(e,t){const n=await(g4(),Q2((()=>import("./sketch-to-templet.es.5a038850.js")),["assets/sketch-to-templet.es.5a038850.js","assets/vendor.92282841.js","assets/vendor.76f26e25.css","assets/color-alchemy.es.54d38a0b.js"]).then((e=>e.default))),i=e=>{console.log(e)},r=e=>{const t=It(e,"style.shadows",[]),n="text"===It(e,"_class","");return Zj(t.map((e=>{const t=e.color,i=$({r:Math.floor(255*t.red),g:Math.floor(255*t.green),b:Math.floor(255*t.blue),a:t.alpha}).toRgbString();return{offsetX:`${e.offsetX}px`,offsetY:`${e.offsetY}px`,blurRadius:`${e.blurRadius}px`,spreadRadius:n?"":`${e.spread}px`,color:i}})))},o=[(e,t)=>{const n=It(t,"style.fills",[]),i=It(t,"points",[]).every((e=>!e.cornerRadius));if("mask"===e.type&&1===n.length&&i){const{image:t}=n[0],i=(e.$root.images||{})[t._ref];i&&(e.type="image",e.url=i,Reflect.deleteProperty(e,"mask"))}},(e,t)=>{const{frame:n}=t;if("svg"===e.type&&(e.width!==n.width||e.height!==n.height)){const i=document.createElement("div");i.innerHTML=e.content;const o=i.children[0],s=It(o,"attributes.viewBox.nodeValue","");if(s){const[i,a]=s.split(" ").map((e=>parseInt(e,10)));e.top-=a,e.left-=i,e.width=n.width,e.height=n.height;const l=`0 0 ${n.width} ${n.height}`;o.setAttribute("viewBox",l),e.content=o.outerHTML,e.shadows=r(t)}}},(e,t)=>{const{frame:n}=t;e.width!==n.width||e.height!==n.height||e.shadow||(e.shadows=r(t))}];return await n(e,b(w(w({},f4),t),{onProgress:({message:e,progress:t})=>{console.log(`${t}% ${e}`)},onError:i,onFail:i,onDetectFont:(e,t)=>{console.log(e,t)},afterParseElement:(e,t)=>{o.forEach((n=>n(e,t)))}}))}function v4(e){return{baseURL:"https://www.gaoding.com",withCredentials:!0,errorHandler:z2(e),apis:{getTemplate:"GET api/v2/materials/:template_id/info",getFonts:"GET api/v2/fonts"}}}function y4(e){if(!e.meta)return{};const t=Reflect.get(e.meta,"__designDocumentMeta")||{};return Reflect.deleteProperty(e.meta,"__designDocumentMeta"),t}const w4=async e=>{const t=await function(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=e=>{t(JSON.parse(e.target.result))},i.onerror=e=>{n(new Error(`JSON load error: ${e.target.error}`))},i.readAsText(e)}))}(e),n=[],i=e=>Qt(e.roots,["root"]);if(Gt(t)&&!t.some((e=>!ZT(e)))&&t.some(i)?n.push(...t):ZT(t)&&i(t)&&n.push(t),n.length<=0)return null;const r=cM(n);if(!r)return null;const o=DR(r);return Reflect.deleteProperty(o,"roots"),o};var b4=Object.defineProperty,x4=Object.getOwnPropertyDescriptor,C4=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?x4(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&b4(t,n,o),o},k4=(e,t)=>(n,i)=>t(n,i,e);let E4=class{constructor(e,t,n,i){C(this,"_serviceBrand"),C(this,"_fontList",[]),this.storage=e,this.i18n=t,this.instantiationService=n,this.requestService=i}get requestClient(){return this.requestService.getClient(v4(this.requestService.authClient))}async _initFontList(){this._fontList.length||(this._fontList=await this.requestClient.getFonts({type:"font",page_num:1,page_size:500}).then((e=>e.data)))}async convertContent(e,t=!1){const n=t?await async function(e){const t=e.layouts.map((e=>w5(e))),n=await Promise.all(t);return e.layouts=n.flat(),e}(e):e;return new X5(n,this.storage).convert()}async importFile(){var e;const t=await new Promise((e=>{const t=document.querySelector("sp-theme"),n=document.createElement("div"),i=()=>{t.contains(n)&&t.removeChild(n)},r={resolve:t=>{e({file:t,close:i})}};oe.exports.render(k(p4,w({},r)),n),t.contains(n)||t.appendChild(n)}));if(!t.file)return t.close(),null;if(t.file instanceof File){const r=t.file.name.includes(".sketch");let o=null,s=!1;if(t.file.name.includes(".json")){const e=await w4(t.file);e?o=await this.storage.uploadInlineResources(e):s=!0}else{await this._initFontList();const a=await(n=t.file,i={fontList:this._fontList},n.name.toLowerCase().endsWith(".psd")?m4(n,i):_4(n,i));if(a&&(null==(e=a.layouts)?void 0:e.length)){const e=r;o=await this.convertContent(a,e),function(e,t){e.meta||(e.meta={}),Reflect.set(e.meta,"__designDocumentMeta",t)}(o,{width:a.layouts[0].width})}else s=!0}return s&&j2({message:this.i18n.t("ext.market.parser.parseError"),placement:"top",type:"error",duration:2e3}),t.close(),o}var n,i;const r=await this.storage.uploadInlineResources(t.file);return t.close(),r}};C4([o5],E4.prototype,"requestClient",1),E4=C4([k4(0,lj),k4(1,u1),k4(2,nn),k4(3,T2)],E4);var S4=Object.defineProperty,I4=Object.getOwnPropertyDescriptor,O4=(e,t)=>(n,i)=>t(n,i,e);const T4=((e,t=2e3)=>{let n=(new Date).getTime();const i=Lt(e);return function(...e){const r=(new Date).getTime();return r-n>t&&(i.cache=new Lt.Cache,n=r),i.bind(this)(...e)}})((function(e){return e.exportHtmlImage("image/jpeg")}),3e4);let M4=class{constructor(e,t,n,i,r){this.model=e,this.page=t,this.release=n,this.output=i,this.environmentService=r}get generators(){return new Map([["name",this._getName.bind(this)],["url",this._getUrl.bind(this)],["content_model",this._getContentModel.bind(this)],["view_url",this._getViewUrl.bind(this)],["preview_url",this._getPreviewUrl.bind(this)]])}_getName(){var e;const{page:t,model:n}=this;return Promise.resolve((null==(e=n.meta)?void 0:e.title)||(null==t?void 0:t.name)||"稿定设计")}_getUrl(){const{page:e}=this,t=this.environmentService.getCustomArgv("market","GAODING_ORIGIN"),n=(null==e?void 0:e.landing_page_key)?`${t}/landing-page/${e.landing_page_key}`:"";return Promise.resolve(n)}_getContentModel(){return Promise.resolve(JSON.stringify(this.model))}_getViewUrl(){const{page:e}=this;return e?this.output.exportHtmlURL():Promise.resolve("")}_getPreviewUrl(){const{page:e}=this;return e?T4(this.output):Promise.resolve("")}async get(e=[]){const t={};if(!e.length)return t;const{generators:n}=this,i=e.map((e=>{const i=n.get(e);return i?i().then((n=>{Object.assign(t,{[e]:n})})):Promise.resolve()}));return await Promise.all(i),t}};M4=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?I4(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&S4(t,n,o),o})([O4(3,X2),O4(4,O1)],M4);var N4=Object.defineProperty,A4=Object.getOwnPropertyDescriptor,R4=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?A4(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&N4(t,n,o),o},D4=(e,t)=>(n,i)=>t(n,i,e);const P4=["name","url","view_url","preview_url","content_model"];var L4,U4;(U4=L4||(L4={}))[U4.UNRELEASED=0]="UNRELEASED",U4[U4.RELEASED=1]="RELEASED",U4[U4.MODIFIED=2]="MODIFIED";let F4=class{constructor(e,t,n,i){C(this,"resource",null),C(this,"id",null),this.output=t,this.instantiationService=n,this.requestService=i,this.id=e}get contentModel(){var e;const t=null==(e=this.resource)?void 0:e.content_model;return t?JSON.parse(t):null}get editorModel(){return this.instantiationService.invokeFunction((e=>e.get(Wr)))}get requestClient(){const e=this.instantiationService.invokeFunction(H2);return this.requestService.getClient(e)}_update(e){return this.resource=e,this.id=(null==e?void 0:e.id)||null,this.resource}async getParams(e=P4,t=!1){const{editorModel:n,resource:i}=this,r=this.instantiationService.createInstance(M4,n.getValue(),i,t);return await r.get(e)}_invoke(e,t){return this.requestClient[e](w({id:this.id},t)).then((e=>this._update(e.data)))}get(e={}){if(!this.id)throw new Error("REQUIRED ID");return this._invoke("getLandingPage",e)}post(e){if(this.id)throw new Error("RESOURCE ALREADY EXISTS");return this._invoke("postLandingPage",e)}put(e){return this._invoke("putLandingPage",e)}delete(e){return this._invoke("deleteLandingPage",e).then((()=>null))}};R4([o5],F4.prototype,"editorModel",1),R4([o5],F4.prototype,"requestClient",1),F4=R4([D4(1,X2),D4(2,nn),D4(3,T2)],F4);const B4={decodeEntities:!1,emptyAttrs:!1};var j4,V4;!function(e){e[e.Unknown=0]="Unknown",e[e.Canvas=1]="Canvas",e[e.Widgets=2]="Widgets"}(j4||(j4={})),function(e){e.None="",e.Canvas="canvas",e.CanvasOverlay="canvasOverlay",e.ComponentOverlay="componentOverlay",e.ContentWidget="contentWidget"}(V4||(V4={}));const z4={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20230308/iliad-runtime/dist/d873f25b63116883d0611f512482dea6.js"},K4={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221116/iliad-runtime/dist/641290516cf8360803a5270610cb7630.js"},W4={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221220/iliad-runtime/dist/1e9620fc950f44e136c01d9c0cb1effe.js"},H4={imports:{vue:"https://st0.dancf.com/package/npm/gaoding/widget-vue/0.0.1/dist/index.system.js"}},$4={"data-iliad":"",type:"systemjs-importmap"};var q4,Y4,G4,X4;on("model"),function(e){e[e.None=0]="None",e[e.Transform=1]="Transform",e[e.Add=2]="Add"}(q4||(q4={})),function(e){e.Image="Image",e.Container="Container",e.Section="Section",e.Symbol="Symbol",e.Text="Text",e.RichText="RichText",e.SVG="SVG",e.Video="Video",e.Page="Page",e.WebWidget="WebWidget"}(Y4||(Y4={})),Y4.Image,Y4.Container,Y4.Section,Y4.Symbol,Y4.Text,Y4.SVG,Y4.Video,Y4.Page,Y4.WebWidget,Y4.RichText,function(e){e.LayouterVert="LayouterVert",e.LayouterHoriz="LayouterHoriz",e.AutoLayouterVert="AutoLayouterVert",e.AutoLayouterHoriz="AutoLayouterHoriz"}(G4||(G4={})),function(e){e.Button="Button",e.Title="Title",e.Paragraph="Paragraph"}(X4||(X4={})),'\n  font-feature-settings: "liga" 0;\n  overflow-wrap: break-word;\n  -webkit-line-break: after-white-space;\n  color: inherit;\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-box-decoration-break: clone;\n  inline-size: 100%;\n'.replace(/\n/g,""),"\n  content: '';\n  display: inline-block;\n  padding-left: 99%;\n".replace(/\n/g,"");class J4{constructor(e,t,n){if(C(this,"_meta"),C(this,"_nodes"),C(this,"_doc"),C(this,"_head"),C(this,"_bdoy"),C(this,"injectDefaultConfig"),this._meta=e.meta,this._nodes=e.nodes||[],this._head=new Ut.Element("head",{},[]),this._bdoy=new Ut.Element("body",{},[]),this.injectDefaultConfig=n||!1,t)this._doc=t;else{const e=new Ut.Element("head",{},[]),t=new Ut.Element("body",{},[]),n=new Ut.Element("html",{},[e,t]);this._doc=new Ut.Document([n])}this._extend()}get html(){return this._doc.children[0]||[]}get head(){return this.html.children[0]||[]}get body(){return this.html.children[1]||[]}_appendTitle(){var e;const t=null==(e=this._meta)?void 0:e.title;t&&this._head.children.push(new Ut.Element("title",{},[new Ut.Text(t)]))}_appendDefaulMeta(){this.injectDefaultConfig&&(this._head.children.push(new Ut.Element("meta",{charset:"utf-8"})),this._head.children.push(new Ut.Element("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge"})),this._head.children.push(new Ut.Element("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover"})))}_appendMetaNodes(){var e,t;if(!(null==(t=null==(e=this._meta)?void 0:e.meta)?void 0:t.length))return;const n=this._meta.meta.map((e=>new Ut.Element("meta",e,[])));this._head.children.push(...n)}_appendCSPRules(){var e;if(!(null==(e=this._meta)?void 0:e.csp))return;const t=Object.entries(this._meta.csp).map((([e,t])=>`${ZR(e)} ${t.join(" ")}`)),n=new Ut.Element("meta",{"http-equiv":"Content-Security-Policy",content:t.join(";")});this._head.children.push(n)}_appendLinkNodes(){var e,t;if(!(null==(t=null==(e=this._meta)?void 0:e.links)?void 0:t.length))return;const n=this._meta.links.map((e=>new Ut.Element("link",e,[])));this._head.children.push(...n)}_appendScriptNodes(){var e,t,n;(null==(t=null==(e=this._meta)?void 0:e.scripts)?void 0:t.length)&&(null==(n=this._meta)||n.scripts.forEach((e=>{const t=e,{location:n}=t,i=x(t,["location"]),r=new Ut.Element("script",i);n&&"head"!==n?this._bdoy.children.push(r):this._head.children.push(r)})))}_appendInlineScriptsNodes(){var e,t,n;(null==(t=null==(e=this._meta)?void 0:e.inlineScripts)?void 0:t.length)&&(null==(n=this._meta)||n.inlineScripts.forEach((e=>{const t=e,{location:n,text:i}=t,r=x(t,["location","text"]),o=new Ut.Element("script",r,[new Ut.Text(i)]);n&&"head"!==n?this._bdoy.children.push(o):this._head.children.push(o)})))}_appendConditionalCommentNodes(){var e,t;(null==(t=null==(e=this._meta)?void 0:e.conditionalComment)?void 0:t.length)&&this._meta.conditionalComment.forEach((e=>{this._head.children.push(new Ut.Comment(e.content))}))}_appendWebWidgetRuntime(){const e=new Ut.Element("script",$4,[new Ut.Text(JSON.stringify(H4))]),t=new Ut.Element("script",z4);this._head.children.push(e,t)}_appendInteractionRuntime(){const e=new Ut.Element("script",K4);this._head.children.push(e)}_appendAnimationRuntime(){const e=new Ut.Element("script",W4);this._head.children.push(e)}_extend(){this._appendDefaulMeta(),this._appendTitle(),this._appendMetaNodes(),this._appendCSPRules(),this._appendLinkNodes(),this._appendWebWidgetRuntime(),this._appendInteractionRuntime(),this._appendAnimationRuntime(),this._appendScriptNodes(),this._appendInlineScriptsNodes(),this._appendConditionalCommentNodes()}transform(){return this.head.children=[...this._head.children,...this.head.children],this.body.children=[...this.body.children,...this._bdoy.children],this._doc}}function Q4(e){const t=new Ut.Document(e);return Ft(t,B4)}function Z4(e,t){T.exports.useEffect((()=>{let n=null,i=!1;function r(){clearTimeout(n),n=null,i=!0}function o(){n=setTimeout((()=>{t()})),i=!1}return e.current.setAttribute("tabindex","-1"),e.current.addEventListener("focus",r,!0),e.current.addEventListener("blur",o,!0),n=setTimeout((()=>{i||e.current.focus()}),60),()=>{clearTimeout(n),e.current.removeAttribute("tabindex"),e.current.removeEventListener("focus",r,!0),e.current.removeEventListener("blur",o,!0)}}),[e,t])}var e3="_maskLayer_1j7gd_1",t3="_darkShade_1j7gd_10",n3="_releasePanel_1j7gd_14",i3="_releasePanelTitleInput_1j7gd_26",r3="_advanced_1j7gd_33",o3="_advancedHeader_1j7gd_38",s3="_advancedIcon_1j7gd_47",a3="_advancedIconRotated_1j7gd_51",l3="_advancedContent_1j7gd_55",c3="_advancedItem_1j7gd_62",d3="_releasePanelButton_1j7gd_86",u3="_resultContainer_1j7gd_91",h3="_resultPanel_1j7gd_97",p3="_resultPanelHead_1j7gd_109",f3="_resultPanelTitle_1j7gd_118",g3="_resultPanelReleaseAt_1j7gd_125",m3="_resultPanelClose_1j7gd_130",_3="_resultPanelContent_1j7gd_141",v3="_resultPanelURL_1j7gd_147",y3="_resultPanelQRcode_1j7gd_161",w3="_resultPanelQRcodeContent_1j7gd_167",b3="_progressContainer_1j7gd_173",x3="_progressBar_1j7gd_186";function C3(e){const t=N(e3,{[t3]:e.dark},e.className);return k("section",{className:t,children:e.children})}function k3(){const e=document.querySelector("sp-theme"),t=document.createElement("div");return e.appendChild(t),{slot:e,container:t,remove:()=>{e.contains(t)&&e.removeChild(t)}}}function E3(e){const{meta:t,editorModel:n}=e;return new Promise((e=>{n.changeWithoutHistory((n=>{const i=n.getValue().meta||{};n.updateMeta(w(w({},i),t)),e()}))}))}function S3(e){const[t,n]=T.exports.useState(!1),[i,r]=T.exports.useState(""),[o,s]=T.exports.useState(""),a=N(s3,t?a3:null),l=e.editorModel.getValue().meta;function c(e,t=!1){const n=document.createElement("div").attachShadow({mode:"open"});n.innerHTML=e;const i={meta:[...n.querySelectorAll("meta")],links:[...n.querySelectorAll("link")],scripts:[...n.querySelectorAll("script")]},r={};Object.entries(i).forEach((([e,n])=>{r[e]=n.map((e=>(e=>{const n=[...e.attributes].reduce(((e,t)=>Object.assign(e,{[t.nodeName]:t.nodeValue})),{});return"SCRIPT"===e.tagName.toUpperCase()&&(n.src||(n.text=e.innerHTML),t&&(n.location="body")),n})(e)))}));const o=[],s=[];return r.scripts.forEach((e=>{e.text?s.push(e):o.push(e)})),{scripts:o,inlineScripts:s,meta:r.meta,links:r.links}}function d(e){return e.filter(((t,n)=>e.findIndex((e=>PR(t,e)))===n))}function u(){const t=c(i),n=c(o,!0);E3({meta:{meta:d(t.meta.concat(n.meta)),links:d(t.links.concat(n.links)),scripts:d(t.scripts.concat(n.scripts)),inlineScripts:d(t.inlineScripts.concat(n.inlineScripts))},editorModel:e.editorModel})}return T.exports.useEffect((()=>{const e=Ve(l);Reflect.deleteProperty(e,"title");const{head:t,body:n}=function(e){const t=new J4({meta:e},null);t.transform();const n=Q4((r=t.head.children,r.filter((e=>{const{tagName:t,attribs:n,children:i}=e;if("script"===t){const{type:e,src:t}=n;if(1===i.length&&e===vN.type){const[e]=i;return!("text"===(null==e?void 0:e.type)&&e.data===JSON.stringify(_N))}if(t)return![fN,gN,mN].map((e=>e.src)).includes(t)}return!0})))),i=Q4(t.body.children);var r;return{head:n,body:i}}(e);r(t),s(n)}),[l]),A("div",{className:r3,children:[A("div",{className:o3,onClick:function(){n(!t)},children:[k(L,{className:a,name:"editor:ArrowRight",color:"#2254f4"}),k("span",{children:"高级选项"})]}),t?A("div",{className:l3,children:[A("div",{className:c3,children:[k("span",{children:"head 注入配置"}),k("textarea",{value:i,onChange:function(e){const t=e.target.value;r(t)},onBlur:u,placeholder:"<head>注入配置...</head>"})]}),A("div",{className:c3,children:[k("span",{children:"body 注入配置"}),k("textarea",{value:o,onChange:function(e){const t=e.target.value;s(t)},onBlur:u,placeholder:"<bdoy>注入配置...</bdoy>"})]})]}):null]})}function I3(e){var t;const{editorModel:n,pageModel:i}=e,r=(null==(t=n.getValue().meta)?void 0:t.title)||(null==i?void 0:i.name)||"",[o,s]=T.exports.useState(!1),[a,l]=T.exports.useState(r),c=T.exports.useRef(),{t:d}=c4();function u(){o||e.cancel()}const h=(null==i?void 0:i.status)===L4.UNRELEASED?"ext.market.publish":"ext.market.re-publish";return Z4(c,u),k(C3,{children:A(ge,{dismissable:!0,divider:!0,title:d(h),className:n3,close:u,ref:c,children:[k(H,{className:i3,placeholder:d("ext.market.enterTitle"),value:a,maxlength:32,change:function(e){const t=e.target;l(t.value)},disabled:o}),k(S3,{editorModel:n}),k(ae,{variant:"cta",size:"l",className:d3,click:async function(){s(!0),await E3({meta:{title:a},editorModel:e.editorModel}),e.confirm((()=>{s(!1)}))},disabled:o,children:d(o?"ext.market.publishing":"ext.market.published")})]})})}function O3(e){const{pageModel:t}=e,n=`发布于 ${new Date(t.updated_at).toLocaleString()}`,i=t.url,r=T.exports.useRef();return Z4(r,e.close),k(C3,{dark:!0,className:u3,children:A("div",{className:h3,ref:r,children:[A("div",{className:p3,children:[k("h2",{className:f3,children:"页面发布成功"}),k("span",{className:g3,children:n}),k("span",{className:m3,onClick:e.close,children:k(L,{name:"editor:Close"})})]}),A("div",{className:_3,children:[A("p",{className:v3,children:[k("span",{children:"访问地址："}),k("a",{href:i,target:"_blank",children:i})]}),A("div",{className:y3,children:[k("div",{className:w3,children:k(Bt,{value:i,size:80})}),k("span",{children:"手机扫码查看作品"})]})]})]})})}function T3(e){const t={width:`${e.progress}%`};return k("div",{className:b3,children:k("div",{className:x3,style:t})})}q.t("ext.market.publish"),q.t("ext.market.re-publish");const M3=new class{constructor(e){C(this,"mock",0),C(this,"progress",0),C(this,"slotContainer",null),C(this,"mockTimer",null),this.mock=e.mock}start(){this.slotContainer=k3(),this.update(0),this.mock&&this._runMock()}_runMock(){const e=()=>{const{progress:t,mock:n}=this;if(t<n){const{min:i,floor:r,random:o}=Math,s=i(t+r(20*o()),n);this.update(s),this.mockTimer=setTimeout((()=>e()),200)}else clearTimeout(this.mockTimer)};e()}update(e){this.progress=e;const t={progress:e};oe.exports.render(k(T3,w({},t)),this.slotContainer.container)}end(){this.update(100),setTimeout((()=>{this.slotContainer.remove()}),60)}}({mock:90});var N3="_networkError_eae30_1",A3="_networkErrorContainer_eae30_12",R3="_networkErrorHead_eae30_18",D3="_networkErrorContent_eae30_27",P3="_networkErrorButton_eae30_37";function L3(e){const t=T.exports.useRef(),{t:n}=c4();return k(C3,{className:A3,dark:!0,children:A("section",{className:N3,ref:t,children:[k("h2",{className:R3,children:n("ext.market.record.networkError")}),k("p",{className:D3,children:n("ext.market.record.networkErrorDes")}),k(ae,{className:P3,variant:"primary",size:"l",click:function(){window.location.reload(),e.resolve()},children:n("ext.market.record.networkErrorConfirm")})]})})}let U3=!1;var F3=Object.defineProperty,B3=Object.getOwnPropertyDescriptor,j3=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?B3(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&F3(t,n,o),o},V3=(e,t)=>(n,i)=>t(n,i,e);let z3=class{constructor(e,t,n,i,r,o,s,a){C(this,"_serviceBrand"),C(this,"_initComplete",!1),C(this,"_updateCount",0),C(this,"_savePromise",null),C(this,"_saveOperation","auto"),C(this,"_closeToast",null),C(this,"_closeNetworkError",null),C(this,"_onUpdated",new C1),C(this,"query",{}),C(this,"page",null),C(this,"_autoSave",jt((function(){this._saveOperation="auto",window.navigator.onLine&&this.save({release:!1})}),4e3)),this.fileParserService=e,this.lifecycleservice=t,this.instantiationService=n,this.contextKeyService=i,this.commandService=r,this.storage=o,this.i18n=s,this.requestService=a}get model(){return this.instantiationService.invokeFunction((e=>e.get(Wr)))}get requestClient(){return this.requestService.getClient(v4(this.requestService.authClient))}get _editingMode(){return this.contextKeyService.getContextKeyValue(bm.editingMode.key)}get _localBackupKey(){var e;const t=(null==(e=this.page.resource)?void 0:e.id)||"",n=new URL(window.location.origin);return t&&n.searchParams.append("id",`${t}`),n.toString()}get onUpdated(){return this._onUpdated.event}_updateQuery(e,t=[]){const n=[...new URLSearchParams(window.location.search)].reduce(((e,[t,n])=>(e[t]=n,e)),{});if(this.query=w(w({},n),e),e){const e=new URLSearchParams;Object.entries(this.query).forEach((([n,i])=>{t.includes(n)||e.append(n,i.toString())})),window.history.pushState(null,window.document.title,`?${e.toString()}`)}return this.query}_updateModel(e,t){return this.lifecycleservice.when(En.EditorCreated).then((()=>{const n=this.instantiationService.invokeFunction((e=>e.get(Ol)));var i;i=e,Wt(Reflect.get(i,"triggers"))&&Reflect.set(i,"triggers",[]),Wt(Reflect.get(i,"animations"))&&Reflect.set(i,"animations",[]),n.replaceModel(e);const r=e.nodes.find((e=>co(e)));if(r){n.viewModel.setSelectionById(r.id),this.commandService.executeCommand("resetViewport");const e=(null==t?void 0:t.width)||0;e?this.commandService.executeCommand("resizeCanvasWidth",e):this.commandService.executeCommand("fitCanvas")}}))}_initPage(){this.page=this.instantiationService.createInstance(F4,this.query.id||0)}_initTransmatEvent(){return this.lifecycleservice.when(En.EditorCreated).then((()=>{d4(this.instantiationService.invokeFunction((e=>e.get(Ol))).view.canvasHostDomNode.contentDocument.body,(e=>{this.storage.uploadInlineResources(e).then((e=>{this._updateModel(e,y4(e))}))}))}))}_initUnloadMonitor(){window.addEventListener("beforeunload",(e=>{this._updateCount>0&&(e.preventDefault(),e.returnValue="")}))}_showNetworkError(){const e=this.i18n.t("ext.market.record.networkErrorSaveTip");return this._closeNetworkError=function(){if(U3)return;const{container:e,remove:t}=k3(),n=()=>{U3=!1,t()};return oe.exports.render(k(L3,{resolve:n}),e),U3=!0,n}(),this._onUpdated.fire({status:PQ.MODIFIED,message:e,type:"warning"}),e}_showSaveError(){const e="auto"===this._saveOperation,t=e?this.i18n.t("ext.market.record.autoSaveError"):this.i18n.t("ext.market.record.manualSaveError");return this._closeToast&&this._closeToast(),this._closeToast=j2({message:t,showClose:e,duration:e?0:2e3}),this._onUpdated.fire({status:PQ.MODIFIED,message:t,type:"error"}),t}_initNetworkCheck(){window.addEventListener("offline",(()=>{this._showNetworkError()})),window.addEventListener("online",(()=>{this._closeNetworkError&&this._closeNetworkError(),this.save({release:!1})}))}async _loadPage(){if(M3.start(),this.page.id)return await this.page.get(),await this._updateModel(this.page.contentModel||MD),M3.end(),this.page.contentModel?void 0:this.import();if(this.query.gaoding_template_id){const e=await this.requestClient.getTemplate({template_id:this.query.gaoding_template_id}).then((e=>e.data)),t=JSON.parse(e.content),n=await this.fileParserService.convertContent(t,!1);return await this._updateModel(n),void M3.end()}return M3.end(),this.import()}async _create(e){await this.page.post(b(w({},e),{business_id:1})),this._updateQuery({id:this.page.id},["gaoding_template_id"])}async _update(e){await this.page.put(e)}async _save(e){const t=this._updateCount;if(!this.page.resource){const t=await this.page.getParams(P4,e.release);await this._create(t)}const n=await this.page.getParams(P4,e.release);await this._update(n),this._updateCount=this._updateCount-t;const i=this._updateCount>0?PQ.MODIFIED:PQ.SAVED,r=window.navigator.onLine?"":this.i18n.t("ext.market.record.networkErrorSaveTip");this._onUpdated.fire({status:i,message:r,type:r?"warning":"info"})}_handlerError(e){return e.cancelErrorHandle&&e.cancelErrorHandle(),(null==e?void 0:e.status)===M2.get("NETWORK_ANOMALY")?this._showNetworkError():this._showSaveError()}async save(e){return this._savePromise&&await this._savePromise,this._savePromise=this._save(e).catch((e=>{console.error(e);const t=this._handlerError(e);throw new Error(t)})).finally((()=>{this._savePromise=null})),this._savePromise}manualSave(e){if(this._saveOperation="manual",window.navigator.onLine)return this.save(e);throw new Error(this.i18n.t("ext.market.record.networkErrorSaveTip"))}async _release(){await this.manualSave({release:!0});const e=await await this.page.getParams(["url"],!0);return this._update(b(w({},e),{status:L4.RELEASED}))}async release(){if(!window.navigator.onLine)return void this._showNetworkError();const e=await(t={editorModel:this.model,pageModel:this.page.resource},new Promise((e=>{const{container:n,remove:i}=k3(),r=w({cancel:()=>{i(),e(null)},confirm:t=>{e({close:()=>{t(),i()}})}},t);oe.exports.render(k(I3,w({},r)),n)})));var t;e&&(this.instantiationService.invokeFunction((e=>{e.get(Ol).saveSEOHintOfWidgets()})),await this._release().then((()=>{e.close(),function(e){const{container:t,remove:n}=k3(),i=w({close:n},e);oe.exports.render(k(O3,w({},i)),t)}({pageModel:this.page.resource})})).catch((()=>{e.close()})))}async preview(){await this.manualSave({release:!1})}async init(){this._initComplete||(this._updateQuery(),this._initPage(),this._initUnloadMonitor(),this._initNetworkCheck(),await this._loadPage(),this.model.onUpdated((()=>{this._onUpdated.fire({status:PQ.MODIFIED}),this._updateCount+=1,this._autoSave()})),this._initComplete=!0)}async import(){const e=await this.fileParserService.importFile();e&&await this._updateModel(e,y4(e))}};j3([o5],z3.prototype,"model",1),j3([o5],z3.prototype,"requestClient",1),z3=j3([V3(0,J5),V3(1,kn),V3(2,nn),V3(3,cD),V3(4,xD),V3(5,lj),V3(6,u1),V3(7,T2)],z3);var K3=Object.defineProperty,W3=Object.getOwnPropertyDescriptor;let H3=class{constructor(e){C(this,"_serviceBrand"),C(this,"client"),C(this,"_loginPromise",null),this.client=new Vt({type:zt.Default,env:e.env,on:{success(){console.log("LOGIN SUCCESS")},fail(){console.log("LOGIN FAIL")}}})}login(){return this.client.login()}confirmLogin(){if(this._loginPromise)return this._loginPromise;const{client:e}=this;return this._loginPromise=new Promise((t=>{const n=j2({message:"登录过期，请重新登录。",placement:"top",type:"error",buttons:[{text:"去登录",handler:()=>e.login().then((()=>{this._loginPromise=null,n(),t(null)}))}]})})),this._loginPromise}logout(){return Promise.resolve()}};H3=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?W3(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&K3(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(0,O1)],H3);const $3=/^(GET|POST|PUT|DELETE|HEAD|OPTIONS|CONNECT|TRACE|PATCH)\s+/,q3=/:(\w+)/g,Y3=["POST","PUT","PATCH","DELETE"];function G3(e){const t=bt.create({baseURL:e.baseURL,headers:e.headers,withCredentials:e.withCredentials});return t.interceptors.request.use((t=>{const n=(e.headerHandlers||[]).map((e=>e(t).then((e=>{Object.assign(t.headers,e)})).catch()));return Promise.all(n).then((()=>t))})),t.interceptors.response.use((e=>e),(t=>{const n=e.errorHandler?e.errorHandler(t):t;return Promise.reject(n)})),function(e,t){const n=Object.create(null);for(const i of LR(t)){const r=t[i];if("function"==typeof r){n[i]=r;continue}let o={},s=r;if("object"==typeof r){const e=r,{path:t}=e,n=x(e,["path"]);s=t,o=n}n[i]=(t,n)=>{const i=w({},t||{}),[r,a]=s.match($3)||["GET ","GET"];let l=s.replace(r,"");const c=s.match(q3);c&&c.forEach((e=>{const t=e.replace(":","");Reflect.has(i,t)&&(l=l.replace(e,Reflect.get(i,t)),Reflect.deleteProperty(i,t))}));const d=Y3.includes(a)?{data:i}:{params:i};return e.request(w(w(w({url:l,method:a.toLowerCase()},d),o),n))}}return n}(t,e.apis)}var X3=Object.defineProperty,J3=Object.getOwnPropertyDescriptor;let Q3=class{constructor(e){C(this,"_serviceBrand"),C(this,"authClient"),C(this,"clients",new WeakMap),this.instantiationService=e,this.authClient=e.createInstance(H3)}getClient(e){let t=this.clients.get(e);return t||(t=G3(e),this.clients.set(e,t)),t}};Q3=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?J3(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&X3(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(0,nn)],Q3);const Z3=gD((async()=>(await fetch("https://cdn.dancf.com/fe-assets/20220608/iliad-runtime/dist/179606fe0bc6eebe7d777432a319bdf7.json").then((e=>e.json())).catch((e=>(console.error(e),Promise.resolve([]))))).filter((e=>"normal"===e.content.style))));var e8,t8,n8,i8;(t8=e8||(e8={})).En="en",t8.Ja="ja",t8.Ko="ko",t8.Zh="zh",t8.ZhTW="zh-TW",(i8=n8||(n8={})).Italic="italic",i8.Normal="normal";class r8{async provide(){return[]}}class o8{async provide(e,t){const{locale:n,freeOfCharge:i}=e,r=(await Z3()).filter((e=>{const{content:{langs:t},authorization_id:r}=e;let o=!0;return Ht(n)||(o=t.includes(n)),Ht(i)||(o=12===r||26===r),o})).map((e=>{const{content:{alias:t,langs:n,lang:i},preview:r,name:o}=e;return{family:o,title:t,preview:r.url,locales:n||[i]}}));return(null==t?void 0:t.isCancellationRequested)?null:r}}var s8=Object.freeze(Object.defineProperty({__proto__:null,bootstrap:function(e){e.registerService(lj,G2),e.registerService(X2,f5),e.registerService(HQ,z3),e.registerService(J5,E4),e.registerService(T2,Q3);const t=e.fundamentalServices.get(O1);t.exportCustomArgv("market","MARKET_ORIGIN","//api-dev-market.gaoding.com",T1.dev),t.exportCustomArgv("market","GAODING_ORIGIN","http://www.dev.gaoding.com",T1.dev),t.exportCustomArgv("market","MARKET_ORIGIN","//api-fat-market.gaoding.com",T1.fat),t.exportCustomArgv("market","GAODING_ORIGIN","https://fat.gaoding.com",T1.fat),t.exportCustomArgv("market","MARKET_ORIGIN","//api-stage-market.gaoding.com",T1.stage),t.exportCustomArgv("market","GAODING_ORIGIN","https://stage.gaoding.com",T1.stage),t.exportCustomArgv("market","MARKET_ORIGIN","//api-market.gaoding.com",T1.prod),t.exportCustomArgv("market","GAODING_ORIGIN","https://www.gaoding.com",T1.prod),function(e){const t=e.fundamentalServices.get(lF);t.registerFontOptionProvider(new o8),t.registerComponentOptionProvider(new r8)}(e)},mount:function(e){const t=e.services.get(lj),n=e.services.get(X2),i=e.services.get(HQ),r=e.services.get(J5),o=e.services.get(u1);l4=o.instance,window.services={fileStorageService:t,outputService:n,recordService:i,fileParserService:r}}},Symbol.toStringTag,{value:"Module"}));function a8(e){return`url(${e})`}class l8{async provideFontResource(e,t){const{family:n,chars:i}=e,r=await Z3();const o=r.map((e=>{const{content:t}=e;return{family:e.name,src:t.ttf}})).find((e=>e.family===n));return t.isCancellationRequested?Promise.resolve(null):o?Promise.resolve(function(e,t){const{src:n}=e;let i=a8(n);if((null==t?void 0:t.length)&&t.length<500){const e=new URLSearchParams;e.append("content",t.join("")),e.append("url",n),i=a8(`https://fonter.dancf.com/subset?${e.toString()}`)}return b(w({},e),{src:i})}(o,i)):Promise.resolve(null)}}var c8=Object.freeze(Object.defineProperty({__proto__:null,mount:function(e){e.invokeFunction((e=>e.get(N1))).registerFontResourceProvider(new l8)}},Symbol.toStringTag,{value:"Module"}));const d8=[s8,c8],u8=new sn,h8=new class extends wD{constructor(){super(),C(this,"_phase",En.Starting),C(this,"windowToCloseRequest",new Set),C(this,"oneTimeListenerTokenGenerator",0),C(this,"windowCounter",0),C(this,"phaseWhen",new Map)}get phase(){return this._phase}set phase(e){if(e<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===e)return;this._phase=e;const t=this.phaseWhen.get(this._phase);t&&(t.open(),this.phaseWhen.delete(this._phase))}async when(e){if(e<=this._phase)return;let t=this.phaseWhen.get(e);t||(t=new cn,this.phaseWhen.set(e,t)),await t.wait()}};u8.set(kn,h8),u8.set(k1,new class extends I1{constructor(e=2){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=0&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=1&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=2&&console.log("%c INFO","color: #33f",e,...t)}warn(e,...t){this.getLevel()<=3&&console.log("%c WARN","color: #993",e,...t)}error(e,...t){this.getLevel()<=4&&console.log("%c  ERR","color: #f33",e,...t)}critical(e,...t){this.getLevel()<=5&&console.log("%cCRITI","background: #f33; color: white",e,...t)}dispose(){}flush(){}}(E1.Info)),u8.set(u1,new f1),u8.set(O1,new class{constructor(){C(this,"_serviceBrand"),C(this,"store",[])}get env(){return{}.VITE_ENV||"dev"}getCustomArgv(e,t,n=this.env){const i=this.store.find((i=>i.scope===e&&i.key===t&&i.env===n));return null==i?void 0:i.value}exportCustomArgv(e,t,n,i){const r=this.getStored(e,t,i);r?r.value=n:this.store.push({scope:e,env:i,key:t,value:n})}getStored(e,t,n){return this.store.find((i=>i.scope===e&&i.key===t&&i.env===n))}}),u8.set(j1,new Kt(class extends wD{constructor(){super(),C(this,"configuration"),this.configuration=new X1(new J1)}getValue(e){const t="string"==typeof e?e:void 0;return this.configuration.getValue(t)}async updateValue(e,t){const n=this.deriveConfigurationTarget(e,t);return n?this.writeConfigurationValue(e,t,n):Promise.resolve(null)}inspect(e){return this.configuration.inspect(e)}deriveConfigurationTarget(e,t){if(void 0===t)return;return PR(t,this.inspect(e).value)?void 0:V1.USER}writeConfigurationValue(e,t,n){if(n===V1.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(n===V1.MEMORY)return this.configuration.updateValue(e,t),Promise.resolve(null);throw new Error("500")}})),u8.set(vZ,new Kt(class extends wD{constructor(e=new Q1){super(),C(this,"_onUndo",this._register(new C1)),C(this,"onUndo",this._onUndo.event),C(this,"_onRedo",this._register(new C1)),C(this,"onRedo",this._onUndo.event),C(this,"editStack"),this._register(this.editStack=e)}test_getEditStack(){return this.editStack}push(e){this.editStack.push(e)}pop(){this.editStack.pop()}amend(e){return this.editStack.amend(e)}canUndo(){return this.editStack.hasPastElements()}undo(){const e=this.editStack.getClosestPastElement();e&&(this.editStack.moveBackward(e),e.undo(),this._onUndo.fire())}canRedo(){return this.editStack.hasFutureElements()}redo(){const e=this.editStack.getClosestFutureElement();e&&(this.editStack.moveForward(e),e.redo(),this._onRedo.fire())}})),u8.set(iU,new Kt(x2,[document.body])),u8.set(cD,new Kt(class extends a2{constructor(){super(0),C(this,"_lastContextId"),C(this,"_contexts",new Map),this._lastContextId=0;const e=new r2(this._myContextId);this._contexts.set(this._myContextId,e)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._contexts.clear()}getContextValuesContainer(e){return this._isDisposed?n2.INSTANCE:this._contexts.get(e)||n2.INSTANCE}})),u8.set(xD,new Kt(E2)),u8.set(N1,new class extends wD{constructor(){super(...arguments),C(this,"_imageLoadingBarrier",new Map),C(this,"_fontResourceProviders",new Set),C(this,"_imageCache",new Map)}dispose(){super.dispose(),this._imageLoadingBarrier.clear(),this._fontResourceProviders.clear(),this._imageCache.clear()}getPlaceHolderImage(e,t){const n=new Blob([`<svg width="${e}" height="${t}" xmlns="http://www.w3.org/2000/svg"><circle cx="0" cy="0" r="1" opacity="0" /></svg>`],{type:"image/svg+xml"}),i=URL.createObjectURL(n);return{url:i,dispose(){URL.revokeObjectURL(i)}}}loadImage(e){if(!this._imageLoadingBarrier.has(e)){const t=new cn;fetch(e).then((e=>e.blob())).then((n=>{const i=new FileReader;i.onloadend=()=>{const n=i.result;this._imageCache.set(e,n),t.open();document.createElement("img").src=n},i.onerror=()=>{console.log("500")},i.readAsDataURL(n)})),this._imageLoadingBarrier.set(e,t)}return this._imageLoadingBarrier.get(e).wait()}getImageCache(e){return this._imageCache.get(e)||""}registerFontResourceProvider(e){if(this._fontResourceProviders.has(e))throw new Error("400");return this._fontResourceProviders.add(e),vD((()=>this._fontResourceProviders.delete(e)))}async queryFontResource(e,t){const n=[];for(const i of this._fontResourceProviders)n.push(i.provideFontResource(e,t));return(await Promise.all(n)).filter((e=>!!e))}}),u8.set(lF,new class{constructor(){C(this,"_serviceBrand"),C(this,"componentProvider",new Set),C(this,"fontOptionProvider",new Set)}registerComponentOptionProvider(e){return this.componentProvider.add(e),vD((()=>this.componentProvider.delete(e)))}getComponents(e,t){const n=[],i=[];for(const r of this.componentProvider)n.push(r.provide(e,t).then((e=>{Gt(e)&&i.push(...e)})));return Promise.allSettled(n).then((()=>i))}registerFontOptionProvider(e){return this.fontOptionProvider.add(e),vD((()=>this.fontOptionProvider.delete(e)))}getFonts(e,t){const n=[],i=[];for(const r of this.fontOptionProvider)n.push(r.provide(e,t).then((e=>{Gt(e)&&i.push(...e)})));return Promise.allSettled(n).then((()=>i))}});const p8=new yn(u8),f8=p8.createInstance(Rn);var g8,m8;d8.forEach((e=>{qt(e.bootstrap)&&e.bootstrap(f8)})),f8.initServices(),h8.phase=En.Bootstraped,g8=document.querySelector("#root"),m8=p8,ut.render(k(g1,{instantiationService:m8}),g8),h8.when(En.EditorCreated).then((()=>{d8.forEach((e=>{qt(e.mount)&&e.mount(f8)})),h8.phase=En.ExtensionActivated}));
