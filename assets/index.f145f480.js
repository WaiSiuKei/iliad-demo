var e,t,n,i,r,o,s,a,l,c,d,u,h,p=Object.defineProperty,f=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&y(e,n,t[n]);if(m)for(var n of m(t))v.call(t,n)&&y(e,n,t[n]);return e},b=(e,t)=>f(e,g(t)),x=(e,t)=>{var n={};for(var i in e)_.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&m)for(var i of m(e))t.indexOf(i)<0&&v.call(e,i)&&(n[i]=e[i]);return n},C=(e,t,n)=>(y(e,"symbol"!=typeof t?t+"":t,n),n);import{j as k,R as E,a as S,u as I,b as O,r as T,c as M,d as N,e as A,T as R,D,f as P,I as L,g as U,h as F,B,i as j,k as V,l as z,m as K,n as W,o as H,t as $,p as q,q as Y,s as G,v as X,C as J,w as Q,x as Z,y as ee,z as te,A as ne,E as ie,F as re,G as oe,H as se,J as ae,K as le,L as ce,M as de,N as ue,S as he,O as pe,P as fe,Q as ge,U as me,V as _e,W as ve,X as ye,Y as we,Z as be,_ as xe,$ as Ce,a0 as ke,a1 as Ee,a2 as Se,a3 as Ie,a4 as Oe,a5 as Te,a6 as Me,a7 as Ne,a8 as Ae,a9 as Re,aa as De,ab as Pe,ac as Le,ad as Ue,ae as Fe,af as Be,ag as je,ah as Ve,ai as ze,aj as Ke,ak as We,al as He,am as $e,an as qe,ao as Ye,ap as Ge,aq as Xe,ar as Je,as as Qe,at as Ze,au as et,av as tt,aw as nt,ax as it,ay as rt,az as ot,aA as st,aB as at,aC as lt,aD as ct,aE as dt,aF as ut,aG as ht,aH as pt,aI as ft,aJ as gt,aK as mt,aL as _t,aM as vt,aN as yt,aO as wt,aP as bt,aQ as xt,aR as Ct,aS as kt,aT as Et,aU as St,aV as It,aW as Ot,aX as Tt,aY as Mt,aZ as Nt,a_ as At,a$ as Rt,b0 as Dt,b1 as Pt,b2 as Lt,b3 as Ut,b4 as Ft,b5 as Bt,b6 as jt,b7 as Vt}from"./vendor.069988a9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class zt{constructor(e,t=[],n=!1){C(this,"ctor"),C(this,"staticArguments"),C(this,"supportsDelayedInstantiation"),this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}function Kt(e){return void 0===e}function Wt(e){return Kt(e)||null===e}C(zt,"__SyncDescriptorBrand");const Ht=e=>"string"==typeof e,$t=e=>"function"==typeof e,qt=e=>null!==e&&"object"==typeof e,Yt=Array.isArray;function Gt(e){return Ht(e)?Number.isInteger(parseInt(e)):Number.isInteger(e)}function Xt(e){try{JSON.parse(e)}catch(t){return!1}return!0}function Jt(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}let Qt;if(Reflect.has(globalThis,"__$$diMap"))Qt=Reflect.get(globalThis,"__$$diMap");else{const e=new Map;Qt=e,Reflect.set(globalThis,"__$$diMap",e)}let Zt;if(Reflect.has(globalThis,"__$$idMap"))Zt=Reflect.get(globalThis,"__$$idMap");else{const e=new Map;Zt=e,Reflect.set(globalThis,"__$$idMap",e)}function en(e){const t=e.name;return Qt.get(t)||[]}const tn=rn("instantiationService");function nn(e,t,n,i){const r=t.name,o=Qt.get(r);if(Wt(o))Qt.set(r,[{id:e,index:n,optional:i}]);else{-1===function(e,t){const n=e.length;if(0===n)return-1;for(let i=0;i<n;i++)if(t(e[i]))return i;return-1}(o,(t=>t.id.toString()===e.toString()))&&o.push({id:e,index:n,optional:i})}}function rn(e){if(Zt.has(e))return Zt.get(e);const t=function(e,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");nn(t,e,i,!1)};return t.toString=function(){return e},Reflect.set(t,"__brand",e),Zt.set(e,t),t}class on{constructor(...e){C(this,"_entries",new Map);for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}dispose(){for(const[e,t]of this._entries){if(e!==tn&&!(t instanceof zt)){const e=Reflect.get(t,"dispose");$t(e)&&e.call(t)}this._entries.delete(e)}}}let sn;!function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});sn=t=>{const n=setTimeout((()=>t(e)));let i=!1;return{dispose(){i||(i=!0,clearTimeout(n))}}}}else sn=(e,t)=>{const n=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(n))}}}}();class an{constructor(e){C(this,"_executor"),C(this,"_handle"),C(this,"_didRun",!1),C(this,"_value"),C(this,"_error"),this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=sn((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class ln{constructor(){C(this,"_isOpen"),C(this,"_promise"),C(this,"_completePromise"),this._isOpen=!1,this._promise=new Promise(((e,t)=>{this._completePromise=e}))}isOpen(){return this._isOpen}open(e){this._isOpen=!0,this._completePromise(e)}wait(){return this._promise}}class cn{constructor(e,t){C(this,"_token"),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}const dn=new class{constructor(){C(this,"unexpectedErrorHandler"),C(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function un(e){(function(e){if(e instanceof hn)return!0;return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message})(e)||dn.onUnexpectedError(e)}class hn extends Error{constructor(){super("Canceled"),this.name=this.message}}class pn{constructor(e){C(this,"data"),C(this,"incoming",new Map),C(this,"outgoing",new Map),this.data=e}}class fn{constructor(e){C(this,"_nodes",new Map),this._hashFn=e}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new pn(e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const e=this._findCycle(i,t);if(e)return e;t.delete(n)}}insertVertex(e){this.lookupOrInsertNode(e)}topologicalSort(){const e=[],t=new Set,{_hashFn:n}=this;function i(r,o=null){if(t.has(r))return;const s=n(r.data),a=Array.isArray(o)?o:[];a.push(r),t.add(r),r.outgoing.forEach((e=>{if(-1!==a.indexOf(e)){const t=n(e.data);throw new Error("Circular chain found: "+s+" must be before "+t+" due to a direct order specification, but "+t+" must be before "+s+" based on other specifications.")}i(e,a.slice())})),e.unshift(r.data)}return this._nodes.forEach((e=>i(e))),e}}class gn extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!=(t=e.findCycleSlow())?t:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}function mn(e){return!!e&&Reflect.has(Object.getPrototypeOf(e).constructor,"__SyncDescriptorBrand")}class _n{constructor(e=new on,t=!1,n){C(this,"_services"),C(this,"_strict"),C(this,"_parent"),C(this,"_activeInstantiations",new Set),this._services=e,this._strict=t,this._parent=n,this._services.set(tn,this)}createChild(e){return new _n(e,this._strict,this)}invokeFunction(e,...t){const n=bn.traceInvocation(e);let i=!1;try{return e({get:e=>{if(i)throw(t="service accessor is only valid during the invocation of its target method")?new Error(`Illegal state: ${t}`):new Error("Illegal state");var t;const r=this._getOrCreateServiceInstance(e,n);if(!r)throw new Error(`[invokeFunction] unknown service '${e}'`);return r}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return mn(e)?(n=bn.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=bn.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=en(e).sort(((e,t)=>e.index-t.index)),r=[];for(const s of i){const t=this._getOrCreateServiceInstance(s.id,n);t||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${s.id}.`,!1),r.push(t)}const o=i.length>0?i[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const n=o-t.length;t=n>0?t.concat(new Array(n)):t.slice(0,o)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(mn(this._services.get(e)))this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const n=this._getServiceInstanceOrDescriptor(e);return mn(n)?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new fn((e=>e.id.toString()));let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const t=o.pop();if(i.lookupOrInsertNode(t),r++>1e3)throw new gn(i);for(const n of en(t.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(n.id);if(r||this._throwIfStrict(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`,!0),mn(r)){const e={id:n.id,desc:r,_trace:t._trace.branch(n.id,!0)};i.insertEdge(t,e),o.push(e)}}}for(;;){const e=i.roots();if(0===e.length){if(!i.isEmpty())throw new gn(i);break}for(const{data:t}of e){if(mn(this._getServiceInstanceOrDescriptor(t.id))){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}i.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,r){if(mn(this._services.get(e)))return this._createServiceInstance(t,n,i,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const n=new an((()=>this._createInstance(e,t,i)));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];const i=n.value;let r=i[t];return"function"!=typeof r||(r=r.bind(i),e[t]=r),r},set:(e,t,i)=>(n.value[t]=i,!0)})}return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(t),this._strict)throw new Error(e)}get services(){const e=this;return{get:t=>e.invokeFunction((e=>e.get(t)))}}dispose(){}store(e,t){this._services.set(e,t)}}var vn,yn;(yn=vn||(vn={}))[yn.Creation=0]="Creation",yn[yn.Invocation=1]="Invocation",yn[yn.Branch=2]="Branch";const wn=class{constructor(e,t){C(this,"_start",Date.now()),C(this,"_dep",[]),this.type=e,this.name=t}static traceInvocation(e){return wn._None}static traceCreation(e){return wn._None}branch(e,t){const n=new wn(2,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;wn._totals+=e;let t=!1;const n=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(n,i){const r=[],o=new Array(n+1).join("\t");for(const[s,a,l]of i._dep)if(a&&l){t=!0,r.push(`${o}CREATES -> ${s}`);const i=e(n+1,l);i&&r.push(i)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${wn._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(n.join("\n"))}};let bn=wn;C(bn,"_None",new class extends wn{constructor(){super(-1,null)}stop(){}branch(){return this}}),C(bn,"_totals",0);const xn=rn("lifecycleService");var Cn,kn;function En(e,t){for(const n of e)if(t(n))return n}function Sn(...e){throw e.length&&console.error(...e),new Error("not reached")}function In(...e){throw e.length&&console.error(...e),new Error("not implemented")}(kn=Cn||(Cn={}))[kn.Starting=1]="Starting",kn[kn.Bootstraped=2]="Bootstraped",kn[kn.EditorCreated=3]="EditorCreated",kn[kn.ExtensionActivated=4]="ExtensionActivated",Object.freeze([]);var On=Object.defineProperty,Tn=Object.getOwnPropertyDescriptor,Mn=(e,t)=>(n,i)=>t(n,i,e);let Nn=class{constructor(e,t){C(this,"pending",[]),this.instantiationService=e,this.lifecycleService=t}registerService(e,t,...n){if(this.lifecycleService.phase!==Cn.Starting)throw new Error("400");this.pending.push({desc:new zt(t,n),id:e})}initServices(){const e=new fn((e=>{const t=En(this.pending,(t=>t.desc===e));return t||Sn(),t.id.toString()}));for(const{desc:t}of this.pending){const n=en(t.ctor);e.insertVertex(t),n.length&&n.forEach((n=>{const i=En(this.pending,(e=>e.id===n.id));if(i)e.insertEdge(i.desc,t);else{this.instantiationService.invokeFunction((e=>e.get(n.id)))||Sn()}}))}e.topologicalSort().forEach((e=>{if(e.ctor===this.instantiationService.__proto__.constructor)return;const t=En(this.pending,(t=>t.desc===e)).id;this.instantiationService.store(t,this.instantiationService.createInstance(e))}))}invokeFunction(e,...t){if(this.lifecycleService.phase<Cn.Bootstraped)throw new Error("400");return this.instantiationService.invokeFunction(e,...t)}get services(){if(this.lifecycleService.phase<Cn.EditorCreated)throw new Error("400");return this.instantiationService.services}get fundamentalServices(){return this.instantiationService.services}};Nn=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Tn(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&On(t,n,o),o})([Mn(0,tn),Mn(1,xn)],Nn);var An="_rootLayout_o2nlw_1";function Rn(e){return k("div",{className:An,children:e.children})}var Dn,Pn,Ln,Un,Fn,Bn,jn,Vn,zn,Kn,Wn,Hn,$n,qn,Yn,Gn,Xn,Jn,Qn={meta:{title:"落地页"},nodes:[{id:"root",props:{}},{id:"comp_PC_01",props:{},meta:{id:"1164:6154",label:"PC_01",tagName:"DIV",componentType:"Page"},from:"root",order:"0.1"},{id:"section_3",props:{},from:"comp_PC_01",meta:{id:"1164:6155",label:"Frame 1000008930",tagName:"SECTION",componentType:"Section"},order:"0.0001"},{id:"group_5",from:"section_3",props:{},meta:{id:"1164:6156",label:"注册",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_7",from:"group_5",props:{},meta:{id:"1164:6157",label:"Frame 1000001554",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_9",from:"group_7",props:{},meta:{id:"I1164:6157;1662:44776",label:"Frame 36846357",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_11",from:"group_9",props:{},meta:{id:"I1164:6157;1662:44777",label:"Frame 36846366",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_13",from:"group_11",props:{},meta:{id:"I1164:6157;1662:44778",label:"Frame 36846367",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_15",from:"group_13",props:{},meta:{id:"I1164:6157;1662:44781",label:"表单",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_17",from:"group_15",props:{},meta:{id:"I1164:6157;1662:44782",label:"标题",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_19",from:"group_15",props:{},meta:{id:"I1164:6157;1662:44787",label:"其他方式登录",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_21",from:"group_19",props:{},meta:{id:"I1164:6157;1662:44792",label:"Frame 36844870",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_23",from:"group_21",props:{},meta:{id:"I1164:6157;1662:44793",label:"表单",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_25",from:"group_23",props:{},meta:{id:"I1164:6157;1865:54277",label:"切换",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_27",from:"group_25",props:{},meta:{id:"I1164:6157;1865:54277;1865:52652",label:"Frame 2060",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_29",from:"group_23",props:{},meta:{id:"I1164:6157;1662:44800",label:"输入方式",tagName:"DIV",componentType:"Container"},order:"0.333"},{id:"group_31",from:"group_23",props:{},meta:{id:"I1164:6157;1662:44801",label:"验证",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"group_33",from:"group_31",props:{},meta:{id:"I1164:6157;1662:44801;1662:45296",label:"Frame 36846358",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_35",from:"group_33",props:{},meta:{id:"I1164:6157;1662:44801;1662:45298",label:"图标-不显示密码",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_37",from:"group_21",props:{},meta:{id:"I1164:6157;1662:44802",label:"按钮",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_39",from:"group_37",props:{},meta:{id:"I1164:6157;1865:55527",label:"Frame 1000001580",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_41",from:"group_39",props:{},meta:{id:"I1164:6157;1662:44804",label:"Frame 2099",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_43",from:"group_37",props:{},meta:{id:"I1164:6157;1887:28799",label:"banner",tagName:"DIV",componentType:"Container"},order:"0.333"},{id:"group_45",from:"group_43",props:{},meta:{id:"I1164:6157;1887:28799;1885:82087",label:"Frame 1000001597",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_47",from:"group_45",props:{},meta:{id:"I1164:6157;1887:28799;1885:82085",label:"Frame 1000001596",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_49",from:"group_47",props:{},meta:{id:"I1164:6157;1887:28799;1885:82084",label:"Frame 1000001595",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_51",from:"group_47",props:{},meta:{id:"I1164:6157;1887:28799;1885:82058",label:"Mask group",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_53",from:"group_43",props:{},meta:{id:"I1164:6157;1887:28799;1885:82187",label:"Frame 1000001601",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_55",from:"group_53",props:{},meta:{id:"I1164:6157;1887:28799;1885:82161",label:"Frame 1000001600",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_57",from:"group_55",props:{},meta:{id:"I1164:6157;1887:28799;1885:82162",label:"主体",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_59",from:"group_37",props:{},meta:{id:"I1164:6157;1872:60529",label:"其他方式登录",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"group_61",from:"group_59",props:{},meta:{id:"I1164:6157;1872:60530",label:"Frame 1990",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_63",from:"group_59",props:{},meta:{id:"I1164:6157;1872:60534",label:"white-logo",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_65",from:"group_63",props:{},meta:{id:"I1164:6157;1872:60540",label:"Group 2035",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_67",from:"group_63",props:{},meta:{id:"I1164:6157;1872:60535",label:"Group 2034",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"group_69",from:"group_67",props:{},meta:{id:"I1164:6157;1872:60536",label:"White-Logo-Square-",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_71",from:"group_67",props:{},meta:{id:"I1164:6157;1872:60538",label:"google备份",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"group_73",from:"section_3",props:{},meta:{id:"1164:6158",label:"img_tittle",tagName:"DIV",componentType:"Container"},order:"0.333"},{id:"group_75",from:"section_3",props:{},meta:{id:"1164:6163",label:"img_banner",tagName:"DIV",componentType:"Container"},order:"0.667"},{id:"section_77",props:{},from:"comp_PC_01",meta:{id:"1164:6172",label:"adafsafc",tagName:"SECTION",componentType:"Section"},order:"0.200"},{id:"group_79",from:"section_77",props:{},meta:{id:"1164:6173",label:"img_PC_02",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"section_81",props:{},from:"comp_PC_01",meta:{id:"1164:6181",label:"asgbgtrn",tagName:"SECTION",componentType:"Section"},order:"0.400"},{id:"group_83",from:"section_81",props:{},meta:{id:"1164:6182",label:"img_PC_03",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"section_85",props:{},from:"comp_PC_01",meta:{id:"1164:6217",label:"afaf ",tagName:"SECTION",componentType:"Section"},order:"0.600"},{id:"group_87",from:"section_85",props:{},meta:{id:"1164:6219",label:"img_PC_04",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"section_89",props:{},from:"comp_PC_01",meta:{id:"1164:6223",label:"底部",tagName:"SECTION",componentType:"Section"},order:"0.800"},{id:"group_92",from:"section_89",props:{},meta:{id:"91",label:"底部_export",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"comp_iPad_01",props:{},meta:{id:"1164:6083",label:"iPad_01",tagName:"DIV",componentType:"Page"},from:"root",order:"0.1"},{id:"section_97",props:{},from:"comp_iPad_01",meta:{id:"1164:6084",label:"img_ipad_01",tagName:"SECTION",componentType:"Section"},order:"0.0001"},{id:"section_100",props:{},from:"comp_iPad_01",meta:{id:"1164:6099",label:"img_ipad_02",tagName:"SECTION",componentType:"Section"},order:"0.167"},{id:"section_103",props:{},from:"comp_iPad_01",meta:{id:"1164:6107",label:"img_ipad_03",tagName:"SECTION",componentType:"Section"},order:"0.333"},{id:"section_106",props:{},from:"comp_iPad_01",meta:{id:"1164:6142",label:"img_iPad_04",tagName:"SECTION",componentType:"Section"},order:"0.500"},{id:"section_109",props:{},from:"comp_iPad_01",meta:{id:"1164:6148",label:"底部",tagName:"SECTION",componentType:"Section"},order:"0.667"},{id:"section_112",props:{},from:"comp_iPad_01",meta:{id:"1164:6150",label:"Frame 1000008837",tagName:"SECTION",componentType:"Section"},order:"0.833"},{id:"group_114",from:"section_112",props:{},meta:{id:"1164:6151",label:"按钮",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_116",from:"section_97",props:{},meta:{id:"99",label:"img_ipad_01_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_118",from:"section_100",props:{},meta:{id:"102",label:"img_ipad_02_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_120",from:"section_103",props:{},meta:{id:"105",label:"img_ipad_03_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_122",from:"section_106",props:{},meta:{id:"108",label:"img_iPad_04_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_124",from:"section_109",props:{},meta:{id:"111",label:"底部_export",tagName:"DIV",componentType:"Container"},order:"0.500"},{id:"comp_h5_01",props:{},meta:{id:"1164:6014",label:"h5_01",tagName:"DIV",componentType:"Page"},from:"root",order:"0.1"},{id:"section_129",props:{},from:"comp_h5_01",meta:{id:"1164:6015",label:"img_h5_01",tagName:"SECTION",componentType:"Section"},order:"0.0001"},{id:"section_132",props:{},from:"comp_h5_01",meta:{id:"1164:6029",label:"img_h5_02",tagName:"SECTION",componentType:"Section"},order:"0.167"},{id:"section_135",props:{},from:"comp_h5_01",meta:{id:"1164:6037",label:"img_h5_03",tagName:"SECTION",componentType:"Section"},order:"0.333"},{id:"section_138",props:{},from:"comp_h5_01",meta:{id:"1164:6072",label:"img_h5_04",tagName:"SECTION",componentType:"Section"},order:"0.500"},{id:"section_141",props:{},from:"comp_h5_01",meta:{id:"1164:6077",label:"底部",tagName:"SECTION",componentType:"Section"},order:"0.667"},{id:"section_144",props:{},from:"comp_h5_01",meta:{id:"1164:6079",label:"Frame 1000008837",tagName:"SECTION",componentType:"Section"},order:"0.833"},{id:"group_146",from:"section_144",props:{},meta:{id:"1164:6080",label:"按钮",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_148",from:"section_129",props:{},meta:{id:"131",label:"img_h5_01_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_150",from:"section_132",props:{},meta:{id:"134",label:"img_h5_02_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_152",from:"section_135",props:{},meta:{id:"137",label:"img_h5_03_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_154",from:"section_138",props:{},meta:{id:"140",label:"img_h5_04_export",tagName:"DIV",componentType:"Container"},order:"0.0001"},{id:"group_156",from:"section_141",props:{},meta:{id:"143",label:"底部_export",tagName:"DIV",componentType:"Container"},order:"0.500"}],styles:[{id:"s_1",targetId:"comp_PC_01",breakpointId:null,display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"static",height:"auto"},{id:"s_2",targetId:"comp_PC_01",breakpointId:"b1",display:"none"},{id:"s_4",targetId:"section_3",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"760px",width:"100%","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)"},{id:"s_6",targetId:"group_5",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"480px",height:"628px","margin-left":"1080px","margin-top":"81px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_8",targetId:"group_7",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)",width:"480px",height:"598px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_10",targetId:"group_9",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"486px","margin-left":"40px","margin-top":"40px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_12",targetId:"group_11",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"462px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_14",targetId:"group_13",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"462px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_16",targetId:"group_15",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"462px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_18",targetId:"group_17",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"34px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_20",targetId:"group_19",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"412px","margin-left":"0px","margin-top":"50px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_22",targetId:"group_21",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"412px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_24",targetId:"group_23",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"162px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_26",targetId:"group_25",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"90px",height:"26px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_28",targetId:"group_27",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"32px",height:"26px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_30",targetId:"group_29",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(246,246,247,1) 0%, rgba(246,246,247,1) 100%)",width:"400px",height:"52px","margin-left":"0px","margin-top":"42px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_32",targetId:"group_31",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(246,246,247,1) 0%, rgba(246,246,247,1) 100%)",width:"400px",height:"52px","margin-left":"0px","margin-top":"110px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_34",targetId:"group_33",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"80px",height:"18px","margin-left":"304px","margin-top":"17px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_36",targetId:"group_35",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"18px",height:"18px","margin-left":"62px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_38",targetId:"group_37",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"234px","margin-left":"0px","margin-top":"178px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_40",targetId:"group_39",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"48px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_42",targetId:"group_41",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(0,108,246,1) 0%, rgba(0,108,246,1) 100%)",width:"400px",height:"48px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_44",targetId:"group_43",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"64px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_46",targetId:"group_45",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_48",targetId:"group_47",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_50",targetId:"group_49",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"58px",height:"10px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_52",targetId:"group_51",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"70px","margin-left":"0px","margin-top":"10px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_54",targetId:"group_53",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"80px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_56",targetId:"group_55",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"400px",height:"52px","margin-left":"0px","margin-top":"20px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_58",targetId:"group_57",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/bb7bcfcf-fb59-4861-b083-4940857654ce.png)",width:"72px",height:"51px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_60",targetId:"group_59",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"268px",height:"74px","margin-left":"66px","margin-top":"160px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_62",targetId:"group_61",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"180px",height:"22px","margin-left":"44px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_64",targetId:"group_63",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"268px",height:"36px","margin-left":"0px","margin-top":"38px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_66",targetId:"group_65",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"36px",height:"36px","margin-left":"232px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_68",targetId:"group_67",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"36px",height:"36px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_70",targetId:"group_69",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box",width:"36px",height:"36px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_72",targetId:"group_71",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/818d2931-a84d-43ee-90ac-2ec07a04e47a.png)",width:"30px",height:"30px","margin-left":"3px","margin-top":"3px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_74",targetId:"group_73",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/4dd85ffe-a90c-431c-838e-0b7a2f82c9dc.png)",width:"560px",height:"257px","margin-left":"360px","margin-top":"100px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_76",targetId:"group_75",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/5649e1a5-d84f-41fc-b8dc-ec1d1162ef81.png)",width:"420px",height:"399px","margin-left":"360px","margin-top":"361px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_78",targetId:"section_77",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"572px",width:"100%","grid-row-start":"2","grid-row-end":"3","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)"},{id:"s_80",targetId:"group_79",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/40470b88-4edd-4d03-8e2a-99117fff12e1.png)",width:"1200px",height:"402px","margin-left":"360px","margin-top":"100px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_82",targetId:"section_81",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"526px",width:"100%","grid-row-start":"3","grid-row-end":"4","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_84",targetId:"group_83",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/27d61a2d-8582-453f-a028-749cc863018b.png)",width:"1200px",height:"326px","margin-left":"360px","margin-top":"100px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_86",targetId:"section_85",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"514px",width:"100%","grid-row-start":"4","grid-row-end":"5","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(180deg, rgba(235,243,255,1) 0%,rgba(255,255,255,1) 100%)"},{id:"s_88",targetId:"group_87",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/0c9d07ce-bd4c-49fb-ac8f-58a2580da03c.png)",width:"1200px",height:"514px","margin-left":"360px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_90",targetId:"section_89",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"260px",width:"100%","grid-row-start":"5","grid-row-end":"6","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box"},{id:"s_93",targetId:"group_92",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/9c86eb22-1f17-45f4-a2f8-b52865479f78.png)",width:"1200px",height:"260px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_94",targetId:"comp_iPad_01",breakpointId:null,display:"none","box-sizing":"border-box","grid-template-rows":"minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"static",height:"auto"},{id:"s_95",targetId:"comp_iPad_01",breakpointId:"b1",display:"grid"},{id:"s_96",targetId:"comp_iPad_01",breakpointId:"b2",display:"none"},{id:"s_98",targetId:"section_97",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"671px",width:"100%","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)"},{id:"s_101",targetId:"section_100",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"557px",width:"100%","grid-row-start":"2","grid-row-end":"3","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)"},{id:"s_104",targetId:"section_103",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"363px",width:"100%","grid-row-start":"3","grid-row-end":"4","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_107",targetId:"section_106",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"626px",width:"100%","grid-row-start":"4","grid-row-end":"5","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)"},{id:"s_110",targetId:"section_109",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"218px",width:"100%","grid-row-start":"5","grid-row-end":"6","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box"},{id:"s_113",targetId:"section_112",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"74px",width:"100%","grid-row-start":"6","grid-row-end":"7","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_115",targetId:"group_114",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/1a84e9fb-e6c3-4ad1-b777-500dbb4f2eec.png)",width:"708px",height:"50px","margin-left":"30px","margin-top":"12px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_117",targetId:"group_116",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/d27e272b-7e54-4cb8-b816-27144b0f7a15.png), linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)","background-position":"center",width:"768px",height:"671px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_119",targetId:"group_118",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/8f37dd3f-8d5b-43a6-b54f-7187f16fd429.png), linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)","background-position":"center",width:"768px",height:"557px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_121",targetId:"group_120",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/fbd5e543-7a2b-4e12-b44c-69dc683aee21.png), linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)","background-position":"center",width:"768px",height:"363px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_123",targetId:"group_122",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/e997eb1e-e33a-47bc-8f68-b0fe5be2e432.png), linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)","background-position":"center",width:"768px",height:"626px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_125",targetId:"group_124",breakpointId:"b1",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/646e684e-65ff-42c8-8d20-73c800f2750f.png)",width:"768px",height:"218px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_126",targetId:"comp_h5_01",breakpointId:null,display:"none","box-sizing":"border-box","grid-template-rows":"minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto) minmax(0px,auto)","grid-template-columns":"minmax(0px,auto)",position:"static",height:"auto"},{id:"s_127",targetId:"comp_h5_01",breakpointId:"b1",display:"none"},{id:"s_128",targetId:"comp_h5_01",breakpointId:"b2",display:"grid"},{id:"s_130",targetId:"section_129",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"651px",width:"100%","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)"},{id:"s_133",targetId:"section_132",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"467px",width:"100%","grid-row-start":"2","grid-row-end":"3","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)"},{id:"s_136",targetId:"section_135",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"522px",width:"100%","grid-row-start":"3","grid-row-end":"4","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_139",targetId:"section_138",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"626px",width:"100%","grid-row-start":"4","grid-row-end":"5","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)"},{id:"s_142",targetId:"section_141",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"274px",width:"100%","grid-row-start":"5","grid-row-end":"6","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box"},{id:"s_145",targetId:"section_144",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)",position:"static",height:"74px",width:"100%","grid-row-start":"6","grid-row-end":"7","grid-column-start":"1","grid-column-end":"2","background-origin":"border-box","background-size":"100%","background-repeat":"repeat","background-image":"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)"},{id:"s_147",targetId:"group_146",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/247b6fff-56c8-4009-ab2b-82265d5fd662.png)",width:"358px",height:"50px","margin-left":"16px","margin-top":"12px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_149",targetId:"group_148",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/95a280a8-cbf2-4886-8ef6-e7b77e70d5a4.png), linear-gradient(90deg, rgba(194,214,255,1) 0%, rgba(194,214,255,1) 100%)","background-position":"center",width:"390px",height:"651px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_151",targetId:"group_150",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/15a3fbe0-23df-43e8-9cef-90918868c7d6.png), linear-gradient(90deg, rgba(245,246,247,1) 0%, rgba(245,246,247,1) 100%)","background-position":"center",width:"390px",height:"467px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_153",targetId:"group_152",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/9bb1d58a-b7fe-4f37-97a4-b747592878be.png), linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 100%)","background-position":"center",width:"390px",height:"522px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_155",targetId:"group_154",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-size":"contain, 100%","background-repeat":"no-repeat, repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/f772c488-91b9-42d2-ac0d-ad6c16d45900.png), linear-gradient(180deg, rgba(255,255,255,1) 0%,rgba(235,243,255,1) 100%)","background-position":"center",width:"390px",height:"626px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"},{id:"s_157",targetId:"group_156",breakpointId:"b2",display:"grid","box-sizing":"border-box","grid-template-rows":"minmax(0px, 1fr)","grid-template-columns":"minmax(0px, 1fr)","background-origin":"border-box","background-position":"center","background-size":"contain","background-repeat":"no-repeat","background-image":"url(https://codesign-1258344699.cos.accelerate.myqcloud.com/screen-slices/2024/10/22/pOrz024WyMwe10jWJPX22/8nverrapcf88slhn/e9c2acf8-3a70-4fe9-92ea-8e912fb78c6d.png)",width:"390px",height:"274px","margin-left":"0px","margin-top":"0px","align-self":"start","justify-self":"start","grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"}],links:[],triggers:[],animations:[],interactions:[],breakpoints:[{id:"b1",maxWidth:1e3,minWidth:751},{id:"b2",maxWidth:750,minWidth:320}],roots:[],fontfaces:[]};(Pn=Dn||(Dn={})).document="document",Pn.scroll="scroll",(Un=Ln||(Ln={})).normal="normal",Un.reverse="reverse",Un.alternate="alternate",Un["alternate-reverse"]="alternate-reverse",(Bn=Fn||(Fn={})).none="none",Bn.forwards="forwards",Bn.backwards="backwards",Bn.both="both",Bn.auto="auto",(Vn=jn||(jn={})).group="group",Vn.sequence="sequence",(Kn=zn||(zn={})).appearance="appearance",Kn.transition="transition",(Hn=Wn||(Wn={})).start="start",Hn.end="end",(qn=$n||($n={})).vertical="vertical",qn.horizontal="horizontal",qn.block="block",qn.inline="inline",(Gn=Yn||(Yn={})).enter="enter",Gn.exit="exit",(Jn=Xn||(Xn={})).load="load",Jn.click="click",Jn.mouseenter="mouseenter",Jn.mouseleave="mouseleave",Jn.intersection="@intersection",Jn.loadScroll="@loadScroll",Jn.appear="@appear",Jn.mousedown="mousedown",Jn.mouseup="mouseup";const Zn=new Uint8Array(16),ei=[];for(let os=0;os<256;os++)ei.push(os.toString(16).padStart(2,"0"));let ti;function ni(){ti(Zn),Zn[6]=15&Zn[6]|64,Zn[8]=63&Zn[8]|128;let e=0,t="";return t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+="-",t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+="-",t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+="-",t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+="-",t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+=ei[Zn[e++]],t+=ei[Zn[e++]],t}function ii(e){return void 0===e}function ri(e){return ii(e)||null===e}ti="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};const oi=e=>"string"==typeof e,si=e=>null!==e&&"object"==typeof e;function ai(e){return oi(e)?Number.isInteger(parseInt(e)):Number.isInteger(e)}function li(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=li(e[n]):t[n]=e[n]})),t}function ci(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!ci(e[n],t[n]))return!1}else{const r=[];for(i in e)r.push(i);r.sort();const o=[];for(i in t)o.push(i);if(o.sort(),!ci(r,o))return!1;for(n=0;n<r.length;n++)if(!ci(e[r[n]],t[r[n]]))return!1}return!0}function di(e){return Object.keys(e)}const ui=Object.prototype.hasOwnProperty;function hi(e,t){if(!e)throw t instanceof Error?t:new Error(t)}function pi(e,t){const n=t instanceof Error?t:new Error(t);e||console.error(n)}var fi,gi,mi,_i;function vi(e){return 100*e+"%"}function yi(e){return parseFloat(e||"0")}function wi(e){return parseInt(e||"0",10)}function bi(e,t,n=.1){return Math.abs(e-t)<n}function xi(e,t,n){return Math.min(Math.max(t,e),n)}function Ci(){}function ki(e){const t=this;let n,i=!1;return function(){return i||(i=!0,n=e.apply(t,arguments)),n}}function Ei(e){return"normal"===e?0:parseFloat(e)}(gi=fi||(fi={})).notFound="404",gi.badRequest="400",gi.internalError="500",(_i=mi||(mi={})).webkit="-webkit-",_i.moz="-moz-",_i.ms="-ms-",_i.o="-o-";var Si,Ii,Oi,Ti,Mi,Ni,Ai,Ri,Di,Pi,Li,Ui,Fi,Bi,ji,Vi;function zi(e){return e.split(" ").map((e=>parseFloat(e.trim())))}function Ki(e){return Array.from(e.matchAll(/[^\s()]+(?:\([^\s()]+(?:\([^()]+\))?(?:, *[^\s()]+(?:\([^()]+\))?)*\))?/g),(e=>e[0]))}function Wi(e){const t=wi(e.gridRowStart),n=wi(e.gridRowEnd),i=wi(e.gridColumnStart),r=wi(e.gridColumnEnd);return pi(ai(t)&&ai(n)&&ai(i)&&ai(r)),{rowStart:t,rowEnd:n,columnStart:i,columnEnd:r}}function Hi(e){return`matrix(${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.tx}, ${e.ty})`}function $i(e){return oi(e)&&"auto"===e}function qi(e){return!e||$i(e)}function Yi(e){const t=parseFloat(`${e}`);return Number.isFinite(t)?`${e}px`:`${e}`}function Gi(e){return e.includes("background")}(Ii=Si||(Si={})).grid="grid",Ii.flex="flex",Ii.inlineGrid="inline-grid",Ii.inlineFlex="inline-flex",Ii.none="none",Ii.listItem="list-item",Ii.block="block",(Ti=Oi||(Oi={})).row="row",Ti.column="column",(Ni=Mi||(Mi={})).wrap="wrap",Ni.nowrap="nowrap",(Ri=Ai||(Ai={})).none="static",Ri.fixed="fixed",Ri.sticky="sticky",(Pi=Di||(Di={})).visible="visible",Pi.hidden="hidden",Pi.scroll="scroll",Pi.auto="auto",(Ui=Li||(Li={})).default="default",Ui.pointer="pointer",Ui.grab="grab",Ui.move="move",Ui.text="text",(Bi=Fi||(Fi={})).px="px",Bi["%"]="%",Bi.vw="vw",Bi.vh="vh",Bi.fr="fr",(Vi=ji||(ji={})).auto="auto",Vi.fitContent="fit-content",Fi.px,Fi["%"],Fi.vw,Fi.vh;const Xi=[ji.auto,ji.fitContent],Ji=Object.values(Fi),Qi=e=>(e=>!e)(e)||$i(e)||(e=>e===ji.fitContent)(e),Zi=(e,t=Ji)=>{if(!Qi(e))return t.find((t=>e.endsWith(t)))},er=e=>{const t=Zi(e),n=parseFloat(e);return Number.isInteger(n)||Number.isNaN(n)?n:t===Fi.px?parseFloat(n.toFixed(0)):parseFloat(n.toFixed(1))},tr=e=>e.map((e=>e.includes("minmax")?e:e.includes("fr")||e.includes("auto")?`minmax(0px, ${e})`:e)).join(" ");function nr(e){return!Number.isNaN(parseFloat(e))}var ir,rr,or,sr;(rr=ir||(ir={})).none="none",rr.start="start",rr.end="end",rr.center="center",(sr=or||(or={})).none="none",sr.mandatory="both mandatory",sr.proximity="both proximity";const ar=ki((()=>{try{const e=document.createElement("div");return document.body.appendChild(e),getComputedStyle(e)}catch{return{}}}))();var lr,cr,dr,ur,hr,pr;(cr=lr||(lr={})).left="left",cr.right="right",cr.top="top",cr.bottom="bottom",(ur=dr||(dr={})).around="around",ur.none="none",(pr=hr||(hr={})).start="start",pr.end="end",pr.center="center",pr.stretch="stretch";const fr=w(w({},lr),dr),gr=e=>{const{"justify-self":t}=e;return t===hr.center},mr=e=>{const{"align-self":t}=e;return t===hr.center},_r=(e,t)=>{if(yr(e)){const{left:n="",top:i="",right:r="",bottom:o=""}=e;switch(t){case fr.left:return!!n;case fr.right:return!!r;case fr.top:return!!i;case fr.bottom:return!!o;case fr.around:return!!(i&&r&&o&&n);default:return!1}}const{"align-self":n,"justify-self":i}=e;switch(t){case fr.left:return i===hr.start||i===hr.stretch;case fr.right:return i===hr.end||i===hr.stretch;case fr.top:return n===hr.start||n===hr.stretch;case fr.bottom:return n===hr.end||n===hr.stretch;case fr.around:return n===hr.stretch||i===hr.stretch;case fr.none:return gr(e)&&mr(e);default:return!1}};function vr(e){return e instanceof CSSStyleDeclaration?"true"===e.getPropertyValue("--auto-layout").trim():"true"===e["--auto-layout"]}function yr(e){return e.position===Ai.fixed}const wr=Object.freeze(w(w(w({},{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""}),{"grid-row-start":"","grid-row-end":"","grid-column-start":"","grid-column-end":""}),{"justify-self":"","align-self":""})),br=Object.freeze({"grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2","justify-self":hr.start,"align-self":hr.start,"flex-grow":"","flex-basis":""}),xr=Object.freeze({"flex-grow":ar.flexGrow,"flex-basis":ar.flexBasis}),Cr=e=>{const t=e["grid-row-start"],n=e["grid-row-end"],i=e["grid-column-start"],r=e["grid-column-end"];return t&&n&&i&&r?{rowStart:parseInt(t),rowEnd:parseInt(n),columnStart:parseInt(i),columnEnd:parseInt(r)}:(console.warn("Grid节点关键信息缺失"),null)},kr=e=>{const{rowStart:t,rowEnd:n,columnStart:i,columnEnd:r}=e;return{"grid-row-start":t.toString(),"grid-row-end":n.toString(),"grid-column-start":i.toString(),"grid-column-end":r.toString()}};var Er,Sr;(Sr=Er||(Er={}))[Sr.addForward=0]="addForward",Sr[Sr.addBackward=1]="addBackward",Sr[Sr.delete=2]="delete",Sr[Sr.reorder=3]="reorder";class Ir{constructor(e,t,n,i,r){this.id=e,this.style=t,this.width=n,this.selectorType=i,this.subSelector=r}do(e){const t=e.internal_getMatchedStyles(this.id,this.width,this.selectorType,this.subSelector),n=e.internal_getMatchedBreakpoint(this.width),i=this.style,r=b(w({},i),{id:ni(),targetId:this.id,breakpointId:ri(n)?null:n.id,selectorType:this.selectorType,subSelector:this.subSelector});for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&(r[l]||delete r[l]);const o=()=>{const{styles:t,breakpoints:n}=e.getValue();t.push(r);const i=[],o=[];t.forEach(((e,t)=>{e.targetId===this.id&&e.selectorType===this.selectorType&&e.subSelector===this.subSelector&&(o.push(e),i.push(t))}));const s=n.reduce(((e,t)=>(e.set(t.id,t),e)),new Map),a=o.length;for(let e=0;e<a-1;e++)for(let n=0;n<a-1-e;n++){const e=o[n],r=o[n+1];let a=!1;if(e.breakpointId&&!r.breakpointId)a=!0;else if(e.breakpointId&&r.breakpointId){const t=s.get(e.breakpointId);s.get(r.breakpointId).maxWidth>t.maxWidth&&(a=!0)}if(a){const e=li(o[n]),r=li(o[n+1]),s=i[n],a=i[n+1];Object.assign(t[s],r),Object.assign(t[a],e)}}};const s=t.find((e=>e.breakpointId==(null==n?void 0:n.id)));var a;s?(a=s,Object.keys(i).forEach((e=>{i[e]?a[e]=i[e]:delete a[e]}))):o()}}class Or{constructor(e,t,n){this.id=e,this.style=t,this.width=n}do(e){const t=e.internal_getMatchedStyles(this.id,this.width),n=e.internal_getMatchedBreakpoint(this.width);if(!n&&!this.style)throw new Error("500");const i=t.find((e=>e.breakpointId==(null==n?void 0:n.id)));if(i){let e=this.style;if(!e){const t=i,{id:n,breakpointId:r,targetId:o}=t;e=x(t,["id","breakpointId","targetId"])}Object.keys(e).forEach((e=>{delete i[e]}))}}}class Tr{constructor(e,t,n,i){this.root=e,this.ref=t,this.id=n,this.type=i}do(e){const t=this.calcGridAreaInfo(e,this.root,this.ref,this.id,this.type);this.updateGridAreaInfo(e,this.root,t)}updateGridAreaInfo(e,t,n){const{orders:i,rowsTemplate:r,columnsTemplate:o}=n;this.updateGridTemplateStyle(e,t,o,r),this.updateGridAreaStyle(e,i)}updateGridTemplateStyle(e,t,n,i){const r=function(e,t){const n=tr(t.map((()=>"auto"))),i=tr(e.map((()=>"auto")));return{"grid-template-rows":n,"grid-template-columns":i}}(n,i);e.updateAllBpStyles(t,r)}updateGridAreaStyle(e,t){t.forEach((t=>{const{gridArea:n,id:i,changed:r}=t;if(r){const t=kr(n);e.updateAllBpStyles(i,t,!1)}}))}calcGridAreaInfo(e,t,n,i,r){const{columns:o,rows:s,orders:a,rowsTemplate:l,columnsTemplate:c}=e.getChildrenGridAreaInfo(t),d=a.findIndex((e=>e.id===(2===r?i:n))),u=li(a),h=l.slice(0);let p=s,f=null;if(0===r||1===r){const e=a[d]||a[a.length-1],t=h[d]||h[h.length-1];if(!e||!t)throw new Error("500");f=li(e),f.id=i,f.changed=!0,0===r?(u.splice(d,0,f),h.splice(d,0,t)):1===r&&(u.splice(d+1,0,f),h.splice(d+1,0,t)),p=s+1;for(let n=d+1;n<u.length;n++)u[n].gridArea=g(n+1),u[n].changed=!0}else if(3===r&&n!==i){const e=a.findIndex((e=>e.id===i));for(let n=e+1;n<u.length;n++){const e=u[n];e.gridArea=g(n),e.changed=!0}const[t]=u.splice(e,1),r=n?u.findIndex((e=>e.id===n)):u.length,o=r-1;let s=r;t.gridArea=g(s+1),t.changed=!0,o<0?(s=0,u.unshift(t)):u.splice(o,0,t);for(let n=s+1;n<u.length;n++){const e=u[n];e.gridArea=g(n+1),e.changed=!0}}else{p-=1,u.splice(d,1),h.splice(d,1);for(let e=d;e<u.length;e++)u[e].gridArea=g(e+1),u[e].changed=!0}if(p!==h.length)throw new Error("400");return{columns:o,rows:p,orders:u,new:f,rowsTemplate:h,columnsTemplate:c};function g(e,t=1,n=1,i=1){if(e<=0||t<=0)throw new Error("500");return{rowStart:e,rowEnd:e+n,columnStart:t,columnEnd:t+i}}}}function Mr(e,t){const n=e.length;if(0===n)return-1;for(let i=0;i<n;i++)if(t(e[i]))return i;return-1}function Nr(e,t){const n=Mr(e,t);if(-1!==n)return e[n]}function Ar(e){return e.filter((e=>!!e))}function Rr(e,t){const n=e.length;if(t>n||t<0)throw new Error("400");const i=e[t];for(let r=t;r<n-1;r++)e[r]=e[r+1];e[n-1]=i,e.splice(n-1,1)}function Dr(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function Pr(e,t){return Dr(e,t,((e,t)=>e===t))}let Lr;if(Reflect.has(globalThis,"__$$diMap"))Lr=Reflect.get(globalThis,"__$$diMap");else{const e=new Map;Lr=e,Reflect.set(globalThis,"__$$diMap",e)}let Ur;if(Reflect.has(globalThis,"__$$idMap"))Ur=Reflect.get(globalThis,"__$$idMap");else{const e=new Map;Ur=e,Reflect.set(globalThis,"__$$idMap",e)}function Fr(e){const t=e.name;return Lr.get(t)||[]}const Br=Vr("instantiationService");function jr(e,t,n,i){const r=t.name,o=Lr.get(r);if(ri(o))Lr.set(r,[{id:e,index:n,optional:i}]);else{-1===Mr(o,(t=>t.id.toString()===e.toString()))&&o.push({id:e,index:n,optional:i})}}function Vr(e){if(Ur.has(e))return Ur.get(e);const t=function(e,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");jr(t,e,i,!1)};return t.toString=function(){return e},Reflect.set(t,"__brand",e),Ur.set(e,t),t}const zr=Vr("model");var Kr,Wr,Hr,$r;(Wr=Kr||(Kr={}))[Wr.None=0]="None",Wr[Wr.Transform=1]="Transform",Wr[Wr.Add=2]="Add";class qr{constructor(e){C(this,"_styles"),this._styles=e}get attrs(){return this._styles.reduce(((e,t)=>(Object.assign(e,t),e)),{})}getAttr(e){return this.attrs[e]}}($r=Hr||(Hr={})).Image="Image",$r.Container="Container",$r.Section="Section",$r.Symbol="Symbol",$r.Text="Text",$r.RichText="RichText",$r.SVG="SVG",$r.Video="Video",$r.Page="Page",$r.WebWidget="WebWidget";const Yr=[Hr.Image,Hr.Container,Hr.Section,Hr.Symbol,Hr.Text,Hr.SVG,Hr.Video,Hr.Page,Hr.WebWidget,Hr.RichText];var Gr,Xr,Jr,Qr;function Zr(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.Text}function eo(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.RichText}function to(e){return Zr(e)||eo(e)}function no(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.Image}function io(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.SVG}function ro(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.WebWidget}function oo(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.Video}function so(e){return Zr(e)||no(e)||io(e)||ro(e)}function ao(e){var t;return(null==(t=null==e?void 0:e.meta)?void 0:t.componentType)===Hr.Page}function lo(e){return"root"===e.id}function co(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.Section}function uo(e){var t;return(null==(t=e.meta)?void 0:t.componentType)===Hr.Container}function ho(e){return co(e)||uo(e)}function po(e){var t;return si(e)&&(Yr.includes(null==(t=e.meta)?void 0:t.componentType)||lo(e))}(Xr=Gr||(Gr={})).LayouterVert="LayouterVert",Xr.LayouterHoriz="LayouterHoriz",Xr.AutoLayouterVert="AutoLayouterVert",Xr.AutoLayouterHoriz="AutoLayouterHoriz",(Qr=Jr||(Jr={})).Button="Button",Qr.Title="Title",Qr.Paragraph="Paragraph";var fo="[big.js] ",go=fo+"Invalid ",mo=go+"decimal places",_o={},vo=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function yo(e,t,n,i){var r=e.c;if(undefined===n&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error("[big.js] Invalid rounding mode");if(t<1)i=3===n&&(i||!!r[0])||0===t&&(1===n&&r[0]>=5||2===n&&(r[0]>5||5===r[0]&&(i||undefined!==r[1]))),r.length=1,i?(e.e=e.e-t+1,r[0]=1):r[0]=e.e=0;else if(t<r.length){if(i=1===n&&r[t]>=5||2===n&&(r[t]>5||5===r[t]&&(i||undefined!==r[t+1]||1&r[t-1]))||3===n&&(i||!!r[0]),r.length=t--,i)for(;++r[t]>9;)r[t]=0,t--||(++e.e,r.unshift(1));for(t=r.length;!r[--t];)r.pop()}return e}function wo(e,t,n){var i=e.e,r=e.c.join(""),o=r.length;if(t)r=r.charAt(0)+(o>1?"."+r.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)r="0"+r;r="0."+r}else if(i>0)if(++i>o)for(i-=o;i--;)r+="0";else i<o&&(r=r.slice(0,i)+"."+r.slice(i));else o>1&&(r=r.charAt(0)+"."+r.slice(1));return e.s<0&&n?"-"+r:r}_o.abs=function(){var e=new this.constructor(this);return e.s=1,e},_o.cmp=function(e){var t,n=this,i=n.c,r=(e=new n.constructor(e)).c,o=n.s,s=e.s,a=n.e,l=e.e;if(!i[0]||!r[0])return i[0]?o:r[0]?-s:0;if(o!=s)return o;if(t=o<0,a!=l)return a>l^t?1:-1;for(s=(a=i.length)<(l=r.length)?a:l,o=-1;++o<s;)if(i[o]!=r[o])return i[o]>r[o]^t?1:-1;return a==l?0:a>l^t?1:-1},_o.div=function(e){var t=this,n=t.constructor,i=t.c,r=(e=new n(e)).c,o=t.s==e.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>1e6)throw Error(mo);if(!r[0])throw Error("[big.js] Division by zero");if(!i[0])return e.s=o,e.c=[e.e=0],e;var a,l,c,d,u,h=r.slice(),p=a=r.length,f=i.length,g=i.slice(0,a),m=g.length,_=e,v=_.c=[],y=0,w=s+(_.e=t.e-e.e)+1;for(_.s=o,o=w<0?0:w,h.unshift(0);m++<a;)g.push(0);do{for(c=0;c<10;c++){if(a!=(m=g.length))d=a>m?1:-1;else for(u=-1,d=0;++u<a;)if(r[u]!=g[u]){d=r[u]>g[u]?1:-1;break}if(!(d<0))break;for(l=m==a?r:h;m;){if(g[--m]<l[m]){for(u=m;u&&!g[--u];)g[u]=9;--g[u],g[m]+=10}g[m]-=l[m]}for(;!g[0];)g.shift()}v[y++]=d?c:++c,g[0]&&d?g[m]=i[p]||0:g=[i[p]]}while((p++<f||undefined!==g[0])&&o--);return v[0]||1==y||(v.shift(),_.e--,w--),y>w&&yo(_,w,n.RM,undefined!==g[0]),_},_o.eq=function(e){return 0===this.cmp(e)},_o.gt=function(e){return this.cmp(e)>0},_o.gte=function(e){return this.cmp(e)>-1},_o.lt=function(e){return this.cmp(e)<0},_o.lte=function(e){return this.cmp(e)<1},_o.minus=_o.sub=function(e){var t,n,i,r,o=this,s=o.constructor,a=o.s,l=(e=new s(e)).s;if(a!=l)return e.s=-l,o.plus(e);var c=o.c.slice(),d=o.e,u=e.c,h=e.e;if(!c[0]||!u[0])return u[0]?e.s=-l:c[0]?e=new s(o):e.s=1,e;if(a=d-h){for((r=a<0)?(a=-a,i=c):(h=d,i=u),i.reverse(),l=a;l--;)i.push(0);i.reverse()}else for(n=((r=c.length<u.length)?c:u).length,a=l=0;l<n;l++)if(c[l]!=u[l]){r=c[l]<u[l];break}if(r&&(i=c,c=u,u=i,e.s=-e.s),(l=(n=u.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;n>a;){if(c[--n]<u[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=u[n]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--h;return c[0]||(e.s=1,c=[h=0]),e.c=c,e.e=h,e},_o.mod=function(e){var t,n=this,i=n.constructor,r=n.s,o=(e=new i(e)).s;if(!e.c[0])throw Error("[big.js] Division by zero");return n.s=e.s=1,t=1==e.cmp(n),n.s=r,e.s=o,t?new i(n):(r=i.DP,o=i.RM,i.DP=i.RM=0,n=n.div(e),i.DP=r,i.RM=o,this.minus(n.times(e)))},_o.plus=_o.add=function(e){var t,n,i,r=this,o=r.constructor;if(e=new o(e),r.s!=e.s)return e.s=-e.s,r.minus(e);var s=r.e,a=r.c,l=e.e,c=e.c;if(!a[0]||!c[0])return c[0]||(a[0]?e=new o(r):e.s=r.s),e;if(a=a.slice(),t=s-l){for(t>0?(l=s,i=c):(t=-t,i=a),i.reverse();t--;)i.push(0);i.reverse()}for(a.length-c.length<0&&(i=c,c=a,a=i),t=c.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+c[t]+n)/10|0;for(n&&(a.unshift(n),++l),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=l,e},_o.pow=function(e){var t=this,n=new t.constructor("1"),i=n,r=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(go+"exponent");for(r&&(e=-e);1&e&&(i=i.times(t)),e>>=1;)t=t.times(t);return r?n.div(i):i},_o.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(go+"precision");return yo(new this.constructor(this),e,t)},_o.round=function(e,t){if(undefined===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(mo);return yo(new this.constructor(this),e+this.e+1,t)},_o.sqrt=function(){var e,t,n,i=this,r=i.constructor,o=i.s,s=i.e,a=new r("0.5");if(!i.c[0])return new r(i);if(o<0)throw Error(fo+"No square root");0===(o=Math.sqrt(i+""))||o===1/0?((t=i.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new r(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new r(o+""),s=e.e+(r.DP+=4);do{n=e,e=a.times(n.plus(i.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return yo(e,(r.DP-=4)+e.e+1,r.RM)},_o.times=_o.mul=function(e){var t,n=this,i=n.constructor,r=n.c,o=(e=new i(e)).c,s=r.length,a=o.length,l=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!r[0]||!o[0])return e.c=[e.e=0],e;for(e.e=l+c,s<a&&(t=r,r=o,o=t,c=s,s=a,a=c),t=new Array(c=s+a);c--;)t[c]=0;for(l=a;l--;){for(a=0,c=s+l;c>l;)a=t[c]+o[l]*r[c-l-1]+a,t[c--]=a%10,a=a/10|0;t[c]=a}for(a?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},_o.toExponential=function(e,t){var n=this,i=n.c[0];if(undefined!==e){if(e!==~~e||e<0||e>1e6)throw Error(mo);for(n=yo(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return wo(n,!0,!!i)},_o.toFixed=function(e,t){var n=this,i=n.c[0];if(undefined!==e){if(e!==~~e||e<0||e>1e6)throw Error(mo);for(e=e+(n=yo(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return wo(n,!1,!!i)},_o.toJSON=_o.toString=function(){var e=this,t=e.constructor;return wo(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},_o.toNumber=function(){var e=Number(wo(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(fo+"Imprecise conversion");return e},_o.toPrecision=function(e,t){var n=this,i=n.constructor,r=n.c[0];if(undefined!==e){if(e!==~~e||e<1||e>1e6)throw Error(go+"precision");for(n=yo(new i(n),e,t);n.c.length<e;)n.c.push(0)}return wo(n,e<=n.e||n.e<=i.NE||n.e>=i.PE,!!r)},_o.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(fo+"valueOf disallowed");return wo(e,e.e<=t.NE||e.e>=t.PE,!0)};var bo,xo,Co,ko,Eo=function e(){function t(n){var i=this;if(!(i instanceof t))return undefined===n?e():new t(n);if(n instanceof t)i.s=n.s,i.e=n.e,i.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict)throw TypeError(go+"number");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,i,r;if(!vo.test(t))throw Error(go+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length);for(r=t.length,i=0;i<r&&"0"==t.charAt(i);)++i;if(i==r)e.c=[e.e=0];else{for(;r>0&&"0"==t.charAt(--r););for(e.e=n-i-1,e.c=[],n=0;i<=r;)e.c[n++]=+t.charAt(i++)}}(i,n)}i.constructor=t}return t.prototype=_o,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();(xo=bo||(bo={})).child=">",xo.descendant=" ",xo.sibling="~",xo.attribute="[]",xo.pseudoClass=":",xo.pseudoElement=":",(ko=Co||(Co={})).visited="visited",ko.active="active",ko.hover="hover";const So={"backdrop-filter":[mi.webkit]};function Io(...e){throw e.length&&console.error(...e),new Error("not reached")}function Oo(...e){throw e.length&&console.error(...e),new Error("not implemented")}const To=Vr("viewModel");class Mo{constructor(e,t,n){this.prevSelection=e,this.nextSelection=t,this.vm=n}merge(e){Io()}isVoid(){return!(this.prevSelection.length&&this.nextSelection.length)}undo(){this.vm.clearSelection();for(const e of this.prevSelection)this.vm.appendSelectionById(e)}redo(){this.vm.clearSelection();for(const e of this.nextSelection)this.vm.appendSelectionById(e)}}const No=Vr("view");var Ao,Ro;(Ro=Ao||(Ao={})).Low="Low",Ro.Medium="Medium",Ro.High="High";const Do=Vr("undoRedoService");function Po(e,t){for(const n of e)if(t(n))return n}Object.freeze([]);class Lo extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function Uo(e){if((t=e)&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]){const t=[];for(const i of e)if(i)try{i.dispose()}catch(n){t.push(n)}if(1===t.length)throw t[0];if(t.length>1)throw new Lo(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e;var t}function Fo(e){const t={dispose:ki((()=>{e()}))};return t}class Bo{constructor(){C(this,"_toDispose",new Set),C(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{Uo(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}C(Bo,"DISABLE_DISPOSED_WARNING",!1);class jo{constructor(){C(this,"_store",new Bo),this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}C(jo,"None",Object.freeze({dispose(){}}));class Vo{constructor(){C(this,"dispose",(()=>{})),C(this,"unset",(()=>{})),C(this,"isset",(()=>!1))}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>void 0!==t,this.dispose=()=>{t&&(t(),t=void 0)},this}}const zo=class{constructor(e){C(this,"element"),C(this,"next"),C(this,"prev"),this.element=e,this.next=zo.Undefined,this.prev=zo.Undefined}};let Ko=zo;C(Ko,"Undefined",new zo(void 0));class Wo{constructor(){C(this,"_first",Ko.Undefined),C(this,"_last",Ko.Undefined),C(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===Ko.Undefined}clear(){this._first=Ko.Undefined,this._last=Ko.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Ko(e);if(this._first===Ko.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Ko.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ko.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ko.Undefined&&e.next!==Ko.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ko.Undefined&&e.next===Ko.Undefined?(this._first=Ko.Undefined,this._last=Ko.Undefined):e.next===Ko.Undefined?(this._last=this._last.prev,this._last.next=Ko.Undefined):e.prev===Ko.Undefined&&(this._first=this._first.next,this._first.prev=Ko.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ko.Undefined;)yield e.element,e=e.next}}let Ho,$o,qo,Yo=!1,Go=!1,Xo="en";const Jo="object"==typeof self?self:"object"==typeof global?global:{};let Qo;void 0!==Jo.vscode&&void 0!==Jo.vscode.process?Qo=Jo.vscode.process:"undefined"!=typeof process&&(Qo=process);const Zo="string"==typeof(null==(e=null==Qo?void 0:Qo.versions)?void 0:e.electron)&&"renderer"===(null==Qo?void 0:Qo.type);if(Zo&&(null==Qo||Qo.sandboxed),"object"!=typeof navigator||Zo)if("object"==typeof Qo){Qo.platform,Qo.platform,Yo="linux"===Qo.platform,Yo&&Qo.env.SNAP&&Qo.env.SNAP_REVISION,Qo.env.CI||Qo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Ho="en",Xo="en";const e=Qo.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];Ho=t.locale,Xo=n||"en",$o=t._translationsConfigFile}catch(f8){}}else console.error("Unable to resolve platform.");else qo=navigator.userAgent,qo.indexOf("Windows"),qo.indexOf("Macintosh"),(qo.indexOf("Macintosh")>=0||qo.indexOf("iPad")>=0||qo.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,Yo=qo.indexOf("Linux")>=0,Go=!0,Ho=navigator.language,Xo=Ho;var es,ts;(ts=es||(es={}))[ts.Web=0]="Web",ts[ts.Mac=1]="Mac",ts[ts.Linux=2]="Linux",ts[ts.Windows=3]="Windows",Go&&Jo.importScripts;const ns=qo,is=Xo;var rs,ss,as,ls;(ss=rs||(rs={})).value=function(){return is},ss.isDefaultVariant=function(){return 2===is.length?"en"===is:is.length>=3&&"e"===is[0]&&"n"===is[1]&&"-"===is[2]},ss.isDefault=function(){return"en"===is},(()=>{if("function"==typeof Jo.postMessage&&!Jo.importScripts){const e=[];Jo.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),Jo.postMessage({vscodeScheduleAsyncWork:i},"*")}}})(),(ls=as||(as={}))[ls.Windows=1]="Windows",ls[ls.Macintosh=2]="Macintosh",ls[ls.Linux=3]="Linux";const cs=!!(ns&&ns.indexOf("Chrome")>=0);ns&&ns.indexOf("Firefox"),!cs&&ns&&ns.indexOf("Safari"),ns&&ns.indexOf("Edg/"),ns&&ns.indexOf("Android");const ds=Jo.performance&&"function"==typeof Jo.performance.now;class us{constructor(e){C(this,"_highResolution"),C(this,"_startTime"),C(this,"_stopTime"),this._highResolution=ds&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new us(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?Jo.performance.now():Date.now()}}const hs=new class{constructor(){C(this,"unexpectedErrorHandler"),C(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function ps(e){(function(e){if(e instanceof fs)return!0;return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message})(e)||hs.onUnexpectedError(e)}class fs extends Error{constructor(){super("Canceled"),this.name=this.message}}var gs;!function(e){function t(e){return(t,n=null,i)=>{let r=!1;const o=e((e=>{if(!r)return o?o.dispose():r=!0,t.call(n,e)}),null,i);return r&&o.dispose(),o}}function n(e){let t;const n=new ws({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}e.None=()=>jo.None,e.once=t,e.map=function(e,t){return n(((n,i=null,r)=>e((e=>n.call(i,t(e))),null,r)))},e.filter=function(e,t){return n(((n,i=null,r)=>e((e=>t(e)&&n.call(i,e)),null,r)))},e.snapshot=n,e.toPromise=function(e){return new Promise((n=>t(e)(n)))}}(gs||(gs={}));const ms=class{constructor(e){C(this,"_name"),C(this,"_stopWatch"),C(this,"_listenerCount",0),C(this,"_invocationCount",0),C(this,"_elapsedOverall",0),this._name=`${e}_${ms._idPool++}`}start(e){this._stopWatch=new us(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let _s=ms;C(_s,"_idPool",0);class vs{constructor(e){this.value=e}static create(){var e;return new vs(null!=(e=(new Error).stack)?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class ys{constructor(e,t,n){C(this,"subscription",new Vo),this.callback=e,this.callbackThis=t,this.stack=n}invoke(e){this.callback.call(this.callbackThis,e)}}class ws{constructor(e){var t;C(this,"_options"),C(this,"_leakageMon"),C(this,"_perfMon"),C(this,"_disposed",!1),C(this,"_event"),C(this,"_deliveryQueue"),C(this,"_listeners"),this._options=e,this._leakageMon=void 0,this._perfMon=(null==(t=this._options)?void 0:t._profName)?new _s(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(),null==(n=null==(t=this._options)?void 0:t.onLastListenerRemove)||n.call(t),null==(i=this._leakageMon)||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,r,o;this._listeners||(this._listeners=new Wo);const s=this._listeners.isEmpty();let a,l;s&&(null==(i=this._options)?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(l=vs.create(),a=this._leakageMon.check(l,this._listeners.size+1));const c=new ys(e,t,l),d=this._listeners.push(c);s&&(null==(r=this._options)?void 0:r.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null==(o=this._options)?void 0:o.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,t);const u=c.subscription.set((()=>{if(a&&a(),!this._disposed&&(d(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}));return n instanceof Bo?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new Wo);for(const t of this._listeners)this._deliveryQueue.push([t,e]);for(null==(t=this._perfMon)||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{e.invoke(t)}catch(f8){ps(f8)}}null==(n=this._perfMon)||n.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}class bs{constructor(){C(this,"_past"),C(this,"_future"),C(this,"locked"),C(this,"versionId"),this._past=[],this._future=[],this.locked=!1,this.versionId=1}test_getPast(){return this._past}test_getFuture(){return this._future}push(e){this._future.length=0,this._past.push(e),this.versionId++}pop(){this._future.length=0,this._past.pop(),this.versionId++}amend(e){if(!this._past.length)throw new Error("400");this._future.length=0;const t=this.getClosestPastElement();if(!t)throw new Error("500");return t.merge(e),t}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}dispose(){this.versionId++}}class xs extends jo{constructor(e=new bs){super(),C(this,"_onUndo",this._register(new ws)),C(this,"onUndo",this._onUndo.event),C(this,"_onRedo",this._register(new ws)),C(this,"onRedo",this._onUndo.event),C(this,"editStack"),this._register(this.editStack=e)}test_getEditStack(){return this.editStack}push(e){this.editStack.push(e)}pop(){this.editStack.pop()}amend(e){return this.editStack.amend(e)}canUndo(){return this.editStack.hasPastElements()}undo(){const e=this.editStack.getClosestPastElement();e&&(this.editStack.moveBackward(e),e.undo(),this._onUndo.fire())}canRedo(){return this.editStack.hasFutureElements()}redo(){const e=this.editStack.getClosestFutureElement();e&&(this.editStack.moveForward(e),e.redo(),this._onRedo.fire())}}var Cs,ks;function Es(e,t){const n=new Eo(e),i=new Eo(t);return n.gt(i)?1:-1}function Ss(e,t){const n=new Eo(e),i=new Eo(t);return n.add(i).toExponential()}function Is(e){return new Eo(e).div(2).toExponential()}(ks=Cs||(Cs={}))[ks.backward=0]="backward",ks[ks.forward=1]="forward",ks[ks.inward=2]="inward",ks[ks.outward=3]="outward",ks[ks.self=4]="self",ks[ks.ancestors=5]="ancestors",ks[ks.descendants=6]="descendants";const Os=(e,t,n,i)=>{const r=e.t(i||n),o=new RegExp(`^${r} (\\d+)?$`),s=t.map((e=>{var t,n;const i=null!=(n=null==(t=e.meta)?void 0:t.label)?n:"";let r="0";if(i){const e=o.exec(i);e&&(r=e[1]?e[1]:"0")}return parseInt(r)}));return`${r} ${Math.max(...s)+1}`};function Ts(){throw new Error("unsupported")}class Ms{constructor(e,t,n,i){this.at=e,this.props=t,this.meta=n,this.i18n=i}do(e){var t,n,i,r;const{ref:o,direction:s}=this.at,a={id:`comp-${ni()}`,props:this.props||{},meta:this.meta||{}},l=Os(this.i18n,e.getValue().nodes,a.meta.componentType,a.meta.subType);if(a.meta.label=null!=(n=null==(t=a.meta)?void 0:t.label)?n:l,s===Cs.inward){const t=e.getChildrenNodesOfId(o);if(a.from=o,t.length){const e=t.sort(((e,t)=>Es(t.order,e.order)));a.order=Is(Ss("1",e[0].order))}else a.order=Is("1")}else{if(s!==Cs.backward&&s!==Cs.forward)throw new Error("unimplemented");{const t=e.getParentNodeOfId(o);if(!t)throw new Error("404");a.from=t.id;const{order:n}=e.getNodeById(o);if(s===Cs.backward){const t=e.getNextSiblingNodeOfId(o),r=null!=(i=null==t?void 0:t.order)?i:"1";a.order=Is(Ss(n,r))}else{const t=e.getPreviousSiblingNodeOfId(o),i=null!=(r=null==t?void 0:t.order)?r:"0";a.order=Is("0"===i?n:Ss(n,i))}}}return e.getValue().nodes.push(a),a}}class Ns{constructor(e){this.at=e}do(e){const{ref:t,direction:n=Cs.self}=this.at,i={[Cs.forward]:this.deleteSibling,[Cs.backward]:this.deleteSibling,[Cs.inward]:this.deleteChildren,[Cs.self]:this.delete,[Cs.outward]:Ts,[Cs.descendants]:Ts,[Cs.ancestors]:Ts}[n];if(!i)throw new Error("unimpleted");return i.call(this,e,t,n)}deleteSibling(e,t,n){const i=e.getNodeById(t);if(!i.from)throw new Error("no parent");const r=e.getChildrenNodesOfId(i.from).sort(((e,t)=>Es(e.order,t.order))),o=r.indexOf(i);if(n===Cs.forward){if(0===o)throw new Error("400");this.delete(e,r[o-1].id)}else{if(n!==Cs.backward)throw new Error("bad arg");if(o===r.length-1)throw new Error("400");this.delete(e,r[o+1].id)}}deleteChildren(e,t){const n=e.getChildrenNodesOfId(t);for(let i=0,r=n.length;i<r;i++)this.delete(e,n[i].id)}delete(e,t){const{nodes:n,styles:i,links:r,triggers:o=[],animations:s=[],interactions:a=[]}=e.getValue();this.deleteChildren(e,t);const l=Mr(n,(e=>e.id===t));if(-1===l)return void console.error("404");for(let d=i.length-1;d>-1;d--){i[d].targetId===t&&Rr(i,d)}for(let d=r.length-1;d>-1;d--){r[d].targetId===t&&Rr(r,d)}const c=[];for(let d=o.length-1;d>-1;d--){const e=o[d];e.targetId===t&&(c.push(e.id),Rr(o,d))}for(let d=s.length-1;d>-1;d--){const e=s[d];(c.includes(e.triggerId)||e.effects.targetId===t)&&Rr(s,d)}for(let d=a.length-1;d>-1;d--){const e=a[d];c.includes(e.triggerId)&&Rr(a,d)}Rr(n,l)}}function As(e,t){const n=[{to:e,ref:t}];for(;n.length;){const{to:e,ref:t}=n.pop();if(!si(t)||!si(e))throw new Error("500");for(const i of di(e))si(t[i])&&si(e[i])?n.push({to:e[i],ref:t[i]}):t[i]!==e[i]&&(void 0===e[i]?Reflect.deleteProperty(t,i):t[i]=e[i])}}class Rs{constructor(e,t){this.at=e,this.props=t}do(e){const t=Po(e.getValue().nodes,(e=>e.id===this.at.ref));if(!t)throw new Error("404");As(this.props,t)}}class Ds{constructor(e,t){this.at=e,this.meta=t}do(e){const t=Po(e.getValue().nodes,(e=>e.id===this.at.ref));if(!t)throw new Error("404");As(this.meta,t)}}class Ps{constructor(e,t,n){this.id=e,this.newParent=t,this.referenceNodeId=n}do(e){const t=e.getChildrenNodesOfId(this.newParent).sort(((e,t)=>Es(e.order,t.order))),n=e.getNodeById(this.id);if(!n)throw new Error("404");if(n.from=this.newParent,ri(this.referenceNodeId))t.length?n.order=Is(Ss(t[t.length-1].order,"1")):n.order="0.5";else{const i=e.getNodeById(this.referenceNodeId),r=t.indexOf(i);if(0===r)n.order=Is(i.order);else{const e=t[r-1];n.order=Is(Ss(e.order,i.order))}}}}class Ls{constructor(e,t){this.id=e,this.beforeSiblingNodeId=t}do(e){const t=e.getParentNodeOfId(this.id),n=e.getChildrenNodesOfId(t.id).sort(((e,t)=>Es(e.order,t.order))),i=e.getNodeById(this.id);if(!i)throw new Error("404");if(i.from!==t.id)throw new Error("400");if(ri(this.beforeSiblingNodeId))n.length?i.order=Is(Ss(n[n.length-1].order,"1")):i.order="0.5";else{const t=e.getNodeById(this.beforeSiblingNodeId),r=n.indexOf(t);if(0===r)i.order=Is(t.order);else{const e=n[r-1];e.id!==this.id&&(i.order=Is(Ss(e.order,t.order)))}}}}class Us{constructor(e,t,n=!0){this.ids=e,this.width=t,this.deep=n}do(e){return this.clone(e)}clone(e){const t=this.cloneNodes(e),n=t.map((e=>e.id)),i=this.cloneStyles(e,n),r=this.cloneLinks(e,n),o=this.cloneTriggers(e,n),s=this.cloneAnimations(e,n,o);return{nodes:t,styles:i,links:r,roots:this.ids,triggers:o,animations:s}}cloneNodes(e){const t=this.deep,n=[];return this.ids.forEach((function i(r){const o=e.getNodeById(r);if(o&&n.push(o),t){const t=e.getChildrenNodesOfId(r);t.length>0&&t.forEach((e=>{i(e.id)}))}})),li(n)}cloneStyles(e,t){const n=[],{styles:i}=e.getValue();return t.forEach((e=>{i.filter((t=>t.targetId===e)).forEach((e=>{const t=li(e);Object.assign(t,{id:`cloned-style-${e.id}`}),n.push(t)}))})),n}cloneLinks(e,t){const{links:n}=e.getValue();return li(n.filter((e=>t.includes(e.targetId))))}cloneTriggers(e,t){const{triggers:n}=e.getValue();return li(n.filter((e=>t.includes(e.targetId))))}cloneAnimations(e,t,n){const i=n.map((e=>e.id)),{animations:r}=e.getValue();return li(r.filter((e=>i.includes(e.triggerId))))}}class Fs{constructor(e,t,n,i){this.targetId=e,this.href=t,this.target=n,this.rel=i}do(e){const t=e.getValue().links,n=Po(t,(e=>e.targetId===this.targetId));n?Object.assign(n,{href:this.href,target:this.target,rel:this.rel}):t.push({id:ni(),href:this.href,target:this.target,targetId:this.targetId,rel:this.rel})}}class Bs{constructor(e){this.targetId=e}do(e){const t=e.getValue().links,n=Mr(t,(e=>e.targetId===this.targetId));-1!==n&&Rr(t,n)}}var js,Vs,zs,Ks;function Ws(e){return si(e)&&oi(e.id)&&oi(e.targetId)&&oi(e.href)&&oi(e.target)}function Hs(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}(Vs=js||(js={}))._self="_self",Vs._blank="_blank",Vs._parent="_parent",Vs._top="_top",(Ks=zs||(zs={}))[""]="",Ks.nofollow="nofollow";const $s=Hs("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function qs(e){return!!e||""===e}function Ys(e){if(da(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=fa(i)?Js(i):Ys(i);if(r)for(const e in r)t[e]=r[e]}return t}return fa(e)||ma(e)?e:void 0}const Gs=/;(?![^(]*\))/g,Xs=/:(.+)/;function Js(e){const t={};return e.split(Gs).forEach((e=>{if(e){const n=e.split(Xs);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function Qs(e){let t="";if(fa(e))t=e;else if(da(e))for(let n=0;n<e.length;n++){const i=Qs(e[n]);i&&(t+=i+" ")}else if(ma(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Zs={},ea=[],ta=()=>{},na=()=>!1,ia=/^on[^a-z]/,ra=e=>ia.test(e),oa=e=>e.startsWith("onUpdate:"),sa=Object.assign,aa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},la=Object.prototype.hasOwnProperty,ca=(e,t)=>la.call(e,t),da=Array.isArray,ua=e=>"[object Map]"===ya(e),ha=e=>"[object Set]"===ya(e),pa=e=>"function"==typeof e,fa=e=>"string"==typeof e,ga=e=>"symbol"==typeof e,ma=e=>null!==e&&"object"==typeof e,_a=e=>ma(e)&&pa(e.then)&&pa(e.catch),va=Object.prototype.toString,ya=e=>va.call(e),wa=e=>ya(e).slice(8,-1),ba=e=>"[object Object]"===ya(e),xa=e=>fa(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,Ca=Hs(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ka=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ea=/-(\w)/g,Sa=ka((e=>e.replace(Ea,((e,t)=>t?t.toUpperCase():"")))),Ia=/\B([A-Z])/g,Oa=ka((e=>e.replace(Ia,"-$1").toLowerCase())),Ta=ka((e=>e.charAt(0).toUpperCase()+e.slice(1))),Ma=ka((e=>e?`on${Ta(e)}`:"")),Na=(e,t)=>!Object.is(e,t),Aa=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ra=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Da=e=>{const t=parseFloat(e);return isNaN(t)?e:t};var Pa,La,Ua,Fa;function Ba(e,...t){console.warn(`[Vue warn] ${e}`,...t)}(La=Pa||(Pa={})).GET="get",La.HAS="has",La.ITERATE="iterate",(Fa=Ua||(Ua={})).SET="set",Fa.ADD="add",Fa.DELETE="delete",Fa.CLEAR="clear";const ja=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Va=e=>(e.w&Ha)>0,za=e=>(e.n&Ha)>0,Ka=new WeakMap;let Wa=0,Ha=1;const $a=[];let qa;const Ya=Symbol("iterate"),Ga=Symbol("Map key iterate");class Xa{constructor(e,t=null,n){C(this,"active",!0),C(this,"deps",[]),C(this,"computed"),C(this,"allowRecurse"),C(this,"onStop"),C(this,"onTrack"),C(this,"onTrigger"),this.fn=e,this.scheduler=t,function(e,t){(t=t||void 0)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!$a.includes(this))try{return $a.push(qa=this),Za.push(Qa),Qa=!0,Ha=1<<++Wa,Wa<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ha})(this):Ja(this),this.fn()}finally{Wa<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Va(r)&&!za(r)?r.delete(e):t[n++]=r,r.w&=~Ha,r.n&=~Ha}t.length=n}})(this),Ha=1<<--Wa,el(),$a.pop();const e=$a.length;qa=e>0?$a[e-1]:void 0}}stop(){this.active&&(Ja(this),this.onStop&&this.onStop(),this.active=!1)}}function Ja(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Qa=!0;const Za=[];function el(){const e=Za.pop();Qa=void 0===e||e}function tl(e,t,n){if(!Qa||void 0===qa)return;let i=Ka.get(e);i||Ka.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=ja());!function(e,t){let n=!1;Wa<=30?za(e)||(e.n|=Ha,n=!Va(e)):n=!e.has(qa);n&&(e.add(qa),qa.deps.push(e),qa.onTrack&&qa.onTrack(Object.assign({effect:qa},t)))}(r,{effect:qa,target:e,type:t,key:n})}function nl(e,t,n,i,r,o){const s=Ka.get(e);if(!s)return;let a=[];if(t===Ua.CLEAR)a=[...s.values()];else if("length"===n&&da(e))s.forEach(((e,t)=>{("length"===t||t>=i)&&a.push(e)}));else switch(void 0!==n&&a.push(s.get(n)),t){case Ua.ADD:da(e)?xa(n)&&a.push(s.get("length")):(a.push(s.get(Ya)),ua(e)&&a.push(s.get(Ga)));break;case Ua.DELETE:da(e)?a.push(s.get("length")):(a.push(s.get(Ya)),ua(e)&&a.push(s.get(Ga)));break;case Ua.SET:ua(e)&&a.push(s.get(Ya))}const l={target:e,type:t,key:n,newValue:i,oldValue:r,oldTarget:o};if(1===a.length)a[0]&&il(a[0],l);else{const e=[];for(const t of a)t&&e.push(...t);il(ja(e),l)}}function il(e,t){for(const n of da(e)?e:[...e])(n!==qa||n.allowRecurse)&&(pa(n.onTrigger)&&n.onTrigger(sa({effect:n},t)),n.scheduler?n.scheduler():n.run())}function rl(e){return Boolean(e&&!0===e.__v_isRef)}const ol=Hs("__proto__,__v_isRef,__isVue"),sl=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(ga)),al=ll();function ll(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=_l(this);for(let t=0,r=this.length;t<r;t++)tl(n,Pa.GET,t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(_l)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){Za.push(Qa),Qa=!1;const n=_l(this)[t].apply(this,e);return el(),n}})),e}const cl={get:function(e,t,n){if(t===dl.IS_REACTIVE)return!0;if(t===dl.RAW&&n===hl.get(e))return e;if(da(e)&&ca(al,t))return Reflect.get(al,t,n);const i=Reflect.get(e,t,n);if(ga(t)?sl.has(t):ol(t))return i;if(tl(e,Pa.GET,t),rl(i))throw new Error("500");if(ma(i)){const e=gl(i);return function(e,t,n){if(1!==Cl)return;vl.set(e,{key:t,parent:n})}(e,t,n),e}return i},set:function(e,t,n,i){if(!kl())return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0;let r=e[t];if(n=_l(n),r=_l(r),!da(e)&&rl(r)&&!rl(n))throw new Error("500");const o=da(e)&&xa(t)?Number(t)<e.length:ca(e,t),s=Reflect.set(e,t,n,i);return e===_l(i)&&(o?Na(n,r)&&(nl(e,Ua.SET,t,n,r),xl(i,Ua.SET,t,n,r)):(nl(e,Ua.ADD,t,n),xl(i,Ua.ADD,t,n))),s},deleteProperty:function(e,t){if(!kl())return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0;const n=ca(e,t),i=e[t],r=Reflect.deleteProperty(e,t);return r&&n&&(nl(e,Ua.DELETE,t,void 0,i),xl(e,Ua.DELETE,t,void 0,i)),r},has:function(e,t){const n=Reflect.has(e,t);return ga(t)&&sl.has(t)||tl(e,Pa.HAS,t),n},ownKeys:function(e){return tl(e,Pa.ITERATE,da(e)?"length":Ya),Reflect.ownKeys(e)}};var dl,ul;(ul=dl||(dl={})).SKIP="__v_skip",ul.IS_REACTIVE="__v_isReactive",ul.IS_READONLY="__v_isReadonly",ul.RAW="__v_raw";const hl=new WeakMap;var pl,fl;function gl(e){return e&&e[dl.IS_READONLY]?e:function(e,t,n,i){if(!ma(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e[dl.RAW]&&(!t||!e[dl.IS_REACTIVE]))return e;const r=i.get(e);if(r)return r;const o=(s=e,s[dl.SKIP]||!Object.isExtensible(s)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(wa(s)));var s;if(0===o)return e;if(2===o)throw new Error("500");const a=new Proxy(e,n);return i.set(e,a),a}(e,!1,cl,hl)}function ml(e){return!(!e||!e[dl.IS_REACTIVE])}function _l(e){const t=e&&e[dl.RAW];return t?_l(t):e}(fl=pl||(pl={}))[fl.INVALID=0]="INVALID",fl[fl.COMMON=1]="COMMON",fl[fl.COLLECTION=2]="COLLECTION";const vl=new WeakMap;var yl,wl;(wl=yl||(yl={}))[wl.none=0]="none",wl[wl.update=1]="update",wl[wl.undoRedo=2]="undoRedo";const bl=[];function xl(e,t,n,i,r){if(1!==Cl)return;if(ga(n))throw new Error("500");let o;if(!ml(e)){const t=hl.get(e);if(!t)throw new Error("500");e=t}const s=function(e){const t=[];for(;e;){const n=vl.get(e);if(!n)break;const{key:i,parent:r}=n;t.unshift(i),e=r}return[e,t]}(e),[a,l]=s;if(l.push(n),i=El(i),r=El(r),t===Ua.SET)o={op:"replace",path:l,root:a,newValue:i,oldValue:r};else if(t===Ua.ADD)o={op:"add",path:l,root:a,newValue:i,oldValue:r};else{if(t===Ua.CLEAR)throw new Error("500");if(t!==Ua.DELETE)throw new Error("500");o={op:"remove",path:l,root:a,newValue:i,oldValue:r}}bl.push(o)}let Cl=0;function kl(){return 0!==Cl}function El(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=da(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=El(e[n]):t[n]=e[n]})),t}const Sl=Vr("editor");function Il(e,t,n,i=null,r,o){const s=[],a=new Map;n.forEach((e=>{a.set(e.id,e)}));const l=t.filter((t=>t.targetId===e)).filter((e=>!r||!o||e.selectorType===r&&e.subSelector===o));for(const c of l){const e=c.breakpointId;if(ri(e))s.push(c);else if(null!==i){const t=a.get(e);let n;ri(t.maxWidth)||(n=t.maxWidth>=i),n&&s.push(c)}}return s}const Ol=Vr("i18nService");class Tl{constructor(e,t,n){this.type=e,this.targetId=t,this.params=n}do(e){const t=e.getValue().triggers,n=w({id:ni(),type:this.type},this.params);return this.targetId&&Reflect.set(n,"targetId",this.targetId),t.push(n),n}}class Ml{constructor(e,t){this.id=e,this.params=t}do(e){const t=e.getValue().triggers.find((e=>e.id===this.id));if(!t)throw new Error("404");Object.assign(t,this.params)}}class Nl{constructor(e){this.id=e}do(e){const{triggers:t=[],interactions:n=[],animations:i=[]}=e.getValue(),r=Mr(t,(e=>e.id===this.id));if(-1!==r){for(let e=i.length-1;e>-1;e--){i[e].triggerId===this.id&&Rr(i,e)}for(let e=n.length-1;e>-1;e--){n[e].triggerId===this.id&&Rr(n,e)}Rr(t,r)}}}class Al{constructor(e,t,n){this.triggerId=e,this.effects=t,this.timeline=n}do(e){const t=e.getValue().animations,n={id:ni(),triggerId:this.triggerId,effects:this.effects};return this.timeline&&Object.assign(n,{timeline:this.timeline}),t.push(n),n}}class Rl{constructor(e,t){this.id=e,this.effects=t}do(e){const t=e.getValue().animations.find((e=>e.id===this.id));if(!t)throw new Error("404");Reflect.set(t,"effects",this.effects)}}class Dl{constructor(e,t){this.id=e,this.timeline=t}do(e){const t=e.getValue().animations.find((e=>e.id===this.id));if(!t)throw new Error("404");this.timeline?Reflect.set(t,"timeline",this.timeline):Reflect.deleteProperty(t,"timeline")}}class Pl{constructor(e){this.id=e}do(e){const t=e.getValue().animations,n=Mr(t,(e=>e.id===this.id));-1!==n&&Rr(t,n)}}class Ll{constructor(e,t,n,i){this.triggerType=e,this.eventType=t,this.detail=n,this.targetId=i}do(e){const{interactions:t}=e.getValue(),n=e.addTrigger(this.triggerType,this.targetId,{}),i={id:ni(),triggerId:n.id,eventType:this.eventType,detail:this.detail};return t.push(i),i}}class Ul{constructor(e){this.id=e}do(e){const{interactions:t}=e.getValue(),n=Mr(t,(e=>e.id===this.id)),i=t[n];-1!==n&&Rr(t,n),e.removeTrigger(i.triggerId)}}class Fl{constructor(e,t){this.id=e,this.params=t}do(e){const{interactions:t}=e.getValue(),n=t[Mr(t,(e=>e.id===this.id))];n&&Object.assign(n,this.params)}}class Bl{constructor(e,t,n,i){C(this,"changes"),C(this,"versionId"),C(this,"isUndoing"),C(this,"isRedoing"),this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i}merge(e){const t=[].concat(this.changes).concat(e.changes),n=e.versionId,i=this.isUndoing||e.isUndoing,r=this.isRedoing||e.isRedoing;return new Bl(t,n,i,r)}}class jl{constructor(e){C(this,"beforeVersionId"),C(this,"afterVersionId"),C(this,"beforeCursorState"),C(this,"afterCursorState"),C(this,"patches",[]),this.model=e;const t=e.getAlternativeVersionId();this.beforeVersionId=t,this.afterVersionId=t}test_getPatches(){return this.patches}isVoid(){return!this.patches.length}merge(e){this.patches=this.patches.concat(e.patches)}append(e,t,n){e.length>0&&(this.patches=this.patches.concat(e)),this.afterVersionId=t,this.afterCursorState=n}redo(){this.model._applyRedo(this.patches.slice(),this.afterVersionId,this.afterCursorState)}undo(){this.model._applyUndo(this.patches.slice(),this.beforeVersionId,this.beforeCursorState)}}var Vl=Object.defineProperty,zl=Object.getOwnPropertyDescriptor,Kl=(e,t)=>(n,i)=>t(n,i,e);class Wl extends jo{constructor(){super(...arguments),C(this,"updateStackDepth",0),C(this,"patches",[]),C(this,"updateMode",Kr.None)}beginUpdate(){this.updateStackDepth++}endUpdate(){this.updateStackDepth--}isUpdating(){return this.updateStackDepth>0}hasUnCommittdChanges(){return this.patches.length>0}clearUnCommittdChanges(){this.patches.length=0}}let Hl,$l=(t=class extends jo{constructor(e,t,n,i){super(),C(this,"id",$l.MODEL_ID++),C(this,"_isDisposed",!1),C(this,"_isDisposing",!1),C(this,"_versionId",1),C(this,"_alternativeVersionId",1),C(this,"_value"),C(this,"_onUpdated",this._register(new ws)),C(this,"_onWillDispose",this._register(new ws)),C(this,"_eventEmitter",this._register(new Yl)),C(this,"ctx"),C(this,"_cloneFragment",null),C(this,"_isUndoing"),C(this,"_isRedoing"),C(this,"_undoRedoElementOfAdd"),this.instantiationService=n,this.i18n=i,n.store(zr,this),this._value=gl(ql(e)),this.ctx=new Wl,this._isUndoing=!1,this._isRedoing=!1}get onWillDispose(){return this._onWillDispose.event}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t)))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._isDisposed=!0,super.dispose(),this._isDisposing=!1,this._value=null}get onUpdated(){return this._onUpdated.event}get updateMode(){return this.ctx.updateMode}isUpdating(){return this.ctx.isUpdating()}getValue(){return this._value}replaceModel(e){this._value=gl(ql(e)),this.ctx=new Wl}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getVersionId(){return this._assertNotDisposed(),this._versionId}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e){this._isDisposing||this._eventEmitter.fire(e)}_applyUndo(e,t,n){const i=e.reverse().map((e=>function(e){const{op:t,newValue:n,oldValue:i}=e;switch(t){case"replace":return b(w({},e),{newValue:i,oldValue:n});case"add":return b(w({},e),{op:"remove",oldValue:n,newValue:i});case"remove":return b(w({},e),{op:"add",oldValue:n,newValue:i});default:throw new Error("500")}}(e)));this._applyUndoRedoEdits(i,!0,!1,t,n)}_applyRedo(e,t,n){this._applyUndoRedoEdits(e,!1,!0,t,n)}_applyUndoRedoEdits(e,t,n,i,r){try{this._eventEmitter.beginDeferredEmit(),this._isUndoing=t,this._isRedoing=n,this.applyEdits(e),this._overwriteAlternativeVersionId(i)}catch(f8){console.error(f8)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r)}}applyEdits(e){try{return this._eventEmitter.beginDeferredEmit(),this._doApplyEdits(e)}catch(f8){console.error(f8)}finally{this._eventEmitter.endDeferredEmit(),this._onUpdated.fire()}}_doApplyEdits(e){var t;t=this._value,Cl=2,e.forEach((e=>{const{path:n,op:i,newValue:r,root:o}=e;let s=t;for(let t=0;t<n.length-1;t++){const e=n[t];if((ma(s)||da)&&("__proto__"===e||"constructor"===e))throw new Error("500");if("function"==typeof s&&"prototype"===e)throw new Error("500");if(s=Reflect.get(s,e),"object"!=typeof s)throw new Error("500")}const a=n[n.length-1];switch(i){case"replace":case"add":return Reflect.set(s,a,r);case"remove":return da(s)?(s.splice(parseInt(a.toString(),10),1),!0):Reflect.deleteProperty(s,a);default:throw new Error("500")}})),Cl=0,this._emitContentChangedEvent(new Bl(e,this.getVersionId(),this._isUndoing,this._isRedoing))}changeWithoutHistory(e){this.doUpdate(e)}internal_transform(e){if(this.updateMode===Kr.Add&&this.internal_commitAndMerge(),this.ctx.updateMode===Kr.None)this.ctx.updateMode=Kr.Transform;else if(this.ctx.updateMode===Kr.Transform)throw new Error("400");const t=this.doUpdate(e);if(this.ctx.updateMode=Kr.None,t){const e=new jl(this);return this._increaseVersionId(),this._onUpdated.fire(),e.append(t,this.getVersionId(),[]),e}}doUpdate(e){try{this.ctx.clearUnCommittdChanges(),this._eventEmitter.beginDeferredEmit(),this.ctx.beginUpdate();const t=function(e){Cl=1,e(),Cl=0;const t=bl.slice();return bl.length=0,t}((()=>{try{e(this)}catch(f8){console.error(f8)}}));this.ctx.endUpdate();for(let e=0,n=t.length;e<n;e++)this.ctx.patches.push(t[e]);return this.ctx.hasUnCommittdChanges()?(this._emitContentChangedEvent(new Bl(t,this.getVersionId(),this._isUndoing,this._isRedoing)),this.ctx.patches.slice()):null}catch(f8){}finally{this.ctx.clearUnCommittdChanges(),this._eventEmitter.endDeferredEmit()}}internal_add(e){if(this.ctx.updateMode===Kr.None)this.ctx.updateMode=Kr.Add;else if(this.ctx.updateMode===Kr.Transform)throw new Error("400");let t=!1;this._undoRedoElementOfAdd&&(this._undoRedoElementOfAdd.undo(),t=!0,this._undoRedoElementOfAdd=null);const n=this.doUpdate(e);let i;if(n){if(this._undoRedoElementOfAdd)throw new Error("500");{const e=new jl(this);this._undoRedoElementOfAdd=e,this._onUpdated.fire(),e.append(n,this.getVersionId(),[]),i=e}}return{shouldPop:t,record:i}}internal_commitAndMerge(){const e=this._undoRedoElementOfAdd;this._undoRedoElementOfAdd=null,e&&(this._increaseVersionId(),e.append([],this.getVersionId(),[])),this._onUpdated.fire(),this.ctx.updateMode=Kr.None}internal_fork(){if(this.ctx.isUpdating())throw new Error("400");this.updateMode===Kr.Add&&this.internal_commitAndMerge()}internal_checkout(){const e=!!this._undoRedoElementOfAdd&&!this._undoRedoElementOfAdd.isVoid();return e&&(this._undoRedoElementOfAdd.undo(),this._undoRedoElementOfAdd=null),e}_updateContextGuard(){if(!this.ctx.isUpdating())throw new Error("method should not be called outside transform()")}getNodeById(e){const t=this.getValue().nodes.filter((t=>t.id===e));if(0===t.length)return null;if(t.length>1)throw new Error("500");return t[0]}getParentNodeOfId(e){const t=this.getNodeById(e);return this.getNodeById(t.from)}getPreviousSiblingNodeOfId(e){const t=this.getParentNodeOfId(e);if(!t)throw new Error("404");const n=this.getChildrenNodesOfId(t.id);if(n.length<=1)return null;const i=n.findIndex((t=>t.id===e));return n[i-1]||null}getNextSiblingNodeOfId(e){const t=this.getParentNodeOfId(e);if(!t)throw new Error("404");const n=this.getChildrenNodesOfId(t.id);if(n.length<=1)return null;const i=n.findIndex((t=>t.id===e));return n[i+1]||null}getChildrenNodesOfId(e){return this.getValue().nodes.filter((t=>t.from===e)).sort(((e,t)=>Es(e.order,t.order)))}getAncestorNodesOfId(e){const t=[];let n=this.getParentNodeOfId(e);for(;n;)t.unshift(n),n=this.getParentNodeOfId(n.id);return t}isAncestorNodeOfId(e,t){return this.getAncestorNodesOfId(t).some((t=>t.id===e))}addNode(e,t={},n={}){this._updateContextGuard();return new Ms(li(e),li(t),li(n),this.i18n).do(this)}getClonedFragment(){return this._cloneFragment}setClonedFragment(e){this._cloneFragment=e}cloneFragment(e,t=null,n=!0){return new Us(e,t,n).do(this)}removeNode(e){this._updateContextGuard();new Ns(e).do(this)}removeNodes(e){this._updateContextGuard();for(const t of e){new Ns({ref:t,direction:Cs.self}).do(this)}}reparentNode(e,t,n=null){this._updateContextGuard();new Ps(e,t,n).do(this)}reorderNode(e,t=null){this._updateContextGuard();new Ls(e,t).do(this)}queryNodes(e){const{nodes:t}=this.getValue(),n=[];for(const i of t)e(i)&&n.push(i);return n}updateNodeById(e,t){this._updateContextGuard();new Rs({ref:e,direction:Cs.self},{props:li(t)}).do(this)}updateNodeMetaById(e,t){this._updateContextGuard();new Ds({ref:e,direction:Cs.self},{meta:li(t)}).do(this)}updateStyle(e,t,n=null,i,r){this._updateContextGuard();new Ir(e,li(t),n,i,r).do(this)}removeStyle(e,t,n=null){this._updateContextGuard();new Or(e,li(t),n).do(this)}updateBpStyles(e,t,n){let i=null;n&&(i=n.minWidth),this.updateStyle(e,t,i)}updateAllBpStyles(e,t,n=!0){const{breakpoints:i}=this.getValue(),r=li(t);i.forEach((i=>{this.removeStyle(e,n?null:t,i.minWidth)})),this.updateBpStyles(e,r,null)}getChildrenGridAreaInfo(e){const t=this.getChildrenNodesOfId(e),n=this.getMatchedStyle(e),{rows:i,columns:r,rowsTemplate:o,columnsTemplate:s}=(e=>{if(!e["grid-template-rows"]||!e["grid-template-columns"])throw new Error("404");const t=Ki(e["grid-template-rows"]);return{rows:t.length,columns:1,rowsTemplate:t,columnsTemplate:Ki(e["grid-template-columns"])}})(n.attrs);return{rows:i,columns:r,orders:t.map((e=>{const{id:t}=e,n=this.getMatchedStyle(t),i=n.getAttr("display"),r="grid"===i||"none"===i;return{id:t,gridArea:r?Cr(n.attrs):null,changed:!1,isGrid:r}})).filter((e=>e.isGrid&&e.gridArea)).sort(((e,t)=>{const{gridArea:n}=e,{gridArea:i}=t;return n.rowStart>i.rowStart||n.rowStart===i.rowStart&&n.columnStart>i.columnEnd?1:-1})),rowsTemplate:o,columnsTemplate:s}}insertGridNode(e,t,n,i){this._updateContextGuard();new Tr(e,t,n,i).do(this)}reorderGridNode(e,t,n){this._updateContextGuard();new Tr(e,t,n,Er.reorder).do(this)}removeGridNode(e,t){this._updateContextGuard();new Tr(e,null,t,Er.delete).do(this)}internal_getMatchedStyles(e,t=null,n,i){const{styles:r,breakpoints:o}=this.getValue();return Il(e,r,o,t,n,i)}internal_getMatchedBreakpoint(e=null){if("number"!=typeof e)return null;const{breakpoints:t}=this.getValue();for(const n of t){let t=!0;if(ri(n.minWidth)||(t=t&&n.minWidth<=e),ri(n.maxWidth)||(t=t&&n.maxWidth>=e),t)return n}return null}internal_getMatchedBreakpointById(e){return this.getValue().breakpoints.find((t=>t.id===e))}getMatchedStyle(e,t=null){return new qr(this.internal_getMatchedStyles(e,t))}getStyleBySelector(e,t,n,i){return new qr(this.internal_getMatchedStyles(e,i,t,n))}updateLink(e,t,n,i=zs.nofollow){this._updateContextGuard();new Fs(e,t,n,i).do(this)}removeLink(e){this._updateContextGuard();new Bs(e).do(this)}getLink(e){return this.getValue().links.find((t=>t.targetId===e))}addAnimation(e,t,n){this._updateContextGuard();return new Al(e,t,n).do(this)}updateAnimationEffects(e,t){this._updateContextGuard();new Rl(e,t).do(this)}updateAnimationTimeline(e,t){this._updateContextGuard();new Dl(e,t).do(this)}removeAnimation(e){this._updateContextGuard();new Pl(e).do(this)}addTrigger(e,t,n){this._updateContextGuard();return new Tl(e,t,n).do(this)}updateTrigger(e,t){this._updateContextGuard();new Ml(e,t).do(this)}removeTrigger(e){this._updateContextGuard();new Nl(e).do(this)}updateMeta(e){this._value.meta=li(e)}addInteraction(e,t,n,i){return this._updateContextGuard(),new Ll(e,t,n,i).do(this)}removeInteraction(e){return this._updateContextGuard(),new Ul(e).do(this)}updateInteraction(e,t){return this._updateContextGuard(),new Fl(e,t).do(this)}},C(t,"MODEL_ID",0),t);function ql(e){return!e.triggers&&(e.triggers=[]),!e.animations&&(e.animations=[]),!e.interactions&&(e.interactions=[]),e.fontfaces||(e.fontfaces=[]),e}$l=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?zl(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Vl(t,n,o),o})([Kl(2,Br),Kl(3,Ol)],$l);class Yl extends jo{constructor(){super(),C(this,"_fastEmitter",this._register(new ws)),C(this,"fastEvent",this._fastEmitter.event),C(this,"_slowEmitter",this._register(new ws)),C(this,"slowEvent",this._slowEmitter.event),C(this,"_deferredCnt"),C(this,"_deferredEvent"),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){const e=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}const Gl=[];class Xl{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Hl&&(this.parent=Hl,this.index=(Hl.scopes||(Hl.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Gl.push(this),Hl=this)}off(){this.active&&(Gl.pop(),Hl=Gl[Gl.length-1])}stop(e){if(this.active){if(this.effects.forEach((e=>e.stop())),this.cleanups.forEach((e=>e())),this.scopes&&this.scopes.forEach((e=>e.stop(!0))),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}const Jl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Ql=e=>(e.w&nc)>0,Zl=e=>(e.n&nc)>0,ec=new WeakMap;let tc=0,nc=1;const ic=[];let rc;const oc=Symbol(""),sc=Symbol("");class ac{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],function(e,t){(t=t||Hl)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!ic.includes(this))try{return ic.push(rc=this),dc.push(cc),cc=!0,nc=1<<++tc,tc<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=nc})(this):lc(this),this.fn()}finally{tc<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Ql(r)&&!Zl(r)?r.delete(e):t[n++]=r,r.w&=~nc,r.n&=~nc}t.length=n}})(this),nc=1<<--tc,hc(),ic.pop();const e=ic.length;rc=e>0?ic[e-1]:void 0}}stop(){this.active&&(lc(this),this.onStop&&this.onStop(),this.active=!1)}}function lc(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let cc=!0;const dc=[];function uc(){dc.push(cc),cc=!1}function hc(){const e=dc.pop();cc=void 0===e||e}function pc(e,t,n){if(!fc())return;let i=ec.get(e);i||ec.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=Jl()),gc(r)}function fc(){return cc&&void 0!==rc}function gc(e,t){let n=!1;tc<=30?Zl(e)||(e.n|=nc,n=!Ql(e)):n=!e.has(rc),n&&(e.add(rc),rc.deps.push(e))}function mc(e,t,n,i,r,o){const s=ec.get(e);if(!s)return;let a=[];if("clear"===t)a=[...s.values()];else if("length"===n&&da(e))s.forEach(((e,t)=>{("length"===t||t>=i)&&a.push(e)}));else switch(void 0!==n&&a.push(s.get(n)),t){case"add":da(e)?xa(n)&&a.push(s.get("length")):(a.push(s.get(oc)),ua(e)&&a.push(s.get(sc)));break;case"delete":da(e)||(a.push(s.get(oc)),ua(e)&&a.push(s.get(sc)));break;case"set":ua(e)&&a.push(s.get(oc))}if(1===a.length)a[0]&&_c(a[0]);else{const e=[];for(const t of a)t&&e.push(...t);_c(Jl(e))}}function _c(e,t){for(const n of da(e)?e:[...e])(n!==rc||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const vc=Hs("__proto__,__v_isRef,__isVue"),yc=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(ga)),wc=Ec(),bc=Ec(!1,!0),xc=Ec(!0),Cc=kc();function kc(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=cd(this);for(let t=0,r=this.length;t<r;t++)pc(n,0,t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(cd)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){uc();const n=cd(this)[t].apply(this,e);return hc(),n}})),e}function Ec(e=!1,t=!1){return function(n,i,r){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&r===(e?t?nd:td:t?ed:Zc).get(n))return n;const o=da(n);if(!e&&o&&ca(Cc,i))return Reflect.get(Cc,i,r);const s=Reflect.get(n,i,r);if(ga(i)?yc.has(i):vc(i))return s;if(e||pc(n,0,i),t)return s;if(fd(s)){return!o||!xa(i)?s.value:s}return ma(s)?e?rd(s):id(s):s}}function Sc(e=!1){return function(t,n,i,r){let o=t[n];if(!e&&(i=cd(i),o=cd(o),!da(t)&&fd(o)&&!fd(i)))return o.value=i,!0;const s=da(t)&&xa(n)?Number(n)<t.length:ca(t,n),a=Reflect.set(t,n,i,r);return t===cd(r)&&(s?Na(i,o)&&mc(t,"set",n,i):mc(t,"add",n,i)),a}}const Ic={get:wc,set:Sc(),deleteProperty:function(e,t){const n=ca(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&mc(e,"delete",t,void 0),i},has:function(e,t){const n=Reflect.has(e,t);return ga(t)&&yc.has(t)||pc(e,0,t),n},ownKeys:function(e){return pc(e,0,da(e)?"length":oc),Reflect.ownKeys(e)}},Oc={get:xc,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Tc=sa({},Ic,{get:bc,set:Sc(!0)}),Mc=e=>ma(e)?id(e):e,Nc=e=>ma(e)?rd(e):e,Ac=e=>e,Rc=e=>Reflect.getPrototypeOf(e);function Dc(e,t,n=!1,i=!1){const r=cd(e=e.__v_raw),o=cd(t);t!==o&&!n&&pc(r,0,t),!n&&pc(r,0,o);const{has:s}=Rc(r),a=i?Ac:n?Nc:Mc;return s.call(r,t)?a(e.get(t)):s.call(r,o)?a(e.get(o)):void(e!==r&&e.get(t))}function Pc(e,t=!1){const n=this.__v_raw,i=cd(n),r=cd(e);return e!==r&&!t&&pc(i,0,e),!t&&pc(i,0,r),e===r?n.has(e):n.has(e)||n.has(r)}function Lc(e,t=!1){return e=e.__v_raw,!t&&pc(cd(e),0,oc),Reflect.get(e,"size",e)}function Uc(e){e=cd(e);const t=cd(this);return Rc(t).has.call(t,e)||(t.add(e),mc(t,"add",e,e)),this}function Fc(e,t){t=cd(t);const n=cd(this),{has:i,get:r}=Rc(n);let o=i.call(n,e);o||(e=cd(e),o=i.call(n,e));const s=r.call(n,e);return n.set(e,t),o?Na(t,s)&&mc(n,"set",e,t):mc(n,"add",e,t),this}function Bc(e){const t=cd(this),{has:n,get:i}=Rc(t);let r=n.call(t,e);r||(e=cd(e),r=n.call(t,e)),i&&i.call(t,e);const o=t.delete(e);return r&&mc(t,"delete",e,void 0),o}function jc(){const e=cd(this),t=0!==e.size,n=e.clear();return t&&mc(e,"clear",void 0,void 0),n}function Vc(e,t){return function(n,i){const r=this,o=r.__v_raw,s=cd(o),a=t?Ac:e?Nc:Mc;return!e&&pc(s,0,oc),o.forEach(((e,t)=>n.call(i,a(e),a(t),r)))}}function zc(e,t,n){return function(...i){const r=this.__v_raw,o=cd(r),s=ua(o),a="entries"===e||e===Symbol.iterator&&s,l="keys"===e&&s,c=r[e](...i),d=n?Ac:t?Nc:Mc;return!t&&pc(o,0,l?sc:oc),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function Kc(e){return function(...t){return"delete"!==e&&this}}function Wc(){const e={get(e){return Dc(this,e)},get size(){return Lc(this)},has:Pc,add:Uc,set:Fc,delete:Bc,clear:jc,forEach:Vc(!1,!1)},t={get(e){return Dc(this,e,!1,!0)},get size(){return Lc(this)},has:Pc,add:Uc,set:Fc,delete:Bc,clear:jc,forEach:Vc(!1,!0)},n={get(e){return Dc(this,e,!0)},get size(){return Lc(this,!0)},has(e){return Pc.call(this,e,!0)},add:Kc("add"),set:Kc("set"),delete:Kc("delete"),clear:Kc("clear"),forEach:Vc(!0,!1)},i={get(e){return Dc(this,e,!0,!0)},get size(){return Lc(this,!0)},has(e){return Pc.call(this,e,!0)},add:Kc("add"),set:Kc("set"),delete:Kc("delete"),clear:Kc("clear"),forEach:Vc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=zc(r,!1,!1),n[r]=zc(r,!0,!1),t[r]=zc(r,!1,!0),i[r]=zc(r,!0,!0)})),[e,n,t,i]}const[Hc,$c,qc,Yc]=Wc();function Gc(e,t){const n=t?e?Yc:qc:e?$c:Hc;return(t,i,r)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(ca(n,i)&&i in t?n:t,i,r)}const Xc={get:Gc(!1,!1)},Jc={get:Gc(!1,!0)},Qc={get:Gc(!0,!1)},Zc=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap;function id(e){return e&&e.__v_isReadonly?e:od(e,!1,Ic,Xc,Zc)}function rd(e){return od(e,!0,Oc,Qc,td)}function od(e,t,n,i,r){if(!ma(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const s=(a=e).__v_skip||!Object.isExtensible(a)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(wa(a));var a;if(0===s)return e;const l=new Proxy(e,2===s?i:n);return r.set(e,l),l}function sd(e){return ad(e)?sd(e.__v_raw):!(!e||!e.__v_isReactive)}function ad(e){return!(!e||!e.__v_isReadonly)}function ld(e){return sd(e)||ad(e)}function cd(e){const t=e&&e.__v_raw;return t?cd(t):e}function dd(e){return Ra(e,"__v_skip",!0),e}function ud(e){fc()&&((e=cd(e)).dep||(e.dep=Jl()),gc(e.dep))}function hd(e,t){(e=cd(e)).dep&&_c(e.dep)}const pd=e=>ma(e)?id(e):e;function fd(e){return Boolean(e&&!0===e.__v_isRef)}function gd(e){return function(e,t=!1){if(fd(e))return e;return new md(e,t)}(e)}class md{constructor(e,t=!1){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:cd(e),this._value=t?e:pd(e)}get value(){return ud(this),this._value}set value(e){e=this._shallow?e:cd(e),Na(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:pd(e),hd(this))}}const _d={get:(e,t,n)=>{return fd(i=Reflect.get(e,t,n))?i.value:i;var i},set:(e,t,n,i)=>{const r=e[t];return fd(r)&&!fd(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function vd(e){return sd(e)?e:new Proxy(e,_d)}class yd{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new ac(e,(()=>{this._dirty||(this._dirty=!0,hd(this))})),this.__v_isReadonly=n}get value(){const e=cd(this);return ud(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function wd(e,t){let n,i;pa(e)?(n=e,i=ta):(n=e.get,i=e.set);return new yd(n,i,pa(e)||!e.set)}Promise.resolve();function bd(e,t,...n){const i=e.vnode.props||Zs;let r=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in i){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:t,trim:o}=i[e]||Zs;o?r=n.map((e=>e.trim())):t&&(r=n.map(Da))}let a,l=i[a=Ma(t)]||i[a=Ma(Sa(t))];!l&&o&&(l=i[a=Ma(Oa(t))]),l&&Eh(l,e,6,r);const c=i[a+"Once"];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,Eh(c,e,6,r)}}function xd(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(void 0!==r)return r;const o=e.emits;let s={},a=!1;if(!pa(e)){const i=e=>{const n=xd(e,t,!0);n&&(a=!0,sa(s,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return o||a?(da(o)?o.forEach((e=>s[e]=null)):sa(s,o),i.set(e,s),s):(i.set(e,null),null)}function Cd(e,t){return!(!e||!ra(t))&&(t=t.slice(2).replace(/Once$/,""),ca(e,t[0].toLowerCase()+t.slice(1))||ca(e,Oa(t))||ca(e,t))}let kd=null,Ed=null;function Sd(e){const t=kd;return kd=e,Ed=e&&e.type.__scopeId||null,t}function Id(e,t=kd,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&Ku(-1);const r=Sd(t),o=e(...n);return Sd(r),i._d&&Ku(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Od(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[s],slots:a,attrs:l,emit:c,render:d,renderCache:u,data:h,setupState:p,ctx:f,inheritAttrs:g}=e;let m;const _=Sd(e);try{let e;if(4&n.shapeFlag){const t=r||i;m=ih(d.call(t,t,u,o,p,h,f)),e=l}else{const n=t;0,m=ih(n.length>1?n(o,{attrs:l,slots:a,emit:c}):n(o,null)),e=t.props?l:Td(l)}let _=m;if(e&&!1!==g){const t=Object.keys(e),{shapeFlag:n}=_;t.length&&7&n&&(s&&t.some(oa)&&(e=Md(e,s)),_=eh(_,e))}0,n.dirs&&(_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),m=_}catch(v){Bu.length=0,Sh(v,e,1),m=Zu(Uu)}return Sd(_),m}const Td=e=>{let t;for(const n in e)("class"===n||"style"===n||ra(n))&&((t||(t={}))[n]=e[n]);return t},Md=(e,t)=>{const n={};for(const i in e)oa(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function Nd(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!Cd(n,o))return!0}return!1}function Ad(e,t,n=!1){const i=gh||kd;if(i){const r=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&pa(t)?t.call(i.proxy):t}}function Rd(e){return pa(e)?{setup:e,name:e.name}:e}const Dd=e=>!!e.type.__asyncLoader,Pd=e=>e.type.__isKeepAlive;function Ld(e,t){Fd(e,"a",t)}function Ud(e,t){Fd(e,"da",t)}function Fd(e,t,n=gh){const i=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}e()});if(jd(t,i,n),n){let e=n.parent;for(;e&&e.parent;)Pd(e.parent.vnode)&&Bd(i,t,n,e),e=e.parent}}function Bd(e,t,n,i){const r=jd(t,e,i,!0);qd((()=>{aa(i[t],r)}),n)}function jd(e,t,n=gh,i=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;uc(),mh(n);const r=Eh(t,n,e,i);return _h(),hc(),r});return i?r.unshift(o):r.push(o),o}}const Vd=e=>(t,n=gh)=>(!yh||"sp"===e)&&jd(e,t,n),zd=Vd("bm"),Kd=Vd("m"),Wd=Vd("bu"),Hd=Vd("u"),$d=Vd("bum"),qd=Vd("um"),Yd=Vd("sp"),Gd=Vd("rtg"),Xd=Vd("rtc");function Jd(e,t=gh){jd("ec",e,t)}let Qd=!0;function Zd(e){const t=nu(e),n=e.proxy,i=e.ctx;Qd=!1,t.beforeCreate&&eu(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:s,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:p,updated:f,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:v,destroyed:y,unmounted:w,render:b,renderTracked:x,renderTriggered:C,errorCaptured:k,serverPrefetch:E,expose:S,inheritAttrs:I,components:O,directives:T,filters:M}=t;if(c&&function(e,t,n=ta,i=!1){da(e)&&(e=su(e));for(const r in e){const n=e[r];let o;o=ma(n)?"default"in n?Ad(n.from||r,n.default,!0):Ad(n.from||r):Ad(n),fd(o)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[r]=o}}(c,i,null,e.appContext.config.unwrapInjectedRef),s)for(const A in s){const e=s[A];pa(e)&&(i[A]=e.bind(n))}if(r){const t=r.call(n,n);ma(t)&&(e.data=id(t))}if(Qd=!0,o)for(const A in o){const e=o[A],t=wd({get:pa(e)?e.bind(n,n):pa(e.get)?e.get.bind(n,n):ta,set:!pa(e)&&pa(e.set)?e.set.bind(n):ta});Object.defineProperty(i,A,{enumerable:!0,configurable:!0,get:()=>t.value,set:e=>t.value=e})}if(a)for(const A in a)tu(a[A],i,n,A);if(l){const e=pa(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{!function(e,t){if(gh){let n=gh.provides;const i=gh.parent&&gh.parent.provides;i===n&&(n=gh.provides=Object.create(i)),n[e]=t}}(t,e[t])}))}function N(e,t){da(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(d&&eu(d,e,"c"),N(zd,u),N(Kd,h),N(Wd,p),N(Hd,f),N(Ld,g),N(Ud,m),N(Jd,k),N(Xd,x),N(Gd,C),N($d,v),N(qd,w),N(Yd,E),da(S))if(S.length){const t=e.exposed||(e.exposed={});S.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});b&&e.render===ta&&(e.render=b),null!=I&&(e.inheritAttrs=I),O&&(e.components=O),T&&(e.directives=T)}function eu(e,t,n){Eh(da(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function tu(e,t,n,i){const r=i.includes(".")?Qh(n,i):()=>n[i];if(fa(e)){const n=t[e];pa(n)&&Gh(r,n)}else if(pa(e))Gh(r,e.bind(n));else if(ma(e))if(da(e))e.forEach((e=>tu(e,t,n,i)));else{const i=pa(e.handler)?e.handler.bind(n):t[e.handler];pa(i)&&Gh(r,i,e)}}function nu(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:r.length||n||i?(l={},r.length&&r.forEach((e=>iu(l,e,s,!0))),iu(l,t,s)):l=t,o.set(t,l),l}function iu(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&iu(e,o,n,!0),r&&r.forEach((t=>iu(e,t,n,!0)));for(const s in t)if(i&&"expose"===s);else{const i=ru[s]||n&&n[s];e[s]=i?i(e[s],t[s]):t[s]}return e}const ru={data:ou,props:lu,emits:lu,methods:lu,computed:lu,beforeCreate:au,created:au,beforeMount:au,mounted:au,beforeUpdate:au,updated:au,beforeDestroy:au,destroyed:au,activated:au,deactivated:au,errorCaptured:au,serverPrefetch:au,components:lu,directives:lu,watch:function(e,t){if(!e)return t;if(!t)return e;const n=sa(Object.create(null),e);for(const i in t)n[i]=au(e[i],t[i]);return n},provide:ou,inject:function(e,t){return lu(su(e),su(t))}};function ou(e,t){return t?e?function(){return sa(pa(e)?e.call(this,this):e,pa(t)?t.call(this,this):t)}:t:e}function su(e){if(da(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function au(e,t){return e?[...new Set([].concat(e,t))]:t}function lu(e,t){return e?sa(sa(Object.create(null),e),t):t}function cu(e,t,n,i=!1){const r={},o={};Ra(o,Gu,1),e.propsDefaults=Object.create(null),du(e,t,r,o);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);n?e.props=i?r:od(r,!1,Tc,Jc,ed):e.type.props?e.props=r:e.props=o,e.attrs=o}function du(e,t,n,i){const[r,o]=e.propsOptions;let s,a=!1;if(t)for(let l in t){if(Ca(l))continue;const c=t[l];let d;r&&ca(r,d=Sa(l))?o&&o.includes(d)?(s||(s={}))[d]=c:n[d]=c:Cd(e.emitsOptions,l)||c!==i[l]&&(i[l]=c,a=!0)}if(o){const t=cd(n),i=s||Zs;for(let s=0;s<o.length;s++){const a=o[s];n[a]=uu(r,t,a,i[a],e,!ca(i,a))}}return a}function uu(e,t,n,i,r,o){const s=e[n];if(null!=s){const e=ca(s,"default");if(e&&void 0===i){const e=s.default;if(s.type!==Function&&pa(e)){const{propsDefaults:o}=r;n in o?i=o[n]:(mh(r),i=o[n]=e.call(null,t),_h())}else i=e}s[0]&&(o&&!e?i=!1:!s[1]||""!==i&&i!==Oa(n)||(i=!0))}return i}function hu(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const o=e.props,s={},a=[];let l=!1;if(!pa(e)){const i=e=>{l=!0;const[n,i]=hu(e,t,!0);sa(s,n),i&&a.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!l)return i.set(e,ea),ea;if(da(o))for(let d=0;d<o.length;d++){const e=Sa(o[d]);pu(e)&&(s[e]=Zs)}else if(o)for(const d in o){const e=Sa(d);if(pu(e)){const t=o[d],n=s[e]=da(t)||pa(t)?{type:t}:t;if(n){const t=mu(Boolean,n.type),i=mu(String,n.type);n[0]=t>-1,n[1]=i<0||t<i,(t>-1||ca(n,"default"))&&a.push(e)}}}const c=[s,a];return i.set(e,c),c}function pu(e){return"$"!==e[0]}function fu(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function gu(e,t){return fu(e)===fu(t)}function mu(e,t){return da(t)?t.findIndex((t=>gu(t,e))):pa(t)&&gu(t,e)?0:-1}const _u=e=>"_"===e[0]||"$stable"===e,vu=e=>da(e)?e.map(ih):[ih(e)],yu=(e,t,n)=>{const i=Id(((...e)=>vu(t(...e))),n);return i._c=!1,i},wu=(e,t,n)=>{const i=e._ctx;for(const r in e){if(_u(r))continue;const n=e[r];if(pa(n))t[r]=yu(0,n,i);else if(null!=n){const e=vu(n);t[r]=()=>e}}},bu=(e,t)=>{const n=vu(t);e.slots.default=()=>n};function xu(e,t,n,i){const r=e.dirs,o=t&&t.dirs;for(let s=0;s<r.length;s++){const a=r[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(uc(),Eh(l,n,8,[e.el,a,e,t]),hc())}}function Cu(){return{app:null,config:{isNativeTag:na,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ku=0;function Eu(e,t){return function(n,i=null){null==i||ma(i)||(i=null);const r=Cu(),o=new Set;let s=!1;const a=r.app={_uid:ku++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:tp,get config(){return r.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&pa(e.install)?(o.add(e),e.install(a,...t)):pa(e)&&(o.add(e),e(a,...t))),a),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),a),component:(e,t)=>t?(r.components[e]=t,a):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,a):r.directives[e],mount(o,l,c){if(!s){const d=Zu(n,i);return d.appContext=r,l&&t?t(d,o):e(d,o,c),s=!0,a._container=o,o.__vue_app__=a,d.component.proxy}},unmount(){s&&(e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,a)};return a}}const Su=function(e,t){t&&t.pendingBranch?da(e)?t.effects.push(...e):t.effects.push(e):Kh(e,Ph,Dh,Lh)};function Iu(e){return function(e,t){const{insert:n,remove:i,patchProp:r,createElement:o,createText:s,createComment:a,setText:l,setElementText:c,parentNode:d,nextSibling:u,setScopeId:h=ta,cloneNode:p,insertStaticContent:f}=e,g=(e,t,n,i=null,r=null,o=null,s=!1,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Yu(e,t)&&(i=K(e),F(e,r,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:d,shapeFlag:u}=t;switch(c){case Lu:m(e,t,n,i);break;case Uu:_(e,t,n,i);break;case Fu:null==e&&v(t,n,i,s);break;case Pu:O(e,t,n,i,r,o,s,a,l);break;default:1&u?b(e,t,n,i,r,o,s,a,l):6&u?T(e,t,n,i,r,o,s,a,l):(64&u||128&u)&&c.process(e,t,n,i,r,o,s,a,l,H)}null!=d&&r&&Ou(d,e&&e.ref,o,t||e,!t)},m=(e,t,i,r)=>{if(null==e)n(t.el=s(t.children),i,r);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},_=(e,t,i,r)=>{null==e?n(t.el=a(t.children||""),i,r):t.el=e.el},v=(e,t,n,i)=>{[e.el,e.anchor]=f(e.children,t,n,i)},y=({el:e,anchor:t},i,r)=>{let o;for(;e&&e!==t;)o=u(e),n(e,i,r),e=o;n(t,i,r)},w=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=u(e),i(e),e=n;i(t)},b=(e,t,n,i,r,o,s,a,l)=>{s=s||"svg"===t.type,null==e?x(t,n,i,r,o,s,a,l):E(e,t,r,o,s,a,l)},x=(e,t,i,s,a,l,d,u)=>{let h,f;const{type:g,props:m,shapeFlag:_,transition:v,patchFlag:y,dirs:w}=e;if(e.el&&void 0!==p&&-1===y)h=e.el=p(e.el);else{if(h=e.el=o(e.type,l,m&&m.is,m),8&_?c(h,e.children):16&_&&k(e.children,h,null,s,a,l&&"foreignObject"!==g,d,u),w&&xu(e,null,s,"created"),m){for(const t in m)"value"===t||Ca(t)||r(h,t,null,m[t],l,e.children,s,a,z);"value"in m&&r(h,"value",null,m.value),(f=m.onVnodeBeforeMount)&&Tu(f,s,e)}C(h,e,e.scopeId,d,s)}w&&xu(e,null,s,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(h),n(h,t,i),((f=m&&m.onVnodeMounted)||b||w)&&Su((()=>{f&&Tu(f,s,e),b&&v.enter(h),w&&xu(e,null,s,"mounted")}),a)},C=(e,t,n,i,r)=>{if(n&&h(e,n),i)for(let o=0;o<i.length;o++)h(e,i[o]);if(r){if(t===r.subTree){const t=r.vnode;C(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},k=(e,t,n,i,r,o,s,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?rh(e[c]):ih(e[c]);g(null,l,t,n,i,r,o,s,a)}},E=(e,t,n,i,o,s,a)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:u,dirs:h}=t;d|=16&e.patchFlag;const p=e.props||Zs,f=t.props||Zs;let g;(g=f.onVnodeBeforeUpdate)&&Tu(g,n,t,e),h&&xu(t,e,n,"beforeUpdate");const m=o&&"foreignObject"!==t.type;if(u?S(e.dynamicChildren,u,l,n,i,m,s):a||D(e,t,l,null,n,i,m,s,!1),d>0){if(16&d)I(l,t,p,f,n,i,o);else if(2&d&&p.class!==f.class&&r(l,"class",null,f.class,o),4&d&&r(l,"style",p.style,f.style,o),8&d){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const a=s[t],c=p[a],d=f[a];d===c&&"value"!==a||r(l,a,c,d,o,e.children,n,i,z)}}1&d&&e.children!==t.children&&c(l,t.children)}else a||null!=u||I(l,t,p,f,n,i,o);((g=f.onVnodeUpdated)||h)&&Su((()=>{g&&Tu(g,n,t,e),h&&xu(t,e,n,"updated")}),i)},S=(e,t,n,i,r,o,s)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===Pu||!Yu(l,c)||70&l.shapeFlag)?d(l.el):n;g(l,c,u,null,i,r,o,s,!0)}},I=(e,t,n,i,o,s,a)=>{if(n!==i){for(const l in i){if(Ca(l))continue;const c=i[l],d=n[l];c!==d&&"value"!==l&&r(e,l,d,c,a,t.children,o,s,z)}if(n!==Zs)for(const l in n)Ca(l)||l in i||r(e,l,n[l],null,a,t.children,o,s,z);"value"in i&&r(e,"value",n.value,i.value)}},O=(e,t,i,r,o,a,l,c,d)=>{const u=t.el=e?e.el:s(""),h=t.anchor=e?e.anchor:s("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(c=c?c.concat(g):g),null==e?(n(u,i,r),n(h,i,r),k(t.children,i,h,o,a,l,c,d)):p>0&&64&p&&f&&e.dynamicChildren?(S(e.dynamicChildren,f,i,o,a,l,c),(null!=t.key||o&&t===o.subTree)&&Mu(e,t,!0)):D(e,t,i,h,o,a,l,c,d)},T=(e,t,n,i,r,o,s,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,s,l):M(t,n,i,r,o,s,l):N(e,t,l)},M=(e,t,n,i,r,o,s)=>{const a=e.component=function(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||ph,o={uid:fh++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,update:null,scope:new Xl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hu(i,r),emitsOptions:xd(i,r),emit:null,emitted:null,propsDefaults:Zs,inheritAttrs:i.inheritAttrs,ctx:Zs,data:Zs,props:Zs,attrs:Zs,slots:Zs,refs:Zs,setupState:Zs,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=t?t.root:o,o.emit=bd.bind(null,o),e.ce&&e.ce(o);return o}(e,i,r);if(Pd(e)&&(a.ctx.renderer=H),function(e,t=!1){yh=t;const{props:n,children:i}=e.vnode,r=vh(e);cu(e,n,r,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=cd(t),Ra(t,"_",n)):wu(t,e.slots={})}else e.slots={},t&&bu(e,t);Ra(e.slots,Gu,1)})(e,i);const o=r?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=dd(new Proxy(e.ctx,hh));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?function(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(pc(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}(e):null;mh(e),uc();const r=kh(i,e,0,[e.props,n]);if(hc(),_h(),_a(r)){if(r.then(_h,_h),t)return r.then((t=>{wh(e,t)})).catch((t=>{Sh(t,e,0)}));e.asyncDep=r}else wh(e,r)}else bh(e)}(e,t):void 0;yh=!1}(a),a.asyncDep){if(r&&r.registerDep(a,A),!e.el){const e=a.subTree=Zu(Uu);_(null,e,t,n)}}else A(a,e,t,n,r,o,s)},N=(e,t,n)=>{const i=t.component=e.component;if(function(e,t,n){const{props:i,children:r,component:o}=e,{props:s,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!a||a&&a.$stable)||i!==s&&(i?!s||Nd(i,s,c):!!s);if(1024&l)return!0;if(16&l)return i?Nd(i,s,c):!!s;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==i[n]&&!Cd(c,n))return!0}}return!1}(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void R(i,t,n);i.next=t,function(e){const t=Th.indexOf(e);t>Mh&&Th.splice(t,1)}(i.update),i.update()}else t.component=e.component,t.el=e.el,i.vnode=t},A=(e,t,n,i,r,o,s)=>{const a=new ac((()=>{if(e.isMounted){let t,{next:n,bu:i,u:l,parent:c,vnode:u}=e,h=n;a.allowRecurse=!1,n?(n.el=u.el,R(e,n,s)):n=u,i&&Aa(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Tu(t,c,n,u),a.allowRecurse=!0;const p=Od(e),f=e.subTree;e.subTree=p,g(f,p,d(f.el),K(f),e,r,o),n.el=p.el,null===h&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),l&&Su(l,r),(t=n.props&&n.props.onVnodeUpdated)&&Su((()=>Tu(t,c,n,u)),r)}else{let s;const{el:l,props:c}=t,{bm:d,m:u,parent:h}=e,p=Dd(t);if(a.allowRecurse=!1,d&&Aa(d),!p&&(s=c&&c.onVnodeBeforeMount)&&Tu(s,h,t),a.allowRecurse=!0,l&&q){const n=()=>{e.subTree=Od(e),q(l,e.subTree,e,r,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const s=e.subTree=Od(e);g(null,s,n,i,e,r,o),t.el=s.el}if(u&&Su(u,r),!p&&(s=c&&c.onVnodeMounted)){const e=t;Su((()=>Tu(s,h,e)),r)}256&t.shapeFlag&&e.a&&Su(e.a,r),e.isMounted=!0,t=n=i=null}}),(()=>Vh(e.update)),e.scope),l=e.update=a.run.bind(a);l.id=e.uid,a.allowRecurse=l.allowRecurse=!0,l()},R=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,i){const{props:r,attrs:o,vnode:{patchFlag:s}}=e,a=cd(r),[l]=e.propsOptions;let c=!1;if(!(i||s>0)||16&s){let i;du(e,t,r,o)&&(c=!0);for(const o in a)t&&(ca(t,o)||(i=Oa(o))!==o&&ca(t,i))||(l?!n||void 0===n[o]&&void 0===n[i]||(r[o]=uu(l,a,o,void 0,e,!0)):delete r[o]);if(o!==a)for(const e in o)t&&ca(t,e)||(delete o[e],c=!0)}else if(8&s){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];const d=t[s];if(l)if(ca(o,s))d!==o[s]&&(o[s]=d,c=!0);else{const t=Sa(s);r[t]=uu(l,a,t,d,e,!1)}else d!==o[s]&&(o[s]=d,c=!0)}}c&&mc(e,"set","$attrs")}(e,t.props,i,n),((e,t,n)=>{const{vnode:i,slots:r}=e;let o=!0,s=Zs;if(32&i.shapeFlag){const e=t._;e?n&&1===e?o=!1:(sa(r,t),n||1!==e||delete r._):(o=!t.$stable,wu(t,r)),s=t}else t&&(bu(e,t),s={default:1});if(o)for(const a in r)_u(a)||a in s||delete r[a]})(e,t.children,n),uc(),Wh(void 0,e.update),hc()},D=(e,t,n,i,r,o,s,a,l=!1)=>{const d=e&&e.children,u=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void L(d,h,n,i,r,o,s,a,l);if(256&p)return void P(d,h,n,i,r,o,s,a,l)}8&f?(16&u&&z(d,r,o),h!==d&&c(n,h)):16&u?16&f?L(d,h,n,i,r,o,s,a,l):z(d,r,o,!0):(8&u&&c(n,""),16&f&&k(h,n,i,r,o,s,a,l))},P=(e,t,n,i,r,o,s,a,l)=>{t=t||ea;const c=(e=e||ea).length,d=t.length,u=Math.min(c,d);let h;for(h=0;h<u;h++){const i=t[h]=l?rh(t[h]):ih(t[h]);g(e[h],i,n,null,r,o,s,a,l)}c>d?z(e,r,o,!0,!1,u):k(t,n,i,r,o,s,a,l,u)},L=(e,t,n,i,r,o,s,a,l)=>{let c=0;const d=t.length;let u=e.length-1,h=d-1;for(;c<=u&&c<=h;){const i=e[c],d=t[c]=l?rh(t[c]):ih(t[c]);if(!Yu(i,d))break;g(i,d,n,null,r,o,s,a,l),c++}for(;c<=u&&c<=h;){const i=e[u],c=t[h]=l?rh(t[h]):ih(t[h]);if(!Yu(i,c))break;g(i,c,n,null,r,o,s,a,l),u--,h--}if(c>u){if(c<=h){const e=h+1,u=e<d?t[e].el:i;for(;c<=h;)g(null,t[c]=l?rh(t[c]):ih(t[c]),n,u,r,o,s,a,l),c++}}else if(c>h)for(;c<=u;)F(e[c],r,o,!0),c++;else{const p=c,f=c,m=new Map;for(c=f;c<=h;c++){const e=t[c]=l?rh(t[c]):ih(t[c]);null!=e.key&&m.set(e.key,c)}let _,v=0;const y=h-f+1;let w=!1,b=0;const x=new Array(y);for(c=0;c<y;c++)x[c]=0;for(c=p;c<=u;c++){const i=e[c];if(v>=y){F(i,r,o,!0);continue}let d;if(null!=i.key)d=m.get(i.key);else for(_=f;_<=h;_++)if(0===x[_-f]&&Yu(i,t[_])){d=_;break}void 0===d?F(i,r,o,!0):(x[d-f]=c+1,d>=b?b=d:w=!0,g(i,t[d],n,null,r,o,s,a,l),v++)}const C=w?function(e){const t=e.slice(),n=[0];let i,r,o,s,a;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<l?o=a+1:s=a;l<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=t[s];return n}(x):ea;for(_=C.length-1,c=y-1;c>=0;c--){const e=f+c,u=t[e],h=e+1<d?t[e+1].el:i;0===x[c]?g(null,u,n,h,r,o,s,a,l):w&&(_<0||c!==C[_]?U(u,n,h,2):_--)}}},U=(e,t,i,r,o=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:d}=e;if(6&d)return void U(e.component.subTree,t,i,r);if(128&d)return void e.suspense.move(t,i,r);if(64&d)return void a.move(e,t,i,H);if(a===Pu){n(s,t,i);for(let e=0;e<c.length;e++)U(c[e],t,i,r);return void n(e.anchor,t,i)}if(a===Fu)return void y(e,t,i);if(2!==r&&1&d&&l)if(0===r)l.beforeEnter(s),n(s,t,i),Su((()=>l.enter(s)),o);else{const{leave:e,delayLeave:r,afterLeave:o}=l,a=()=>n(s,t,i),c=()=>{e(s,(()=>{a(),o&&o()}))};r?r(s,a,c):c()}else n(s,t,i)},F=(e,t,n,i=!1,r=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:d,patchFlag:u,dirs:h}=e;if(null!=a&&Ou(a,null,n,e,!0),256&d)return void t.ctx.deactivate(e);const p=1&d&&h,f=!Dd(e);let g;if(f&&(g=s&&s.onVnodeBeforeUnmount)&&Tu(g,t,e),6&d)V(e.component,n,i);else{if(128&d)return void e.suspense.unmount(n,i);p&&xu(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,n,r,H,i):c&&(o!==Pu||u>0&&64&u)?z(c,t,n,!1,!0):(o===Pu&&384&u||!r&&16&d)&&z(l,t,n),i&&B(e)}(f&&(g=s&&s.onVnodeUnmounted)||p)&&Su((()=>{g&&Tu(g,t,e),p&&xu(e,null,t,"unmounted")}),n)},B=e=>{const{type:t,el:n,anchor:r,transition:o}=e;if(t===Pu)return void j(n,r);if(t===Fu)return void w(e);const s=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:i}=o,r=()=>t(n,s);i?i(e.el,s,r):r()}else s()},j=(e,t)=>{let n;for(;e!==t;)n=u(e),i(e),e=n;i(t)},V=(e,t,n)=>{const{bum:i,scope:r,update:o,subTree:s,um:a}=e;i&&Aa(i),r.stop(),o&&(o.active=!1,F(s,e,t,n)),a&&Su(a,t),Su((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},z=(e,t,n,i=!1,r=!1,o=0)=>{for(let s=o;s<e.length;s++)F(e[s],t,n,i,r)},K=e=>6&e.shapeFlag?K(e.component.subTree):128&e.shapeFlag?e.suspense.next():u(e.anchor||e.el),W=(e,t,n)=>{null==e?t._vnode&&F(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),Hh(),t._vnode=e},H={p:g,um:F,m:U,r:B,mt:M,mc:k,pc:D,pbc:S,n:K,o:e};let $,q;t&&([$,q]=t(H));return{render:W,hydrate:$,createApp:Eu(W,$)}}(e)}function Ou(e,t,n,i,r=!1){if(da(e))return void e.forEach(((e,o)=>Ou(e,t&&(da(t)?t[o]:t),n,i,r)));if(Dd(i)&&!r)return;const o=4&i.shapeFlag?xh(i.component)||i.component.proxy:i.el,s=r?null:o,{i:a,r:l}=e,c=t&&t.r,d=a.refs===Zs?a.refs={}:a.refs,u=a.setupState;if(null!=c&&c!==l&&(fa(c)?(d[c]=null,ca(u,c)&&(u[c]=null)):fd(c)&&(c.value=null)),fa(l)){const e=()=>{d[l]=s,ca(u,l)&&(u[l]=s)};s?(e.id=-1,Su(e,n)):e()}else if(fd(l)){const e=()=>{l.value=s};s?(e.id=-1,Su(e,n)):e()}else pa(l)&&kh(l,a,12,[s,d])}function Tu(e,t,n,i=null){Eh(e,t,7,[n,i])}function Mu(e,t,n=!1){const i=e.children,r=t.children;if(da(i)&&da(r))for(let o=0;o<i.length;o++){const e=i[o];let t=r[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[o]=rh(r[o]),t.el=e.el),n||Mu(e,t))}}function Nu(e,t){return Ru("components",e,!0,t)||e}const Au=Symbol();function Ru(e,t,n=!0,i=!1){const r=kd||gh;if(r){const n=r.type;if("components"===e){const e=Ch(n);if(e&&(e===t||e===Sa(t)||e===Ta(Sa(t))))return n}const o=Du(r[e]||n[e],t)||Du(r.appContext[e],t);return!o&&i?n:o}}function Du(e,t){return e&&(e[t]||e[Sa(t)]||e[Ta(Sa(t))])}const Pu=Symbol(void 0),Lu=Symbol(void 0),Uu=Symbol(void 0),Fu=Symbol(void 0),Bu=[];let ju=null;function Vu(e=!1){Bu.push(ju=e?null:[])}let zu=1;function Ku(e){zu+=e}function Wu(e){return e.dynamicChildren=zu>0?ju||ea:null,Bu.pop(),ju=Bu[Bu.length-1]||null,zu>0&&ju&&ju.push(e),e}function Hu(e,t,n,i,r,o){return Wu(Qu(e,t,n,i,r,o,!0))}function $u(e,t,n,i,r){return Wu(Zu(e,t,n,i,r,!0))}function qu(e){return!!e&&!0===e.__v_isVNode}function Yu(e,t){return e.type===t.type&&e.key===t.key}const Gu="__vInternal",Xu=({key:e})=>null!=e?e:null,Ju=({ref:e})=>null!=e?fa(e)||fd(e)||pa(e)?{i:kd,r:e}:e:null;function Qu(e,t=null,n=null,i=0,r=null,o=(e===Pu?0:1),s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Xu(t),ref:t&&Ju(t),scopeId:Ed,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(oh(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=fa(n)?8:16),zu>0&&!s&&ju&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&ju.push(l),l}const Zu=function(e,t=null,n=null,i=0,r=null,o=!1){e&&e!==Au||(e=Uu);if(qu(e)){const i=eh(e,t,!0);return n&&oh(i,n),i}s=e,pa(s)&&"__vccOpts"in s&&(e=e.__vccOpts);var s;if(t){t=function(e){return e?ld(e)||Gu in e?sa({},e):e:null}(t);let{class:e,style:n}=t;e&&!fa(e)&&(t.class=Qs(e)),ma(n)&&(ld(n)&&!da(n)&&(n=sa({},n)),t.style=Ys(n))}const a=fa(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:ma(e)?4:pa(e)?2:0;return Qu(e,t,n,i,r,a,o,!0)};function eh(e,t,n=!1){const{props:i,ref:r,patchFlag:o,children:s}=e,a=t?sh(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Xu(a),ref:t&&t.ref?n&&r?da(r)?r.concat(Ju(t)):[r,Ju(t)]:Ju(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pu?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&eh(e.ssContent),ssFallback:e.ssFallback&&eh(e.ssFallback),el:e.el,anchor:e.anchor}}function th(e=" ",t=0){return Zu(Lu,null,e,t)}function nh(e="",t=!1){return t?(Vu(),$u(Uu,null,e)):Zu(Uu,null,e)}function ih(e){return null==e||"boolean"==typeof e?Zu(Uu):da(e)?Zu(Pu,null,e.slice()):"object"==typeof e?rh(e):Zu(Lu,null,String(e))}function rh(e){return null===e.el||e.memo?e:eh(e)}function oh(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(da(t))n=16;else if("object"==typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),oh(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||Gu in t?3===i&&kd&&(1===kd.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=kd}}else pa(t)?(t={default:t,_ctx:kd},n=32):(t=String(t),64&i?(n=16,t=[th(t)]):n=8);e.children=t,e.shapeFlag|=n}function sh(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=Qs([t.class,i.class]));else if("style"===e)t.style=Ys([t.style,i.style]);else if(ra(e)){const n=t[e],r=i[e];n!==r&&(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=i[e])}return t}function ah(e,t,n,i){let r;const o=n&&n[i];if(da(e)||fa(e)){r=new Array(e.length);for(let n=0,i=e.length;n<i;n++)r[n]=t(e[n],n,void 0,o&&o[n])}else if("number"==typeof e){r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,o&&o[n])}else if(ma(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,o&&o[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const s=n[i];r[i]=t(e[s],s,i,o&&o[i])}}else r=[];return n&&(n[i]=r),r}function lh(e,t,n={},i,r){if(kd.isCE)return Zu("slot","default"===t?null:{name:t},i&&i());let o=e[t];o&&o._c&&(o._d=!1),Vu();const s=o&&ch(o(n)),a=$u(Pu,{key:n.key||`_${t}`},s||(i?i():[]),s&&1===e._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function ch(e){return e.some((e=>!qu(e)||e.type!==Uu&&!(e.type===Pu&&!ch(e.children))))?e:null}const dh=e=>e?vh(e)?xh(e)||e.proxy:dh(e.parent):null,uh=sa(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>dh(e.parent),$root:e=>dh(e.root),$emit:e=>e.emit,$options:e=>nu(e),$forceUpdate:e=>()=>Vh(e.update),$nextTick:e=>jh.bind(e.proxy),$watch:e=>Jh.bind(e)}),hh={get({_:e},t){const{ctx:n,setupState:i,data:r,props:o,accessCache:s,type:a,appContext:l}=e;let c;if("$"!==t[0]){const a=s[t];if(void 0!==a)switch(a){case 0:return i[t];case 1:return r[t];case 3:return n[t];case 2:return o[t]}else{if(i!==Zs&&ca(i,t))return s[t]=0,i[t];if(r!==Zs&&ca(r,t))return s[t]=1,r[t];if((c=e.propsOptions[0])&&ca(c,t))return s[t]=2,o[t];if(n!==Zs&&ca(n,t))return s[t]=3,n[t];Qd&&(s[t]=4)}}const d=uh[t];let u,h;return d?("$attrs"===t&&pc(e,0,t),d(e)):(u=a.__cssModules)&&(u=u[t])?u:n!==Zs&&ca(n,t)?(s[t]=3,n[t]):(h=l.config.globalProperties,ca(h,t)?h[t]:void 0)},set({_:e},t,n){const{data:i,setupState:r,ctx:o}=e;if(r!==Zs&&ca(r,t))r[t]=n;else if(i!==Zs&&ca(i,t))i[t]=n;else if(ca(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:o}},s){let a;return void 0!==n[s]||e!==Zs&&ca(e,s)||t!==Zs&&ca(t,s)||(a=o[0])&&ca(a,s)||ca(i,s)||ca(uh,s)||ca(r.config.globalProperties,s)}},ph=Cu();let fh=0;let gh=null;const mh=e=>{gh=e,e.scope.on()},_h=()=>{gh&&gh.scope.off(),gh=null};function vh(e){return 4&e.vnode.shapeFlag}let yh=!1;function wh(e,t,n){pa(t)?e.render=t:ma(t)&&(e.setupState=vd(t)),bh(e)}function bh(e,t,n){const i=e.type;e.render||(e.render=i.render||ta),mh(e),uc(),Zd(e),hc(),_h()}function xh(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(vd(dd(e.exposed)),{get:(t,n)=>n in t?t[n]:n in uh?uh[n](e):void 0}))}function Ch(e){return pa(e)&&e.displayName||e.name}function kh(e,t,n,i){let r;try{r=i?e(...i):e()}catch(o){Sh(o,t,n)}return r}function Eh(e,t,n,i){if(pa(e)){const r=kh(e,t,n,i);return r&&_a(r)&&r.catch((e=>{Sh(e,t,n)})),r}const r=[];for(let o=0;o<e.length;o++)r.push(Eh(e[o],t,n,i));return r}function Sh(e,t,n,i=!0){t&&t.vnode;if(t){let i=t.parent;const r=t.proxy,o=n;for(;i;){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,o))return;i=i.parent}const s=t.appContext.config.errorHandler;if(s)return void kh(s,null,10,[e,r,o])}!function(e,t,n,i=!0){console.error(e)}(e,0,0,i)}let Ih=!1,Oh=!1;const Th=[];let Mh=0;const Nh=[];let Ah=null,Rh=0;const Dh=[];let Ph=null,Lh=0;const Uh=Promise.resolve();let Fh=null,Bh=null;function jh(e){const t=Fh||Uh;return e?t.then(this?e.bind(this):e):t}function Vh(e){Th.length&&Th.includes(e,Ih&&e.allowRecurse?Mh+1:Mh)||e===Bh||(null==e.id?Th.push(e):Th.splice(function(e){let t=Mh+1,n=Th.length;for(;t<n;){const i=t+n>>>1;$h(Th[i])<e?t=i+1:n=i}return t}(e.id),0,e),zh())}function zh(){Ih||Oh||(Oh=!0,Fh=Uh.then(qh))}function Kh(e,t,n,i){da(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?i+1:i)||n.push(e),zh()}function Wh(e,t=null){if(Nh.length){for(Bh=t,Ah=[...new Set(Nh)],Nh.length=0,Rh=0;Rh<Ah.length;Rh++)Ah[Rh]();Ah=null,Rh=0,Bh=null,Wh(e,t)}}function Hh(e){if(Dh.length){const e=[...new Set(Dh)];if(Dh.length=0,Ph)return void Ph.push(...e);for(Ph=e,Ph.sort(((e,t)=>$h(e)-$h(t))),Lh=0;Lh<Ph.length;Lh++)Ph[Lh]();Ph=null,Lh=0}}const $h=e=>null==e.id?1/0:e.id;function qh(e){Oh=!1,Ih=!0,Wh(e),Th.sort(((e,t)=>$h(e)-$h(t)));try{for(Mh=0;Mh<Th.length;Mh++){const e=Th[Mh];e&&!1!==e.active&&kh(e,null,14)}}finally{Mh=0,Th.length=0,Hh(),Ih=!1,Fh=null,(Th.length||Nh.length||Dh.length)&&qh(e)}}const Yh={};function Gh(e,t,n){return Xh(e,t,n)}function Xh(e,t,{immediate:n,deep:i,flush:r,onTrack:o,onTrigger:s}=Zs){const a=gh;let l,c,d=!1,u=!1;if(fd(e)?(l=()=>e.value,d=!!e._shallow):sd(e)?(l=()=>e,i=!0):da(e)?(u=!0,d=e.some(sd),l=()=>e.map((e=>fd(e)?e.value:sd(e)?Zh(e):pa(e)?kh(e,a,2):void 0))):l=pa(e)?t?()=>kh(e,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),Eh(e,a,3,[h])}:ta,t&&i){const e=l;l=()=>Zh(e())}let h=e=>{c=m.onStop=()=>{kh(e,a,4)}},p=u?[]:Yh;const f=()=>{if(m.active)if(t){const e=m.run();(i||d||(u?e.some(((e,t)=>Na(e,p[t]))):Na(e,p)))&&(c&&c(),Eh(t,a,3,[e,p===Yh?void 0:p,h]),p=e)}else m.run()};let g;f.allowRecurse=!!t,g="sync"===r?f:"post"===r?()=>Su(f,a&&a.suspense):()=>{!a||a.isMounted?function(e){Kh(e,Ah,Nh,Rh)}(f):f()};const m=new ac(l,g);return t?n?f():p=m.run():"post"===r?Su(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&aa(a.scope.effects,m)}}function Jh(e,t,n){const i=this.proxy,r=fa(e)?e.includes(".")?Qh(i,e):()=>i[e]:e.bind(i,i);let o;pa(t)?o=t:(o=t.handler,n=t);const s=gh;mh(this);const a=Xh(r,o.bind(i),n);return s?mh(s):_h(),a}function Qh(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Zh(e,t=new Set){if(!ma(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),fd(e))Zh(e.value,t);else if(da(e))for(let n=0;n<e.length;n++)Zh(e[n],t);else if(ha(e)||ua(e))e.forEach((e=>{Zh(e,t)}));else if(ba(e))for(const n in e)Zh(e[n],t);return e}function ep(e,t,n){const i=arguments.length;return 2===i?ma(t)&&!da(t)?qu(t)?Zu(e,null,[t]):Zu(e,t):Zu(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&qu(n)&&(n=[n]),Zu(e,t,n))}const tp="3.2.4",np="undefined"!=typeof document?document:null,ip=new Map,rp={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?np.createElementNS("http://www.w3.org/2000/svg",e):np.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>np.createTextNode(e),createComment:e=>np.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>np.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,i){const r=n?n.previousSibling:t.lastChild;let o=ip.get(e);if(!o){const t=np.createElement("template");if(t.innerHTML=i?`<svg>${e}</svg>`:e,o=t.content,i){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}ip.set(e,o)}return t.insertBefore(o.cloneNode(!0),n),[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const op=/\s*!important$/;function sp(e,t,n){if(da(n))n.forEach((n=>sp(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const i=function(e,t){const n=lp[t];if(n)return n;let i=Sa(t);if("filter"!==i&&i in e)return lp[t]=i;i=Ta(i);for(let r=0;r<ap.length;r++){const n=ap[r]+i;if(n in e)return lp[t]=n}return t}(e,t);op.test(n)?e.setProperty(Oa(i),n.replace(op,""),"important"):e[i]=n}}const ap=["Webkit","Moz","ms"],lp={};const cp="http://www.w3.org/1999/xlink";let dp=Date.now,up=!1;if("undefined"!=typeof window){dp()>document.createEvent("Event").timeStamp&&(dp=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);up=!!(e&&Number(e[1])<=53)}let hp=0;const pp=Promise.resolve(),fp=()=>{hp=0};function gp(e,t,n,i,r=null){const o=e._vei||(e._vei={}),s=o[t];if(i&&s)s.value=i;else{const[n,a]=function(e){let t;if(mp.test(e)){let n;for(t={};n=e.match(mp);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Oa(e.slice(2)),t]}(t);if(i){!function(e,t,n,i){e.addEventListener(t,n,i)}(e,n,o[t]=function(e,t){const n=e=>{const i=e.timeStamp||dp();(up||i>=n.attached-1)&&Eh(function(e,t){if(da(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>hp||(pp.then(fp),hp=dp()))(),n}(i,r),a)}else s&&(!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,n,s,a),o[t]=void 0)}}const mp=/(?:Once|Passive|Capture)$/;const _p=/^on[a-z]/;const vp=sa({patchProp:(e,t,n,i,r=!1,o,s,a,l)=>{"class"===t?function(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,i,r):"style"===t?function(e,t,n){const i=e.style;if(n)if(fa(n)){if(t!==n){const t=i.display;i.cssText=n,"_vod"in e&&(i.display=t)}}else{for(const e in n)sp(i,e,n[e]);if(t&&!fa(t))for(const e in t)null==n[e]&&sp(i,e,"")}else e.removeAttribute("style")}(e,n,i):ra(t)?oa(t)||gp(e,t,0,i,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&_p.test(t)&&pa(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(_p.test(t)&&fa(n))return!1;return t in e}(e,t,i,r))?function(e,t,n,i,r,o,s){if("innerHTML"===t||"textContent"===t)return i&&s(i,r,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName){e._value=n;const i=null==n?"":n;return e.value!==i&&(e.value=i),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const i=typeof e[t];if("boolean"===i)return void(e[t]=qs(n));if(null==n&&"string"===i)return e[t]="",void e.removeAttribute(t);if("number"===i){try{e[t]=0}catch(a){}return void e.removeAttribute(t)}}try{e[t]=n}catch(f8){}}(e,t,i,o,s,a,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),function(e,t,n,i,r){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(cp,t.slice(6,t.length)):e.setAttributeNS(cp,t,n);else{const i=$s(t);null==n||i&&!qs(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}(e,t,i,r))}},rp);let yp;const wp=(...e)=>{const t=(yp||(yp=Iu(vp))).createApp(...e),{mount:n}=t;return t.mount=e=>{const i=function(e){if(fa(e)){return document.querySelector(e)}return e}(e);if(!i)return;const r=t._component;pa(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};var bp,xp;(xp=bp||(bp={}))[xp.SETUP_FUNCTION=0]="SETUP_FUNCTION",xp[xp.RENDER_FUNCTION=1]="RENDER_FUNCTION",xp[xp.WATCH_GETTER=2]="WATCH_GETTER",xp[xp.WATCH_CALLBACK=3]="WATCH_CALLBACK",xp[xp.WATCH_CLEANUP=4]="WATCH_CLEANUP",xp[xp.NATIVE_EVENT_HANDLER=5]="NATIVE_EVENT_HANDLER",xp[xp.COMPONENT_EVENT_HANDLER=6]="COMPONENT_EVENT_HANDLER",xp[xp.VNODE_HOOK=7]="VNODE_HOOK",xp[xp.DIRECTIVE_HOOK=8]="DIRECTIVE_HOOK",xp[xp.TRANSITION_HOOK=9]="TRANSITION_HOOK",xp[xp.APP_ERROR_HANDLER=10]="APP_ERROR_HANDLER",xp[xp.APP_WARN_HANDLER=11]="APP_WARN_HANDLER",xp[xp.FUNCTION_REF=12]="FUNCTION_REF",xp[xp.ASYNC_COMPONENT_LOADER=13]="ASYNC_COMPONENT_LOADER",xp[xp.SCHEDULER=14]="SCHEDULER";const Cp={0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-next"};function kp(e,t,n){let i;try{i=n?e(...n):e()}catch(r){Sp(r,t)}return i}function Ep(e,t,n){if(pa(e)){const i=kp(e,t,n);return i&&_a(i)&&i.catch((e=>{Sp(e,t)})),i}const i=[];for(let r=0;r<e.length;r++)i.push(Ep(e[r],t,n));return i}function Sp(e,t,n=!0){!function(e,t,n=!0){const i=Cp[t];if(Ba("Unhandled error"+(i?` during execution of ${i}`:"")),n)throw e;console.error(e)}(e,t,n)}const Ip={};function Op(e,t,n){return pa(t)||Ba("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),function(e,t,{immediate:n,deep:i,onTrack:r,onTrigger:o}=Zs){t||(void 0!==n&&Ba('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),void 0!==i&&Ba('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const s=e=>{Ba("Invalid watch source: ",e,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")};let a,l,c=!1,d=!1;rl(e)?(a=()=>e.value,c=!!e._shallow):ml(e)?(a=()=>e,i=!0):da(e)?(d=!0,c=e.some(ml),a=()=>e.map((e=>rl(e)?e.value:ml(e)?Tp(e):pa(e)?kp(e,bp.WATCH_GETTER):void s(e)))):pa(e)?a=t?()=>kp(e,bp.WATCH_GETTER):()=>(l&&l(),Ep(e,bp.WATCH_CALLBACK,[u])):(a=ta,s(e));if(t&&i){const e=a;a=()=>Tp(e())}const u=e=>{l=f.onStop=()=>{kp(e,bp.WATCH_CLEANUP)}};let h=d?[]:Ip;const p=()=>{if(f.active)if(t){const e=f.run();(i||c||(d?e.some(((e,t)=>Na(e,h[t]))):Na(e,h)))&&(l&&l(),Ep(t,bp.WATCH_CALLBACK,[e,h===Ip?void 0:h,u]),h=e)}else f.run()};p.allowRecurse=!!t;const f=new Xa(a,p);f.onTrack=r,f.onTrigger=o,t?n?p():h=f.run():f.run();return()=>{f.stop()}}(e,t,n)}function Tp(e,t=new Set){if(!ma(e)||e[dl.SKIP])return e;if((t=t||new Set).has(e))return e;if(t.add(e),da(e))for(let n=0;n<e.length;n++)Tp(e[n],t);else if(ha(e)||ua(e))e.forEach((e=>{Tp(e,t)}));else if(ba(e))for(const n in e)Tp(e[n],t);return e}var Mp=Object.defineProperty,Np=Object.getOwnPropertyDescriptor,Ap=(e,t)=>(n,i)=>t(n,i,e);let Rp=class extends jo{constructor(e,t){super(),C(this,"_onDidChangeSelection",this._register(new ws)),C(this,"onDidChangeSelection",this._onDidChangeSelection.event),C(this,"_onReconnected",this._register(new ws)),C(this,"onReconnected",this._onReconnected.event),C(this,"_selection",[]),C(this,"_stashSelection",null),C(this,"nodeViewModelMap",new Map),C(this,"nodeWatchStops",new Map),C(this,"linkWatchStops",new Map),C(this,"_styles"),C(this,"_overrideStyles"),C(this,"styleViewModelMap",new Map),C(this,"styleWatchStops",new Map),C(this,"_fonts"),C(this,"_selectTimer",0),C(this,"_prevSelection",null),C(this,"_root"),this.model=e,t.store(To,this),this._styles=id({value:[]}),this._overrideStyles=id({value:[]}),this._fonts=id({value:[]}),this._root=id(Object.create(null)),this.internal_connect(!1)}internal_disconnect(){for(const[e,t]of this.nodeWatchStops.entries())t(),this.nodeViewModelMap.delete(e);this.nodeWatchStops.clear(),this.nodeViewModelMap.clear();for(const[e,t]of this.linkWatchStops.entries())t(),this.linkWatchStops.delete(e);this.linkWatchStops.clear();for(const[e,t]of this.styleWatchStops)t(),this.styleWatchStops.delete(e);this.styleWatchStops.clear(),this.styleViewModelMap.clear(),this._styles.value.length=0,this._fonts.value.length=0}internal_connect(e=!1){this.graphify(),this.group(),this._updateRootValue(),this.connectFonts(),e&&this._onReconnected.fire()}dispose(){super.dispose(),this.internal_disconnect()}get selection(){return this._selection.slice()}getViewModelNodeById(e){return this.nodeViewModelMap.get(e)}triggerChangeSelection(e){this._prevSelection||(this._prevSelection=e),this._selectTimer&&clearTimeout(this._selectTimer),this._selectTimer=setTimeout((()=>{const e=this._selection.slice();Pr(this._prevSelection,e)||(this._onDidChangeSelection.fire({oldSelection:this._prevSelection,newSelection:e}),this._prevSelection=null,this._selectTimer=0)}))}setSelectionById(e){const t=this._selection.slice();this._selection.length=0,this._selection.push(e),this.triggerChangeSelection(t)}isIdSelected(e){return this._selection.includes(e)}appendSelectionById(e){if(this._selection.includes(e))return;const t=this._selection.slice();this._selection.push(e),this.triggerChangeSelection(t)}removeSelectionById(e){if(!this._selection.includes(e))return;const t=this._selection.slice(),n=this._selection.findIndex((t=>t===e));this._selection.splice(n,1),this.triggerChangeSelection(t)}setSelectionByLocation(e){const t=this._selection.slice();this._selection.length=0;const n=this._selection,{ref:i,direction:r}=e,{nodes:o}=this.model.getValue();if(r===Cs.self)n.push(i);else if(r===Cs.inward)for(const s of o)s.from===i&&n.push(s.id);else{if(r===Cs.outward)throw new Error("unimplemented");if(r===Cs.backward)throw new Error("unimplemented");if(r===Cs.forward)throw new Error("unimplemented");if(r===Cs.ancestors)throw new Error("unimplemented");if(r===Cs.descendants){const e=[i];for(;e.length;){const t=e.pop();o.filter((e=>e.from===t)).forEach((t=>{const{id:n}=t;this._selection.includes(n)||(e.push(n),this._selection.push(n))}))}}}this.triggerChangeSelection(t)}clearSelection(){const e=this._selection.slice();this._selection.length=0,this.triggerChangeSelection(e)}stashSelection(){this._stashSelection=this._selection.slice()}popSelection(){if(!this._stashSelection)return;const e=this._selection.slice();this._selection.length=0,this._selection.push(...this._stashSelection),this.triggerChangeSelection(e)}initSelection(){const e=this.model.getValue().nodes.find((e=>ao(e)));e&&this.setSelectionById(e.id)}get root(){return this._root.value||this._updateRootValue(),this._root}_updateRootValue(){const e=this.getViewModelNodeById("root");if(ri(e))throw new Error("isNil(root)");this._root.value=e}graphify(){const{nodes:e,links:t}=this.model.getValue();e.forEach((e=>{this.nodeViewModelMap.set(e.id,id({id:e.id,children:[],props:li(_l(e.props)),meta:li(_l(e.meta)),hide:!1})),this.watchNode(e)})),t.forEach((e=>{this.addLink(e),this.watchLink(e)}));for(const n of e){const{id:e}=n,t=this.getViewModelNodeById(e);if(!t)throw new Error("500");t.children=this.getChildren(e)}this.watchNodeList(e),this.watchLinkList(t)}watchNode(e){pi(ml(e),fi.internalError);const t=Op((()=>e),Ci,{deep:!0,onTrigger:t=>{const{target:n,type:i,key:r,oldValue:o,newValue:s}=t;if(i===Ua.SET)if("from"===r)this.updateChildren(s),this.updateChildren(o);else if("order"===r){const e=n;this.updateChildren(e.from)}else{const t=this.nodeViewModelMap.get(e.id);if(!t)throw new Error("500");if("id"===r&&n===e)throw new Error("500");t.props=li(_l(e.props)),t.meta=li(_l(e.meta))}else if(i===Ua.ADD)if(n===e)console.warn("400");else{const t=this.nodeViewModelMap.get(e.id);t.props=li(_l(e.props)),t.meta=li(_l(e.meta))}else{if(i!==Ua.DELETE)throw new Error("500");{const t=this.nodeViewModelMap.get(e.id);if(!t)throw new Error("500");t.props=li(_l(e.props)),t.meta=li(_l(e.meta))}}}});this.nodeWatchStops.set(e.id,t)}addLink(e){const{targetId:t,href:n,target:i}=e,r=this.getViewModelNodeById(t);if(!r)throw new Error("404");const o={href:n,target:i};r.link?Object.assign(r.link,o):r.link=o}watchLink(e){pi(ml(e),fi.internalError);const t=Op((()=>e),Ci,{deep:!0,onTrigger:e=>{const{target:t}=e,n=t,{targetId:i,href:r,target:o}=n,s=this.getViewModelNodeById(i);if(!s)throw new Error("404");s.link||(s.link=Object.create(null)),Object.assign(s.link,{href:r,target:o})}});this.linkWatchStops.set(e.id,t)}addNode(e){this.nodeViewModelMap.delete(e.id);const t=id({id:e.id,children:this.getChildren(e.id),props:e.props,meta:e.meta,hide:!1});this.nodeViewModelMap.set(e.id,t),this.updateChildren(e.from),this.watchNode(e)}removeNode(e){if(!this.nodeViewModelMap.has(e.id))return void console.warn(fi.notFound,e);this.nodeViewModelMap.delete(e.id),this.updateChildren(e.from);const t=this.nodeWatchStops.get(e.id);if(!t)throw new Error("500");t(),this.nodeWatchStops.delete(e.id)}watchNodeList(e){const t=this.model.onDidChangeContent((t=>{const{changes:n}=t;n.filter((e=>{const{newValue:t,oldValue:n}=e;return po(t)||po(n)})).forEach((t=>{const{newValue:n,oldValue:i,op:r}=t;switch(r){case"replace":case"add":if(po(n)){const t=e.find((e=>e.id===n.id));t&&this.addNode(t)}break;case"remove":po(i)&&this.removeNode(i);break;default:throw new Error("500")}}))}));this._register(t)}removeLink(e){const{targetId:t,id:n}=e,i=this.getViewModelNodeById(t);if(!i)throw new Error("404");i.link&&delete i.link;const r=this.linkWatchStops.get(n);r?(r(),this.linkWatchStops.delete(n)):console.error("500")}watchLinkList(e){const t=this.model.onDidChangeContent((t=>{const{changes:n}=t;n.filter((e=>{const{newValue:t,oldValue:n}=e;return Ws(t)||Ws(n)})).forEach((t=>{const{newValue:n,oldValue:i,op:r}=t;let o=null;switch(r){case"replace":if(Ws(n)&&!this.linkWatchStops.has(n.id)){const{id:t}=n,i=e.find((e=>e.id===t));i&&(this.addLink(i),this.watchLink(i),o=i.targetId)}break;case"add":if(Ws(n)&&!this.linkWatchStops.has(n.id)){const{targetId:t,id:i}=n,r=e.find((e=>e.id===i));r&&(this.addLink(r),this.watchLink(r),o=t)}break;case"remove":Ws(i)&&(this.removeLink(i),o=i.targetId);break;default:throw new Error("500")}if(o){const t=e.some((e=>e.targetId===o));this._styles.value.filter((e=>e.targetId===o)).forEach((e=>e.forLink=t))}}))}));this._register(t)}getChildren(e){return Ar(this.model.getChildrenNodesOfId(e).map((e=>{const t=this.nodeViewModelMap.get(e.id);return ri(t)&&console.error("vm not found",e),t})))}updateChildren(e){const t=this.getViewModelNodeById(e);t?t.children=this.getChildren(e):console.error(fi.internalError)}toggleVisibility(e,t){const n=this.getViewModelNodeById(e);n?n.hide=!t:console.warn("404")}addOverrideStyle(e,t){const n={id:ni(),targetId:e,attrs:t};this._overrideStyles.value.push(n)}updateOverrideStyle(e,t){const n=this._overrideStyles.value.find((t=>t.id===e));n?Reflect.set(n,"attrs",t):console.warn("404")}removeOverrideStyle(e){const t=this._overrideStyles.value.findIndex((t=>t.id===e));-1!==t&&this._overrideStyles.value.splice(t,1)}getOverrideStyle(e){return this._overrideStyles.value.filter((t=>t.targetId===e))}clearAllOverrideStyle(){this._overrideStyles.value=[]}get styles(){return wd((()=>this._styles.value.concat(this._overrideStyles.value)))}group(){const{styles:e=[],breakpoints:t=[]}=this.model.getValue(),n=new Map;t.forEach((e=>n.set(e.id,e)));for(let i=0,r=e.length;i<r;i++)this.addStyle(e[i],i,n);this.watchStyleList(e)}addStyle(e,t,n){if(this.styleViewModelMap.has(e))return;this.removeStyle(e.id);const{nodes:i,breakpoints:r}=this.model.getValue(),o=e,{breakpointId:s,id:a,targetId:l,selectorType:c,subSelector:d}=o,u=li(x(o,["breakpointId","id","targetId","selectorType","subSelector"]));let h;if(s&&(h=n?n.get(s):Po(r,(e=>e.id===s)),!h))throw new Error("404");const p=Po(i,(e=>e.id===l));if(!p)return void console.error("404");const f=id({attrs:u,id:a,targetId:l,media:h,selectorType:c,subSelector:d,forText:to(p),forSVG:io(p),forImage:no(p),forVideo:oo(p),forLink:!!this.model.getLink(p.id)});this._styles.value.splice(t,0,f),this.watchStyle(e,f),this.styleViewModelMap.set(e,f)}watchStyle(e,t){pi(ml(e),fi.internalError);const n=Op((()=>e),Ci,{deep:!0,onTrigger:e=>{const{newValue:n,type:i,key:r}=e,o=r;if("id"===o||"targetId"===o)Reflect.set(t,o,n);else if("breakpointId"===o)t.media=this.model.getValue().breakpoints.find((e=>e.id===n));else if(i===Ua.SET||i===Ua.ADD)t.attrs[o]=n;else{if(i!==Ua.DELETE)throw new Error("500");delete t.attrs[o]}}});this.styleWatchStops.set(e,n)}getStyleModel(e){for(const t of this.styleViewModelMap.keys())if(t.id===e)return t}removeStyle(e){const t=this.getStyleModel(e);if(!t)return;const n=Mr(this._styles.value,(e=>e.id===t.id));if(n<0)return;this._styles.value.splice(n,1),this.styleViewModelMap.delete(t);const i=this.styleWatchStops.get(t);i&&(i(),this.styleWatchStops.delete(t))}watchStyleList(e){const t=Op((()=>e.length),Ci,{onTrigger:t=>{const{key:n,newValue:i,oldValue:r,type:o}=t;if(o===Ua.DELETE)this.removeStyle(r.id);else if(o===Ua.ADD){const t=Mr(e,(e=>e.id===i.id)),n=e[t];this.addStyle(n,t)}else{if(o!==Ua.SET)throw new Error("500");"length"===n&&jh().then((()=>{e.forEach(((e,t)=>{this.addStyle(e,t)}))}))}}});this._register(Fo(t))}get fonts(){return this._fonts}connectFonts(){const{fontfaces:e}=this.model.getValue();this.fonts.value=li(e);const t=Op((()=>e),(()=>this.fonts.value=li(e)),{deep:!0});this._register(Fo(t))}};Rp=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Np(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Mp(t,n,o),o})([Ap(0,zr),Ap(1,Br)],Rp);const Dp=Vr("keybindingService");let Pp;!function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});Pp=t=>{const n=setTimeout((()=>t(e)));let i=!1;return{dispose(){i||(i=!0,clearTimeout(n))}}}}else Pp=(e,t)=>{const n=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(n))}}}}();class Lp{constructor(e){C(this,"_executor"),C(this,"_handle"),C(this,"_didRun",!1),C(this,"_value"),C(this,"_error"),this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Pp((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class Up{constructor(){C(this,"_isOpen"),C(this,"_promise"),C(this,"_completePromise"),this._isOpen=!1,this._promise=new Promise(((e,t)=>{this._completePromise=e}))}isOpen(){return this._isOpen}open(e){this._isOpen=!0,this._completePromise(e)}wait(){return this._promise}}class Fp{constructor(e,t){C(this,"_token"),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}class Bp{constructor(){C(this,"_token"),this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval((()=>{e()}),t)}}class jp{constructor(e){C(this,"timeout"),C(this,"completionPromise"),C(this,"doResolve"),C(this,"doReject"),C(this,"task"),this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}}))),this.timeout=setTimeout((()=>{this.timeout=null,this.doResolve&&this.doResolve(null)}),t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new Error("canceled")),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}function Vp(e){return new Promise((t=>{setTimeout(t,e)}))}class zp extends jo{constructor(e,t){super(),C(this,"_serviceBrand"),C(this,"_currentSingleModifier"),C(this,"_currentSingleModifierClearTimeout"),this._contextKeyService=e,this._commandService=t,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Fp}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return Ar(this._getResolver().lookupKeybindings(e).map((e=>e.resolvedKeybinding)))}lookupKeybinding(e){const t=this._getResolver().lookupPrimaryKeybinding(e);if(t)return t.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getDispatchParts();if(null===i)return null;const r=this._contextKeyService.getContext(t);return this._getResolver().resolve(r,i)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1,e)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();return null!==i&&null===this._currentSingleModifier?(this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._currentSingleModifier=null}),300),!1):null!==i&&i===this._currentSingleModifier?(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0,e)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_getCommandResult(e,t,n=!1){let i=null;if(n){const[t]=e.getSingleModifierDispatchParts();i=t}else[i]=e.getDispatchParts();let r=null;if(i){const e=this._contextKeyService.getContext(t);r=this._getResolver().resolve(e,i)}return{result:r,firstPart:i}}_doDispatch(e,t,n=!1,i){const{firstPart:r,result:o}=this._getCommandResult(e,t,n);let s=!1;if(r){if(o&&o.commandId){o.bubble||(s=!0);const e=o.commandArgs||[];e.push(i),this._commandService.executeCommand(o.commandId,e).then(void 0,(e=>{console.error(e)}))}return s}s=!0}}const Kp=navigator.userAgent;var Wp;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(Wp||(Wp={}));const Hp=Kp.indexOf("Windows")>=0,$p=Kp.indexOf("Macintosh")>=0,qp=Kp.indexOf("Linux")>=0,Yp=Kp.indexOf("Firefox")>=0,Gp=Kp.indexOf("AppleWebKit")>=0,Xp=!(Kp.indexOf("Chrome")>=0)&&Kp.indexOf("Safari")>=0;var Jp;Kp.indexOf("iPad")>=0||Xp&&navigator.maxTouchPoints,Kp.indexOf("Edge/")>=0&&Kp.indexOf("WebView/"),Kp.indexOf("Electron/"),Kp.indexOf("Android"),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(Jp||(Jp={}));const Qp=$p?2:Hp?1:3;var Zp,ef;function tf(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const i=e.charCodeAt(n),o=t.charCodeAt(r);if(i<o)return-1;if(i>o)return 1}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}function nf(e){return e>=Zp.a&&e<=Zp.z}function rf(e){return e>=Zp.A&&e<=Zp.Z}(ef=Zp||(Zp={}))[ef.Null=0]="Null",ef[ef.Backspace=8]="Backspace",ef[ef.Tab=9]="Tab",ef[ef.LineFeed=10]="LineFeed",ef[ef.CarriageReturn=13]="CarriageReturn",ef[ef.Space=32]="Space",ef[ef.ExclamationMark=33]="ExclamationMark",ef[ef.DoubleQuote=34]="DoubleQuote",ef[ef.Hash=35]="Hash",ef[ef.DollarSign=36]="DollarSign",ef[ef.PercentSign=37]="PercentSign",ef[ef.Ampersand=38]="Ampersand",ef[ef.SingleQuote=39]="SingleQuote",ef[ef.OpenParen=40]="OpenParen",ef[ef.CloseParen=41]="CloseParen",ef[ef.Asterisk=42]="Asterisk",ef[ef.Plus=43]="Plus",ef[ef.Comma=44]="Comma",ef[ef.Dash=45]="Dash",ef[ef.Period=46]="Period",ef[ef.Slash=47]="Slash",ef[ef.Digit0=48]="Digit0",ef[ef.Digit1=49]="Digit1",ef[ef.Digit2=50]="Digit2",ef[ef.Digit3=51]="Digit3",ef[ef.Digit4=52]="Digit4",ef[ef.Digit5=53]="Digit5",ef[ef.Digit6=54]="Digit6",ef[ef.Digit7=55]="Digit7",ef[ef.Digit8=56]="Digit8",ef[ef.Digit9=57]="Digit9",ef[ef.Colon=58]="Colon",ef[ef.Semicolon=59]="Semicolon",ef[ef.LessThan=60]="LessThan",ef[ef.Equals=61]="Equals",ef[ef.GreaterThan=62]="GreaterThan",ef[ef.QuestionMark=63]="QuestionMark",ef[ef.AtSign=64]="AtSign",ef[ef.A=65]="A",ef[ef.B=66]="B",ef[ef.C=67]="C",ef[ef.D=68]="D",ef[ef.E=69]="E",ef[ef.F=70]="F",ef[ef.G=71]="G",ef[ef.H=72]="H",ef[ef.I=73]="I",ef[ef.J=74]="J",ef[ef.K=75]="K",ef[ef.L=76]="L",ef[ef.M=77]="M",ef[ef.N=78]="N",ef[ef.O=79]="O",ef[ef.P=80]="P",ef[ef.Q=81]="Q",ef[ef.R=82]="R",ef[ef.S=83]="S",ef[ef.T=84]="T",ef[ef.U=85]="U",ef[ef.V=86]="V",ef[ef.W=87]="W",ef[ef.X=88]="X",ef[ef.Y=89]="Y",ef[ef.Z=90]="Z",ef[ef.OpenSquareBracket=91]="OpenSquareBracket",ef[ef.Backslash=92]="Backslash",ef[ef.CloseSquareBracket=93]="CloseSquareBracket",ef[ef.Caret=94]="Caret",ef[ef.Underline=95]="Underline",ef[ef.BackTick=96]="BackTick",ef[ef.a=97]="a",ef[ef.b=98]="b",ef[ef.c=99]="c",ef[ef.d=100]="d",ef[ef.e=101]="e",ef[ef.f=102]="f",ef[ef.g=103]="g",ef[ef.h=104]="h",ef[ef.i=105]="i",ef[ef.j=106]="j",ef[ef.k=107]="k",ef[ef.l=108]="l",ef[ef.m=109]="m",ef[ef.n=110]="n",ef[ef.o=111]="o",ef[ef.p=112]="p",ef[ef.q=113]="q",ef[ef.r=114]="r",ef[ef.s=115]="s",ef[ef.t=116]="t",ef[ef.u=117]="u",ef[ef.v=118]="v",ef[ef.w=119]="w",ef[ef.x=120]="x",ef[ef.y=121]="y",ef[ef.z=122]="z",ef[ef.OpenCurlyBrace=123]="OpenCurlyBrace",ef[ef.Pipe=124]="Pipe",ef[ef.CloseCurlyBrace=125]="CloseCurlyBrace",ef[ef.Tilde=126]="Tilde",ef[ef.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",ef[ef.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",ef[ef.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",ef[ef.U_Combining_Tilde=771]="U_Combining_Tilde",ef[ef.U_Combining_Macron=772]="U_Combining_Macron",ef[ef.U_Combining_Overline=773]="U_Combining_Overline",ef[ef.U_Combining_Breve=774]="U_Combining_Breve",ef[ef.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",ef[ef.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",ef[ef.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",ef[ef.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",ef[ef.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",ef[ef.U_Combining_Caron=780]="U_Combining_Caron",ef[ef.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",ef[ef.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",ef[ef.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",ef[ef.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",ef[ef.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",ef[ef.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",ef[ef.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",ef[ef.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",ef[ef.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",ef[ef.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",ef[ef.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",ef[ef.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",ef[ef.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",ef[ef.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",ef[ef.U_Combining_Horn=795]="U_Combining_Horn",ef[ef.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",ef[ef.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",ef[ef.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",ef[ef.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",ef[ef.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",ef[ef.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",ef[ef.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",ef[ef.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",ef[ef.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",ef[ef.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",ef[ef.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",ef[ef.U_Combining_Cedilla=807]="U_Combining_Cedilla",ef[ef.U_Combining_Ogonek=808]="U_Combining_Ogonek",ef[ef.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",ef[ef.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",ef[ef.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",ef[ef.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",ef[ef.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",ef[ef.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",ef[ef.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",ef[ef.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",ef[ef.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",ef[ef.U_Combining_Low_Line=818]="U_Combining_Low_Line",ef[ef.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",ef[ef.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",ef[ef.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",ef[ef.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",ef[ef.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",ef[ef.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",ef[ef.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",ef[ef.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",ef[ef.U_Combining_Square_Below=827]="U_Combining_Square_Below",ef[ef.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",ef[ef.U_Combining_X_Above=829]="U_Combining_X_Above",ef[ef.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",ef[ef.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",ef[ef.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",ef[ef.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",ef[ef.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",ef[ef.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",ef[ef.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",ef[ef.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",ef[ef.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",ef[ef.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",ef[ef.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",ef[ef.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",ef[ef.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",ef[ef.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",ef[ef.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",ef[ef.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",ef[ef.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",ef[ef.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",ef[ef.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",ef[ef.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",ef[ef.U_Combining_Fermata=850]="U_Combining_Fermata",ef[ef.U_Combining_X_Below=851]="U_Combining_X_Below",ef[ef.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",ef[ef.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",ef[ef.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",ef[ef.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",ef[ef.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",ef[ef.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",ef[ef.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",ef[ef.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",ef[ef.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",ef[ef.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",ef[ef.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",ef[ef.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",ef[ef.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",ef[ef.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",ef[ef.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",ef[ef.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",ef[ef.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",ef[ef.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",ef[ef.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",ef[ef.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",ef[ef.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",ef[ef.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",ef[ef.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",ef[ef.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",ef[ef.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",ef[ef.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",ef[ef.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",ef[ef.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",ef[ef.LINE_SEPARATOR=8232]="LINE_SEPARATOR",ef[ef.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",ef[ef.NEXT_LINE=133]="NEXT_LINE",ef[ef.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",ef[ef.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",ef[ef.U_DIAERESIS=168]="U_DIAERESIS",ef[ef.U_MACRON=175]="U_MACRON",ef[ef.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",ef[ef.U_CEDILLA=184]="U_CEDILLA",ef[ef.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",ef[ef.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",ef[ef.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",ef[ef.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",ef[ef.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",ef[ef.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",ef[ef.U_BREVE=728]="U_BREVE",ef[ef.U_DOT_ABOVE=729]="U_DOT_ABOVE",ef[ef.U_RING_ABOVE=730]="U_RING_ABOVE",ef[ef.U_OGONEK=731]="U_OGONEK",ef[ef.U_SMALL_TILDE=732]="U_SMALL_TILDE",ef[ef.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",ef[ef.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",ef[ef.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",ef[ef.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",ef[ef.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",ef[ef.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",ef[ef.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",ef[ef.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",ef[ef.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",ef[ef.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",ef[ef.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",ef[ef.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",ef[ef.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",ef[ef.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",ef[ef.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",ef[ef.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",ef[ef.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",ef[ef.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",ef[ef.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",ef[ef.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",ef[ef.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",ef[ef.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",ef[ef.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",ef[ef.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",ef[ef.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",ef[ef.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",ef[ef.U_GREEK_TONOS=900]="U_GREEK_TONOS",ef[ef.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",ef[ef.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",ef[ef.U_GREEK_PSILI=8127]="U_GREEK_PSILI",ef[ef.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",ef[ef.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",ef[ef.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",ef[ef.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",ef[ef.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",ef[ef.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",ef[ef.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",ef[ef.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",ef[ef.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",ef[ef.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",ef[ef.U_GREEK_VARIA=8175]="U_GREEK_VARIA",ef[ef.U_GREEK_OXIA=8189]="U_GREEK_OXIA",ef[ef.U_GREEK_DASIA=8190]="U_GREEK_DASIA",ef[ef.U_OVERLINE=8254]="U_OVERLINE",ef[ef.UTF8_BOM=65279]="UTF8_BOM";class of{constructor(){C(this,"segment"),C(this,"value"),C(this,"key"),C(this,"left"),C(this,"mid"),C(this,"right")}isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class sf{constructor(e){C(this,"_iter"),C(this,"_root"),this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;for(this._root||(this._root=new of,this._root.segment=n.value()),i=this._root;;){const e=n.cmp(i.segment);if(e>0)i.left||(i.left=new of,i.left.segment=n.value()),i=i.left;else if(e<0)i.right||(i.right=new of,i.right.segment=n.value()),i=i.right;else{if(!n.hasNext())break;n.next(),i.mid||(i.mid=new of,i.mid.segment=n.value()),i=i.mid}}const r=i.value;return i.value=t,i.key=e,r}get(e){var t;return null==(t=this._getNode(e))?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),i=[];let r=this._root;for(;r;){const e=n.cmp(r.segment);if(e>0)i.push([1,r]),r=r.left;else if(e<0)i.push([-1,r]),r=r.right;else{if(!n.hasNext()){for(t?(r.left=void 0,r.mid=void 0,r.right=void 0):r.value=void 0;i.length>0&&r.isEmpty();){const[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}r=t}break}n.next(),i.push([0,r]),r=r.mid}}}findSubstr(e){const t=this._iter.reset(e);let n,i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())return n.mid?this._entries(n.mid):void 0;t.next(),n=n.mid}}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}const af=Kp||"",lf=new Map;lf.set("false",!1),lf.set("true",!0),lf.set("isMac",$p),lf.set("isLinux",qp),lf.set("isWindows",Hp),lf.set("isEdge",af.indexOf("Edg/")>=0),lf.set("isFirefox",af.indexOf("Firefox")>=0),lf.set("isChrome",af.indexOf("Chrome")>=0),lf.set("isSafari",af.indexOf("Safari")>=0),lf.set("isIPad",af.indexOf("iPad")>=0);const cf=Object.prototype.hasOwnProperty;var df,uf;(uf=df||(df={}))[uf.False=0]="False",uf[uf.True=1]="True",uf[uf.Defined=2]="Defined",uf[uf.Not=3]="Not",uf[uf.Equals=4]="Equals",uf[uf.NotEquals=5]="NotEquals",uf[uf.And=6]="And",uf[uf.Regex=7]="Regex",uf[uf.NotRegex=8]="NotRegex",uf[uf.Or=9]="Or",uf[uf.In=10]="In",uf[uf.NotIn=11]="NotIn",uf[uf.Greater=12]="Greater",uf[uf.GreaterEquals=13]="GreaterEquals",uf[uf.Smaller=14]="Smaller",uf[uf.SmallerEquals=15]="SmallerEquals";class hf{static false(){return gf.INSTANCE}static true(){return _f.INSTANCE}static has(e){return vf.create(e)}static equals(e,t){return yf.create(e,t)}static notEquals(e,t){return xf.create(e,t)}static regex(e,t){return Of.create(e,t)}static in(e,t){return wf.create(e,t)}static not(e){return Cf.create(e)}static and(...e){return Mf.create(e)}static or(...e){return Nf.create(e)}static greater(e,t){return kf.create(e,t)}static less(e,t){return Sf.create(e,t)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){const n=e.split("||");return Nf.create(n.map((e=>this._deserializeAndExpression(e,t))))}static _deserializeAndExpression(e,t){const n=e.split("&&");return Mf.create(n.map((e=>this._deserializeOne(e,t))))}static _deserializeOne(e,t){if((e=e.trim()).indexOf("!=")>=0){const n=e.split("!=");return xf.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){const n=e.split("==");return yf.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){const n=e.split("=~");return Of.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){const t=e.split(" in ");return wf.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const t=e.split(">=");return Ef.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const t=e.split(">");return kf.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const t=e.split("<=");return If.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const t=e.split("<");return Sf.create(t[0].trim(),t[1].trim())}return/^\!\s*/.test(e)?Cf.create(e.substr(1).trim()):vf.create(e)}static _deserializeValue(e,t){if("true"===(e=e.trim()))return!0;if("false"===e)return!1;const n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(!(n=e)||"string"!=typeof n||0===n.trim().length){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}var n;const i=e.indexOf("/"),r=e.lastIndexOf("/");if(i===r||i<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}const o=e.slice(i+1,r),s="i"===e[r+1]?"i":"";try{return new RegExp(o,s)}catch(f8){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${f8}`);return console.warn(`bad regexp-value '${e}', parse error: ${f8}`),null}}}function pf(e,t){return e.cmp(t)}const ff=class{constructor(){C(this,"type",0)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return _f.INSTANCE}};let gf=ff;C(gf,"INSTANCE",new ff);const mf=class{constructor(){C(this,"type",1)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return gf.INSTANCE}};let _f=mf;C(_f,"INSTANCE",new mf);class vf{constructor(e){C(this,"type",2),this.key=e}static create(e){const t=lf.get(e);return"boolean"==typeof t?t?_f.INSTANCE:gf.INSTANCE:new vf(e)}cmp(e){return e.type!==this.type?this.type-e.type:Pf(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return Cf.create(this.key)}}class yf{constructor(e,t){C(this,"type",4),this.key=e,this.value=t}static create(e,t){if("boolean"==typeof t)return t?vf.create(e):Cf.create(e);const n=lf.get(e);if("boolean"==typeof n){return t===(n?"true":"false")?_f.INSTANCE:gf.INSTANCE}return new yf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return xf.create(this.key,this.value)}}class wf{constructor(e,t){C(this,"type",10),this.key=e,this.valueKey=t}static create(e,t){return new wf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:"string"==typeof n&&"object"==typeof t&&null!==t&&cf.call(t,n)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return bf.create(this)}}class bf{constructor(e){C(this,"type",11),this._actual=e}static create(e){return new bf(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(e){return new bf(this._actual.map(e))}negate(){return this._actual}}class xf{constructor(e,t){C(this,"type",5),this.key=e,this.value=t}static create(e,t){if("boolean"==typeof t)return t?Cf.create(e):vf.create(e);const n=lf.get(e);if("boolean"==typeof n){return t===(n?"true":"false")?gf.INSTANCE:_f.INSTANCE}return new xf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return yf.create(this.key,this.value)}}class Cf{constructor(e){C(this,"type",3),this.key=e}static create(e){const t=lf.get(e);return"boolean"==typeof t?t?gf.INSTANCE:_f.INSTANCE:new Cf(e)}cmp(e){return e.type!==this.type?this.type-e.type:Pf(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return vf.create(this.key)}}class kf{constructor(e,t){C(this,"type",12),this.key=e,this.value=t}static create(e,t){return new kf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))>parseFloat(this.value)}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return If.create(this.key,this.value)}}class Ef{constructor(e,t){C(this,"type",13),this.key=e,this.value=t}static create(e,t){return new Ef(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))>=parseFloat(this.value)}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return Sf.create(this.key,this.value)}}class Sf{constructor(e,t){C(this,"type",14),this.key=e,this.value=t}static create(e,t){return new Sf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))<parseFloat(this.value)}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return Ef.create(this.key,this.value)}}class If{constructor(e,t){C(this,"type",15),this.key=e,this.value=t}static create(e,t){return new If(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))<=parseFloat(this.value)}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return kf.create(this.key,this.value)}}class Of{constructor(e,t){C(this,"type",7),this.key=e,this.regexp=t}static create(e,t){return new Of(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return Tf.create(this)}}class Tf{constructor(e){C(this,"type",8),this._actual=e}static create(e){return new Tf(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(e){return new Tf(this._actual.map(e))}negate(){return this._actual}}class Mf{constructor(e){C(this,"type",6),this.expr=e}static create(e){return Mf._normalizeArr(e)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=pf(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e){const t=[];let n=!1;for(const i of e)if(i)if(1!==i.type){if(0===i.type)return gf.INSTANCE;6!==i.type?t.push(i):t.push(...i.expr)}else n=!0;if(0===t.length&&n)return _f.INSTANCE;if(0!==t.length){if(1===t.length)return t[0];for(t.sort(pf);t.length>1;){const e=t[t.length-1];if(9!==e.type)break;t.pop();const n=t.pop(),i=Nf.create(e.expr.map((e=>Mf.create([e,n]))));i&&(t.push(i),t.sort(pf))}return 1===t.length?t[0]:new Mf(t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Mf(this.expr.map((t=>t.map(e))))}negate(){const e=[];for(const t of this.expr)e.push(t.negate());return Nf.create(e)}}class Nf{constructor(e){C(this,"type",9),this.expr=e}static create(e){const t=Nf._normalizeArr(e);if(0!==t.length)return 1===t.length?t[0]:new Nf(t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=pf(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e){let t=[],n=!1;if(e){for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r)if(0!==r.type){if(1===r.type)return[_f.INSTANCE];9!==r.type?t.push(r):t=t.concat(r.expr)}else n=!0}if(0===t.length&&n)return[gf.INSTANCE];t.sort(pf)}return t}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Nf(this.expr.map((t=>t.map(e))))}negate(){const e=[];for(const n of this.expr)e.push(n.negate());const t=e=>9===e.type?e.expr:[e];for(;e.length>1;){const n=e.shift(),i=e.shift(),r=[];for(const e of t(n))for(const n of t(i))r.push(hf.and(e,n));e.unshift(hf.or(...r))}return e[0]}}const Af=class extends vf{constructor(e,t,n){super(e),C(this,"_defaultValue"),this.key=e,this._defaultValue=t,"object"==typeof n?Af._info.push(b(w({},n),{key:e})):!0!==n&&Af._info.push({key:e,description:n,type:null!=t?typeof t:void 0})}static all(){return Af._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return hf.not(this.key)}isEqualTo(e){return hf.equals(this.key,e)}notEqualsTo(e){return hf.notEquals(this.key,e)}};let Rf=Af;C(Rf,"_info",[]);const Df=Vr("contextKeyService");function Pf(e,t){return e<t?-1:e>t?1:0}function Lf(e,t,n,i){return e<n?-1:e>n?1:t<i?-1:t>i?1:0}class Uf{constructor(e=!0){C(this,"_value"),C(this,"_from"),C(this,"_to"),this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(this._value.charCodeAt(this._to)===Zp.Period){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?tf(e,this._value,0,e.length,this._from,this._to):function(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const s=e.charCodeAt(n),a=t.charCodeAt(r);if(s===a)continue;const l=s-a;if(!(32===l&&rf(a)||-32===l&&rf(s)))return nf(s)&&nf(a)?l:tf(e.toLowerCase(),t.toLowerCase(),n,i,r,o)}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Ff{constructor(e,t){C(this,"_defaultKeybindings"),C(this,"_keybindings"),C(this,"_defaultBoundCommands"),C(this,"_map"),C(this,"_lookupMap"),this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let n=0,i=e.length;n<i;n++){const t=e[n].command;t&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Ff.combine(e,t);for(let n=0,i=this._keybindings.length;n<i;n++){const e=this._keybindings[n];0!==e.keypressParts.length&&(e.when&&e.when.type===df.False||this._addKeyPress(e.keypressParts[0],e))}}static _isTargetedForRemoval(e,t,n,i,r){if(e.command!==i)return!1;if(t&&e.keypressParts[0]!==t)return!1;if(n&&e.keypressParts[1]!==n)return!1;if(r){if(!e.when)return!1;if(!r.equals(e.when))return!1}return!0}static combine(e,t){e=e.slice(0);const n=[];for(const i of t){if(!i.command||0===i.command.length||"-"!==i.command.charAt(0)){n.push(i);continue}const t=i.command.substr(1),r=i.keypressParts[0],o=i.keypressParts[1],s=i.when;for(let n=e.length-1;n>=0;n--)this._isTargetedForRemoval(e[n],r,o,t,s)&&e.splice(n,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(void 0===n)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let i=n.length-1;i>=0;i--){const e=n[i];if(e.command===t.command)continue;const r=e.keypressParts.length>1,o=t.keypressParts.length>1;r&&o&&e.keypressParts[1]!==t.keypressParts[1]||Ff.whenIsEntirelyIncluded(e.when,t.when)&&this._removeFromLookupMap(e)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(void 0!==t)for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return void t.splice(n,1)}static whenIsEntirelyIncluded(e,t){return!t||!!e&&this._implies(e,t)}static _implies(e,t){const n=e=>e.type===df.Or?e.expr:[e],i=n(e.negate()).concat(n(t));for(let r=0;r<i.length;r++){const e=i[r].negate();for(let t=r+1;t<i.length;t++){const n=i[t];if(e.equals(n))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(void 0===t||0===t.length)return[];const n=[];let i=0;for(let r=t.length-1;r>=0;r--)n[i++]=t[r];return n}lookupPrimaryKeybinding(e){const t=this._lookupMap.get(e);return void 0===t||0===t.length?null:t[t.length-1]}resolve(e,t){this._log(`| Resolving ${t}`);let n=null;const i=this._map.get(t);if(void 0===i)return this._log("\\ No keybinding entries."),null;n=i;const r=this._findCommand(e,n);return r?(this._log(`\\ From ${n.length} keybinding entries, matched ${r.command}, when: ${function(e){if(!e)return"no when condition";return`${e.serialize()}`}(r.when)}, source: ${o=r,o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}.`),{leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null);var o}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(Ff.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return!t||t.evaluate(e)}_log(...e){}}var Bf,jf;(jf=Bf||(Bf={}))[jf.DependsOnKbLayout=-1]="DependsOnKbLayout",jf[jf.Unknown=0]="Unknown",jf[jf.Backspace=1]="Backspace",jf[jf.Tab=2]="Tab",jf[jf.Enter=3]="Enter",jf[jf.Shift=4]="Shift",jf[jf.Ctrl=5]="Ctrl",jf[jf.Alt=6]="Alt",jf[jf.PauseBreak=7]="PauseBreak",jf[jf.CapsLock=8]="CapsLock",jf[jf.Escape=9]="Escape",jf[jf.Space=10]="Space",jf[jf.PageUp=11]="PageUp",jf[jf.PageDown=12]="PageDown",jf[jf.End=13]="End",jf[jf.Home=14]="Home",jf[jf.LeftArrow=15]="LeftArrow",jf[jf.UpArrow=16]="UpArrow",jf[jf.RightArrow=17]="RightArrow",jf[jf.DownArrow=18]="DownArrow",jf[jf.Insert=19]="Insert",jf[jf.Delete=20]="Delete",jf[jf.KEY_0=21]="KEY_0",jf[jf.KEY_1=22]="KEY_1",jf[jf.KEY_2=23]="KEY_2",jf[jf.KEY_3=24]="KEY_3",jf[jf.KEY_4=25]="KEY_4",jf[jf.KEY_5=26]="KEY_5",jf[jf.KEY_6=27]="KEY_6",jf[jf.KEY_7=28]="KEY_7",jf[jf.KEY_8=29]="KEY_8",jf[jf.KEY_9=30]="KEY_9",jf[jf.KEY_A=31]="KEY_A",jf[jf.KEY_B=32]="KEY_B",jf[jf.KEY_C=33]="KEY_C",jf[jf.KEY_D=34]="KEY_D",jf[jf.KEY_E=35]="KEY_E",jf[jf.KEY_F=36]="KEY_F",jf[jf.KEY_G=37]="KEY_G",jf[jf.KEY_H=38]="KEY_H",jf[jf.KEY_I=39]="KEY_I",jf[jf.KEY_J=40]="KEY_J",jf[jf.KEY_K=41]="KEY_K",jf[jf.KEY_L=42]="KEY_L",jf[jf.KEY_M=43]="KEY_M",jf[jf.KEY_N=44]="KEY_N",jf[jf.KEY_O=45]="KEY_O",jf[jf.KEY_P=46]="KEY_P",jf[jf.KEY_Q=47]="KEY_Q",jf[jf.KEY_R=48]="KEY_R",jf[jf.KEY_S=49]="KEY_S",jf[jf.KEY_T=50]="KEY_T",jf[jf.KEY_U=51]="KEY_U",jf[jf.KEY_V=52]="KEY_V",jf[jf.KEY_W=53]="KEY_W",jf[jf.KEY_X=54]="KEY_X",jf[jf.KEY_Y=55]="KEY_Y",jf[jf.KEY_Z=56]="KEY_Z",jf[jf.Meta=57]="Meta",jf[jf.ContextMenu=58]="ContextMenu",jf[jf.F1=59]="F1",jf[jf.F2=60]="F2",jf[jf.F3=61]="F3",jf[jf.F4=62]="F4",jf[jf.F5=63]="F5",jf[jf.F6=64]="F6",jf[jf.F7=65]="F7",jf[jf.F8=66]="F8",jf[jf.F9=67]="F9",jf[jf.F10=68]="F10",jf[jf.F11=69]="F11",jf[jf.F12=70]="F12",jf[jf.F13=71]="F13",jf[jf.F14=72]="F14",jf[jf.F15=73]="F15",jf[jf.F16=74]="F16",jf[jf.F17=75]="F17",jf[jf.F18=76]="F18",jf[jf.F19=77]="F19",jf[jf.NumLock=78]="NumLock",jf[jf.ScrollLock=79]="ScrollLock",jf[jf.US_SEMICOLON=80]="US_SEMICOLON",jf[jf.US_EQUAL=81]="US_EQUAL",jf[jf.US_COMMA=82]="US_COMMA",jf[jf.US_MINUS=83]="US_MINUS",jf[jf.US_DOT=84]="US_DOT",jf[jf.US_SLASH=85]="US_SLASH",jf[jf.US_BACKTICK=86]="US_BACKTICK",jf[jf.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",jf[jf.US_BACKSLASH=88]="US_BACKSLASH",jf[jf.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",jf[jf.US_QUOTE=90]="US_QUOTE",jf[jf.OEM_8=91]="OEM_8",jf[jf.OEM_102=92]="OEM_102",jf[jf.NUMPAD_0=93]="NUMPAD_0",jf[jf.NUMPAD_1=94]="NUMPAD_1",jf[jf.NUMPAD_2=95]="NUMPAD_2",jf[jf.NUMPAD_3=96]="NUMPAD_3",jf[jf.NUMPAD_4=97]="NUMPAD_4",jf[jf.NUMPAD_5=98]="NUMPAD_5",jf[jf.NUMPAD_6=99]="NUMPAD_6",jf[jf.NUMPAD_7=100]="NUMPAD_7",jf[jf.NUMPAD_8=101]="NUMPAD_8",jf[jf.NUMPAD_9=102]="NUMPAD_9",jf[jf.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",jf[jf.NUMPAD_ADD=104]="NUMPAD_ADD",jf[jf.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",jf[jf.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",jf[jf.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",jf[jf.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",jf[jf.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",jf[jf.ABNT_C1=110]="ABNT_C1",jf[jf.ABNT_C2=111]="ABNT_C2",jf[jf.MAX_VALUE=112]="MAX_VALUE";class Vf{constructor(){C(this,"_keyCodeToStr"),C(this,"_strToKeyCode"),this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const zf=new Vf,Kf=new Vf,Wf=new Vf;var Hf,$f,qf,Yf,Gf,Xf;!function(){function e(e,t,n=t,i=n){zf.define(e,t),Kf.define(e,n),Wf.define(e,i)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}(),($f=Hf||(Hf={})).toString=function(e){return zf.keyCodeToStr(e)},$f.fromString=function(e){return zf.strToKeyCode(e)},$f.toUserSettingsUS=function(e){return Kf.keyCodeToStr(e)},$f.toUserSettingsGeneral=function(e){return Wf.keyCodeToStr(e)},$f.fromUserSettings=function(e){return Kf.strToKeyCode(e)||Wf.strToKeyCode(e)},(Yf=qf||(qf={}))[Yf.CtrlCmd=2048]="CtrlCmd",Yf[Yf.Shift=1024]="Shift",Yf[Yf.Alt=512]="Alt",Yf[Yf.WinCtrl=256]="WinCtrl",Yf[Yf.KeyCode=255]="KeyCode",(Xf=Gf||(Gf={}))[Xf.CtrlCmd=2048]="CtrlCmd",Xf[Xf.Shift=1024]="Shift",Xf[Xf.Alt=512]="Alt",Xf[Xf.WinCtrl=256]="WinCtrl";class Jf{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}function Qf(e,t){if(0===e)return null;const n=(65535&e)>>>0;if(0!==(4294901760&e)>>>16)throw new Error("chordkeybinding is not su");return function(e,t){const n=!!(2048&e),i=!!(256&e),r=t===Jp.Macintosh?i:n,o=!!(1024&e),s=!!(512&e),a=t===Jp.Macintosh?n:i;return new Jf(r,o,s,a,255&e)}(n,t)}class Zf{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyLabel"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=r}}const eg=Vr("commandService");class tg{constructor(){C(this,"_commands",new Map)}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return!!e&&e.charCodeAt(0)===Zp.Caret&&(e=e.substr(1)),this.registerCommand({id:e,handler:t})}let{id:n}=e;!!n&&n.charCodeAt(0)===Zp.Caret&&(n=n.substr(1));let i=this._commands.get(n);i||(i=new Wo,this._commands.set(n,i));const r=i.unshift(e);return Fo((()=>{r();const e=this._commands.get(n);(null==e?void 0:e.isEmpty())&&this._commands.delete(n)}))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return t[Symbol.iterator]().next().value}getCommands(){const e=new Map;for(const t of this._commands.keys()){const n=this.getCommand(t);n&&e.set(t,n)}return e}clear(){for(const[e,t]of this._commands.entries())t.clear();this._commands.clear()}}const ng="CommandsRegistry";let ig=Reflect.get(globalThis,ng);ig||(ig=new tg,Reflect.set(globalThis,ng,ig));const rg=ig;var og,sg;(sg=og||(og={}))[sg.EditorCore=0]="EditorCore",sg[sg.EditorContrib=100]="EditorContrib",sg[sg.WorkbenchContrib=200]="WorkbenchContrib",sg[sg.BuiltinExtension=300]="BuiltinExtension",sg[sg.ExternalExtension=400]="ExternalExtension";class ag{constructor(){C(this,"_coreKeybindings"),C(this,"_extensionKeybindings"),C(this,"_cachedMergedKeybindings"),this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Qp===Jp.Windows){if(e&&e.win)return e.win}else if(Qp===Jp.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}static bindToCurrentPlatform2(e){if(Qp===Jp.Windows){if(e&&e.win)return e.win}else if(Qp===Jp.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=ag.bindToCurrentPlatform(e);if(t&&t.primary){const n=Qf(t.primary,Qp);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const i=Qf(t.secondary[n],Qp);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,-n-1,e.when)}}setExtensionKeybindings(e){const t=[];let n=0;for(let i=0,r=e.length;i<r;i++){const r=e[i],o=ag.bindToCurrentPlatform2(r);o&&o.primary&&(t[n++]={keybinding:o.primary,command:r.id,commandArgs:r.args,when:r.when,weight1:r.weight,weight2:0,extensionId:r.extensionId||null,isBuiltinExtension:r.isBuiltinExtension||!1})}this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return this.registerKeybindingRule(e),rg.registerCommand(e)}static _mightProduceChar(e){return e>=Bf.KEY_0&&e<=Bf.KEY_9||(e>=Bf.KEY_A&&e<=Bf.KEY_Z||(e===Bf.US_SEMICOLON||e===Bf.US_EQUAL||e===Bf.US_COMMA||e===Bf.US_MINUS||e===Bf.US_DOT||e===Bf.US_SLASH||e===Bf.US_BACKTICK||e===Bf.ABNT_C1||e===Bf.ABNT_C2||e===Bf.US_OPEN_SQUARE_BRACKET||e===Bf.US_BACKSLASH||e===Bf.US_CLOSE_SQUARE_BRACKET||e===Bf.US_QUOTE||e===Bf.OEM_8||e===Bf.OEM_102))}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&ag._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,r,o){Qp===Jp.Windows&&this._assertNoCtrlAlt(e,t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:i,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(dg)),this._cachedMergedKeybindings.slice(0)}clear(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}}let lg=Reflect.get(globalThis,"KeybindingsRegistry");lg||(lg=new ag,Reflect.set(globalThis,"KeybindingsRegistry",lg));const cg=lg;function dg(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}class ug{constructor(e){C(this,"_standardKeyboardEventBrand",!0),C(this,"browserEvent"),C(this,"target"),C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),C(this,"code"),C(this,"_asKeybinding");const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return Hf.fromString(t)}return hg[e.keyCode]||Bf.Unknown}(t),this.code=t.code}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}equals(e){return this._asKeybinding===e}}const hg=new Array(230),pg=new Array(Bf.MAX_VALUE);!function(){for(let t=0;t<pg.length;t++)pg[t]=-1;function e(e,t){hg[e]=t,pg[t]=e}e(3,Bf.PauseBreak),e(8,Bf.Backspace),e(9,Bf.Tab),e(13,Bf.Enter),e(16,Bf.Shift),e(17,Bf.Ctrl),e(18,Bf.Alt),e(19,Bf.PauseBreak),e(20,Bf.CapsLock),e(27,Bf.Escape),e(32,Bf.Space),e(33,Bf.PageUp),e(34,Bf.PageDown),e(35,Bf.End),e(36,Bf.Home),e(37,Bf.LeftArrow),e(38,Bf.UpArrow),e(39,Bf.RightArrow),e(40,Bf.DownArrow),e(45,Bf.Insert),e(46,Bf.Delete),e(48,Bf.KEY_0),e(49,Bf.KEY_1),e(50,Bf.KEY_2),e(51,Bf.KEY_3),e(52,Bf.KEY_4),e(53,Bf.KEY_5),e(54,Bf.KEY_6),e(55,Bf.KEY_7),e(56,Bf.KEY_8),e(57,Bf.KEY_9),e(65,Bf.KEY_A),e(66,Bf.KEY_B),e(67,Bf.KEY_C),e(68,Bf.KEY_D),e(69,Bf.KEY_E),e(70,Bf.KEY_F),e(71,Bf.KEY_G),e(72,Bf.KEY_H),e(73,Bf.KEY_I),e(74,Bf.KEY_J),e(75,Bf.KEY_K),e(76,Bf.KEY_L),e(77,Bf.KEY_M),e(78,Bf.KEY_N),e(79,Bf.KEY_O),e(80,Bf.KEY_P),e(81,Bf.KEY_Q),e(82,Bf.KEY_R),e(83,Bf.KEY_S),e(84,Bf.KEY_T),e(85,Bf.KEY_U),e(86,Bf.KEY_V),e(87,Bf.KEY_W),e(88,Bf.KEY_X),e(89,Bf.KEY_Y),e(90,Bf.KEY_Z),e(93,Bf.ContextMenu),e(96,Bf.NUMPAD_0),e(97,Bf.NUMPAD_1),e(98,Bf.NUMPAD_2),e(99,Bf.NUMPAD_3),e(100,Bf.NUMPAD_4),e(101,Bf.NUMPAD_5),e(102,Bf.NUMPAD_6),e(103,Bf.NUMPAD_7),e(104,Bf.NUMPAD_8),e(105,Bf.NUMPAD_9),e(106,Bf.NUMPAD_MULTIPLY),e(107,Bf.NUMPAD_ADD),e(108,Bf.NUMPAD_SEPARATOR),e(109,Bf.NUMPAD_SUBTRACT),e(110,Bf.NUMPAD_DECIMAL),e(111,Bf.NUMPAD_DIVIDE),e(112,Bf.F1),e(113,Bf.F2),e(114,Bf.F3),e(115,Bf.F4),e(116,Bf.F5),e(117,Bf.F6),e(118,Bf.F7),e(119,Bf.F8),e(120,Bf.F9),e(121,Bf.F10),e(122,Bf.F11),e(123,Bf.F12),e(124,Bf.F13),e(125,Bf.F14),e(126,Bf.F15),e(127,Bf.F16),e(128,Bf.F17),e(129,Bf.F18),e(130,Bf.F19),e(144,Bf.NumLock),e(145,Bf.ScrollLock),e(186,Bf.US_SEMICOLON),e(187,Bf.US_EQUAL),e(188,Bf.US_COMMA),e(189,Bf.US_MINUS),e(190,Bf.US_DOT),e(191,Bf.US_SLASH),e(192,Bf.US_BACKTICK),e(193,Bf.ABNT_C1),e(194,Bf.ABNT_C2),e(219,Bf.US_OPEN_SQUARE_BRACKET),e(220,Bf.US_BACKSLASH),e(221,Bf.US_CLOSE_SQUARE_BRACKET),e(222,Bf.US_QUOTE),e(223,Bf.OEM_8),e(226,Bf.OEM_102),e(229,Bf.KEY_IN_COMPOSITION),Yp?(e(59,Bf.US_SEMICOLON),e(107,Bf.US_EQUAL),e(109,Bf.US_MINUS),$p&&e(224,Bf.Meta)):Gp&&(e(91,Bf.Meta),e($p?93:92,Bf.Meta))}();const fg="paste",gg="click",mg="dblclick",_g="mouseup",vg="mousedown",yg="mousemove",wg="mouseenter",bg="mouseleave",xg="wheel",Cg="keydown",kg="keyup",Eg="resize",Sg="scroll",Ig="focus",Og="blur",Tg="visibilitychange";class Mg{constructor(e,t,n,i){C(this,"_handler"),C(this,"_node"),C(this,"_type"),C(this,"_options"),this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Ng(e,t,n,i){return new Mg(e,t,n,i)}const Ag=function(e,t){return t};class Rg extends jo{constructor(e,t,n,i=Ag,r=8){super();let o=null,s=0;const a=this._register(new Fp),l=()=>{s=(new Date).getTime(),n(o),o=null};this._register(Ng(e,t,(e=>{o=i(o,e);const t=(new Date).getTime()-s;t>=r?(a.cancel(),l()):a.setIfNotSet(l,r-t)})))}}function Dg(e,t){const n=e.parentElement;if(!n)return null;return t(n)?n:Dg(n,t)}class Pg{constructor(e,t,n,i,r,o,s){C(this,"_resolvedKeybindingItemBrand"),C(this,"resolvedKeybinding"),C(this,"keypressParts"),C(this,"bubble"),C(this,"command"),C(this,"commandArgs"),C(this,"when"),C(this,"isDefault"),C(this,"extensionId"),C(this,"isBuiltinExtension"),this.resolvedKeybinding=e,this.keypressParts=e?Lg(e.getDispatchParts()):[],e&&0===this.keypressParts.length&&(this.keypressParts=Lg(e.getSingleModifierDispatchParts())),this.bubble=!!t&&t.charCodeAt(0)===Zp.Caret,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=s}}function Lg(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i)return t;t.push(i)}return t}const Ug=new class{constructor(e,t,n=t){C(this,"modifierLabels"),this.modifierLabels=[null],this.modifierLabels[Jp.Macintosh]=e,this.modifierLabels[Jp.Windows]=t,this.modifierLabels[Jp.Linux]=n}toLabel(e,t,n){if(0===t.length)return null;const i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r],s=n(o);if(null===s)return null;i[r]=Fg(o,s,this.modifierLabels[e])}return i.join(" ")}}({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function Fg(e,t,n){if(null===t)return"";const i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),""!==t&&i.push(t),i.join(n.separator)}class Bg extends class extends class{}{constructor(e,t){if(super(),C(this,"_os"),C(this,"_parts"),0===t.length)throw new Error("400");this._os=e,this._parts=t}getLabel(){return Ug.toLabel(this._os,this._parts,(e=>this._getLabel(e)))}getParts(){return this._parts.map((e=>this._getPart(e)))}_getPart(e){return new Zf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e))}getDispatchParts(){return this._parts.map((e=>this._getDispatchPart(e)))}getSingleModifierDispatchParts(){return this._parts.map((e=>this._getSingleModifierDispatchPart(e)))}}{constructor(e,t){super(t,[e])}_keyCodeToUILabel(e){if(this._os===Jp.Macintosh)switch(e){case Bf.LeftArrow:return"←";case Bf.UpArrow:return"↑";case Bf.RightArrow:return"→";case Bf.DownArrow:return"↓"}return Hf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getDispatchPart(e){return Bg.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Hf.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode!==Bf.Ctrl||e.shiftKey||e.altKey||e.metaKey?e.keyCode!==Bf.Shift||e.ctrlKey||e.altKey||e.metaKey?e.keyCode!==Bf.Alt||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==Bf.Meta||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}}var jg=Object.defineProperty,Vg=Object.getOwnPropertyDescriptor,zg=(e,t)=>(n,i)=>t(n,i,e);const Kg=["input","textarea","select","sp-textfield"];const Wg=["-","=","0"];let Hg=class extends zp{constructor(e,t,n){super(t,n),C(this,"_cachedResolver"),C(this,"_dynamicKeybindings"),C(this,"shouldDispatchKeyEventClassNames",[]),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(Ng(e,Cg,(e=>{if((e.ctrlKey||e.metaKey)&&Wg.includes(e.key)&&e.preventDefault(),!(document.activeElement instanceof HTMLElement))return;const t=this.shouldDispatchKeyEventClassNames.length>0&&this.shouldDispatchKeyEventClassNames.some((e=>!!document.activeElement.closest(`.${e}`)));if(n=document.activeElement,(Kg.includes(n.tagName.toLowerCase())||n.isContentEditable||"true"===n.contentEditable)&&!t)return;var n;const i=new ug(e);this._dispatch(i,i.target)&&(i.preventDefault(),i.stopPropagation())}))),this._register(Ng(e.ownerDocument.defaultView,kg,(e=>{const t=new ug(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})))}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(cg.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Ff(e,t)}return this._cachedResolver}setShouldDispatchKeyEventClassNames(e){this.shouldDispatchKeyEventClassNames=e}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const r of e){const e=r.when||void 0,o=r.keybinding;if(o){const s=this.resolveKeybinding(o);for(const o of s)n[i++]=new Pg(o,r.command,r.commandArgs,e,t,null,!1)}else n[i++]=new Pg(void 0,r.command,r.commandArgs,e,t,null,!1)}return n}resolveKeybinding(e){return[new Bg(e,Qp)]}resolveKeyboardEvent(e){const t=new Jf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Bg(t,Qp)}};Hg=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Vg(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&jg(t,n,o),o})([zg(1,Df),zg(2,eg)],Hg);class $g{constructor(e,t){C(this,"_parent"),C(this,"_value"),C(this,"_id"),this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e=w(w({},e),this._value),delete e._contextId,e}}const qg=class extends $g{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let Yg=qg;C(Yg,"INSTANCE",new qg);const Gg=class extends $g{constructor(e){super(e,null),C(this,"_values",new sf(new Uf))}getValue(e){return 0!==e.indexOf(Gg._keyPrefix)?super.getValue(e):this._values.has(e)?this._values.get(e):null}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach(((t,n)=>e[n]=t)),w(w({},e),super.collectAllValues())}};let Xg=Gg;C(Xg,"_keyPrefix","config.");class Jg{constructor(e,t,n){C(this,"_service"),C(this,"_key"),C(this,"_defaultValue"),this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Qg{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class Zg extends jo{constructor(e){super(),C(this,"_isDisposed"),C(this,"_myContextId"),C(this,"_onDidChangeContext",this._register(new ws)),C(this,"onDidChangeContext",this._onDidChangeContext.event),this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Jg(this,e,t)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return Ff.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new Qg(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Qg(e))}getContext(e=null){return this._isDisposed?Yg.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute("data-keybinding-context")){const t=e.getAttribute("data-keybinding-context");return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}}class em extends Zg{constructor(){super(0),C(this,"_lastContextId"),C(this,"_contexts",new Map),this._lastContextId=0;const e=new Xg(this._myContextId);this._contexts.set(this._myContextId,e)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._contexts.clear()}getContextValuesContainer(e){return this._isDisposed?Yg.INSTANCE:this._contexts.get(e)||Yg.INSTANCE}}var tm=Object.defineProperty,nm=Object.getOwnPropertyDescriptor;let im=class{constructor(e){C(this,"_needEventCommandIds",new Set),this._instantiationService=e}executeCommand(e,...t){const n=rg.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{const e=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}};var rm,om;im=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?nm(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&tm(t,n,o),o})([(rm=0,om=Br,(e,t)=>om(e,t,rm))],im);class sm extends jo{constructor(e){super(),C(this,"id"),C(this,"_kbOpts"),this.id=e.id,this._kbOpts=e.kbOpts}register(){if(this._kbOpts){const e=this._kbOpts.kbExpr;this._register(cg.registerCommandAndKeybindingRule({id:this.id,handler:(e,t)=>this.runCommand(e,t),weight:this._kbOpts.weight,args:this._kbOpts.args,when:e,primary:this._kbOpts.primary,secondary:this._kbOpts.secondary,win:this._kbOpts.win,linux:this._kbOpts.linux,mac:this._kbOpts.mac}))}else this._register(rg.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t)}))}}class am extends sm{static bindToContribution(e){return class extends am{constructor(e){super(e),C(this,"_callback"),this._callback=e.handler}runEditorCommand(t,n,i){e(n)&&this._callback(e(n),i)}}}runCommand(e,t){return e.get(Br).invokeFunction((e=>{const n=e.get(Sl);return this.runEditorCommand(e,n,t)}))}}const lm=class{constructor(){C(this,"editorContributions"),C(this,"editorActions"),C(this,"editorCommands"),this.editorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){return e.register(),this.editorCommands[e.id]=e,Fo((()=>{delete this.editorCommands[e.id]}))}clearEditorCommand(){di(this.editorCommands).forEach((e=>{delete this.editorCommands[e]}))}getEditorCommand(e){return this.editorCommands[e]||null}};let cm=lm;function dm(e){return cm.INSTANCE.registerEditorCommand(e)}function um(e,t){cm.INSTANCE.registerEditorContribution(e,t)}var hm,pm,fm,gm,mm,_m,vm,ym,wm;C(cm,"INSTANCE",new lm),function(e){e.None="None",e.Focus="Focus",e.EditText="EditText",e.DragMove="DragMove",e.DragResize="DragResize",e.DragRotate="DragRotate",e.CanvasResize="CanvasResize"}(hm||(hm={})),(fm=pm||(pm={})).Preview="preview",fm.Editing="Editing",(mm=gm||(gm={})).None="None",mm.WrapAble="WrapAble",mm.UnwrapAble="UnwrapAble",mm.Both="Both",(vm=_m||(_m={})).None="None",vm.GroupAble="GroupAble",vm.UngroupAble="UngroupAble",(wm=ym||(ym={})).hasAnySelection=new Rf("editorHasSelection",!1),wm.editingMode=new Rf("editorEditingMode",hm.None),wm.viewMode=new Rf("editorViewMode",pm.Editing),wm.wrapMode=new Rf("editorWrapMode",gm.None),wm.isAnimationEditing=new Rf("editorIsAnimationEditing",!1);class bm extends jo{constructor(){super(...arguments),C(this,"_handlerMap",new Map)}register(e,t){e.forEach((e=>{if(this._handlerMap.has(e)){this._handlerMap.get(e).push(t)}else{const n=[t];this._handlerMap.set(e,n)}}))}emit(e,t){const n=this._handlerMap.get(e);n&&n.forEach((e=>{e(t)}))}remove(e){for(const t of this._handlerMap.values()){const n=t.findIndex((t=>t===e));-1!==n&&t.splice(n,1)}}clear(){this._handlerMap.clear()}}const xm="PasteHandlerRegistry";let Cm;Reflect.has(Jo,xm)?Cm=Reflect.get(Jo,xm):(Cm=new bm,Reflect.set(Jo,xm,Cm));const km=Cm;var Em=Object.defineProperty,Sm=Object.getOwnPropertyDescriptor,Im=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?Sm(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Em(t,n,o),o},Om=(e,t)=>(n,i)=>t(n,i,e);let Tm=1,Mm=class extends jo{constructor(e,t,n,i,r,o){super(),C(this,"_serviceBrand"),C(this,"_id"),C(this,"_historyHelper"),C(this,"_contributions",new Map),C(this,"_onUpdated",this._register(new ws)),C(this,"_onDidChangeModel",this._register(new ws)),C(this,"onDidChangeModel",this._onDidChangeModel.event),C(this,"_onTextEditorCreated",this._register(new ws)),C(this,"onTextEditorCreated",this._onTextEditorCreated.event),C(this,"_textEditor"),this._instantiationService=e,this.contextKeyService=t,this._model=n,this._viewModel=i,this._view=r,this.undoRedoService=o,this._id=++Tm,e.store(Sl,this),this._historyHelper=e.createInstance(Nm),this._register(new Am(this,t)),this._register(r.onPositionUpdated((()=>this._onUpdated.fire())));const s=cm.INSTANCE.getEditorContributions();for(const l of s)try{this._contributions.set(l.id,this._instantiationService.createInstance(l.ctor))}catch(a){throw a}}get onUpdated(){return this._onUpdated.event}get model(){return this._model}get viewModel(){return this._viewModel}get view(){return this._view}getId(){return this._id}undo(){return this.undoRedoService.undo()}redo(){return this.undoRedoService.redo()}add(e){this._historyHelper.add(e)}checkout(){this._historyHelper.checkout()}commitAndMerge(e){this._historyHelper.commitAndMerge(e)}fork(e){this._historyHelper.fork(e)}transform(e){this._historyHelper.transform(e)}recordSelectionChanges(e){this._historyHelper.recordSelectionChanges(e)}getRichTextEditor(){return this._textEditor}storeRichTextEditor(e){this._textEditor=e,this._onTextEditorCreated.fire()}setMode(e){this.contextKeyService.setContext(ym.viewMode.key,e)}getMode(){return this.contextKeyService.getContextKeyValue(ym.viewMode.key)}replaceModel(e){this.viewModel.internal_disconnect(),this.view.internal_disconnect(),this.model.replaceModel(e),this.viewModel.internal_connect(!0),this.view.internal_connect(),this._onDidChangeModel.fire({})}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}dispose(){super.dispose(),this._instantiationService.dispose();for(const e of this._contributions.values())e.dispose();this._contributions.clear(),cm.INSTANCE.clearEditorCommand(),rg.clear(),cg.clear(),km.clear()}saveSEOHintOfWidgets(){const e=this.view.internal_getWidgetInnerHTML(),t=di(e);t.length&&this.model.changeWithoutHistory((n=>{for(const i of t){const t=e[i];t&&n.updateNodeMetaById(i,{SEOHint:t})}}))}};Mm=Im([Om(0,Br),Om(1,Df),Om(2,zr),Om(3,To),Om(4,No),Om(5,Do)],Mm);let Nm=class{constructor(e,t,n){C(this,"_prevSelections",[]),C(this,"_forkSymbol",null),this.model=e,this.viewModel=t,this.undoRedoService=n}add(e){this._prevSelections=this._getSelection();const{shouldPop:t,record:n}=this.model.internal_add(e);if(t&&this.undoRedoService.pop(),n){const e=this._getSelection(),t=new Mo(this._prevSelections.slice(),e,this.viewModel),i=new Rm(n,t,this.viewModel);this.undoRedoService.push(i)}}checkout(){this.model.internal_checkout()&&this.undoRedoService.pop()}commitAndMerge(e){this._forkSymbol&&e!==this._forkSymbol||(this.model.internal_commitAndMerge(),this._forkSymbol=null)}fork(e){this._forkSymbol||(e&&(this._forkSymbol=e),this._prevSelections=this._getSelection(),this.model.internal_fork())}transform(e){this._prevSelections=this._getSelection();const t=this.model.internal_transform(e);if(t){const e=this._getSelection(),n=new Mo(this._prevSelections.slice(),e,this.viewModel),i=new Rm(t,n,this.viewModel);this.undoRedoService.push(i)}}_getSelection(){return this.viewModel.selection.slice()}recordSelectionChanges(e){const t=this._getSelection();e();const n=this._getSelection();if(Pr(t,n))return;const i=new Mo(t,n,this.viewModel),r=new Rm(null,i,this.viewModel);this.undoRedoService.push(r)}};Nm=Im([Om(0,zr),Om(1,To),Om(2,Do)],Nm);class Am extends jo{constructor(e,t){super(),C(this,"_editor"),C(this,"_hasAnySelection"),C(this,"_WrapMode"),this._editor=e,t.createKey("editorId",e.getId()),this._hasAnySelection=ym.hasAnySelection.bindTo(t),this._WrapMode=ym.wrapMode.bindTo(t),ym.editingMode.bindTo(t),ym.viewMode.bindTo(t),ym.wrapMode.bindTo(t),this._register(this._editor.viewModel.onDidChangeSelection((()=>this._updateFromSelection()))),this._updateFromSelection()}_updateFromSelection(){const{view:e,viewModel:t,model:n}=this._editor,i=t.selection;if(this._WrapMode.reset(),i.length){this._hasAnySelection.set(!0);let t=!1,r=!1;if(i.length<=1){const[e]=i,t=e?n.getNodeById(e):null;t&&uo(t)&&(r=!0)}if(i.length>=1){let r,o=i.some((e=>{const t=n.getNodeById(e);if(!t)return!0;const{from:i}=t;return r||(r=i||"none"),co(t)||r&&i!==r}));if(!o){o=vr(e.getComputedStyleOfId(r))}o||(t=!0)}t&&r?this._WrapMode.set(gm.Both):t||r?this._WrapMode.set(t?gm.WrapAble:gm.UnwrapAble):this._WrapMode.set(gm.None)}else this._hasAnySelection.reset()}}class Rm{constructor(e,t,n){C(this,"stack"),this.modelPart=e,this.viewModelPart=t,this.viewModel=n;try{throw new Error}catch(f8){const t=f8.stack.split("\n");t.splice(0,3),this.stack=t.map((e=>e.trimStart()))}}merge(e){Io()}isVoid(){var e;return(null==(e=this.modelPart)?void 0:e.isVoid())&&this.viewModelPart.isVoid()}undo(){var e;this.viewModel.clearSelection(),null==(e=this.modelPart)||e.undo(),setTimeout((()=>{this.viewModelPart.undo()}))}redo(){var e;this.viewModel.clearSelection(),null==(e=this.modelPart)||e.redo(),setTimeout((()=>{this.viewModelPart.redo()}))}}var Dm,Pm;(Pm=Dm||(Dm={}))[Pm.APPLICATION=1]="APPLICATION";const Lm={properties:{},patternProperties:{}},Um={properties:{},patternProperties:{}};class Fm{constructor(){C(this,"defaultValues"),C(this,"configurationProperties"),C(this,"excludedConfigurationProperties"),this.defaultValues={},this.configurationProperties={},this.excludedConfigurationProperties={}}getConfigurationProperties(){return this.configurationProperties}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=[];e.forEach((e=>{n.push(...this.validateAndRegisterProperties(e,t)),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e,t=!0,n=1){n=ri(e.scope)?n:e.scope;const i=[],r=e.properties;if(r)for(const s in r){if(t&&Vm(s)){delete r[s];continue}const e=r[s];this.updatePropertyDefaultValue(s,e),Xm.test(s)?e.scope=void 0:e.scope=ri(e.scope)?n:e.scope,!r[s].hasOwnProperty("included")||r[s].included?(this.configurationProperties[s]=r[s],!r[s].deprecationMessage&&r[s].markdownDeprecationMessage&&(r[s].deprecationMessage=r[s].markdownDeprecationMessage),i.push(s)):(this.excludedConfigurationProperties[s]=r[s],delete r[s])}const o=e.allOf;if(o)for(const s of o)i.push(...this.validateAndRegisterProperties(s,t,n));return i}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];ii(n)&&(n=t.default),ii(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n}registerJSONConfiguration(e){const t=e=>{const n=e.properties;if(n)for(const t in n)this.updateSchema(t,n[t]);const i=e.allOf;i&&i.forEach(t)};t(e)}updateSchema(e,t){switch(Lm.properties[e]=t,t.scope){case 1:Um.properties[e]=t}}}let Bm=Reflect.get(Jo,"configurationRegistry");Bm||(Bm=new Fm,Reflect.set(Jo,"configurationRegistry",Bm));const jm=Bm;function Vm(e){return e.trim()?Xm.test(e)?`Cannot register '${e}. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`:void 0!==jm.getConfigurationProperties()[e]?`Cannot register '${e}'. This property is already registered.`:null:"Cannot register an empty property"}const zm=Vr("configurationService");var Km,Wm;function Hm(e,t,n){const i=function(e,t){let n=e;for(const i of t){if("object"!=typeof n||null===n)return;n=n[i]}return n}(e,t.split("."));return void 0===i?n:i}function $m(e,t){const n=Object.create(null);for(const i in e)qm(n,i,e[i],t);return n}function qm(e,t,n,i){const r=t.split("."),o=r.pop();let s=e;for(let a=0;a<r.length;a++){const e=r[a];let n=s[e];switch(typeof n){case"undefined":n=s[e]=Object.create(null);break;case"object":break;default:return void i(`Ignoring ${t} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(n)}`)}s=n}if("object"==typeof s&&null!==s)try{s[o]=n}catch(f8){i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}else i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}function Ym(e,t){Gm(e,t.split("."))}function Gm(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const i=e[n];"object"!=typeof i||Array.isArray(i)||(Gm(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}(Wm=Km||(Km={}))[Wm.USER=1]="USER",Wm[Wm.WORKSPACE=2]="WORKSPACE",Wm[Wm.DEFAULT=3]="DEFAULT",Wm[Wm.MEMORY=4]="MEMORY";const Xm=new RegExp("\\[.*\\]$");function Jm(e){return e.substring(1,e.length-1)}class Qm{constructor(e={},t=[],n=[]){C(this,"isFrozen",!1),this._contents=e,this._keys=t,this._overrides=n}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?Hm(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?Hm(n,e):n:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;const n={};for(const i of function(e,t){if(!t)return e.filter(((t,n)=>e.indexOf(t)===n));const n=Object.create(null);return e.filter((e=>{const i=t(e);return!n[i]&&(n[i]=!0,!0)}))}([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[i];const r=t[i];r&&("object"==typeof e&&"object"==typeof r?(e=li(e),this.mergeContents(e,r)):e=r),n[i]=e}return new Qm(n,this.keys,this.overrides)}merge(...e){const t=li(this.contents),n=li(this.overrides),i=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const e of r.overrides){const[t]=n.filter((t=>Dr(t.identifiers,e.identifiers)));t?this.mergeContents(t.contents,e.contents):n.push(li(e))}for(const e of r.keys)-1===i.indexOf(e)&&i.push(e)}return new Qm(t,i,n)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const n of Object.keys(t))n in e&&si(e[n])&&si(t[n])?this.mergeContents(e[n],t[n]):e[n]=li(t[n])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const n in e)if(ui.call(e,n)){const i=e[n];"object"!=typeof i||Object.isFrozen(i)||t.push(i)}}return e}(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}setValue(e,t){this.addKey(e),qm(this.contents,e,t,(e=>{throw new Error(e)}))}removeValue(e){this.removeKey(e)&&Ym(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)0===e.indexOf(this.keys[n])&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}class Zm{constructor(e,t=new Qm,n=new Qm,i=!0){C(this,"_workspaceConsolidatedConfiguration",null),this._defaultConfiguration=e,this._workspaceConfiguration=t,this._memoryConfiguration=n,this._freeze=i}getValue(e){return this.getConsolidateConfigurationModel().getValue(e)}updateValue(e,t){const n=this._memoryConfiguration;void 0===t?n.removeValue(e):n.setValue(e,t)}inspect(e){return{value:this.getConsolidateConfigurationModel().getValue(e)}}get defaults(){return this._defaultConfiguration}getConsolidateConfigurationModel(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys}}}static parseConfigurationModel(e){return new Qm(e.contents,e.keys,e.overrides).freeze()}}class e_ extends Qm{constructor(){const e=function(){const e=Object.create(null),t=jm.getConfigurationProperties();for(const n in t)qm(e,n,t[n].default,(e=>console.error(`Conflict in default settings: ${e}`)));return e}(),t=function(){const e=jm.getConfigurationProperties();return Object.keys(e)}(),n=[];for(const i of Object.keys(e))Xm.test(i)&&n.push({identifiers:[Jm(i).trim()],keys:Object.keys(e[i]),contents:$m(e[i],(e=>console.error(`Conflict in default settings file: ${e}`)))});super(e,t,n)}}class t_ extends jo{constructor(){super(),C(this,"configuration"),this.configuration=new Zm(new e_)}getValue(e){const t="string"==typeof e?e:void 0;return this.configuration.getValue(t)}async updateValue(e,t){const n=this.deriveConfigurationTarget(e,t);return n?this.writeConfigurationValue(e,t,n):Promise.resolve(null)}inspect(e){return this.configuration.inspect(e)}deriveConfigurationTarget(e,t){if(void 0===t)return;return ci(t,this.inspect(e).value)?void 0:Km.USER}writeConfigurationValue(e,t,n){if(n===Km.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(n===Km.MEMORY)return this.configuration.updateValue(e,t),Promise.resolve(null);throw new Error("500")}}var n_,i_,r_,o_;function s_(e,t,n){return{width:e.width,height:e.height,top:e.top+n,right:e.right+t,bottom:e.bottom+n,left:e.left+t,mx:e.mx}}(i_=n_||(n_={}))[i_.Unknown=0]="Unknown",i_[i_.Canvas=1]="Canvas",i_[i_.Widgets=2]="Widgets",(o_=r_||(r_={})).None="",o_.Canvas="canvas",o_.CanvasOverlay="canvasOverlay",o_.ComponentOverlay="componentOverlay",o_.ContentWidget="contentWidget";class a_{static write(e,t){e.setAttribute("data-fprt",String(t))}static read(e){const t=e.getAttribute("data-fprt");return null===t?r_.None:t}static collect(e){const t=[];let n=0;for(;e&&"BODY"!==e.tagName;){const i=Object.create(null);if(e.hasAttribute("data-fprt")){const r=this.read(e);a_.shouldNotBeMeasured(r)||a_.shouldIgnoreElement(e)||(i.fingerprint=r,e.hasAttribute("data-id")&&(i.id=e.getAttribute("data-id")),e.hasAttribute("data-drag")&&(i.draggable=!0),i.detail=e.getAttribute("data-detail"),t[n++]=i)}e=e.parentElement}return t.reverse()}static shouldNotBeMeasured(e){return!!e.endsWith("__in_shadow")}static shouldNotBeSelected(e){return a_.shouldNotBeMeasured(e)}static shouldIgnoreElement(e){return!!e.hasAttribute("data-in-shadow")}}class l_{static isChildOfCanvas(e){return function(e,t){for(const n of e)if(t(n))return!0;return!1}(e,(e=>e.fingerprint===r_.Canvas))}static isCanvasOverlay(e){var t;return(null==(t=e[e.length-1])?void 0:t.fingerprint)===r_.CanvasOverlay}static isTransparentContentWidget(e){var t;return(null==(t=e[e.length-1])?void 0:t.fingerprint)===r_.ContentWidget}static isBlockingContentWidget(e){if(this.isDraggableWidget(e))return!0;const t=Mr(e,(e=>e.fingerprint===r_.ContentWidget));return t>-1&&e.length>1&&t<e.length-1}static isDraggableWidget(e){var t;return!!(null==(t=e[e.length-1])?void 0:t.draggable)}}var c_,d_,u_,h_;(d_=c_||(c_={})).none="",d_.top="top",d_.left="left",d_.bottom="bottom",d_.right="right",(h_=u_||(u_={}))[h_.top=1]="top",h_[h_.right=2]="right",h_[h_.bottom=4]="bottom",h_[h_.left=8]="left";function p_(e){const t=Ad("scrolls");return wd((()=>({offsetTop:e.fixed?t.scrollY:0,offsetLeft:e.fixed?t.scrollX:0})))}function f_(e){const t=wd((()=>e.rect)),n=p_(e.rect),i=wd((()=>{const i=t.value,r={position:"absolute",transform:e.vmx?Hi(e.vmx):"none"};return e.top?Object.assign(r,{top:Yi(i.top+n.value.offsetTop),left:Yi(i.left+i.width/2+n.value.offsetLeft)}):e.bottom&&Object.assign(r,{top:Yi(i.top+i.height+n.value.offsetTop),left:Yi(i.left+i.width/2+n.value.offsetLeft)}),r})),r=wd((()=>{const t={position:"absolute"};return e.top?Object.assign(t,{top:"0px",left:"0px",transform:"translate(-50%, -50%)",transformOrigin:"top left"}):e.bottom?Object.assign(t,{bottom:"0px",left:"0px",transform:"translate(-50%, 50%)",transformOrigin:"top left"}):e.left?Object.assign(t,{left:"0px",top:"0px",transform:"translate(-50%, -50%)"}):e.right&&Object.assign(t,{right:"0px",top:"0px",transform:"translate(50%, -50%)"}),t})),o=wd((()=>{let t=c_.none;return e.top?t=c_.top:e.bottom?t=c_.bottom:e.left?t=c_.left:e.right&&(t=c_.right),t}));return Zu("div",{className:"add-section-box","data-fprt":"addSection","data-ref":e.id,"data-direction":o.value,style:i.value},[Zu("div",{style:r.value},[Zu("div",{className:"add-section-button"},[Zu("div",{className:"button-content"},[Zu("svg",{class:"button-icon",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Zu("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.25 12.75L3 12.75L3 11.25L11.25 11.25L11.25 3L12.75 3L12.75 11.25L21 11.25L21 12.75L12.75 12.75L12.75 21L11.25 21L11.25 12.75Z"},null)])])])])])}function g_(e){const t=wd((()=>b(w({},e.vmx),{tx:-5,ty:-5}))),n=wd((()=>({position:e.fixed?"fixed":"absolute",top:Yi(e.y),left:Yi(e.x),width:Yi(10),height:Yi(10),"box-sizing":"border-box","background-color":"#116dff","border-radius":"50%",transform:t.value?Hi(t.value):"none"})));return Zu("div",{style:n.value},null)}function m_(e){return Zu(Pu,null,[e.dot&&Zu(g_,{x:e.left,y:e.top,vmx:e.vmx,fixed:e.fixed},null)])}function __(e){return Zu(Pu,null,[e.dot&&Zu(g_,{x:e.left,y:e.top,vmx:e.vmx,fixed:e.fixed},null)])}function v_(e){return Reflect.has(e,"width")?Zu(__,e,null):Zu(m_,e,null)}class y_{static parse(e){let t;const n=parseFloat;if(t=/matrix\s*\((.+)\)/i.exec(e)){let e=t[1].split(",");return 6!==e.length&&(e=t[1].split(" ")),{a:n(e[0]),b:n(e[1]),c:n(e[2]),d:n(e[3]),tx:n(e[4]),ty:n(e[5])}}throw new Error("500")}static get Identity(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}}static translate(e,t){const n=e.tx+t.x,i=e.ty+t.y;return b(w({},e),{tx:n,ty:i})}static scale(e,t,n){let i=n?y_.translate(e,n):{a:e.a,b:e.b,c:e.c,d:e.d,tx:e.tx,ty:e.ty};return i.a*=t.x,i.b*=t.x,i.c*=t.y,i.d*=t.y,n&&(i=y_.translate(i,class{static negate(e){return{x:-e.x,y:-e.y}}}.negate(n))),i}}const w_="rgb(105, 185, 255)",b_={background:"transparent",top:"0px",left:"0px",color:w_,"font-size":"10px","font-family":"PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,Helvetica Neue,Arial,sans-serif","user-select":"none","z-index":"-1","pointer-events":"none"};function x_(e){const t=wd((()=>w({"border-left":`1px dashed ${w_}`,position:e.fixed?"fixed":"absolute",transform:Hi(y_.translate(y_.Identity,{x:e.left,y:e.height>0?e.top:e.top+e.height})),height:Yi(Math.abs(e.height)),"line-height":`${Math.abs(e.height)}px`,"padding-left":"8px","user-select":"none","z-index":"-1"},b_))),n=wd((()=>({display:"inline-block",transform:e.vmx?Hi(e.vmx):"none","transform-origin":"left center"})));return Zu(Pu,null,[Zu("div",{className:"dockline dockline_vertical",style:t.value},[Zu("span",{style:n.value},[e.text])])])}function C_(e){const t=wd((()=>w({"border-top":`1px dashed ${w_}`,position:e.fixed?"fixed":"absolute",transform:Hi(y_.translate(y_.Identity,{x:e.width>0?e.left:e.left+e.width,y:e.top})),width:Yi(Math.abs(e.width)),"text-align":"center","padding-top":"8px"},b_))),n=wd((()=>({display:"inline-block",transform:e.vmx?Hi(e.vmx):"none","transform-origin":"center top"})));return Zu(Pu,null,[Zu("div",{className:"dockline dockline_horizontal",style:t.value},[Zu("span",{style:n.value},[e.text])])])}function k_(e){return Reflect.has(e,"width")?Zu(C_,e,null):Zu(x_,e,null)}function E_(e){if(!e)return{bottom:0,right:0,top:0,left:0,width:0,height:0};const{width:t,height:n,mx:i,top:r,left:o}=e;if(!i)return{left:o,top:r,right:o+t,bottom:r+n,width:t,height:n};const s=i.a,a=i.b,l=-t/2,c=t/2,d=t/2,u=-t/2,h=n/2,p=n/2,f=-n/2,g=-n/2,m=l*s+h*a,_=-l*a+h*s,v=c*s+p*a,y=-c*a+p*s,w=d*s+f*a,b=-d*a+f*s,x=u*s+g*a,C=-u*a+g*s,k=Math.min(m,v,w,x),E=Math.max(m,v,w,x),S=Math.min(_,y,b,C),I=E-k,O=Math.max(_,y,b,C)-S,T=e.left+e.width/2-I/2,M=e.top+e.height/2-O/2;return{left:T,top:M,right:T+I,bottom:M+O,width:I,height:O}}const S_=e=>e?"rgba(255,79,149,1)":"rgba(37,118,240,1)",I_=e=>e?"rgba(255,79,149,.6)":"rgba(39, 126, 255, 0.6)";function O_(e){const t=wd((()=>({zIndex:3,cursor:"ns-resize",height:Yi(8),position:"absolute",left:Yi(-e.width/2),width:Yi(e.width),top:Yi(e.direct&u_.top?-e.height/2-4:e.height/2-4)})));return Zu("div",{className:"ns-resize","data-detail":e.direct,"data-drag":!0,"data-fprt":"dragResize",style:t.value},null)}function T_(e){const t=wd((()=>({zIndex:3,cursor:"ew-resize",width:Yi(8),position:"absolute",top:Yi(-e.height/2),height:Yi(e.height),left:Yi(e.direct&u_.left?-e.width/2-4:e.width/2-4)})));return Zu("div",{className:"ew-resize","data-detail":e.direct,"data-drag":!0,"data-fprt":"dragResize",style:t.value},null)}function M_(e){const t=Ad("i18nService"),n=wd((()=>({color:e.color,position:"absolute",transform:"translateY(-100%)",top:"-4px",left:"0","font-family":"sans-serif","font-size":"11px","white-space":"nowrap"}))),i=wd((()=>t.t(e.label)));return Zu("div",{style:n.value},[i.value])}function N_(e){const t=wd((()=>e.direct&u_.top?-e.height/2-4+1:e.direct&u_.bottom?e.height/2-4-1:-4)),n=wd((()=>e.direct&u_.left?-e.width/2-4+1:e.direct&u_.right?+e.width/2-4-1:-4)),i=wd((()=>{switch(e.direct){case u_.top:case u_.bottom:return"ns-resize";case u_.left:case u_.right:return"ew-resize";case u_.top|u_.right:case u_.bottom|u_.left:return"nesw-resize";default:return"nwse-resize"}})),r=S_(e.isAnimationEditing),o=wd((()=>({position:"absolute",top:Yi(t.value),left:Yi(n.value),width:Yi(8),height:Yi(8),"box-sizing":"border-box","background-color":"#fff",border:`1px solid ${r}`,"border-radius":"50%",cursor:i.value,zIndex:3,transform:e.vmx?Hi(e.vmx):"none"})));return Zu("span",{"data-detail":e.direct,"data-drag":!0,"data-fprt":"dragResize",style:o.value},null)}function A_(e){const t=wd((()=>({display:"flex","justify-content":"center","align-items":"center","pointer-events":"auto",cursor:"grab",top:Yi(-e.height/2),left:Yi(-e.width/2),"border-bottom-right-radius":"20%",padding:Yi(5),background:S_(e.isAnimationEditing),position:"absolute",zIndex:3})));return Zu("div",{style:t.value,"data-fprt":"dragMove","data-drag":!0,"data-detail":e.handle},[Zu("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg","data-hook":"drag-handle"},[Zu("path",{fill:"#c3daff",d:"M3 7v2H1V7h2zm6 0v2H7V7h2zM3 1v2H1V1h2zm6 0v2H7V1h2z","fill-rule":"evenodd"},null)])])}function R_(e){var t,n,i,r;const{resizable:o,vscale:s,isAnimationEditing:a=!1}=e,l=p_(e),c=wd((()=>({top:e.top+l.value.offsetTop,left:e.left+l.value.offsetLeft,width:e.width,height:e.height,mx:e.mx,fixed:e.fixed}))),d=wd((()=>y_.scale(y_.Identity,{x:1/s,y:1/s})));return Zu(Pu,null,[!e.isAnimationEditing&&Zu(Pu,null,[e.grid&&Zu(V_,sh(e.grid,{fixed:e.fixed}),null),(null==(t=e.addSection)?void 0:t.top)&&Zu(f_,{top:!0,id:e.id,vmx:d.value,rect:c.value},null),(null==(n=e.addSection)?void 0:n.right)&&Zu(f_,{right:!0,id:e.id,vmx:d.value,rect:c.value},null),(null==(i=e.addSection)?void 0:i.bottom)&&Zu(f_,{bottom:!0,id:e.id,vmx:d.value,rect:c.value},null),(null==(r=e.addSection)?void 0:r.left)&&Zu(f_,{left:!0,id:e.id,vmx:d.value,rect:c.value},null),e.dock&&e.dock.length>0&&e.dock.map((t=>Zu(v_,sh(t,{vmx:d.value,fixed:e.fixed}),null))),e.dock&&e.dock.length>0&&e.dock.map((t=>Zu(k_,sh(t,{vmx:d.value,fixed:e.fixed}),null))),e.parent&&Zu(P_,sh({color:I_(a)},e.parent,{fixed:e.fixed}),null),e.padding&&Zu(z_,sh(e.padding,{fixed:e.fixed}),null)]),e.show&&Zu(P_,sh(e,{eventable:!0,color:S_(a)}),{default:()=>{var t;return[e.rotate&&Zu(F_,sh({id:e.rotate,vmx:d.value},e),null),(null==(t=e.draggable)?void 0:t.handle)&&Zu(A_,sh(e.draggable,{width:e.width,height:e.height,isAnimationEditing:a}),null),(null==o?void 0:o.top)&&Zu(O_,sh({direct:u_.top,id:u_.top},e),null),(null==o?void 0:o.bottom)&&Zu(O_,sh({direct:u_.bottom,id:u_.bottom},e),null),(null==o?void 0:o.left)&&Zu(T_,sh({direct:u_.left,id:u_.left},e),null),(null==o?void 0:o.right)&&Zu(T_,sh({direct:u_.right,id:u_.right},e),null),(null==o?void 0:o.top)&&o.right&&Zu(N_,sh({direct:u_.top|u_.right,id:u_.top|u_.right,vmx:d.value},e),null),(null==o?void 0:o.right)&&o.bottom&&Zu(N_,sh({direct:u_.right|u_.bottom,id:u_.right|u_.bottom,vmx:d.value},e),null),(null==o?void 0:o.bottom)&&o.left&&Zu(N_,sh({direct:u_.bottom|u_.left,id:u_.bottom|u_.left,vmx:d.value},e),null),(null==o?void 0:o.left)&&o.top&&Zu(N_,sh({direct:u_.left|u_.top,id:u_.left|u_.top,vmx:d.value},e),null)]}}),e.show&&e.mx&&Zu(P_,sh(e,{label:void 0,mx:void 0}),null)])}function D_(e,{slots:t}){const n=p_(e),i=wd((()=>{const t={position:"absolute",top:Yi(e.top+e.height/2+n.value.offsetTop),left:Yi(e.left+e.width/2+n.value.offsetLeft),width:"0px",height:"0px",transform:e.mx?Hi(b(w({},e.mx),{tx:0,ty:0})):"none"};return e.eventable||(t["pointer-events"]="none"),t}));return Zu("div",{className:"outline-wrapper",style:i.value},[t.default?lh(t,"default"):null])}function P_(e,{slots:t}){const{isAnimationEditing:n}=e,i=wd((()=>({position:"absolute",top:Yi(-e.height/2),left:Yi(-e.width/2),transform:e.vmx?Hi(e.vmx):"none","transform-origin":"left bottom"})));return Zu(D_,e,{default:()=>[Zu(L_,sh({color:I_(n)},e),null),!!e.label&&Zu("div",{className:"label-wrapper",style:i.value},[Zu(M_,{label:e.label,color:S_(n)},null)]),t.default?lh(t,"default"):null]})}function L_(e){const t=wd((()=>e.color||"rgba(39, 126, 255, 0.6)")),{dashed:n=!1,style:i={},borderWidth:r=1}=e,o=`${r}px ${n?"dashed":"solid"} ${t.value}`,s=wd((()=>w({position:"absolute",zIndex:-100,"pointer-events":"none"},i))),a=wd((()=>b(w({},s.value),{left:Yi(-e.width/2),top:Yi(-e.height/2),width:Yi(e.width),height:Yi(r),borderTop:o}))),l=wd((()=>b(w({},s.value),{left:Yi(e.width/2),top:Yi(-e.height/2),width:Yi(r),height:Yi(e.height),borderLeft:o}))),c=wd((()=>b(w({},s.value),{left:Yi(-e.width/2),top:Yi(e.height/2),width:Yi(e.width+r),height:Yi(r),borderTop:o}))),d=wd((()=>b(w({},s.value),{left:Yi(-e.width/2),top:Yi(-e.height/2),width:Yi(r),height:Yi(e.height),borderLeft:o})));return Zu(Pu,null,[Zu("div",{className:"simple-outline_top",style:a.value},null),Zu("div",{className:"simple-outline_right",style:l.value},null),Zu("div",{className:"simple-outline_bottom",style:c.value},null),Zu("div",{className:"simple-outline_left",style:d.value},null)])}function U_(e){const t=wd((()=>e.map((e=>{const t=E_(e);return b(w({},e),{bound:t})})))),n=wd((()=>t.value.filter((e=>!e.ignorable)).length>0)),i=wd((()=>{const n=t.value,i=li(n[0]);let{bound:r,resizable:o,draggable:s,fixed:a,stretch:l,unstretch:c,isAnimationEditing:d=!1,vscale:u=1}=i;if(e.length<=1)return b(w(w({},i),r),{mx:void 0});let{width:h,left:p,top:f,height:g}=r,m=p+h,_=f+g;for(let e=1;e<n.length;e++){const t=n[e];if(t.ignorable)continue;const{bound:i}=t;p=Math.min(p,i.left),m=Math.max(m,i.left+i.width),f=Math.min(f,i.top),_=Math.max(_,i.top+i.height),o&&Object.keys(o).forEach((e=>{var n,i;o[e]=null!=(i=o[e]||(null==(n=t.resizable)?void 0:n[e]))&&i})),s=s||(null==t?void 0:t.draggable),a=a||t.fixed}return{left:p,top:f,width:m-p,height:_-f,resizable:o,draggable:s,fixed:a,show:!0,vscale:u,isAnimationEditing:d}}));return()=>!e||e.length<=0?Zu(Pu,null,[null]):Zu(Pu,null,[e.map((e=>Zu(P_,sh(e,{color:e.ignorable?S_(e.isAnimationEditing):I_(e.isAnimationEditing),borderWidth:e.ignorable?2:1,label:void 0}),null))).concat(n.value?Zu(R_,i.value,null):null)])}function F_(e){const t=wd((()=>({display:"flex","align-items":"center","justify-content":"center",position:"absolute",width:Yi(20),height:Yi(20),background:"#fff","box-shadow":"0 2px 7px 0 rgb(0 6 36 / 27%)","border-radius":"50%",cursor:"pointer",bottom:Yi(-30),marginLeft:Yi(-10),fill:S_(e.isAnimationEditing),zIndex:3}))),n=wd((()=>({position:"absolute",top:Yi(e.height/2),left:"0px",width:"0px",height:"0px",transform:e.vmx?Hi(e.vmx):"none"})));return Zu("div",{className:"rotate-wrapper",style:n.value},[Zu("div",{style:t.value,"data-drag":!0,"data-fprt":"dragRotate","data-detail":e.id},[Zu("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},[Zu("path",{"fill-rule":"evenodd",d:"M9.535 2.465A4.967 4.967 0 006 1a4.968 4.968 0 00-3.535 1.465L1 1v4h4L3.172 3.172c1.51-1.512 4.145-1.512 5.656 0A3.973 3.973 0 0110 6a3.971 3.971 0 01-1.172 2.828c-1.512 1.512-4.146 1.512-5.657 0l-.707.707A4.965 4.965 0 006 11c1.336 0 2.59-.52 3.535-1.465A4.967 4.967 0 0011 6a4.967 4.967 0 00-1.465-3.535"},null)])])])}function B_(e){const t={position:"absolute",top:Yi(e.top),left:Yi(e.left),width:"0px",height:Yi(e.height)},n={position:"absolute",top:"0px",left:"0px",height:"100%",width:Yi(10),transform:"translateX(-50%)","background-position":"center center","background-image":"linear-gradient(rgba(89,93,112,.6) 37.5%,rgba(226,227,234,.6) 0,rgba(226,227,234,.6) 50%,transparent 0)","background-size":"1px 8px","background-repeat":"repeat-y"};return Zu("div",{className:"column-line",style:t},[Zu("div",{style:n},null)])}function j_(e){const t={position:"absolute",top:Yi(e.top),left:Yi(e.left),width:Yi(e.width),height:"0px"},n={position:"absolute",top:"0px",left:"0px",height:Yi(10),width:"100%",transform:"translateY(-50%)","background-position":"center center","background-image":"linear-gradient(90deg,rgba(89,93,112,.6) 37.5%,rgba(226,227,234,.6) 0,rgba(226,227,234,.6) 50%,transparent 0)","background-size":"8px 1px","background-repeat":"repeat-x"};return Zu("div",{className:"row-line",style:t},[Zu("div",{style:n},null)])}function V_(e){const t=[];for(let o=0,s=e.columns.length,a=0;o<s&&(0===o?e.paddingLeft&&(a+=e.paddingLeft):e.columnGap&&(a+=e.columnGap,t.push(a)),o!==s-1);o++)a+=e.columns[o],t.push(a);const n=[];for(let o=0,s=e.rows.length,a=0;o<s&&(0===o?e.paddingTop&&(a+=e.paddingTop):e.rowGap&&(a+=e.rowGap,n.push(a)),o!==s-1);o++)a+=e.rows[o],n.push(a);const i=p_(e),r=wd((()=>({position:"absolute",left:Yi(e.rect.left+i.value.offsetLeft),top:Yi(e.rect.top+i.value.offsetTop),width:Yi(e.rect.width),height:Yi(e.rect.height),"box-sizing":"border-box","pointer-events":"none"})));return Zu("div",{className:"grid-outline"},[Zu("div",{className:"grid-rect",style:r.value},null),t.map(((t,n)=>Zu(B_,{top:e.rect.top+e.paddingTop,height:e.rect.height-e.paddingTop-e.paddingBottom,left:e.rect.left+t,start:n+1},null))),n.map(((t,n)=>Zu(j_,{top:e.rect.top+t,width:e.rect.width-e.paddingLeft-e.paddingRight,left:e.rect.left,start:n+1},null)))])}function z_(e){if(!(e.paddingTop||e.paddingRight||e.paddingBottom||e.paddingLeft))return null;const t={position:"absolute",left:Yi(e.left),top:Yi(e.top),width:Yi(e.width),height:Yi(e.height),"box-sizing":"border-box","border-color":"rgba(7, 184, 113, 0.25)","border-style":"solid",borderTopWidth:Yi(e.paddingTop),borderRightWidth:Yi(e.paddingRight),borderBottomWidth:Yi(e.paddingBottom),borderLeftWidth:Yi(e.paddingLeft),zIndex:-10,"pointer-events":"none"};return Zu("div",{style:t,className:"padding"},null)}var K_=Object.defineProperty,W_=Object.getOwnPropertyDescriptor;let H_=class extends jo{constructor(e,t,n){super(),this.props=e,this.scrolls=t,this.i18nService=n}render(e){const t=wp(U_(this.props));t.provide("scrolls",this.scrolls),t.provide("i18nService",this.i18nService),t.mount(e),this._register(Fo((()=>t.unmount())))}};function $_(e){return e.dataset.fprt}function q_(e,t){const{model:n,view:i}=t,r=n.getAncestorNodesOfId(e),o=i.getViewport().logicWidth,s=n.getMatchedStyle(e,o);if(1===r.length)return"fixed"===s.getAttr("position");if(r.length>1&&!ao(r[1])){const e=r[1];return"fixed"===n.getMatchedStyle(e.id).getAttr("position")}return!1}function Y_(e,t){return"fixed"===getComputedStyle(t.view.getElementById(e)).position}function G_(e,t){const{model:n}=t,i=n.getParentNodeOfId(e),r=n.getNodeById(e);return!!i&&(!ao(i)&&(!co(r)||Y_(e,t)))}H_=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?W_(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&K_(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(2,Ol)],H_);class X_{constructor(){C(this,"_pending")}push(e){this.clear(),this._pending=requestAnimationFrame((()=>{e(),this.clear()}))}clear(){this._pending&&(cancelAnimationFrame(this._pending),this._pending=null)}dispose(){this.clear()}}class J_ extends jo{constructor(e,t,n){super(),C(this,"_cloned"),C(this,"_queue"),this._target=e,this._fromRect=t,this._editor=n,this._register(this._queue=new X_)}render(e){this._cloned=this._target.cloneNode(!0),e.appendChild(this._cloned);const t=this._cloned.querySelector("web-widget");t&&t.remove(),this._cloned.removeAttribute("data-hide");const n=this._fromRect.top,i=this._fromRect.left,r=y_.translate(this._fromRect.mx||y_.Identity,{x:i,y:n});Object.assign(this._cloned.style,{position:"absolute","user-select":"none",left:Yi(this._fromRect.left),top:Yi(this._fromRect.top),width:Yi(this._fromRect.width),height:Yi(this._fromRect.height),margin:"0",mx:Hi(r)})}update(e){Object.assign(this._cloned.style,{left:Yi(e.left),top:Yi(e.top),width:Yi(e.width),height:Yi(e.height)})}}var Q_,Z_;(Z_=Q_||(Q_={})).width="width",Z_.height="height";const ev={top:Q_.height,bottom:Q_.height,left:Q_.width,right:Q_.width,width:Q_.width,"min-width":Q_.width,"max-width":Q_.width,height:Q_.height,"min-height":Q_.height,"max-height":Q_.height,"padding-top":Q_.width,"padding-right":Q_.width,"padding-bottom":Q_.width,"padding-left":Q_.width,"margin-top":Q_.width,"margin-right":Q_.width,"margin-bottom":Q_.width,"margin-left":Q_.width};function tv(e,t,n,i,r){let o="";if(hi(n,fi.badRequest),hi(r,fi.badRequest),n===Fi.px)o=`${e}px`;else{if(n===Fi["%"]){return vi(e/i[ev[t]])}if(n===Fi.vw)return e/r.logicWidth*100+"vw";if(n===Fi.vh)return e/r.logicHeight*100+"vh";console.warn(fi.notFound)}return o}function nv(e){const t=/([1-9]\d*\.?\d*|0\.\d*[1-9])/,n=t.exec(e);if(!n)return e;const[,i]=n,r=parseFloat(i).toFixed(2);return e.replace(t,r)}class iv{constructor(e,t,n,i){C(this,"fromX"),C(this,"fromY"),C(this,"fromRects"),C(this,"scale"),C(this,"toX",null),C(this,"toY",null),C(this,"posX"),C(this,"posY"),C(this,"fromMarginsX",new Map),C(this,"fromMarginsY",new Map),this._targetIds=t,this.editor=n,this.dir=i,this.fromX=e.event.screenX,this.fromY=e.event.screenY,this.fromRects=new Map,this._targetIds.forEach((e=>{const t=li(n.view.getElementRectById(e));this.fromRects.set(e,t)}));const r=n.view.getViewport();this.scale=r.scale}get isCornerResize(){const{dir:e}=this;return[u_.bottom,u_.top,u_.left,u_.right].filter((t=>t&e)).length>1}get targetIds(){return this._targetIds}get deltaX(){return ri(this.toX)?0:(this.toX-this.fromX)/this.scale}get deltaY(){return ri(this.toY)?0:(this.toY-this.fromY)/this.scale}moveTo(e){const{screenX:t,screenY:n,posX:i,posY:r}=e.event;this.posX=i,this.posY=r,t===this.toX&&n===this.toY||(this.toX=t,this.toY=n,this._commit(this.deltaX,this.deltaY))}getOverrideStyle(e,t,n){const{dir:i}=this,r=this.editor.model,o=this.editor.view,s=r.getParentNodeOfId(e),a=o.getElementRectById(s.id),l=this.fromRects.get(e),c=function(e,t){const n=e.getParentNodeOfId(t);return vr(e.getMatchedStyle(null==n?void 0:n.id).attrs)}(r,e);let d=this.fromMarginsX.get(e),u=this.fromMarginsY.get(e);const h=Object.create(null),p=o.getViewport(),f=r.getNodeById(e),g=no(f)||io(f)||oo(f),m=r.getMatchedStyle(e,p.logicWidth),_=co(f),v=yr(m.attrs),y=g&&nr(m.getAttr("aspect-ratio")),w=o.getComputedStyleOfId(e),b=mr(m.attrs),x=gr(m.attrs),C=t;let k=n;const E=_&&!v||c,S=!qi(m.attrs.width),I=!qi(m.attrs.height),O=(e,t)=>tv(t,e,Zi(m.getAttr(e))||Fi.px,a,p);if(y){const{width:e,height:t}=l;if(this.isCornerResize){const n=e/t;k=((e+C*(i&u_.left?-1:i&u_.right?1:0))/n-t)*(i&u_.top?-1:i&u_.bottom?1:0)}else{const n=(e+(i&u_.left?-C:i&u_.right?C:0))/(t+(i&u_.top?-k:i&u_.bottom?k:0));h["aspect-ratio"]=n.toString()}}if(i&u_.top&&k){if(!E&&_r(m.attrs,fr.top)){ri(u)&&(u=parseFloat(w.marginTop),this.fromMarginsY.set(e,u));const t=u+k;h["margin-top"]=O("margin-top",t)}else if(b){ri(u)&&(u=parseFloat(w.marginBottom),this.fromMarginsY.set(e,u));const t=u-k;h["margin-bottom"]=O("margin-bottom",t)}if(I){const e=l.height-k;h.height=O("height",e)}}if(i&u_.bottom&&k){if(!E&&_r(m.attrs,fr.bottom)){ri(u)&&(u=parseFloat(w.marginBottom),this.fromMarginsY.set(e,u));const t=u-k;h["margin-bottom"]=O("margin-bottom",t)}else if(b){ri(u)&&(u=parseFloat(w.marginTop),this.fromMarginsY.set(e,u));const t=u+k;h["margin-top"]=O("margin-top",t)}if(I){const e=l.height+k;h.height=O("height",e)}}if(i&u_.right&&C){if(!E&&_r(m.attrs,fr.right)){ri(d)&&(d=parseFloat(w.marginRight),this.fromMarginsX.set(e,d));const t=d-C;h["margin-right"]=O("margin-right",t)}else if(x){ri(d)&&(d=parseFloat(w.marginLeft),this.fromMarginsX.set(e,d));const t=d+C;h["margin-left"]=O("margin-left",t)}if(S){const e=l.width+C;h.width=O("width",e)}}if(i&u_.left&&C){if(!E&&_r(m.attrs,fr.left)){ri(d)&&(d=parseFloat(w.marginLeft),this.fromMarginsX.set(e,d));const t=d+C;h["margin-left"]=O("margin-left",t)}else if(x){ri(d)&&(d=parseFloat(w.marginRight),this.fromMarginsX.set(e,d));const t=d-C;h["margin-right"]=O("margin-right",t)}if(S){const e=l.width-C;h.width=O("width",e)}}return c&&(h["margin-left"]="",h["margin-right"]="",Object.assign(h,xr)),y&&(h.height=""),h}_commit(e,t){const n=this.editor.view.getViewport(),i=this;this.editor.add((r=>{i.targetIds.forEach((o=>{const s=i.getOverrideStyle(o,e,t);r.updateStyle(o,s,n.logicWidth)}))}))}}class rv extends jo{constructor(e,t){super(),C(this,"container"),C(this,"title"),C(this,"_queue"),this.editor=e,this.view=t,this._register(this._queue=new X_)}render(e){const t=document.createElement("div");t.className="dragtip-container",document.body.appendChild(t),Object.assign(t.style,{top:"0",left:"0",position:"fixed",width:"0",height:"0",overflow:"visible"}),this.container=document.createElement("div"),this.container.className="tooltip",Object.assign(this.container.style,{position:"absolute",display:"none","white-space":"nowrap","z-index":1,"pointer-events":"none","user-select":"none","background-color":"rgb(31,31,31,.7)","border-radius":"6px",color:"rgb(255, 255, 255)","font-size":"12px","font-family":'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, sans-serif',"line-height":"18px",padding:"5px 8px"}),this.title=document.createElement("div"),Object.assign(this.title.style,{"align-items":"center","justify-content":"center",display:"flex",height:"18px"}),this.title.className="tooltip-title",this.container.appendChild(this.title),t.appendChild(this.container),e.appendChild(t)}refixTooltipPosition(e,t){const{innerWidth:n,innerHeight:i}=this.view,{scrolls:r}=this.editor.view,{scrollX:o,scrollY:s}=r;return(e-=o-20)>n-72&&(e=n-72),(t-=s-20)>i-30&&(t=i-30),[e,t]}updateContent(e){this.title.innerHTML=e}updatePosition(e,t){const n=this.refixTooltipPosition(e,t);e=Math.floor(n[0]),t=Math.floor(n[1]),this.container.style.left=Yi(e),this.container.style.top=Yi(t),"none"===this.container.style.display&&(this.container.style.display="block")}update(e,t,n){this._queue.push((()=>{this.updateContent(n),this.updatePosition(e,t)}))}}class ov extends am{constructor(e,t,n,i){super({id:e,kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.hasAnySelection,ym.editingMode.isEqualTo(hm.Focus),ym.viewMode.isEqualTo(pm.Editing)),primary:t}}),this._id=e,this._primary=t,this._resizeKey=n,this._resizeOffset=i}async runEditorCommand(e,t,n){const{_resizeOffset:i,_resizeKey:r}=this,{model:o,viewModel:s,view:a}=t,l=function(e,t){return t.slice().filter((t=>{const n=e.getNodeById(t);return n&&!ao(n)&&!lo(n)}))}(o,s.selection);if(l.length<=0)return;const{logicWidth:c}=a.getViewport();t.transform((e=>{l.forEach((t=>{const n=function(e,t){const n=er(e);if(Number.isNaN(n))return"";const i=Zi(e),r=n+t;if(r<0)return;return((e,t)=>`${er(`${e}${t}`)}${t}`)(r,i)}(o.getMatchedStyle(t,c).getAttr(r),i);n&&e.updateStyle(t,{[r]:n})}))}))}}function sv(e){return(sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cv(e,t,n){return t&&lv(e.prototype,t),n&&lv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uv(e,t){return(uv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uv(e,t)}function pv(e,t){if(t&&("object"===sv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dv(e)}function fv(e){return(fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _v(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vv(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}dm(new ov("resizeLeft",Gf.CtrlCmd|Bf.LeftArrow,"width",-1)),dm(new ov("resizeRight",Gf.CtrlCmd|Bf.RightArrow,"width",1)),dm(new ov("resizeUp",Gf.CtrlCmd|Bf.UpArrow,"height",-1)),dm(new ov("resizeDown",Gf.CtrlCmd|Bf.DownArrow,"height",1)),dm(new ov("resizeShiftLeft",Gf.CtrlCmd|Gf.Shift|Bf.LeftArrow,"width",-10)),dm(new ov("resizeShifRight",Gf.CtrlCmd|Gf.Shift|Bf.RightArrow,"width",10)),dm(new ov("resizeShifUp",Gf.CtrlCmd|Gf.Shift|Bf.UpArrow,"height",-10)),dm(new ov("resizeShifDown",Gf.CtrlCmd|Gf.Shift|Bf.DownArrow,"height",10));var wv={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},bv=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};av(this,e),this.init(t,n)}return cv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||wv,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,yv(yv({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),e}()),xv=function(){function e(){av(this,e),this.observers={}}return cv(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Cv(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function kv(e){return null==e?"":""+e}function Ev(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Sv(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return r()?{}:{obj:e,k:i(o.shift())}}function Iv(e,t,n){var i=Sv(e,t,Object);i.obj[i.k]=n}function Ov(e,t){var n=Sv(e,t),i=n.obj,r=n.k;if(i)return i[r]}function Tv(e,t,n){var i=Ov(e,n);return void 0!==i?i:Ov(t,n)}function Mv(e,t,n){for(var i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):Mv(e[i],t[i],n):e[i]=t[i]);return e}function Nv(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Av={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Rv(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Av[e]})):e}var Dv="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Pv=[" ",",","?","!",";"];function Lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lv(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}function Bv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),r=e,o=0;o<i.length;++o){if(!r)return;if("string"==typeof r[i[o]]&&o+1<i.length)return;if(void 0===r[i[o]]){for(var s=2,a=i.slice(o,o+s).join(n),l=r[a];void 0===l&&i.length>o+s;)s++,l=r[a=i.slice(o,o+s).join(n)];if(void 0===l)return;if(t.endsWith(a)){if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a]}var c=i.slice(o+s).join(n);return c?Bv(l,c,n):void 0}r=r[i[o]]}return r}}var jv=function(e){hv(n,xv);var t=Fv(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return av(this,n),i=t.call(this),Dv&&xv.call(dv(i)),i.data=e||{},i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return cv(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split("."));var a=Ov(this.data,s);return a||!o||"string"!=typeof n?a:Bv(this.data&&this.data[e]&&this.data[e][t],n,r)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=t,t=(s=e.split("."))[1]),this.addNamespaces(t),Iv(this.data,s,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(i=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var a=Ov(this.data,s)||{};i?Mv(a,n,r):a=Uv(Uv({},a),n),Iv(this.data,s,a),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Uv(Uv({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(),Vv={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,i,r))})),t}};function zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zv(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}var Hv={},$v=function(e){hv(n,xv);var t=Wv(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return av(this,n),i=t.call(this),Dv&&xv.call(dv(i)),Ev(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,dv(i)),i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=bv.create("translator"),i}return cv(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var i=Pv.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!r.test(e);if(!o){var s=e.indexOf(n);s>0&&!r.test(e.substring(0,s))&&(o=!0)}return o}(e,n,i));if(o&&!s){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:r};var l=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(r=l.shift()),e=l.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t,i){var r=this;if("object"!==sv(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],t),a=s.key,l=s.namespaces,c=l[l.length-1],d=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(u){var h=t.nsSeparator||this.options.nsSeparator;return c+h+a}return a}var p=this.resolve(e,t),f=p&&p.res,g=p&&p.usedKey||a,m=p&&p.exactUsedKey||a,_=Object.prototype.toString.apply(f),v=["[object Number]","[object Function]","[object RegExp]"],y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(w&&f&&b&&v.indexOf(_)<0&&("string"!=typeof y||"[object Array]"!==_)){if(!t.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,Kv(Kv({},t),{},{ns:l})):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(o){var x="[object Array]"===_,C=x?[]:{},k=x?m:g;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var S="".concat(k).concat(o).concat(E);C[E]=this.translate(S,Kv(Kv({},t),{joinArrays:!1,ns:l})),C[E]===S&&(C[E]=f[E])}f=C}}else if(w&&"string"==typeof y&&"[object Array]"===_)(f=f.join(y))&&(f=this.extendTranslation(f,e,t,i));else{var I=!1,O=!1,T=void 0!==t.count&&"string"!=typeof t.count,M=n.hasDefaultValue(t),N=T?this.pluralResolver.getSuffix(d,t.count,t):"",A=t["defaultValue".concat(N)]||t.defaultValue;!this.isValidLookup(f)&&M&&(I=!0,f=A),this.isValidLookup(f)||(O=!0,f=a);var R=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,D=R&&O?void 0:f,P=M&&A!==f&&this.options.updateMissing;if(O||I||P){if(this.logger.log(P?"updateKey":"missingKey",d,c,a,P?A:f),o){var L=this.resolve(a,Kv(Kv({},t),{},{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var B=0;B<F.length;B++)U.push(F[B]);else"all"===this.options.saveMissingTo?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);var j=function(e,n,i){var o=M&&i!==f?i:D;r.options.missingKeyHandler?r.options.missingKeyHandler(e,c,n,o,P,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,c,n,o,P,t),r.emit("missingKey",e,c,n,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?U.forEach((function(e){r.pluralResolver.getSuffixes(e,t).forEach((function(n){j([e],a+n,t["defaultValue".concat(n)]||A)}))})):j(U,a,A))}f=this.extendTranslation(f,e,t,p,i),O&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(c,":").concat(a)),(O||I)&&this.options.parseMissingKeyHandler&&(f="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(a,I?f:void 0):this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Kv(Kv({},n),{interpolation:Kv(Kv({},this.options.interpolation),n.interpolation)}));var s,a="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var l=e.match(this.interpolator.nestingRegexp);s=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=Kv(Kv({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),a){var d=e.match(this.interpolator.nestingRegexp);s<(d&&d.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate.apply(o,i.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var u=n.postProcess||this.options.postProcess,h="string"==typeof u?[u]:u;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=Vv.handle(h,e,t,this.options&&this.options.postProcessPassResolved?Kv({i18nResolved:i},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var l=s.extractFromKey(e,a),c=l.key;n=c;var d=l.namespaces;s.options.fallbackNS&&(d=d.concat(s.options.fallbackNS));var u=void 0!==a.count&&"string"!=typeof a.count,h=u&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),p=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);d.forEach((function(e){s.isValidLookup(t)||(o=e,!Hv["".concat(f[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(Hv["".concat(f[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!s.isValidLookup(t)){r=n;var o,l=[c];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(l,c,n,e,a);else{var d;u&&(d=s.pluralResolver.getSuffix(n,a.count,a));var f="_zero";if(u&&(l.push(c+d),h&&l.push(c+f)),p){var g="".concat(c).concat(s.options.contextSeparator).concat(a.context);l.push(g),u&&(l.push(g+d),h&&l.push(g+f))}}for(;o=l.pop();)s.isValidLookup(t)||(i=o,t=s.getResource(n,e,o,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),n}();function qv(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Yv=function(){function e(t){av(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=bv.create("languageUtils")}return cv(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=qv(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=qv(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=qv(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var i=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=n.getLanguagePartFromCode(e);if(n.isSupportedCode(i))return t=i;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=function(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&o(n.formatLanguageCode(e))})),r}}]),e}(),Gv=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Xv={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},Jv=["v1","v2","v3"],Qv={zero:0,one:1,two:2,few:3,many:4,other:5};function Zv(){var e={};return Gv.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:Xv[t.fc]}}))})),e}var ey=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};av(this,e),this.languageUtils=t,this.options=n,this.logger=bv.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Zv()}return cv(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(e,t){return Qv[e]-Qv[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):i.numbers.map((function(i){return t.getSuffix(e,i,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),r=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var o=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!Jv.includes(this.options.compatibilityJSON)}}]),e}();function ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ty(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ty(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};av(this,e),this.logger=bv.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return cv(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Rv,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Nv(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Nv(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Nv(t.nestingPrefix):t.nestingPrefixEscaped||Nv("$t("),this.nestingSuffix=t.nestingSuffix?Nv(t.nestingSuffix):t.nestingSuffixEscaped||Nv(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var d=function(e){if(e.indexOf(a.formatSeparator)<0){var r=Tv(t,l,e);return a.alwaysFormat?a.format(r,void 0,n,ny(ny(ny({},i),t),{},{interpolationkey:e})):r}var o=e.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(Tv(t,l,s),c,n,ny(ny(ny({},i),t),{},{interpolationkey:s}))};this.resetRegExp();var u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?c(a.escape(e)):c(e)}}].forEach((function(t){for(s=0;r=t.regex.exec(e);){var n=r[1].trim();if(void 0===(o=d(n)))if("function"==typeof u){var l=u(e,r,i);o="string"==typeof l?l:""}else if(i&&i.hasOwnProperty(n))o="";else{if(h){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=kv(o));var c=t.safeValue(o);if(e=e.replace(r[0],c),h?(t.regex.lastIndex+=c.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=ny({},o);function a(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var i=e.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,s)).replace(/'/g,'"');try{s=JSON.parse(r),t&&(s=ny(ny({},t),s))}catch(f8){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),f8),"".concat(e).concat(n).concat(r)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=d.shift(),l=d,c=!0}if((i=t(a.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=kv(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),c&&(i=l.reduce((function(e,t){return r.format(e,t,o.lng,ny(ny({},o),{},{interpolationkey:n[1].trim()}))}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),e}();function ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function oy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ry(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ry(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};av(this,e),this.logger=bv.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,oy(oy({},n),{},{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,oy({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,oy({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,oy({},n)).format(e)}},this.init(t)}return cv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"format",value:function(e,t,n,i){var r=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var i=e.split("(");t=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(e){if(e){var t=_v(e.split(":")),i=t[0],r=t.slice(1).join(":");n[i.trim()]||(n[i.trim()]=r.trim()),"false"===r.trim()&&(n[i.trim()]=!1),"true"===r.trim()&&(n[i.trim()]=!0),isNaN(r.trim())||(n[i.trim()]=parseInt(r.trim(),10))}}))}return{formatName:t,formatOptions:n}}(t),s=o.formatName,a=o.formatOptions;if(r.formats[s]){var l=e;try{var c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},d=c.locale||c.lng||i.locale||i.lng||n;l=r.formats[s](e,d,oy(oy(oy({},a),i),c))}catch(u){r.logger.warn(u)}return l}return r.logger.warn("there was no format function for ".concat(s)),e}),e)}}]),e}();function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ly(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}var dy=function(e){hv(n,xv);var t=cy(n);function n(e,i,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return av(this,n),o=t.call(this),Dv&&xv.call(dv(o)),o.backend=e,o.store=i,o.services=r,o.languageUtils=r.languageUtils,o.options=s,o.logger=bv.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,s.backend,s),o}return cv(n,[{key:"queueLoad",value:function(e,t,n,i){var r=this,o=[],s=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=e.split("|"),r=i[0],o=i[1];t&&this.emit("failedLoading",r,o,t),n&&this.store.addResourceBundle(r,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){var i,a,l,c,d,u;i=n.loaded,a=o,c=Sv(i,[r],Object),d=c.obj,u=c.k,d[u]=d[u]||[],l&&(d[u]=d[u].concat(a)),l||d[u].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&r<5?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*o,s)}),o):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),t.loaded(e,i,s)}))}},{key:"saveMissing",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,i,null,ly(ly({},o),{},{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,n,i))}}]),n}();function uy(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===sv(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===sv(e[2])||"object"===sv(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function hy(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function py(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?py(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):py(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}function my(){}function _y(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var vy=function(e){hv(n,xv);var t=gy(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(av(this,n),e=t.call(this),Dv&&xv.call(dv(e)),e.options=hy(i),e.services={},e.logger=bv,e.modules={external:[]},_y(dv(e)),r&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,r),pv(e,dv(e));setTimeout((function(){e.init(i,r)}),0)}return e}return cv(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var i=uy();function r(e){return e?"function"==typeof e?new e:e:null}if(this.options=fy(fy(fy({},i),this.options),hy(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=fy(fy({},i.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?bv.init(r(this.modules.logger),this.options):bv.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=sy);var s=new Yv(this.options);this.store=new jv(this.options.resources,this.options);var a=this.services;a.logger=bv,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new ey(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(a.formatter=r(o),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new iy(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new dy(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new $v(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=my),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=Cv(),h=function(){var t=function(t,i){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(i),n(t,i)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:my,i=n,r="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var o=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(r)s(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),i(e)}))}else i(null)}},{key:"reloadResources",value:function(e,t,n){var i=Cv();return e||(e=this.languages),t||(t=this.options.ns),n||(n=my),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Vv.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=Cv();this.emit("languageChanging",e);var r=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var s="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||r(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,o){o?(r(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,t,n){var i=this,r=function e(t,r){var o;if("object"!==sv(r)){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([t,r].concat(a))}else o=fy({},r);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns;var c=i.options.keySeparator||".",d=n?"".concat(n).concat(c).concat(t):t;return i.t(d,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||r&&!s(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=Cv();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Cv();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:my,r=fy(fy(fy({},this.options),t),{isClone:!0}),o=new n(r),s=["store","services","language"];return s.forEach((function(t){o[t]=e[t]})),o.services=fy({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new $v(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e].concat(n))})),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}();gv(vy,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new vy(e,t)}));var yy=vy.createInstance();function wy(e){var t,n,i,r;const o=co(e)?"Section":null!=(i=null==(t=e.meta)?void 0:t.subType)?i:null==(n=e.meta)?void 0:n.componentType;return(null==(r=e.meta)?void 0:r.label)||o}yy.createInstance=vy.createInstance,yy.createInstance,yy.init,yy.loadResources,yy.reloadResources,yy.use,yy.changeLanguage,yy.getFixedT,yy.t,yy.exists,yy.setDefaultNamespace,yy.hasLoadedNamespace,yy.loadNamespaces,yy.loadLanguages,yy.t("Image"),yy.t("Container"),yy.t("Section"),yy.t("Symbol"),yy.t("Text"),yy.t("SVG"),yy.t("Video"),yy.t("Page"),yy.t("WebWidget"),yy.t("RichText");var by,xy=Object.defineProperty,Cy=Object.getOwnPropertyDescriptor,ky=(e,t)=>(n,i)=>t(n,i,e);!function(e){e.updateOutlineByIds=async n=>{if(!e.editor)return;await Vp(0);const i=e.contextKeyService.getContextKeyValue(ym.editingMode.key),r=e.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key),{view:o}=e.editor;o.updateOutline((s=>{s.length=0;const a=o.getViewport();let l=!0;n.forEach((n=>{const o=e.editor.view.getElementRectById(n);if(!o)return null;const c=t(o,n,a,i===hm.Focus,r);c&&(s.push(c),l&&(l=!!c.draggable))})),o.updateCanvasCursor(l?Li.move:Li.default)}))};const t=(t,o,s,a,l)=>{var c,d;const{model:u,view:h}=e.editor,p=u.getNodeById(o),f=u.getParentNodeOfId(o),{scale:g}=h.getViewport();if(!f)throw new Error("500");let m,_,v,y,w=h.getElementRectById(f.id);try{v=h.getComputedStyleOfId(f.id),y=h.getComputedStyleOfId(p.id)}catch(N){console.warn("compute outline error",N)}if(!v||!y)return;const b=q_(p.id,e.editor),x="fixed"===y.position;if(vr(y)&&(_=p.id),_||vr(v)&&(_=f.id),_){m={rect:_===p.id?t:h.getElementRectById(_),clips:[],label:_===p.id?null:wy(f)};const e=u.getChildrenNodesOfId(_);for(const n of e){const e=n.id===o?t:h.getElementRectById(n.id);m.clips.push(e)}}let C;if("grid"===y.display&&(C={rect:t,rows:zi(y.gridTemplateRows),columns:zi(y.gridTemplateColumns),columnGap:Ei(y.columnGap),rowGap:Ei(y.rowGap),paddingTop:parseFloat(y.paddingTop),paddingRight:parseFloat(y.paddingRight),paddingBottom:parseFloat(y.paddingBottom),paddingLeft:parseFloat(y.paddingLeft)}),C&&1===C.columns.length&&1===C.rows.length&&(C=null),!C&&!ao(f)&&"grid"===v.display){const e=zi(v.gridTemplateRows),t=zi(v.gridTemplateColumns);(e.length>1||t.length>1)&&(w||(w=h.getElementRectById(f.id)),C={rect:w,rows:e,columns:t,columnGap:Ei(v.columnGap),rowGap:Ei(v.rowGap),paddingTop:parseFloat(v.paddingTop),paddingRight:parseFloat(v.paddingRight),paddingBottom:parseFloat(v.paddingBottom),paddingLeft:parseFloat(v.paddingLeft)})}C&&1===C.columns.length&&1===C.rows.length&&(C=null);let k={top:t.top,left:t.left,width:t.width,height:t.height,paddingTop:parseFloat(y.paddingTop),paddingRight:parseFloat(y.paddingRight),paddingBottom:parseFloat(y.paddingBottom),paddingLeft:parseFloat(y.paddingLeft)};var E,S;let I,O,T,M;if(E=[k.paddingTop,k.paddingRight,k.paddingBottom,k.paddingLeft],S=0,E.every((e=>e===S))&&!ao(f)&&(k={top:w.top,left:w.left,width:w.width,height:w.height,paddingTop:parseFloat(v.paddingTop),paddingRight:parseFloat(v.paddingRight),paddingBottom:parseFloat(v.paddingBottom),paddingLeft:parseFloat(v.paddingLeft)}),ao(f)&&(I=Object.create(null),"HEADER"!==(null==(c=p.meta)?void 0:c.tagName)&&(I.top=!0),"FOOTER"!==(null==(d=p.meta)?void 0:d.tagName)&&(I.bottom=!0)),function(e,t){const{model:n}=t,i=n.getParentNodeOfId(e),r=n.getNodeById(e);return!(!i||ao(r)||co(r)&&Y_(e,t))}(o,e.editor)){const e=i(p,y,f),t=r(p,y,f);O={top:e,bottom:e,left:t,right:t}}return a&&G_(p.id,e.editor)&&(T={handle:ho(p)?p.id:null}),so(p)&&(M=p.id),{left:t.left,top:t.top,width:t.width,height:t.height,mx:t.mx,resizable:O,flex:m,grid:C,draggable:T,parent:x?void 0:w,padding:k,addSection:I,dock:n(t,p.id,f,s,y,v),show:!0,fixed:b,isAnimationEditing:l,rotate:M,id:o,vscale:g}},n=(t,n,i,r,o,s)=>{const{model:a,view:l}=e.editor,c=[],d=a.getMatchedStyle(n,r.visualWidth),u=(t.left+t.right)/2,h=(t.top+t.bottom)/2,p=d.getAttr("align-self"),f=d.getAttr("justify-self"),g="fixed"===d.getAttr("position"),m=d.getAttr("margin-left"),_=d.getAttr("margin-right"),v=d.getAttr("margin-top"),y=d.getAttr("margin-bottom"),w="flex"===s.display,b="grid"===s.display;let x=l.getElementRectById(i.id);b?x=function(e,t,n){const i=zi(t.gridTemplateRows),r=zi(t.gridTemplateColumns),o=Ei(t.columnGap),s=Ei(t.rowGap),a=parseFloat(t.paddingTop),l=parseFloat(t.paddingLeft),{rowStart:c,rowEnd:d,columnStart:u,columnEnd:h}=Wi(e),p=[];for(let w=0,b=r.length,x=n.left+l;w<=b;w++)p.push(x),x=x+r[w]+o;const f=[];for(let w=0,b=i.length,x=n.top+a;w<=b;w++)f.push(x),x=x+i[w]+s;if(c>f.length)throw new Error(fi.internalError);if(u>p.length)throw new Error(fi.internalError);const g=f[c-1],m=f[d-1]-s,_=p[u-1],v=p[h-1]-o,y=Object.create(null);return y.top=g,y.bottom=m,y.left=_,y.right=v,y.width=y.right-y.left,y.height=y.bottom-y.top,y}(o,s,x):g&&(x=l.getElementRectById(":viewport"));const C=(e,t)=>tv(t,e,Zi(d.getAttr(e))||Fi.px,x,r);if(w&&"flex-start"===p||b&&("start"===f||"stretch"===f)||g&&m){const e=yi(o.marginLeft);bi(e,0,5)||c.push({top:h,left:x.left,width:t.left-x.left,text:nv(C("margin-left",e))})}if(w&&"flex-end"===p||b&&("end"===f||"stretch"===f)||g&&_){const e=yi(o.marginRight);bi(e,0,5)||c.push({top:h,left:x.right,width:t.right-x.right,text:nv(C("margin-right",e))})}if(w&&"flex-start"===f||b&&("start"===p||"stretch"===p)||g&&v){const e=yi(o.marginTop);bi(e,0,5)||c.push({top:x.top,left:u,height:t.top-x.top,text:nv(C("margin-top",e))})}if(w&&"flex-end"===f||b&&("end"===p||"stretch"===p)||g&&y){const e=yi(o.marginBottom);bi(e,0,5)||c.push({top:x.bottom,left:u,height:t.bottom-x.bottom,text:nv(C("margin-bottom",e))})}return c.forEach((e=>e.dot=!0)),q_(n,e.editor)&&c.forEach((e=>e.fixed=!0)),c},i=(t,n,i)=>!!i&&(!ao(t)&&(co(t)?!q_(t.id,e.editor):"auto"!==n.height)),r=(e,t,n)=>!!n&&(!ao(e)&&(!co(e)&&"auto"!==t.width))}(by||(by={}));let Ey=(n=class extends jo{constructor(e,t){super(),C(this,"_tipWidget"),C(this,"_startDragHandleType",null),C(this,"_toolbarInfo",{ids:[],rect:{width:0,height:0}}),C(this,"dragTargetWidgets",new Map),C(this,"dragRequest",null),C(this,"waitingHandleSelection",null),C(this,"events",new Bo),this.editor=e,this.contextKeyService=t,by.editor=e,by.contextKeyService=t,this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this._register(this.events),this.handleViewModeChange()}handleContextKeyChangeEvent(e){e.affectsSome(new Set([ym.editingMode.key]))&&this.handleUpdate(),e.affectsSome(new Set([ym.viewMode.key]))&&this.handleViewModeChange(),e.affectsSome(new Set([ym.isAnimationEditing.key]))&&this.handleAnimationChange()}handleViewModeChange(){this.editor.getMode()===pm.Editing?this.registerListeners():this.events.clear()}handleAnimationChange(){const e=this.editor.viewModel.selection;this.showToolbar(),by.updateOutlineByIds(e)}registerListeners(){const e=this.editor.view,t=this.editor.viewModel,n=this.editor.model,i=this.handleUpdate.bind(this),r=this.handleModelUpdate.bind(this);this.events.add(this.editor.onUpdated(i)),this.events.add(t.onDidChangeSelection(i)),this.events.add(n.onDidChangeContent(r)),this.events.add(e.onMouseDragStart(this.onDragStart.bind(this))),this.events.add(e.onMouseDrag(this.onDrag.bind(this))),this.events.add(e.onMouseDrop(this.onDrop.bind(this))),this.events.add(e.onMouseDropCanceled(this.onDropCanceled.bind(this))),this.events.add(e.onMouseDown(this.onMouseDown.bind(this))),this.events.add(e.onDbClick(this.onDbClick.bind(this)))}async handleUpdate(){const e=this.contextKeyService.getContextKeyValue(ym.editingMode.key),{viewModel:t,model:n}=this.editor,i=t.selection.filter((e=>!!n.getNodeById(e))),r=e===hm.DragResize||e===hm.Focus||e===hm.EditText||e===hm.None;if(i.length&&r||this.hideToolbar(),r){i.length&&(this.updateToolbar(i),await this.measureToolbarRect(i),this.updateToolbar(i)),await by.updateOutlineByIds(i);for(const[e,t]of this.dragTargetWidgets){const n=this.editor.view.getElementRectById(e);t.update(n)}if(this._tipWidget){const e=this.editor.view.getGroupRectByIds(this.dragRequest.targetIds),{width:t,height:n}=e,i=`${Math.ceil(t)} × ${Math.ceil(n)}`,{posX:r,posY:o}=this.dragRequest;ri(r)||ri(o)||this._tipWidget.update(r,o,i)}}}handleModelUpdate(){const e=this.contextKeyService.getContextKeyValue(ym.editingMode.key),{viewModel:t,model:n,view:i}=this.editor,r=t.selection.filter((e=>!!n.getNodeById(e))),o=e===hm.DragResize||e===hm.Focus||e===hm.EditText||e===hm.None;if(!r.length||!o)return;const s=this.computedHasTrigger(r[0]);i.updateToolbar((e=>{e.hasTrigger=s}))}onDbClick(e){const{target:t}=e,{targetPath:n}=t,i=this.contextKeyService.getContextKeyValue(ym.editingMode.key),r=this.editor.viewModel,o=n.map((e=>e.fingerprint)).pop();if((i===hm.None||i===hm.Focus)&&(this.contextKeyService.setContext(ym.editingMode.key,hm.Focus),o)){const[e]=Sy(this.editor,o,false);e&&this.editor.recordSelectionChanges((()=>{r.setSelectionById(e)}))}}onMouseDown(e){const{event:t,target:n}=e,{targetPath:i}=n,r=l_.isChildOfCanvas(i),o=l_.isBlockingContentWidget(i),s=t.leftButton,a=this.contextKeyService.getContextKeyValue(ym.editingMode.key),l=this.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key),c=this.editor.viewModel;if(r)s&&this.editor.recordSelectionChanges((()=>{const e=i.map((e=>e.fingerprint)).pop(),n=!(t.ctrlKey||t.metaKey);if(Boolean(!l&&t.shiftKey)){if(a===hm.Focus){const[t,i]=Sy(this.editor,e,n);i.includes(t)||t&&c.appendSelectionById(t),i.forEach((e=>{c.removeSelectionById(e)}))}}else if(a===hm.None||a===hm.Focus){this.contextKeyService.setContext(ym.editingMode.key,hm.Focus);const[t]=Sy(this.editor,e,n);this.waitingHandleSelection=t}}));else if(o){const e=i[i.length-1];if("breadcrumbs"===e.fingerprint)this.editor.recordSelectionChanges((()=>{const e=i[i.length-1];this.editor.viewModel.setSelectionById(e.detail)}));else if("stretch"===e.fingerprint)this.toggleStretch(!1);else if("unstretch"===e.fingerprint)this.toggleStretch(!0);else if("addSection"===e.fingerprint){const e=Dg(n.element,(e=>"add-section-box"===e.className));if(e){const t=e.getAttribute("data-direction"),n=e.getAttribute("data-ref");n&&t?this.addSection(n,t):console.warn("Target value lost.",n,t)}}}else{if(a!==hm.Focus)return;this.contextKeyService.setContext(ym.editingMode.key,hm.None),c.clearSelection()}}async measureToolbarRect(e){const t={width:0,height:0};if(e.length<=0)return void(this._toolbarInfo={ids:e,rect:t});const{ids:n,rect:i}=this._toolbarInfo;if(Dr(e,n))return i;const r=document.querySelector("#toolbar");if(!r)return void(this._toolbarInfo={ids:e,rect:t});await Vp(30);const{offsetWidth:o,offsetHeight:s}=r;this._toolbarInfo={ids:e,rect:{width:o,height:s}}}calcToolbarRect(e){const{view:t}=this.editor,{scale:n,visualWidth:i}=t.getViewport(),{boundaryDomNode:r}=t,{scrollX:o,scrollY:s}=t.scrolls,{scrollLeft:a,offsetWidth:l,offsetHeight:c}=r,{width:d,height:u}=this._toolbarInfo.rect,h=24,p=l-48-i,f=Math.max(p/2,0),g=p<0,m=-24/n,_=(c-h)/n,v=g?(a-h)/n:(-24-f)/n,y=g?(l-h+a)/n:(l-f-h)/n,w=8/n,b=74/n;let x=e.top-b-s,C=e.left;const k=d/n,E=u/n;return x<m+w&&(x=m+w),x>_-E-w&&(x=_-E-w),C<v+w&&(C=v+w),C>y-k-w&&(C=y-k-w),{top:x+s,left:C}}updateToolbar(e){const{view:t}=this.editor,n=this.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key),i=t.getGroupRectByIds(e);if(!i)return void console.error("500");const{scale:r}=t.getViewport(),{top:o,left:s}=this.calcToolbarRect(i);t.updateToolbar((t=>{t.show=!0,t.rect={top:o,left:s,above:true},t.vmx=y_.scale(y_.Identity,{x:1/r,y:1/r}),t.hideToolbarUI=n,1===e.length?(t.breadcrumbs=this.computeBreadcrumbs(e[0]),t.fixed=q_(e[0],this.editor),t.hasTrigger=this.computedHasTrigger(e[0])):(t.breadcrumbs=null,t.fixed=!1)}))}showToolbar(){this.editor.view.updateToolbar((e=>{e.show=!0}))}hideToolbar(){this.editor.view.updateToolbar((e=>{e.show=!1}))}hideToolbarUI(){this.editor.view.updateToolbar((e=>{e.hideToolbarUI=!0}))}showToolbarUI(){this.editor.view.updateToolbar((e=>{e.hideToolbarUI=!1}))}createNewSectionNode(){return{style:{width:"100%",height:"500px",display:"grid","grid-template-columns":tr(["1fr"]),"grid-template-rows":tr(["1fr"])},props:{},meta:{tagName:"SECTION",componentType:Hr.Section}}}addSection(e,t){if(t===c_.none)throw new Error("Invalid Param");const{model:n,viewModel:i}=this.editor,{style:r,props:o,meta:s}=this.createNewSectionNode(),a=n.getValue().nodes.find((e=>ao(e))),l={ref:e,direction:Cs.forward};let c=Er.addForward;t!==c_.bottom&&t!==c_.right||(l.direction=Cs.backward,c=Er.addBackward),this.editor.transform((t=>{const{id:n}=t.addNode(l,o,s);t.updateStyle(n,r),t.insertGridNode(a.id,e,n,c),i.setSelectionById(n)}))}toggleStretch(e){const t=this.editor.viewModel.selection;if(!t.length)throw new Error("500");const n=this.editor.model,i=this.editor.view,r=Object.create(null),o=t[0],s=i.getViewport(),a=n.getMatchedStyle(o,s.logicWidth),l=(e,t)=>`${t}${Zi(a[e])||Fi.px}`;if(e){const e=yi(i.getComputedStyleOfId(o).height);r["align-self"]="start",r["justify-self"]="center",r.width=vi(.7),r.height="auto",r["min-height"]=Yi(.7*e),r["margin-top"]=(c=a.getAttr("margin-top"),oi(c)&&c.endsWith("%")?vi(.2):Yi(.2*e))}else r["align-self"]="stretch",r["justify-self"]="stretch",r["margin-top"]=l("margin-top",0),r["margin-right"]=l("margin-right",0),r["margin-bottom"]=l("margin-bottom",0),r["margin-left"]=l("margin-left",0),r.width="auto",r.height="auto",r["min-height"]=Yi(0);var c;this.editor.transform((e=>{e.updateStyle(o,r,s.visualWidth)}))}computedHasTrigger(e){const t=this.editor.model,{triggers:n}=t.getValue();return n.some((t=>t.targetId===e))}computeBreadcrumbs(e){const t=this.editor.model,n=t.getAncestorNodesOfId(e),i=t.getNodeById(e);if(ao(i))return null;const r=co(i);return{parts:n.slice(r?1:2).filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.wrapper)})).concat([i]).reverse().map((e=>({label:wy(e),id:e.id})))}}showDragTargets(e){const{view:t,model:n}=this.editor;e.slice().sort(((e,t)=>{const i=n.getAncestorNodesOfId(e).map((e=>e.id)).concat(e),r=n.getAncestorNodesOfId(t).map((e=>e.id)).concat(t);let o=1;const s=Math.max(i.length,r.length);for(let a=0;a<s;a++){const e=i[a],t=r[a];if(e!==t){if(t&&e){const i=n.getNodeById(e),r=n.getNodeById(t);o=Es(i.order,r.order)}else console.warn("Unexpected",e,t);break}}return o})).forEach((e=>{if(!this.dragTargetWidgets.get(e)){const n=new J_(t.getElementById(e),t.getElementRectById(e),this.editor);this.dragTargetWidgets.set(e,n),t.addContentWidget(n,Ao.Low,!1)}})),this._tipWidget||(this._tipWidget=new rv(this.editor,t.canvasHostDomNode.contentWindow),t.addOuterWidget(this._tipWidget,Ao.High,!1))}hideDragTargets(){this.dragTargetWidgets.forEach(((e,t)=>{e&&this.editor.view.removeContentWidget(e)})),this.dragTargetWidgets.clear(),this._tipWidget&&(this.editor.view.removeOuterWidget(this._tipWidget),this._tipWidget=null)}onDragStart(e){const{targetPath:t}=e.target;if(!l_.isDraggableWidget(t))return;if("dragResize"!==t[t.length-1].fingerprint)return;let n=this.editor.viewModel.selection;if(!n.length)throw new Error("500");this.waitingHandleSelection&&!n.includes(this.waitingHandleSelection)&&(this.editor.recordSelectionChanges((()=>{this.editor.viewModel.setSelectionById(this.waitingHandleSelection)})),this.waitingHandleSelection=null),n=this.editor.viewModel.selection,this.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key)||this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.Focus||(this._startDragHandleType=+t[t.length-1].detail)}onDrag(e){if(!this.dragRequest){if(!this._startDragHandleType)return;const t=this.editor.viewModel.selection;this.dragRequest=new iv(e,t,this.editor,this._startDragHandleType),this.editor.fork(),this.toggleMultiNodesVisibility(t,!1),this.showDragTargets(t),this.contextKeyService.setContext(ym.editingMode.key,hm.DragResize)}this.dragRequest.moveTo(e)}onDrop(e){if(this._startDragHandleType=null,this.waitingHandleSelection=null,!this.dragRequest)return;const t=this.dragRequest.targetIds;this.toggleMultiNodesVisibility(this.dragRequest.targetIds,!0),this.hideDragTargets(),this.editor.commitAndMerge(),this.dragRequest=null,1===t.length&&this.editor.viewModel.setSelectionById(t[0]);if(this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.DragResize)throw new Error("500");this.contextKeyService.setContext(ym.editingMode.key,hm.Focus)}onDropCanceled(){if(this._startDragHandleType=null,!this.dragRequest)return void(this.waitingHandleSelection&&(this.editor.recordSelectionChanges((()=>{this.editor.viewModel.setSelectionById(this.waitingHandleSelection)})),this.waitingHandleSelection=null));this.toggleMultiNodesVisibility(this.dragRequest.targetIds,!0),this.hideDragTargets(),this.editor.checkout(),this.dragRequest=null;if(this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.DragResize)throw new Error("500");this.contextKeyService.setContext(ym.editingMode.key,hm.Focus)}toggleMultiNodesVisibility(e,t){const{viewModel:n}=this.editor;e.forEach((e=>{n.toggleVisibility(e,t)}))}},C(n,"ID","editor.contrib.outline"),n);function Sy(e,t,n){if(!t)return[null,[]];const{model:i,viewModel:r}=e,o=r.isIdSelected(t)?t:null,s=i.getAncestorNodesOfId(t).map((e=>e.id)).concat(t);let a=null,l=[];if(s.length<2)throw new Error("404");const c=q_(s[1],e);if(!n||!c&&s.length<=3)a=s[s.length-1];else{const e=r.selection.slice().map((e=>i.getAncestorNodesOfId(e).map((e=>e.id)).concat(e)));let t=[];const n=c?1:3;let o=e.filter((e=>e.length>n));for(let i=n;i<=s.length;i++){const e=s.slice(0,i);if(i===n&&(t=e),o=o.filter((t=>t.slice(0,i).join(",")===e.join(","))),o.length<=0)break;t=e}const l=t.length<s.length?t.length:s.length-1;a=s[l]}if(a&&a!==o)if(o)l=[o];else{const{selection:e}=r;l=e.filter((e=>i.isAncestorNodeOfId(a,e)||i.isAncestorNodeOfId(e,a)))}else a=o,l=[o];return[a,l]}Ey=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Cy(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&xy(t,n,o),o})([ky(0,Sl),ky(1,Df)],Ey),um(Ey.ID,Ey);var Iy=Object.defineProperty,Oy=Object.getOwnPropertyDescriptor,Ty=(e,t)=>(n,i)=>t(n,i,e);let My=(i=class extends jo{constructor(e,t,n){super(),C(this,"widget"),C(this,"widgetProps"),C(this,"currentHovering"),C(this,"events",new Bo),this._editor=e,this.contextKeyService_=t,this._register(this.events),this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this.widgetProps=id([]),this.widget=n.createInstance(H_,this.widgetProps,this._editor.view.scrolls),this._editor.view.addOuterWidget(this.widget,Ao.Low),this._register(Fo((()=>{this._editor.view.removeOuterWidget(this.widget)}))),this.handleViewModeChange()}handleContextKeyChangeEvent(e){const t=[ym.editingMode.key];e.affectsSome(new Set(t))&&this.shouldSuppressHover()&&this.hide(),e.affectsSome(new Set([ym.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===pm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const{view:e,viewModel:t}=this._editor;this.events.add(this._editor.onUpdated(this.handleEditorUpdate.bind(this))),this.events.add(t.onDidChangeSelection(this.handleSelectionChange.bind(this))),this.events.add(e.onMouseEnter((e=>this.handleMouseEnter(e)))),this.events.add(e.onMouseLeave((e=>this.handleMouseLeave(e))))}handleSelectionChange(){this.hide()}handleMouseEnter(e){const{targetPath:t}=e.target;if(!l_.isChildOfCanvas(t))return;const{fingerprint:n}=t[t.length-1];if(a_.shouldNotBeMeasured(n))return;if(this.shouldSuppressHover())return;if(ao(this._editor.model.getNodeById(n)))return;this.currentHovering=n;const{event:i}=e,r=!(i.ctrlKey||i.metaKey);this.show(r)}_compute(e,t){const n=this.contextKeyService_.getContextKeyValue(ym.isAnimationEditing.key);return Ny(this._editor,e,t,n)}shouldSuppressHover(){const e=this.contextKeyService_.getContextKeyValue(ym.editingMode.key);return e!==hm.None&&e!==hm.Focus}handleMouseLeave(e){if(this.shouldSuppressHover())return;const{targetPath:t}=e.target,{fingerprint:n}=t[t.length-1];n===this.currentHovering&&this.hide()}handleEditorUpdate(){if(this.shouldSuppressHover())return;if(!this.currentHovering)return;this._editor.model.getNodeById(this.currentHovering)?this.show():this.hide()}hide(){this.currentHovering=null,this.widgetProps.length=0;this.contextKeyService_.getContextKeyValue(ym.editingMode.key)===hm.None&&this._editor.view.updateCanvasCursor(Li.default)}show(e=!1){const t=this._compute(this.currentHovering,e);if(t.length>0){const e=t[0].draggable?Li.move:Li.default;this._editor.view.updateCanvasCursor(e),this.widgetProps.length=0,this.widgetProps.push(...t)}}},C(i,"ID","editor.contrib.hover"),i);function Ny(e,t,n,i){const r=e.model,o=e.view,s=e.viewModel,a=[],l=r.getParentNodeOfId(t),{scale:c}=o.getViewport(),d=y_.scale(y_.Identity,{x:1/c,y:1/c});if(!l)throw new Error("500");const[u,h]=Sy(e,t,n);if(u&&!h.includes(u)){const t=e.view.getElementRectById(u),n=s.selection.includes(u)?null:wy(r.getNodeById(u));a.push(b(w({},t),{draggable:G_(u,e),fixed:q_(u,e),label:n,vmx:d,show:!0,ignorable:!0,isAnimationEditing:Boolean(i)}))}return a}My=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Oy(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Iy(t,n,o),o})([Ty(0,Sl),Ty(1,Df),Ty(2,Br)],My),um(My.ID,My);const Ay=Vr("resourceService"),Ry=Object.freeze((function(e,t){const n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));var Dy,Py;(Py=Dy||(Dy={})).isCancellationToken=function(e){return e===Py.None||e===Py.Cancelled||e instanceof Ly||!(!e||"object"!=typeof e)&&"boolean"==typeof e.isCancellationRequested&&"function"==typeof e.onCancellationRequested},Py.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:gs.None}),Py.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ry});class Ly{constructor(){C(this,"_isCancelled",!1),C(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ry:(this._emitter||(this._emitter=new ws),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Uy{constructor(e){C(this,"_token"),C(this,"_parentListener"),this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Ly),this._token}cancel(){this._token?this._token instanceof Ly&&this._token.cancel():this._token=Dy.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Ly&&this._token.dispose():this._token=Dy.None}}var Fy=Object.defineProperty,By=Object.getOwnPropertyDescriptor,jy=(e,t)=>(n,i)=>t(n,i,e);function Vy(e,t){e.has(t)||e.set(t,0),e.set(t,e.get(t)+1)}function zy(e,t){const n=e.get(t);n||Oo();const i=n-1;i?e.set(t,i):e.delete(t)}function Ky(e,t,n){if(t.has(n))return zy(t,n);Vy(e,n)}function Wy(e,t,n){if(e.has(n))return zy(e,n);Vy(t,n)}function Hy(e){const t=[];if(!oi(e))return t;const{body:n}=(new DOMParser).parseFromString(e,"text/html");return n.querySelectorAll("*").forEach((e=>{if(function(e){const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof HTMLElement||e instanceof n}(e)){const n=e.style.fontFamily;n&&t.push(n)}})),t}let $y=(r=class extends jo{constructor(e,t){super(),C(this,"used"),C(this,"fontProvideQuery"),this.editor=e,this.resourceService=t,this.initCounting(),this._register(e.model.onDidChangeContent((e=>this.handleModelChange(e)))),this._register(e.onDidChangeModel((()=>{var e;null==(e=this.fontProvideQuery)||e.dispose(!0),this.fontProvideQuery=null,this.initCounting()})))}initCounting(){const{styles:e,nodes:t}=this.editor.model.getValue();if(!e)return;const n=new Map;for(const i of e)i["font-family"]&&Vy(n,i["font-family"]);t.filter(eo).forEach((e=>{Hy(e.props.content).forEach((e=>Vy(n,e)))})),this.used=n}handleModelChange({changes:e}){const t=new Map,n=new Map;e.forEach((e=>{const{path:i}=e,[r]=i;"styles"===r&&(({path:e,newValue:i,oldValue:r})=>{const[o,s,a]=e;if(ai(s))if(a)"font-family"===a&&(i&&Ky(t,n,i),r&&Wy(t,n,r));else{if(i){const e=i;e["font-family"]&&Ky(t,n,e["font-family"])}if(r){const e=r;e["font-family"]&&Wy(t,n,e["font-family"])}}})(e),"nodes"===r&&(({path:e,newValue:i,oldValue:r})=>{const[o,s,a,l]=e;ai(s)&&(a?"content"===l&&(i&&Hy(i).forEach((e=>{Ky(t,n,e)})),r&&Hy(r).forEach((e=>{Wy(t,n,e)}))):(i&&Hy(i.props.content).forEach((e=>{Ky(t,n,e)})),r&&Hy(r.props.content).forEach((e=>{Wy(t,n,e)}))))})(e)})),this.handleFontFamilyChange(t,n)}async handleFontFamilyChange(e,t){const n=new Set,i=new Set;for(const[a,l]of t){const e=this.used.get(a);e||Oo();const t=e-l;0===t?(n.add(a),this.used.delete(a)):t>0?this.used.set(a,t):Io(a)}for(const[a,l]of e)this.used.has(a)?this.used.set(a,l+this.used.get(a)):(this.used.set(a,l),i.add(a));if(!i.size&&!n.size)return;this.editor.model.changeWithoutHistory((e=>{const t=e.getValue();t.fontfaces||(t.fontfaces=[]);for(const i of n){const e=Mr(t.fontfaces,(e=>e.family===i));-1===e&&Io(i),t.fontfaces.splice(e,1)}for(const n of i){Nr(t.fontfaces,(e=>e.family===n))&&Io(n),t.fontfaces.push({family:n,src:`local("${n}")`,id:ni()})}}));const r=new Uy;this.fontProvideQuery&&this.fontProvideQuery.dispose(!0),this.fontProvideQuery=r;const o=[],s=[...i.values()].filter((e=>"system-ui"!==e));for(const a of s)o.push(this.resourceService.queryFontResource({family:a},r.token));(await Promise.all(o)).forEach((e=>{if(!e.length)return void console.error("404",s);const t=e[0],{family:n,src:i}=t;this.editor.model.changeWithoutHistory((e=>{const t=e.getValue();t.fontfaces||Io();const r=Nr(t.fontfaces,(e=>e.family===n));r||Io(n),r.src=i}))}))}},C(r,"ID","editor.contrib.fontface"),r);$y=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?By(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&Fy(t,n,o),o})([jy(0,Sl),jy(1,Ay)],$y),um($y.ID,$y);class qy extends jo{constructor(e,t,n,i,r,o,s){super(),C(this,"_cloned"),C(this,"_mx"),C(this,"_container"),C(this,"_attached",!1),C(this,"_tasksAfterAttach",[]),this._target=e,this._props=t,this._fromRect=n,this._editor=i,this._moveHorizontalDisabled=r,this._moveVerticalDisabled=o,this._isInPositionFixedChain=s}render(e){const t=this._editor.view;this._cloned=this._target.cloneNode(!0),e.appendChild(this._cloned);const n=this._cloned.querySelector("web-widget");n&&n.remove(),this._cloned.removeAttribute("data-hide"),this._container=this._cloned.parentElement;const{scrolls:i}=t,r=this._isInPositionFixedChain?i.scrollX:0,o=this._isInPositionFixedChain?i.scrollY:0;this._mx=y_.translate(this._fromRect.mx||y_.Identity,{x:this._fromRect.left+r,y:this._fromRect.top+o});const s={position:"absolute","user-select":"none",top:"0px",left:"0px",width:Yi(this._fromRect.width),height:Yi(this._fromRect.height),transform:Hi(this._mx),"transform-origin":"center center",margin:"0"};Object.assign(this._cloned.style,s),this._attached=!0,this._tasksAfterAttach.forEach((e=>e())),this._tasksAfterAttach.length=0}updateOffset(e,t){const n=()=>{const n=Hi(y_.translate(this._mx,{x:this._moveHorizontalDisabled?0:e,y:this._moveVerticalDisabled?0:t}));Object.assign(this._cloned.style,{transform:n})};this._attached?n():this._tasksAfterAttach.push(n)}}class Yy extends jo{constructor(e){super(),this.prop=e}render(e){const t=wp((n=this.prop,()=>Zu(Pu,null,[n.map((e=>Zu(Jy,e,null)))])));var n;t.mount(e),this._register(Fo((()=>Pp(t.unmount))))}}function Gy(e){const t={width:"1px",background:"fuchsia",position:"absolute",top:"0px",left:"0px",transform:Hi(y_.translate(y_.Identity,{x:e.left,y:e.top})),height:Yi(e.height),zIndex:3};return Zu("div",{style:t},null)}function Xy(e){const t={height:"1px",background:"fuchsia",position:"absolute",top:"0px",left:"0px",transform:Hi(y_.translate(y_.Identity,{x:e.left,y:e.top})),width:Yi(e.width),zIndex:3};return Zu("div",{style:t},null)}function Jy(e){return Reflect.has(e,"width")?Zu(Xy,e,null):Zu(Gy,e,null)}class Qy extends jo{constructor(e){super(),this.props=e}render(e){const t=wp((n=this.props,()=>Zu(Pu,null,[n.map((e=>Zu(k_,e,null)))])));var n;t.mount(e),this._register(Fo((()=>Pp(t.unmount))))}}class Zy extends jo{constructor(e){super(),this.props=e}render(e){const t=wp((n=this.props,()=>{if(!n.show)return n.drop?Zu(nw,n.drop,null):null;const e=wd((()=>({position:"absolute",top:`${n.top}px`,width:`${n.width}px`,left:`${n.left}px`,height:"1px",background:"rgb(17,109,255)","box-shadow":"0px -2px 3px 0px rgb(0, 0,255)"}))),t=wd((()=>({position:"absolute",top:`${n.top}px`,width:"1px",left:`${n.left+n.width}px`,height:`${n.height}px`,background:"rgb(17,109,255)","box-shadow":"2px 0px 6px 0px rgb(0,0,255)"}))),i=wd((()=>({position:"absolute",top:`${n.top+n.height}px`,width:`${n.width}px`,left:`${n.left}px`,height:"1px",background:"rgb(17,109,255)","box-shadow":"0px 2px 6px 0px rgba(0,0,255,0.5)"}))),r=wd((()=>({position:"absolute",top:`${n.top}px`,width:"1px",left:`${n.left}px`,height:`${n.height}px`,background:"rgb(17,109,255)","box-shadow":"-2px 0px 6px 0px rgb(0,0,255)"})));return Zu(Pu,null,[Zu("div",{"data-name":"top",style:e.value},null),Zu("div",{"data-name":"right",style:t.value},null),Zu("div",{"data-name":"bottom",style:i.value},null),Zu("div",{"data-name":"left",style:r.value},null),!ri(n.drop)&&Zu(nw,n.drop,null)])}));var n;t.mount(e),this._register(Fo((()=>Pp(t.unmount))))}}function ew(e){const t={position:"absolute",top:Yi(e.top),width:Yi(e.width),left:Yi(e.left),height:Yi(5),background:"rgb(17,109,255)",transform:"translate(-50%, -50%)"};return Zu("div",{style:t},null)}function tw(e){const t={position:"absolute",top:Yi(e.top),height:Yi(e.height),left:Yi(e.left),width:Yi(5),background:"rgb(17,109,255)",transform:"translate(-50%, -50%)"};return Zu("div",{style:t},null)}function nw(e){return Reflect.has(e,"width")?Zu(ew,e,null):Zu(tw,e,null)}jm.registerConfiguration({id:"dnd",order:1,title:"缩放相关的配置",type:"object",properties:{"dnd.maxMagneticEffectDistance":{type:"number",description:"拖拽吸附的生效距离",default:5}}});function iw(e,t,n,i){const r=zi(i.gridTemplateRows),o=zi(i.gridTemplateColumns),s=Ei(i.columnGap),a=Ei(i.rowGap),l=parseFloat(i.paddingTop),c=parseFloat(i.paddingLeft),d=[];for(let g=0,m=o.length,_=n.left;g<m;g++)0===g?c&&(_+=c):s&&(_+=s),d.push(_),_+=o[g],d.push(_);const u=[];for(let g=0,m=r.length,_=n.top;g<m;g++)0===g?l&&(_+=l):a&&(_+=a),u.push(_),_+=r[g],u.push(_);const h=u.slice(),p=d.slice();h[0]=n.top,h[h.length-1]=n.bottom,p[0]=n.left,p[p.length-1]=n.right;const f=Object.create(null);for(let g=0,m=r.length;g<m;g++){const e=2*g,n=h[e],i=h[e+1],r=h[e+2],o=ri(r)?i:(i+r)/2;if(n<=t&&o>=t){f.row=g+1,f.top=u[e],f.bottom=u[e+1];break}h[e+1]=o,h[e+2]=o}for(let g=0,m=o.length;g<m;g++){const t=2*g,n=p[t],i=p[t+1],r=p[t+2],o=ri(r)?i:(i+r)/2;if(n<=e&&e<=o){f.column=g+1,f.left=d[t],f.right=d[t+1];break}p[t+1]=o,p[t+2]=o}if(!f.row){f.row=r.length;const e=2*(f.row-1);f.top=u[e],f.bottom=u[e+1]}if(!f.column){f.column=o.length;const e=2*(f.column-1);f.left=d[e],f.right=d[e+1]}return f.width=f.right-f.left,f.height=f.bottom-f.top,{row:f.row,column:f.column,rect:f}}function rw(e,t){if(t.mx)return e;const n=Object.create(null);return n.top=Math.max(e.top,t.top),n.left=Math.max(e.left,t.left),n.bottom=Math.min(e.bottom,t.bottom),n.right=Math.min(e.right,t.right),n.width=n.right-n.left,n.height=n.bottom-n.top,n}jm.registerConfiguration({id:"zoom",order:2,title:"缩放相关的配置",type:"object",properties:{"zoom.initLogicWidth":{type:"number",description:"画布的初始宽度",default:1440},"zoom.minZoomLevel":{type:"number",description:"画布最小的缩放比例",default:.05},"zoom.maxZoomLevel":{type:"number",description:"画布最大的缩放比例",default:10},"zoom.minLogicWidth":{type:"number",description:"viewport logic width 的最小值",default:320},"zoom.maxLogicWidth":{type:"number",description:"viewport logic width 的最大值",default:1e4}}});class ow{constructor(e,t,n,i){C(this,"fromX"),C(this,"fromY"),C(this,"targetIds"),C(this,"targetsInfoMap",new Map),C(this,"parentsInfoMap",new Map),C(this,"disabledSet",new Set),C(this,"fromParent"),C(this,"toX",null),C(this,"toY",null),C(this,"startTime"),C(this,"endTime",null),C(this,"currentRectsMap",new Map),C(this,"media"),C(this,"currentAttachParentId"),C(this,"currentDockingStatusMap",new Map),C(this,"isAutoDockDisabled",!0),this.editor=n,this.configurationService=i,this.targetIds=t,this.fromX=e.event.posX,this.fromY=e.event.posY;const r=n.model,o=n.view;if(this.startTime=Date.now(),this.media=o.getViewport(),this.targetIds.forEach((e=>{const t=o.getElementRectById(e),i=r.getParentNodeOfId(e);if(!i)throw new Error("404");const s=i.id,a=this.getParentInfo(s).computedStyle,l=o.getComputedStyleOfId(e);let c=0,d=0;if("grid"===a.display){const{rowStart:e,columnStart:t}=Wi(l);c=e,d=t}const u=yi(l.marginTop),h=yi(l.marginBottom),p=r.getNodeById(e),f=co(p),g=ao(p),m=Y_(e,n);this.targetsInfoMap.set(e,{parent:i.id,rect:t,margin:{top:u,bottom:h},grid:{row:c,column:d},isInPositionFixedChain:q_(e,n),isSelfPositionFixed:m,moveVerticalDisabled:g,moveHorizontalDisabled:f&&m||g,computedStyle:l})})),1===this.parentsInfoMap.size){const e=this.parentsInfoMap.keys().next().value;this.fromParent=this.parentsInfoMap.get(e).node,this.currentAttachParentId=e}}get deltaX(){return ri(this.toX)?0:this.toX-this.fromX}get deltaY(){return ri(this.toY)?0:this.toY-this.fromY}get isFromSingleParent(){return!!this.fromParent}isChanged(){return this.toY&&this.toX&&!(bi(this.toX,this.fromY)&&bi(this.toY,this.fromY))}isMagneticNearly(e,t){return bi(e,t,this.configurationService.getValue("dnd.maxMagneticEffectDistance"))}shouldHandleDragAction(){return this.endTime&&this.endTime-this.startTime>100}get isParentChanged(){return this.isFromSingleParent&&this.currentAttachParentId!==this.fromParent.id}_checkAttachContainer(){if(!this.isFromSingleParent)return;if(this.targetsInfoMap.get(this.targetIds[0]).isSelfPositionFixed)return void(this.currentAttachParentId="root");const e=this.editor.model,t=this.editor.view,n=t.hitTest(this.toX,this.toY),i=e.queryNodes((e=>ho(e)&&n.indexOf(e.id)>-1&&!this.targetIds.includes(e.id))).sort(((e,t)=>n.indexOf(e.id)-n.indexOf(t.id))).filter((t=>!this.targetIds.some((n=>e.isAncestorNodeOfId(n,t.id)))));if(i.length)this.currentAttachParentId=i[0].id;else{const n=e.queryNodes((e=>ao(e)));n.length||Io();const i=n[0],r=t.getElementRectById(i.id);let{top:o,right:s,left:a,bottom:l}=r;const c=t.getComputedStyleOfId(i.id);o+=yi(c.paddingTop),s-=yi(c.paddingRight),l-=yi(c.paddingBottom),a+=yi(c.paddingLeft);const d=a<=this.toX&&s>=this.toX,u=o<=this.toY&&l>=this.toY;d&&u&&Io()}}moveTo(e){this.endTime=Date.now();const t=e.event.posX,n=e.event.posY;if(this.toX===t&&this.toY===n)return;this.updateCurrentRectsMap(t,n),this.toX=t,this.toY=n,this._checkAttachContainer();const[i,r,o]=this._checkDockAndAttach();return{reference:o,dock:i,attach:r}}updateCurrentRectsMap(e,t){const{scrolls:n}=this.editor.view;this.targetIds.forEach((i=>{const{rect:r,moveHorizontalDisabled:o,moveVerticalDisabled:s,isInPositionFixedChain:a}=this.targetsInfoMap.get(i);if(!this.disabledSet.has(i)){const l=o?this.fromX:e,c=s?this.fromY:t,d=l-this.fromX,u=c-this.fromY,h=a?n.scrollX:0,p=a?n.scrollY:0;let f=s_(r,d,u);f=s_(f,h,p),this.currentRectsMap.set(i,f)}}))}_calcMagneticEffect(e,t,n){const i=n?yi(n.paddingTop):0,r=n?yi(n.paddingRight):0,o=n?yi(n.paddingBottom):0,s=n?yi(n.paddingLeft):0,a=(e.left+e.right)/2,l=(e.top+e.bottom)/2,c=(t.left+s+t.right-r)/2,d=(t.top+s+t.bottom-o)/2;let u=!1,h=!1,p=null,f=null,g=0,m=0;if(!u&&this.isMagneticNearly(a,c)){const e=c-a;p={top:t.top,left:c,height:t.height},u=!0,g=e}if(!h&&this.isMagneticNearly(l,d)){const e=d-l;f={top:d,left:t.left,width:t.width},m=e,h=!0}const _=t.top+i-e.top;this.isMagneticNearly(_,0)&&(f={top:t.top+i,left:t.left,width:t.width},m=_,h=!0);const v=t.left+s-e.left;if(!u&&this.isMagneticNearly(v,0)&&(p={top:t.top,left:t.left+s,height:t.height},g=v,u=!0),!h){const n=t.bottom-o-e.bottom;this.isMagneticNearly(n,0)&&(f={top:t.bottom-o,left:t.left,width:t.width},m=n,h=!0)}if(!u){const n=t.right-r-e.right;this.isMagneticNearly(n,0)&&(p={top:t.top,left:t.right-r,height:t.height},g=n,u=!0)}return{x:{able:u,offset:g,line:p},y:{able:h,offset:m,line:f}}}_checkMagneticEffect(e,t,n){if(e.length<=0)return[];const i=[],r=e.filter((({x:e,y:t})=>e.able||t.able)).map((({x:e,y:t})=>{let n=0;return e.able&&t.able?n=Math.min(Math.abs(e.offset),Math.abs(t.offset)):e.able?n=Math.abs(Math.abs(e.offset)):t.able&&(n=Math.abs(Math.abs(t.offset))),{x:e,y:t,minOffsetAbs:n}})).sort(((e,t)=>e.minOffsetAbs>t.minOffsetAbs?-1:1)),[o]=r;if(o){const{x:e,y:r}=o,s=e.able,a=r.able;(s||a)&&(s&&(this.toX=t+e.offset,i.push(e.line)),a&&(this.toY=n+r.offset,i.push(r.line)),this.updateCurrentRectsMap(this.toX,this.toY))}return i}_checkDockAndAttach(){const e=this.editor.model,t=this.editor.view,n=new Map,i=new Map,r=[];let o;const s=[];this.disabledSet.clear();const{scrolls:a}=this.editor.view;this.targetIds.forEach((e=>{const{parent:t}=this.targetsInfoMap.get(e),n=this.isFromSingleParent?this.currentAttachParentId:t,{computedStyle:r,style:l}=this.getParentInfo(n),c="root"===n;let d=h(c?":viewport":n);const u=c||"fixed"===r.position;d=s_(d,u?a.scrollX:0,u?a.scrollY:0),this.isFromSingleParent&&!o&&(o={width:d.width,height:d.height,top:d.top,left:d.left,show:this.isParentChanged,drop:null});const p=vr(l.attrs);p&&!this.isFromSingleParent&&this.disabledSet.add(e);const f=r.flexDirection||"row",g=p&&"column"===f,m=p&&"row"===f;let _=d;if(!p){const{rect:t}=iw(this.toX,this.toY,d,r);_=rw(t,d);const n=this.getCurrentRect(e),i=this._calcMagneticEffect(n,_,_===d?r:null);s.push(i)}i.set(e,{containerForceLayout:p,autoLayoutDirection:f,layoutItemVertical:g,layoutItemHorizontal:m})}));const l=this._checkMagneticEffect(s,this.toX,this.toY),c=t.getViewport(),{scale:d}=c,u=y_.scale(y_.Identity,{x:1/d,y:1/d});return this.targetIds.forEach((t=>{const n=e.getMatchedStyle(t,this.media.logicWidth),{parent:s}=this.targetsInfoMap.get(t),l=this.isFromSingleParent?this.currentAttachParentId:s,{computedStyle:d}=this.getParentInfo(l),{containerForceLayout:p,layoutItemVertical:f,layoutItemHorizontal:g}=i.get(t),m=!!this.fromParent&&this.fromParent.id!==this.currentAttachParentId,_=Object.create(null),v=[],y="root"===l;let w=h(y?":viewport":l);const b=y||"fixed"===d.position;w=s_(w,b?a.scrollX:0,b?a.scrollY:0);const x=this.currentRectsMap.get(t);let C=this.isParentChanged,k=!1;const E=yr(n.attrs);if(!p){const e=sw({x:this.toX,y:this.toY},n.attrs,w,d);if(e.row&&e.column){const{row:n,column:i}=e,{grid:{row:r,column:o}}=this.getTargetInfo(t);E||(k=r!==n||o!==i,e.gridChange=k),C=C||k}e.containerRect&&(w=e.containerRect),Object.assign(_,e);const{dockStatus:i,dockProps:r}=aw(x,n.attrs,w,d,c,this.isAutoDockDisabled,C);Object.assign(_,i),v.push(...r)}const S=(x.left+x.right)/2,I=(x.top+x.bottom)/2,O=(w.left+w.right)/2,T=(w.top+w.bottom)/2;if(p&&this.isFromSingleParent)if(m){if(f){const t=Object.create(null);o.drop=t,o.drop.width=w.width,o.drop.left=O;const n=e.getChildrenNodesOfId(l);if(n.length){const e=[w.top],t=[w.top];for(let i=0,r=n.length;i<r;i++){const r=n[i],s=h(r.id),a=(s.top+s.bottom)/2;if(e[i]<this.toY&&a>=this.toY){o.drop.top=(t[i]+s.top)/2,_.before=r.id;break}e.push(a),t.push(s.bottom)}ri(o.drop.top)&&(o.drop.top=(w.bottom+t[t.length-1])/2)}else o.drop.top=w.top+x.height/2}if(g){const t=Object.create(null);o.drop=t,o.drop.height=w.height,o.drop.top=T;const n=e.getChildrenNodesOfId(this.currentAttachParentId);if(n.length){const e=[w.left],t=[w.left];for(let i=0,r=n.length;i<r;i++){const r=n[i],s=h(r.id),a=(s.left+s.right)/2;if(e[i]<this.toX&&a>=this.toX){o.drop.left=(t[i]+s.left)/2,_.before=r.id;break}e.push(a),t.push(s.right)}ri(o.drop.left)&&(o.drop.left=(w.right+t[t.length-1])/2)}else o.drop.left=w.left+x.width/2}}else{const n=e.getChildrenNodesOfId(l),i=n.findIndex((e=>e.id===t)),r=n.length;let s,a=-1;if(_.reorder=!1,f){const e=0===i?null:n[i-1],t=i===r-1?null:n[i+1],l=e?h(e.id):null,c=t?h(t.id):null,d=l?l.bottom:w.top,u=c?c.top:w.bottom,p=d>=this.toY,f=this.toY>=u;if(e&&t&&(p||f)||e&&!t&&p||!e&&t&&f){_.reorder=!0;const e=[w.top],t=[w.top];let l;for(let o=0;o<r;o++){if(o===i)continue;const r=n[o],c=h(r.id),d=(c.top+c.bottom)/2;if(e[e.length-1]<I&&d>=I){l=Object.create(null),l.top=(t[t.length-1]+c.top)/2,s=r.id,a=o;break}e.push(d),t.push(c.bottom)}ri(null==l?void 0:l.top)&&(l=Object.create(null),l.top=(w.bottom+t[t.length-1])/2,a=r),(i===a-1||a===r&&i===r-1)&&(l=null),l&&(l.left=O,l.width=w.width,o.drop=l,_.before=s,_.reorder=!0)}}if(g){const e=0===i?null:n[i-1],t=i===r-1?null:n[i+1],l=e?h(e.id):null,c=t?h(t.id):null,d=l?l.right:w.left,u=c?c.left:w.right,p=d>=this.toX,f=this.toX>=u;if(e&&t&&(p||f)||e&&!t&&p||!e&&t&&f){_.reorder=!0;const e=[w.left],t=[w.left];let l;for(let o=0;o<r;o++){if(o===i)continue;const r=n[o],c=h(r.id),d=(c.left+c.right)/2;if(e[e.length-1]<S&&d>=S){l=Object.create(null),l.left=(t[t.length-1]+c.left)/2,s=r.id,a=o;break}e.push(d),t.push(c.right)}ri(null==l?void 0:l.left)&&(l=Object.create(null),l.left=(w.right+t[t.length-1])/2,a=r),(i===a-1||a===r&&i===r-1)&&(l=null),l&&(l.top=T,l.height=w.height,o.drop=l,_.before=s,_.reorder=!0)}}}this.currentDockingStatusMap.set(t,_),v.forEach((e=>{e.vmx=u,e.fixed=!1})),r.push(...v)})),[r,o,l];function h(e){let i=n.get(e);return i||(i=t.getElementRectById(e),n.set(e,i),i)}}getParentInfo(e){let t=this.parentsInfoMap.get(e);if(!t){const{view:n,model:i}=this.editor;t={node:i.getNodeById(e),computedStyle:n.getComputedStyleOfId(e),style:i.getMatchedStyle(e,this.media.logicWidth)},this.parentsInfoMap.set(e,t)}return t}getCurrentRect(e){const t=this.currentRectsMap.get(e);if(!t)throw new Error("404");return t}getTargetInfo(e){const t=this.targetsInfoMap.get(e);if(!t)throw new Error("404");return t}getDockStatus(e){return this.currentDockingStatusMap.get(e)}}function sw(e,t,n,i){const r={},{x:o,y:s}=e,a=yr(t),l=vr(i);if(a)r.row=1,r.column=1,r.containerRect=n;else if(!l){const{row:e,column:t,rect:a}=iw(o,s,n,i);n=rw(a,n),r.row=e,r.column=t,r.containerRect=n}return r}function aw(e,t,n,i,r,o=!0,s=!1){const a=Object.create(null),l=yr(t),c=[],d=(n.left+n.right)/2,u=(n.top+n.bottom)/2,h=(e.left+e.right)/2,p=(e.top+e.bottom)/2,f=_r(t,fr.left),g=_r(t,fr.right),m=(e,i)=>tv(i,e,Zi(t[e])||Fi.px,n,r);let _,v;const y=f&&g;if(y?(_=!0,v=!0):l?(_=o?f:Math.abs(n.left-e.left)<Math.abs(e.left-d),v=o?g:!_):(_=o?f:Math.abs(n.left-e.left)<Math.abs(e.left-d),v=o?g:Math.abs(n.right-e.right)<Math.abs(e.right-d)),_){const t=e.left-n.left,i=m("margin-left",t);bi(t,0,5)||c.push({top:p,left:t>0?n.left:e.left,width:Math.abs(t),text:nv(i)}),a.left={value:i}}if(!_&&v||y){const t=n.right-e.right,i=m("margin-right",t);bi(t,0,5)||c.push({top:p,left:t>0?e.right:n.right,width:Math.abs(t),text:nv(i)}),a.right={value:i}}if(!_&&!v){const e=h-d;a.centerX={value:m("margin-left",2*e)}}let w,b;const x=_r(t,fr.top),C=_r(t,fr.bottom),k=x&&C;if(k?(w=!0,b=!0):l?(w=o?x:Math.abs(p-n.top)<Math.abs(p-n.bottom),b=o?C:!w):(w=o?x:1===a.row&&1===a.column&&"fixed"!==i.position||Math.abs(n.top-n.top)<Math.abs(n.top-u),b=o?C:Math.abs(n.bottom-n.bottom)<Math.abs(n.bottom-u)),w){const t=e.top-n.top,i=m("margin-top",t);bi(t,0,5)||c.push({top:t>0?n.top:e.top,left:h,height:Math.abs(t),text:nv(i)}),a.top={value:i}}if(!w&&b||k){const t=n.bottom-e.bottom,i=m("margin-bottom",t);bi(t,0,5)||c.push({top:t>0?e.bottom:n.bottom,left:h,height:Math.abs(t),text:nv(i)}),a.bottom={value:i}}if(!w&&!b){const e=p-u,t=2;a.centerY={value:m("margin-top",e*t)}}return{dockStatus:a,dockProps:c}}const lw=(e,t,n,i,r,o)=>{const s=Object.create(null),a="flex"===i.display,l="grid"===i.display,c=(e,i)=>tv(i,e,Zi(t[e])||Fi.px,n,o);if(a&&"column"!==i.flexDirection)throw new Error("500");if(!a&&!l)throw new Error("500");if(l&&(n=r.containerRect),Xi.includes(t.width)||(s.width=c("width",e.width)),Xi.includes(t.height)||(s.height=c("height",e.height)),a&&(s["margin-top"]=c("margin-top",0),s["margin-right"]=c("margin-right",0),s["margin-bottom"]=c("margin-bottom",0),s["margin-left"]=c("margin-left",0),s["align-self"]="center",s["justify-self"]="center"),l){r.left&&r.right?(s["margin-left"]=r.left.value,s["margin-right"]=r.right.value,s["justify-self"]="stretch",s.width="auto"):r.left?(s["margin-left"]=r.left.value,s["margin-right"]=c("margin-right",0),s["justify-self"]="start"):r.right&&(s["margin-left"]=c("margin-left",0),s["margin-right"]=r.right.value,s["justify-self"]="end"),r.centerX&&(s["margin-left"]=r.centerX.value,s["margin-right"]=c("margin-right",0),s["justify-self"]="center"),r.top&&r.bottom?(s["margin-top"]=r.top.value,s["margin-bottom"]=r.bottom.value,s["align-self"]="stretch",s.height="auto"):r.top?(s["margin-bottom"]=c("margin-bottom",0),s["margin-top"]=r.top.value,s["align-self"]="start"):r.bottom&&(s["margin-top"]=c("margin-top",0),s["margin-bottom"]=r.bottom.value,s["align-self"]="end"),r.centerY&&(s["margin-top"]=r.centerY.value,s["margin-bottom"]=c("margin-bottom",0),s["align-self"]="center");const{row:e,column:t}=r;s["grid-column-start"]=`${t}`,s["grid-column-end"]=`${t+1}`,s["grid-row-start"]=`${e}`,s["grid-row-end"]=`${e+1}`}return s};var cw=Object.defineProperty,dw=Object.getOwnPropertyDescriptor,uw=(e,t)=>(n,i)=>t(n,i,e);let hw=(o=class extends jo{constructor(e,t,n){super(),C(this,"_dragRequest",null),C(this,"_targetWidgets",[]),C(this,"_targetWidgetProps"),C(this,"_magneticLinesWidget"),C(this,"_magneticLinesProps"),C(this,"_dockLineWidget"),C(this,"_dockLineWidgetProps"),C(this,"_attachWidget"),C(this,"_attachWidgetProps"),C(this,"events",new Bo),this._editor=e,this.contextKeyService=t,this.configurationService=n,this._targetWidgetProps=id(Object.create(null)),this._magneticLinesProps=id([]),this._dockLineWidgetProps=id([]),this._attachWidgetProps=id(Object.create(null)),this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this._register(this.events),this.handleViewModeChange()}handleContextKeyChangeEvent(e){e.affectsSome(new Set([ym.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===pm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const e=this._editor.view;this.events.add(e.onMouseDragStart(this._onDragStart.bind(this))),this.events.add(e.onMouseDrag(this._onDrag.bind(this))),this.events.add(e.onMouseDrop(this._onDrop.bind(this))),this.events.add(e.onMouseDropCanceled(this._onDropCanceled.bind(this)))}_onDragStart(e){const{event:t}=e;if(t.shiftKey)return;const{viewModel:n,model:i,view:r}=this._editor,{targetPath:o}=e.target,s=o[o.length-1];let a,{selection:l}=n;if(l_.isChildOfCanvas(o)?a=s.fingerprint:l_.isDraggableWidget(o)&&"dragMove"===s.fingerprint&&(a=s.detail),!a)return;const c=!(t.ctrlKey||t.metaKey),[d]=Sy(this._editor,a,c);if(d&&!n.isIdSelected(d)&&(c&&!l.some((e=>{const t=i.getNodeById(e);return t&&!ao(t)&&!co(t)&&i.isAncestorNodeOfId(e,d)}))||!c)&&(this._editor.recordSelectionChanges((()=>{n.setSelectionById(d)})),l=[d]),l.length<=0)return;if(!this._canStartDragHandling())return;l.some((e=>{const t=i.getParentNodeOfId(e);if(a_.shouldNotBeSelected(e))return!0;if(ao(t))return!0;const n="fixed"===r.getComputedStyleOfId(e).position;return!(!co(i.getNodeById(e))||n)}))||(this._dragRequest=new ow(e,l,this._editor,this.configurationService),Object.assign(this._targetWidgetProps,{fromX:e.event.posX,fromY:e.event.posY}))}_canStartDragHandling(){const e=this.contextKeyService.getContextKeyValue(ym.editingMode.key);return!this.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key)&&(e===hm.Focus||e===hm.None)}_onDrag(e){if(!this._dragRequest)return;const t=this._dragRequest.moveTo(e);if(!t)return;const{reference:n,dock:i,attach:r}=t;if(this._magneticLinesProps.length=0,this._magneticLinesProps.push(...n),this._dockLineWidgetProps.length=0,this._dockLineWidgetProps.push(...i),r?Object.assign(this._attachWidgetProps,r,{show:!0}):this._attachWidgetProps.show=!1,this._dragRequest.shouldHandleDragAction()){this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.DragMove&&this.contextKeyService.setContext(ym.editingMode.key,hm.DragMove),this._targetWidgets.length<=0&&this._showHints();const{targetIds:e,disabledSet:t,deltaX:n,deltaY:i}=this._dragRequest;this._targetWidgets.forEach(((r,o)=>{t.has(e[o])||r.updateOffset(n,i)})),this._showDocks(),this.updateParentOutline(),this._showAttach()}}_isDragMoveState(){return this.contextKeyService.getContextKeyValue(ym.editingMode.key)===hm.DragMove}_onDrop(e){if(this._dragRequest){if(this._isDragMoveState()){this._dragRequest.shouldHandleDragAction()&&this._dragRequest.isChanged()&&this._commit();const e=this._dragRequest.targetIds;this.toggleMultiNodesVisibility(e,!0),Pp((()=>{this._isDragMoveState()&&this.contextKeyService.setContext(ym.editingMode.key,hm.Focus)}))}this._hideDocks(),this._hideAttach(),this._hideHints(),this._dragRequest=null}}_onDropCanceled(){if(this._dragRequest){if(this.contextKeyService.getContextKeyValue(ym.editingMode.key)===hm.DragMove){this.contextKeyService.setContext(ym.editingMode.key,hm.None),this._editor.checkout();const e=this._dragRequest.targetIds;this.toggleMultiNodesVisibility(e,!0)}this._hideDocks(),this._hideAttach(),this._hideHints(),this._dragRequest=null}}_commit(){const{_dragRequest:e}=this,{view:t}=this._editor,{currentAttachParentId:n,isParentChanged:i,isFromSingleParent:r}=e;this._editor.transform((()=>{e.targetIds.forEach((o=>{const s=e.getDockStatus(o),a=i||s.gridChange,{parent:l,moveHorizontalDisabled:c,moveVerticalDisabled:d}=e.getTargetInfo(o);if(c&&d)return;const u=r?n:l,h=vr(t.getComputedStyleOfId(u));a?h&&i?this._commitCaseInsertInAutoLayout(o,u):this._commitCaseOutOfParent(o,u):s.reorder?this._commitCaseReorderInsideParent(o):!h&&this._commitCaseInsideParent(o)}))}))}_commitCaseOutOfParent(e,t){const n=this._editor.model,i=this._editor.view,r=this._dragRequest.getCurrentRect(e),o=i.getElementRectById(t),s=n.getParentNodeOfId(e),a=i.getViewport(),l=n.getMatchedStyle(e,a.logicWidth),c=l.attrs,d=i.getComputedStyleOfId(t),u="flex"===d.display,h=this._dragRequest.getDockStatus(e),p={};vr(d)||(l.getAttr("width")===ji.auto&&Reflect.set(c,"width",Yi(r.width)),l.getAttr("height")===ji.auto&&Reflect.set(c,"height",Yi(r.height)),Object.assign(p,{"flex-grow":"","flex-basis":"","align-self":""}));const f=lw(r,c,o,d,h,i.getViewport());Object.assign(p,f),s.id!==this._dragRequest.currentAttachParentId&&n.reparentNode(e,t,u?h.before:null),n.updateStyle(e,p,a.logicWidth)}_commitCaseInsideParent(e){const t=this._editor.model,n=this._editor.view,i=n.getViewport(),{rect:r,isSelfPositionFixed:o}=this._dragRequest.getTargetInfo(e),s=this._dragRequest.getCurrentRect(e).top-r.top,a=t.getParentNodeOfId(e),l=Object.create(null),c=n.getComputedStyleOfId(e),d=t.getMatchedStyle(e,i.logicWidth),u=n.getComputedStyleOfId(a.id),h="flex"===u.display,p=n.getElementRectById(a.id),f=(e,t)=>tv(t,e,Zi(d.getAttr(e))||Fi.px,p,i),g=this._dragRequest.getDockStatus(e);if(g.left&&!g.right&&(l["margin-left"]=g.left.value,l["margin-right"]="",o?(l.right="",l.left=f("left",0)):h?l["align-self"]="flex-start":l["justify-self"]="start"),g.right&&!g.left&&(l["margin-left"]="",l["margin-right"]=g.right.value,o?(l.left="",l.right=f("right",0)):h?l["align-self"]="flex-end":l["justify-self"]="end"),g.left&&g.right&&(l["margin-left"]=g.left.value,l["margin-right"]=g.right.value,o?(l.right=f("left",0),l.left=f("right",0)):h?l["align-self"]="stretch":l["justify-self"]="stretch"),g.centerX&&(o&&Io(),l["margin-left"]=g.centerX.value,l["margin-right"]="",h?l["align-self"]="center":l["justify-self"]="center"),"grid"===u.display)g.top&&!g.bottom&&(l["margin-bottom"]="",l["margin-top"]=g.top.value,l["align-self"]="start"),g.bottom&&!g.top&&(l["margin-top"]="",l["margin-bottom"]=g.bottom.value,l["align-self"]="end"),g.centerY&&(l["margin-top"]=g.centerY.value,l["margin-bottom"]="",l["align-self"]="center"),g.top&&g.bottom&&(l["margin-top"]=g.top.value,l["margin-bottom"]=g.bottom.value,l["align-self"]="stretch");else if(h&&"column"===u.flexDirection){if(0!==s){const e=yi(c.marginTop)+s;l["margin-top"]=f("margin-top",e);const t=yi(c.marginBottom)-s;l["margin-bottom"]=f("margin-top",t)}}else o?(g.top&&!g.bottom&&(l["margin-bottom"]="",l.bottom="",l.top=f("top",0),l["margin-top"]=g.top.value),g.bottom&&!g.top&&(l["margin-top"]="",l.top="",l.bottom=f("bottom",0),l["margin-bottom"]=g.bottom.value),g.top&&g.bottom&&(l.bottom=f("bottom",0),l.top=f("top",0),l["margin-top"]=g.top.value,l["margin-bottom"]=g.bottom.value)):Oo();t.updateStyle(e,l,i.logicWidth)}_commitCaseReorderInsideParent(e){const t=this._editor.model,n=this._editor.view,i=Object.create(null),r=n.getViewport(),o=t.getMatchedStyle(e,r.logicWidth),s=(e,t)=>`${t}${Zi(o[e])||Fi.px}`;i["margin-top"]=s("margin-top",0),i["margin-bottom"]=s("margin-bottom",0);const a=this._dragRequest.getDockStatus(e),{before:l}=a;a.left&&(i["margin-left"]=a.left.value,i["margin-right"]="",i["align-self"]="flex-start"),a.right&&!a.left&&(i["margin-left"]="",i["margin-right"]=a.right.value,i["align-self"]="flex-end"),a.centerX&&(i["margin-left"]=a.centerX.value,i["margin-right"]="",i["align-self"]="center"),t.updateStyle(e,i,r.logicWidth),t.reorderNode(e,l)}_commitCaseInsertInAutoLayout(e,t){const{_dragRequest:n,_editor:i}=this,{model:r,view:o}=i,s=o.getViewport(),a=n.getCurrentRect(e),l=r.getNodeById(t),c=r.getMatchedStyle(e,s.logicWidth),d=c.attrs,u=r.getMatchedStyle(t,s.logicWidth),h=u.getAttr("width"),p=u.getAttr("height");h===ji.fitContent&&Zi(c.getAttr("width"))===Fi["%"]&&Reflect.set(d,"width",Yi(a.width)),p===ji.fitContent&&Zi(c.getAttr("height"))===Fi["%"]&&Reflect.set(d,"height",Yi(a.height));const f=o.createStyleFromHitPosition(a,l,d),g=n.getDockStatus(e);r.reparentNode(e,t,(null==g?void 0:g.before)||null),r.updateStyle(e,f,s.logicWidth)}_showHints(){const{view:e,model:t}=this._editor,n=this._dragRequest;this._targetWidgets=[];const i=n.targetIds;i.slice().sort(((e,n)=>{const i=t.getAncestorNodesOfId(e).map((e=>e.id)).concat(e),r=t.getAncestorNodesOfId(n).map((e=>e.id)).concat(n);let o=1;const s=Math.max(i.length,r.length);for(let a=0;a<s;a++){const e=i[a],n=r[a];if(e!==n){if(n&&e){const i=t.getNodeById(e),r=t.getNodeById(n);o=Es(i.order,r.order)}else console.warn("Unexpected",e,n);break}}return o})).forEach(((t,i)=>{const r=e.getElementById(t),{rect:o,moveHorizontalDisabled:s,moveVerticalDisabled:a,isInPositionFixedChain:l}=n.getTargetInfo(t);this._targetWidgets.push(new qy(r,this._targetWidgetProps,o,this._editor,s,a,l)),e.addContentWidget(this._targetWidgets[i],Ao.High,!1)})),this._magneticLinesWidget=new Yy(this._magneticLinesProps),e.addContentWidget(this._magneticLinesWidget,Ao.Medium,!1),this.toggleMultiNodesVisibility(i,!1)}_hideHints(){this._targetWidgets.length>=0&&(this._targetWidgets.forEach((e=>{this._editor.view.removeContentWidget(e)})),this._targetWidgets=[]),this._magneticLinesWidget&&(this._editor.view.removeContentWidget(this._magneticLinesWidget),this._magneticLinesWidget=null)}updateParentOutline(){const{targetIds:e,isFromSingleParent:t}=this._dragRequest,n=this._editor.model,i=this._editor.view,r=[];e.forEach((e=>{const o=n.getNodeById(e),s=this._dragRequest.getCurrentRect(e);let a,l;const c=this._dragRequest.getTargetInfo(e),d=t?this._dragRequest.currentAttachParentId:c.parent,u="root"===d,h=i.getElementRectById(u?":viewport":d),p=n.getNodeById(d);if(!p)throw new Error("500");const f=getComputedStyle(i.getElementById(p.id));if("flex"===f.display&&(l=p.id),l){a={rect:l===o.id?s:i.getElementRectById(l),clips:[]};const t=n.getChildrenNodesOfId(l);for(const n of t){const t=n.id===e?s:i.getElementRectById(n.id);a.clips.push(t)}}let g;if(!a&&"grid"===f.display){g={rect:i.getElementRectById(p.id),rows:zi(f.gridTemplateRows),columns:zi(f.gridTemplateColumns),columnGap:Ei(f.columnGap),rowGap:Ei(f.rowGap),paddingTop:parseFloat(f.paddingTop),paddingRight:parseFloat(f.paddingRight),paddingBottom:parseFloat(f.paddingBottom),paddingLeft:parseFloat(f.paddingLeft)}}const m={top:h.top,left:h.left,width:h.width,height:h.height,paddingTop:parseFloat(f.paddingTop),paddingRight:parseFloat(f.paddingRight),paddingBottom:parseFloat(f.paddingBottom),paddingLeft:parseFloat(f.paddingLeft)},_={left:s.left,top:s.top,width:s.width,height:s.height,show:!1,flex:a,grid:g,parent:void 0,padding:m};r.push(_)})),this._editor.view.updateOutline((e=>{e.length=0,e.push(...r)}))}_showDocks(){this._dockLineWidget||(this._dockLineWidget=new Qy(this._dockLineWidgetProps),this._editor.view.addOuterWidget(this._dockLineWidget,Ao.Low))}_hideDocks(){this._dockLineWidget&&(this._editor.view.removeOuterWidget(this._dockLineWidget),this._dockLineWidget=null)}_showAttach(){this._attachWidget||(this._attachWidget=new Zy(this._attachWidgetProps),this._editor.view.addOuterWidget(this._attachWidget,Ao.Low))}_hideAttach(){this._attachWidget&&(this._editor.view.removeOuterWidget(this._attachWidget),this._attachWidget=null)}toggleMultiNodesVisibility(e,t){const{viewModel:n}=this._editor;e.forEach((e=>{n.toggleVisibility(e,t)}))}},C(o,"ID","editor.contrib.dragMove"),o);hw=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?dw(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&cw(t,n,o),o})([uw(0,Sl),uw(1,Df),uw(2,zm)],hw),um(hw.ID,hw);function pw(e){this.content=e}pw.prototype={constructor:pw,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,r=i.find(e),o=i.content.slice();return-1==r?o.push(n||e,t):(o[r+1]=t,n&&(o[r]=n)),new pw(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new pw(n)},addToStart:function(e,t){return new pw([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new pw(n)},addBefore:function(e,t,n){var i=this.remove(t),r=i.content.slice(),o=i.find(e);return r.splice(-1==o?r.length:o,0,t,n),new pw(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=pw.from(e)).size?new pw(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=pw.from(e)).size?new pw(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=pw.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},pw.from=function(e){if(e instanceof pw)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new pw(t)};var fw=pw;function gw(e,t,n){for(var i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;var r=e.child(i),o=t.child(i);if(r!=o){if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(var s=0;r.text[s]==o.text[s];s++)n++;return n}if(r.content.size||o.content.size){var a=gw(r.content,o.content,n+1);if(null!=a)return a}n+=r.nodeSize}else n+=r.nodeSize}}function mw(e,t,n,i){for(var r=e.childCount,o=t.childCount;;){if(0==r||0==o)return r==o?null:{a:n,b:i};var s=e.child(--r),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:i};if(s.isText&&s.text!=a.text){for(var c=0,d=Math.min(s.text.length,a.text.length);c<d&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(s.content.size||a.content.size){var u=mw(s.content,a.content,n-1,i-1);if(u)return u}n-=l,i-=l}else n-=l,i-=l}}var _w=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},vw={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};_w.prototype.nodesBetween=function(e,t,n,i,r){void 0===i&&(i=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,i+s,r,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,i+c)}s=l}},_w.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},_w.prototype.textBetween=function(e,t,n,i){var r="",o=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&i?(r+="function"==typeof i?i(s):i,o=!n):!o&&s.isBlock&&(r+=n,o=!0)}),0),r},_w.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,i=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)i.push(e.content[r]);return new _w(i,this.size+e.size)},_w.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],i=0;if(t>e)for(var r=0,o=0;o<t;r++){var s=this.content[r],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),i+=s.nodeSize),o=a}return new _w(n,i)},_w.prototype.cutByIndex=function(e,t){return e==t?_w.empty:0==e&&t==this.content.length?this:new _w(this.content.slice(e,t))},_w.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var i=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new _w(i,r)},_w.prototype.addToStart=function(e){return new _w([e].concat(this.content),this.size+e.nodeSize)},_w.prototype.addToEnd=function(e){return new _w(this.content.concat(e),this.size+e.nodeSize)},_w.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},vw.firstChild.get=function(){return this.content.length?this.content[0]:null},vw.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},vw.childCount.get=function(){return this.content.length},_w.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},_w.prototype.maybeChild=function(e){return this.content[e]},_w.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var i=this.content[t];e(i,n,t),n+=i.nodeSize}},_w.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),gw(this,e,t)},_w.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),mw(this,e,t,n)},_w.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return ww(0,e);if(e==this.size)return ww(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,i=0;;n++){var r=i+this.child(n).nodeSize;if(r>=e)return r==e||t>0?ww(n+1,r):ww(n,i);i=r}},_w.prototype.toString=function(){return"<"+this.toStringInner()+">"},_w.prototype.toStringInner=function(){return this.content.join(", ")},_w.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},_w.fromJSON=function(e,t){if(!t)return _w.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new _w(t.map(e.nodeFromJSON))},_w.fromArray=function(e){if(!e.length)return _w.empty;for(var t,n=0,i=0;i<e.length;i++){var r=e[i];n+=r.nodeSize,i&&r.isText&&e[i-1].sameMarkup(r)?(t||(t=e.slice(0,i)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new _w(t||e,n)},_w.from=function(e){if(!e)return _w.empty;if(e instanceof _w)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _w([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(_w.prototype,vw);var yw={index:0,offset:0};function ww(e,t){return yw.index=e,yw.offset=t,yw}function bw(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!bw(e[i],t[i]))return!1}else{for(var r in e)if(!(r in t)||!bw(e[r],t[r]))return!1;for(var o in t)if(!(o in e))return!1}return!0}_w.empty=new _w([],0);var xw=function(e,t){this.type=e,this.attrs=t};function Cw(e){var t=Error.call(this,e);return t.__proto__=Cw.prototype,t}xw.prototype.addToSet=function(e){for(var t,n=!1,i=0;i<e.length;i++){var r=e[i];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,i));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t},xw.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},xw.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},xw.prototype.eq=function(e){return this==e||this.type==e.type&&bw(this.attrs,e.attrs)},xw.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},xw.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},xw.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},xw.setFrom=function(e){if(!e||0==e.length)return xw.none;if(e instanceof xw)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},xw.none=[],Cw.prototype=Object.create(Error.prototype),Cw.prototype.constructor=Cw,Cw.prototype.name="ReplaceError";var kw=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},Ew={size:{configurable:!0}};function Sw(e,t,n){var i=e.findIndex(t),r=i.index,o=i.offset,s=e.maybeChild(r),a=e.findIndex(n),l=a.index,c=a.offset;if(o==t||s.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(Sw(s.content,t-o-1,n-o-1)))}function Iw(e,t,n,i){var r=e.findIndex(t),o=r.index,s=r.offset,a=e.maybeChild(o);if(s==t||a.isText)return i&&!i.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=Iw(a.content,t-s-1,n);return l&&e.replaceChild(o,a.copy(l))}function Ow(e,t,n){if(n.openStart>e.depth)throw new Cw("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Cw("Inconsistent open depths");return Tw(e,t,n,0)}function Tw(e,t,n,i){var r=e.index(i),o=e.node(i);if(r==t.index(i)&&i<e.depth-n.openStart){var s=Tw(e,t,n,i+1);return o.copy(o.content.replaceChild(r,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=i||t.depth!=i){var a=function(e,t){for(var n=t.depth-e.openStart,i=t.node(n).copy(e.content),r=n-1;r>=0;r--)i=t.node(r).copy(_w.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}(n,e);return Dw(o,Pw(e,a.start,a.end,t,i))}var l=e.parent,c=l.content;return Dw(l,c.cut(0,e.parentOffset).append(n.content).append(c.cut(t.parentOffset)))}return Dw(o,Lw(e,t,i))}function Mw(e,t){if(!t.type.compatibleContent(e.type))throw new Cw("Cannot join "+t.type.name+" onto "+e.type.name)}function Nw(e,t,n){var i=e.node(n);return Mw(i,t.node(n)),i}function Aw(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Rw(e,t,n,i){var r=(t||e).node(n),o=0,s=t?t.index(n):r.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Aw(e.nodeAfter,i),o++));for(var a=o;a<s;a++)Aw(r.child(a),i);t&&t.depth==n&&t.textOffset&&Aw(t.nodeBefore,i)}function Dw(e,t){if(!e.type.validContent(t))throw new Cw("Invalid content for node "+e.type.name);return e.copy(t)}function Pw(e,t,n,i,r){var o=e.depth>r&&Nw(e,t,r+1),s=i.depth>r&&Nw(n,i,r+1),a=[];return Rw(null,e,r,a),o&&s&&t.index(r)==n.index(r)?(Mw(o,s),Aw(Dw(o,Pw(e,t,n,i,r+1)),a)):(o&&Aw(Dw(o,Lw(e,t,r+1)),a),Rw(t,n,r,a),s&&Aw(Dw(s,Lw(n,i,r+1)),a)),Rw(i,null,r,a),new _w(a)}function Lw(e,t,n){var i=[];(Rw(null,e,n,i),e.depth>n)&&Aw(Dw(Nw(e,t,n+1),Lw(e,t,n+1)),i);return Rw(t,null,n,i),new _w(i)}Ew.size.get=function(){return this.content.size-this.openStart-this.openEnd},kw.prototype.insertAt=function(e,t){var n=Iw(this.content,e+this.openStart,t,null);return n&&new kw(n,this.openStart,this.openEnd)},kw.prototype.removeBetween=function(e,t){return new kw(Sw(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},kw.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},kw.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},kw.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},kw.fromJSON=function(e,t){if(!t)return kw.empty;var n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new kw(_w.fromJSON(e,t.content),n,i)},kw.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,i=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new kw(e,n,i)},Object.defineProperties(kw.prototype,Ew),kw.empty=new kw(_w.empty,0,0);var Uw=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},Fw={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Uw.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},Fw.parent.get=function(){return this.node(this.depth)},Fw.doc.get=function(){return this.node(0)},Uw.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},Uw.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},Uw.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},Uw.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},Uw.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},Uw.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},Uw.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},Fw.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Fw.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i},Fw.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},Uw.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],i=0==t?0:this.path[3*t-1]+1,r=0;r<e;r++)i+=n.child(r).nodeSize;return i},Uw.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return xw.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){var r=n;n=i,i=r}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||i&&o[s].isInSet(i.marks)||(o=o[s--].removeFromSet(o));return o},Uw.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,i=e.parent.maybeChild(e.index()),r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||i&&n[r].isInSet(i.marks)||(n=n[r--].removeFromSet(n));return n},Uw.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},Uw.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new zw(this,e,n)},Uw.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},Uw.prototype.max=function(e){return e.pos>this.pos?e:this},Uw.prototype.min=function(e){return e.pos<this.pos?e:this},Uw.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},Uw.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],i=0,r=t,o=e;;){var s=o.content.findIndex(r),a=s.index,l=s.offset,c=r-l;if(n.push(o,a,i+l),!c)break;if((o=o.child(a)).isText)break;r=c-1,i+=l+1}return new Uw(t,n,r)},Uw.resolveCached=function(e,t){for(var n=0;n<Bw.length;n++){var i=Bw[n];if(i.pos==t&&i.doc==e)return i}var r=Bw[jw]=Uw.resolve(e,t);return jw=(jw+1)%Vw,r},Object.defineProperties(Uw.prototype,Fw);var Bw=[],jw=0,Vw=12,zw=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},Kw={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Kw.start.get=function(){return this.$from.before(this.depth+1)},Kw.end.get=function(){return this.$to.after(this.depth+1)},Kw.parent.get=function(){return this.$from.node(this.depth)},Kw.startIndex.get=function(){return this.$from.index(this.depth)},Kw.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(zw.prototype,Kw);var Ww=Object.create(null),Hw=function(e,t,n,i){this.type=e,this.attrs=t,this.content=n||_w.empty,this.marks=i||xw.none},$w={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};$w.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},$w.childCount.get=function(){return this.content.childCount},Hw.prototype.child=function(e){return this.content.child(e)},Hw.prototype.maybeChild=function(e){return this.content.maybeChild(e)},Hw.prototype.forEach=function(e){this.content.forEach(e)},Hw.prototype.nodesBetween=function(e,t,n,i){void 0===i&&(i=0),this.content.nodesBetween(e,t,n,i,this)},Hw.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},$w.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Hw.prototype.textBetween=function(e,t,n,i){return this.content.textBetween(e,t,n,i)},$w.firstChild.get=function(){return this.content.firstChild},$w.lastChild.get=function(){return this.content.lastChild},Hw.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},Hw.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},Hw.prototype.hasMarkup=function(e,t,n){return this.type==e&&bw(this.attrs,t||e.defaultAttrs||Ww)&&xw.sameSet(this.marks,n||xw.none)},Hw.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},Hw.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},Hw.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},Hw.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return kw.empty;var i=this.resolve(e),r=this.resolve(t),o=n?0:i.sharedDepth(t),s=i.start(o),a=i.node(o).content.cut(i.pos-s,r.pos-s);return new kw(a,i.depth-o,r.depth-o)},Hw.prototype.replace=function(e,t,n){return Ow(this.resolve(e),this.resolve(t),n)},Hw.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),i=n.index,r=n.offset;if(!(t=t.maybeChild(i)))return null;if(r==e||t.isText)return t;e-=r+1}},Hw.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,i=t.offset;return{node:this.content.maybeChild(n),index:n,offset:i}},Hw.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,i=t.offset;if(i<e)return{node:this.content.child(n),index:n,offset:i};var r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}},Hw.prototype.resolve=function(e){return Uw.resolveCached(this,e)},Hw.prototype.resolveNoCache=function(e){return Uw.resolve(this,e)},Hw.prototype.rangeHasMark=function(e,t,n){var i=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(i=!0),!i})),i},$w.isBlock.get=function(){return this.type.isBlock},$w.isTextblock.get=function(){return this.type.isTextblock},$w.inlineContent.get=function(){return this.type.inlineContent},$w.isInline.get=function(){return this.type.isInline},$w.isText.get=function(){return this.type.isText},$w.isLeaf.get=function(){return this.type.isLeaf},$w.isAtom.get=function(){return this.type.isAtom},Hw.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Yw(this.marks,e)},Hw.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},Hw.prototype.canReplace=function(e,t,n,i,r){void 0===n&&(n=_w.empty),void 0===i&&(i=0),void 0===r&&(r=n.childCount);var o=this.contentMatchAt(e).matchFragment(n,i,r),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=i;a<r;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Hw.prototype.canReplaceWith=function(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;var r=this.contentMatchAt(e).matchType(n),o=r&&r.matchFragment(this.content,t);return!!o&&o.validEnd},Hw.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},Hw.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=xw.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!xw.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},Hw.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},Hw.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var i=_w.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,n)},Object.defineProperties(Hw.prototype,$w);var qw=function(e){function t(t,n,i,r){if(e.call(this,t,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Yw(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(Hw);function Yw(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var Gw=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Xw={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Gw.parse=function(e,t){var n=new Jw(e,t);if(null==n.next)return Gw.empty;var i=Zw(n);n.next&&n.err("Unexpected trailing text");var r=function(e){var t=Object.create(null);return n(ob(e,0));function n(i){var r=[];i.forEach((function(t){e[t].forEach((function(t){var n=t.term,i=t.to;if(n){var o=r.indexOf(n),s=o>-1&&r[o+1];ob(e,i).forEach((function(e){s||r.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var o=t[i.join(",")]=new Gw(i.indexOf(e.length-1)>-1),s=0;s<r.length;s+=2){var a=r[s+1].sort(rb);o.next.push(r[s],t[a.join(",")]||n(a))}return o}}(function(e){var t=[[]];return r(o(e,0),n()),t;function n(){return t.push([])-1}function i(e,n,i){var r={term:i,to:n};return t[e].push(r),r}function r(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(o(n,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=o(e.exprs[s],t);if(s==e.exprs.length-1)return a;r(a,t=n())}else{if("star"==e.type){var l=n();return i(t,l),r(o(e.expr,l),l),[i(l)]}if("plus"==e.type){var c=n();return r(o(e.expr,t),c),r(o(e.expr,c),c),[i(c)]}if("opt"==e.type)return[i(t)].concat(o(e.expr,t));if("range"==e.type){for(var d=t,u=0;u<e.min;u++){var h=n();r(o(e.expr,d),h),d=h}if(-1==e.max)r(o(e.expr,d),d);else for(var p=e.min;p<e.max;p++){var f=n();i(d,f),r(o(e.expr,d),f),d=f}return[i(d)]}if("name"==e.type)return[i(t,null,e.value)]}}}(i));return function(e,t){for(var n=0,i=[e];n<i.length;n++){for(var r=i[n],o=!r.validEnd,s=[],a=0;a<r.next.length;a+=2){var l=r.next[a],c=r.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==i.indexOf(c)&&i.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r},Gw.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},Gw.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var i=this,r=t;i&&r<n;r++)i=i.matchType(e.child(r).type);return i},Xw.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},Xw.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},Gw.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},Gw.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var i=[this];return function r(o,s){var a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return _w.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var c=o.next[l],d=o.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==i.indexOf(d)){i.push(d);var u=r(d,s.concat(c));if(u)return u}}}(this,[])},Gw.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},Gw.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var i=n.shift(),r=i.match;if(r.matchType(e)){for(var o=[],s=i;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||i.type&&!r.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}},Xw.edgeCount.get=function(){return this.next.length>>1},Gw.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},Gw.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var i=1;i<n.next.length;i+=2)-1==e.indexOf(n.next[i])&&t(n.next[i])}(this),e.map((function(t,n){for(var i=n+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)i+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return i})).join("\n")},Object.defineProperties(Gw.prototype,Xw),Gw.empty=new Gw(!0);var Jw=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Qw={next:{configurable:!0}};function Zw(e){var t=[];do{t.push(eb(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function eb(e){var t=[];do{t.push(tb(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function tb(e){for(var t=function(e){if(e.eat("(")){var t=Zw(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,i=n[t];if(i)return[i];var r=[];for(var o in n){var s=n[o];s.groups.indexOf(t)>-1&&r.push(s)}0==r.length&&e.err("No node type or group '"+t+"' found");return r}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=ib(e,t)}return t}function nb(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function ib(e,t){var n=nb(e),i=n;return e.eat(",")&&(i="}"!=e.next?nb(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:t}}function rb(e,t){return t-e}function ob(e,t){var n=[];return function t(i){var r=e[i];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=s.term,l=s.to;a||-1!=n.indexOf(l)||t(l)}}(t),n.sort(rb)}function sb(e){var t=Object.create(null);for(var n in e){var i=e[n];if(!i.hasDefault)return null;t[n]=i.default}return t}function ab(e,t){var n=Object.create(null);for(var i in e){var r=t&&t[i];if(void 0===r){var o=e[i];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=o.default}n[i]=r}return n}function lb(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new ub(e[n]);return t}Qw.next.get=function(){return this.tokens[this.pos]},Jw.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Jw.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Jw.prototype,Qw);var cb=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=lb(n.attrs),this.defaultAttrs=sb(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},db={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};db.isInline.get=function(){return!this.isBlock},db.isTextblock.get=function(){return this.isBlock&&this.inlineContent},db.isLeaf.get=function(){return this.contentMatch==Gw.empty},db.isAtom.get=function(){return this.isLeaf||this.spec.atom},cb.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},cb.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},cb.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:ab(this.attrs,e)},cb.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hw(this,this.computeAttrs(e),_w.from(t),xw.setFrom(n))},cb.prototype.createChecked=function(e,t,n){if(t=_w.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Hw(this,this.computeAttrs(e),t,xw.setFrom(n))},cb.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=_w.from(t)).size){var i=this.contentMatch.fillBefore(t);if(!i)return null;t=i.append(t)}var r=this.contentMatch.matchFragment(t).fillBefore(_w.empty,!0);return r?new Hw(this,e,t.append(r),xw.setFrom(n)):null},cb.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},cb.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},cb.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},cb.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:xw.empty:e},cb.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,i){return n[e]=new cb(e,t,i)}));var i=t.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(cb.prototype,db);var ub=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},hb={isRequired:{configurable:!0}};hb.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(ub.prototype,hb);var pb=function(e,t,n,i){this.name=e,this.schema=n,this.spec=i,this.attrs=lb(i.attrs),this.rank=t,this.excluded=null;var r=sb(this.attrs);this.instance=r&&new xw(this,r)};pb.prototype.create=function(e){return!e&&this.instance?this.instance:new xw(this,ab(this.attrs,e))},pb.compile=function(e,t){var n=Object.create(null),i=0;return e.forEach((function(e,r){return n[e]=new pb(e,i++,t,r)})),n},pb.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},pb.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},pb.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var fb=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=fw.from(e.nodes),this.spec.marks=fw.from(e.marks),this.nodes=cb.compile(this.spec.nodes,this),this.marks=pb.compile(this.spec.marks,this);var n=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var r=this.nodes[i],o=r.spec.content||"",s=r.spec.marks;r.contentMatch=n[o]||(n[o]=Gw.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==s?null:s?gb(this,s.split(" ")):""!=s&&r.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:gb(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function gb(e,t){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=e.marks[r],s=o;if(o)n.push(o);else for(var a in e.marks){var l=e.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return n}fb.prototype.node=function(e,t,n,i){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof cb))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,i)},fb.prototype.text=function(e,t){var n=this.nodes.text;return new qw(n,n.defaultAttrs,e,xw.setFrom(t))},fb.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},fb.prototype.nodeFromJSON=function(e){return Hw.fromJSON(this,e)},fb.prototype.markFromJSON=function(e){return xw.fromJSON(this,e)},fb.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var mb=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};mb.prototype.parse=function(e,t){void 0===t&&(t={});var n=new xb(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},mb.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new xb(this,t,!0);return n.addAll(e,null,t.from,t.to),kw.maxOpen(n.finish())},mb.prototype.matchTag=function(e,t,n){for(var i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){var r=this.tags[i];if(kb(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(e);if(!1===o)continue;r.attrs=o}return r}}},mb.prototype.matchStyle=function(e,t,n,i){for(var r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},mb.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,i=0;i<t.length;i++){var r=t[i];if((null==r.priority?50:r.priority)<n)break}t.splice(i,0,e)}var i=function(t){var i=e.marks[t].spec.parseDOM;i&&i.forEach((function(e){n(e=Eb(e)),e.mark=t}))};for(var r in e.marks)i(r);var o;for(var s in e.nodes)o=void 0,(o=e.nodes[s].spec.parseDOM)&&o.forEach((function(e){n(e=Eb(e)),e.node=s}));return t},mb.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new mb(e,mb.schemaRules(e)))};var _b={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},vb={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yb={ol:!0,ul:!0};function wb(e){return(e?1:0)|("full"===e?2:0)}var bb=function(e,t,n,i,r,o,s){this.type=e,this.attrs=t,this.solid=r,this.match=o||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=xw.none,this.pendingMarks=i,this.stashMarks=[]};bb.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(_w.from(e));if(!t){var n,i=this.type.contentMatch;return(n=i.findWrapping(e.type))?(this.match=i,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},bb.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var i=_w.from(this.content);return!e&&this.match&&(i=i.append(this.match.fillBefore(_w.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i},bb.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},bb.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var i=n[t];(this.type?this.type.allowsMarkType(i.type):Sb(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}},bb.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_b.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var xb=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var i,r=t.topNode,o=wb(t.preserveWhitespace)|(n?4:0);i=r?new bb(r.type,r.attrs,xw.none,xw.none,!0,t.topMatch||r.type.contentMatch,o):new bb(n?null:e.schema.topNodeType,null,xw.none,xw.none,!0,null,o),this.nodes=[i],this.open=0,this.find=t.findPositions,this.needsBlock=!1},Cb={top:{configurable:!0},currentPos:{configurable:!0}};function kb(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Eb(e){var t={};for(var n in e)t[n]=e[n];return t}function Sb(e,t){var n=t.schema.nodes,i=function(i){var r=n[i];if(r.allowsMarkType(e)){var o=[],s=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var i=e.edge(n),r=i.type,a=i.next;if(r==t)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(r.contentMatch)?{v:!0}:void 0}};for(var r in n){var o=i(r);if(o)return o.v}}Cb.top.get=function(){return this.nodes[this.open]},xb.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;t=n.exec(e);)i.push(t[1],t[2].trim());return i}(t)):null,i=this.top;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],i)}},xb.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var i=n.content[n.content.length-1],r=e.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},xb.prototype.addElement=function(e,t){var n,i=e.nodeName.toLowerCase();yb.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var i=1==t.nodeType?t.nodeName.toLowerCase():null;i&&yb.hasOwnProperty(i)&&n?(n.appendChild(t),t=n):"li"==i?n=t:i&&(n=null)}}(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(r?r.ignore:vb.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);var o,s=this.top,a=this.needsBlock;if(_b.hasOwnProperty(i))o=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,r,!1===r.consuming?n:null)},xb.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},xb.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},xb.prototype.readStyles=function(e){var t=xw.none;e:for(var n=0;n<e.length;n+=2)for(var i=null;;){var r=this.parser.matchStyle(e[n],e[n+1],this,i);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;i=r}return t},xb.prototype.addElementByRule=function(e,t,n){var i,r,o,s=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):i=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,i)}i&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},xb.prototype.addAll=function(e,t,n,i){for(var r=n||0,o=n?e.childNodes[n]:e.firstChild,s=null==i?null:e.childNodes[i];o!=s;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o),t&&_b.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,r)},xb.prototype.findPlace=function(e){for(var t,n,i=this.open;i>=0;i--){var r=this.nodes[i],o=r.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=r,!o.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},xb.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var i=n.activeMarks,r=0;r<e.marks.length;r++)n.type&&!n.type.allowsMarkType(e.marks[r].type)||(i=e.marks[r].addToSet(i));return n.content.push(e.mark(i)),!0}return!1},xb.prototype.enter=function(e,t,n){var i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i},xb.prototype.enterInner=function(e,t,n,i){this.closeExtra();var r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e,t);var o=null==i?-5&r.options:wb(i);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new bb(e,t,r.activeMarks,r.pendingMarks,n,null,o)),this.open++},xb.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},xb.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},xb.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},Cb.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,i=n.length-1;i>=0;i--)e+=n[i].nodeSize;t&&e++}return e},xb.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},xb.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},xb.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var i=0;i<this.find.length;i++){if(null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node))t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}},xb.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},xb.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),i=this.options.context,r=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),o=-(i?i.depth+1:0)+(r?0:1),s=function(e,a){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&r?t.nodes[a].type:i&&a>=o?i.node(a-o).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},xb.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var i in this.parser.schema.nodes){var r=this.parser.schema.nodes[i];if(r.isTextblock&&r.defaultAttrs)return r}},xb.prototype.addPendingMark=function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},xb.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);var r=i.popFromStashMark(e);r&&i.type&&i.type.allowsMarkType(r.type)&&(i.activeMarks=r.addToSet(i.activeMarks))}if(i==t)break}},Object.defineProperties(xb.prototype,Cb);var Ib=function(e,t){this.nodes=e||{},this.marks=t||{}};function Ob(e){var t={};for(var n in e){var i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function Tb(e){return e.document||window.document}Ib.prototype.serializeFragment=function(e,t,n){var i=this;void 0===t&&(t={}),n||(n=Tb(t).createDocumentFragment());var r=n,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<e.marks.length;){var a=e.marks[s];if(i.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)r=o.pop(),o.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=i.serializeMark(l,e.isInline,t);c&&(o.push(l,r),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(i.serializeNodeInner(e,t))})),n},Ib.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var n=Ib.renderSpec(Tb(t),this.nodes[e.type.name](e)),i=n.dom,r=n.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return i},Ib.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),i=e.marks.length-1;i>=0;i--){var r=this.serializeMark(e.marks[i],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n},Ib.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var i=this.marks[e.type.name];return i&&Ib.renderSpec(Tb(n),i(e,t))},Ib.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var i=t[0],r=i.indexOf(" ");r>0&&(n=i.slice(0,r),i=i.slice(r+1));var o=null,s=n?e.createElementNS(n,i):e.createElement(i),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var d=c.indexOf(" ");d>0?s.setAttributeNS(c.slice(0,d),c.slice(d+1),a[c]):s.setAttribute(c,a[c])}for(var u=l;u<t.length;u++){var h=t[u];if(0===h){if(u<t.length-1||u>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=Ib.renderSpec(e,h,n),f=p.dom,g=p.contentDOM;if(s.appendChild(f),g){if(o)throw new RangeError("Multiple content holes");o=g}}return{dom:s,contentDOM:o}},Ib.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ib(this.nodesFromSchema(e),this.marksFromSchema(e)))},Ib.nodesFromSchema=function(e){var t=Ob(e.nodes);return t.text||(t.text=function(e){return e.text}),t},Ib.marksFromSchema=function(e){return Ob(e.marks)};var Mb=Math.pow(2,16);function Nb(e,t){return e+t*Mb}function Ab(e){return 65535&e}var Rb=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},Db=function e(t,n){if(void 0===n&&(n=!1),!t.length&&e.empty)return e.empty;this.ranges=t,this.inverted=n};Db.prototype.recover=function(e){var t=0,n=Ab(e);if(!this.inverted)for(var i=0;i<n;i++)t+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Mb}(e)},Db.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Db.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Db.prototype._map=function(e,t,n){for(var i=0,r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?i:0);if(a>e)break;var l=this.ranges[s+r],c=this.ranges[s+o],d=a+l;if(e<=d){var u=a+i+((l?e==a?-1:e==d?1:t:t)<0?0:c);if(n)return u;var h=e==(t<0?a:d)?null:Nb(s/3,e-a);return new Rb(u,t<0?e!=a:e!=d,h)}i+=c-l}return n?e+i:new Rb(e+i)},Db.prototype.touches=function(e,t){for(var n=0,i=Ab(t),r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+r];if(e<=a+l&&s==3*i)return!0;n+=this.ranges[s+o]-l}return!1},Db.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,i=0,r=0;i<this.ranges.length;i+=3){var o=this.ranges[i],s=o-(this.inverted?r:0),a=o+(this.inverted?0:r),l=this.ranges[i+t],c=this.ranges[i+n];e(s,s+l,a,a+c),r+=c-l}},Db.prototype.invert=function(){return new Db(this.ranges,!this.inverted)},Db.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Db.offset=function(e){return 0==e?Db.empty:new Db(e<0?[0,-e,0]:[0,0,e])},Db.empty=new Db([]);var Pb=function(e,t,n,i){this.maps=e||[],this.from=n||0,this.to=null==i?this.maps.length:i,this.mirror=t};function Lb(e){var t=Error.call(this,e);return t.__proto__=Lb.prototype,t}Pb.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new Pb(this.maps,this.mirror,e,t)},Pb.prototype.copy=function(){return new Pb(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Pb.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},Pb.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var i=e.getMirror(t);this.appendMap(e.maps[t],null!=i&&i<t?n+i:null)}},Pb.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},Pb.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},Pb.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var i=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=i&&i>t?n-i-1:null)}},Pb.prototype.invert=function(){var e=new Pb;return e.appendMappingInverted(this),e},Pb.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},Pb.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Pb.prototype._map=function(e,t,n){for(var i=!1,r=this.from;r<this.to;r++){var o=this.maps[r].mapResult(e,t);if(null!=o.recover){var s=this.getMirror(r);if(null!=s&&s>r&&s<this.to){r=s,e=this.maps[s].recover(o.recover);continue}}o.deleted&&(i=!0),e=o.pos}return n?e:new Rb(e,i)},Lb.prototype=Object.create(Error.prototype),Lb.prototype.constructor=Lb,Lb.prototype.name="TransformError";var Ub=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Pb},Fb={before:{configurable:!0},docChanged:{configurable:!0}};function Bb(){throw new Error("Override me")}Fb.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Ub.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new Lb(t.failed);return this},Ub.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},Fb.docChanged.get=function(){return this.steps.length>0},Ub.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(Ub.prototype,Fb);var jb=Object.create(null),Vb=function(){};Vb.prototype.apply=function(e){return Bb()},Vb.prototype.getMap=function(){return Db.empty},Vb.prototype.invert=function(e){return Bb()},Vb.prototype.map=function(e){return Bb()},Vb.prototype.merge=function(e){return null},Vb.prototype.toJSON=function(){return Bb()},Vb.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=jb[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},Vb.jsonID=function(e,t){if(e in jb)throw new RangeError("Duplicate use of step JSON ID "+e);return jb[e]=t,t.prototype.jsonID=e,t};var zb=function(e,t){this.doc=e,this.failed=t};zb.ok=function(e){return new zb(e,null)},zb.fail=function(e){return new zb(null,e)},zb.fromReplace=function(e,t,n,i){try{return zb.ok(e.replace(t,n,i))}catch(f8){if(f8 instanceof Cw)return zb.fail(f8.message);throw f8}};var Kb=function(e){function t(t,n,i,r){e.call(this),this.from=t,this.to=n,this.slice=i,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&Hb(e,this.from,this.to)?zb.fail("Structure replace would overwrite content"):zb.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Db([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted?null:new t(n.pos,Math.max(n.pos,i.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?kw.empty:new kw(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?kw.empty:new kw(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,kw.fromJSON(e,n.slice),!!n.structure)},t}(Vb);Vb.jsonID("replace",Kb);var Wb=function(e){function t(t,n,i,r,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(Hb(e,this.from,this.gapFrom)||Hb(e,this.gapTo,this.to)))return zb.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return zb.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?zb.fromReplace(e,this.from,this.to,n):zb.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Db([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&i.deleted||r<n.pos||o>i.pos?null:new t(n.pos,i.pos,r,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,kw.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(Vb);function Hb(e,t,n){for(var i=e.resolve(t),r=n-t,o=i.depth;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0)for(var s=i.node(o).maybeChild(i.indexAfter(o));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function $b(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function qb(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var i=e.$from.node(n),r=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&i.canReplace(r,o,t))return n;if(0==n||i.type.spec.isolating||!$b(i,r,o))break}}function Yb(e,t,n,i){void 0===i&&(i=e);var r=function(e,t){var n=e.parent,i=e.startIndex,r=e.endIndex,o=n.contentMatchAt(i).findWrapping(t);if(!o)return null;var s=o.length?o[0]:t;return n.canReplaceWith(i,r,s)?o:null}(e,t),o=r&&function(e,t){var n=e.parent,i=e.startIndex,r=e.endIndex,o=n.child(i),s=t.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,l=i;a&&l<r;l++)a=a.matchType(n.child(l).type);if(!a||!a.validEnd)return null;return s}(i,t);return o?r.map(Gb).concat({type:t,attrs:n}).concat(o.map(Gb)):null}function Gb(e){return{type:e,attrs:null}}function Xb(e,t,n,i){void 0===n&&(n=1);var r=e.resolve(t),o=r.depth-n,s=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=n-2;a>o;a--,l--){var c=r.node(a),d=r.index(a);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(d,c.childCount),h=i&&i[l]||c;if(h!=c&&(u=u.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(d+1,c.childCount)||!h.type.validContent(u))return!1}var p=r.indexAfter(o),f=i&&i[0];return r.node(o).canReplaceWith(p,p,f?f.type:r.node(o+1).type)}function Jb(e,t){var n,i,r=e.resolve(t),o=r.index();return n=r.nodeBefore,i=r.nodeAfter,n&&i&&!n.isLeaf&&n.canAppend(i)&&r.parent.canReplace(o,o+1)}function Qb(e,t,n){for(var i=[],r=0;r<e.childCount;r++){var o=e.child(r);o.content.size&&(o=o.copy(Qb(o.content,t,o))),o.isInline&&(o=t(o,n,r)),i.push(o)}return _w.fromArray(i)}Vb.jsonID("replaceAround",Wb),Ub.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,r=e.depth,o=n.before(r+1),s=i.after(r+1),a=o,l=s,c=_w.empty,d=0,u=r,h=!1;u>t;u--)h||n.index(u)>0?(h=!0,c=_w.from(n.node(u).copy(c)),d++):a--;for(var p=_w.empty,f=0,g=r,m=!1;g>t;g--)m||i.after(g+1)<i.end(g)?(m=!0,p=_w.from(i.node(g).copy(p)),f++):l++;return this.step(new Wb(a,l,o,s,new kw(c.append(p),d,f),c.size-d,!0))},Ub.prototype.wrap=function(e,t){for(var n=_w.empty,i=t.length-1;i>=0;i--){if(n.size){var r=t[i].type.contentMatch.matchFragment(n);if(!r||!r.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=_w.from(t[i].type.create(t[i].attrs,n))}var o=e.start,s=e.end;return this.step(new Wb(o,s,o,s,new kw(n,0,0),t.length,!0))},Ub.prototype.setBlockType=function(e,t,n,i){var r=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&function(e,t,n){var i=e.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(r.doc,r.mapping.slice(o).map(t),n)){r.clearIncompatible(r.mapping.slice(o).map(t,1),n);var s=r.mapping.slice(o),a=s.map(t,1),l=s.map(t+e.nodeSize,1);return r.step(new Wb(a,l,a+1,l-1,new kw(_w.from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},Ub.prototype.setNodeMarkup=function(e,t,n,i){var r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);var o=t.create(n,null,i||r.marks);if(r.isLeaf)return this.replaceWith(e,e+r.nodeSize,o);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Wb(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new kw(_w.from(o),0,0),1,!0))},Ub.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),r=_w.empty,o=_w.empty,s=i.depth,a=i.depth-t,l=t-1;s>a;s--,l--){r=_w.from(i.node(s).copy(r));var c=n&&n[l];o=_w.from(c?c.type.create(c.attrs,o):i.node(s).copy(o))}return this.step(new Kb(e,e,new kw(r.append(o),t,t),!0))},Ub.prototype.join=function(e,t){void 0===t&&(t=1);var n=new Kb(e-t,e+t,kw.empty,!0);return this.step(n)};var Zb=function(e){function t(t,n,i){e.call(this),this.from=t,this.to=n,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new kw(Qb(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),r),n.openStart,n.openEnd);return zb.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new ex(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Vb);Vb.jsonID("addMark",Zb);var ex=function(e){function t(t,n,i){e.call(this),this.from=t,this.to=n,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new kw(Qb(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return zb.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new Zb(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Vb);function tx(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=kw.empty),t==n&&!i.size)return null;var r=e.resolve(t),o=e.resolve(n);return nx(r,o,i)?new Kb(t,n,i):new ix(r,o,i).fit()}function nx(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Vb.jsonID("removeMark",ex),Ub.prototype.addMark=function(e,t,n){var i=this,r=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(i,l,c){if(i.isInline){var d=i.marks;if(!n.isInSet(d)&&c.type.allowsMarkType(n.type)){for(var u=Math.max(l,e),h=Math.min(l+i.nodeSize,t),p=n.addToSet(d),f=0;f<d.length;f++)d[f].isInSet(p)||(s&&s.to==u&&s.mark.eq(d[f])?s.to=h:r.push(s=new ex(u,h,d[f])));a&&a.to==u?a.to=h:o.push(a=new Zb(u,h,n))}}})),r.forEach((function(e){return i.step(e)})),o.forEach((function(e){return i.step(e)})),this},Ub.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var r=[],o=0;return this.doc.nodesBetween(e,t,(function(i,s){if(i.isInline){o++;var a=null;if(n instanceof pb)for(var l,c=i.marks;l=n.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else n?n.isInSet(i.marks)&&(a=[n]):a=i.marks;if(a&&a.length)for(var d=Math.min(s+i.nodeSize,t),u=0;u<a.length;u++){for(var h=a[u],p=void 0,f=0;f<r.length;f++){var g=r[f];g.step==o-1&&h.eq(r[f].style)&&(p=g)}p?(p.to=d,p.step=o):r.push({style:h,from:Math.max(s,e),to:d,step:o})}}})),r.forEach((function(e){return i.step(new ex(e.from,e.to,e.style))})),this},Ub.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),r=[],o=e+1,s=0;s<i.childCount;s++){var a=i.child(s),l=o+a.nodeSize,c=n.matchType(a.type,a.attrs);if(c){n=c;for(var d=0;d<a.marks.length;d++)t.allowsMarkType(a.marks[d].type)||this.step(new ex(o,l,a.marks[d]))}else r.push(new Kb(o,l,kw.empty));o=l}if(!n.validEnd){var u=n.fillBefore(_w.empty,!0);this.replace(o,o,new kw(u,0,0))}for(var h=r.length-1;h>=0;h--)this.step(r[h]);return this},Ub.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=kw.empty);var i=tx(this.doc,e,t,n);return i&&this.step(i),this},Ub.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new kw(_w.from(n),0,0))},Ub.prototype.delete=function(e,t){return this.replace(e,t,kw.empty)},Ub.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var ix=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var i=0;i<=e.depth;i++){var r=e.node(i);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(i))})}this.placed=_w.empty;for(var o=e.depth;o>0;o--)this.placed=_w.from(e.node(o).copy(this.placed))},rx={depth:{configurable:!0}};function ox(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(ox(e.firstChild.content,t-1,n)))}function sx(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(sx(e.lastChild.content,t-1,n)))}function ax(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function lx(e,t,n){if(t<=0)return e;var i=e.content;return t>1&&(i=i.replaceChild(0,lx(i.firstChild,t-1,1==i.childCount?n-1:0))),t>0&&(i=e.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(_w.empty,!0)))),e.copy(i)}function cx(e,t,n,i,r){var o=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=i.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(var i=n;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}(n,o.content,s)?a:null}function dx(e,t,n,i,r){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(dx(o.content,t+1,n,i,o)))}if(t>i){var s=r.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(_w.empty,!0))}return e}function ux(e,t){for(var n=[],i=Math.min(e.depth,t.depth);i>=0;i--){var r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}rx.depth.get=function(){return this.frontier.length-1},ix.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;for(var o=this.placed,s=i.depth,a=r.depth;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;var l=new kw(o,s,a);return t>-1?new Wb(i.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new Kb(i.pos,r.pos,l):void 0},ix.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,i=(t?(n=ax(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var o=this.frontier[r],s=o.type,a=o.match,l=void 0,c=void 0;if(1==e&&(i?a.matchType(i.type)||(c=a.fillBefore(_w.from(i),!1)):s.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:r,parent:n,inject:c};if(2==e&&i&&(l=a.findWrapping(i.type)))return{sliceDepth:t,frontierDepth:r,parent:n,wrap:l};if(n&&a.matchType(n.type))break}},ix.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,r=ax(t,n);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new kw(t,n+1,Math.max(i,r.size+n>=t.size-i?n+1:0)),!0)},ix.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,r=ax(t,n);if(r.childCount<=1&&n>0){var o=t.size-n<=n+r.size;this.unplaced=new kw(ox(t,n-1,1),n-1,o?n-1:i)}else this.unplaced=new kw(ox(t,n,1),n,i)},ix.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,i=e.parent,r=e.inject,o=e.wrap;this.depth>n;)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,l=i?i.content:a.content,c=a.openStart-t,d=0,u=[],h=this.frontier[n],p=h.match,f=h.type;if(r){for(var g=0;g<r.childCount;g++)u.push(r.child(g));p=p.matchFragment(r)}for(var m=l.size+t-(a.content.size-a.openEnd);d<l.childCount;){var _=l.child(d),v=p.matchType(_.type);if(!v)break;(++d>1||0==c||_.content.size)&&(p=v,u.push(lx(_.mark(f.allowedMarks(_.marks)),1==d?c:0,d==l.childCount?m:-1)))}var y=d==l.childCount;y||(m=-1),this.placed=sx(this.placed,n,_w.from(u)),this.frontier[n].match=p,y&&m<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,b=l;w<m;w++){var x=b.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),b=x.content}this.unplaced=y?0==t?kw.empty:new kw(ox(a.content,t-1,1),t-1,m<0?a.openEnd:t-1):new kw(ox(a.content,t,d),a.openStart,a.openEnd)},ix.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!cx(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,i=this.$to.after(n);n>1&&i==this.$to.end(--n);)++i;return i},ix.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],i=n.match,r=n.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=cx(e,t,r,i,o);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,d=cx(e,a,l.type,c,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}},ix.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=sx(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var i=e.node(n),r=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,r)}return e},ix.prototype.openFrontierNode=function(e,t,n){var i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=sx(this.placed,this.depth,_w.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},ix.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(_w.empty,!0);e.childCount&&(this.placed=sx(this.placed,this.frontier.length,e))},Object.defineProperties(ix.prototype,rx),Ub.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),r=this.doc.resolve(t);if(nx(i,r,n))return this.step(new Kb(e,t,n));var o=ux(i,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var s=-(i.depth+1);o.unshift(s);for(var a=i.depth,l=i.pos-1;a>0;a--,l--){var c=i.node(a).type.spec;if(c.defining||c.isolating)break;o.indexOf(a)>-1?s=a:i.before(a)==l&&o.splice(1,0,-a)}for(var d=o.indexOf(s),u=[],h=n.openStart,p=n.content,f=0;;f++){var g=p.firstChild;if(u.push(g),f==n.openStart)break;p=g.content}h>0&&u[h-1].type.spec.defining&&i.node(d).type!=u[h-1].type?h-=1:h>=2&&u[h-1].isTextblock&&u[h-2].type.spec.defining&&i.node(d).type!=u[h-2].type&&(h-=2);for(var m=n.openStart;m>=0;m--){var _=(m+h+1)%(n.openStart+1),v=u[_];if(v)for(var y=0;y<o.length;y++){var w=o[(y+d)%o.length],b=!0;w<0&&(b=!1,w=-w);var x=i.node(w-1),C=i.index(w-1);if(x.canReplaceWith(C,C,v.type,v.marks))return this.replace(i.before(w),b?r.after(w):t,new kw(dx(n.content,0,n.openStart,_),_,n.openEnd))}}for(var k=this.steps.length,E=o.length-1;E>=0&&(this.replace(e,t,n),!(this.steps.length>k));E--){var S=o[E];S<0||(e=i.before(S),t=r.after(S))}return this},Ub.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=function(e,t,n){var i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),n))return t;if(0==i.parentOffset)for(var r=i.depth-1;r>=0;r--){var o=i.index(r);if(i.node(r).canReplaceWith(o,o,n))return i.before(r+1);if(o>0)return null}if(i.parentOffset==i.parent.content.size)for(var s=i.depth-1;s>=0;s--){var a=i.indexAfter(s);if(i.node(s).canReplaceWith(a,a,n))return i.after(s+1);if(a<i.node(s).childCount)return null}}(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new kw(_w.from(n),0,0))},Ub.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),i=this.doc.resolve(t),r=ux(n,i),o=0;o<r.length;o++){var s=r[o],a=o==r.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),i.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),i.indexAfter(s-1))))return this.delete(n.before(s),i.after(s))}for(var l=1;l<=n.depth&&l<=i.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&i.end(l)-t!=i.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};var hx=Object.create(null),px=function(e,t,n){this.ranges=n||[new gx(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},fx={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};fx.anchor.get=function(){return this.$anchor.pos},fx.head.get=function(){return this.$head.pos},fx.from.get=function(){return this.$from.pos},fx.to.get=function(){return this.$to.pos},fx.$from.get=function(){return this.ranges[0].$from},fx.$to.get=function(){return this.ranges[0].$to},fx.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},px.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},px.prototype.replace=function(e,t){void 0===t&&(t=kw.empty);for(var n=t.content.lastChild,i=null,r=0;r<t.openEnd;r++)i=n,n=n.lastChild;for(var o=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,d=l.$to,u=e.mapping.slice(o);e.replaceRange(u.map(c.pos),u.map(d.pos),a?kw.empty:t),0==a&&Cx(e,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}},px.prototype.replaceWith=function(e,t){for(var n=e.steps.length,i=this.ranges,r=0;r<i.length;r++){var o=i[r],s=o.$from,a=o.$to,l=e.mapping.slice(n),c=l.map(s.pos),d=l.map(a.pos);r?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),Cx(e,n,t.isInline?-1:1))}},px.findFrom=function(e,t,n){var i=e.parent.inlineContent?new mx(e):xx(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(var r=e.depth-1;r>=0;r--){var o=t<0?xx(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):xx(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(o)return o}},px.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new wx(e.node(0))},px.atStart=function(e){return xx(e,e,0,0,1)||new wx(e)},px.atEnd=function(e){return xx(e,e,e.content.size,e.childCount,-1)||new wx(e)},px.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=hx[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},px.jsonID=function(e,t){if(e in hx)throw new RangeError("Duplicate use of selection JSON ID "+e);return hx[e]=t,t.prototype.jsonID=e,t},px.prototype.getBookmark=function(){return mx.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(px.prototype,fx),px.prototype.visible=!0;var gx=function(e,t){this.$from=e,this.$to=t},mx=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,i){var r=n.resolve(i.map(this.head));if(!r.parent.inlineContent)return e.near(r);var o=n.resolve(i.map(this.anchor));return new t(o.parent.inlineContent?o:r,r)},t.prototype.replace=function(t,n){if(void 0===n&&(n=kw.empty),e.prototype.replace.call(this,t,n),n==kw.empty){var i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new _x(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))},t.between=function(n,i,r){var o=n.pos-i.pos;if(r&&!o||(r=o>=0?1:-1),!i.parent.inlineContent){var s=e.findFrom(i,r,!0)||e.findFrom(i,-r,!0);if(!s)return e.near(i,r);i=s.$head}return n.parent.inlineContent||(0==o||(n=(e.findFrom(n,-r,!0)||e.findFrom(n,r,!0)).$anchor).pos<i.pos!=o<0)&&(n=i),new t(n,i)},Object.defineProperties(t.prototype,n),t}(px);px.jsonID("text",mx);var _x=function(e,t){this.anchor=e,this.head=t};_x.prototype.map=function(e){return new _x(e.map(this.anchor),e.map(this.head))},_x.prototype.resolve=function(e){return mx.between(e.resolve(this.anchor),e.resolve(this.head))};var vx=function(e){function t(t){var n=t.nodeAfter,i=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,i),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,i){var r=i.mapResult(this.anchor),o=r.deleted,s=r.pos,a=n.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new kw(_w.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new yx(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(px);vx.prototype.visible=!1,px.jsonID("node",vx);var yx=function(e){this.anchor=e};yx.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,i=t.pos;return n?new _x(i,i):new yx(i)},yx.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&vx.isSelectable(n)?new vx(t):px.near(t)};var wx=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=kw.empty),n==kw.empty){t.delete(0,t.doc.content.size);var i=e.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return bx},t}(px);px.jsonID("all",wx);var bx={map:function(){return this},resolve:function(e){return new wx(e)}};function xx(e,t,n,i,r,o){if(t.inlineContent)return mx.create(e,n);for(var s=i-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var a=t.child(s);if(a.isAtom){if(!o&&vx.isSelectable(a))return vx.create(e,n-(r<0?a.nodeSize:0))}else{var l=xx(e,a,n+r,r<0?a.childCount:0,r,o);if(l)return l}n+=a.nodeSize*r}}function Cx(e,t,n){var i=e.steps.length-1;if(!(i<t)){var r,o=e.steps[i];if(o instanceof Kb||o instanceof Wb)e.mapping.maps[i].forEach((function(e,t,n,i){null==r&&(r=i)})),e.setSelection(px.near(e.doc.resolve(r),n))}}var kx=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return xw.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||xw.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var i=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var o=this.doc.resolve(t);r=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,r)),this.selection.empty||this.setSelection(px.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(Ub);function Ex(e,t){return t&&e?e.bind(t):e}var Sx=function(e,t,n){this.name=e,this.init=Ex(t.init,n),this.apply=Ex(t.apply,n)},Ix=[new Sx("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new Sx("selection",{init:function(e,t){return e.selection||px.atStart(t.doc)},apply:function(e){return e.selection}}),new Sx("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,i){return i.selection.$cursor?e.storedMarks:null}}),new Sx("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Ox=function(e,t){var n=this;this.schema=e,this.fields=Ix.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new Sx(e.key,e.spec.state,e))}))},Tx=function(e){this.config=e},Mx={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Mx.schema.get=function(){return this.config.schema},Mx.plugins.get=function(){return this.config.plugins},Tx.prototype.apply=function(e){return this.applyTransaction(e).state},Tx.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0},Tx.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),i=null;;){for(var r=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=i?i[o].n:0,l=i?i[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(var d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),r=!0}i&&(i[o]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}},Tx.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new Tx(this.config),n=this.config.fields,i=0;i<n.length;i++){var r=n[i];t[r.name]=r.apply(e,this[r.name],this,t)}for(var o=0;o<Nx.length;o++)Nx[o](this,e,t);return t},Mx.tr.get=function(){return new kx(this)},Tx.create=function(e){for(var t=new Ox(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Tx(t),i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n},Tx.prototype.reconfigure=function(e){for(var t=new Ox(this.schema,e.plugins),n=t.fields,i=new Tx(t),r=0;r<n.length;r++){var o=n[r].name;i[o]=this.hasOwnProperty(o)?this[o]:n[r].init(e,i)}return i},Tx.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var i=e[n],r=i.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(i,this[i.key]))}return t},Tx.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new Ox(e.schema,e.plugins),r=new Tx(i);return i.fields.forEach((function(i){if("doc"==i.name)r.doc=Hw.fromJSON(e.schema,t.doc);else if("selection"==i.name)r.selection=px.fromJSON(r.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var o in n){var s=n[o],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(r[i.name]=a.fromJSON.call(s,e,t[o],r))}r[i.name]=i.init(e,r)}})),r},Tx.addApplyListener=function(e){Nx.push(e)},Tx.removeApplyListener=function(e){var t=Nx.indexOf(e);t>-1&&Nx.splice(t,1)},Object.defineProperties(Tx.prototype,Mx);var Nx=[];function Ax(e,t,n){for(var i in e){var r=e[i];r instanceof Function?r=r.bind(t):"handleDOMEvents"==i&&(r=Ax(r,t,{})),n[i]=r}return n}var Rx=function(e){this.props={},e.props&&Ax(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:Px("plugin")};Rx.prototype.getState=function(e){return e[this.key]};var Dx=Object.create(null);function Px(e){return e in Dx?e+"$"+ ++Dx[e]:(Dx[e]=0,e+"$")}var Lx=function(e){void 0===e&&(e="key"),this.key=Px(e)};function Ux(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Fx(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var r=Vx(i);if(!r){var o=i.blockRange(),s=o&&qb(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}var a=r.nodeBefore;if(!a.type.spec.isolating&&Jx(e,r,t))return!0;if(0==i.parent.content.size&&(Bx(a,"end")||vx.isSelectable(a))){var l=tx(e.doc,i.before(),i.after(),kw.empty);if(l.slice.size<l.to-l.from){if(t){var c=e.tr.step(l);c.setSelection(Bx(a,"end")?px.findFrom(c.doc.resolve(c.mapping.map(r.pos,-1)),-1):vx.create(c.doc,r.pos-a.nodeSize)),t(c.scrollIntoView())}return!0}}return!(!a.isAtom||r.depth!=i.depth-1)&&(t&&t(e.tr.delete(r.pos-a.nodeSize,r.pos).scrollIntoView()),!0)}function Bx(e,t,n){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&1!=e.childCount)return!1}return!1}function jx(e,t,n){var i=e.selection,r=i.$head,o=r;if(!i.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=Vx(r)}var s=o&&o.nodeBefore;return!(!s||!vx.isSelectable(s))&&(t&&t(e.tr.setSelection(vx.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}function Vx(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function zx(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size))return!1;var r=Wx(i);if(!r)return!1;var o=r.nodeAfter;if(Jx(e,r,t))return!0;if(0==i.parent.content.size&&(Bx(o,"start")||vx.isSelectable(o))){var s=tx(e.doc,i.before(),i.after(),kw.empty);if(s.slice.size<s.to-s.from){if(t){var a=e.tr.step(s);a.setSelection(Bx(o,"start")?px.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):vx.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=i.depth-1)&&(t&&t(e.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0)}function Kx(e,t,n){var i=e.selection,r=i.$head,o=r;if(!i.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=Wx(r)}var s=o&&o.nodeAfter;return!(!s||!vx.isSelectable(s))&&(t&&t(e.tr.setSelection(vx.create(e.doc,o.pos)).scrollIntoView()),!0)}function Wx(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Hx(e,t){var n=e.selection,i=n.$from,r=n.$to,o=i.blockRange(r),s=o&&qb(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}function $x(e,t){var n=e.selection,i=n.$head,r=n.$anchor;return!(!i.parent.type.spec.code||!i.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function qx(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Yx(e,t){var n=e.selection,i=n.$head,r=n.$anchor;if(!i.parent.type.spec.code||!i.sameParent(r))return!1;var o=i.node(-1),s=i.indexAfter(-1),a=qx(o.contentMatchAt(s));if(!o.canReplaceWith(s,s,a))return!1;if(t){var l=i.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(px.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function Gx(e,t){var n=e.selection,i=n.$from,r=n.$to;if(n instanceof wx||i.parent.inlineContent||r.parent.inlineContent)return!1;var o=qx(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){var s=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=e.tr.insert(s,o.createAndFill());a.setSelection(mx.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}function Xx(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(Xb(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var r=n.blockRange(),o=r&&qb(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)}function Jx(e,t,n){var i,r,o=t.nodeBefore,s=t.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){var i=t.nodeBefore,r=t.nodeAfter,o=t.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!r.isTextblock&&!Jb(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(i=(r=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&r.matchType(i[0]||s.type).validEnd){if(n){for(var l=t.pos+s.nodeSize,c=_w.empty,d=i.length-1;d>=0;d--)c=_w.from(i[d].create(null,c));c=_w.from(o.copy(c));var u=e.tr.step(new Wb(t.pos-1,l,t.pos,l,new kw(c,1,0),i.length,!0)),h=l+2*i.length;Jb(u.doc,h)&&u.join(h),n(u.scrollIntoView())}return!0}var p=px.findFrom(t,1),f=p&&p.$from.blockRange(p.$to),g=f&&qb(f);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(f,g).scrollIntoView()),!0;if(a&&Bx(s,"start",!0)&&Bx(o,"end")){for(var m=o,_=[];_.push(m),!m.isTextblock;)m=m.lastChild;for(var v=s,y=1;!v.isTextblock;v=v.firstChild)y++;if(m.canReplace(m.childCount,m.childCount,v.content)){if(n){for(var w=_w.empty,b=_.length-1;b>=0;b--)w=_w.from(_[b].copy(w));n(e.tr.step(new Wb(t.pos-_.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new kw(w,_.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Qx(e){return function(t,n){for(var i=t.selection,r=e<0?i.$from:i.$to,o=r.depth;r.node(o).isInline;){if(!o)return!1;o--}return!!r.node(o).isTextblock&&(n&&n(t.tr.setSelection(mx.create(t.doc,e<0?r.start(o):r.end(o)))),!0)}}Lx.prototype.get=function(e){return e.config.pluginsByKey[this.key]},Lx.prototype.getState=function(e){return e[this.key]};var Zx=Qx(-1),eC=Qx(1);function tC(e,t){return function(n,i){var r=n.selection,o=r.$from,s=r.$to,a=o.blockRange(s),l=a&&Yb(a,e,t);return!!l&&(i&&i(n.tr.wrap(a,l).scrollIntoView()),!0)}}function nC(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,i){for(var r=0;r<e.length;r++)if(e[r](t,n,i))return!0;return!1}}var iC=nC(Ux,Fx,jx),rC=nC(Ux,zx,Kx),oC={Enter:nC($x,Gx,Xx,(function(e,t){var n=e.selection,i=n.$from,r=n.$to;if(e.selection instanceof vx&&e.selection.node.isBlock)return!(!i.parentOffset||!Xb(e.doc,i.pos))&&(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(t){var o=r.parentOffset==r.parent.content.size,s=e.tr;(e.selection instanceof mx||e.selection instanceof wx)&&s.deleteSelection();var a=0==i.depth?null:qx(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=o&&a?[{type:a}]:null,c=Xb(s.doc,s.mapping.map(i.pos),1,l);if(l||c||!Xb(s.doc,s.mapping.map(i.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(s.split(s.mapping.map(i.pos),1,l),!o&&!i.parentOffset&&i.parent.type!=a)){var d=s.mapping.map(i.before()),u=s.doc.resolve(d);i.node(-1).canReplaceWith(u.index(),u.index()+1,a)&&s.setNodeMarkup(s.mapping.map(i.before()),a)}t(s.scrollIntoView())}return!0})),"Mod-Enter":Yx,Backspace:iC,"Mod-Backspace":iC,"Shift-Backspace":iC,Delete:rC,"Mod-Delete":rC,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new wx(e.doc))),!0}},sC={"Ctrl-h":oC.Backspace,"Alt-Backspace":oC["Mod-Backspace"],"Ctrl-d":oC.Delete,"Ctrl-Alt-Backspace":oC["Mod-Delete"],"Alt-Delete":oC["Mod-Delete"],"Alt-d":oC["Mod-Delete"],"Ctrl-a":Zx,"Ctrl-e":eC};for(var aC in oC)sC[aC]=oC[aC];function lC(e,t){return function(n,i){var r=n.selection,o=r.$from,s=r.$to,a=o.blockRange(s),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;var d=n.doc.resolve(a.start-2);c=new zw(d,d,a.depth),a.endIndex<a.parent.childCount&&(a=new zw(o,n.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var u=Yb(c,e,t,a);return!!u&&(i&&i(function(e,t,n,i,r){for(var o=_w.empty,s=n.length-1;s>=0;s--)o=_w.from(n[s].type.create(n[s].attrs,o));e.step(new Wb(t.start-(i?2:0),t.end,t.start,t.end,new kw(o,0,0),n.length,!0));for(var a=0,l=0;l<n.length;l++)n[l].type==r&&(a=l+1);for(var c=n.length-a,d=t.start+n.length-(i?2:0),u=t.parent,h=t.startIndex,p=t.endIndex,f=!0;h<p;h++,f=!1)!f&&Xb(e.doc,d,c)&&(e.split(d,c),d+=2*c),d+=u.child(h).nodeSize;return e}(n.tr,a,u,l,e).scrollIntoView()),!0)}}function cC(e){return function(t,n){var i=t.selection,r=i.$from,o=i.$to,s=r.blockRange(o,(function(t){return t.childCount&&t.firstChild.type==e}));return!!s&&(!n||(r.node(s.depth-1).type==e?function(e,t,n,i){var r=e.tr,o=i.end,s=i.$to.end(i.depth);o<s&&(r.step(new Wb(o-1,s,o,s,new kw(_w.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new zw(r.doc.resolve(i.$from.pos),r.doc.resolve(s),i.depth));return t(r.lift(i,qb(i)).scrollIntoView()),!0}(t,n,e,s):function(e,t,n){for(var i=e.tr,r=n.parent,o=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)o-=r.child(s).nodeSize,i.delete(o-1,o+1);var l=i.doc.resolve(n.start),c=l.nodeAfter;if(i.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var d=0==n.startIndex,u=n.endIndex==r.childCount,h=l.node(-1),p=l.index(-1);if(!h.canReplace(p+(d?0:1),p+1,c.content.append(u?_w.empty:_w.from(r))))return!1;var f=l.pos,g=f+c.nodeSize;return i.step(new Wb(f-(d?1:0),g+(u?1:0),f+1,g-1,new kw((d?_w.empty:_w.from(r.copy(_w.empty))).append(u?_w.empty:_w.from(r.copy(_w.empty))),d?0:1,u?0:1),d?0:1)),t(i.scrollIntoView()),!0}(t,n,s)))}}function dC(e,t,n){for(let i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;let r=e.child(i),o=t.child(i);if(r!=o){if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(let e=0;r.text[e]==o.text[e];e++)n++;return n}if(r.content.size||o.content.size){let e=dC(r.content,o.content,n+1);if(null!=e)return e}n+=r.nodeSize}else n+=r.nodeSize}}function uC(e,t,n,i){for(let r=e.childCount,o=t.childCount;;){if(0==r||0==o)return r==o?null:{a:n,b:i};let s=e.child(--r),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:i};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,i--;return{a:n,b:i}}if(s.content.size||a.content.size){let e=uC(s.content,a.content,n-1,i-1);if(e)return e}n-=l,i-=l}else n-=l,i-=l}}oC.Home=Zx,oC.End=eC,"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform();class hC{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,i=0,r){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,i+s,r||null,o)&&a.content.size){let r=s+1;a.nodesBetween(Math.max(0,e-r),Math.min(a.content.size,t-r),n,i+r)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,i){let r="",o=!0;return this.nodesBetween(e,t,((s,a)=>{s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&i?(r+="function"==typeof i?i(s):i,o=!n):!o&&s.isBlock&&(r+=n,o=!0)}),0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,i=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)i.push(e.content[r]);return new hC(i,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],i=0;if(t>e)for(let r=0,o=0;o<t;r++){let s=this.content[r],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),i+=s.nodeSize),o=a}return new hC(n,i)}cutByIndex(e,t){return e==t?hC.empty:0==e&&t==this.content.length?this:new hC(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let i=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new hC(i,r)}addToStart(e){return new hC([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new hC(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let i=this.content[t];e(i,n,t),n+=i.nodeSize}}findDiffStart(e,t=0){return dC(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return uC(this,e,t,n)}findIndex(e,t=-1){if(0==e)return fC(0,e);if(e==this.size)return fC(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let r=i+this.child(n).nodeSize;if(r>=e)return r==e||t>0?fC(n+1,r):fC(n,i);i=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return hC.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new hC(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return hC.empty;let t,n=0;for(let i=0;i<e.length;i++){let r=e[i];n+=r.nodeSize,i&&r.isText&&e[i-1].sameMarkup(r)?(t||(t=e.slice(0,i)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new hC(t||e,n)}static from(e){if(!e)return hC.empty;if(e instanceof hC)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new hC([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}hC.empty=new hC([],0);const pC={index:0,offset:0};function fC(e,t){return pC.index=e,pC.offset=t,pC}function gC(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!gC(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!gC(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class mC{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let i=0;i<e.length;i++){let r=e[i];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,i));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gC(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return mC.none;if(e instanceof mC)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}mC.none=[];class _C{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=yC(this.content,e+this.openStart,t);return n&&new _C(n,this.openStart,this.openEnd)}removeBetween(e,t){return new _C(vC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return _C.empty;let n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new _C(hC.fromJSON(e,t.content),n,i)}static maxOpen(e,t=!0){let n=0,i=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)i++;return new _C(e,n,i)}}function vC(e,t,n){let{index:i,offset:r}=e.findIndex(t),o=e.maybeChild(i),{index:s,offset:a}=e.findIndex(n);if(r==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(i,o.copy(vC(o.content,t-r-1,n-r-1)))}function yC(e,t,n,i){let{index:r,offset:o}=e.findIndex(t),s=e.maybeChild(r);if(o==t||s.isText)return i&&!i.canReplace(r,r,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=yC(s.content,t-o-1,n);return a&&e.replaceChild(r,s.copy(a))}_C.empty=new _C(hC.empty,0,0);class wC{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new SC(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new SC(this,t,!0);return n.addAll(e,t.from,t.to),_C.maxOpen(n.finish())}matchTag(e,t,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let n=this.tags[i];if(IC(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,i){for(let r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){let i=this.styles[r],o=i.style;if(!(0!=o.indexOf(e)||i.context&&!n.matchesContext(i.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,i=0;for(;i<t.length;i++){let e=t[i];if((null==e.priority?50:e.priority)<n)break}t.splice(i,0,e)}for(let i in e.marks){let t=e.marks[i].spec.parseDOM;t&&t.forEach((e=>{n(e=OC(e)),e.mark=i}))}for(let i in e.nodes){let t=e.nodes[i].spec.parseDOM;t&&t.forEach((e=>{n(e=OC(e)),e.node=i}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new wC(e,wC.schemaRules(e)))}}const bC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},CC={ol:!0,ul:!0};function kC(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class EC{constructor(e,t,n,i,r,o,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=i,this.solid=r,this.options=s,this.content=[],this.activeMarks=mC.none,this.stashMarks=[],this.match=o||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(hC.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=hC.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(hC.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let i=n[t];(this.type?this.type.allowsMarkType(i.type):TC(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class SC{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let i,r=t.topNode,o=kC(null,t.preserveWhitespace,0)|(n?4:0);i=r?new EC(r.type,r.attrs,mC.none,mC.none,!0,t.topMatch||r.type.contentMatch,o):new EC(n?null:e.schema.topNodeType,null,mC.none,mC.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style"),n=t?this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;t=n.exec(e);)i.push(t[1],t[2].trim());return i}(t)):null,i=this.top;if(null!=n)for(let e=0;e<n.length;e++)this.addPendingMark(n[e]);if(this.addElement(e),null!=n)for(let e=0;e<n.length;e++)this.removePendingMark(n[e],i)}}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],r=e.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,i=e.nodeName.toLowerCase();CC.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&CC.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(r?r.ignore:xC.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);let t,n=this.top,o=this.needsBlock;if(bC.hasOwnProperty(i))t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=o}else this.addElementByRule(e,r,!1===r.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=mC.none;e:for(let n=0;n<e.length;n+=2)for(let i;;){let r=this.parser.matchStyle(e[n],e[n+1],this,i);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;i=r}return t}addElementByRule(e,t,n){let i,r,o;if(t.node)r=this.parser.schema.nodes[t.node],r.isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):i=this.enter(r,t.attrs||null,t.preserveWhitespace);else{o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o)}let s=this.top;if(r&&r.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}i&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(e,t,n){let i=t||0;for(let r=t?e.childNodes[t]:e.firstChild,o=null==n?null:e.childNodes[n];r!=o;r=r.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(r);this.findAtPoint(e,i)}findPlace(e){let t,n;for(let i=this.open;i>=0;i--){let r=this.nodes[i],o=r.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=r,!o.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let i=0;i<e.marks.length;i++)t.type&&!t.type.allowsMarkType(e.marks[i].type)||(n=e.marks[i].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i}enterInner(e,t=null,n=!1,i){this.closeExtra();let r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e);let o=kC(e,i,r.options);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new EC(e,t,r.activeMarks,r.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)if(null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node)){t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,i=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),r=-(n?n.depth+1:0)+(i?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=r;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&i?this.nodes[s].type:n&&s>=r?n.node(s-r).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let t=i.popFromStashMark(e);t&&i.type&&i.type.allowsMarkType(t.type)&&(i.activeMarks=t.addToSet(i.activeMarks))}if(i==t)break}}}function IC(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function OC(e){let t={};for(let n in e)t[n]=e[n];return t}function TC(e,t){let n=t.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:i,next:r}=e.edge(n);if(i==t)return!0;if(o.indexOf(r)<0&&s(r))return!0}};if(s(r.contentMatch))return!0}}class MC{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=AC(t).createDocumentFragment());let i=n,r=[];return e.forEach((e=>{if(r.length||e.marks.length){let n=0,o=0;for(;n<r.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(r[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}for(;n<r.length;)i=r.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(r.push([n,i]),i.appendChild(s.dom),i=s.contentDOM||s.dom)}}i.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:i}=MC.renderSpec(AC(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let r=this.serializeMark(e.marks[i],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(e,t,n={}){let i=this.marks[e.type.name];return i&&MC.renderSpec(AC(n),i(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));let s=n?e.createElementNS(n,r):e.createElement(r),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let c=l;c<t.length;c++){let r=t[c];if(0===r){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:o}=MC.renderSpec(e,r,n);if(s.appendChild(t),o){if(i)throw new RangeError("Multiple content holes");i=o}}}return{dom:s,contentDOM:i}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new MC(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=NC(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return NC(e.marks)}}function NC(e){let t={};for(let n in e){let i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function AC(e){return e.document||window.document}const RC="undefined"!=typeof navigator?navigator:null,DC="undefined"!=typeof document?document:null,PC=RC&&RC.userAgent||"",LC=/Edge\/(\d+)/.exec(PC),UC=/MSIE \d/.exec(PC),FC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(PC),BC=!!(UC||FC||LC),jC=UC?document.documentMode:FC?+FC[1]:LC?+LC[1]:0,VC=!BC&&/gecko\/(\d+)/i.test(PC);VC&&(/Firefox\/(\d+)/.exec(PC)||[0,0])[1];const zC=!BC&&/Chrome\/(\d+)/.exec(PC),KC=!!zC,WC=zC?+zC[1]:0,HC=!BC&&!!RC&&/Apple Computer/.test(RC.vendor),$C=HC&&(/Mobile\/\w+/.test(PC)||!!RC&&RC.maxTouchPoints>2),qC=$C||!!RC&&/Mac/.test(RC.platform),YC=/Android \d/.test(PC),GC=!!DC&&"webkitFontSmoothing"in DC.documentElement.style,XC=GC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,JC=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},QC=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let ZC=null;const ek=function(e,t,n){let i=ZC||(ZC=document.createRange());return i.setEnd(e,null==n?e.nodeValue.length:n),i.setStart(e,t||0),i},tk=function(e,t,n,i){return n&&(ik(e,t,n,i,-1)||ik(e,t,n,i,1))},nk=/^(img|br|input|textarea|hr)$/i;function ik(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:rk(e))){let n=e.parentNode;if(!n||1!=n.nodeType||ok(e)||nk.test(e.nodeName)||"false"==e.contentEditable)return!1;t=JC(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?rk(e):0}}}function rk(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ok(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const sk=function(e){let t=e.isCollapsed;return t&&KC&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function ak(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function lk(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ck(e,t){return"number"==typeof e?e:e[t]}function dk(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*i}}function uk(e,t,n){let i=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=QC(s)){if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?lk(o):dk(e),l=0,c=0;if(t.top<a.top+ck(i,"top")?c=-(a.top-t.top+ck(r,"top")):t.bottom>a.bottom-ck(i,"bottom")&&(c=t.bottom-a.bottom+ck(r,"bottom")),t.left<a.left+ck(i,"left")?l=-(a.left-t.left+ck(r,"left")):t.right>a.right-ck(i,"right")&&(l=t.right-a.right+ck(r,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,i=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let r=e.scrollLeft-n,o=e.scrollTop-i;t={left:t.left-r,top:t.top-o,right:t.right-r,bottom:t.bottom-o}}if(n)break}}function hk(e){let t=[],n=e.ownerDocument;for(let i=e;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),e!=n);i=QC(i));return t}function pk(e,t){for(let n=0;n<e.length;n++){let{dom:i,top:r,left:o}=e[n];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=o&&(i.scrollLeft=o)}}let fk=null;function gk(e,t){let n,i,r=2e8,o=0,s=t.top,a=t.top;for(let l=e.firstChild,c=0;l;l=l.nextSibling,c++){let e;if(1==l.nodeType)e=l.getClientRects();else{if(3!=l.nodeType)continue;e=ek(l).getClientRects()}for(let d=0;d<e.length;d++){let u=e[d];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);let e=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(e<r){n=l,r=e,i=e&&3==n.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==l.nodeType&&e&&(o=c+(t.left>=(u.left+u.right)/2?1:0));continue}}!n&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(o=c+1)}}return n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(e,r+1),i.setStart(e,r);let n=yk(i,1);if(n.top!=n.bottom&&mk(t,n))return{node:e,offset:r+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,i):!n||r&&1==n.nodeType?{node:e,offset:o}:gk(n,i)}function mk(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function _k(e,t,n){let i=e.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let i=0;i<e.length;i++){let r=e[i];if(mk(t,r))return _k(n,t,r)}}if((o=(o+1)%i)==r)break}return e}function vk(e,t){let n,i=e.dom.ownerDocument,r=0;if(i.caretPositionFromPoint)try{let e=i.caretPositionFromPoint(t.left,t.top);e&&({offsetNode:n,offset:r}=e)}catch(l){}if(!n&&i.caretRangeFromPoint){let e=i.caretRangeFromPoint(t.left,t.top);e&&({startContainer:n,startOffset:r}=e)}let o,s=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top+1);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=e.dom.getBoundingClientRect();if(!mk(t,n))return null;if(s=_k(e.dom,t,n),!s)return null}if(HC)for(let c=s;n&&c;c=QC(c))c.draggable&&(n=void 0);if(s=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(VC&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let e,i=n.childNodes[r];"IMG"==i.nodeName&&(e=i.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&r++}n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(o=function(e,t,n,i){let r=-1;for(let o=t;o!=e.dom;){let t=e.docView.nearestDesc(o,!0);if(!t)return null;if(t.node.isBlock&&t.parent){let e=t.dom.getBoundingClientRect();if(e.left>i.left||e.top>i.top)r=t.posBefore;else{if(!(e.right<i.left||e.bottom<i.top))break;r=t.posAfter}}o=t.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n,1)}(e,n,r,t))}null==o&&(o=function(e,t,n){let{node:i,offset:r}=gk(t,n),o=-1;if(1==i.nodeType&&!i.firstChild){let e=i.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(i,r,o)}(e,s,t));let a=e.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function yk(e,t){let n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}const wk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function bk(e,t,n){let{node:i,offset:r}=e.docView.domFromPos(t,n<0?-1:1),o=GC||VC;if(3==i.nodeType){if(!o||!wk.test(i.nodeValue)&&(n<0?r:r!=i.nodeValue.length)){let e=r,t=r,o=n<0?1:-1;return n<0&&!r?(t++,o=-1):n>=0&&r==i.nodeValue.length?(e--,o=1):n<0?e--:t++,xk(yk(ek(i,e,t),o),o<0)}{let e=yk(ek(i,r,r),n);if(VC&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let t=yk(ek(i,r-1,r-1),-1);if(t.top==e.top){let n=yk(ek(i,r,r+1),-1);if(n.top!=e.top)return xk(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t).parent.inlineContent){if(r&&(n<0||r==rk(i))){let e=i.childNodes[r-1];if(1==e.nodeType)return Ck(e.getBoundingClientRect(),!1)}if(r<rk(i)){let e=i.childNodes[r];if(1==e.nodeType)return Ck(e.getBoundingClientRect(),!0)}return Ck(i.getBoundingClientRect(),n>=0)}if(r&&(n<0||r==rk(i))){let e=i.childNodes[r-1],t=3==e.nodeType?ek(e,rk(e)-(o?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return xk(yk(t,1),!1)}if(r<rk(i)){let e=i.childNodes[r];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?ek(e,0,o?0:1):1==e.nodeType?e:null:null;if(t)return xk(yk(t,-1),!0)}return xk(yk(3==i.nodeType?ek(i):i,-n),n>=0)}function xk(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Ck(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function kk(e,t,n){let i=e.state,r=e.root.activeElement;i!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{i!=t&&e.updateState(i),r!=e.dom&&r&&r.focus()}}const Ek=/[\u0590-\u08ac]/;let Sk=null,Ik=null,Ok=!1;function Tk(e,t,n){return Sk==t&&Ik==n?Ok:(Sk=t,Ik=n,Ok="up"==n||"down"==n?function(e,t,n){let i=t.selection,r="up"==n?i.$from:i.$to;return kk(e,t,(()=>{let{node:t}=e.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}let i=bk(e,r.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=ek(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let r=t[e];if(r.bottom>r.top+1&&("up"==n?i.top-r.top>2*(r.bottom-i.top):r.bottom-i.bottom>2*(i.bottom-r.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,s=r==i.parent.content.size,a=e.domSelection();return Ek.test(i.parent.textContent)&&a.modify?kk(e,t,(()=>{let t=a.getRangeAt(0),r=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");let l=!(i.depth?e.docView.domAfterPos(i.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?o:s}(e,t,n))}class Mk{constructor(e,t,n,i){this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let i=this.children[t];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,i;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}{let n,i;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(i):this.posAtEnd}}let i;if(e==this.dom&&this.contentDOM)i=t>JC(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!1;break}if(t.previousSibling)break}if(null==i&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!0;break}if(t.nextSibling)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,i=e;i;i=i.parentNode){let r,o=this.getDesc(i);if(o&&(!t||o.node)){if(!n||!(r=o.nodeDOM)||(1==r.nodeType?r.contains(1==e.nodeType?e:e.parentNode):r==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let i=e;i;i=i.parentNode){let r=this.getDesc(i);if(r)return r.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let i=this.children[t],r=n+i.size;if(n==e&&r!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<r)return i.descAt(e-n-i.border);n=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};let n,i=0,r=0;for(let o=0;i<this.children.length;i++){let t=this.children[i],n=o+t.size;if(n>e||t instanceof Uk){r=e-o;break}o=n}if(r)return this.children[i].domFromPos(r-this.children[i].border,t);for(;i&&!(n=this.children[i-1]).size&&n instanceof Nk&&n.side>=0;i--);if(t<=0){let e,n=!0;for(;e=i?this.children[i-1]:null,e&&e.dom.parentNode!=this.contentDOM;i--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?JC(e.dom)+1:0}}{let e,n=!0;for(;e=i<this.children.length?this.children[i]:null,e&&e.dom.parentNode!=this.contentDOM;i++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?JC(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,r=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==i&&e<=a){let r=o+n.border;if(e>=r&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,r);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){i=JC(n.dom)+1;break}e-=n.size}-1==i&&(i=0)}if(i>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=JC(n.dom);break}t+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,i=!1){let r=Math.min(e,t),o=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let s=this.children[h],a=p+s.size;if(r>p&&o<a)return s.setSelection(e-p-s.border,t-p-s.border,n,i);p=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((VC||HC)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,i=e;i;i=i.parentNode){if(n=i.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:JC(n)+1});break}let e=i.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(VC&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(i=!0)}if(!(i||c&&HC)&&tk(s.node,s.offset,l.anchorNode,l.anchorOffset)&&tk(a.node,a.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||e==t)&&!c){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(u){if(!(u instanceof DOMException))throw u}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,i=0;i<this.children.length;i++){let r=this.children[i],o=n+r.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let i=n+r.border,s=o-r.border;if(e>=i&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=i||t!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-i,t-i):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Nk extends Mk{constructor(e,t,n,i){let r,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>r?r.parent?r.parent.posBeforeChild(r):void 0:i))),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Ak extends Mk{constructor(e,t,n,i){super(e,[],t,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Rk extends Mk{constructor(e,t,n,i){super(e,[],n,i),this.mark=t}static create(e,t,n,i){let r=i.nodeViews[t.type.name],o=r&&r(t,i,n);return o&&o.dom||(o=MC.renderSpec(document,t.type.spec.toDOM(t,n))),new Rk(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let i=Rk.create(this.parent,this.mark,!0,n),r=this.children,o=this.size;t<o&&(r=Xk(r,t,o,n)),e>0&&(r=Xk(r,0,e,n));for(let s=0;s<r.length;s++)r[s].parent=i;return i.children=r,i}}class Dk extends Mk{constructor(e,t,n,i,r,o,s,a,l){super(e,[],r,o),this.node=t,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=s,o&&this.updateChildren(a,l)}static create(e,t,n,i,r,o){let s,a=r.nodeViews[t.type.name],l=a&&a(t,r,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o),n,i),c=l&&l.dom,d=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:d}=MC.renderSpec(document,t.type.spec.toDOM(t)));d||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let u=c;return c=Hk(c,n,t),l?s=new Fk(e,t,n,i,c,d||null,u,l,r,o+1):t.isText?new Lk(e,t,n,i,c,u,r):new Dk(e,t,n,i,c,d||null,u,r,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>hC.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&$k(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,i=t,r=e.composing?this.localCompositionInfo(e,t):null,o=r&&r.pos>-1?r:null,s=r&&r.pos<0,a=new Yk(this,o&&o.node);!function(e,t,n,i){let r=t.locals(e),o=0;if(0==r.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);i(s,r,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<r.length&&r[s].to==o){let e,t=r[s++];for(;s<r.length&&r[s].to==o;)(e||(e=[t])).push(r[s++]);if(e){e.sort(Gk);for(let t=0;t<e.length;t++)n(e[t],c,!!l)}else n(t,c,!!l)}let d,u;if(l)u=-1,d=l,l=null;else{if(!(c<e.childCount))break;u=c,d=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<r.length&&r[s].from<=o&&r[s].to>o;)a.push(r[s++]);let h=o+d.nodeSize;if(d.isText){let e=h;s<r.length&&r[s].from<e&&(e=r[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<h&&(l=d.cut(e-o),d=d.cut(0,e-o),h=e,u=-1)}i(d,d.isInline&&!d.isLeaf?a.filter((e=>!e.inline)):a.slice(),t.forChild(o,d),u),o=h}}(this.node,this.innerDeco,((t,r,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(r==this.node.childCount?mC.none:this.node.child(r).marks,n,e),a.placeWidget(t,e,i)}),((t,o,l,c)=>{let d;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(d=a.findIndexWithChild(r.node))>-1&&a.updateNodeAt(t,o,l,d,e)||a.updateNextNode(t,o,l,e,c)||a.addNode(t,o,l,e,i),i+=t.nodeSize})),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),Bk(this.contentDOM,this.children,e),$C&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof mx)||n<t||i>t+this.node.content.size)return null;let r=e.domSelection(),o=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=rk(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(r.focusNode,r.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let e=o.nodeValue,r=function(e,t,n,i){for(let r=0,o=0;r<e.childCount&&o<=i;){let s=e.child(r++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;r<e.childCount;){let t=e.child(r++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){let e=a<i?l.lastIndexOf(t,i-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}(this.node.content,e,n-t,i-t);return r<0?null:{node:o,pos:r,text:e}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:i}){if(this.getDesc(t))return;let r=t;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let o=new Ak(this,r,t,i);e.input.compositionNodes.push(o),this.children=Xk(this.children,n,n+i.length,e,o)}update(e,t,n,i){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,i),!0)}updateInner(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(e){if($k(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Kk(this.dom,this.nodeDOM,zk(this.outerDeco,this.node,t),zk(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Pk(e,t,n,i,r){return Hk(i,t,e),new Dk(void 0,e,t,n,i,i,i,r,0)}class Lk extends Dk{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let i=this.node.cut(e,t),r=document.createTextNode(i.text);return new Lk(this.parent,i,this.outerDeco,this.innerDeco,r,r,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class Uk extends Mk{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Fk extends Dk{constructor(e,t,n,i,r,o,s,a,l,c){super(e,t,n,i,r,o,s,l,c),this.spec=a}update(e,t,n,i){if(3==this.dirty)return!1;if(this.spec.update){let r=this.spec.update(e,t,n);return r&&this.updateInner(e,t,n,i),r}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,i){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Bk(e,t,n){let i=e.firstChild,r=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=i;)i=qk(i),r=!0;i=i.nextSibling}else r=!0,e.insertBefore(a,i);if(s instanceof Rk){let t=i?i.previousSibling:e.lastChild;Bk(s.contentDOM,s.children,n),i=t?t.nextSibling:e.firstChild}}for(;i;)i=qk(i),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}const jk=function(e){e&&(this.nodeName=e)};jk.prototype=Object.create(null);const Vk=[new jk];function zk(e,t,n){if(0==e.length)return Vk;let i=n?Vk[0]:new jk,r=[i];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&r.push(i=new jk(s.nodeName));for(let e in s){let o=s[e];null!=o&&(n&&1==r.length&&r.push(i=new jk(t.isInline?"span":"div")),"class"==e?i.class=(i.class?i.class+" ":"")+o:"style"==e?i.style=(i.style?i.style+";":"")+o:"nodeName"!=e&&(i[e]=o))}}}return r}function Kk(e,t,n,i){if(n==Vk&&i==Vk)return t;let r=t;for(let o=0;o<i.length;o++){let t=i[o],s=n[o];if(o){let n;s&&s.nodeName==t.nodeName&&r!=e&&(n=r.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(r),s=Vk[0]),r=n}Wk(r,s||Vk[0],t)}return r}function Wk(e,t,n){for(let i in t)"class"==i||"style"==i||"nodeName"==i||i in n||e.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.remove(i[t]);for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.add(r[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=i.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Hk(e,t,n){return Kk(e,e,Vk,zk(t,n,1!=e.nodeType))}function $k(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function qk(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Yk{constructor(e,t){this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,i=n.children.length,r=e.childCount,o=new Map,s=[];e:for(;r>0;){let a;for(;;)if(i){let e=n.children[i-1];if(!(e instanceof Rk)){a=e,i--;break}n=e,i=e.children.length}else{if(n==t)break e;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(r-1))break;--r,o.set(a,r),s.push(a)}}return{index:r,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let i=0,r=this.stack.length>>1,o=Math.min(r,e.length);for(;i<o&&(i==r-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&!1!==e[i].type.spec.spanning;)i++;for(;i<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++)if(this.top.children[t].matchesMark(e[r])){i=t;break}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let i=Rk.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,i),this.top=i,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,i){let r,o=-1;if(i>=this.preMatch.index&&(r=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&r.matchesNode(e,t,n))o=this.top.children.indexOf(r,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let i=this.top.children[s];if(i.matchesNode(e,t,n)&&!this.preMatch.matched.has(i)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,i,r){let o=this.top.children[i];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,r)&&(this.destroyBetween(this.index,i),this.index=i+1,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,i,r){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof Dk){let a=this.preMatch.matched.get(s);if(null!=a&&a!=r)return!1;let l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&$k(t,s.outerDeco)))&&s.update(e,t,n,i))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,n,i,r){this.top.children.splice(this.index++,0,Dk.create(this.top,e,t,n,i,r)),this.changed=!0}placeWidget(e,t,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(e)||e!=i.widget&&i.widget.type.toDOM.parentNode){let i=new Nk(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Rk;)t=e,e=t.children[t.children.length-1];e&&e instanceof Lk&&!/\n$/.test(e.node.text)||((HC||KC)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let i=new Uk(this.top,[],n,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}}function Gk(e,t){return e.type.side-t.type.side}function Xk(e,t,n,i,r){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,d=a+=l.size;c>=n||d<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,i)),r&&(o.push(r),r=void 0),d>n&&o.push(l.slice(n-c,l.size,i)))}return o}function Jk(e,t=null){let n=e.domSelection(),i=e.state.doc;if(!n.focusNode)return null;let r=e.docView.nearestDesc(n.focusNode),o=r&&0==r.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=i.resolve(s);if(sk(n)){for(a=c;r&&!r.node;)r=r.parent;let e=r.node;if(r&&e.isAtom&&vx.isSelectable(e)&&r.parent&&(!e.isInline||!function(e,t,n){for(let i=0==t,r=t==rk(e);i||r;){if(e==n)return!0;let t=JC(e);if(!(e=e.parentNode))return!1;i=i&&0==t,r=r&&t==rk(e)}}(n.focusNode,n.focusOffset,r.dom))){let e=r.posBefore;l=new vx(s==e?c:i.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;a=i.resolve(t)}if(!l){l=sE(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)}return l}function Qk(e){return e.editable?e.hasFocus():lE(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Zk(e,t=!1){let n=e.state.selection;if(rE(e,n),Qk(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&KC){let t=e.domSelection(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&tk(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),i=e.cursorWrapper.dom,r="IMG"==i.nodeName;r?n.setEnd(i.parentNode,JC(i)+1):n.setEnd(i,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&BC&&jC<=11&&(i.disabled=!0,i.disabled=!1)}(e);else{let i,r,{anchor:o,head:s}=n;!eE||n instanceof mx||(n.$from.parent.inlineContent||(i=tE(e,n.from)),n.empty||n.$from.parent.inlineContent||(r=tE(e,n.to))),e.docView.setSelection(o,s,e.root,t),eE&&(i&&iE(i),r&&iE(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelection(),i=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==i&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{Qk(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const eE=HC||KC&&WC<63;function tE(e,t){let{node:n,offset:i}=e.docView.domFromPos(t,0),r=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(HC&&r&&"false"==r.contentEditable)return nE(r);if(!(r&&"false"!=r.contentEditable||o&&"false"!=o.contentEditable)){if(r)return nE(r);if(o)return nE(o)}}function nE(e){return e.contentEditable="true",HC&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function iE(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function rE(e,t){if(t instanceof vx){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(oE(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else oE(e)}function oE(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function sE(e,t,n,i){return e.someProp("createSelectionBetween",(i=>i(e,t,n)))||mx.between(t,n,i)}function aE(e){return(!e.editable||e.root.activeElement==e.dom)&&lE(e)}function lE(e){let t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function cE(e,t){let{$anchor:n,$head:i}=e.selection,r=t>0?n.max(i):n.min(i),o=r.parent.inlineContent?r.depth?e.doc.resolve(t>0?r.after():r.before()):null:r;return o&&px.findFrom(o,t)}function dE(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function uE(e,t,n){let i=e.state.selection;if(!(i instanceof mx)){if(i instanceof vx&&i.node.isInline)return dE(e,new mx(t>0?i.$to:i.$from));{let n=cE(e.state,t);return!!n&&dE(e,n)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let n=cE(e.state,t);return!!(n&&n instanceof vx)&&dE(e,n)}if(!(qC&&n.indexOf("m")>-1)){let n,r=i.$head,o=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText)return!1;let s=t<0?r.pos-o.nodeSize:r.pos;return!!(o.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(vx.isSelectable(o)?dE(e,new vx(t<0?e.state.doc.resolve(r.pos-o.nodeSize):r)):!!GC&&dE(e,new mx(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}function hE(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function pE(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function fE(e){let t=e.domSelection(),n=t.focusNode,i=t.focusOffset;if(!n)return;let r,o,s=!1;for(VC&&1==n.nodeType&&i<hE(n)&&pE(n.childNodes[i])&&(s=!0);;)if(i>0){if(1!=n.nodeType)break;{let e=n.childNodes[i-1];if(pE(e))r=n,o=--i;else{if(3!=e.nodeType)break;n=e,i=n.nodeValue.length}}}else{if(mE(n))break;{let t=n.previousSibling;for(;t&&pE(t);)r=n.parentNode,o=JC(t),t=t.previousSibling;if(t)n=t,i=hE(n);else{if(n=n.parentNode,n==e.dom)break;i=0}}}s?_E(e,t,n,i):r&&_E(e,t,r,o)}function gE(e){let t=e.domSelection(),n=t.focusNode,i=t.focusOffset;if(!n)return;let r,o,s=hE(n);for(;;)if(i<s){if(1!=n.nodeType)break;if(!pE(n.childNodes[i]))break;r=n,o=++i}else{if(mE(n))break;{let t=n.nextSibling;for(;t&&pE(t);)r=t.parentNode,o=JC(t)+1,t=t.nextSibling;if(t)n=t,i=0,s=hE(n);else{if(n=n.parentNode,n==e.dom)break;i=s=0}}}r&&_E(e,t,r,o)}function mE(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function _E(e,t,n,i){if(sk(t)){let e=document.createRange();e.setEnd(n,i),e.setStart(n,i),t.removeAllRanges(),t.addRange(e)}else t.extend&&t.extend(n,i);e.domObserver.setCurSelection();let{state:r}=e;setTimeout((()=>{e.state==r&&Zk(e)}),50)}function vE(e,t,n){let i=e.state.selection;if(i instanceof mx&&!i.empty||n.indexOf("s")>-1)return!1;if(qC&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=cE(e.state,t);if(n&&n instanceof vx)return dE(e,n)}if(!r.parent.inlineContent){let n=t<0?r:o,s=i instanceof wx?px.near(n,t):px.findFrom(n,t);return!!s&&dE(e,s)}return!1}function yE(e,t){if(!(e.state.selection instanceof mx))return!0;let{$head:n,$anchor:i,empty:r}=e.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=e.state.tr;return t<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),e.dispatch(i),!0}return!1}function wE(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function bE(e,t){let n=t.keyCode,i=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||qC&&72==n&&"c"==i?yE(e,-1)||fE(e):46==n||qC&&68==n&&"c"==i?yE(e,1)||gE(e):13==n||27==n||(37==n||qC&&66==n&&"c"==i?uE(e,-1,i)||fE(e):39==n||qC&&70==n&&"c"==i?uE(e,1,i)||gE(e):38==n||qC&&80==n&&"c"==i?vE(e,-1,i)||fE(e):40==n||qC&&78==n&&"c"==i?function(e){if(!HC||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelection();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;wE(e,n,"true"),setTimeout((()=>wE(e,n,"false")),20)}return!1}(e)||vE(e,1,i)||gE(e):i==(qC?"m":"c")&&(66==n||73==n||89==n||90==n))}function xE(e,t){let n=[],{content:i,openStart:r,openEnd:o}=t;for(;r>1&&o>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,o--;let e=i.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),i=e.content}let s=e.someProp("clipboardSerializer")||MC.fromSchema(e.state.schema),a=AE(),l=a.createElement("div");l.appendChild(s.serializeFragment(i,{document:a}));let c,d=l.firstChild,u=0;for(;d&&1==d.nodeType&&(c=ME[d.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),u++}d=l.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${r} ${o}${u?` -${u}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",(e=>e(t)))||t.content.textBetween(0,t.content.size,"\n\n")}}function CE(e,t,n,i,r){let o,s,a=r.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(i||a||!n);if(l){if(e.someProp("transformPastedText",(e=>{t=e(t,a||i)})),a)return t?new _C(hC.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):_C.empty;let n=e.someProp("clipboardTextParser",(e=>e(t,r,i)));if(n)s=n;else{let n=r.marks(),{schema:i}=e.state,s=MC.fromSchema(i);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(i.text(e,n)))}))}}else e.someProp("transformPastedHTML",(e=>{n=e(n)})),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,i=AE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);(n=r&&ME[r[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(i.innerHTML=e,n)for(let o=0;o<n.length;o++)i=i.querySelector(n[o])||i;return i}(n),GC&&function(e){let t=e.querySelectorAll(KC?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let i=t[n];1==i.childNodes.length&&" "==i.textContent&&i.parentNode&&i.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),i)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0&&o.firstChild;u--)o=o.firstChild;if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||wC.fromSchema(e.state.schema);s=t.parseSlice(o,{preserveWhitespace:!(!l&&!d),context:r,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||kE.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(d)s=function(e,t){if(!e.size)return e;let n,i=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(f8){return e}let{content:r,openStart:o,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=i.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;r=hC.from(e.create(n[a+1],r)),o++,s++}return new _C(r,o,s)}(TE(s,+d[1],+d[2]),d[4]);else if(s=_C.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i,r=t.node(n).contentMatchAt(t.index(n)),o=[];if(e.forEach((e=>{if(!o)return;let t,n=r.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&i.length&&SE(n,i,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=IE(o[o.length-1],i.length));let t=EE(e,n);o.push(t),r=r.matchType(t.type),i=n}})),o)return hC.from(o)}return e}(s.content,r),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=TE(s,e,t)}return e.someProp("transformPasted",(e=>{s=e(s)})),s}const kE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function EE(e,t,n=0){for(let i=t.length-1;i>=n;i--)e=t[i].create(null,hC.from(e));return e}function SE(e,t,n,i,r){if(r<e.length&&r<t.length&&e[r]==t[r]){let o=SE(e,t,n,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==e.length-1?n.type:e[r+1]))return i.copy(i.content.append(hC.from(EE(n,e,r+1))))}}function IE(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,IE(e.lastChild,t-1)),i=e.contentMatchAt(e.childCount).fillBefore(hC.empty,!0);return e.copy(n.append(i))}function OE(e,t,n,i,r,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return r<i-1&&(a=OE(a,t,n,i,r+1,o)),r>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||o<=r).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(hC.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function TE(e,t,n){return t<e.openStart&&(e=new _C(OE(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new _C(OE(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const ME={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let NE=null;function AE(){return NE||(NE=document.implementation.createHTMLDocument("title"))}const RE={};let DE={};class PE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LE(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function UE(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>FE(e,t))}))}function FE(e,t){return e.someProp("handleDOMEvents",(n=>{let i=n[t.type];return!!i&&(i(e,t)||t.defaultPrevented)}))}function BE(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function jE(e){return{left:e.clientX,top:e.clientY}}function VE(e,t,n,i,r){if(-1==i)return!1;let o=e.state.doc.resolve(i);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,(t=>s>o.depth?t(e,n,o.nodeAfter,o.before(s),r,!0):t(e,n,o.node(s),o.before(s),r,!1))))return!0;return!1}function zE(e,t,n){e.focused||e.focus();let i=e.state.tr.setSelection(t);"pointer"==n&&i.setMeta("pointer",!0),e.dispatch(i)}function KE(e,t,n,i,r){return VE(e,"handleClickOn",t,n,i)||e.someProp("handleClick",(n=>n(e,t,i)))||(r?function(e,t){if(-1==t)return!1;let n,i,r=e.state.selection;r instanceof vx&&(n=r.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s);if(vx.isSelectable(e)){i=n&&r.$from.depth>0&&s>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(s);break}}return null!=i&&(zE(e,vx.create(e.state.doc,i),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&vx.isSelectable(i))&&(zE(e,new vx(n),"pointer"),!0)}(e,n))}function WE(e,t,n,i){return VE(e,"handleDoubleClickOn",t,n,i)||e.someProp("handleDoubleClick",(n=>n(e,t,i)))}function HE(e,t,n,i){return VE(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",(n=>n(e,t,i)))||function(e,t,n){if(0!=n.button)return!1;let i=e.state.doc;if(-1==t)return!!i.inlineContent&&(zE(e,mx.create(i,0,i.content.size),"pointer"),!0);let r=i.resolve(t);for(let o=r.depth+1;o>0;o--){let t=o>r.depth?r.nodeAfter:r.node(o),n=r.before(o);if(t.inlineContent)zE(e,mx.create(i,n+1,n+1+t.content.size),"pointer");else{if(!vx.isSelectable(t))continue;zE(e,vx.create(i,n),"pointer")}return!0}}(e,n,i)}function $E(e){return ZE(e)}DE.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!GE(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!YC||!KC||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!$C||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||bE(e,n)?n.preventDefault():LE(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,ak(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},DE.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},DE.keypress=(e,t)=>{let n=t;if(GE(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||qC&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let i=e.state.selection;if(!(i instanceof mx&&i.$from.sameParent(i.$to))){let t=String.fromCharCode(n.charCode);e.someProp("handleTextInput",(n=>n(e,i.$from.pos,i.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const qE=qC?"metaKey":"ctrlKey";RE.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let i=$E(e),r=Date.now(),o="singleClick";r-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,i=t.y-e.clientY;return n*n+i*i<100}(n,e.input.lastClick)&&!n[qE]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o};let s=e.posAtCoords(jE(n));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new YE(e,s,n,!!i)):("doubleClick"==o?WE:HE)(e,s.pos,s.inside,n)?n.preventDefault():LE(e,"pointer"))};class YE{constructor(e,t,n,i){let r,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[qE],this.allowDefault=n.shiftKey,t.inside>-1)r=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);r=n.parent,o=n.depth?n.before():0}const s=i?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=e.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||l instanceof vx&&l.from<=o&&l.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!VC||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),LE(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Zk(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(jE(e))),this.allowDefault||!t?LE(this.view,"pointer"):KE(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||HC&&this.mightDrag&&!this.mightDrag.node.isAtom||KC&&!(this.view.state.selection instanceof mx)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(zE(this.view,px.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):LE(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),LE(this.view,"pointer"),0==e.buttons&&this.done()}}function GE(e,t){return!!e.composing||!!(HC&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}RE.touchdown=e=>{$E(e),LE(e,"pointer")},RE.contextmenu=e=>$E(e);const XE=YC?5e3:-1;function JE(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>ZE(e)),t))}function QE(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ZE(e,t=!1){if(!(YC&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),QE(e),t||e.docView&&e.docView.dirty){let t=Jk(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}DE.compositionstart=DE.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),ZE(e,!0),e.markCursor=null;else if(ZE(e),VC&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelection();for(let e=t.focusNode,n=t.focusOffset;e&&1==e.nodeType&&0!=n;){let i=n<0?e.lastChild:e.childNodes[n-1];if(!i)break;if(3==i.nodeType){t.collapse(i,i.nodeValue.length);break}e=i,n=-1}}e.input.composing=!0}JE(e,XE)},DE.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,JE(e,20))};const eS=BC&&jC<15||$C&&XC<604;function tS(e,t,n,i){let r=CE(e,t,n,e.input.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,i,r||_C.empty))))return!0;if(!r)return!1;let o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(r),s=o?e.state.tr.replaceSelectionWith(o,e.input.shiftKey):e.state.tr.replaceSelection(r);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}RE.copy=DE.cut=(e,t)=>{let n=t,i=e.state.selection,r="cut"==n.type;if(i.empty)return;let o=eS?null:n.clipboardData,s=i.content(),{dom:a,text:l}=xE(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},DE.paste=(e,t)=>{let n=t;if(e.composing&&!YC)return;let i=eS?null:n.clipboardData;i&&tS(e,i.getData("text/plain"),i.getData("text/html"),n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,i=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.parentNode&&i.parentNode.removeChild(i),n?tS(e,i.value,null,t):tS(e,i.textContent,i.innerHTML,t)}),50)}(e,n)};class nS{constructor(e,t){this.slice=e,this.move=t}}const iS=qC?"altKey":"ctrlKey";RE.dragstart=(e,t)=>{let n=t,i=e.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=e.state.selection,o=r.empty?null:e.posAtCoords(jE(n));if(o&&o.pos>=r.from&&o.pos<=(r instanceof vx?r.to-1:r.to));else if(i&&i.mightDrag)e.dispatch(e.state.tr.setSelection(vx.create(e.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(vx.create(e.state.doc,t.posBefore)))}let s=e.state.selection.content(),{dom:a,text:l}=xE(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(eS?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",eS||n.dataTransfer.setData("text/plain",l),e.dragging=new nS(s,!n[iS])},RE.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},DE.dragover=DE.dragenter=(e,t)=>t.preventDefault(),DE.drop=(e,t)=>{let n=t,i=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let r=e.posAtCoords(jE(n));if(!r)return;let o=e.state.doc.resolve(r.pos);if(!o)return;let s=i&&i.slice;s?e.someProp("transformPasted",(e=>{s=e(s)})):s=CE(e,n.dataTransfer.getData(eS?"Text":"text/plain"),eS?null:n.dataTransfer.getData("text/html"),!1,o);let a=!(!i||n[iS]);if(e.someProp("handleDrop",(t=>t(e,n,s||_C.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?function(e,t,n){var i=e.resolve(t);if(!n.content.size)return t;for(var r=n.content,o=0;o<n.openStart;o++)r=r.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=i.depth;a>=0;a--){var l=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,c=i.index(a)+(l>0?1:0),d=i.node(a),u=!1;if(1==s)u=d.canReplace(c,c,r);else{var h=d.contentMatchAt(c).findWrapping(r.firstChild.type);u=h&&d.canReplaceWith(c,c,h[0])}if(u)return 0==l?i.pos:l<0?i.before(a+1):i.after(a+1)}return null}(e.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=e.state.tr;a&&c.deleteSelection();let d=c.mapping.map(l),u=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(u?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(h))return;let p=c.doc.resolve(d);if(u&&vx.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new vx(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,i,r)=>t=r)),c.setSelection(sE(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},RE.focus=e=>{e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&Zk(e)}),20))},RE.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},RE.beforeinput=(e,t)=>{if(KC&&YC&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,ak(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in DE)RE[os]=DE[os];function rS(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class oS{constructor(e,t){this.toDOM=e,this.spec=t||dS,this.side=this.spec.side||0}map(e,t,n,i){let{pos:r,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new lS(r-n,r-n,this)}valid(){return!0}eq(e){return this==e||e instanceof oS&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rS(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class sS{constructor(e,t){this.attrs=e,this.spec=t||dS}map(e,t,n,i){let r=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return r>=o?null:new lS(r,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof sS&&rS(this.attrs,e.attrs)&&rS(this.spec,e.spec)}static is(e){return e.type instanceof sS}destroy(){}}class aS{constructor(e,t){this.attrs=e,this.spec=t||dS}map(e,t,n,i){let r=e.mapResult(t.from+i,1);if(r.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=r.pos?null:new lS(r.pos-n,o.pos-n,this)}valid(e,t){let n,{index:i,offset:r}=e.content.findIndex(t.from);return r==t.from&&!(n=e.child(i)).isText&&r+n.nodeSize==t.to}eq(e){return this==e||e instanceof aS&&rS(this.attrs,e.attrs)&&rS(this.spec,e.spec)}destroy(){}}class lS{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new lS(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new lS(e,e,new oS(t,n))}static inline(e,t,n,i){return new lS(e,t,new sS(n,i))}static node(e,t,n,i){return new lS(e,t,new aS(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof sS}}const cS=[],dS={};class uS{constructor(e,t){this.local=e.length?e:cS,this.children=t.length?t:cS}static create(e,t){return t.length?_S(t,e,0,dS):hS}find(e,t,n){let i=[];return this.findInner(null==e?0:e,null==t?1e9:t,i,0,n),i}findInner(e,t,n,i,r){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,i+s,r)}}map(e,t,n){return this==hS||0==e.maps.length?this:this.mapInner(e,t,0,0,n||dS)}mapInner(e,t,n,i,r){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,i);a&&a.type.valid(t,a)?(o||(o=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,i,r,o,s){let a=e.slice(),l=(e,t,n,i)=>{for(let s=0;s<a.length;s+=3){let l,c=a[s+1];if(c<0||e>c+o)continue;let d=a[s]+o;t>=d?a[s+1]=e<=d?-2:-1:n>=r&&(l=i-n-(t-e))&&(a[s]+=l,a[s+1]+=l)}};for(let d=0;d<n.maps.length;d++)n.maps[d].forEach(l);let c=!1;for(let d=0;d<a.length;d+=3)if(a[d+1]<0){if(-2==a[d+1]){c=!0,a[d+1]=-1;continue}let t=n.map(e[d]+o),l=t-r;if(l<0||l>=i.content.size){c=!0;continue}let u=n.map(e[d+1]+o,-1)-r,{index:h,offset:p}=i.content.findIndex(l),f=i.maybeChild(h);if(f&&p==l&&p+f.nodeSize==u){let i=a[d+2].mapInner(n,f,t+1,e[d]+o+1,s);i!=hS?(a[d]=l,a[d+1]=u,a[d+2]=i):(a[d+1]=-2,c=!0)}else c=!0}if(c){let l=_S(function(e,t,n,i,r,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(i,r,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return n}(a,e,t,n,r,o,s),i,0,s);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new uS(t.sort(vS),a)}(this.children,o||[],e,t,n,i,r):o?new uS(o.sort(vS),cS):hS}add(e,t){return t.length?this==hS?uS.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let i,r=0;e.forEach(((e,o)=>{let s,a=o+n;if(s=gS(t,e,a)){for(i||(i=this.children.slice());r<i.length&&i[r]<o;)r+=3;i[r]==o?i[r+2]=i[r+2].addInner(e,s,a+1):i.splice(r,0,o,o+e.nodeSize,_S(s,e,a+1,dS)),r+=3}}));let o=fS(r?mS(t):t,-n);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new uS(o.length?this.local.concat(o).sort(vS):this.local,i||this.children)}remove(e){return 0==e.length||this==hS?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,i=this.local;for(let r=0;r<n.length;r+=3){let i,o=n[r]+t,s=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<s&&(e[n]=null,(i||(i=[])).push(t));if(!i)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(i,o+1);a!=hS?n[r+2]=a:(n.splice(r,3),r-=3)}if(i.length)for(let r,o=0;o<e.length;o++)if(r=e[o])for(let e=0;e<i.length;e++)i[e].eq(r,t)&&(i==this.local&&(i=this.local.slice()),i.splice(e--,1));return n==this.children&&i==this.local?this:i.length||n.length?new uS(i,n):hS}forChild(e,t){if(this==hS)return this;if(t.isLeaf)return uS.empty;let n,i;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let r=e+1,o=r+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<o&&e.to>r&&e.type instanceof sS){let t=Math.max(r,e.from)-r,n=Math.min(o,e.to)-r;t<n&&(i||(i=[])).push(e.copy(t,n))}}if(i){let e=new uS(i.sort(vS),cS);return n?new pS([e,n]):e}return n||hS}eq(e){if(this==e)return!0;if(!(e instanceof uS)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return yS(this.localsInner(e))}localsInner(e){if(this==hS)return cS;if(e.inlineContent||!this.local.some(sS.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof sS||t.push(this.local[n]);return t}}uS.empty=new uS([],[]),uS.removeOverlap=yS;const hS=uS.empty;class pS{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,dS)));return pS.from(n)}forChild(e,t){if(t.isLeaf)return uS.empty;let n=[];for(let i=0;i<this.members.length;i++){let r=this.members[i].forChild(e,t);r!=hS&&(r instanceof pS?n=n.concat(r.members):n.push(r))}return pS.from(n)}eq(e){if(!(e instanceof pS)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let i=0;i<this.members.length;i++){let r=this.members[i].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<r.length;e++)t.push(r[e])}else t=r}return t?yS(n?t:t.sort(vS)):cS}static from(e){switch(e.length){case 0:return hS;case 1:return e[0];default:return new pS(e)}}}function fS(e,t){if(!t||!e.length)return e;let n=[];for(let i=0;i<e.length;i++){let r=e[i];n.push(new lS(r.from+t,r.to+t,r.type))}return n}function gS(e,t,n){if(t.isLeaf)return null;let i=n+t.nodeSize,r=null;for(let o,s=0;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<i&&((r||(r=[])).push(o),e[s]=null);return r}function mS(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function _S(e,t,n,i){let r=[],o=!1;t.forEach(((t,s)=>{let a=gS(e,t,s+n);if(a){o=!0;let e=_S(a,t,n+s+1,i);e!=hS&&r.push(s,s+t.nodeSize,e)}}));let s=fS(o?mS(e):e,-n).sort(vS);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(i.onRemove&&i.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new uS(s,r):hS}function vS(e,t){return e.from-t.from||e.to-t.to}function yS(e){let t=e;for(let n=0;n<t.length-1;n++){let i=t[n];if(i.from!=i.to)for(let r=n+1;r<t.length;r++){let o=t[r];if(o.from!=i.from){o.from<i.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,o.from),wS(t,r,i.copy(o.from,i.to)));break}o.to!=i.to&&(t==e&&(t=e.slice()),t[r]=o.copy(o.from,i.to),wS(t,r+1,o.copy(i.to,o.to)))}}return t}function wS(e,t,n){for(;t<e.length&&vS(n,e[t])>0;)t++;e.splice(t,0,n)}function bS(e){let t=[];return e.someProp("decorations",(n=>{let i=n(e.state);i&&i!=hS&&t.push(i)})),e.cursorWrapper&&t.push(uS.create(e.state.doc,[e.cursorWrapper.deco])),pS.from(t)}const xS={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CS=BC&&jC<=11;class kS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ES{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new kS,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);BC&&jC<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),CS&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&this.observer.observe(this.view.dom,xS),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(aE(this.view)){if(this.suppressingSelectionUpdates)return Zk(this.view);if(BC&&jC<=11&&!this.view.state.selection.empty){let e=this.view.domSelection();if(e.focusNode&&tk(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){if(0==e.rangeCount)return!0;let t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let t=this.view.domSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&aE(this.view)&&!this.ignoreSelectionChange(t),i=-1,r=-1,o=!1,s=[];if(this.view.editable)for(let a=0;a<e.length;a++){let t=this.registerMutation(e[a],s);t&&(i=i<0?t.from:Math.min(t.from,i),r=r<0?t.to:Math.max(t.to,r),t.typeOver&&(o=!0))}if(VC&&s.length>1){let e=s.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}(i>-1||n)&&(i>-1&&(this.view.docView.markDirty(i,r),function(e){if(SS)return;SS=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(i,r,o,s),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Zk(this.view),this.currentSelection.set(t))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,r=e.nextSibling;if(BC&&jC<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(i=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(r=o)}let o=i&&i.parentNode==e.target?JC(i)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=r&&r.parentNode==e.target?JC(r):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let SS=!1;function IS(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(HC&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||HC&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}function OS(e,t,n,i,r){if(t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Jk(e,t);if(n&&!e.state.selection.eq(n)){let i=e.state.tr.setSelection(n);"pointer"==t?i.setMeta("pointer",!0):"key"==t&&i.scrollIntoView(),e.dispatch(i)}return}let o=e.state.doc.resolve(t),s=o.sharedDepth(n);t=o.before(s+1),n=e.state.doc.resolve(n).after(s+1);let a=e.state.selection,l=function(e,t,n){let i,{node:r,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelection(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(i=[{node:d,offset:c.anchorOffset}],sk(c)||i.push({node:c.focusNode,offset:c.focusOffset})),KC&&8===e.input.lastKeyCode)for(let m=s;m>o;m--){let e=r.childNodes[m-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=m;break}if(!t||t.size)break}let u=e.state.doc,h=e.someProp("domParser")||wC.fromSchema(e.state.schema),p=u.resolve(a),f=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:i,ruleFromNode:IS,context:p});if(i&&null!=i[0].pos){let e=i[0].pos,t=i[1]&&i[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:g,sel:f,from:a,to:l}}(e,t,n);if(KC&&e.cursorWrapper&&l.sel&&l.sel.anchor==e.cursorWrapper.deco.from){let t=e.cursorWrapper.deco.type.toDOM.nextSibling,n=t&&t.nodeValue?t.nodeValue.length:1;l.sel={anchor:l.sel.anchor+n,head:l.sel.anchor+n}}let c,d,u=e.state.doc,h=u.slice(l.from,l.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(c=e.state.selection.to,d="end"):(c=e.state.selection.from,d="start"),e.input.lastKeyCode=null;let p=function(e,t,n,i,r){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==r){i-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.size<t.size){o-=i<=o&&i>=s?o-i:0,a=o+(a-s),s=o}else if(a<o){o-=i<=o&&i>=a?o-i:0,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(h.content,l.doc.content,l.from,c,d);if(($C&&e.input.lastIOSEnter>Date.now()-225||YC)&&r.some((e=>"DIV"==e.nodeName||"P"==e.nodeName))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",(t=>t(e,ak(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!p){if(!(i&&a instanceof mx&&!a.empty&&a.$head.sameParent(a.$anchor))||e.composing||l.sel&&l.sel.anchor!=l.sel.head){if(l.sel){let t=TS(e,e.state.doc,l.sel);t&&!t.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(t))}return}p={start:a.from,endA:a.to,endB:a.to}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof mx&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=l.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=l.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),BC&&jC<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>l.from&&"  "==l.doc.textBetween(p.start-l.from-1,p.start-l.from+1)&&(p.start--,p.endA--,p.endB--);let f,g=l.doc.resolveNoCache(p.start-l.from),m=l.doc.resolveNoCache(p.endB-l.from),_=u.resolve(p.start),v=g.sameParent(m)&&g.parent.inlineContent&&_.end()>=p.endA;if(($C&&e.input.lastIOSEnter>Date.now()-225&&(!v||r.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!v&&g.pos<l.doc.content.size&&(f=px.findFrom(l.doc.resolve(g.pos+1),1,!0))&&f.head==m.pos)&&e.someProp("handleKeyDown",(t=>t(e,ak(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>p.start&&function(e,t,n,i,r){if(!i.parent.isTextblock||n-t<=r.pos-i.pos||MS(i,!0,!1)<r.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(MS(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||MS(s,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(s.parent.content)}(u,p.start,p.endA,g,m)&&e.someProp("handleKeyDown",(t=>t(e,ak(8,"Backspace")))))return void(YC&&KC&&e.domObserver.suppressSelectionUpdates());KC&&YC&&p.endB==p.start&&(e.input.lastAndroidDelete=Date.now()),YC&&!v&&g.start()!=m.start()&&0==m.parentOffset&&g.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==p.endA&&(p.endB-=2,m=l.doc.resolveNoCache(p.endB-l.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,ak(13,"Enter"))}))}),20));let y,w,b,x=p.start,C=p.endA;if(v)if(g.pos==m.pos)BC&&jC<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>Zk(e)),20)),y=e.state.tr.delete(x,C),w=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(b=function(e,t){let n,i,r,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s;for(let d=0;d<s.length;d++)a=s[d].removeFromSet(a);for(let d=0;d<o.length;d++)l=o[d].removeFromSet(l);if(1==a.length&&0==l.length)i=a[0],n="add",r=e=>e.mark(i.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;i=l[0],n="remove",r=e=>e.mark(i.removeFromSet(e.marks))}let c=[];for(let d=0;d<t.childCount;d++)c.push(r(t.child(d)));if(hC.from(c).eq(e))return{mark:i,type:n}}(g.parent.content.cut(g.parentOffset,m.parentOffset),_.parent.content.cut(_.parentOffset,p.endA-_.start()))))y=e.state.tr,"add"==b.type?y.addMark(x,C,b.mark):y.removeMark(x,C,b.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,m.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,x,C,t))))return;y=e.state.tr.insertText(t,x,C)}if(y||(y=e.state.tr.replace(x,C,l.doc.slice(p.start-l.from,p.endB-l.from))),l.sel){let t=TS(e,y.doc,l.sel);t&&!(KC&&YC&&e.composing&&t.empty&&(p.start!=p.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==x||t.head==y.mapping.map(C)-1)||BC&&t.empty&&t.head==x)&&y.setSelection(t)}w&&y.ensureMarks(w),e.dispatch(y.scrollIntoView())}function TS(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:sE(e,t.resolve(n.anchor),t.resolve(n.head))}function MS(e,t,n){let i=e.depth,r=t?e.end():e.pos;for(;i>0&&(t||e.indexAfter(i)==e.node(i).childCount);)i--,r++,t=!1;if(n){let t=e.node(i).maybeChild(e.indexAfter(i));for(;t&&!t.isLeaf;)t=t.firstChild,r++}return r}class NS{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PE,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(LS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=DS(this),RS(this),this.nodeViews=PS(this),this.docView=Pk(this.state.doc,AS(this),bS(this),this.dom,this),this.domObserver=new ES(this,((e,t,n,i)=>OS(this,e,t,n,i))),this.domObserver.start(),function(e){for(let t in RE){let n=RE[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!BE(e,t)||FE(e,t)||!e.editable&&t.type in DE||n(e,t)})}HC&&e.dom.addEventListener("input",(()=>null)),UE(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&UE(this),this._props=e,e.plugins&&(e.plugins.forEach(LS),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,t){let n=this.state,i=!1,r=!1;if(e.storedMarks&&this.composing&&(QE(this),r=!0),this.state=e,t){let e=PS(this);(function(e,t){let n=0,i=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let r in t)i++;return n!=i})(e,this.nodeViews)&&(this.nodeViews=e,i=!0),UE(this)}this.editable=DS(this),RS(this);let o=bS(this),s=AS(this),a=t?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",l=i||!this.docView.matchesNode(e.doc,s,o);!l&&e.selection.eq(n.selection)||(r=!0);let c="preserve"==a&&r&&null==this.dom.style.overflowAnchor&&function(e){let t,n,i=e.dom.getBoundingClientRect(),r=Math.max(0,i.top);for(let o=(i.left+i.right)/2,s=r+1;s<Math.min(innerHeight,i.bottom);s+=5){let i=e.root.elementFromPoint(o,s);if(!i||i==e.dom||!e.dom.contains(i))continue;let a=i.getBoundingClientRect();if(a.top>=r-20){t=i,n=a.top;break}}return{refDOM:t,refTop:n,stack:hk(e.dom)}}(this);if(r){this.domObserver.stop();let t=l&&(BC||KC)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(l){let n=KC?this.trackWrites=this.domSelection().focusNode:null;!i&&this.docView.update(e.doc,s,o,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Pk(e.doc,s,o,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelection();return tk(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Zk(this,t):(rE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==a)this.dom.scrollTop=0;else if("to selection"==a){let t=this.domSelection().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(e.selection instanceof vx){let n=this.docView.domAfterPos(e.selection.from);1==n.nodeType&&uk(this,n.getBoundingClientRect(),t)}else uk(this,this.coordsAtPos(e.selection.head,1),t)}else c&&function({refDOM:e,refTop:t,stack:n}){let i=e?e.getBoundingClientRect().top:0;pk(n,0==i?0:i-t)}(c)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,i=this._props&&this._props[e];if(null!=i&&(n=t?t(i):i))return n;for(let o=0;o<this.directPlugins.length;o++){let i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}let r=this.state.plugins;if(r)for(let o=0;o<r.length;o++){let i=r[o].props[e];if(null!=i&&(n=t?t(i):i))return n}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(fk)return e.focus(fk);let t=hk(e);e.focus(null==fk?{get preventScroll(){return fk={preventScroll:!0},!0}}:void 0),fk||(fk=!1,pk(t,0))}(this.dom),Zk(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}posAtCoords(e){return vk(this,e)}coordsAtPos(e,t=1){return bk(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let i=this.docView.posFromDOM(e,t,n);if(null==i)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Tk(this,t||this.state,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],bS(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){FE(e,t)||!RE[t.type]||!e.editable&&t.type in DE||RE[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function AS(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e&&(t.class+=" "+n[e]),"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),[lS.node(0,e.state.doc.content.size,t)]}function RS(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:lS.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function DS(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function PS(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function LS(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var US={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},FS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},BS="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),jS="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),VS="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),zS="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),KS="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),WS=BS&&(zS||+BS[1]<57)||VS&&zS,HS=0;HS<10;HS++)US[48+HS]=US[96+HS]=String(HS);for(HS=1;HS<=24;HS++)US[HS+111]="F"+HS;for(HS=65;HS<=90;HS++)US[HS]=String.fromCharCode(HS+32),FS[HS]=String.fromCharCode(HS);for(var $S in US)FS.hasOwnProperty($S)||(FS[$S]=US[$S]);var qS="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function YS(e){var t,n,i,r,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);qS?r=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function GS(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function XS(e){var t=function(e){var t=Object.create(null);for(var n in e)t[YS(n)]=e[n];return t}(e);return function(e,n){var i,r=function(e){var t=!(WS&&(e.ctrlKey||e.altKey||e.metaKey)||(jS||KS)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?FS:US)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=1==r.length&&" "!=r,s=t[GS(r,n,!o)];if(s&&s(e.state,e.dispatch,e))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=US[n.keyCode])&&i!=r){var a=t[GS(i,n,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(o&&n.shiftKey){var l=t[GS(r,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}function JS(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function QS(e,t){const n=w({},e);return JS(e)&&JS(t)&&Object.keys(t).forEach((i=>{JS(t[i])?i in e?n[i]=QS(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})})),n}function ZS(e){return"function"==typeof e}function eI(e,t,...n){return ZS(e)?t?e.bind(t)(...n):e(...n):e}function tI(e,t,n){if(void 0===e.config[t]&&e.parent)return tI(e.parent,t,n);if("function"==typeof e.config[t]){return e.config[t].bind(b(w({},n),{parent:e.parent?tI(e.parent,t,n):null}))}return e.config[t]}class nI{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=w(w({},this.config),e),this.name=this.config.name,this.options=this.config.defaultOptions,this.storage=eI(tI(this,"addStorage",{name:this.name,options:this.options}))}static create(e={}){return new nI(e)}configure(e={}){const t=this.extend();return t.options=QS(this.options,e),t}extend(e={}){const t=new nI(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t.storage=eI(tI(t,"addStorage",{name:t.name,options:t.options})),t}}function iI(e,t,n){const{from:i,to:r}=t,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="",l=!0;return e.nodesBetween(i,r,((e,t,n,c)=>{var d;const u=null==s?void 0:s[e.type.name];u?(e.isBlock&&!l&&(a+=o,l=!0),a+=u({node:e,pos:t,parent:n,index:c})):e.isText?(a+=null===(d=null==e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(i,t)-t,r-t),l=!1):e.isBlock&&!l&&(a+=o,l=!0)})),a}function rI(e){return Object.fromEntries(Object.entries(e.nodes).filter((([,e])=>e.spec.toText)).map((([e,t])=>[e,t.spec.toText])))}const oI=nI.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Rx({key:new Lx("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:r}=t,{from:o,to:s}=r;return iI(i,{from:o,to:s},{textSerializers:rI(n)})}}})]}});var sI=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame((()=>{e.isDestroyed||t.dom.blur()})),!0)});var aI=Object.freeze({__proto__:null,clearContent:(e=!1)=>({commands:t})=>t.setContent("",e)});var lI=Object.freeze({__proto__:null,clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:i}=t,{ranges:r}=i;return r.forEach((i=>{e.doc.nodesBetween(i.$from.pos,i.$to.pos,((e,i)=>{if(e.type.isText)return;const r=t.doc.resolve(t.mapping.map(i)),o=t.doc.resolve(t.mapping.map(i+e.nodeSize)),s=r.blockRange(o);if(!s)return;const a=qb(s);if(e.type.isTextblock&&n){const{defaultType:e}=r.parent.contentMatchAt(r.index());t.setNodeMarkup(s.start,e)}(a||0===a)&&n&&t.lift(s,a)}))})),!0}});var cI=Object.freeze({__proto__:null,command:e=>t=>e(t)});var dI=Object.freeze({__proto__:null,createParagraphNear:()=>({state:e,dispatch:t})=>Gx(e,t)});function uI(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var hI=Object.freeze({__proto__:null,deleteNode:e=>({tr:t,state:n,dispatch:i})=>{const r=uI(e,n.schema),o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1){if(o.node(e).type===r){if(i){const n=o.before(e),i=o.after(e);t.delete(n,i).scrollIntoView()}return!0}}return!1}});var pI=Object.freeze({__proto__:null,deleteRange:e=>({tr:t,dispatch:n})=>{const{from:i,to:r}=e;return n&&t.delete(i,r),!0}});var fI=Object.freeze({__proto__:null,deleteSelection:()=>({state:e,dispatch:t})=>Ux(e,t)});var gI=Object.freeze({__proto__:null,enter:()=>({commands:e})=>e.keyboardShortcut("Enter")});var mI=Object.freeze({__proto__:null,exitCode:()=>({state:e,dispatch:t})=>Yx(e,t)});function _I(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function vI(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function yI(e,t,n={strict:!0}){const i=Object.keys(t);return!i.length||i.every((i=>n.strict?t[i]===e[i]:vI(t[i])?t[i].test(e[i]):t[i]===e[i]))}function wI(e,t,n={}){return e.find((e=>e.type===t&&yI(e.attrs,n)))}function bI(e,t,n={}){return!!wI(e,t,n)}function xI(e,t,n={}){if(!e||!t)return;const i=e.parent.childAfter(e.parentOffset);if(!i.node)return;const r=wI(i.node.marks,t,n);if(!r)return;let o=e.index(),s=e.start()+i.offset,a=o+1,l=s+i.node.nodeSize;for(wI(i.node.marks,t,n);o>0&&r.isInSet(e.parent.child(o-1).marks);)o-=1,s-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&bI(e.parent.child(a).marks,t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}var CI=Object.freeze({__proto__:null,extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:r})=>{const o=_I(e,i.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:d}=a;if(r){const e=xI(l,o,t);if(e&&e.from<=c&&e.to>=d){const t=mx.create(s,e.from,e.to);n.setSelection(t)}}return!0}});var kI=Object.freeze({__proto__:null,first:e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1}});function EI(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function SI(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!function(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(e)}var II=Object.freeze({__proto__:null,focus:(e=null)=>({editor:t,view:n,tr:i,dispatch:r})=>{const o=()=>{(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)&&n.dom.focus(),requestAnimationFrame((()=>{t.isDestroyed||(n.focus(),t.commands.scrollIntoView())}))};if(n.hasFocus()&&null===e||!1===e)return!0;if(r&&null===e&&!(SI(s=t.state.selection)&&s instanceof mx))return o(),!0;var s;const{from:a,to:l}=function(e,t=null){if(!t)return null;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{size:t}=e.doc.content;return{from:t,to:t}}return{from:t,to:t}}(t.state,e)||t.state.selection,{doc:c,storedMarks:d}=i,u=px.atStart(c).from,h=px.atEnd(c).to,p=EI(a,u,h),f=EI(l,u,h),g=mx.create(c,p,f),m=t.state.selection.eq(g);return r&&(m||i.setSelection(g),m&&d&&i.setStoredMarks(d),o()),!0}});var OI=Object.freeze({__proto__:null,forEach:(e,t)=>n=>e.every(((e,i)=>t(e,b(w({},n),{index:i}))))});var TI=Object.freeze({__proto__:null,insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t)});function MI(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function NI(e,t,n){if(n=w({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)?_w.fromArray(e.map((e=>t.nodeFromJSON(e)))):t.nodeFromJSON(e)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),NI("",t,n)}if("string"==typeof e){const i=mb.fromSchema(t);return n.slice?i.parseSlice(MI(e),n.parseOptions).content:i.parse(MI(e),n.parseOptions)}return NI("",t,n)}var AI=Object.freeze({__proto__:null,insertContentAt:(e,t,n)=>({tr:i,dispatch:r,editor:o})=>{if(r){n=w({parseOptions:{},updateSelection:!0},n);const r=NI(t,o.schema,{parseOptions:w({preserveWhitespace:"full"},n.parseOptions)});if("<>"===r.toString())return!0;const{from:s,to:a}="number"==typeof e?{from:e,to:e}:e;i.replaceWith(s,a,r),n.updateSelection&&function(e,t,n){const i=e.steps.length-1;if(i<t)return;const r=e.steps[i];if(!(r instanceof Kb||r instanceof Wb))return;const o=e.mapping.maps[i];let s=0;o.forEach(((e,t,n,i)=>{0===s&&(s=i)})),e.setSelection(px.near(e.doc.resolve(s),n))}(i,i.steps.length-1,1)}return!0}});var RI=Object.freeze({__proto__:null,joinBackward:()=>({state:e,dispatch:t})=>Fx(e,t)});var DI=Object.freeze({__proto__:null,joinForward:()=>({state:e,dispatch:t})=>zx(e,t)});const PI="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var LI=Object.freeze({__proto__:null,keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:r})=>{const o=function(e){const t=e.split(/-(?!$)/);let n,i,r,o,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);PI?o=!0:i=!0}}return n&&(s=`Alt-${s}`),i&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),r&&(s=`Shift-${s}`),s}(e).split(/-(?!$)/),s=o.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction((()=>{n.someProp("handleKeyDown",(e=>e(n,a)))}));return null==l||l.steps.forEach((e=>{const t=e.map(i.mapping);t&&r&&i.maybeStep(t)})),!0}});function UI(e,t,n={}){const{from:i,to:r,empty:o}=e.selection,s=t?uI(t,e.schema):null,a=[];e.doc.nodesBetween(i,r,((e,t)=>{if(e.isText)return;const n=Math.max(i,t),o=Math.min(r,t+e.nodeSize);a.push({node:e,from:n,to:o})}));const l=r-i,c=a.filter((e=>!s||s.name===e.node.type.name)).filter((e=>yI(e.node.attrs,n,{strict:!1})));if(o)return!!c.length;return c.reduce(((e,t)=>e+t.to-t.from),0)>=l}var FI=Object.freeze({__proto__:null,lift:(e,t={})=>({state:n,dispatch:i})=>!!UI(n,uI(e,n.schema),t)&&Hx(n,i)});var BI=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:e,dispatch:t})=>Xx(e,t)});var jI=Object.freeze({__proto__:null,liftListItem:e=>({state:t,dispatch:n})=>cC(uI(e,t.schema))(t,n)});var VI=Object.freeze({__proto__:null,newlineInCode:()=>({state:e,dispatch:t})=>$x(e,t)});function zI(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function KI(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce(((t,i)=>(n.includes(i)||(t[i]=e[i]),t)),{})}var WI=Object.freeze({__proto__:null,resetAttributes:(e,t)=>({tr:n,state:i,dispatch:r})=>{let o=null,s=null;const a=zI("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(o=uI(e,i.schema)),"mark"===a&&(s=_I(e,i.schema)),r&&n.selection.ranges.forEach((e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,i)=>{o&&o===e.type&&n.setNodeMarkup(i,void 0,KI(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((r=>{s===r.type&&n.addMark(i,i+e.nodeSize,s.create(KI(r.attrs,t)))}))}))})),!0)}});var HI=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0)});var $I=Object.freeze({__proto__:null,selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size})});var qI=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:e,dispatch:t})=>jx(e,t)});var YI=Object.freeze({__proto__:null,selectNodeForward:()=>({state:e,dispatch:t})=>Kx(e,t)});var GI=Object.freeze({__proto__:null,selectParentNode:()=>({state:e,dispatch:t})=>function(e,t){var n,i=e.selection,r=i.$from,o=i.to,s=r.sharedDepth(o);return 0!=s&&(n=r.before(s),t&&t(e.tr.setSelection(vx.create(e.doc,n))),!0)}(e,t)});function XI(e,t,n={}){return NI(e,t,{slice:!1,parseOptions:n})}var JI=Object.freeze({__proto__:null,setContent:(e,t=!1,n={})=>({tr:i,editor:r,dispatch:o})=>{const{doc:s}=i,a=XI(e,r.schema,n),l=mx.create(s,0,s.content.size);return o&&i.setSelection(l).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0}});function QI(e,t){const n=_I(t,e.schema),{from:i,to:r,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,r,(e=>{s.push(...e.marks)}));const a=s.find((e=>e.type.name===n.name));return a?w({},a.attrs):{}}var ZI=Object.freeze({__proto__:null,setMark:(e,t={})=>({tr:n,state:i,dispatch:r})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=_I(e,i.schema);if(r)if(s){const e=QI(i,l);n.addStoredMark(l.create(w(w({},e),t)))}else a.forEach((e=>{const r=e.$from.pos,o=e.$to.pos;i.doc.nodesBetween(r,o,((e,i)=>{const s=Math.max(i,r),a=Math.min(i+e.nodeSize,o);e.marks.find((e=>e.type===l))?e.marks.forEach((e=>{l===e.type&&n.addMark(s,a,l.create(w(w({},e.attrs),t)))})):n.addMark(s,a,l.create(t))}))}));return!0}});var eO=Object.freeze({__proto__:null,setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0)});var tO=Object.freeze({__proto__:null,setNode:(e,t={})=>({state:n,dispatch:i})=>{const r=uI(e,n.schema);return(o=r,s=t,function(e,t){var n=e.selection,i=n.from,r=n.to,a=!1;return e.doc.nodesBetween(i,r,(function(t,n){if(a)return!1;if(t.isTextblock&&!t.hasMarkup(o,s))if(t.type==o)a=!0;else{var i=e.doc.resolve(n),r=i.index();a=i.parent.canReplaceWith(r,r+1,o)}})),!!a&&(t&&t(e.tr.setBlockType(i,r,o,s).scrollIntoView()),!0)})(n,i);var o,s}});var nO=Object.freeze({__proto__:null,setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,i=px.atStart(n).from,r=px.atEnd(n).to,o=EI(e,i,r),s=vx.create(n,o);t.setSelection(s)}return!0}});var iO=Object.freeze({__proto__:null,setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:i,to:r}="number"==typeof e?{from:e,to:e}:e,o=px.atStart(n).from,s=px.atEnd(n).to,a=EI(i,o,s),l=EI(r,o,s),c=mx.create(n,a,l);t.setSelection(c)}return!0}});var rO=Object.freeze({__proto__:null,sinkListItem:e=>({state:t,dispatch:n})=>{const i=uI(e,t.schema);return(r=i,function(e,t){var n=e.selection,i=n.$from,o=n.$to,s=i.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==r}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,c=l.child(a-1);if(c.type!=r)return!1;if(t){var d=c.lastChild&&c.lastChild.type==l.type,u=_w.from(d?r.create():null),h=new kw(_w.from(r.create(null,_w.from(l.type.create(null,u)))),d?3:1,0),p=s.start,f=s.end;t(e.tr.step(new Wb(p-(d?3:1),f,p,f,h,1,!0)).scrollIntoView())}return!0})(t,n);var r}});function oO(e,t,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const i=e.find((e=>e.type===t&&e.name===n));return!!i&&i.attribute.keepOnSplit})))}function sO(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const i=n.filter((e=>null==t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(i)}}var aO=Object.freeze({__proto__:null,splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:r})=>{const{selection:o,doc:s}=t,{$from:a,$to:l}=o,c=oO(r.extensionManager.attributes,a.node().type.name,a.node().attrs);if(o instanceof vx&&o.node.isBlock)return!(!a.parentOffset||!Xb(s,a.pos))&&(i&&(e&&sO(n,r.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const i=l.parentOffset===l.parent.content.size;o instanceof mx&&t.deleteSelection();const s=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let d=i&&s?[{type:s,attrs:c}]:void 0,u=Xb(t.doc,t.mapping.map(a.pos),1,d);if(d||u||!Xb(t.doc,t.mapping.map(a.pos),1,s?[{type:s}]:void 0)||(u=!0,d=s?[{type:s,attrs:c}]:void 0),u&&(t.split(t.mapping.map(a.pos),1,d),s&&!i&&!a.parentOffset&&a.parent.type!==s)){const e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,s)&&t.setNodeMarkup(t.mapping.map(a.before()),s)}e&&sO(n,r.extensionManager.splittableMarks),t.scrollIntoView()}return!0}});var lO=Object.freeze({__proto__:null,splitListItem:e=>({tr:t,state:n,dispatch:i,editor:r})=>{var o;const s=uI(e,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const d=a.node(-1);if(d.type!==s)return!1;const u=r.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let e=_w.empty;const n=a.index(-1)?1:a.index(-2)?2:3;for(let t=a.depth-n;t>=a.depth-3;t-=1)e=_w.from(a.node(t).copy(e));const i=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,r=oO(u,a.node().type.name,a.node().attrs),l=(null===(o=s.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(r))||void 0;e=e.append(_w.from(s.createAndFill(null,l)||void 0));const c=a.before(a.depth-(n-1));t.replace(c,a.after(-i),new kw(e,4-n,0));let d=-1;t.doc.nodesBetween(c,t.doc.content.size,((e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)})),d>-1&&t.setSelection(mx.near(t.doc.resolve(d))),t.scrollIntoView()}return!0}const h=l.pos===a.end()?d.contentMatchAt(0).defaultType:null,p=oO(u,d.type.name,d.attrs),f=oO(u,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const g=h?[{type:s,attrs:p},{type:h,attrs:f}]:[{type:s,attrs:p}];return!!Xb(t.doc,a.pos,2)&&(i&&t.split(a.pos,2,g).scrollIntoView(),!0)}});function cO(e){return{baseExtensions:e.filter((e=>"extension"===e.type)),nodeExtensions:e.filter((e=>"node"===e.type)),markExtensions:e.filter((e=>"mark"===e.type))}}function dO(e,t){const{nodeExtensions:n}=cO(t),i=n.find((t=>t.name===e));if(!i)return!1;const r=eI(tI(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof r&&r.split(" ").includes("list")}var uO=Object.freeze({__proto__:null,toggleList:(e,t)=>({editor:n,tr:i,state:r,dispatch:o,chain:s,commands:a,can:l})=>{const{extensions:c}=n.extensionManager,d=uI(e,r.schema),u=uI(t,r.schema),{selection:h}=r,{$from:p,$to:f}=h,g=p.blockRange(f);if(!g)return!1;const m=(_=e=>dO(e.type.name,c),e=>function(e,t){for(let n=e.depth;n>0;n-=1){const i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}}(e.$from,_))(h);var _;if(g.depth>=1&&m&&g.depth-m.depth<=1){if(m.node.type===d)return a.liftListItem(u);if(dO(m.node.type.name,c)&&d.validContent(m.node.content)&&o)return i.setNodeMarkup(m.pos,d),!0}return l().wrapInList(d)?a.wrapInList(d):s().clearNodes().wrapInList(d).run()}});function hO(e,t,n={}){const{empty:i,ranges:r}=e.selection,o=t?_I(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!o||o.name===e.type.name)).find((e=>yI(e.attrs,n,{strict:!1})));let s=0;const a=[];if(r.forEach((({$from:t,$to:n})=>{const i=t.pos,r=n.pos;e.doc.nodesBetween(i,r,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(i,t),o=Math.min(r,t+e.nodeSize);s+=o-n,a.push(...e.marks.map((e=>({mark:e,from:n,to:o}))))}))})),0===s)return!1;const l=a.filter((e=>!o||o.name===e.mark.type.name)).filter((e=>yI(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),c=a.filter((e=>!o||e.mark.type!==o&&e.mark.type.excludes(o))).reduce(((e,t)=>e+t.to-t.from),0);return(l>0?l+c:l)>=s}var pO=Object.freeze({__proto__:null,toggleMark:(e,t={},n={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:o=!1}=n,s=_I(e,i.schema);return hO(i,s,t)?r.unsetMark(s,{extendEmptyMarkRange:o}):r.setMark(s,t)}});var fO=Object.freeze({__proto__:null,toggleNode:(e,t,n={})=>({state:i,commands:r})=>{const o=uI(e,i.schema),s=uI(t,i.schema);return UI(i,o,n)?r.setNode(s):r.setNode(o,n)}});var gO=Object.freeze({__proto__:null,toggleWrap:(e,t={})=>({state:n,dispatch:i})=>{const r=uI(e,n.schema);return UI(n,r,t)?Hx(n,i):tC(r,t)(n,i)}});var mO=Object.freeze({__proto__:null,undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let i=0;i<n.length;i+=1){const r=n[i];let o;if(r.spec.isInputRules&&(o=r.getState(e))){if(t){const t=e.tr,n=o.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(o.text){const n=t.doc.resolve(o.from).marks();t.replaceWith(o.from,o.to,e.schema.text(o.text,n))}else t.delete(o.from,o.to)}return!0}}return!1}});var _O=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:e,state:t,dispatch:n})=>{const{selection:i}=e,{empty:r,ranges:o}=i;return r||n&&Object.entries(t.schema.marks).forEach((([,t])=>{o.forEach((n=>{e.removeMark(n.$from.pos,n.$to.pos,t)}))})),!0}});var vO=Object.freeze({__proto__:null,unsetMark:(e,t={})=>({tr:n,state:i,dispatch:r})=>{var o;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=_I(e,i.schema),{$from:c,empty:d,ranges:u}=a;if(!r)return!0;if(d&&s){let{from:e,to:t}=a;const i=null===(o=c.marks().find((e=>e.type===l)))||void 0===o?void 0:o.attrs,r=xI(c,l,i);r&&(e=r.from,t=r.to),n.removeMark(e,t,l)}else u.forEach((e=>{n.removeMark(e.$from.pos,e.$to.pos,l)}));return n.removeStoredMark(l),!0}});var yO=Object.freeze({__proto__:null,updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:r})=>{let o=null,s=null;const a=zI("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(o=uI(e,i.schema)),"mark"===a&&(s=_I(e,i.schema)),r&&n.selection.ranges.forEach((e=>{const r=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(r,a,((e,i)=>{o&&o===e.type&&n.setNodeMarkup(i,void 0,w(w({},e.attrs),t)),s&&e.marks.length&&e.marks.forEach((o=>{if(s===o.type){const l=Math.max(i,r),c=Math.min(i+e.nodeSize,a);n.addMark(l,c,s.create(w(w({},o.attrs),t)))}}))}))})),!0)}});var wO=Object.freeze({__proto__:null,wrapIn:(e,t={})=>({state:n,dispatch:i})=>{const r=uI(e,n.schema);return!UI(n,r,t)&&tC(r,t)(n,i)}});var bO=Object.freeze({__proto__:null,wrapInList:(e,t={})=>({state:n,dispatch:i})=>lC(uI(e,n.schema),t)(n,i)});const xO=nI.create({name:"commands",addCommands:()=>w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w({},sI),aI),lI),cI),dI),hI),pI),fI),gI),mI),CI),kI),II),OI),TI),AI),RI),DI),LI),FI),BI),jI),VI),WI),HI),$I),qI),YI),GI),JI),ZI),eO),tO),nO),iO),rO),aO),lO),uO),pO),fO),gO),mO),_O),vO),yO),wO),bO)}),CO=nI.create({name:"editable",addProseMirrorPlugins(){return[new Rx({key:new Lx("editable"),props:{editable:()=>this.editor.options.editable}})]}}),kO=nI.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Rx({key:new Lx("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;const i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),EO=nI.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((({commands:e})=>[()=>e.undoInputRule(),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()])),t=()=>this.editor.commands.first((({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]));return{Enter:()=>this.editor.commands.first((({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()}}}),SO=nI.create({name:"tabindex",addProseMirrorPlugins:()=>[new Rx({key:new Lx("tabindex"),props:{attributes:{tabindex:"0"}}})]});var IO=Object.freeze({__proto__:null,ClipboardTextSerializer:oI,Commands:xO,Editable:CO,FocusEvents:kO,Keymap:EO,Tabindex:SO});function OO(e,t){const n=zI("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=uI(t,e.schema),{from:i,to:r}=e.selection,o=[];e.doc.nodesBetween(i,r,(e=>{o.push(e)}));const s=o.reverse().find((e=>e.type.name===n.name));return s?w({},s.attrs):{}}(e,t):"mark"===n?QI(e,t):{}}function TO(e){const{state:t,transaction:n}=e;let{selection:i}=n,{doc:r}=n,{storedMarks:o}=n;return b(w({},t),{schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return i},get doc(){return r},get tr(){return i=n.selection,r=n.doc,o=n.storedMarks,n}})}class MO{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:i}=t,{tr:r}=n,o=this.buildProps(r);return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(...e)=>{const n=t(...e)(o);return r.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(r),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:i,state:r}=this,{view:o}=i,s=[],a=!!e,l=e||r.tr,c=b(w({},Object.fromEntries(Object.entries(n).map((([e,n])=>[e,(...e)=>{const i=this.buildProps(l,t),r=n(...e)(i);return s.push(r),c}])))),{run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),s.every((e=>!0===e)))});return c}createCan(e){const{rawCommands:t,state:n}=this,i=void 0,r=e||n.tr,o=this.buildProps(r,i),s=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(...e)=>t(...e)(b(w({},o),{dispatch:i}))])));return b(w({},s),{chain:()=>this.createChain(r,i)})}buildProps(e,t=!0){const{rawCommands:n,editor:i,state:r}=this,{view:o}=i;r.storedMarks&&e.setStoredMarks(r.storedMarks);const s={tr:e,editor:i,view:o,state:TO({state:r,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((([e,t])=>[e,(...e)=>t(...e)(s)])))}};return s}}class NO{constructor(e){this.find=e.find,this.handler=e.handler}}function AO(e){var t;const{editor:n,from:i,to:r,text:o,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((e=>e.type.spec.code))))return!1;let d=!1;const u=c.parent.textBetween(Math.max(0,c.parentOffset-500),c.parentOffset,void 0,"￼")+o;return s.forEach((e=>{if(d)return;const t=((e,t)=>{if(vI(t))return t.exec(e);const n=t(e);if(!n)return null;const i=[];return i.push(n.text),i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i})(u,e.find);if(!t)return;const s=l.state.tr,c=TO({state:l.state,transaction:s}),h={from:i-(t[0].length-o.length),to:r},{commands:p,chain:f,can:g}=new MO({editor:n,state:c});e.handler({state:c,range:h,match:t,commands:p,chain:f,can:g}),s.steps.length&&(s.setMeta(a,{transform:s,from:i,to:r,text:o}),l.dispatch(s),d=!0)})),d}function RO(e){const{editor:t,rules:n}=e,i=new Rx({state:{init:()=>null,apply(e,t){const n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(e,r,o,s)=>AO({editor:t,from:r,to:o,text:s,rules:n,plugin:i}),handleDOMEvents:{compositionend:e=>(setTimeout((()=>{const{$cursor:r}=e.state.selection;r&&AO({editor:t,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(e,r){if("Enter"!==r.key)return!1;const{$cursor:o}=e.state.selection;return!!o&&AO({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function DO(e){const{editor:t,state:n,from:i,to:r,rules:o}=e,{commands:s,chain:a,can:l}=new MO({editor:t,state:n});n.doc.nodesBetween(i,r,((e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const c=Math.max(i,t),d=Math.min(r,t+e.content.size),u=e.textBetween(c-t,d-t,void 0,"￼");o.forEach((e=>{((e,t)=>{if(vI(t))return[...e.matchAll(t)];const n=t(e);return n?n.map((t=>{const n=[];return n.push(t.text),n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]})(u,e.find).forEach((t=>{if(void 0===t.index)return;const i=c+t.index+1,r=i+t[0].length,o={from:n.tr.mapping.map(i),to:n.tr.mapping.map(r)};e.handler({state:n,range:o,match:t,commands:s,chain:a,can:l})}))}))}))}function PO(e){const{editor:t,rules:n}=e;let i=!1;const r=new Rx({props:{handlePaste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}},appendTransaction:(e,o,s)=>{const a=e[0];if(!a.getMeta("paste")||i)return;const{doc:l,before:c}=a,d=c.content.findDiffStart(l.content),u=c.content.findDiffEnd(l.content);if("number"!=typeof d||!u||d===u.b)return;const h=s.tr,p=TO({state:s,transaction:h});return DO({editor:t,state:p,from:Math.max(d-1,0),to:u.b,rules:n,plugin:r}),h.steps.length?h:void 0},isPasteRules:!0});return r}function LO(e){const t=[],{nodeExtensions:n,markExtensions:i}=cO(e),r=[...n,...i],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach((e=>{const n=tI(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage});if(!n)return;n().forEach((e=>{e.types.forEach((n=>{Object.entries(e.attributes).forEach((([e,i])=>{t.push({type:n,name:e,attribute:w(w({},o),i)})}))}))}))})),r.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},i=tI(e,"addAttributes",n);if(!i)return;const r=i();Object.entries(r).forEach((([n,i])=>{t.push({type:e.name,name:n,attribute:w(w({},o),i)})}))})),t}function UO(...e){return e.filter((e=>!!e)).reduce(((e,t)=>{const n=w({},e);return Object.entries(t).forEach((([e,t])=>{n[e]?n[e]="class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:n[e]=t})),n}),{})}function FO(e,t){return t.filter((e=>e.attribute.rendered)).map((t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]})).reduce(((e,t)=>UO(e,t)),{})}function BO(e,t){return e.style?e:b(w({},e),{getAttrs:n=>{const i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;const r=t.filter((e=>e.attribute.rendered)).reduce(((e,t)=>{const i=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^\d*(\.\d+)?$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return SI(i)&&console.warn(`[tiptap warn]: BREAKING CHANGE: "parseHTML" for your attribute "${t.name}" returns an object but should return the value itself. If this is expected you can ignore this message. This warning will be removed in one of the next releases. Further information: https://github.com/ueberdosis/tiptap/issues/1863`),null==i?e:b(w({},e),{[t.name]:i})}),{});return w(w({},i),r)}})}function jO(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>("attrs"!==e||!function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t)))}function VO(e,t){return t.nodes[e]||t.marks[e]||null}class zO{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=zO.resolve(e),this.schema=function(e){var t;const n=LO(e),{nodeExtensions:i,markExtensions:r}=cO(e),o=null===(t=i.find((e=>tI(e,"topNode"))))||void 0===t?void 0:t.name,s=Object.fromEntries(i.map((t=>{const i=n.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage},o=e.reduce(((e,n)=>{const i=tI(n,"extendNodeSchema",r);return w(w({},e),i?i(t):{})}),{}),s=jO(b(w({},o),{content:eI(tI(t,"content",r)),marks:eI(tI(t,"marks",r)),group:eI(tI(t,"group",r)),inline:eI(tI(t,"inline",r)),atom:eI(tI(t,"atom",r)),selectable:eI(tI(t,"selectable",r)),draggable:eI(tI(t,"draggable",r)),code:eI(tI(t,"code",r)),defining:eI(tI(t,"defining",r)),isolating:eI(tI(t,"isolating",r)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),a=eI(tI(t,"parseHTML",r));a&&(s.parseDOM=a.map((e=>BO(e,i))));const l=tI(t,"renderHTML",r);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:FO(e,i)}));const c=tI(t,"renderText",r);return c&&(s.toText=c),[t.name,s]}))),a=Object.fromEntries(r.map((t=>{const i=n.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage},o=e.reduce(((e,n)=>{const i=tI(n,"extendMarkSchema",r);return w(w({},e),i?i(t):{})}),{}),s=jO(b(w({},o),{inclusive:eI(tI(t,"inclusive",r)),excludes:eI(tI(t,"excludes",r)),group:eI(tI(t,"group",r)),spanning:eI(tI(t,"spanning",r)),code:eI(tI(t,"code",r)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))})),a=eI(tI(t,"parseHTML",r));a&&(s.parseDOM=a.map((e=>BO(e,i))));const l=tI(t,"renderHTML",r);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:FO(e,i)})),[t.name,s]})));return new fb({topNode:o,nodes:s,marks:a})}(this.extensions),this.extensions.forEach((e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:VO(e.name,this.schema)};if("mark"===e.type){(null===(t=eI(tI(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const i=tI(e,"onBeforeCreate",n);i&&this.editor.on("beforeCreate",i);const r=tI(e,"onCreate",n);r&&this.editor.on("create",r);const o=tI(e,"onUpdate",n);o&&this.editor.on("update",o);const s=tI(e,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=tI(e,"onTransaction",n);a&&this.editor.on("transaction",a);const l=tI(e,"onFocus",n);l&&this.editor.on("focus",l);const c=tI(e,"onBlur",n);c&&this.editor.on("blur",c);const d=tI(e,"onDestroy",n);d&&this.editor.on("destroy",d)}))}static resolve(e){const t=zO.sort(zO.flatten(e)),n=function(e){const t=e.filter(((t,n)=>e.indexOf(t)!==n));return[...new Set(t)]}(t.map((e=>e.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((e=>`'${e}'`)).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map((e=>{const t=tI(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e})).flat(10)}static sort(e){return e.sort(((e,t)=>{const n=tI(e,"priority")||100,i=tI(t,"priority")||100;return n>i?-1:n<i?1:0}))}get commands(){return this.extensions.reduce(((e,t)=>{const n=tI(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:VO(t.name,this.schema)});return n?w(w({},e),n()):e}),{})}get plugins(){const{editor:e}=this,t=zO.sort([...this.extensions].reverse()),n=[],i=[],r=t.map((t=>{const r={name:t.name,options:t.options,storage:t.storage,editor:e,type:VO(t.name,this.schema)},o=[],s=tI(t,"addKeyboardShortcuts",r);if(s){const t=function(e){return new Rx({props:{handleKeyDown:XS(e)}})}(Object.fromEntries(Object.entries(s()).map((([t,n])=>[t,()=>n({editor:e})]))));o.push(t)}const a=tI(t,"addInputRules",r);e.options.enableInputRules&&a&&n.push(...a());const l=tI(t,"addPasteRules",r);e.options.enablePasteRules&&l&&i.push(...l());const c=tI(t,"addProseMirrorPlugins",r);if(c){const e=c();o.push(...e)}return o})).flat();return[RO({editor:e,rules:n}),PO({editor:e,rules:i}),...r]}get attributes(){return LO(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=cO(this.extensions);return Object.fromEntries(t.filter((e=>!!tI(e,"addNodeView"))).map((t=>{const n=this.attributes.filter((e=>e.type===t.name)),i={name:t.name,options:t.options,storage:t.storage,editor:e,type:uI(t.name,this.schema)},r=tI(t,"addNodeView",i);if(!r)return[];return[t.name,(i,o,s,a)=>{const l=FO(i,n);return r()({editor:e,node:i,getPos:s,decorations:a,HTMLAttributes:l,extension:t})}]})))}}class KO extends class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e){const t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}'))}setOptions(e={}){this.options=w(w({},this.options),e),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=ZS(t)?t(e,this.state.plugins):[...this.state.plugins,e],i=this.state.reconfigure({plugins:n});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"==typeof e?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith(t)))});this.view.updateState(n)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(IO):[],...this.options.extensions].filter((e=>["extension","node","mark"].includes(null==e?void 0:e.type)));this.extensionManager=new zO(e,this)}createCommandManager(){this.commandManager=new MO({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new NS(this.options.element,b(w({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:Tx.create({doc:XI(this.options.content,this.schema,this.options.parseOptions)})}));const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews();this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)})):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),r=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return OO(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,i="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return UI(e,null,n)||hO(e,null,n);const i=zI(t,e.schema);return"node"===i?UI(e,t,n):"mark"===i&&hO(e,t,n)}(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return function(e,t){const n=Ib.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){return iI(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:t,textSerializers:w(w({},n),rI(this.schema))})}get isEmpty(){return function(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),i=e.toJSON();return JSON.stringify(n)===JSON.stringify(i)}(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){var e;this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),(null==(e=this.css)?void 0:e.parentNode)&&e.parentNode.removeChild(e)}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}class WO{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=w(w({},this.config),e),this.name=this.config.name,this.options=this.config.defaultOptions,this.storage=eI(tI(this,"addStorage",{name:this.name,options:this.options}))}static create(e={}){return new WO(e)}configure(e={}){const t=this.extend();return t.options=QS(this.options,e),t}extend(e={}){const t=new WO(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t.storage=eI(tI(t,"addStorage",{name:t.name,options:t.options})),t}}class HO{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=w(w({},this.config),e),this.name=this.config.name,this.options=this.config.defaultOptions,this.storage=eI(tI(this,"addStorage",{name:this.name,options:this.options}))}static create(e={}){return new HO(e)}configure(e={}){const t=this.extend();return t.options=QS(this.options,e),t}extend(e={}){const t=new HO(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t.storage=eI(tI(t,"addStorage",{name:t.name,options:t.options})),t}}function $O(e){return new NO({find:e.find,handler:({state:t,range:n,match:i})=>{const r=eI(e.getAttributes,void 0,i)||{},o=t.tr.delete(n.from,n.to),s=o.doc.resolve(n.from).blockRange(),a=s&&Yb(s,e.type,r);if(!a)return null;o.wrap(s,a);const l=o.doc.resolve(n.from-1).nodeBefore;l&&l.type===e.type&&Jb(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,l))&&o.join(n.from-1)}})}var qO=function(){};qO.prototype.append=function(e){return e.length?(e=qO.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},qO.prototype.prepend=function(e){return e.length?qO.from(e).append(this):this},qO.prototype.appendInner=function(e){return new GO(this,e)},qO.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?qO.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},qO.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},qO.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},qO.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var i=[];return this.forEach((function(t,n){return i.push(e(t,n))}),t,n),i},qO.from=function(e){return e instanceof qO?e:e&&e.length?new YO(e):qO.empty};var YO=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,i){for(var r=t;r<n;r++)if(!1===e(this.values[r],i+r))return!1},t.prototype.forEachInvertedInner=function(e,t,n,i){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],i+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(qO);qO.empty=new YO([]);var GO=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,i){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),i))&&(!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,i+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,i){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,i+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,i))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(qO),XO=qO,JO=function(e,t){this.items=e,this.eventCount=t};JO.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var i,r,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(i=this.remapping(o,this.items.length),r=i.maps.length);var s,a,l=e.tr,c=[],d=[];return this.items.forEach((function(e,t){if(!e.step)return i||(i=n.remapping(o,t+1),r=i.maps.length),r--,void d.push(e);if(i){d.push(new QO(e.map));var u,h=e.step.map(i.slice(r));h&&l.maybeStep(h).doc&&(u=l.mapping.maps[l.mapping.maps.length-1],c.push(new QO(u,null,null,c.length+d.length))),r--,u&&i.appendMap(u,r)}else l.maybeStep(e.step);return e.selection?(s=i?e.selection.map(i.slice(r)):e.selection,a=new JO(n.items.slice(0,o).append(d.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},JO.prototype.addTransform=function(e,t,n,i){for(var r=[],o=this.eventCount,s=this.items,a=!i&&s.length?s.get(s.length-1):null,l=0;l<e.steps.length;l++){var c,d=e.steps[l].invert(e.docs[l]),u=new QO(e.mapping.maps[l],d,t);(c=a&&a.merge(u))&&(u=c,l?r.pop():s=s.slice(0,s.length-1)),r.push(u),t&&(o++,t=null),i||(a=u)}var h,p,f,g=o-n.depth;return g>eT&&(p=g,(h=s).forEach((function(e,t){if(e.selection&&0==p--)return f=t,!1})),s=h.slice(f),o-=g),new JO(s.append(r),o)},JO.prototype.remapping=function(e,t){var n=new Pb;return this.items.forEach((function(t,i){var r=null!=t.mirrorOffset&&i-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,r)}),e,t),n},JO.prototype.addMaps=function(e){return 0==this.eventCount?this:new JO(this.items.append(e.map((function(e){return new QO(e)}))),this.eventCount)},JO.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],i=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),i);var a=t;this.items.forEach((function(t){var i=r.getMirror(--a);if(null!=i){o=Math.min(o,i);var l=r.maps[i];if(t.step){var c=e.steps[i].invert(e.docs[i]),d=t.selection&&t.selection.map(r.slice(a+1,i));d&&s++,n.push(new QO(l,c,d))}else n.push(new QO(l))}}),i);for(var l=[],c=t;c<o;c++)l.push(new QO(r.maps[c]));var d=this.items.slice(0,i).append(l).append(n),u=new JO(d,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u},JO.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},JO.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,i=[],r=0;return this.items.forEach((function(o,s){if(s>=e)i.push(o),o.selection&&r++;else if(o.step){var a=o.step.map(t.slice(n)),l=a&&a.getMap();if(n--,l&&t.appendMap(l,n),a){var c=o.selection&&o.selection.map(t.slice(n));c&&r++;var d,u=new QO(l.invert(),a,c),h=i.length-1;(d=i.length&&i[h].merge(u))?i[h]=d:i.push(u)}}else o.map&&n--}),this.items.length,0),new JO(XO.from(i.reverse()),r)},JO.empty=new JO(XO.empty,0);var QO=function(e,t,n,i){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i};QO.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new QO(t.getMap().invert(),t,this.selection)}};var ZO=function(e,t,n,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i},eT=20;function tT(e){var t=[];return e.forEach((function(e,n,i,r){return t.push(i,r)})),t}function nT(e,t){if(!e)return null;for(var n=[],i=0;i<e.length;i+=2){var r=t.map(e[i],1),o=t.map(e[i+1],-1);r<=o&&n.push(r,o)}return n}function iT(e,t,n,i){var r=sT(t),o=aT.get(t).spec.config,s=(i?e.undone:e.done).popEvent(t,r);if(s){var a=s.selection.resolve(s.transform.doc),l=(i?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,r),c=new ZO(i?l:s.remaining,i?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(aT,{redo:i,historyState:c}).scrollIntoView())}}var rT=!1,oT=null;function sT(e){var t=e.plugins;if(oT!=t){rT=!1,oT=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){rT=!0;break}}return rT}var aT=new Lx("history"),lT=new Lx("closeHistory");function cT(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new Rx({key:aT,state:{init:function(){return new ZO(JO.empty,JO.empty,null,0)},apply:function(t,n,i){return function(e,t,n,i){var r,o=n.getMeta(aT);if(o)return o.historyState;n.getMeta(lT)&&(e=new ZO(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(aT))return s.getMeta(aT).redo?new ZO(e.done.addTransform(n,null,i,sT(t)),e.undone,tT(n.mapping.maps[n.steps.length-1]),e.prevTime):new ZO(e.done,e.undone.addTransform(n,null,i,sT(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new ZO(e.done.rebased(n,r),e.undone.rebased(n,r),nT(e.prevRanges,n.mapping),e.prevTime):new ZO(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),nT(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-i.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,i){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&i>=t[r]&&(n=!0)})),n}(n,e.prevRanges)),l=s?nT(e.prevRanges,n.mapping):tT(n.mapping.maps[n.steps.length-1]);return new ZO(e.done.addTransform(n,a?t.selection.getBookmark():null,i,sT(t)),JO.empty,l,n.time)}(n,i,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n="historyUndo"==t.inputType?dT(e.state,e.dispatch):"historyRedo"==t.inputType&&uT(e.state,e.dispatch);return n&&t.preventDefault(),n}}}})}function dT(e,t){var n=aT.getState(e);return!(!n||0==n.done.eventCount)&&(t&&iT(n,e,t,!1),!0)}function uT(e,t){var n=aT.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&iT(n,e,t,!0),!0)}const hT=nI.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands:()=>({undo:()=>({state:e,dispatch:t})=>dT(e,t),redo:()=>({state:e,dispatch:t})=>uT(e,t)}),addProseMirrorPlugins(){return[cT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),pT=HO.create({name:"textStyle",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:e}){return["span",UO(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=QI(e,this.type);return!!Object.entries(n).some((([,e])=>!!e))||t.unsetMark("textStyle")}}}}),fT=WO.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",UO(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),gT=nI.create({name:"textAlign",addOptions:()=>({types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}),addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.every((n=>t.updateAttributes(n,{textAlign:e}))),unsetTextAlign:()=>({commands:e})=>this.options.types.every((t=>e.resetAttributes(t,"textAlign")))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),mT=WO.create({name:"doc",topNode:!0,content:"block+"}),_T=WO.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",addAttributes:()=>({}),parseHTML:()=>[{tag:"p",getAttrs:e=>({})}],renderHTML({node:e,HTMLAttributes:t}){return["p",w({},UO(this.options.HTMLAttributes,t)),0]}}),vT=WO.create({name:"text",group:"inline"});function yT(e){return{default:null,parseHTML:t=>{var n;return null==(n=t.style.getPropertyValue(e))?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>{const n=t[e];return n?{style:`${e}: ${n}`}:{}},keepOnSplit:!0}}const wT=nI.create({name:"textStyleImpl",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{color:yT("color"),"font-size":yT("font-size"),"font-family":yT("font-family"),"font-weight":yT("font-weight"),"font-style":yT("font-style"),"text-decoration-line":yT("text-decoration-line"),"line-height":yT("line-height"),"letter-spacing":yT("letter-spacing")}}],addCommands:()=>({setStyle:e=>({chain:t,commands:n})=>{const{"text-align":i}=e;return oi(i)?i?n.setTextAlign(i):n.unsetTextAlign():t().setMark("textStyle",e).removeEmptyTextStyle().run()}})}),bT=/^(\d+)\.\s$/,xT=WO.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const t=e,{start:n}=t,i=x(t,["start"]);return 1===n?["ol",UO(this.options.HTMLAttributes,i),0]:["ol",UO(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[$O({find:bT,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),CT=/^\s*([-+*])\s$/,kT=WO.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",UO(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[$O({find:CT,type:this.type})]}}),ET=[1,2,3,4,5,6],ST=WO.create({name:"heading",content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML:()=>ET.map((e=>({tag:`h${e}`,attrs:{level:e}}))),renderHTML({node:e,HTMLAttributes:t}){return[`h${ET.includes(e.attrs.level)?e.attrs.level:ET[0]}`,UO(this.options.HTMLAttributes,t),0]},addInputRules(){return ET.map((e=>{return t={find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}},new NO({find:t.find,handler:({state:e,range:n,match:i})=>{const r=e.doc.resolve(n.from),o=eI(t.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}});var t}))}}),IT=WO.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",UO(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:i})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:r}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=i.extensionManager,a=r||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&o){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.setHardBreak()}}});const OT=new DOMParser;class TT extends jo{constructor(e,t){super(),C(this,"_onUpdate",this._register(new ws)),C(this,"onUpdate",this._onUpdate.event),C(this,"_onExit",this._register(new ws)),C(this,"onExit",this._onExit.event),C(this,"_container"),C(this,"_isTargetVisible",!1),this.targetId=e,this.editor=t,this._register(this.editor.view.onPositionUpdated((()=>this._handleRectUpdate())))}_checkTargetVisible(){if(!this.targetId)return!1;return"visible"===this.editor.view.getComputedStyleOfId(this.targetId).visibility}_resizeEditorShell(){const e=this.editor.view.getElementRectById(this.targetId);if(this._isTargetVisible){const t=this._container.scrollHeight;Object.assign(e,{height:t})}this._resizeEditorRect(e)}_resizeEditorRect(e){Object.assign(this._container.style,{position:"absolute",top:`${e.top}px`,left:`${e.left}px`,width:Yi(e.width),height:Yi(e.height)})}_resizeAdjust(){const e=this.editor.view.getElementRectById(this.targetId),t=this._container.querySelector(`.${this.targetId}`);t&&Object.assign(t.style,{height:"auto",minHeight:Yi(e.height)})}_showEditor(e,t){const n=function(e,t,n,i=Ci){const r=new KO({element:e,extensions:[hT,IT,mT,_T,ST,vT,pT,wT,gT.configure({types:["paragraph"],alignments:["left","center","right","justify"],defaultAlignment:""}),kT.configure({itemTypeName:"listItem",HTMLAttributes:{}}),xT.configure({itemTypeName:"listItem",HTMLAttributes:{}}),fT],content:t.innerHTML,onUpdate({editor:e}){const t=OT.parseFromString(e.getHTML(),"text/html");Array.from(t.body.children).forEach((e=>{var n;if(0===e.childNodes.length&&(e.innerHTML="&#8203;"),"BR"===(null==(n=e.lastElementChild)?void 0:n.tagName)){const n=t.createElement("br");n.className="trailingBreak",e.appendChild(n)}})),n(t.body.innerHTML)},onDestroy:i}),o=t.className.split(/\s/i);return r.view.dom.classList.add(...o),r}(e,t,(e=>{this._onUpdate.fire({content:e})}));this.editor.storeRichTextEditor(n),function(e){const{view:t}=e,n=t.state.tr;e.commands.focus(),t.dispatch(n.setSelection(px.atEnd(n.doc))),e.commands.selectAll()}(n),this._register(function(e,t,n=[]){function i(i){const r=i.target;if(e.contains(r))return;if(n.some((e=>r.closest(e))))return;if(!r.ownerDocument.body.contains(r))return;const o=a_.collect(r);o&&(l_.isCanvasOverlay(o)||l_.isChildOfCanvas(o)||t(i))}const r=new Bo;r.add(Ng(document.body,gg,i)),e.ownerDocument!==document&&r.add(Ng(e.ownerDocument.body,gg,i));return r}(this._container,(()=>{this._onExit.fire()}),[".textEditorExitWhitelist"]))}_handleRectUpdate(){this._resizeEditorShell()}render(e){const t=this.editor.view.getElementById(this.targetId).cloneNode(!0);t.querySelectorAll(".trailingBreak").forEach((e=>e.remove())),e.id="tmp-"+ni();const n=document.createElement("div");e.appendChild(n),n.appendChild(t),this._container=e,t.parentElement.style.display="none";const i=document.createElement("style");i.type="text/css",i.innerHTML='\n    .ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror li {\n  position: relative;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n/* Make sure li selections wrap around markers */\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n/* Protect against generic img rules */\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n}\n\n    *{user-select: auto;}\n    div[contenteditable] {\n      width: auto !important;\n      margin: 0 !important;\n      caret-color: blue;\n    }\n    div[contenteditable] > * { width: 100%; cursor: text !important; }',e.appendChild(i);const r=document.createElement("div");e.appendChild(r),this._showEditor(r,t),this._isTargetVisible=this._checkTargetVisible(),this._resizeEditorShell(),this._isTargetVisible&&this._resizeAdjust()}}class MT extends jo{constructor(e){super(),C(this,"container"),this.props=e}render(e){const t=wp((()=>{return e=this.props,Zu(P_,sh({color:"rgba(106, 168, 248)",dashed:!0},e),null);var e}));t.mount(e),this.container=e,this._register(Fo((()=>t.unmount())))}}var NT=Object.defineProperty,AT=Object.getOwnPropertyDescriptor,RT=(e,t)=>(n,i)=>t(n,i,e);let DT=(s=class extends jo{constructor(e,t){super(),C(this,"_idOfCurrentEditing"),C(this,"_widget"),C(this,"_textHoverWidget"),C(this,"_textHoverNodeId"),C(this,"events",new Bo),this._editor=e,this.contextKeyService=t,this._register(this.events),this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this.handleViewModeChange()}handleContextKeyChangeEvent(e){if(e.affectsSome(new Set([ym.editingMode.key]))){this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.EditText&&this._exitEditing()}e.affectsSome(new Set([ym.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===pm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const e=this._editor.view;this.events.add(e.onDbClick((e=>this.handleDbClick(e)))),this.events.add(e.onMouseEnter(this.onMouseEnter.bind(this))),this.events.add(e.onMouseLeave(this.onMouseLeave.bind(this))),this.events.add(e.onMouseDown(this.onMouseDown.bind(this)))}removeTextHoverWidget(){this._textHoverWidget&&(this._editor.view.removeContentWidget(this._textHoverWidget),this._textHoverWidget=null,this._textHoverNodeId=null)}isMouseInCurrentHoverText(e){const{target:t}=e,{element:n,type:i}=t,r=this.contextKeyService.getContextKeyValue(ym.editingMode.key),o=this._editor.view.getElementFingerPrint(n);return i===n_.Canvas&&r===hm.EditText&&o&&o===this._textHoverNodeId}onMouseDown(e){if(this.isMouseInCurrentHoverText(e))return this.removeTextHoverWidget(),this._exitEditing(),void this.handleDbClick(e);const{targetPath:t}=e.target,n=t[t.length-1];n&&n.fingerprint===this._idOfCurrentEditing||this._exitEditing()}onMouseLeave(e){this.isMouseInCurrentHoverText(e)&&this.removeTextHoverWidget()}onMouseEnter(e){const{target:t}=e,{element:n,type:i}=t,r=this.contextKeyService.getContextKeyValue(ym.editingMode.key),o=this._editor.view.getElementFingerPrint(n);if(o&&o!==this._idOfCurrentEditing&&r===hm.EditText){const e=this._editor.model.getNodeById(o);if(!e)return;if(to(e)){const e=this._editor.view.getElementRectById(o);this._textHoverWidget=new MT(e),this._textHoverNodeId=o,this._editor.view.addContentWidget(this._textHoverWidget,Ao.High)}}}handleDbClick(e){const{target:t}=e,{targetPath:n}=t;if(!l_.isChildOfCanvas(n))return;const i=n[n.length-1].fingerprint;to(this._editor.model.getNodeById(i))?this.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key)||(this.contextKeyService.setContext(ym.editingMode.key,hm.EditText),this._editor.recordSelectionChanges((()=>{this._editor.viewModel.setSelectionById(i)})),this._editor.viewModel.toggleVisibility(i,!1),this._idOfCurrentEditing=i,this.showTextEditor(e),this._editor.fork()):console.warn("非文字节点")}showTextEditor(e){const{target:t}=e,{targetPath:n}=t,i=n[n.length-1].fingerprint,r=new TT(i,this._editor);r.onUpdate(this._handleContentChange.bind(this)),r.onExit(this._exitEditing.bind(this)),this._editor.view.addContentWidget(r,Ao.High),this._widget=r}_handleContentChange(e){const{content:t}=e;this._editor.add((e=>{e.updateNodeById(this._idOfCurrentEditing,{content:t})}))}_exitEditing(){if(this._widget){this._editor.view.removeContentWidget(this._widget),this._widget=null,this._editor.commitAndMerge(),this.contextKeyService.getContextKeyValue(ym.editingMode.key)===hm.EditText&&(this._editor.viewModel.toggleVisibility(this._idOfCurrentEditing,!0),this.contextKeyService.setContext(ym.editingMode.key,hm.None)),this._idOfCurrentEditing=null;const e=this._editor.getRichTextEditor();e&&(e.destroy(),this._editor.storeRichTextEditor(null))}}},C(s,"ID","editor.contrib.textEdit"),s);DT=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?AT(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&NT(t,n,o),o})([RT(0,Sl),RT(1,Df)],DT),um(DT.ID,DT);const PT=Math.PI;function LT(e){const t=e*(180/PT);return t<0?t+360:t}function UT(e){return e*PT/180}class FT{constructor(e,t,n){C(this,"fromX"),C(this,"fromY"),C(this,"targetId"),C(this,"fromRect"),C(this,"scale"),C(this,"fromAngleOfTarget"),C(this,"currentAngleOfTarget"),C(this,"mx"),C(this,"fromAngleOfHandle"),C(this,"originX"),C(this,"originY"),C(this,"startTime"),C(this,"endTime",null),this.editor=n,this.targetId=t;const i=n.view.getViewport();this.scale=i.scale,this.fromX=e.event.posX/this.scale,this.fromY=e.event.posY/this.scale;const r=n.view.getElementRectById(t);if(this.fromRect=r,this.startTime=Date.now(),this.fromRect.mx){let e=this.fromRect.mx?Math.acos(this.fromRect.mx.a):0;this.fromRect.mx.b<0&&(e=-e),this.fromAngleOfTarget=e*(180/PT)}else this.fromAngleOfTarget=0;this.originY=(r.top+r.bottom)/2,this.originX=(r.left+r.right)/2,this.fromAngleOfHandle=LT(Math.atan2(this.fromY-this.originY,this.fromX-this.originX))}isChanged(){return!ri(this.currentAngleOfTarget)&&!bi(this.currentAngleOfTarget,this.fromAngleOfTarget)}shouldHandleDragAction(){return this.endTime&&this.endTime-this.startTime>100}moveTo(e){this.endTime=Date.now();const t=e.event.posX/this.scale,n=e.event.posY/this.scale,i=LT(Math.atan2(n-this.originY,t-this.originX))-this.fromAngleOfHandle;let r=Math.round(this.fromAngleOfTarget+i);r<3&&r>0&&(r=0),r>-3&&r<0&&(r=0),r>180&&(r=r%360-360),r<-180&&(r=r%360+360),this.currentAngleOfTarget=r;const o=UT(r),s={a:Math.cos(o),b:Math.sin(o),c:-Math.sin(o),d:Math.cos(o),tx:0,ty:0};return this.mx=s,s}}class BT extends jo{constructor(e,t,n,i,r){super(),C(this,"_cloned"),C(this,"_border"),C(this,"_queue"),C(this,"_handle"),this._target=e,this._originX=t,this._originY=n,this._fromRect=i,this._editor=r,this._register(this._queue=new X_)}render(e){this._cloned=this._target.cloneNode(!0);const t=this._cloned.querySelector("web-widget");t&&t.remove(),this._cloned.removeAttribute("data-hide");const n=this._fromRect.mx||y_.Identity;Object.assign(this._cloned.style,{position:"absolute","user-select":"none",left:Yi(this._fromRect.left),top:Yi(this._fromRect.top),width:Yi(this._fromRect.width),height:Yi(this._fromRect.height),margin:"0",transform:Hi(n)}),this._border=document.createElement("div"),Object.assign(this._border.style,{position:"absolute",border:"1px solid #c4bec4","user-select":"none",left:Yi(this._fromRect.left),top:Yi(this._fromRect.top),width:Yi(this._fromRect.width),height:Yi(this._fromRect.height),margin:"0","box-sizing":"border-box",transform:Hi(n)}),e.appendChild(this._cloned),e.appendChild(this._border);const i=this._editor.view.canvasHostDomNode.contentWindow;this._handle=this._register(new VT(e,this._originX,this._originY,i,this._editor.view.getViewport().scale))}update(e,t,n,i){this._queue.push((()=>{Object.assign(this._cloned.style,{transform:Hi(i)}),Object.assign(this._border.style,{transform:Hi(i)}),this._handle.update(e,t,n)}))}}const jT="http://www.w3.org/2000/svg";class VT extends jo{constructor(e,t,n,i,r){super(),C(this,"pathTo"),C(this,"arc"),C(this,"angleOriginX"),C(this,"angleOriginY"),this.view=i,this.scale=r;const o=document.createElementNS(jT,"svg"),s=document.createElementNS(jT,"g");o.appendChild(s);const a=document.createElementNS(jT,"path"),l=this.pathTo=document.createElementNS(jT,"path"),c=this.arc=document.createElementNS(jT,"path");s.appendChild(l),s.appendChild(a),s.appendChild(c);const d=e.ownerDocument.body,u=d.getBoundingClientRect();o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("viewBox",`0 0 ${u.width} ${u.height}`),o.setAttribute("width",u.width.toString()),o.setAttribute("height",u.height.toString());for(const f of[a,l,c])f.setAttribute("stroke","#c4bec4"),f.setAttribute("fill","transparent");const{scrollX:h,scrollY:p}=i;this.angleOriginX=t-h,this.angleOriginY=n-p,a.setAttribute("d",`M ${this.angleOriginX} ${this.angleOriginY} h 120`),Object.assign(o.style,{position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px","z-index":"100","user-select":"none","pointer-events":"none"}),d.appendChild(o),this._register(Fo((()=>o.remove())))}update(e,t,n){const i=UT(n),r=120*Math.cos(i),o=120*Math.sin(i);let s,a;this.pathTo.setAttribute("d",`M ${this.angleOriginX} ${this.angleOriginY} l ${r} ${o}`),n>0?(s=0,a=n):(s=n+360,a=0),this.arc.setAttribute("d",function(e,t,n,i,r){const o=zT(e,t,n,r),s=zT(e,t,n,i),a=r-i<=180?"0":"1";return["M",o.x,o.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}(this.angleOriginX,this.angleOriginY,80,s,a))}}function zT(e,t,n,i){const r=UT(i);return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}var KT=Object.defineProperty,WT=Object.getOwnPropertyDescriptor,HT=(e,t)=>(n,i)=>t(n,i,e);let $T=(a=class extends jo{constructor(e,t){super(),C(this,"_dragRequest",null),C(this,"_targetWidget",null),C(this,"_tipWidget",null),C(this,"events",new Bo),this._editor=e,this.contextKeyService=t,this._register(t.onDidChangeContext(this.handleContextKeyChangeEvent.bind(this))),this._register(this.events),this.handleViewModeChange()}handleContextKeyChangeEvent(e){e.affectsSome(new Set([ym.viewMode.key]))&&this.handleViewModeChange()}handleViewModeChange(){this._editor.getMode()===pm.Editing?this.registerListeners():this.events.clear()}registerListeners(){const e=this._editor.view;this.events.add(e.onMouseDragStart(this._onDragStart.bind(this))),this.events.add(e.onMouseDrag(this._onDrag.bind(this))),this.events.add(e.onMouseDrop(this._onDrop.bind(this))),this.events.add(e.onMouseDropCanceled(this._onDropCanceled.bind(this)))}_onDragStart(e){const{targetPath:t}=e.target,n=t[t.length-1];let i;l_.isDraggableWidget(t)&&"dragRotate"===n.fingerprint&&(i=n.detail),i&&!this.contextKeyService.getContextKeyValue(ym.isAnimationEditing.key)&&this.contextKeyService.getContextKeyValue(ym.editingMode.key)===hm.Focus&&(this._dragRequest=new FT(e,i,this._editor))}_onDrag(e){if(!this._dragRequest)return;const t=this._dragRequest.moveTo(e);this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.DragRotate&&this.contextKeyService.setContext(ym.editingMode.key,hm.DragRotate),this._dragRequest.shouldHandleDragAction()&&(this._showHints(),this._targetWidget.update(e.event.posX,e.event.posY,this._dragRequest.currentAngleOfTarget,t),this._tipWidget.update(e.event.posX,e.event.posY,`${this._dragRequest.currentAngleOfTarget}°`))}_onDrop(e){if(this._dragRequest){if(this.contextKeyService.getContextKeyValue(ym.editingMode.key)!==hm.DragRotate)throw new Error("500");{const e=this._dragRequest.targetId;this._dragRequest.shouldHandleDragAction()&&this._dragRequest.isChanged()&&this._commit(),this._editor.viewModel.toggleVisibility(e,!0),this.contextKeyService.setContext(ym.editingMode.key,hm.Focus)}this._hideHints(),this._dragRequest=null}}_onDropCanceled(){if(this._dragRequest){if(this.contextKeyService.getContextKeyValue(ym.editingMode.key)===hm.DragRotate){this.contextKeyService.setContext(ym.editingMode.key,hm.None);const e=this._dragRequest.targetId;this._editor.viewModel.toggleVisibility(e,!0),this._editor.recordSelectionChanges((()=>{this._editor.viewModel.setSelectionById(e)}))}this._dragRequest=null}}_commit(){const e=this._editor.view.getViewport();this._editor.transform((t=>{var n;t.updateStyle(this._dragRequest.targetId,{transform:(n=this._dragRequest.currentAngleOfTarget,`rotateZ(${n}deg)`)},e.logicWidth)}))}_showHints(){const e=this._editor.view;if(!this._targetWidget){const{targetId:t,fromRect:n,originX:i,originY:r}=this._dragRequest,o=e.getElementById(t);this._targetWidget=new BT(o,i,r,n,this._editor),e.addContentWidget(this._targetWidget,Ao.High,!1),this._editor.viewModel.toggleVisibility(t,!1),this._editor.view.updateOutline((e=>{e.length=0}))}this._tipWidget||(this._tipWidget=new rv(this._editor,this._editor.view.canvasHostDomNode.contentWindow),e.addContentWidget(this._tipWidget,Ao.High,!1))}_hideHints(){this._targetWidget&&(this._editor.view.removeContentWidget(this._targetWidget),this._targetWidget=null),this._tipWidget&&(this._editor.view.removeContentWidget(this._tipWidget),this._tipWidget=null)}},C(a,"ID","editor.contrib.rotate"),a);$T=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?WT(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&KT(t,n,o),o})([HT(0,Sl),HT(1,Df)],$T),um($T.ID,$T);dm(new class extends am{constructor(){super({id:"deleteLeft",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.isAnimationEditing.negate(),ym.editingMode.isEqualTo(hm.Focus),ym.viewMode.isEqualTo(pm.Editing)),primary:Bf.Delete,secondary:[Bf.Backspace]}})}async runEditorCommand(e,t,n){const{model:i,viewModel:r,view:o}=t,s=r.selection.slice().filter((e=>{const t=i.getNodeById(e);return!(lo(t)||ao(t))}));if(s.length<=0)return;const a=o.getViewport(),l=function(e){const t=[];e.forEach((e=>{const n=i.getNodeById(e);if(co(n)){!("fixed"===i.getMatchedStyle(n.id,a.logicWidth).getAttr("position"))&&t.push({parent:n.from,node:n.id})}}));const n=i.getValue().nodes.filter((e=>co(e))).length;if(t.length>=n)throw new Error("400");return t}(s);t.transform((e=>{if(l.length>0){const[t]=i.queryNodes((e=>ao(e))),{orders:n}=i.getChildrenGridAreaInfo(t.id);l.sort(((e,t)=>n.findIndex((t=>t.id===e.node))>n.findIndex((e=>e.id===t.node))?-1:1)).forEach((t=>{e.removeGridNode(t.parent,t.node)}))}e.removeNodes(s),r.initSelection()}));e.get(Df).setContext(ym.editingMode.key,hm.None)}});const qT=!!navigator.clipboard;class YT{constructor(){C(this,"clipboard",navigator.clipboard)}async set(e){var t;e&&await(null==(t=this.clipboard)?void 0:t.writeText(e))}async get(){var e;let t="";return t=await(null==(e=this.clipboard)?void 0:e.readText()),t}async getData(){var e;let t=null;return t=await(null==(e=this.clipboard)?void 0:e.read()),t}async clear(){var e;await(null==(e=this.clipboard)?void 0:e.writeText(""))}}const GT=new YT;async function XT(e){try{if(!qT)throw new Error("Clipboard API is not supported");await GT.set(e)}catch(t){!function(e){let t="";const n=function(e){const t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top=`${i}px`,n.setAttribute("readonly",""),n.value=e,n}(e);document.body.appendChild(n),t=function(e){let t;if("SELECT"===e.nodeName){const n=e;n.focus(),t=n.value}else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){const n=e,i=n.hasAttribute("readonly");i||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),i||n.removeAttribute("readonly"),t=n.value}else{e.hasAttribute("contenteditable")&&e.focus();const n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),null==n||n.removeAllRanges(),null==n||n.addRange(i),t=(null==n?void 0:n.toString())||""}return t}(n),document.execCommand("copy"),n.remove()}(e)}}const JT=e=>e&&"object"==typeof e&&!!e.roots&&!!e.nodes&&!!e.styles&&!!e.links,QT=(e,t)=>{const{nodes:n}=t,i=n.find((t=>t.id===e));if(!i)throw new Error("404");const r=[i];let o=[e];do{const e=[];n.forEach((t=>{o.includes(t.from)&&(e.push(t.id),r.push(t))})),o=e}while(o.length>0);return li(r)};var ZT,eM,tM,nM,iM,rM;(eM=ZT||(ZT={}))[eM.Root=0]="Root",eM[eM.Page=1]="Page",eM[eM.Container=2]="Container",eM[eM.Section=3]="Section",eM[eM.Normal=4]="Normal",(nM=tM||(tM={}))[nM.Normal=0]="Normal",nM[nM.AutoLayout=1]="AutoLayout",nM[nM.Other=2]="Other",(rM=iM||(iM={}))[rM.targePage=0]="targePage",rM[rM.targetSections=1]="targetSections",rM[rM.targetSelf=2]="targetSelf",rM[rM.targetContainers=3]="targetContainers";class oM{constructor(e,t,n,i){C(this,"_nodeMap",new Map),C(this,"_targetMap",new Map),C(this,"_cloneIdMap",new Map),C(this,"_appendAllNodes",[]),C(this,"_appendRootNodes",[]),C(this,"_lastSectionNode"),C(this,"_allTargetIsContainer",!1),C(this,"_allTargetFromSingle"),C(this,"_pageGridInfo"),this.fragment=e,this.targetIds=t,this.editor=n,this.i18n=i}do(){return this.graphify(),this.doPaste(),this._appendRootNodes}doPaste(){const e=this.checkPasteType(),{roots:t,nodes:n}=this.fragment,i=[],r=[],o=[];if(t.forEach((e=>{const{isFixed:t,nodeType:s}=this._nodeMap.get(e);if(t)i.push(e);else if(3===s)r.push(e);else if(0===s){let e;n.forEach((t=>{ao(t)&&(e=t),co(t)&&t.from===(null==e?void 0:e.id)&&r.push(t.id)}))}else o.push(e)})),this.pasteFixedNodes(i),this.pasteSectionNodes(r),o.length<=0)return this._appendRootNodes;if(2===e)this.pasteToSelf(t);else if(0===e){const e=this.getCenterPosSection();this.pasteToContainers(o,[e.id])}else if(3===e){let e=[];this._allTargetIsContainer?e=this.targetIds:this._allTargetFromSingle?e=[this._allTargetFromSingle]:Io(),e.length>0&&this.pasteToContainers(o,e)}this.handleAnimations()}getMatchedStyleFromFragmentById(e){const{styles:t}=this.fragment,{model:n,view:i}=this.editor,r=i.getViewport(),{breakpoints:o}=n.getValue();return new qr(Il(e,t,o,r.logicWidth))}graphify(){const{roots:e,nodes:t}=this.fragment,{model:n,view:i}=this.editor,r=i.getViewport(),[o]=n.queryNodes((e=>ao(e)));if(!o)throw new Error("404");if(this._pageGridInfo=n.getChildrenGridAreaInfo(null==o?void 0:o.id),e.length<=0||this.targetIds.length<=0)throw new Error("500");e.forEach((e=>{const n=t.find((t=>t.id===e)),i=this.getMatchedStyleFromFragmentById(e),{nodeType:r,styleType:o,isFixed:s}=sM(n,i.attrs);this._nodeMap.set(e,{id:e,order:n.order,from:n.from,nodeType:r,styleType:o,isFixed:s})})),this.targetIds.forEach((e=>{const t=n.getNodeById(e),i=n.getMatchedStyle(e,null==r?void 0:r.logicWidth),{nodeType:o,styleType:s,isFixed:a}=sM(t,i.attrs);this._targetMap.set(e,{id:e,order:t.order,from:t.from,nodeType:o,styleType:s,isFixed:a})}))}checkPasteType(){const{roots:e}=this.fragment,t=(e,t)=>e>t?-1:1;if(Dr(e.slice(0).sort(t),this.targetIds.slice(0).sort(t)))return 2;const{model:n}=this.editor,i=[],r=[],o=[],s=this.targetIds.length;let a;const l=[];if(this.targetIds.forEach((e=>{const t=this._targetMap.get(e),{nodeType:s,isFixed:c,from:d}=t;if(void 0===a?a=d:d!==a&&(a=null),3===s?c?i.push(e):r.push(e):2===s?i.push(e):1===s&&o.push(e),!c&&1!==s)if(3===s)l.push(e);else{const t=n.getAncestorNodesOfId(e).find((e=>co(e)));t?l.push(t.id):Io()}})),this._allTargetFromSingle=a,this._allTargetIsContainer=r.length+i.length===s,l.length>0){const e=l.sort(((e,t)=>{const n=this.findSectionIndex(e);return this.findSectionIndex(t)>n?1:-1}));this._lastSectionNode=e[0]}return o.length>0?0:this._allTargetIsContainer||this._allTargetFromSingle?3:0}findSectionIndex(e){const{orders:t}=this._pageGridInfo;return t.findIndex((t=>t.id===e))}generateComId(){return`comp-${ni()}`}handleAnimations(){const{model:e}=this.editor,t=e.getValue(),{animations:n,nodes:i}=t,r=new Set(i.map((e=>e.id))),o=Array.from(this._cloneIdMap.entries()).reduce(((e,[t,n])=>(e.set(n,t),e)),new Map),s=[];n.forEach((e=>{const t=e.effects.targetId;if(!r.has(t)){if(!o.has(t))return;e.effects.targetId=o.get(t)}s.push(e)})),t.animations=s}cloneNode(e,t){const n=((e,t)=>{const{styles:n,links:i,triggers:r=[],animations:o=[]}=t,s=QT(e,t),a=s.map((e=>e.id)),l=n.filter((e=>a.includes(e.targetId))),c=i.filter((e=>a.includes(e.targetId))),d=r.filter((e=>a.includes(e.targetId))),u=d.map((e=>e.id)),h=o.filter((e=>u.includes(e.triggerId))),[p]=s;return li({nodes:s,node:p,styles:l,links:c,triggers:d,animations:h})})(e,this.fragment),i=new Map,{node:r,links:o,styles:s,nodes:a,triggers:l=[],animations:c=[]}=n;a.forEach((e=>{const t=this.generateComId();this._cloneIdMap.set(t,e.id),i.set(e.id,t);const n=e.from;e.from=i.get(n),e.id=t})),r.id=i.get(r.id),s.forEach((e=>{e.id=ni();const t=i.get(e.targetId);e.targetId=t})),o.forEach((e=>{e.id=ni();const t=i.get(e.targetId);e.targetId=t}));const d=new Map;return l.forEach((e=>{const t=e.id;e.id=ni(),d.set(t,e.id);const n=i.get(e.targetId);e.targetId=n})),c.forEach((e=>{var t;e.id=ni();const n=d.get(e.triggerId);e.triggerId=n;const r=e.effects.targetId;i.get(r)&&(e.effects.targetId=i.get(r)),(null==(t=e.timeline)?void 0:t.scrollOffsets)&&e.timeline.scrollOffsets.forEach((e=>{oi(e)||(e.target=i.get(e.target))}))})),t&&(r.from=t),li({node:r,nodes:a,links:o,styles:s,animations:c,triggers:l})}createCloneNodesLabel(e){const{model:t}=this.editor,{nodes:n}=t.getValue();e.forEach(((t,i)=>{const{label:r,componentType:o,subType:s}=t.meta;if(!r||((e,t,n,i)=>{const r=e.t(n||t);return new RegExp(`^${r} (\\d+)?$`).test(i)})(this.i18n,o,s,r)){const r=[...n,...e.slice(0,i+1)],o=Os(this.i18n,r,t.meta.componentType,t.meta.subType);t.meta.label=o}}))}appendFragmentNode(e,t){const{model:n}=this.editor,i=n.getValue(),{nodes:r,styles:o,links:s,node:a,animations:l=[],triggers:c=[]}=e;return this.createCloneNodesLabel(r),r.find((e=>e.id===a.id)).from=t,i.nodes.push(...r),i.styles.push(...o),i.links.push(...s),i.animations.push(...l),i.triggers.push(...c),this._appendAllNodes.push(...r),this._appendRootNodes.push(a),r}pasteFixedNodes(e){var t,n;if(e.length<=0)return;const{model:i}=this.editor,r=e.map((e=>this.cloneNode(e))).sort(((e,t)=>Es(e.node.order,t.node.order))),o=e.sort(((e,t)=>Es(this._nodeMap.get(t).order,this._nodeMap.get(e).order))),[s]=o,a=null!=(n=null==(t=i.getNodeById(s)&&i.getNextSiblingNodeOfId(s))?void 0:t.id)?n:null,l="root";r.forEach((e=>{const[t]=this.appendFragmentNode(e,l);a&&i.reparentNode(t.id,l,a)}))}pasteSectionNodes(e){var t,n,i,r;if(e.length<=0)return;const{model:o}=this.editor,s=e.map((e=>this.cloneNode(e))).sort(((e,t)=>{const n=this._cloneIdMap.get(e.node.id),i=this._cloneIdMap.get(t.node.id),r=this.getMatchedStyleFromFragmentById(n),o=this.getMatchedStyleFromFragmentById(i),{rowStart:s,columnStart:a}=Cr(r.attrs),{rowStart:l,columnStart:c}=Cr(o.attrs);return l>s||a>c?-1:1}));let a=this._lastSectionNode;if(!this._lastSectionNode){const e=s[s.length-1];a=this._cloneIdMap.get(e.node.id)}if(!a)throw new Error("404");const[l]=o.queryNodes(ao),c=l.id,{rowsTemplate:d}=this._pageGridInfo,u=e.map((()=>"auto"));o.updateAllBpStyles(c,{"grid-template-rows":tr([...d,...u])},!1);const h=null!=(n=o.getNodeById(a)&&(null==(t=o.getNextSiblingNodeOfId(a))?void 0:t.id))?n:null,p=this.findSectionIndex(a),f=null!=(r=null==(i=-1!==p&&this._pageGridInfo.orders[p+1])?void 0:i.id)?r:null;s.forEach((e=>{const[t]=this.appendFragmentNode(e,c);o.reparentNode(t.id,c,h),o.reorderGridNode(c,f,t.id)}))}pasteToContainers(e,t){const{model:n}=this.editor;t.forEach((t=>{var i,r;const o=e.map((e=>this.cloneNode(e))).sort(((e,t)=>Es(e.node.order,t.node.order))),s=this.targetIds.map((e=>n.getNodeById(e))).filter((e=>e.from===t)).sort(((e,t)=>Es(e.order,t.order)));let a=null;if(s.length>0){const e=s[s.length-1],t=n.getNodeById(e.id);a=null!=(r=null==(i=t&&n.getNextSiblingNodeOfId(e.id))?void 0:i.id)?r:null}o.forEach((e=>{const[i]=this.appendFragmentNode(e,t);n.reparentNode(i.id,t,a),this.checkChildStyleIsValidInContainer(i.id,t)}))}))}pasteToSelf(e){const{model:t}=this.editor;e.map((e=>this.cloneNode(e))).sort(((e,t)=>Es(e.node.order,t.node.order))).forEach((e=>{var n,i;const{node:r}=e,o=this._cloneIdMap.get(r.id),{from:s}=this._nodeMap.get(o),a=null!=(i=null==(n=t.getNextSiblingNodeOfId(o))?void 0:n.id)?i:null,[l]=this.appendFragmentNode(e,s);t.reparentNode(l.id,s,a),this.checkChildStyleIsValidInContainer(l.id,s)}))}checkChildStyleIsValidInContainer(e,t){const{view:n,model:i}=this.editor,r=n.getViewport().logicWidth,o=i.getMatchedStyle(e,r),s=i.getMatchedStyle(t,r);if(!((e,t)=>{if(yr(e))return!0;const n=Cr(e);if(vr(t))return"grid"!==e.display&&!n;if("grid"===t.display)return!!Cr(e);return console.warn("非常规样式",e,t),!0})(o.attrs,s.attrs)){const t=(e=>vr(e)?w({},wr):"grid"===e.display?br:{})(s.attrs);i.updateAllBpStyles(e,t,!1)}}getCenterPosSection(){const{view:e,model:t}=this.editor,n=e.getViewCanvasCenterPos();let i=e.getNodesFromVector(n).find((e=>co(e)));if(!i){const e=t.queryNodes((e=>co(e))).sort(((e,t)=>{var n,i;return Es(null!=(n=null==e?void 0:e.order)?n:"0",null!=(i=null==t?void 0:t.order)?i:"0")}));if(e.length<=0)throw new Error("404");[i]=e.slice(-1)}return i}}function sM(e,t){let n=4,i=0;if(lo(e)){n=0,i=2;return{nodeType:n,styleType:i,isFixed:!1}}const r=yr(t);return ao(e)?n=1:co(e)?n=3:uo(e)&&(n=2),i=vr(t)?1:"grid"===t.display?0:2,{nodeType:n,styleType:i,isFixed:r}}const aM=e=>{const t=e.length;if(t<=0)return null;if(t<=1)return e[0];const n=e.findIndex((e=>(pi(1===e.roots.length),"root"===e.roots[0])));return-1===n?e.reduce(((e,t)=>{const{nodes:n,styles:i,roots:r,links:o,animations:s=[],triggers:a=[]}=t;return e.nodes.push(...n),e.styles.push(...i),e.links.push(...o),e.animations.push(...s),e.animations||(e.animations=[]),e.triggers||(e.triggers=[]),e.triggers.push(...a),e.roots.push(...r),e}),e[0]):e.reduce(((e,t,i)=>{if(i===n)return e;const r=e.nodes.find(ao),o=e.styles.find((e=>e.targetId===r.id)),s=e.nodes.filter(co);let a=s.length,{nodes:l,styles:c,roots:d,links:u,triggers:h=[],animations:p=[]}=t;if(l=l.filter((e=>{let t=!0;if((lo(e)||ao(e))&&(t=!1),t)if(co(e)){Reflect.set(e,"from",r.id);c.filter((t=>t.targetId===e.id)).forEach((e=>{if(Cr(e)){const t=kr({rowStart:a+1,rowEnd:a+2,columnStart:1,columnEnd:2});Object.assign(e,t)}})),a++}else d.includes(e.id)&&Reflect.set(e,"from",s[0].id);else u=u.filter((t=>t.targetId!==e.id)),c=c.filter((t=>t.targetId!==e.id));return t})),a!==s.length){const e=new Array(a).fill("auto"),t=tr(e);Reflect.set(o,"grid-template-rows",t)}return e.animations||(e.animations=[]),e.triggers||(e.triggers=[]),e.nodes.push(...l),e.links.push(...u),e.styles.push(...c),e.animations.push(...p),e.triggers.push(...h),e}),e[n])};function lM(e,t){return t.slice().filter((t=>{const n=e.getNodeById(t);return n&&!ao(n)&&!lo(n)}))}dm(new class extends am{constructor(){super({id:"copy",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.hasAnySelection,ym.isAnimationEditing.negate(),ym.editingMode.isEqualTo(hm.Focus),ym.viewMode.isEqualTo(pm.Editing)),primary:Gf.CtrlCmd|Bf.KEY_C}})}async runEditorCommand(e,t,n){var i;const{model:r,view:o,viewModel:s}=t,a=lM(r,s.selection);if(a.length<=0)return;const l=o.getViewport(),c=r.cloneFragment(a,null!=(i=null==l?void 0:l.logicWidth)?i:null);r.setClonedFragment(c),XT(JSON.stringify(c))}}),dm(new class extends am{constructor(){super({id:"^paste",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.hasAnySelection,ym.isAnimationEditing.negate(),ym.editingMode.isEqualTo(hm.Focus),ym.viewMode.isEqualTo(pm.Editing)),primary:Gf.CtrlCmd|Bf.KEY_V}}),C(this,"_iframePasteEvent"),C(this,"_isClipboardApiValid",!1),C(this,"_isPasteEventHandled",!1),qT&&GT.get().then((()=>{this._isClipboardApiValid=!0})).catch((e=>{this._isClipboardApiValid=!1})),this._register(Ng(document,fg,this.onPaste.bind(this))),this._register(rg.registerCommand("pasteFragment",((e,t,n,i)=>{if(!i)return void console.warn("Paste No Editor");const r=e.get(Ol),o=new oM(t,n,i,r),{viewModel:s}=i,a=o.do();s.clearSelection(),a.forEach((e=>{s.appendSelectionById(e.id)}))})))}async runEditorCommand(e,t,n){this._iframePasteEvent||(this._iframePasteEvent=this._register(Ng(t.view.canvasHostDomNode.contentDocument,fg,this.onPaste.bind(this))));try{if(!this._isClipboardApiValid)throw new Error("Clipboard API is not supported");const e=await GT.getData();if(!this._isPasteEventHandled&&e&&e.length>0){const[t]=e,[n]=t.types;n&&km.emit(n,{type:n,data:t})}this._isPasteEventHandled=!1}catch(i){console.warn("Commad Paste Error. ",i),this._isPasteEventHandled=!1}}onPaste(e){const{target:t,clipboardData:n}=e;if(!n)return;if(t){const e=["INPUT","TEXTAREA","TEXTFIELD"],n=(t.tagName||"").toUpperCase();if(e.some((e=>n.includes(e)&&document.activeElement===t))||t.isContentEditable)return}e.preventDefault();const{files:i,items:r}=n;let o,s;i.length>0?([o]=i,this._isPasteEventHandled=!0):this._isClipboardApiValid||r.length>0&&([o]=r),o&&(s=o.type,km.emit(s,{type:s,data:o}))}}),dm(new class extends am{constructor(){super({id:"cut",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.hasAnySelection,ym.isAnimationEditing.negate(),ym.editingMode.isEqualTo(hm.Focus),ym.viewMode.isEqualTo(pm.Editing)),primary:Gf.CtrlCmd|Bf.KEY_X}})}async runEditorCommand(e,t,n){var i;const{model:r,viewModel:o,view:s}=t,a=lM(r,o.selection);if(a.length<=0)return;const l=s.getViewport(),c=r.cloneFragment(a,null!=(i=null==l?void 0:l.logicWidth)?i:null);t.transform((e=>{r.removeNodes(a),o.initSelection()})),r.setClonedFragment(c),XT(JSON.stringify(c))}}),dm(new class extends am{constructor(){super({id:"duplicate",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.hasAnySelection,ym.isAnimationEditing.negate(),ym.editingMode.isEqualTo(hm.Focus),ym.viewMode.isEqualTo(pm.Editing)),primary:Gf.CtrlCmd|Bf.KEY_D}})}async runEditorCommand(e,t,n){var i;const{viewModel:r,model:o,view:s}=t,a=lM(o,r.selection);if(a.length<=0)return;const l=s.getViewport(),c=o.cloneFragment(a,null!=(i=null==l?void 0:l.logicWidth)?i:null),d=e.get(eg);t.transform((()=>{d.executeCommand("pasteFragment",c,a,t)}))}});const cM={type:"container",title:"容器",icon:"Container",style:{width:"30%",height:"auto","min-height":"280px",display:"grid","grid-template-rows":tr(["1fr"]),"grid-template-columns":tr(["1fr"]),"margin-left":"0","margin-right":"0","margin-bottom":"0","margin-top":"0"},props:{},meta:{tagName:"DIV",wrapper:!1,type:"Container",componentType:Hr.Container}};dm(new class extends am{constructor(){super({id:"wrap",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.isAnimationEditing.negate(),hf.or(ym.wrapMode.isEqualTo(gm.WrapAble),ym.wrapMode.isEqualTo(gm.Both)),ym.viewMode.isEqualTo(pm.Editing)),primary:Gf.CtrlCmd|Bf.KEY_G}})}async runEditorCommand(e,t,n){const i=e.get(Df).getContextKeyValue(ym.wrapMode.key);i!==gm.WrapAble&&i!==gm.Both||this.createContainerNode(t)}createContainerNode(e){const{view:t,model:n,viewModel:i}=e,r=i.selection.slice().sort(((e,t)=>Es(n.getNodeById(e).order,n.getNodeById(t).order))),o=t.getGroupRectByIds(r),s=n.getNodeById(r[0]).from,a=n.getNodeById(s);if(!a)throw new Error("404");const{style:l,meta:c,props:d}=li(cM),u=t.createStyleFromHitPosition(o,a,l);u.width=`${o.width}px`,u.height=`${o.height}px`,delete l["min-height"],Object.assign(l,u);const h={ref:s,direction:Cs.inward},p=t.getViewport().logicWidth;let f;i.clearSelection();const g=Symbol("wrapFork");e.fork(g),e.add((()=>{f=n.addNode(h,d,c),n.updateStyle(f.id,l)})),t.nextTick((()=>{const o=r.map((e=>{const i=t.getElementRectById(e),r=n.getMatchedStyle(e,p).attrs;return t.createStyleFromHitPosition(i,f,r)}));e.add((()=>{f=n.addNode(h,d,c),n.updateStyle(f.id,l),function(e,t){r.forEach(((i,r)=>{const o=t[r];n.reparentNode(i,e.id),n.updateAllBpStyles(i,o)}))}(f,o),i.setSelectionById(f.id)})),e.commitAndMerge(g)}),(()=>!(!f||!t.getComputedStyleOfId(f.id))))}}),dm(new class extends am{constructor(){super({id:"unwrap",kbOpts:{weight:og.EditorCore,kbExpr:hf.and(ym.isAnimationEditing.negate(),hf.or(ym.wrapMode.isEqualTo(gm.UnwrapAble),ym.wrapMode.isEqualTo(gm.Both)),ym.viewMode.isEqualTo(pm.Editing)),primary:Gf.CtrlCmd|Gf.Shift|Bf.KEY_G}})}async runEditorCommand(e,t,n){const i=e.get(Df);i.setContext(ym.editingMode.key,hm.None);const r=i.getContextKeyValue(ym.wrapMode.key);r!==gm.UnwrapAble&&r!==gm.Both||this.removeContainerNode(t)}removeContainerNode(e){const{view:t,model:n,viewModel:i}=e,r=i.selection.slice(0),[o]=r,s=n.getNodeById(o),a=null==s?void 0:s.from;if(!a)throw new Error("404");const l=n.getNodeById(a);if(!l)throw new Error("404");const c=n.getChildrenNodesOfId(s.id),d=t.getViewport().logicWidth;e.transform((e=>{i.clearSelection(),c.forEach((i=>{const r=t.getElementRectById(i.id),o=n.getMatchedStyle(i.id,d).attrs,s=t.createStyleFromHitPosition(r,l,o);e.reparentNode(i.id,l.id),e.updateStyle(i.id,s,d)})),e.removeNode({ref:s.id}),i.initSelection()}))}});var dM=Object.defineProperty,uM=Object.getOwnPropertyDescriptor,hM=(e,t)=>(n,i)=>t(n,i,e);class pM extends am{constructor(e){super({id:"zoomIn",kbOpts:{weight:og.EditorCore,primary:Gf.CtrlCmd|Bf.US_EQUAL}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}class fM extends am{constructor(e){super({id:"zoomOut",kbOpts:{weight:og.EditorCore,primary:Gf.CtrlCmd|Bf.US_MINUS}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}class gM extends am{constructor(e){super({id:"zoomReset",kbOpts:{weight:og.EditorCore,primary:Gf.CtrlCmd|Bf.KEY_0}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}class mM extends am{constructor(e){super({id:"resetViewport",kbOpts:{weight:og.EditorCore,primary:Gf.CtrlCmd|Gf.Shift|Bf.KEY_0}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}let _M=(C(l=class extends jo{constructor(e,t,n){super(),this._editor=e,this.contextKeyService_=t,this.configurationService=n,this.registerCommand();const i=e.view.canvasHostDomNode.contentWindow;this._register(Ng(i,xg,(e=>this.handleScroll(e)),{passive:!1})),this._register(Ng(window,xg,(e=>this.handleScroll(e)),{passive:!1}))}registerCommand(){this._register(dm(new pM((()=>this.stepZoom(.1))))),this._register(dm(new fM((()=>this.stepZoom(-.1))))),this._register(dm(new gM((()=>this.zoomReset())))),this._register(dm(new mM((()=>this.resetViewport())))),this._register(rg.registerCommand("zoom",((e,t)=>{Number.isFinite(t)&&this.doZoom(t)})))}handleScroll(e){if(this._editor.getMode()!==pm.Preview&&!document.hidden&&document.hasFocus()&&(e.ctrlKey||e.metaKey)){e.preventDefault(),e.stopPropagation();const{deltaY:t,x:n,y:i}=e;let r=Math.abs(t)/500;r=Math.min(.05,r),this.smoothZoom(t>0?-r:r)}}smoothZoom(e){const t=this._editor.view.getViewport(),{scale:n}=t,i=n+e,[r,o]=this.getZoomLimit(),s=xi(r,i,o);this.doZoom(s)}zoomReset(){const e=this._editor.view,t=e.getViewport().logicWidth,n=e.boundaryDomNode.getBoundingClientRect(),i=getComputedStyle(e.boundaryDomNode),r=parseFloat(i.paddingTop),o=parseFloat(i.paddingBottom),s=parseFloat(i.paddingRight),a=parseFloat(i.paddingLeft),l=w({},y_.Identity),c=n.height-r-o,d=n.width-a-s;t>d?e.boundaryDomNode.scrollLeft=(t-d)/2:l.tx=(d-t)/2,e.setViewport(t,c,l)}resetViewport(){const e=this._editor.view,t=this.configurationService.getValue("zoom.initLogicWidth"),n=e.boundaryDomNode.getBoundingClientRect(),i=getComputedStyle(e.boundaryDomNode),r=parseFloat(i.paddingTop),o=parseFloat(i.paddingBottom),s=parseFloat(i.paddingRight),a=parseFloat(i.paddingLeft),l=w({},y_.Identity),c=n.height-r-o,d=n.width-a-s;t>d?e.boundaryDomNode.scrollLeft=(t-d)/2:l.tx=(d-t)/2,e.setViewport(t,c,l)}getZoomLimit(){return[this.configurationService.getValue("zoom.minZoomLevel"),this.configurationService.getValue("zoom.maxZoomLevel")]}stepZoom(e){const t=this._editor.view.getViewport(),{scale:n}=t,[i,r]=this.getZoomLimit();let o=Math.round(10*(n+e))/10;o=xi(i,o,r),this.doZoom(o)}doZoom(e){const t=this._editor.view,n=t.getViewport(),i=t.boundaryDomNode.getBoundingClientRect(),r=getComputedStyle(t.boundaryDomNode),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),a=parseFloat(r.paddingRight),l=parseFloat(r.paddingLeft),c=w({},n.mx);c.a=e,c.d=e;const d=(i.height-o-s)/e,u=n.logicWidth*e,h=i.width-l-a;if(console.log("checkwidth",h,u),u>h){const e=(u-n.logicWidth)/2;c.tx=e;const i=(u-h)/2;t.boundaryDomNode.scrollLeft=i}else c.tx=(h-n.logicWidth)/2;t.setViewport(n.logicWidth,d,c)}},"ID","editor.contrib.zoom"),l);_M=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?uM(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&dM(t,n,o),o})([hM(0,Sl),hM(1,Df),hM(2,zm)],_M),um(_M.ID,_M);var vM=Object.defineProperty,yM=Object.getOwnPropertyDescriptor,wM=(e,t)=>(n,i)=>t(n,i,e);class bM{constructor(e,t,n,i,r){C(this,"fromX"),C(this,"fromViewport"),C(this,"posX"),C(this,"posY"),C(this,"_timer",0),C(this,"toX"),this._editor=e,this.dir=n,this.minResizeLevel=i,this.maxResizeLevel=r,this.fromX=t.event.screenX;const o=e.view.getViewport();this.fromViewport=li(o)}moveTo(e){const{screenX:t,posX:n,posY:i}=e.event;this.posX=n,this.posY=i,t!==this.toX&&(this.toX=t,this.commit())}get delta(){return ri(this.toX)?0:this.toX-this.fromX}commit(){if(0===this.delta)return;const e=this._editor.view,t=e.getViewport(),n=t.logicWidth,i=this.delta*this.dir/t.scale,r=w({},this.fromViewport.mx);let o=this.fromViewport.logicWidth-2*i,s=o*t.scale;const a=e.boundaryDomNode.getBoundingClientRect(),l=getComputedStyle(e.boundaryDomNode),c=parseFloat(l.paddingRight),d=parseFloat(l.paddingLeft),u=a.width-d-c;if(Number.isFinite(this.maxResizeLevel)&&o>this.maxResizeLevel){if(n===this.maxResizeLevel)return;o=this.maxResizeLevel}if(Number.isFinite(this.minResizeLevel)&&o<this.minResizeLevel){if(n===this.minResizeLevel)return;o=this.minResizeLevel}s>u&&(s=u,o=s/t.scale,o>this.maxResizeLevel&&(o=this.maxResizeLevel));const h=(u-o)/2;r.tx=Math.max(h,0),h<0&&(e.boundaryDomNode.scrollLeft=-h),e.setViewport(o,this.fromViewport.logicHeight,r)}addAutoIncreatTimer(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout((()=>{this._timer=0,this.commit()}),50)}removeAutoIncreatTimer(){this._timer&&clearTimeout(this._timer),this._timer=0}}let xM=(c=class extends jo{constructor(e,t,n){super(),C(this,"_tipWidget"),C(this,"dragRequest"),this._editor=e,this.configurationService=t,this.contextKeyService=n;const i=e.view;this._register(i.onMouseDragStart(this.handleDragStart.bind(this))),this._register(i.onMouseDrag(this.handleDrag.bind(this))),this._register(i.onMouseDrop(this.handleDrop.bind(this))),this._register(i.onMouseDropCanceled(this.handleDropCanceled.bind(this))),this._register(rg.registerCommand("resizeCanvasWidth",((e,t)=>{Number.isFinite(t)&&this.setWidth(t)}))),this._register(rg.registerCommand("fitCanvas",(e=>{this.fit()})))}showDragTargets(){this._tipWidget||(this._tipWidget=new rv(this._editor,this._editor.view.canvasHostDomNode.contentWindow),this._editor.view.addOuterWidget(this._tipWidget,Ao.High,!1))}hideDragTargets(){this._tipWidget&&(this._editor.view.removeOuterWidget(this._tipWidget),this._tipWidget=null)}handleDragStart(e){const{targetPath:t}=e.target,n=t[t.length-1];if(!n)return;if("canvasResize"!==n.fingerprint)return;const[i,r]=this.getResizeLimit();this.dragRequest=new bM(this._editor,e,"left"===n.detail?1:-1,i,r),this.contextKeyService.setContext(ym.editingMode.key,hm.None),this._editor.viewModel.clearSelection(),this.showDragTargets()}handleDrag(e){if(this.dragRequest&&(this.dragRequest.moveTo(e),this._tipWidget)){const{logicWidth:e,logicHeight:t}=this._editor.view.getViewport(),n=`${Math.ceil(e)} × ${Math.ceil(t)}`,i=this.getBpIcon(e),{posX:r,posY:o}=this.dragRequest;ri(r)||ri(o)||this._tipWidget.update(r,o,`${i} ${n}`)}}getBpIcon(e){const t="display:block;width:16px;height:16px;margin-right:4px;fill:white;";let n=`<i class="icon" style="${t}"><svg width="16" height="16" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M5 2.25C2.92893 2.25 1.25 3.92893 1.25 6V15C1.25 17.0711 2.92893 18.75 5 18.75H19C21.0711 18.75 22.75 17.0711 22.75 15V6C22.75 3.92893 21.0711 2.25 19 2.25H5ZM2.75 6C2.75 4.75736 3.75736 3.75 5 3.75H19C20.2426 3.75 21.25 4.75736 21.25 6V15C21.25 16.2426 20.2426 17.25 19 17.25H5C3.75736 17.25 2.75 16.2426 2.75 15V6ZM8 21.75H16V20.25H8V21.75Z" />\n      </svg></i>`;return e<751?n=`<i class="icon" style="${t}"><svg width="16" height="16" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M9 1.25C6.92893 1.25 5.25 2.92893 5.25 5V19C5.25 21.0711 6.92893 22.75 9 22.75H15C17.0711 22.75 18.75 21.0711 18.75 19V5C18.75 2.92893 17.0711 1.25 15 1.25H9ZM6.75 5C6.75 3.75736 7.75736 2.75 9 2.75H15C16.2426 2.75 17.25 3.75736 17.25 5V19C17.25 20.2426 16.2426 21.25 15 21.25H9C7.75736 21.25 6.75 20.2426 6.75 19V5ZM10.5 19.75H13.5V18.25H10.5V19.75Z" />\n      </svg></i>`:e<1001&&(n=`<i class="icon" style="${t}"><svg width="16" height="16" viewBox="0 0 24 24"  xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M3.25 5C3.25 2.92893 4.92893 1.25 7 1.25H17C19.0711 1.25 20.75 2.92893 20.75 5V19C20.75 21.0711 19.0711 22.75 17 22.75H7C4.92893 22.75 3.25 21.0711 3.25 19V5ZM7 2.75C5.75736 2.75 4.75 3.75736 4.75 5V19C4.75 20.2426 5.75736 21.25 7 21.25H17C18.2426 21.25 19.25 20.2426 19.25 19V5C19.25 3.75736 18.2426 2.75 17 2.75H7Z" />\n      </svg></i>`),n}handleDrop(e){this.hideDragTargets(),this.dragRequest&&(this.dragRequest.removeAutoIncreatTimer(),this.dragRequest=null)}handleDropCanceled(e){this.hideDragTargets(),this.dragRequest&&(this.dragRequest.removeAutoIncreatTimer(),this.dragRequest=null)}getResizeLimit(){return[this.configurationService.getValue("zoom.minLogicWidth"),this.configurationService.getValue("zoom.maxLogicWidth")]}setWidth(e){const t=this._editor.view,n=t.getViewport();if(e===n.logicWidth)return;const i=w({},n.mx),r=e*n.scale,o=t.boundaryDomNode.getBoundingClientRect(),s=getComputedStyle(t.boundaryDomNode),a=parseFloat(s.paddingRight),l=parseFloat(s.paddingLeft),c=o.width-l-a,[d,u]=this.getResizeLimit();if(!(Number.isFinite(u)&&e>u||Number.isFinite(d)&&e<d)){if(r>c){const n=(r-e)/2;i.tx=n;const o=r-c;t.boundaryDomNode.scrollLeft=o/2}else i.tx=(c-e)/2;t.setViewport(e,n.logicHeight,i)}}fit(){const e=this._editor.view,t=e.getViewport(),n=w({},t.mx),i=e.boundaryDomNode.getBoundingClientRect(),r=getComputedStyle(e.boundaryDomNode),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),a=parseFloat(r.paddingRight),l=parseFloat(r.paddingLeft),c=i.width-l-a,d=(window.innerHeight-i.top-o-s)/n.a,u=t.logicWidth*n.a;if(u>c){const i=(u-t.logicWidth)/2;n.tx=i;const r=(u-c)/2;e.boundaryDomNode.scrollLeft=r}else n.tx=(c-t.logicWidth)/2;e.setViewport(t.logicWidth,d,n)}},C(c,"ID","editor.contrib.responsiveResize"),c);xM=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?yM(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&vM(t,n,o),o})([wM(0,Sl),wM(1,zm),wM(2,Df)],xM),um(xM.ID,xM);dm(new class extends am{constructor(){super({id:"undo",kbOpts:{weight:og.EditorCore,kbExpr:ym.viewMode.isEqualTo(pm.Editing),primary:Gf.CtrlCmd|Bf.KEY_Z}})}runEditorCommand(e,t,n){const i=e.get(Do);i.canUndo()&&i.undo()}}),dm(new class extends am{constructor(){super({id:"redo",kbOpts:{weight:og.EditorCore,kbExpr:ym.viewMode.isEqualTo(pm.Editing),primary:Gf.CtrlCmd|Gf.Shift|Bf.KEY_Z,mac:{primary:Gf.CtrlCmd|Gf.Shift|Bf.KEY_Z}}})}runEditorCommand(e,t,n){const i=e.get(Do);i.canRedo()&&i.redo()}});class CM extends jo{constructor(){super(...arguments),C(this,"_imageLoadingBarrier",new Map),C(this,"_fontResourceProviders",new Set),C(this,"_imageCache",new Map)}dispose(){super.dispose(),this._imageLoadingBarrier.clear(),this._fontResourceProviders.clear(),this._imageCache.clear()}getPlaceHolderImage(e,t){const n=new Blob([`<svg width="${e}" height="${t}" xmlns="http://www.w3.org/2000/svg"><circle cx="0" cy="0" r="1" opacity="0" /></svg>`],{type:"image/svg+xml"}),i=URL.createObjectURL(n);return{url:i,dispose(){URL.revokeObjectURL(i)}}}loadImage(e){if(!this._imageLoadingBarrier.has(e)){const t=new Up;fetch(e).then((e=>e.blob())).then((n=>{const i=new FileReader;i.onloadend=()=>{const n=i.result;this._imageCache.set(e,n),t.open();document.createElement("img").src=n},i.onerror=()=>{console.log("500")},i.readAsDataURL(n)})),this._imageLoadingBarrier.set(e,t)}return this._imageLoadingBarrier.get(e).wait()}getImageCache(e){return this._imageCache.get(e)||""}registerFontResourceProvider(e){if(this._fontResourceProviders.has(e))throw new Error("400");return this._fontResourceProviders.add(e),Fo((()=>this._fontResourceProviders.delete(e)))}async queryFontResource(e,t){const n=[];for(const i of this._fontResourceProviders)n.push(i.provideFontResource(e,t));return(await Promise.all(n)).filter((e=>!!e))}}const kM=Vr("eventBusService");var EM;(EM||(EM={})).paste="paste";class SM extends jo{constructor(){super(...arguments),C(this,"_onMessage",this._register(new ws)),C(this,"_onEvent",this._register(new ws))}dispose(){super.dispose(),this._onMessage.dispose(),this._onEvent.dispose()}onMessage(e){return this._onMessage.event(e)}postMessage(e){this._onMessage.fire(e)}onEvent(e){return this._onEvent.event(e)}postEvent(e){this._onEvent.fire(e)}}class IM{constructor(e,t=[],n=!1){C(this,"ctor"),C(this,"staticArguments"),C(this,"supportsDelayedInstantiation"),this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}C(IM,"__SyncDescriptorBrand");class OM{constructor(...e){C(this,"_entries",new Map);for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}dispose(){for(const[e,t]of this._entries){if(e!==Br&&!(t instanceof IM)){const e=Reflect.get(t,"dispose");"function"==typeof e&&e.call(t)}this._entries.delete(e)}}}const TM=Vr("lifecycleService");var MM,NM,AM;!function(e){e[e.Starting=1]="Starting",e[e.Bootstraped=2]="Bootstraped",e[e.EditorCreated=3]="EditorCreated",e[e.ExtensionActivated=4]="ExtensionActivated"}(MM||(MM={})),(AM=NM||(NM={}))[AM.ViewFocusChanged=0]="ViewFocusChanged";class RM extends jo{onFocusChanged(e){return!1}handleEvents(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];switch(n.type){case NM.ViewFocusChanged:this.onFocusChanged(n);break;default:console.info("View received unknown event: "),console.info(n)}}}}class DM{constructor(e,t,n=null,i=null){C(this,"element"),C(this,"type"),C(this,"detail"),C(this,"targetPath"),this.element=e,this.type=t,this.detail=n,this.targetPath=i}}class PM{constructor(e){C(this,"_viewHelper"),this._viewHelper=e}}class LM{constructor(e,t,n){C(this,"_ctx"),C(this,"target"),C(this,"targetPath"),C(this,"pos"),this.pos=t,this._ctx=e,n?(this.target=n,this.targetPath=this.getTargetPath(n)):(this.target=null,this.targetPath=[])}getTargetPath(e){return a_.collect(e)}fulfill(e,t=null){return new DM(this.target,e,t,this.targetPath)}withTarget(e){return new LM(this._ctx,this.pos,e)}}class UM{constructor(e){C(this,"_viewHelper"),this._viewHelper=e}createMouseTarget(e,t){const n=new PM(this._viewHelper),i=new LM(n,e,t);return this._createMouseTarget(n,i,!1)}createMouseTargetWithoutHittest(e,t){const n=new PM(this._viewHelper),i=new LM(n,e,t);return this._createMouseTarget(n,i,!1)}_createMouseTarget(e,t,n){if(null===t.target)return n?t.fulfill(n_.Unknown):this._createMouseTarget(e,t.withTarget(null),!0);const i=t;let r=null;return r=r||this._hitTestCanvas(i),r=r||this._hitTestCanvasOverlay(i),r=r||this._hitTestContentWidget(i),r=r||this._hitTestSpaceOutsideCanvas(i),ri(r)&&(r=t.fulfill(n_.Unknown)),r}_hitTestCanvas(e){return l_.isChildOfCanvas(e.targetPath)?e.fulfill(n_.Canvas):null}_hitTestCanvasOverlay(e){if(l_.isCanvasOverlay(e.targetPath)||l_.isTransparentContentWidget(e.targetPath)){const t=this._viewHelper.hitTest(e.pos.x,e.pos.y);if(t.length>0)return e.withTarget(t[0]).fulfill(n_.Canvas)}return null}_hitTestContentWidget(e){return l_.isBlockingContentWidget(e.targetPath)?e.fulfill(n_.Widgets):null}_hitTestSpaceOutsideCanvas(e){if(function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}(this._viewHelper.viewDomNode,e.target)){const t=this._viewHelper.hitTest(e.pos.x,e.pos.y);if(t.length>0)return e.withTarget(t[0]).fulfill(n_.Canvas)}return null}}let FM=!1;const BM=new WeakMap;function jM(e){if(!e.parent||e.parent===e)return null;try{const t=e.location,n=e.parent.location;if("null"!==t.origin&&"null"!==n.origin&&(t.protocol!==n.protocol||t.hostname!==n.hostname||t.port!==n.port))return FM=!0,null}catch(f8){return FM=!0,null}return e.parent}function VM(e,t=window.top){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const r=function(e){let t=BM.get(e);if(!t){t=[];let n,i=e;do{n=jM(i),n?t.push({window:i,iframeElement:i.frameElement||null}):t.push({window:i,iframeElement:null}),i=n}while(i);BM.set(e,t)}return t.slice(0)}(e);for(const o of r){if(o.window===t)break;if(!o.iframeElement)break;const e=o.iframeElement.getBoundingClientRect();n+=e.top,i+=e.left}return{top:n,left:i}}class zM{constructor(e,t){C(this,"_pageCoordinatesBrand"),this.x=e,this.y=t}}class KM{constructor(e,t,n){C(this,"_editorMouseEventBrand"),C(this,"browserEvent"),C(this,"leftButton"),C(this,"middleButton"),C(this,"rightButton"),C(this,"buttons"),C(this,"target"),C(this,"detail"),C(this,"posX"),C(this,"posY"),C(this,"screenX"),C(this,"screenY"),C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"timestamp"),C(this,"pos"),this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;let{pageX:i,pageY:r}=e;const o=t.contentWindow,s=VM(o,self);if(e.view!==o){const t=e.view.frameElement,{scale:a}=n,{scrollX:l,scrollY:c}=o;if(t){const e=s.top-c*a;i=(i-(s.left-l*a))/a,r=(r-e)/a}else i=(i-s.left)/a+l,r=(r-s.top)/a+c}this.screenX=e.screenX,this.screenY=e.screenY,this.posX=i,this.posY=r,this.pos=new zM(this.posX,this.posY)}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class WM{constructor(e,t){this.ref=e,this.viewportQuery=t}create(e){return new KM(e,this.ref,this.viewportQuery())}onContextMenu(e,t){return Ng(e,"contextmenu",(e=>{t(this.create(e))}))}onMouseUp(e,t){return Ng(e,"mouseup",(e=>{t(this.create(e))}))}onMouseDown(e,t){return Ng(e,vg,(e=>{t(this.create(e))}))}onMouseLeave(e,t){return Ng(e,bg,(e=>{t(this.create(e))}))}onMouseEnter(e,t){return Ng(e,wg,(e=>{t(this.create(e))}))}onMouseMoveThrottled(e,t,n,i){return function(e,t,n,i,r){return new Rg(e,t,n,i,r)}(e,"mousemove",t,((e,t)=>n(e,this.create(t))),i)}onMouseMove(e,t){return Ng(e,yg,(e=>{t(this.create(e))}))}onDBClick(e,t){return Ng(e,mg,(e=>{t(this.create(e))}))}onMouseWheel(e,t){return Ng(e,xg,(e=>{t(this.create(e))}),{passive:!1})}}class HM extends RM{constructor(e,t){super(),C(this,"viewController"),C(this,"viewHelper"),C(this,"mouseTargetFactory"),C(this,"_mouseDownOperation"),C(this,"lastMouseLeaveTime",-1),C(this,"lastMouseMoveTarget"),C(this,"lastEmittedMouseEnter"),this.viewHelper=t,this.viewController=e,this.mouseTargetFactory=new UM(t),this._mouseDownOperation=this._register(new $M(this.viewController,this.viewHelper,((e,t)=>this._createMouseTarget(e,t)),(e=>n.create(e))));const n=new WM(this.viewHelper.canvasHostDomNode,this.viewHelper.getViewport),i=this.viewHelper.canvasHostDomNode.contentDocument.body,{boundaryDomNode:r}=this.viewHelper;this._register(n.onContextMenu(i,(e=>this._onContextMenu(e,!0)))),this._register(n.onContextMenu(r,(e=>this._onContextMenu(e,!0)))),this._register(n.onMouseMove(i,(e=>this._onMouseMove(e)))),this._register(n.onMouseMove(r,(e=>this._onMouseMove(e)))),this._register(n.onMouseDown(i,(e=>this._onMouseDown(e)))),this._register(n.onMouseDown(r,(e=>this._onMouseDown(e)))),this._register(n.onDBClick(i,(e=>this._onDbClick(e)))),this._register(n.onDBClick(this.viewHelper.canvasHostDomNode,(e=>this._onDbClick(e)))),this._register(n.onMouseLeave(r,(e=>this._onMouseLeaveEditingArea(e)))),this._register(Ng(window,Og,(e=>this._onWindowBlur(e)))),this._register(Ng(document,Tg,(e=>this._onPageVisibilityChange(e)))),this._register(n.onMouseWheel(this.viewHelper.canvasHostDomNode.contentWindow,this._onMouseWheel.bind(this))),this._register(Ng(i,xg,(e=>this.handleScroll(e)),{passive:!1,capture:!0}))}_createMouseTarget(e,t){return this.mouseTargetFactory.createMouseTarget(e.pos,t?e.target:null)}handleScroll(e){if(this.viewHelper.getEditorMode()===pm.Preview)return;const{pageX:t,pageY:n}=e,i=this.viewHelper.hitTest(t,n),{deltaX:r,deltaY:o}=e;let s=!1;i.forEach((e=>{const{scrollTop:t,scrollLeft:n}=e,{overflowX:i,overflowY:a}=getComputedStyle(e),l=i===Di.scroll||i===Di.auto,c=a===Di.scroll||a===Di.auto;l&&e.scrollBy(r,0),c&&e.scrollBy(0,o),s||(s=e.scrollTop!==t||e.scrollLeft!==n)})),s&&(e.preventDefault(),e.stopPropagation(),this.viewHelper.reMeasureCanvasRect())}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this._mouseDownOperation.isActive())return;const t=this._createMouseTarget(e,!0);if(t.type!==n_.Unknown){const n=t.element,i=this.lastMouseMoveTarget;if(n!==(null==i?void 0:i.element)){if(n){const n={event:e,target:t};this.viewController.emitMouseEnter(n),this.lastEmittedMouseEnter=t}i&&n.contains(i.element)&&this.viewController.emitMouseLeave({event:e,target:this.lastMouseMoveTarget}),this.lastMouseMoveTarget=t}}else this._handleMouseLeave(e)}_handleMouseLeave(e){this.lastEmittedMouseEnter&&(this.viewController.emitMouseLeave({event:e,target:this.lastEmittedMouseEnter}),this.lastMouseMoveTarget=null,this.lastEmittedMouseEnter=null)}_onMouseLeaveEditingArea(e){this._handleMouseLeave(e)}_onWindowBlur(e){this._handleMouseLeave(null)}_onPageVisibilityChange(e){document.hidden&&this.lastEmittedMouseEnter&&(this.viewController.emitMouseLeave({event:null,target:this.lastEmittedMouseEnter}),this.lastMouseMoveTarget=null,this.lastEmittedMouseEnter=null)}_onDbClick(e){this.viewController.emitDbClick({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0);if(this.viewController.emitMouseDown({event:e,target:t}),this.viewHelper.getEditingMode()===hm.EditText)return;const n=l_.isChildOfCanvas(t.targetPath),i=l_.isDraggableWidget(t.targetPath);(e.leftButton||e.middleButton)&&(n||i)&&(e.preventDefault(),this._mouseDownOperation.start(t,e))}_onMouseWheel(e){this._onMouseMove(e)}}class $M extends jo{constructor(e,t,n,i){super(),C(this,"_viewController"),C(this,"_viewHelper"),C(this,"_mouseMoveMonitor"),C(this,"_mouseState"),C(this,"_isActive"),C(this,"_lastMouseEvent"),this._createMouseTarget=n,this._createMouseEvent=i,this._viewController=e,this._viewHelper=t,this._mouseMoveMonitor=t.mouseMoveMonitor,this._mouseState=new YM,this._isActive=!1,this._lastMouseEvent=null}isActive(){return this._isActive}_onMouseDownThenMove(e){const t=this._createMouseEvent(e);this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.isDragAndDrop&&this._viewController.emitMouseDrag({event:t,target:null})}start(e,t){if(this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.trySetCount(t.detail,null),t.detail=this._mouseState.count,!this._mouseState.altKey&&t.detail<2&&!this._isActive){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._viewController.emitMouseDragStart({event:t,target:this._createMouseTarget(t,!0)});let e=!1;this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewDomNode,this._viewHelper.canvasHostDomNode,t.target,t.buttons,(t=>{e=!0,this._onMouseDownThenMove(t)}),(t=>{t&&e?this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:null}):this._viewController.emitMouseDropCanceled(),this._stop()}))}}_stop(){this._isActive=!1}}const qM=class{constructor(){C(this,"_altKey"),C(this,"_ctrlKey"),C(this,"_metaKey"),C(this,"_shiftKey"),C(this,"_leftButton"),C(this,"_middleButton"),C(this,"_lastMouseDownPosition"),C(this,"_lastMouseDownPositionEqualCount"),C(this,"_lastMouseDownCount"),C(this,"_lastSetMouseDownCountTime"),C(this,"isDragAndDrop"),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}trySetCount(e,t){const n=(new Date).getTime();n-this._lastSetMouseDownCountTime>qM.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition===t?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};let YM=qM;C(YM,"CLEAR_MOUSE_DOWN_COUNT_TIME",400);class GM{constructor(e,t){C(this,"handler"),this.viewController=e,this.viewHelper=t,this.handler=new HM(e,t)}dispose(){this.handler&&this.handler.dispose()}}var XM=(e,t)=>{for(const[n,i]of t)e[n]=i;return e};var JM,QM,ZM=XM(Rd({components:{ShadowRootScript:function(){return Zu("script",{type:"text/javascript"},["(function attachShadowRoots(root) {\n  root.querySelectorAll('template[shadowroot]').forEach(template => {\n    const mode = template.getAttribute('shadowroot');\n    const host = template.parentNode;\n    const shadowRoot = template.parentNode.attachShadow({ mode });\n    const attachInternals = host.attachInternals;\n \n    Object.assign(host, {\n      attachShadow() {\n        shadowRoot.innerHTML = '';\n        return shadowRoot;\n      },\n      attachInternals() {\n        const ei = attachInternals\n          ? attachInternals.call(this, arguments)\n          : {};\n        return Object.create(ei, {\n          shadowRoot: { value: shadowRoot }\n        });\n      }\n    });\n \n    shadowRoot.appendChild(template.content);\n    template.remove();\n    attachShadowRoots(shadowRoot);\n  });\n})(document);"])}},props:{vm:Object}}),[["render",function(e,t,n,i,r,o){const s=Nu("Node"),a=Nu("ShadowRootScript");return Vu(),Hu(Pu,null,[e.vm.children?(Vu(!0),Hu(Pu,{key:0},ah(e.vm.children,(e=>(Vu(),$u(s,{key:e.id,vm:e},null,8,["vm"])))),128)):nh("",!0),Zu(a)],64)}]]);(QM=JM||(JM={})).BODY="body",QM.HEAD="head";const eN={cursor:"pointer","text-decoration":"none",position:"absolute",display:"block",top:"0px",right:"0px",bottom:"0px",left:"0px",overflow:"hidden","background-color":"transparent","border-color":"rgba(255, 255, 255, 1)","border-width":"0px","border-style":"solid","border-radius":"0px","z-index":1},tN={position:"absolute",height:"100%",width:"100%","object-fit":"cover",left:"0px",top:"0px"},nN={height:"100%",width:"100%",display:"block",borderWidth:"0px"},iN=(e,t)=>`${e}: ${t};`;const rN='\n  font-feature-settings: "liga" 0;\n  overflow-wrap: break-word;\n  -webkit-line-break: after-white-space;\n  color: inherit;\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-box-decoration-break: clone;\n  inline-size: 100%;\n'.replace(/\n/g,""),oN="\n  content: '';\n  display: inline-block;\n  padding-left: 99%;\n".replace(/\n/g,"");class sN{constructor(e,t,n){this.styleViewModel=e,this.options=t,this.shouldAddReset=n}checkWrapMedia(e){const t=this.styleViewModel.media||null;if(!t)return e;const n=[];return null!=t.maxWidth&&n.push(`(max-width: ${t.maxWidth}px)`),`@media ${n.join(" and ")} {${e}}`}makePreset(){const e=Object.create(null),{forImage:t,forSVG:n,targetId:i,media:r,forLink:o}=this.styleViewModel;(t||n)&&(e.position="relative",e.overflow="hidden"),o&&!r&&(e.position="relative"),t||o||(e.isolation="isolate");const s=di(e).reduce(((t,n)=>t+=iN(n,e[n])),"");return s?`.${i} {${s}}`:""}makeStyleContent(){const{styleViewModel:{attrs:e,forText:t},options:n}=this,i=n.editMode&&"sticky"===e.position,r=Object.entries(e).reduce(((r,[o,s])=>{if(["order"===o,i&&["position","top"].includes(o),"height"===o&&nr(e["aspect-ratio"]),"aspect-ratio"===o,t&&Gi(o),n.editMode&&o.startsWith("scroll-snap"),o.startsWith("--")].some((e=>e)))return r;let a=iN(o,s);const l=So[o];return l&&l.length>0&&l.forEach((e=>{a+=iN(`${e}${o}`,s)})),`${r}${a}`}),"");return r?`${function(e){const{targetId:t,selectorType:n,subSelector:i}=e;return n&&i?`.${t} ${n} ${i}`:`.${t}`}(this.styleViewModel)} {${r}}`:""}afterTextStyleContent(){const{targetId:e,forText:t,attrs:n}=this.styleViewModel;if(!t)return"";const i=!!n["text-overflow"],r=Object.entries(n).reduce(((e,[t,n])=>function(e,t=!1){return e.startsWith("font")||e.startsWith("text")||e.startsWith("word")||e.startsWith("line")||e.startsWith("letter")||"color"===e||"vertical-align"===e||"white-space"===e||t&&function(e){return["overflow","width","height","white-space","text-overflow"].includes(e)}(e)}(t,i)||Gi(t)||function(e){return e.startsWith("list-style")}(t)?"flex"===n?e:["color","font-size","font-weight","letter-spacing","line-height","text-shadow"].includes(t)?`${e}${iN(t,"inherit")}`:`${e}${iN(t,n)}`:e),"");return`.${e} > * {${this.shouldAddReset?rN:""}${r}}`}makeTextJustifyHack(){const{targetId:e,forText:t,attrs:n}=this.styleViewModel;if(!t)return"";return"justify"===n["text-align"]?`.${e} > *:after {${oN}}`:""}makeTextDynamicFontSizeHack(){const{targetId:e,forText:t,attrs:n}=this.styleViewModel;if(!t)return"";const{"font-size":i}=n;if(!(function(e){const{"--font-size-min":t,"--font-size-max":n}=e;return Boolean(n&&t)}(n)&&i&&i.includes("clamp")))return"";const r=/clamp\((.+),(.+),(.+)\)/.exec(i);if(!r)return"";const[,,o]=r;return`@supports not (font-size: clamp(2px,1px,3px)) { .${e} { font-size: ${o}; } }`}afterSvgStyleContent(){const{forSVG:e,forImage:t,forVideo:n,targetId:i}=this.styleViewModel;if(e||t||n){const e=(r=tN,Object.entries(r).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1")}:${t}`)).join(";"));return e?`.${i} > * { ${e} }`:""}var r;return""}afterAspectRatioStyleContent(){const{targetId:e,attrs:t}=this.styleViewModel;if(nr(t["aspect-ratio"])){return`.${e}::before { content: attr(x); display: block; padding-top: ${vi(1/parseFloat(t["aspect-ratio"]))}; }`}return""}toString(){var e;const{options:t,styleViewModel:{media:n}}=this;if(n&&(null==(e=t.viewports)?void 0:e.length)&&t.viewports.every((e=>e.width>n.maxWidth||e.height<n.minWidth)))return"";const i=[this.makeStyleContent(),this.afterTextStyleContent(),this.makeTextJustifyHack(),this.makeTextDynamicFontSizeHack(),this.afterSvgStyleContent(),this.afterAspectRatioStyleContent()].join(""),r=[];return this.shouldAddReset&&r.push(this.makePreset()),i&&r.push(this.checkWrapMedia(i)),r.filter(Boolean).join("\n")}}class aN{constructor(e,t){this.styles=e,this.options=t}toString(){const e=this.styles.filter((e=>e.selectorType&&e.subSelector)),t=this.styles.filter((t=>!e.includes(t))),n=[...e,...t],i=[],r=new Set;for(const o of n){const e=!r.has(o.targetId),t=new sN(o,this.options,e);i.push(t.toString()),r.add(o.targetId)}return i.join("\n")}}function lN(e){return e.map((e=>`@font-face {font-family: ${e.family};src: ${e.src};}`)).join("\n")}const cN={"data-iliad":"",type:"text/css"},dN="__editor_styles",uN=Rd({props:{styles:Array,ctx:Object},setup(e){const t=gd(e),n=Ad("positionMonitor"),i=gh||kd,r=wd((()=>new aN(t.value.styles,{editMode:!t.value.ctx.preview}).toString()));return zd((()=>n.onBeforeMount(JM.HEAD,dN))),Kd((()=>n.onMounted(JM.HEAD,dN,i.ctx.$el))),Wd((()=>n.onBeforeUpdate(JM.HEAD,dN))),Hd((()=>n.onUpdated(JM.HEAD,dN))),$d((()=>n.onBeforeUnmount(JM.HEAD,dN))),qd((()=>n.onUnmounted(JM.HEAD,dN))),()=>Zu("style",cN,[r.value])}});const hN={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20230308/iliad-runtime/dist/d873f25b63116883d0611f512482dea6.js"},pN={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221116/iliad-runtime/dist/641290516cf8360803a5270610cb7630.js"},fN={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221220/iliad-runtime/dist/1e9620fc950f44e136c01d9c0cb1effe.js"},gN={imports:{vue:"https://st0.dancf.com/package/npm/gaoding/widget-vue/0.0.1/dist/index.system.js"}},mN={"data-iliad":"",type:"systemjs-importmap"},_N=Rd({props:{cb:Function},mounted(){const{runtime:e}=this.$refs;e.onload=()=>{this.cb()}},render:()=>Zu(Pu,null,[Zu("script",sh(hN,{ref:"runtime"}),null)])});var vN=XM(Rd({components:{RuleSet:uN,FontFaces:function({fonts:e}){return Zu("style",sh(cN,{"data-herer":!0}),[lN(e)])},Reset:function({ctx:e}){return Zu(Pu,null,[Zu("style",cN,["html, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, font, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, figcaption, figure, main,\nnav, button, section, header, footer, title {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  vertical-align: baseline;\n  background: transparent;\n  box-sizing: border-box;\n}\n\nbody {\n  font-size: 10px;\n  font-family: Arial, Helvetica, sans-serif;\n  overflow-x: auto;\n  overflow-y: auto;\n}\n\nol, ul {\n  margin: 0;\n}\n\nblockquote, q {\n  quotes: none;\n}\n\nins {\n  text-decoration: none;\n}\n\ndel {\n  text-decoration: line-through;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\na {\n  cursor: pointer;\n  text-decoration: none;\n  color: inherit;\n}\n\nhtml, body {\n  height: 100%;\n}\n\n:focus {\n  outline: none;\n}\n\n*[data-in-shadow] {\n  pointer-events: none;\n}\n\na[href] {\n  pointer-events: auto;\n}\n\n.link-node {\n  cursor: pointer;\n}\n\npicture > img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n"]),!e.preview&&Zu("style",{type:"text/css"},[":focus-visible {\n  outline: none;\n}\n\n[data-hide] {\n  visibility: hidden;\n}\n\n* {\n  user-select: none;\n}\n\nbody {\n  overflow-x: hidden;\n}\n"]),Zu("script",{id:"click-script","data-enabled":e.preview,type:"text/javascript"},["window.addEventListener('click', e => {\n  const clickScript = document.querySelector('#click-script');\n  if (!(clickScript && clickScript.dataset.enabled === 'true')) return;\n  const { target, composedPath } = e;\n  let path = [];\n  try {\n    path = composedPath?.() || [];\n  } catch (err) {\n    path = getAncestorNodes(target);\n    console.warn(err);\n  }\n  let linkNode = null;\n  if (target.tagName !== 'A') {\n    linkNode = path.find(cv => typeof cv.className === 'string' && cv.className.includes('link-node'));\n  } else {\n    linkNode = target;\n  }\n  if (!linkNode) return;\n  const href = linkNode.getAttribute('href');\n  if (!href.startsWith('#')) return;\n  const anchorTarget = document.querySelector(href);\n  if (!anchorTarget) return;\n  e.preventDefault();\n  anchorTarget.scrollIntoView();\n});\n\n// 获取符合条件的父节点 如果没有 返回null\nfunction getAncestorNodes(target) {\n  const elements = [target];\n  let index = 0;\n  do {\n    const parent = elements[index].parentElement;\n    if (parent) {\n      elements.push(parent);\n    }\n    index++;\n  } while (elements[index]);\n  return elements;\n}\n"])])},WebWidgetCommon:_N,WebWidgetImportMap:Zu("script",mN,[JSON.stringify(gN)])},props:{fonts:Object,styles:Object,ctx:Object,readyCB:Function}}),[["render",function(e,t,n,i,r,o){const s=Nu("FontFaces"),a=Nu("Reset"),l=Nu("RuleSet"),c=Nu("WebWidgetImportMap"),d=Nu("WebWidgetCommon");return Vu(),Hu(Pu,null,[Zu(s,{fonts:e.fonts.value},null,8,["fonts"]),Zu(a,{ctx:e.ctx},null,8,["ctx"]),Zu(l,{styles:e.styles.value,ctx:e.ctx},null,8,["styles","ctx"]),Zu(c),e.ctx.shouldLoadWebWidgetRuntime?(Vu(),$u(d,{key:0,cb:e.readyCB},null,8,["cb"])):nh("",!0)],64)}]]);const yN={inject:["positionMonitor"],beforeMount(){this.positionMonitor.onBeforeMount(JM.BODY,this.vm.id)},mounted(){this.positionMonitor.onMounted(JM.BODY,this.vm.id,this.$el)},beforeUpdate(){this.positionMonitor.onBeforeUpdate(JM.BODY,this.vm.id)},updated(){this.positionMonitor.onUpdated(JM.BODY,this.vm.id,this.$el)},beforeUnmount(){this.positionMonitor.onBeforeUnmount(JM.BODY,this.vm.id)},unmounted(){this.positionMonitor.onUnmounted(JM.BODY,this.vm.id)}},wN=Rd({name:"Content",mixins:[yN],inject:["positionMonitor"],inheritAttrs:!0,props:{vm:Object},render(){var e,t;const{vm:n}=this,{link:i,props:{content:r}}=n;let o=(null==(t=null==(e=n.meta)?void 0:e.tagName)?void 0:t.toLowerCase())||"div",s={};return i&&(o="a",s={target:i.target,href:i.href}),ep(o,b(w({},s),{innerHTML:r}))}}),bN=Rd({name:"Tag",mixins:[yN],inject:["positionMonitor"],inheritAttrs:!0,props:{vm:Object},render(){var e,t,n;const i=this.vm,r=(null==(t=null==(e=i.meta)?void 0:e.tagName)?void 0:t.toLowerCase())||"div";return Zu(r,{"data-in-shadow":(null==(n=i.meta)?void 0:n.isInShadow)||null,"data-ct":i.meta.componentType||null,"data-t":i.meta.type||null},{default:()=>[this.$slots.default?this.$slots.default():null,this.$slots.cover?this.$slots.cover():null]})}}),xN=Rd({name:"WebWidgetProxy",mixins:[yN],inject:["positionMonitor","ctx"],inheritAttrs:!0,props:{vm:Object},data:()=>({innerStyle:w({},nN)}),mounted(){const{widget:e}=this.$refs;e&&this.registerWidgetStateChangeListener(e,this.positionMonitor)},updated(){const e=this.positionMonitor,{widget:t}=this.$refs;t&&(this.stateWatcher||this.registerWidgetStateChangeListener(t,e),"mounted"===t.state&&(null==t||t.update({data:this.vm.props.data}).catch((e=>{console.warn("Web Widget Update Error ",e)}))))},methods:{registerWidgetStateChangeListener(e,t){this.stateWatcher=e.addEventListener("statechange",(()=>{t.measure()}))}},render(){var e;const t=this.vm,{type:n,src:i,data:r}=t.props,{innerStyle:o}=this;return Zu("div",null,[(null==(e=this.ctx)?void 0:e.webWidgetReady)&&Zu(Nu("web-widget"),{ref:"widget",type:n,src:i,data:r,style:o},null)])}}),CN=Rd({name:"Video",inject:["positionMonitor"],inheritAttrs:!0,props:{vm:Object},render(){const{vm:e}=this;return ep("div",[ep("video",w({},e.props)),this.$slots.cover?this.$slots.cover():null])}}),kN=Rd({name:"Image",mixins:[yN],inject:["positionMonitor","resourceService"],inheritAttrs:!0,props:{vm:Object},data:()=>({src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}),watch:{"vm.props.src":function(){this.loadImage()}},created(){this.blob=this.resourceService.getPlaceHolderImage(this.vm.props.intrinsicWidth,this.vm.props.intrinsicHeight),this.src=this.blob.url,this.loadImage()},unmounted(){this.blob&&(Uo(this.blob),this.blob=null)},methods:{loadImage(){const e=this.vm.props.src;this.resourceService.loadImage(e).then((()=>{this.src=this.resourceService.getImageCache(e)}))}}}),EN=["src"];var SN=XM(kN,[["render",function(e,t,n,i,r,o){return Vu(),Hu("div",null,[Qu("img",{src:e.src},null,8,EN),lh(e.$slots,"cover")])}]]);var IN=XM(Rd({name:"Svg",mixins:[yN],inheritAttrs:!0,props:{vm:Object},mounted(){this.appendSvg()},methods:{appendSvg(){this.$el.insertAdjacentHTML("afterbegin",this.vm.props.content)}}}),[["render",function(e,t,n,i,r,o){return Vu(),Hu("span",null,[lh(e.$slots,"cover")])}]]);const ON=["href","target"];var TN=XM({props:{vm:Object},computed:{com(){const{vm:e}=this;return to(e)?wN:no(e)?SN:io(e)?IN:oo(e)?CN:ro(e)?xN:bN},hasLink(){return!!this.vm.link},linkHref(){const{link:e}=this.vm;return null==e?void 0:e.href},linkTarget(){const{link:e}=this.vm;return null==e?void 0:e.target},innerStyle(){return this.hasLink?w({},eN):{}},idAttr(){var e,t;return null!=(t=null==(e=this.vm.props)?void 0:e.id)?t:null}}},[["render",function(e,t,n,i,r,o){const s=Nu("Node",!0);return Vu(),$u((a=o.com,fa(a)?Ru("components",a,!1)||a:a||Au),{vm:n.vm,id:o.idAttr,class:Qs([n.vm.id,{"link-node":o.hasLink}]),"data-fprt":n.vm.id,"data-hide":n.vm.hide||null},function(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(da(i))for(let t=0;t<i.length;t++)e[i[t].name]=i[t].fn;else i&&(e[i.name]=i.fn)}return e}({default:Id((()=>[n.vm.children?(Vu(!0),Hu(Pu,{key:0},ah(n.vm.children,(e=>(Vu(),$u(s,{key:e.id,vm:e},null,8,["vm"])))),128)):nh("",!0)])),_:2},[o.hasLink?{name:"cover",fn:Id((()=>[Qu("a",{class:"linkTarget",href:o.linkHref,target:o.linkTarget,style:Ys(o.innerStyle)},null,12,ON)]))}:void 0]),1032,["vm","id","class","data-fprt","data-hide"]);var a}]]),MN=Object.defineProperty,NN=Object.getOwnPropertyDescriptor,AN=(e,t)=>(n,i)=>t(n,i,e);let RN=(d=class extends jo{constructor(e,t,n,i,r,o,s){super(),C(this,"canvasContext"),this.frame=e,this.positionMonitor=t,this.viewModel=n,this.view=i,this.resourceService=r,this.model=s;const a=!!customElements.get("web-widget");this.canvasContext=id({preview:!1,webWidgetReady:a,shouldLoadWebWidgetRuntime:!a}),this.mountApp(),this._register(o.onDidChangeContext((e=>{e.affectsSome(RN.watchKeys)&&(this.canvasContext.preview=o.getContextKeyValue(ym.viewMode.key)===pm.Preview)})))}get document(){return this.frame.contentDocument}get body(){if(!this.document)throw new Error("404");return this.document.body}get head(){if(!this.document)throw new Error("404");return this.document.head}isWebWidgetSrc(e){var t;for(const n of this.model.getValue().nodes)if(ro(n)&&(null==(t=n.meta)?void 0:t.src)===e)return!0;return!1}isImportSrc(e){return Array.from(Object.values(gN.imports)).includes(e)}watchMutation(){const e=new MutationObserver((e=>{for(const t of e)for(const e of[t.addedNodes,t.removedNodes])for(const n of e){if(n.nodeType===n.ELEMENT_NODE){const e=n;if(e.hasAttribute("data-fprt"))continue;if(e.hasAttribute("data-iliad"))continue;if("SCRIPT"===e.tagName){const t=e.getAttribute("src");if(t){if(this.isImportSrc(t))continue;if(this.isWebWidgetSrc(t))continue}}}console.warn(new Error("iliad canvas mutated"),t)}}));e.observe(this.body,{childList:!0}),e.observe(this.head,{childList:!0}),this._register(Fo((()=>{e.disconnect()})))}mountApp(){const{root:e,styles:t,fonts:n}=this.viewModel,{onViewportUpdated:i}=this.view,r=gd(1/0);i((()=>{const e=this.view.getViewport();r.value=e.logicWidth}));const o=wp(function(e,t,n,i){return()=>Zu(vN,{styles:e,fonts:t,ctx:i,readyCB:n},null)}(t,n,(()=>{this.canvasContext.webWidgetReady=!0}),this.canvasContext));o.provide("positionMonitor",this.positionMonitor),o.mount(this.head),this._register(Fo((()=>{o.unmount()})));const s=wp((a=e,()=>Zu(ZM,{vm:a.value},null)));var a;s.provide("positionMonitor",this.positionMonitor),s.provide("ctx",this.canvasContext),s.provide("resourceService",this.resourceService),s.component("Node",TN);const l=this.document.createElement("div");this.body.appendChild(l),a_.write(l,r_.Canvas),s.mount(l),this.positionMonitor.onMounted(JM.BODY,"root",l),this._register(Fo((()=>{s.unmount(),this.positionMonitor.onUnmounted(JM.BODY,"root")}))),this.watchMutation()}},C(d,"watchKeys",new Set([ym.viewMode.key])),d);RN=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?NN(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&MN(t,n,o),o})([AN(2,To),AN(3,No),AN(4,Ay),AN(5,Df),AN(6,zr)],RN);let DN=1;class PN extends jo{constructor(e,t){super(),C(this,"_widgets",[]),C(this,"_layers",new Map),C(this,"domNode"),C(this,"_height",0),this.view=t;const n=e.contentDocument.createElement("div");e.contentDocument.body.appendChild(n),this.domNode=n,a_.write(n,r_.CanvasOverlay),Object.assign(n.style,{position:"absolute",zIndex:100,top:0,right:0,left:0,overflow:"hidden"}),di(Ao).forEach((e=>{const t=document.createElement("div");t.dataset.layer=e,this._layers.set(e,t),n.appendChild(t)})),e.contentDocument.body.setAttribute("tabIndex","0")}updateViewPort(e,t,n){this._height!==e&&(this.domNode.style.height=Yi(e),this._height=e)}addWidget(e,t,n=!0){const i=this.getLayer(t),r=document.createElement("div");i.appendChild(r),e.render(r),n&&a_.write(r,r_.ContentWidget);const o=(++DN).toString();r.dataset.id=o,this._widgets.push({id:o,widget:e,el:r})}removeWidget(e){const t=Mr(this._widgets,(t=>t.widget===e));if(t<0)throw new Error("404");const n=this._widgets[t];n.el.style.display="none",this._widgets.splice(t,1),Pp((()=>{n.el.remove()}))}getLayer(e){if(!this._layers.has(e))throw new Error("500");return this._layers.get(e)}getWidgetById(e){const t=Po(this._widgets,(t=>t.id===e));return t?t.widget:null}dispose(){super.dispose(),this._widgets.forEach((({el:e})=>e.remove())),this._widgets.length=0,this.domNode.remove()}show(){this.domNode.style.display="block"}hide(){this.domNode.style.display="none"}}class LN{constructor(){C(this,"onContextMenu",null),C(this,"onMouseMove",null),C(this,"onMouseEnter",null),C(this,"onMouseLeave",null),C(this,"onMouseDown",null),C(this,"onMouseUp",null),C(this,"onMouseDrag",null),C(this,"onMouseDragStart",null),C(this,"onMouseDrop",null),C(this,"onMouseDropCanceled",null),C(this,"onDbClick",null)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseEnter(e){this.onMouseEnter&&this.onMouseEnter(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDragStart(e){this.onMouseDragStart&&this.onMouseDragStart(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitDbClick(e){this.onDbClick&&this.onDbClick(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:e.target}:e}}class UN{constructor(e,t){C(this,"viewModel"),C(this,"userInputEvents"),this.viewModel=e,this.userInputEvents=t}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseEnter(e){this.userInputEvents.emitMouseEnter(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDragStart(e){this.userInputEvents.emitMouseDragStart(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitDbClick(e){this.userInputEvents.emitDbClick(e)}}var FN=Object.defineProperty,BN=Object.getOwnPropertyDescriptor,jN=(e,t)=>(n,i)=>t(n,i,e);let VN=class extends jo{constructor(e,t,n,i){super(),C(this,"rects",new Map),C(this,"elements",new Map),C(this,"_onUpdated",this._register(new ws)),C(this,"onUpdate",this._onUpdated.event),C(this,"_onWorkspaceTreeUpdated",this._register(new ws)),C(this,"onWorkspaceTreeUpdated",this._onWorkspaceTreeUpdated.event),C(this,"_scale",1),C(this,"_measureDelayer",this._register(new jp(0))),C(this,"_gcDelayer",this._register(new jp(16))),C(this,"_workspaceTreeUpdateDelayer",this._register(new jp(0))),C(this,"_domChangeBarrier",null),C(this,"_styleChangeBarrier",null),C(this,"disposableStore",new Bo),C(this,"_connected"),this.frameElement=e,this.model=t,this.view=n,this.viewModel=i,this._register(this.disposableStore),this.connect(),this._register(Ng(e.contentWindow,Eg,(e=>this.handleWindowSizeChange())))}dispose(){super.dispose(),this.disconnect()}disconnect(){this._connected=!1,this.disposableStore.dispose()}connect(){this._connected=!0,this.disposableStore=new Bo;const e=this.model.getValue();this.disposableStore.add(Fo(Gh(e.nodes,(()=>this.startDOMChangeRecord()),{deep:!0}))),this.disposableStore.add(Fo(Gh(e.styles,(()=>this.startStyleChangeRecord()),{deep:!0}))),this.disposableStore.add(Fo(Gh(e.breakpoints,(()=>this.startStyleChangeRecord()),{deep:!0})))}startDOMChangeRecord(){this._domChangeBarrier||(this._domChangeBarrier=new Up,this._domChangeBarrier.wait().then((()=>{this._workspaceTreeUpdateDelayer.trigger((()=>{this._onWorkspaceTreeUpdated.fire()}))})))}startStyleChangeRecord(){this._styleChangeBarrier||(this._styleChangeBarrier=new Up,this._styleChangeBarrier.wait().then((()=>{this._workspaceTreeUpdateDelayer.trigger((()=>{this._onWorkspaceTreeUpdated.fire()}))})))}handleWindowSizeChange(){this.measure()}measure(){this._connected&&this._measureDelayer.trigger((()=>{this._connected&&this._doMeasure()}))}_doMeasure(){var e;const t=this.view.getViewport(),{logicHeight:n}=t;if(!this.frameElement.isConnected)return;const i=this.frameElement.contentDocument.body.scrollTop,r=this.frameElement.contentDocument.body.scrollLeft,o=i,s=i+n,a=[],l=[{node:this.viewModel.root.value,isAncestorPositionFixed:!1}];for(;l.length;){let{node:e,isAncestorPositionFixed:t}=l.pop();const{rect:n,isInPositionFixedChain:c}=this.measureOne(e,i,r,t),d=n&&(n.top-s>5||o-n.bottom>5);t=t||c;for(let i=0,r=e.children.length;i<r;i++)d?a.push({node:e.children[i],isAncestorPositionFixed:t}):l.push({node:e.children[i],isAncestorPositionFixed:t})}a.length?Pp((()=>{var e;const t=this.frameElement.contentDocument.body.scrollTop,n=this.frameElement.contentDocument.body.scrollLeft;for(;a.length;){let{node:e,isAncestorPositionFixed:i}=a.pop();const{isInPositionFixedChain:r}=this.measureOne(e,t,n,i);i=i||r;for(let t=0,n=e.children.length;t<n;t++)a.push({node:e.children[t],isAncestorPositionFixed:i})}null==(e=this._styleChangeBarrier)||e.open(),this._onUpdated.fire()}),8):(null==(e=this._styleChangeBarrier)||e.open(),this._onUpdated.fire())}measureOne(e,t,n,i){const{id:r}=e,{_scale:o}=this;if(a_.shouldNotBeMeasured(r))return;const s=this.elements.get(r);if(!s)throw new Error("404");const a=s.getBoundingClientRect(),{width:l,height:c,top:d,right:u,bottom:h,left:p}=a,f=getComputedStyle(s),g="fixed"===f.position;(g||i)&&(t=0,n=0);let m={width:l*o,height:c*o,top:(d+t)*o,right:(u+n)*o,bottom:(h+t)*o,left:(p+n)*o,mx:null};if(so(e)){const{transform:e}=f;if("none"!==e&&"matrix(1, 0, 0, 1, 0, 0)"!==e){const n=p+l/2,i=d+c/2,r=y_.parse(e);m.mx=r;const a=s.clientHeight+yi(f.borderTop)+yi(f.borderBottom),u=s.clientWidth+yi(f.borderLeft)+yi(f.borderRight);m={mx:r,width:u*o,height:a*o,top:(i-a/2+t)*o,right:(n+u/2)*o,bottom:(i+a/2+t)*o,left:(n-u/2)*o}}}return this.rects.has(r)?Object.assign(this.rects.get(r),m):this.rects.set(r,m),{rect:m,isInPositionFixedChain:g||i}}onBeforeMount(e,t){}onMounted(e,t,n){e===JM.BODY&&this.elements.set(t,n),this._onDone(e,t)}onBeforeUpdate(e,t){}onUpdated(e,t,n){e===JM.BODY&&this.elements.set(t,n),this._onDone(e,t)}onBeforeUnmount(e,t){}onUnmounted(e,t){this._onDone(e,t),this._gcDelayer.trigger((()=>this._gc()))}_onDone(e,t){this.measure()}_gc(){const e=new Set,t=this.model.getValue();if(t){for(const n of t.nodes)e.add(n.id);for(const[t,n]of this.elements)e.has(t)||this.elements.delete(t)}}hitTest(e,t){const n=[],i=this.viewModel.root.value,r=[{node:i}],{scrollX:o,scrollY:s}=this.frameElement.contentWindow,a=(i,r)=>{const{id:a}=i;if(a_.shouldNotBeSelected(a))return;const l=this.elements.get(a);if(!l)return;if(l.hasAttribute("data-in-shadow"))return;const c=this.rects.get(a);if(!c)return;let d=e,u=t;r&&(d-=o,u-=s);const{top:h,left:p,bottom:f,right:g,mx:m,width:_,height:v}=c;if(m){const e=d-(p+g)/2,t=u-(h+f)/2,i=m.a*e+m.b*t,r=m.a*t-m.b*e,o=+v/2,s=-_/2,l=+_/2;-v/2<=r&&o>=r&&s<=i&&l>=i&&n.unshift(a)}else h<=u&&f>=u&&p<=d&&g>=d&&n.unshift(a)};for(;r.length;){const{node:e,isInPositionFixedChain:t}=r.pop();a(e,t);for(let n=0,o=e.children.length;n<o;n++){const s=e.children[o-n-1];let a=!1;if(e===i){a=!ao(this.model.getNodeById(s.id))}const l=t||a;r.push({node:s,isInPositionFixedChain:l})}}return n}getElementRect(e){const t=$_(e);if(!t)throw new Error("400");return this.getElementRectById(t)}getElementRectById(e){return w({},this.rects.get(e))}scale(e){e!==this._scale&&(this._scale=e)}};VN=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?BN(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&FN(t,n,o),o})([jN(1,zr),jN(2,No),jN(3,To)],VN);var zN,KN;(KN=zN||(zN={}))[KN.vertical=0]="vertical",KN[KN.horizontal=1]="horizontal";class WN extends jo{constructor(){super(),C(this,"_onDevToolsToggled",this._register(new ws)),C(this,"onDevToolsToggled",this._onDevToolsToggled.event),C(this,"isOpen",!1),C(this,"orientation");const e=new Bp;this._register(e),e.cancelAndSet((()=>this.detect()),200),this._register(Ng(window,Og,this.detect.bind(this))),this._register(Ng(window,Ig,this.detect.bind(this)))}detect(){const e=window.outerWidth-window.innerWidth>160,t=window.outerHeight-window.innerHeight>160,n=e?0:1;t&&e||!e&&!t?(this.isOpen&&this._onDevToolsToggled.fire(!1),this.isOpen=!1,this.orientation=void 0):(this.isOpen&&this.orientation===n||this._onDevToolsToggled.fire(!0),this.isOpen=!0,this.orientation=n)}}const HN=Rd({name:"Breadcrumbs",inject:["i18nService"],props:{parts:Array,hasTrigger:Boolean},render(){const{parts:e,hasTrigger:t=!1}=this;return e.length?Zu("div",{className:"breadcrumbs-wrapper"},[Zu("style",{type:"text/css"},[".breadcrumbs-wrapper {\n  position: absolute;\n  transform: translateY(-100%);\n  top: -4px;\n  left: 0;\n  display: flex;\n  flex-direction: row;\n  font-family: sans-serif;\n  -webkit-font-smoothing: antialiased;\n  font-size: 10px;\n  line-height: 1.2;\n  color: #c3daff;\n  cursor: default;\n  user-select: none;\n}\n\n.breadcrumbs {\n  background: #116dff;\n  display: flex;\n  align-items: center;\n  border-radius: 4px;\n  width: fit-content;\n  white-space: nowrap;\n  padding: 0 8px;\n  line-height: 20px;\n  margin-right: 4px;\n  max-width: 500px;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n.breadcrumbs::-webkit-scrollbar {\n  display: none;\n}\n\n.breadcrumbs_part:hover {\n  color: #ffffff;\n  cursor: pointer;\n}\n\n.breadcrumbs_part {\n  max-width: 0;\n  visibility: hidden;\n}\n\n.breadcrumbs_part:first-child,\n.breadcrumbs:hover .breadcrumbs_part {\n  max-width: fit-content;\n  visibility: visible;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n\n.chevron {\n  fill: hsla(0, 0%, 100%, 0.7);\n  margin-top: 2px;\n  margin-right: 4px;\n  transform: rotate(180deg);\n}\n\n.breadcrumbs_part:first-child .chevron {\n  transform: rotate(180deg);\n}\n\n.breadcrumbs:hover .chevron {\n  transform: rotate(180deg);\n}\n\n.trigger-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n  background: #ff4f95;\n  border-radius: 4px;\n}\n\n.trigger-icon svg {\n  display: block;\n  width: 16px;\n  height: 16px;\n  fill: #ffffff;\n}\n"]),Zu("div",{className:"breadcrumbs"},[e.map(((e,t)=>Zu("div",{className:"breadcrumbs_part","data-fprt":"breadcrumbs","data-detail":e.id},[t>0&&Zu("svg",{xmlns:"http://www.w3.org/2000/svg",width:"4",height:"7",viewBox:"0 0 4 7",class:"chevron"},[Zu("path",{d:"M3.737 3.737l-3-3-.473.473 2.527 2.527L.264 6.264l.473.473z"},null)]),Zu("span",{className:"item"},[this.i18nService.t(e.label)])])))]),t&&Zu("div",{className:"trigger-icon"},[Zu("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",role:"img","aria-hidden":"true"},[Zu("path",{d:"M13 1L5 13H10V23L18 10H13V1Z"},null)])])]):null}});var $N=Object.defineProperty,qN=Object.getOwnPropertyDescriptor,YN=(e,t)=>(n,i)=>t(n,i,e);let GN=1,XN=class extends jo{constructor(e,t,n){super(),C(this,"_widgets",[]),C(this,"_layers",new Map),C(this,"domNode"),C(this,"wrapper"),C(this,"scrollableContainer"),C(this,"_toolbarProps"),C(this,"_toolbar"),C(this,"_outline"),C(this,"_outlineProps"),C(this,"_height",0),C(this,"_scrollTop",0),C(this,"_scrollLeft",0),this.view=t,this.i18nService=n;const i=document.createElement("div");e.appendChild(i),Object.assign(i.style,{position:"absolute",zIndex:100,top:0,left:0,width:0,height:0,"transform-origin":"top center"});const r=document.createElement("div");i.appendChild(r),this.wrapper=i,this.domNode=r,a_.write(r,r_.CanvasOverlay),Object.assign(r.style,{position:"absolute",top:"0px",left:"0px",width:"0px","transform-origin":"0 0",transform:"translateX(50%)"}),this.scrollableContainer=document.createElement("div"),this.scrollableContainer.style.position="absolute",this.domNode.appendChild(this.scrollableContainer),di(Ao).forEach((e=>{const t=document.createElement("div");t.dataset.layer=e,this._layers.set(e,t),this.scrollableContainer.appendChild(t)})),this.mountToolbar(),this.mountOutline()}transform(e,t,n){const i=Hi(n),r={width:Yi(e),transform:i};Object.assign(this.wrapper.style,r)}updateToolbar(e){e(this._toolbarProps)}mountToolbar(){const e=document.createElement("div");var t;this.getLayer(Ao.Medium).appendChild(e),e.setAttribute("data-fprt",r_.ContentWidget),this._toolbarProps=id({show:!1}),this._toolbar=wp((t=this._toolbarProps,()=>{if(!t.show)return null;const{a:e}=t.vmx,n=p_(t),i=wd((()=>{var e,i;return{position:"absolute",top:Yi((null==(e=t.rect)?void 0:e.top)+n.value.offsetTop),left:Yi((null==(i=t.rect)?void 0:i.left)+n.value.offsetLeft),display:t.hideToolbarUI?"none":"flex","justify-content":"center","align-items":"flex-start","flex-direction":"row","transform-origin":"top left",transform:t.vmx?Hi(t.vmx):"none","z-index":"9"}})),r=wd((()=>{var i;return{position:"absolute",top:Yi(n.value.offsetTop+(t.rect.above?t.rect.top+74*e:t.rect.top)),left:Yi(n.value.offsetLeft+(null==(i=t.rect)?void 0:i.left)),transform:t.vmx?Hi(t.vmx):"none","transform-origin":"top left"}}));return Zu(Pu,null,[t.breadcrumbs&&Zu("div",{style:r.value},[Zu(HN,sh(t.breadcrumbs,{hasTrigger:t.hasTrigger}),null)]),Zu("div",{id:"toolbar",className:"toolbar",style:i.value,"data-fprt":"toolbar"},null)])})),this._toolbar.provide("scrolls",this.view.scrolls),this._toolbar.provide("i18nService",this.i18nService),this._toolbar.mount(e),this._register(Fo((()=>this._toolbar.unmount())))}updateOutline(e){e(this._outlineProps)}mountOutline(){const e=document.createElement("div");this.getLayer(Ao.Medium).appendChild(e),e.setAttribute("data-fprt",r_.ContentWidget),this._outlineProps=id([]),this._outline=wp(U_(this._outlineProps)),this._outline.provide("scrolls",this.view.scrolls),this._outline.provide("i18nService",this.i18nService),this._outline.mount(e),this._register(Fo((()=>this._outline.unmount())))}updateViewPort(e,t,n){this._height!==e&&(this.scrollableContainer.style.height=Yi(e),this._height=e),this._scrollTop!==t&&(this.scrollableContainer.style.top=Yi(-t),this._scrollTop=t),this._scrollLeft!==n&&(this.scrollableContainer.style.left=Yi(-n),this._scrollLeft=n)}addWidget(e,t,n=!0){const i=this.getLayer(t),r=document.createElement("div"),o=(++GN).toString();r.dataset.id=o,this._widgets.push({id:o,widget:e,el:r}),i.appendChild(r),e.render(r),n&&a_.write(r,r_.ContentWidget)}removeWidget(e){const t=Mr(this._widgets,(t=>t.widget===e));if(t<0)return void console.error("404");const n=this._widgets[t];n.el.style.display="none",this._widgets.splice(t,1),Pp((()=>{n.el.remove()}))}getLayer(e){if(!this._layers.has(e))throw new Error("500");return this._layers.get(e)}getWidgetById(e){const t=Po(this._widgets,(t=>t.id===e));return t?t.widget:null}dispose(){super.dispose(),this._widgets.forEach((({el:e})=>e.remove())),this._widgets.length=0,this.domNode.remove()}show(){this.domNode.style.display="block"}hide(){this.domNode.style.display="none"}};XN=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?qN(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&$N(t,n,o),o})([YN(1,No),YN(2,Ol)],XN);class JN extends jo{constructor(e){super(),C(this,"domNode"),C(this,"left"),C(this,"right"),C(this,"leftTag"),C(this,"rightTag");const t=document.createElement("div");e.appendChild(t),this.mountRight(t),this.mountLeft(t),t.className="canvas-resize-wrapper",this.domNode=t}transform(e,t,n){const i=Hi(n),r={width:Yi(e),height:Yi(t),transform:i,transformOrigin:"top center"};Object.assign(this.domNode.style,r),Object.assign(this.left.style,{transform:`scaleX(${1/n.a})`,transformOrigin:"top right"}),Object.assign(this.right.style,{transform:`scaleX(${1/n.a})`,transformOrigin:"top left"}),Object.assign(this.leftTag.style,{transform:`scaleY(${1/n.a}) translate(-50%, -50%)`,transformOrigin:"center center"}),Object.assign(this.rightTag.style,{transform:`scaleY(${1/n.a}) translate(-50%, -50%)`,transformOrigin:"center center"})}mountRight(e){const t=document.createElement("div");t.className="canvas-resize canvas-resize--right";const n=document.createElement("i");n.className="canvas-resize-tag",t.appendChild(n),e.appendChild(t),t.dataset.detail="right",t.setAttribute("data-drag",""),a_.write(t,"canvasResize"),Object.assign(t.style,{width:Yi(16),top:"0px",bottom:"0px",right:Yi(-24),cursor:"ew-resize"}),this.right=t,this.rightTag=n}mountLeft(e){const t=document.createElement("div");t.className="canvas-resize canvas-resize--left";const n=document.createElement("i");n.className="canvas-resize-tag",t.appendChild(n),e.appendChild(t),t.dataset.detail="left",t.setAttribute("data-drag",""),a_.write(t,"canvasResize"),Object.assign(t.style,{width:Yi(16),top:"0px",bottom:"0px",left:Yi(-24),cursor:"ew-resize"}),this.left=t,this.leftTag=n}dispose(){super.dispose(),this.domNode.remove()}}class QN{constructor(){C(this,"_hooks",new Bo),C(this,"_ctx"),C(this,"mask")}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this.mask&&this.mask.remove(),this._hooks.clear();const n=this._ctx.onStopCallback;this._ctx=null,e&&n&&n(t)}isMonitoring(){return!!this._ctx}startMonitoring(e,t,n,i,r,o){if(this.isMonitoring())return;this._ctx={mouseMoveCallback:r,initialButtons:i,initialElement:n,onStopCallback:o};const s=n.ownerDocument.defaultView,a=t.contentWindow,l=e.ownerDocument.defaultView;if(s!==a)this.coverUpIframe(n);else{let e=2;this._hooks.add(Ng(a,yg,(t=>{t.buttons!==i||t.buttons===i&&0===i?e>0?e--:this.stopMonitoring(!0):this._ctx.mouseMoveCallback(t)}))),this._hooks.add(Ng(a,_g,(e=>{this.stopMonitoring(!0,e)})))}this._hooks.add(Ng(l,yg,(e=>{e.buttons===i?this._ctx.mouseMoveCallback(e):this.stopMonitoring(!0)}))),this._hooks.add(Ng(l,_g,(e=>{this.stopMonitoring(!0,e)}))),this._hooks.add(Ng(l,Og,(()=>{this.stopMonitoring(!0)}))),this._hooks.add(Ng(l.document,Tg,(()=>{document.hidden&&this.stopMonitoring(!0)})))}coverUpIframe(e){const t=document.createElement("div"),n=getComputedStyle(e);Object.assign(t.style,{position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",zIndex:"100",opacity:"0",cursor:n.cursor}),t.className="mask",e.ownerDocument.body.appendChild(t),this.mask=t}}var ZN=Object.defineProperty,eA=Object.getOwnPropertyDescriptor,tA=(e,t)=>(n,i)=>t(n,i,e);let nA=class extends jo{constructor(e,t,n,i,r,o,s){super(),C(this,"_contentWidgets",new Set),C(this,"_onMouseUp",this._register(new ws)),C(this,"onMouseUp",this._onMouseUp.event),C(this,"_onMouseDown",this._register(new ws)),C(this,"onMouseDown",this._onMouseDown.event),C(this,"_onMouseDrag",this._register(new ws)),C(this,"onMouseDrag",this._onMouseDrag.event),C(this,"_onMouseDragStart",this._register(new ws)),C(this,"onMouseDragStart",this._onMouseDragStart.event),C(this,"_onMouseDrop",this._register(new ws)),C(this,"onMouseDrop",this._onMouseDrop.event),C(this,"_onMouseDropCanceled",this._register(new ws)),C(this,"onMouseDropCanceled",this._onMouseDropCanceled.event),C(this,"_onContextMenu",this._register(new ws)),C(this,"onContextMenu",this._onContextMenu.event),C(this,"_onMouseMove",this._register(new ws)),C(this,"onMouseMove",this._onMouseMove.event),C(this,"_onMouseLeave",this._register(new ws)),C(this,"onMouseLeave",this._onMouseLeave.event),C(this,"_onMouseEnter",this._register(new ws)),C(this,"onMouseEnter",this._onMouseEnter.event),C(this,"_onDbClick",this._register(new ws)),C(this,"onDbClick",this._onDbClick.event),C(this,"_onPositionUpdated",this._register(new ws)),C(this,"onPositionUpdated",this._onPositionUpdated.event),C(this,"_onViewportUpdated",this._register(new ws)),C(this,"onViewportUpdated",this._onViewportUpdated.event),C(this,"_onWorkspaceTreeUpdated",this._register(new ws)),C(this,"onWorkspaceTreeUpdated",this._onWorkspaceTreeUpdated.event),C(this,"pointerHandler"),C(this,"positionMonitor"),C(this,"mouseMoveMonitor"),C(this,"domNode"),C(this,"canvasHostDomNode"),C(this,"boundaryDomNode"),C(this,"viewCanvas"),C(this,"canvasOverlay"),C(this,"outerOverlay"),C(this,"canvasResizer"),C(this,"iframeReserved"),C(this,"_scrolls"),C(this,"_rootRectCache"),C(this,"_cachedMedia"),C(this,"disposed",!1),this.model=n,this.resourceService=r,this.contextKeyService=o,this.commandService=s,i.store(No,this),this._scrolls=id({scrollX:0,scrollY:0}),this.boundaryDomNode=e,this.boundaryDomNode.style.overflow="auto hidden",this.domNode=document.createElement("div"),e.appendChild(this.domNode),this._register(Fo((()=>this.domNode.remove()))),this.domNode.style.position="relative";const a=new LN;a.onContextMenu=e=>this._onContextMenu.fire(e),a.onMouseMove=e=>this._onMouseMove.fire(e),a.onMouseLeave=e=>this._onMouseLeave.fire(e),a.onMouseEnter=e=>this._onMouseEnter.fire(e),a.onMouseDown=e=>this._onMouseDown.fire(e),a.onMouseUp=e=>this._onMouseUp.fire(e),a.onMouseDrag=e=>this._onMouseDrag.fire(e),a.onMouseDragStart=e=>this._onMouseDragStart.fire(e),a.onMouseDrop=e=>this._onMouseDrop.fire(e),a.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),a.onDbClick=e=>this._onDbClick.fire(e),this.canvasResizer=this._register(new JN(this.domNode)),this.mouseMoveMonitor=this._register(new QN);const l=document.createElement("iframe");l.title="editor",this.domNode.appendChild(l);const c=getComputedStyle(e),d=parseFloat(c.paddingTop),u=parseFloat(c.paddingBottom);Object.assign(l.style,{border:"none",transform:"scale(1) translateZ(0px)",transformOrigin:"left top",transformStyle:"preserve-3d",width:"100%","transform-origin":"top center",height:`calc(100% - ${Yi(d+u)})`}),l.focus(),this.canvasHostDomNode=l,this._register(Fo((()=>l.remove()))),this._register(this.positionMonitor=i.createInstance(VN,l));const h=new UN(t,a);this._register(this.viewCanvas=i.createInstance(RN,l,this.positionMonitor)),this.canvasOverlay=this._register(new PN(l,this)),this.outerOverlay=this._register(i.createInstance(XN,this.domNode)),this._register(this.pointerHandler=new GM(h,this._createPointerHandlerHelper())),this._register(o.onDidChangeContext((e=>{if(e.affectsSome(new Set([ym.viewMode.key]))){o.getContextKeyValue(ym.viewMode.key)===pm.Preview?(this.canvasOverlay.hide(),this.outerOverlay.hide(),this.updateCanvasCursor(Li.default)):(this.canvasOverlay.show(),this.outerOverlay.show())}}))),this._register(Ng(this.canvasHostDomNode.contentWindow,Sg,(()=>this.handleScroll()),{passive:!1})),this._register(Ng(this.canvasHostDomNode.contentWindow,Eg,(()=>this.handleIFrameResize()))),this._register(Ng(window,Eg,(()=>this.handleWindowResize()))),this._register(this.positionMonitor.onUpdate((()=>{this.handleScroll(),this._onPositionUpdated.fire(),this._updateResizer()}))),this._register(this.positionMonitor.onWorkspaceTreeUpdated((()=>this._onWorkspaceTreeUpdated.fire()))),this._register(i.createInstance(Hg,l.contentDocument.body));this._register(new WN).onDevToolsToggled((e=>{this.positionMonitor.measure()}))}get scrolls(){return this._scrolls}_createPointerHandlerHelper(){return{viewDomNode:this.domNode,canvasHostDomNode:this.canvasHostDomNode,boundaryDomNode:this.boundaryDomNode,hitTest:(e,t)=>this.positionMonitor.hitTest(e,t).map((e=>this.viewCanvas.body.querySelector(`[data-fprt="${e}"]`))).filter(Boolean),getContentWidgetById:e=>this.canvasOverlay.getWidgetById(e),mouseMoveMonitor:this.mouseMoveMonitor,getViewport:()=>this.getViewport(),reMeasureCanvasRect:()=>this.reMeasureCanvasRect(),getEditorMode:()=>this.contextKeyService.getContextKeyValue(ym.viewMode.key),getEditingMode:()=>this.contextKeyService.getContextKeyValue(ym.editingMode.key)}}handleScroll(){if(this.isInPreviewMode())return;if(!this.canvasHostDomNode.contentDocument)return;const{scrollX:e,scrollY:t}=this.canvasHostDomNode.contentWindow;this._scrolls.scrollX=e,this._scrolls.scrollY=t;const{body:n}=this.canvasHostDomNode.contentDocument,{firstElementChild:i}=n,r=i.getBoundingClientRect().height,o=n.scrollTop,s=n.scrollLeft;this.canvasOverlay.updateViewPort(r,o,s),this.outerOverlay.updateViewPort(r,o,s)}handleIFrameResize(){this._doGetCurrentViewport()}handleWindowResize(){this.commandService.executeCommand("fitCanvas")}addContentWidget(e,t,n=!0){this._contentWidgets.has(e)&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets.add(e),this.canvasOverlay.addWidget(e,t,n)}removeContentWidget(e){if(!this._contentWidgets.has(e))throw new Error("404");e.dispose(),this._contentWidgets.delete(e),this.canvasOverlay.removeWidget(e)}addOuterWidget(e,t,n=!0){this._contentWidgets.has(e)&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets.add(e),this.outerOverlay.addWidget(e,t,n)}removeOuterWidget(e){if(!this._contentWidgets.has(e))throw new Error("404");e.dispose(),this._contentWidgets.delete(e),this.outerOverlay.removeWidget(e)}updateOutline(e){this.outerOverlay.updateOutline(e)}updateToolbar(e){this.outerOverlay.updateToolbar(e)}getElementRectById(e){if(":viewport"===e){const e=this.getViewport();return{top:0,left:0,right:e.logicWidth,bottom:e.logicHeight,width:e.logicWidth,height:e.logicHeight}}return this.positionMonitor.getElementRectById(e)}getGroupRectByIds(e,t=!0){if(e.length<=0)throw new Error("500");const n=e.map((e=>this.getElementRectById(e))).map((e=>t?E_(e):e)),i={left:Math.min(...n.map((e=>e.left))),right:Math.max(...n.map((e=>e.right))),top:Math.min(...n.map((e=>e.top))),bottom:Math.max(...n.map((e=>e.bottom)))};return b(w({},i),{width:i.right-i.left,height:i.bottom-i.top})}setViewport(e,t,n){let i;if(i=Number.isFinite(n)?{a:n,b:0,c:0,d:n,tx:0,ty:0}:n,e<1)throw new Error("400");const r=Hi(i),o={width:Yi(e),height:Yi(t),transform:r},{a:s,d:a}=i;Object.assign(this.domNode.style,{width:Yi(e*s),height:Yi(t*a)});const l=Math.min(this.getElementRectById("root").height,t);Object.assign(this.canvasHostDomNode.style,o),this.canvasResizer.transform(e,l,i),this.outerOverlay.transform(e,t,i),this._doGetCurrentViewport(),this._onViewportUpdated.fire()}_updateResizer(){var e;const t=this.getElementRectById("root");if((null==(e=this._rootRectCache)?void 0:e.height)!==t.height){const{logicWidth:e,logicHeight:n,mx:i}=this.getViewport(),r=Math.min(this.getElementRectById("root").height,n);this.canvasResizer.transform(e,r,i),this._rootRectCache=t}}_getStylesheets(){return this.canvasHostDomNode.contentDocument.styleSheets}getViewport(){return this._cachedMedia||this._doGetCurrentViewport(),this._cachedMedia}_doGetCurrentViewport(){if(!this.canvasHostDomNode.contentWindow)return;const e=this.canvasHostDomNode.contentWindow.innerWidth,t=this.canvasHostDomNode.contentWindow.innerHeight,n=getComputedStyle(this.canvasHostDomNode),i="none"===n.transform?y_.Identity:y_.parse(n.transform),r=i.a;i.a!==i.d&&console.error("500");const o={logicWidth:parseFloat(n.width),logicHeight:parseFloat(n.height),visualWidth:Math.round(e*r),visualHeight:Math.round(t*r),scale:r,mx:i};return this._cachedMedia=o,o}getElementById(e){if(":viewport"===e)return this.viewCanvas.body;const t="root"===e?"canvas":e;return this.viewCanvas.body.querySelector(`[data-fprt="${t}"]`)}getComputedStyleOfId(e){const t=this.getElementById(e);if(!t)throw new Error("404");return getComputedStyle(t)}getContainingBlockOfId(e){return function(e){if(void 0===e)throw new Error('"el" parameter is required.');if(!(e instanceof Element))throw new Error('"el" parameter must be a Element instance.');const{position:t}=getComputedStyle(e);if("static"===t||"relative"===t){let t=e.parentElement;for(;t;){const{display:e}=getComputedStyle(t);if("block"===e||"inline-block"===e||"list-item"===e||"table"===e||"flex"===e||"grid"===e)return t;t=t.parentElement}}if("absolute"===t){let t=e.parentElement;for(;t;){const{position:e,transform:n,filter:i,willChange:r}=getComputedStyle(t);if("static"!==e||"none"!==n||"transform"===r||"perspective"===r||"none"!==i||"filter"===r)return t;t=t.parentElement}return e.ownerDocument}if("fixed"===t){let t=e.parentElement;for(;t;){const{transform:e,filter:n,willChange:i}=getComputedStyle(t);if("none"!==e||"transform"===i||"perspective"===i||"none"!==n||"filter"===i)return t;t=t.parentElement}return e.ownerDocument.defaultView}return null}(this.getElementById(e))}getElementFingerPrint(e){return $_(e)}getViewCanvasCenterPos(){var e,t;const n=null!=(t=null==(e=this.canvasHostDomNode)?void 0:e.contentDocument.querySelector("body").scrollTop)?t:0,{logicWidth:i,logicHeight:r}=this.getViewport();return{x:i/2,y:n+r/2}}hitTest(e,t){return this.positionMonitor.hitTest(e,t)}scrollNodeIntoView(e,t){const n=this.canvasHostDomNode.contentDocument.querySelector(`.${e}`);if(!n)return;const{logicHeight:i,scale:r}=this.getViewport(),o=this.canvasHostDomNode.contentDocument.body,s=o.scrollTop,a=i/r,l=s,c=l+a,d=n.getBoundingClientRect(),u=d.top+s;if(u>l&&u<c)return;const h=u+d.height/2-a/2;if(!t)return void(o.scrollTop=h);const p=(h-s)/20;let f=0;const g=setInterval((()=>{o.scrollTop+=p,f++,f>20&&clearInterval(g)}),15)}getNodesFromVector(e){const{model:t}=this,{x:n,y:i}=e,r=this.hitTest(n,i);return t.queryNodes((e=>r.indexOf(e.id)>-1)).sort(((e,t)=>r.indexOf(e.id)-r.indexOf(t.id)))}createStyleFromHitPosition(e,t,n){const i=Object.create(null),r=this.getViewport();let o=this.getElementRectById(t.id);const s=this.getComputedStyleOfId(t.id);if(vr(s)){const t=w({},wr);if(!n.width||!qi(n.width)){const i=Zi(n.width)||Fi.px;t.width=tv(e.width,"width",i,o,r)}if(!n.height||!qi(n.height)){const i=Zi(n.height)||Fi.px;t.height=tv(e.height,"height",i,o,r)}return t}const a=Object.create(null),{left:l,top:c}=e,d=sw({x:l,y:c},n,o,s);d.containerRect&&(o=d.containerRect),Object.assign(a,d);const{dockStatus:u}=aw(e,n,o,s,r,!0,!1);Object.assign(a,u);const h="flex"===s.display,p="grid"===s.display;if(h&&"column"!==s.flexDirection)throw new Error("500");if(!h&&!p)throw new Error("500");const f=lw(e,n,o,s,a,r);return Object.assign(i,f),i}internal_disconnect(){this.positionMonitor.disconnect()}internal_connect(){this.positionMonitor.connect()}updateCanvasCursor(e){if(this.isInPreviewMode())return;const t=[this.canvasHostDomNode.contentDocument.body,this.boundaryDomNode];for(const n of t){n.style.cursor!==e&&(n.style.cursor=e)}}isInPreviewMode(){return this.contextKeyService.getContextKeyValue(ym.viewMode.key)===pm.Preview}nextTick(e,t=(()=>!0)){const n=this.onPositionUpdated((()=>{t()&&(n.dispose(),e())}))}reMeasureCanvasRect(){this.positionMonitor.measure()}internal_getWidgetInnerHTML(){return Array.from(this.viewCanvas.body.querySelectorAll("web-widget")).reduce(((e,t)=>(e[$_(t.parentElement)]=t.shadowRoot.innerHTML,e)),Object.create(null))}dispose(){super.dispose(),this.disposed=!0,this.iframeReserved&&this.iframeReserved.remove()}};function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iA(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nA=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?eA(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&ZN(t,n,o),o})([tA(1,To),tA(2,zr),tA(3,Br),tA(4,Ay),tA(5,Df),tA(6,eg)],nA);var oA={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},sA=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};av(this,e),this.init(t,n)}return cv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||oA,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,rA(rA({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),e}()),aA=function(){function e(){av(this,e),this.observers={}}return cv(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.observers[e]){var r=[].concat(this.observers[e]);r.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function lA(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function cA(e){return null==e?"":""+e}function dA(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function uA(e,t,n){function i(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return r()?{}:{obj:e,k:i(o.shift())}}function hA(e,t,n){var i=uA(e,t,Object);i.obj[i.k]=n}function pA(e,t){var n=uA(e,t),i=n.obj,r=n.k;if(i)return i[r]}function fA(e,t,n){var i=pA(e,n);return void 0!==i?i:pA(t,n)}function gA(e,t,n){for(var i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?n&&(e[i]=t[i]):gA(e[i],t[i],n):e[i]=t[i]);return e}function mA(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function vA(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return _A[e]})):e}var yA="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,wA=[" ",",","?","!",";"];function bA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bA(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}function kA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),r=e,o=0;o<i.length;++o){if(!r)return;if("string"==typeof r[i[o]]&&o+1<i.length)return;if(void 0===r[i[o]]){for(var s=2,a=i.slice(o,o+s).join(n),l=r[a];void 0===l&&i.length>o+s;)s++,l=r[a=i.slice(o,o+s).join(n)];if(void 0===l)return;if(t.endsWith(a)){if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a]}var c=i.slice(o+s).join(n);return c?kA(l,c,n):void 0}r=r[i[o]]}return r}}var EA=function(e){hv(n,aA);var t=CA(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return av(this,n),i=t.call(this),yA&&aA.call(dv(i)),i.data=e||{},i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return cv(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(s=e.split("."));var a=pA(this.data,s);return a||!o||"string"!=typeof n?a:kA(this.data&&this.data[e]&&this.data[e][t],n,r)}},{key:"addResource",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=t,t=(s=e.split("."))[1]),this.addNamespaces(t),hA(this.data,s,i),r.silent||this.emit("added",e,t,n,i)}},{key:"addResources",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});i.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(i=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var a=pA(this.data,s)||{};i?gA(a,n,r):a=xA(xA({},a),n),hA(this.data,s,a),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?xA(xA({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(),SA={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,r){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,i,r))})),t}};function IA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function OA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IA(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}var MA={},NA=function(e){hv(n,aA);var t=TA(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return av(this,n),i=t.call(this),yA&&aA.call(dv(i)),dA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,dv(i)),i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=sA.create("translator"),i}return cv(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,r=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var i=wA.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!r.test(e);if(!o){var s=e.indexOf(n);s>0&&!r.test(e.substring(0,s))&&(o=!0)}return o}(e,n,i));if(o&&!s){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:r};var l=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(r=l.shift()),e=l.join(i)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}}},{key:"translate",value:function(e,t,i){var r=this;if("object"!==sv(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,s=this.extractFromKey(e[e.length-1],t),a=s.key,l=s.namespaces,c=l[l.length-1],d=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(u){var h=t.nsSeparator||this.options.nsSeparator;return c+h+a}return a}var p=this.resolve(e,t),f=p&&p.res,g=p&&p.usedKey||a,m=p&&p.exactUsedKey||a,_=Object.prototype.toString.apply(f),v=["[object Number]","[object Function]","[object RegExp]"],y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(w&&f&&b&&v.indexOf(_)<0&&("string"!=typeof y||"[object Array]"!==_)){if(!t.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,OA(OA({},t),{},{ns:l})):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(o){var x="[object Array]"===_,C=x?[]:{},k=x?m:g;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var S="".concat(k).concat(o).concat(E);C[E]=this.translate(S,OA(OA({},t),{joinArrays:!1,ns:l})),C[E]===S&&(C[E]=f[E])}f=C}}else if(w&&"string"==typeof y&&"[object Array]"===_)(f=f.join(y))&&(f=this.extendTranslation(f,e,t,i));else{var I=!1,O=!1,T=void 0!==t.count&&"string"!=typeof t.count,M=n.hasDefaultValue(t),N=T?this.pluralResolver.getSuffix(d,t.count,t):"",A=t["defaultValue".concat(N)]||t.defaultValue;!this.isValidLookup(f)&&M&&(I=!0,f=A),this.isValidLookup(f)||(O=!0,f=a);var R=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,D=R&&O?void 0:f,P=M&&A!==f&&this.options.updateMissing;if(O||I||P){if(this.logger.log(P?"updateKey":"missingKey",d,c,a,P?A:f),o){var L=this.resolve(a,OA(OA({},t),{},{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var B=0;B<F.length;B++)U.push(F[B]);else"all"===this.options.saveMissingTo?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);var j=function(e,n,i){var o=M&&i!==f?i:D;r.options.missingKeyHandler?r.options.missingKeyHandler(e,c,n,o,P,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,c,n,o,P,t),r.emit("missingKey",e,c,n,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?U.forEach((function(e){r.pluralResolver.getSuffixes(e,t).forEach((function(n){j([e],a+n,t["defaultValue".concat(n)]||A)}))})):j(U,a,A))}f=this.extendTranslation(f,e,t,p,i),O&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(c,":").concat(a)),(O||I)&&this.options.parseMissingKeyHandler&&(f="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(a,I?f:void 0):this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(OA(OA({},n),{interpolation:OA(OA({},this.options.interpolation),n.interpolation)}));var s,a="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var l=e.match(this.interpolator.nestingRegexp);s=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=OA(OA({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),a){var d=e.match(this.interpolator.nestingRegexp);s<(d&&d.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(t[0])),null):o.translate.apply(o,i.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var u=n.postProcess||this.options.postProcess,h="string"==typeof u?[u]:u;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=SA.handle(h,e,t,this.options&&this.options.postProcessPassResolved?OA({i18nResolved:i},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var l=s.extractFromKey(e,a),c=l.key;n=c;var d=l.namespaces;s.options.fallbackNS&&(d=d.concat(s.options.fallbackNS));var u=void 0!==a.count&&"string"!=typeof a.count,h=u&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),p=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);d.forEach((function(e){s.isValidLookup(t)||(o=e,!MA["".concat(f[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(MA["".concat(f[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!s.isValidLookup(t)){r=n;var o,l=[c];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(l,c,n,e,a);else{var d;u&&(d=s.pluralResolver.getSuffix(n,a.count,a));var f="_zero";if(u&&(l.push(c+d),h&&l.push(c+f)),p){var g="".concat(c).concat(s.options.contextSeparator).concat(a.context);l.push(g),u&&(l.push(g+d),h&&l.push(g+f))}}for(;o=l.pop();)s.isValidLookup(t)||(i=o,t=s.getResource(n,e,o,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),n}();function AA(e){return e.charAt(0).toUpperCase()+e.slice(1)}var RA=function(){function e(t){av(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=sA.create("languageUtils")}return cv(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=AA(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=AA(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=AA(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var i=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(i)||(t=i)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var i=n.getLanguagePartFromCode(e);if(n.isSupportedCode(i))return t=i;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(i))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=function(e){e&&(n.isSupportedCode(e)?r.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),i.forEach((function(e){r.indexOf(e)<0&&o(n.formatLanguageCode(e))})),r}}]),e}(),DA=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],PA={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},LA=["v1","v2","v3"],UA={zero:0,one:1,two:2,few:3,many:4,other:5};function FA(){var e={};return DA.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:PA[t.fc]}}))})),e}var BA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};av(this,e),this.languageUtils=t,this.options=n,this.logger=sA.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=FA()}return cv(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(e,t){return UA[e]-UA[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):i.numbers.map((function(i){return t.getSuffix(e,i,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(t)):this.getSuffixRetroCompatible(i,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),r=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var o=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!LA.includes(this.options.compatibilityJSON)}}]),e}();function jA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function VA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jA(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};av(this,e),this.logger=sA.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return cv(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:vA,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?mA(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?mA(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?mA(t.nestingPrefix):t.nestingPrefixEscaped||mA("$t("),this.nestingSuffix=t.nestingSuffix?mA(t.nestingSuffix):t.nestingSuffixEscaped||mA(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,i){var r,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var d=function(e){if(e.indexOf(a.formatSeparator)<0){var r=fA(t,l,e);return a.alwaysFormat?a.format(r,void 0,n,VA(VA(VA({},i),t),{},{interpolationkey:e})):r}var o=e.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(fA(t,l,s),c,n,VA(VA(VA({},i),t),{},{interpolationkey:s}))};this.resetRegExp();var u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?c(a.escape(e)):c(e)}}].forEach((function(t){for(s=0;r=t.regex.exec(e);){var n=r[1].trim();if(void 0===(o=d(n)))if("function"==typeof u){var l=u(e,r,i);o="string"==typeof l?l:""}else if(i&&i.hasOwnProperty(n))o="";else{if(h){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=cA(o));var c=t.safeValue(o);if(e=e.replace(r[0],c),h?(t.regex.lastIndex+=c.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=VA({},o);function a(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var i=e.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);e=i[0],r=(r=this.interpolate(r,s)).replace(/'/g,'"');try{s=JSON.parse(r),t&&(s=VA(VA({},t),s))}catch(f8){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),f8),"".concat(e).concat(n).concat(r)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=d.shift(),l=d,c=!0}if((i=t(a.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=cA(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),i=""),c&&(i=l.reduce((function(e,t){return r.format(e,t,o.lng,VA(VA({},o),{},{interpolationkey:n[1].trim()}))}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}]),e}();function KA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function WA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KA(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var HA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};av(this,e),this.logger=sA.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,WA(WA({},n),{},{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,WA({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,WA({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,WA({},n)).format(e)}},this.init(t)}return cv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"format",value:function(e,t,n,i){var r=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var i=e.split("(");t=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===t&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(e){if(e){var t=_v(e.split(":")),i=t[0],r=t.slice(1).join(":");"false"===r.trim()&&(n[i.trim()]=!1),"true"===r.trim()&&(n[i.trim()]=!0),isNaN(r.trim())||(n[i.trim()]=parseInt(r.trim(),10)),n[i.trim()]||(n[i.trim()]=r.trim())}}))}return{formatName:t,formatOptions:n}}(t),s=o.formatName,a=o.formatOptions;if(r.formats[s]){var l=e;try{var c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},d=c.locale||c.lng||i.locale||i.lng||n;l=r.formats[s](e,d,WA(WA(WA({},a),i),c))}catch(u){r.logger.warn(u)}return l}return r.logger.warn("there was no format function for ".concat(s)),e}),e)}}]),e}();function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$A(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}var GA=function(e){hv(n,aA);var t=YA(n);function n(e,i,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return av(this,n),o=t.call(this),yA&&aA.call(dv(o)),o.backend=e,o.store=i,o.services=r,o.languageUtils=r.languageUtils,o.options=s,o.logger=sA.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,s.backend,s),o}return cv(n,[{key:"queueLoad",value:function(e,t,n,i){var r=this,o=[],s=[],a=[],l=[];return e.forEach((function(e){var i=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&r.store.hasResourceBundle(e,t)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),l.indexOf(t)<0&&l.push(t)))})),i||a.push(e)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var i=e.split("|"),r=i[0],o=i[1];t&&this.emit("failedLoading",r,o,t),n&&this.store.addResourceBundle(r,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){var i,a,l,c,d,u;i=n.loaded,a=o,c=uA(i,[r],Object),d=c.obj,u=c.k,d[u]=d[u]||[],l&&(d[u]=d[u].concat(a)),l||d[u].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,l){a&&l&&r<5?setTimeout((function(){i.read.call(i,e,t,n,r+1,2*o,s)}),o):s(a,l)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),t.loaded(e,i,s)}))}},{key:"saveMissing",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,i,null,qA(qA({},o),{},{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,n,i))}}]),n}();function XA(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===sv(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===sv(e[2])||"object"===sv(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function JA(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ZA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QA(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(f8){return!1}}();return function(){var n,i=fv(e);if(t){var r=fv(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return pv(this,n)}}function tR(){}function nR(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var iR=function(e){hv(n,aA);var t=eR(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(av(this,n),e=t.call(this),yA&&aA.call(dv(e)),e.options=JA(i),e.services={},e.logger=sA,e.modules={external:[]},nR(dv(e)),r&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,r),pv(e,dv(e));setTimeout((function(){e.init(i,r)}),0)}return e}return cv(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var i=XA();function r(e){return e?"function"==typeof e?new e:e:null}if(this.options=ZA(ZA(ZA({},i),this.options),JA(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=ZA(ZA({},i.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?sA.init(r(this.modules.logger),this.options):sA.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=HA);var s=new RA(this.options);this.store=new EA(this.options.resources,this.options);var a=this.services;a.logger=sA,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new BA(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(a.formatter=r(o),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new zA(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new GA(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new NA(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=tR),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=lA(),h=function(){var t=function(t,i){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(i),n(t,i)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tR,i=n,r="string"==typeof e?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return i();var o=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(r)s(r);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(e){return s(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return s(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),i(e)}))}else i(null)}},{key:"reloadResources",value:function(e,t,n){var i=lA();return e||(e=this.languages),t||(t=this.options.ns),n||(n=tR),this.services.backendConnector.reload(e,t,(function(e){i.resolve(),n(e)})),i}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&SA.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var i=lA();this.emit("languageChanging",e);var r=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var s="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||r(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,o){o?(r(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(e,t,n){var i=this,r=function e(t,r){var o;if("object"!==sv(r)){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([t,r].concat(a))}else o=ZA({},r);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns;var c=i.options.keySeparator||".",d=n?"".concat(n).concat(c).concat(t):t;return i.t(d,o)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(e,n){var i=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,e)||(!this.services.backendConnector.backend||!(!s(i,e)||r&&!s(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,i=lA();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=lA();"string"==typeof e&&(e=[e]);var i=this.options.preload||[],r=e.filter((function(e){return i.indexOf(e)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tR,r=ZA(ZA(ZA({},this.options),t),{isClone:!0}),o=new n(r),s=["store","services","language"];return s.forEach((function(t){o[t]=e[t]})),o.services=ZA({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new NA(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit.apply(o,[e].concat(n))})),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}();gv(iR,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new iR(e,t)}));var rR=iR.createInstance();rR.createInstance=iR.createInstance,rR.createInstance,rR.init,rR.loadResources,rR.reloadResources,rR.use,rR.changeLanguage,rR.getFixedT,rR.t,rR.exists,rR.setDefaultNamespace,rR.hasLoadedNamespace,rR.loadNamespaces,rR.loadLanguages;var oR={"w.page":"页面",Image:"图片",Container:"容器",Section:"模块",Symbol:"符号",Text:"文字",SVG:"图形",Video:"视频",Page:"页面",WebWidget:"物料",RichText:"富文本",LayouterVert:"布局",LayouterHoriz:"布局",AutoLayouterVert:"垂直排版",AutoLayouterHoriz:"水平排版",Button:"按钮",Title:"标题",Paragraph:"段落","w.design":"设计","w.interaction":"交互","w.animation":"动画","w.animation.presets":"动画效果","w.animation.direction":"方向","w.animation.appearance":"出场","w.animation.transition":"转场","w.animation.none":"无","w.animation.custom":"自定义","w.animation.scroll.key":"关键帧","w.animation.scroll.keyStart":"起始","w.animation.scroll.keyEnd":"结束","w.animation.scroll.scrollProgress":"进度","w.animation.scroll.elementEnterProgress":"元素进入","w.animation.scroll.elementExitProgress":"元素离开","w.animation.timing.effect":"效果","w.animation.timing.effectPreset":"效果预设","w.animation.timing.delay":"延迟","w.animation.timing.duration":"持续时长","w.animation.timing.easing":"缓动","w.animation.appearance.fadeIn":"渐显","w.animation.appearance.clipFade":"显示","w.animation.appearance.clipSlide":"划入","w.animation.appearance.grow":"轻微放大","w.animation.appearance.growBig":"放大","w.animation.appearance.shrink":"轻微缩小","w.animation.appearance.shrinkBig":"缩小","w.animation.appearance.slide":"滑动","w.animation.appearance.flip":"翻转","w.animation.appearance.spin":"旋转进入","w.animation.appearance.zoom":"弹出","w.animation.appearance.drop":"掉落","w.animation.appearance.spring":"弹簧","w.animation.appearance.scroll":"滚动","w.animation.transition.fadeIn":"渐显","w.animation.transition.fadeOut":"渐隐","w.animation.transition.grow":"增大","w.animation.transition.shrink":"收缩","w.animation.transition.slide":"滑动","w.animation.transition.slideGrow":"滑动增大","w.animation.transition.skew":"歪斜","w.animation.transition.swing":"摆动","w.animation.transition.swingGrow":"摆动增大","w.animation.transition.spin":"旋转","w.animation.transform.scale":"缩放","w.animation.transform.translate":"偏移","w.animation.transform.skew":"斜切","w.animation.transform.rotate":"旋转","w.animation.easing.EaseOutQuad":"减速-缓和","w.animation.easing.EaseInQuad":"加速-缓和","w.animation.easing.EaseOutCubic":"减速","w.animation.easing.EaseInCubic":"加速","w.animation.easing.EaseInOutCubic":"加速减速","w.animation.easing.EaseOutBack":"弹出","w.animation.easing.EaseOutElastic":"震荡","w.animation.easing.EaseOutBounce":"弹跳","w.animation.easing.Linear":"线性","w.animation.control.preview":"预览","w.animation.control.finish":"完成","w.animation.control.open":"开启","w.animation.control.close":"关闭","w.animation.control.loop":"循环","w.animation.control.mirror":"镜像","w.animation.control.3d":"3D效果","w.animation.control.animationMissed":"请先添加动画效果","w.animation.control.selectTips":"请选择任意对象，自定义动画效果","w.trigger":"触发","w.trigger.intersection":"进入视图","w.trigger.click":"点击","w.trigger.hover":"悬停","w.trigger.press":"按住","w.trigger.scroll":"页面滚动","w.trigger.mouseenter":"光标移入","w.trigger.mouseleave":"光标移出","w.trigger.mousedown":"鼠标按下","w.trigger.mouseup":"鼠标抬起","w.setting":"设置","w.background.fill":"填充","w.background.gradient":"渐变","w.background.pattern":"图案","w.background.pureColor":"纯色","w.background.angle":"角度","w.background.selectImage":"选择图片","w.background.fillStyle":"填充方式","w.background.fillStyle.cover":"充满","w.background.fillStyle.contain":"适合","w.background.fillStyle.tile":"平铺","w.background.zoom":"缩放","w.padding":"边距","w.unit.auto":"自动","w.unit.fitContent":"适应内容","w.unit.px":"像素 (px)","w.unit.percentage":"百分比 (%)","w.unit.vw":"视窗宽度 (vw)","w.unit.vh":"视窗高度 (vh)","w.display":"图层","w.display.visible":"显示","w.display.hidden":"隐藏","w.layout":"排版","w.layout.position":"位置","w.layout.positionType":"位置类型","w.layout.topOffset":"顶部偏移","w.layout.width":"宽度","w.layout.height":"高度","w.layout.overflow":"溢出","w.layout.scrollDirection":"滚动方向","w.flexibleSize":"尺寸范围","w.flexibleSize.widthRange":"宽度","w.flexibleSize.heightRange":"高度","w.position.default":"默认","w.position.fixed":"固定","w.position.sticky":"粘性","w.overflow.visible":"显示","w.overflow.hidden":"隐藏","w.overflow.scroll":"滚动","w.sizeType.flexible":"弹性","w.sizeType.static":"静态","w.autoLayout":"自动布局","w.autoLayout.direction":"方向","w.autoLayout.gap":"间距","w.appearance":"样式","w.opacity":"透明度","w.border":"描边","w.border.width":"粗细","w.border.style":"类型","w.border.style.solid":"实线","w.border.style.dashed":"虚线","w.shadow":"投影","w.shadow.offset":"偏移","w.shadow.blur":"模糊","w.shadow.spread":"延展","w.shadow.color":"颜色","w.roundedCorner":"圆角","w.roundedCorner.multiple":"多种","w.filter.blur":"图层模糊","w.backdropFilter.blur":"背景模糊","w.link.type.none":"无","w.link.type.site":"网址","w.link.type.anchor":"锚点","w.link.type.phone":"电话号码","w.link.type.email":"邮箱","w.link.href":"选择页面","w.link.target":"标签页打开","w.link.title.anchor":"选择锚点","w.link.title.phone":"电话号码","w.link.title.email":"邮箱地址","w.link.target.self":"当前标签页打开","w.link.target.blank":"新标签页打开","w.link.placeholder.site":"粘贴或输入网址","w.link.placeholder.phone":"粘贴或输入电话号码","w.link.placeholder.email":"粘贴或输入邮箱地址","w.link.anchorEmpty":"暂无锚点","w.dialog.cancel":"取消","w.dialog.confirm":"确定","w.link.listEmpty":"无链接","w.link.listEmpty.desc":"从左侧列表选择要跳转的类型","w.link":"链接","w.anchor":"锚点","w.anchor.name":"锚点名称","w.text":"文本","w.text.fontFamily":"字体","w.text.fontWeight":"字重","w.text.fontSize":"字号","w.text.textAlign":"段落对齐","w.text.lineHeight":"间距","w.text.textDecoration":"装饰","w.text.more":"更多","w.text.list":"列表","w.menu.returnHome":"返回首页","w.menu.import":"文件导入","w.layer.layers":"图层","w.component.add":"添加","w.component.basic":"基础","w.component.title":"标题","w.component.paragraph":"段落","w.component.image":"图片","w.component.resource":"资源库","w.component.layout":"布局","w.component.container":"容器","w.component.titleContent":"这是一个标题","w.component.paragraphContent":"我们都是设计师，因为我们都在刻意设计我们的生活、我们的房间和我们做事的方式。----唐纳德·A·诺曼","w.contextmenu.cut":"剪切","w.contextmenu.copy":"复制","w.contextmenu.paste":"粘贴","w.contextmenu.duplicate":"创建副本","w.contextmenu.rename":"重命名","w.contextmenu.toggleVisibility":"显示/隐藏图层","w.contextmenu.delete":"删除","w.contextmenu.unwrap":"移除容器","w.contextmenu.wrap":"放置到容器中","w.contextmenu.apply":"应用到所有断点","w.contextmenu.apply.success":"已应用到所有断点","w.contextmenu.addAnchor":"设置为锚点","w.contextmenu.sectionOrder":"模块顺序","w.contextmenu.layerOrder":"图层顺序","w.contextmenu.layerUp":"上移","w.contextmenu.layerToTop":"移动到最上方","w.contextmenu.layerDown":"下移","w.contextmenu.layerToBottom":"移动到最下方","w.contextmenu.clipboardInvalid":"请使用快捷键操作：Ctrl + V","w.nav.preview":"预览","w.nav.edit":"返回编辑","w.nav.publish":"发布","w.zoom.zoomIn":"放大","w.zoom.zoomOut":"缩小","w.zoom.100%":"缩放到100%","w.device.adjustTips":"断点必须介于320px与10000px之间","w.device.desktop":"桌面端","w.device.desktop.breakpoint":"编辑效果适合1001px及以上设备显示","w.device.desktop.desc":"从该断点开始编辑。在该断点的编辑会应用在所有断点，除非在更小断点编辑过。","w.device.phone":"移动端","w.device.phone.breakpoint":"编辑效果适合320-750px设备显示","w.device.phone.desc":"在该断点编辑会应用在478px及以下尺寸。","w.device.tablet":"Pad","w.device.tablet.breakpoint":"编辑效果适合751-1000px设备显示","w.device.tablet.desc":"在该断点编辑会应用在1000px及以下尺寸，除非在更小断点编辑过。","ext.market.publish":"发布","ext.market.re-publish":"重新发布","ext.market.enterTitle":"请输入页面标题","ext.market.publishing":"发布中...","ext.market.published":"发布","w.attribute":"自定义<{{name}}>属性","w.attribute.rule":"名称以 data- 开头只能包含字母、数字、破折号(-)、句号(.)、冒号(:)和下划线(_)任何大写字母都会被转换为小写","w.attribute.duplicate":"该名称已被占用","w.attribute.empty":"名称不能为空","w.attribute.add":"添加属性","w.attribute.key":"名称","w.attribute.value":"值","w.attribute.value.placeholder":"自定义","w.unit.fillContainer":"充满容器","ext.market.import.unsupported":"不支持的文件类型","ext.market.import.dropFile":"将 JSON/PSD/Sketch 文件拖拽到此处，或者","ext.market.import.selectFile":"选择文件...","ext.market.import.parsing":"文件解析中...","ext.market.import.import":"文件导入","ext.market.record.networkError":"网络存在异常。","ext.market.record.networkErrorDes":"网络存在异常，请确保网络恢复后再进行操作。","ext.market.record.networkErrorConfirm":"刷新","ext.market.record.networkErrorSaveTip":"网络异常，请等待网络恢复后重新尝试。","ext.market.record.autoSaveError":"自动保存发生异常，请尝试手动 ctrl/cmd + s 保存。","ext.market.record.manualSaveError":"保存失败，请稍后重试。","ext.market.record.backupTips":"该浏览器存在未保存的变更，是否恢复？","ext.market.parser.parseError":"文件解析失败，请检查设计文件是否符合规范。","w.anchor.message.exists":"锚点名称已存在","w.interaction.add":"添加事件","w.interaction.event":"全局自定义事件","w.interaction.trigger":"触发","w.interaction.eventType":"事件名称","w.interaction.value":"值","w.interaction.click":"点击","w.interaction.mouseover":"悬停","w.interaction.mouseenter":"鼠标移入","w.interaction.mouseleave":"鼠标移出","w.interaction.mouseup":"鼠标按下","w.interaction.mousedown":"鼠标抬起","w.text.currentWork":"当前作品","w.text.zh":"中文","w.text.en":"英文","w.component.autoLayout.row":"栏","w.component.autoLayout.col":"列","w.component.autoLayout.scroll":"滑块","w.component.autoLayout.page":"翻页","w.component.autoLayout.wrap":"自动换行","w.autoLayout.wrap":"换行","w.autoLayout.wrap.wrap":"是","w.autoLayout.wrap.nowrap":"否","w.autoLayout.addItem":"添加子项","w.layout.scrollSnap":"滚动吸附","w.layout.scrollSnap.none":"无","w.layout.scrollSnap.mandatory":"强制吸附","w.layout.scrollSnap.proximity":"靠近吸附","w.layout.scrollSnap.left":"开端","w.layout.scrollSnap.center":"居中","w.layout.scrollSnap.right":"末端","w.display.scroll":"__未翻译__","w.node.tagName":"HTML 标签","w.linkOrAnchor":"链接","w.linkOrAnchor.rel":"Rel 属性","w.image.alt":"Alt 属性","w.image":"图像","w.image.ossResize":"图像压缩","w.image.ossResize.maxWidth":"最大宽度","w.image.ossResize.quality":"图像质量"};var sR,aR={"w.page":"Page",Image:"Image",Container:"Container",Section:"Section",Symbol:"Symbol",Text:"Text",SVG:"Shape",Video:"Video",Page:"Page",WebWidget:"WebWidget",RichText:"RichText",LayouterVert:"Layouter",LayouterHoriz:"Layouter",AutoLayouterVert:"AutoLayouterVert",AutoLayouterHoriz:"AutoLayouterHoriz",Button:"Button",Title:"Title",Paragraph:"Paragraph","w.design":"Design","w.animation":"Animation","w.animation.direction":"Direction","w.animation.presets":"Animation Presets","w.animation.appearance":"__未翻译__","w.animation.transition":"__未翻译__","w.animation.none":"None","w.animation.custom":"Custom","w.animation.scroll.key":"__未翻译__","w.animation.scroll.keyStart":"__未翻译__","w.animation.scroll.keyEnd":"__未翻译__","w.animation.scroll.scrollProgress":"__未翻译__","w.animation.scroll.elementEnterProgress":"__未翻译__","w.animation.scroll.elementExitProgress":"__未翻译__","w.animation.timing.effect":"Effect","w.animation.timing.effectPreset":"Effect Preset","w.animation.timing.delay":"Delay","w.animation.timing.duration":"Duration","w.animation.timing.easing":"Easing","w.animation.appearance.fadeIn":"__未翻译__","w.animation.appearance.clipFade":"__未翻译__","w.animation.appearance.clipSlide":"__未翻译__","w.animation.appearance.grow":"__未翻译__","w.animation.appearance.growBig":"__未翻译__","w.animation.appearance.shrink":"__未翻译__","w.animation.appearance.shrinkBig":"__未翻译__","w.animation.appearance.slide":"__未翻译__","w.animation.appearance.flip":"__未翻译__","w.animation.appearance.spin":"__未翻译__","w.animation.appearance.zoom":"__未翻译__","w.animation.appearance.drop":"__未翻译__","w.animation.appearance.spring":"__未翻译__","w.animation.appearance.scroll":"__未翻译__","w.animation.transition.fadeIn":"__未翻译__","w.animation.transition.fadeOut":"__未翻译__","w.animation.transition.grow":"__未翻译__","w.animation.transition.shrink":"__未翻译__","w.animation.transition.slide":"__未翻译__","w.animation.transition.slideGrow":"__未翻译__","w.animation.transition.skew":"__未翻译__","w.animation.transition.swing":"__未翻译__","w.animation.transition.swingGrow":"__未翻译__","w.animation.transition.spin":"__未翻译__","w.animation.transform.scale":"Scale","w.animation.transform.translate":"Translate","w.animation.transform.skew":"Skew","w.animation.transform.rotate":"Rotate","w.animation.easing.EaseOutQuad":"EaseOutQuad","w.animation.easing.EaseInQuad":"EaseInQuad","w.animation.easing.EaseOutCubic":"EaseOutCubic","w.animation.easing.EaseInCubic":"EaseInCubic","w.animation.easing.EaseInOutCubic":"EaseInOutCubic","w.animation.easing.EaseOutBack":"EaseOutBack","w.animation.easing.EaseOutElastic":"EaseOutElastic","w.animation.easing.EaseOutBounce":"EaseOutBounce","w.animation.easing.Linear":"EaseLinear","w.animation.control.preview":"Preview","w.animation.control.finish":"Finish","w.animation.control.open":"Open","w.animation.control.close":"Close","w.animation.control.loop":"Loop","w.animation.control.mirror":"Mirror","w.animation.control.3d":"3D Effect","w.animation.control.animationMissed":"Add animation effect first.","w.animation.control.selectTips":"Select target to add animation effect.","w.trigger":"Trigger","w.trigger.click":"On Click","w.trigger.hover":"On Hover","w.trigger.press":"On Press","w.trigger.scroll":"On Scroll","w.trigger.mouseenter":"Mouse Enter","w.trigger.mouseleave":"Mouse Leave","w.trigger.mousedown":"Mouse Down","w.trigger.mouseup":"Mouse Up","w.setting":"Setting","w.background.gradient":"Gradient","w.background.pattern":"Pattern","w.background.pureColor":"Pure Color","w.background.angle":"Angle","w.background.selectImage":"Select An Image","w.background.fillStyle":"Fill Style","w.background.fillStyle.cover":"Cover","w.background.fillStyle.contain":"Contain","w.background.fillStyle.tile":"Tile","w.background.zoom":"Zoom","w.background.fill":"Fill","w.padding":"Padding","w.unit.auto":"Auto","w.unit.fitContent":"FitContent","w.unit.px":"px","w.unit.percentage":"%","w.unit.vw":"vw","w.unit.vh":"vh","w.display":"Display","w.display.visible":"Visible","w.display.hidden":"Hidden","w.layout":"Layout","w.layout.position":"Position","w.layout.positionType":"Position Type","w.layout.topOffset":"TopOffset","w.layout.width":"Width","w.layout.height":"Height","w.layout.overflow":"Overflow","w.layout.scrollDirection":"Scroll Direction","w.flexibleSize":"Flexible Size","w.flexibleSize.widthRange":"Width Range","w.flexibleSize.heightRange":"Height Range","w.position.default":"Default","w.position.fixed":"Fixed","w.position.sticky":"Sticky","w.overflow.visible":"Visible","w.overflow.hidden":"Hidden","w.overflow.scroll":"Scroll","w.sizeType.flexible":"Flexible","w.sizeType.static":"Static","w.autoLayout":"Auto Layout","w.autoLayout.direction":"Direction","w.autoLayout.gap":"Gap","w.appearance":"Appearance","w.opacity":"Opacity","w.border":"Border","w.border.width":"Width","w.border.style":"Style","w.border.style.solid":"Solid","w.border.style.dashed":"Dashed","w.shadow":"Shadow","w.shadow.offset":"Offset","w.shadow.blur":"Blur","w.shadow.spread":"Spread","w.shadow.color":"Color","w.roundedCorner":"Rounded Corner","w.roundedCorner.multiple":"Multiple","w.filter.blur":"Blur","w.backdropFilter.blur":"Backdrop Blur","w.link.type.none":"None","w.link.type.site":"Site","w.link.type.anchor":"Anchor","w.link.type.phone":"Phone","w.link.type.email":"Email","w.link.href":"__未翻译__","w.link.target":"__未翻译__","w.link.title.anchor":"__未翻译__","w.link.title.phone":"Phone Number","w.link.title.email":"Email Address","w.link.target.self":"__未翻译__","w.link.target.blank":"__未翻译__","w.link.placeholder.site":"__未翻译__","w.link.placeholder.phone":"__未翻译__","w.link.placeholder.email":"__未翻译__","w.link.anchorEmpty":"__未翻译__","w.dialog.cancel":"Cancel","w.dialog.confirm":"Confirm","w.link.listEmpty":"__未翻译__","w.link.listEmpty.desc":"__未翻译__","w.link":"Link","w.anchor":"Anchor","w.anchor.name":"Anchor Name","w.text":"Text","w.text.fontFamily":"Font Family","w.text.fontWeight":"Font Weight","w.text.fontSize":"Font Size","w.text.textAlign":"Text Align","w.text.lineHeight":"Line Height","w.text.textDecoration":"Text Decoration","w.text.more":"More","w.text.list":"List","w.menu.returnHome":"Return Home","w.menu.import":"Import File","w.layer.layers":"Layers","w.component.add":"Add","w.component.basic":"Basic","w.component.title":"Title","w.component.paragraph":"Paragraph","w.component.image":"Image","w.component.resource":"Resource","w.component.layout":"Layout","w.component.container":"Container","w.component.titleContent":"__未翻译__","w.component.paragraphContent":"__未翻译__","w.contextmenu.cut":"Cut","w.contextmenu.copy":"Copy","w.contextmenu.paste":"Paste","w.contextmenu.duplicate":"Duplicate","w.contextmenu.rename":"Rename","w.contextmenu.toggleVisibility":"Toggle Visibility","w.contextmenu.delete":"Delete","w.contextmenu.unwrap":"Remove Container","w.contextmenu.wrap":"Place in Container","w.contextmenu.apply":"Apply to All Breakpoints","w.contextmenu.apply.success":"__未翻译__","w.contextmenu.addAnchor":"Add Anchor","w.contextmenu.sectionOrder":"Section Order","w.contextmenu.layerOrder":"Layer Order","w.contextmenu.layerUp":"Layer Up","w.contextmenu.layerToTop":"Layer To Top","w.contextmenu.layerDown":"Layer Down","w.contextmenu.layerToBottom":"Layer To Bottom","w.contextmenu.clipboardInvalid":"Try Command Ctrl + V Please.","w.nav.preview":"Preview","w.nav.edit":"Edit","w.nav.publish":"Publish","w.zoom.zoomIn":"Zoom In","w.zoom.zoomOut":"Zoom Out","w.zoom.100%":"100%","w.device.adjustTips":"__未翻译__","w.device.desktop":"__未翻译__","w.device.desktop.breakpoint":"__未翻译__","w.device.desktop.desc":"__未翻译__","w.device.phone":"__未翻译__","w.device.phone.breakpoint":"__未翻译__","w.device.phone.desc":"__未翻译__","w.device.tablet":"__未翻译__","w.device.tablet.breakpoint":"__未翻译__","w.device.tablet.desc":"__未翻译__","ext.market.publish":"Publish","ext.market.re-publish":"Republish","ext.market.enterTitle":"Enter Page Title","ext.market.publishing":"Publishing...","ext.market.published":"Publish","w.attribute":"Define <{{name}}> Attribute","w.attribute.rule":"__未翻译__","w.attribute.duplicate":"__未翻译__","w.attribute.empty":"__未翻译__","w.attribute.add":"Add Attribute","w.attribute.key":"Key","w.attribute.value":"Value","w.attribute.value.placeholder":"Custom","w.unit.fillContainer":"__未翻译__","ext.market.import.unsupported":"__未翻译__","ext.market.import.dropFile":"__未翻译__","ext.market.import.selectFile":"__未翻译__","ext.market.import.parsing":"__未翻译__","ext.market.import.import":"__未翻译__","ext.market.record.networkError":"There is a network exception.","ext.market.record.networkErrorDes":"Unprocessed changes are saved in your browser. When the network is restored, these changes are automatically saved to a cloud file.","ext.market.record.networkErrorConfirm":"Refresh","ext.market.record.networkErrorSaveTip":"When the network is restored, unsaved changes are automatically saved to the cloud file.","ext.market.record.autoSaveError":"An exception occurred with auto-save, please try to save manually ctrl/cmd + s.","ext.market.record.manualSaveError":"Save failed, please try again later.","ext.market.record.backupTips":"There are unsaved changes in this browser, do you want to restore them?","ext.market.parser.parseError":"File parsing failed, please check if the design file conforms to the specification.","w.anchor.message.exists":"__未翻译__","w.interaction":"__未翻译__","w.interaction.add":"__未翻译__","w.interaction.event":"__未翻译__","w.interaction.trigger":"__未翻译__","w.interaction.eventType":"__未翻译__","w.interaction.value":"__未翻译__","w.interaction.click":"__未翻译__","w.interaction.mouseover":"__未翻译__","w.interaction.mouseenter":"__未翻译__","w.interaction.mouseleave":"__未翻译__","w.interaction.mouseup":"__未翻译__","w.interaction.mousedown":"__未翻译__","w.text.currentWork":"__未翻译__","w.text.zh":"__未翻译__","w.text.en":"__未翻译__","w.component.autoLayout.row":"__未翻译__","w.component.autoLayout.col":"__未翻译__","w.component.autoLayout.scroll":"__未翻译__","w.component.autoLayout.page":"__未翻译__","w.component.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap.wrap":"__未翻译__","w.autoLayout.wrap.nowrap":"__未翻译__","w.autoLayout.addItem":"__未翻译__","w.layout.scrollSnap":"__未翻译__","w.layout.scrollSnap.none":"__未翻译__","w.layout.scrollSnap.left":"__未翻译__","w.layout.scrollSnap.center":"__未翻译__","w.layout.scrollSnap.right":"__未翻译__","w.layout.scrollSnap.proximity":"__未翻译__","w.layout.scrollSnap.mandatory":"__未翻译__","w.trigger.intersection":"__未翻译__","w.display.scroll":"__未翻译__","w.node.tagName":"__未翻译__","w.linkOrAnchor":"__未翻译__","w.linkOrAnchor.rel":"__未翻译__","w.image.alt":"__未翻译__","w.image":"__未翻译__","w.image.ossResize":"__未翻译__","w.image.ossResize.maxWidth":"__未翻译__","w.image.ossResize.quality":"__未翻译__"};class lR{constructor(){C(this,"_serviceBrand"),rR.init({lng:"zh",fallbackLng:"en",resources:{en:{translation:aR},zh:{translation:oR}}})}get instance(){return rR}t(e,t,n){return n?this.instance.t(e,t,n):this.instance.t(e,t)}}class cR{constructor(e){C(this,"data"),C(this,"incoming",new Map),C(this,"outgoing",new Map),this.data=e}}class dR{constructor(e){C(this,"_nodes",new Map),this._hashFn=e}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new cR(e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const e=this._findCycle(i,t);if(e)return e;t.delete(n)}}insertVertex(e){this.lookupOrInsertNode(e)}topologicalSort(){const e=[],t=new Set,{_hashFn:n}=this;function i(r,o=null){if(t.has(r))return;const s=n(r.data),a=Array.isArray(o)?o:[];a.push(r),t.add(r),r.outgoing.forEach((e=>{if(-1!==a.indexOf(e)){const t=n(e.data);throw new Error("Circular chain found: "+s+" must be before "+t+" due to a direct order specification, but "+t+" must be before "+s+" based on other specifications.")}i(e,a.slice())})),e.unshift(r.data)}return this._nodes.forEach((e=>i(e))),e}}class uR extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!=(t=e.findCycleSlow())?t:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}function hR(e){return!!e&&Reflect.has(Object.getPrototypeOf(e).constructor,"__SyncDescriptorBrand")}class pR{constructor(e=new OM,t=!1,n){C(this,"_services"),C(this,"_strict"),C(this,"_parent"),C(this,"_activeInstantiations",new Set),this._services=e,this._strict=t,this._parent=n,this._services.set(Br,this)}createChild(e){return new pR(e,this._strict,this)}invokeFunction(e,...t){const n=gR.traceInvocation(e);let i=!1;try{return e({get:e=>{if(i)throw(t="service accessor is only valid during the invocation of its target method")?new Error(`Illegal state: ${t}`):new Error("Illegal state");var t;const r=this._getOrCreateServiceInstance(e,n);if(!r)throw new Error(`[invokeFunction] unknown service '${e}'`);return r}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return hR(e)?(n=gR.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=gR.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=Fr(e).sort(((e,t)=>e.index-t.index)),r=[];for(const s of i){const t=this._getOrCreateServiceInstance(s.id,n);t||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${s.id}.`,!1),r.push(t)}const o=i.length>0?i[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const n=o-t.length;t=n>0?t.concat(new Array(n)):t.slice(0,o)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(hR(this._services.get(e)))this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const n=this._getServiceInstanceOrDescriptor(e);return hR(n)?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new dR((e=>e.id.toString()));let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const t=o.pop();if(i.lookupOrInsertNode(t),r++>1e3)throw new uR(i);for(const n of Fr(t.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(n.id);if(r||this._throwIfStrict(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`,!0),hR(r)){const e={id:n.id,desc:r,_trace:t._trace.branch(n.id,!0)};i.insertEdge(t,e),o.push(e)}}}for(;;){const e=i.roots();if(0===e.length){if(!i.isEmpty())throw new uR(i);break}for(const{data:t}of e){if(hR(this._getServiceInstanceOrDescriptor(t.id))){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}i.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,r){if(hR(this._services.get(e)))return this._createServiceInstance(t,n,i,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const n=new Lp((()=>this._createInstance(e,t,i)));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];const i=n.value;let r=i[t];return"function"!=typeof r||(r=r.bind(i),e[t]=r),r},set:(e,t,i)=>(n.value[t]=i,!0)})}return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(t),this._strict)throw new Error(e)}get services(){const e=this;return{get:t=>e.invokeFunction((e=>e.get(t)))}}dispose(){}store(e,t){this._services.set(e,t)}}!function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(sR||(sR={}));const fR=class{constructor(e,t){C(this,"_start",Date.now()),C(this,"_dep",[]),this.type=e,this.name=t}static traceInvocation(e){return fR._None}static traceCreation(e){return fR._None}branch(e,t){const n=new fR(2,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;fR._totals+=e;let t=!1;const n=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(n,i){const r=[],o=new Array(n+1).join("\t");for(const[s,a,l]of i._dep)if(a&&l){t=!0,r.push(`${o}CREATES -> ${s}`);const i=e(n+1,l);i&&r.push(i)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${fR._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(n.join("\n"))}};let gR=fR;var mR,_R;C(gR,"_None",new class extends fR{constructor(){super(-1,null)}stop(){}branch(){return this}}),C(gR,"_totals",0),(_R=_R||{}).stringify=(mR={"visit_linear-gradient":function(e){return mR.visit_gradient(e)},"visit_repeating-linear-gradient":function(e){return mR.visit_gradient(e)},"visit_radial-gradient":function(e){return mR.visit_gradient(e)},"visit_repeating-radial-gradient":function(e){return mR.visit_gradient(e)},visit_gradient:function(e){var t=mR.visit(e.orientation);return t&&(t+=", "),e.type+"("+t+mR.visit(e.colorStops)+")"},visit_shape:function(e){var t=e.value,n=mR.visit(e.at),i=mR.visit(e.style);return i&&(t+=" "+i),n&&(t+=" at "+n),t},"visit_default-radial":function(e){var t="",n=mR.visit(e.at);return n&&(t+=n),t},"visit_extent-keyword":function(e){var t=e.value,n=mR.visit(e.at);return n&&(t+=" at "+n),t},"visit_position-keyword":function(e){return e.value},visit_position:function(e){return mR.visit(e.value.x)+" "+mR.visit(e.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(e){return mR.visit_color(e.value,e)},visit_hex:function(e){return mR.visit_color("#"+e.value,e)},visit_rgb:function(e){return mR.visit_color("rgb("+e.value.join(", ")+")",e)},visit_rgba:function(e){return mR.visit_color("rgba("+e.value.join(", ")+")",e)},visit_color:function(e,t){var n=e,i=mR.visit(t.length);return i&&(n+=" "+i),n},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(e){var t="",n=e.length;return e.forEach((function(e,i){t+=mR.visit(e),i<n-1&&(t+=", ")})),t},visit:function(e){if(!e)return"";if(e instanceof Array)return mR.visit_array(e,"");if(e.type){var t=mR["visit_"+e.type];if(t)return t(e);throw Error("Missing visitor visit_"+e.type)}throw Error("Invalid node.")}},function(e){return mR.visit(e)}),(_R=_R||{}).parse=function(){var e=/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,t=/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,n=/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,i=/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,r=/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,a=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,d=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,u=/^\(/,h=/^\)/,p=/^,/,f=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,m=/^rgb/i,_=/^rgba/i,v=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,y="";function w(e){var t=new Error(y+": "+e);throw t.source=y,t}function b(){var e=N(x);return y.length>0&&w("Invalid input not EOF"),e}function x(){return C("linear-gradient",e,E)||C("repeating-linear-gradient",t,E)||C("radial-gradient",n,S)||C("repeating-radial-gradient",i,S)}function C(e,t,n){return k(t,(function(t){var i=n();return i&&(U(p)||w("Missing comma before color stops")),{type:e,orientation:i,colorStops:N(A)}}))}function k(e,t){var n=U(e);if(n){U(u)||w("Missing (");var i=t(n);return U(h)||w("Missing )"),i}}function E(){return L("directional",r,1)||L("angular",d,1)}function S(){var e,t,n=I();return n&&((e=[]).push(n),t=y,U(p)&&((n=I())?e.push(n):y=t)),e}function I(){var e=function(){var e=L("shape",/^(circle)/i,0);e&&(e.style=P()||O());return e}()||function(){var e=L("shape",/^(ellipse)/i,0);e&&(e.style=D()||O());return e}();if(e)e.at=T();else{var t=O();if(t){e=t;var n=T();n&&(e.at=n)}else{var i=M();i&&(e={type:"default-radial",at:i})}}return e}function O(){return L("extent-keyword",o,1)}function T(){if(L("position",/^at/,0)){var e=M();return e||w("Missing positioning value"),e}}function M(){var e={x:D(),y:D()};if(e.x||e.y)return{type:"position",value:e}}function N(e){var t=e(),n=[];if(t)for(n.push(t);U(p);)(t=e())?n.push(t):w("One extra comma");return n}function A(){var e=L("hex",f,1)||k(_,(function(){return{type:"rgba",value:N(R)}}))||k(m,(function(){return{type:"rgb",value:N(R)}}))||L("literal",g,0);return e||w("Expected color definition"),e.length=D(),e}function R(){return U(v)[1]}function D(){return L("%",l,1)||L("position-keyword",s,1)||P()}function P(){return L("px",a,1)||L("em",c,1)}function L(e,t,n){var i=U(t);if(i)return{type:e,value:i[n]}}function U(e){var t,n;return(n=/^[\n\r\t\s]+/.exec(y))&&F(n[0].length),(t=e.exec(y))&&F(t[0].length),t}function F(e){y=y.substr(e)}return function(e){return y=e.toString(),b()}}();var vR=_R.parse;var yR,wR;function bR(e,t=e){return[{color:e,length:"0%"},{color:t,length:"100%"}]}(wR=yR||(yR={})).color="color",wR.linear="linear",wR.image="image";const xR={type:yR.color,color:"rgba(224, 224, 224, 1)",colorStops:[],orientation:0,imageUrl:""},CR=b(w({},xR),{size:"cover",repeat:"repeat",position:"0% 0%"});function kR(e){const{"background-image":t="","background-size":n="","background-repeat":i="","background-position":r=""}=e,o=function(e){const t=/((?:[^"']|".*?"|'.*?')*?)([(,)]|$)/g;return function n(){for(let i=[];;){let r=t.exec(e);if("("===r[2]?(i.push(r[1].trim()+"("+n().join(",")+")"),r=t.exec(e)):i.push(r[1].trim()),[",",")"].includes(r[2])&&r[1].endsWith("%")&&(i[i.length-1]+=r[1]),","!==r[2])return i.filter(Boolean)}}()}(t),s=n.split(","),a=r.split(","),l=i.split(",");return o.map(((e,t)=>{const n=w(w({},li(CR)),function(e){const t=li(xR);if(function(e){return e.trim().startsWith("linear-gradient")}(e)){const[n]=vR(e);n.orientation&&(hi("linear-gradient"===n.type,fi.badRequest),hi("angular"===n.orientation.type,fi.badRequest),t.orientation=wi(n.orientation.value));const i=n.colorStops.map((e=>{hi("rgba"===e.type,fi.badRequest);const[t,n,i,r=1]=e.value,o={length:"",color:`rgba(${t},${n},${i},${r})`};if(e.length){const{type:t,value:n}=e.length;hi("%"===t,fi.badRequest),o.length=`${n}${t}`}return o}));1===[...new Set(i.map((e=>e.color)))].length?(t.type=yR.color,t.color=i[0].color):(t.type=yR.linear,t.colorStops=i)}else{t.type=yR.image;const i=(null==(n=/(?:\(['"]?)(.*?)(?:['"]?\))/.exec(e))?void 0:n[1])||"";t.imageUrl=i}var n;return t}(e));return n.size=s[t]||CR.size,n.repeat=l[t]||CR.repeat,n.position=a[t]||CR.position,n}))}function ER(e){return`linear-gradient(${e}, ${e})`}function SR(e,t){return`linear-gradient(${t}deg, ${e.map((e=>`${e.color} ${e.length}`)).join(",")})`}function IR(e){return{color:e}}var OR="_pageName_1diaw_1",TR="_editorArea_1diaw_9",MR="_canvasContainer_1diaw_14",NR="_bg_1diaw_24";function AR(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=AR(e[n]):t[n]=e[n]})),t}function RR(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!RR(e[n],t[n]))return!1}else{const r=[];for(i in e)r.push(i);r.sort();const o=[];for(i in t)o.push(i);if(o.sort(),!RR(r,o))return!1;for(n=0;n<r.length;n++)if(!RR(e[r[n]],t[r[n]]))return!1}return!0}function DR(e){return Object.keys(e)}const PR=Object.prototype.hasOwnProperty;function LR(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const n in e)if(PR.call(e,n)){const i=e[n];"object"!=typeof i||Object.isFrozen(i)||t.push(i)}}return e}const UR=navigator.userAgent;var FR;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(FR||(FR={}));const BR=UR.indexOf("Windows")>=0,jR=UR.indexOf("Macintosh")>=0,VR=UR.indexOf("Linux")>=0,zR=UR.indexOf("Firefox")>=0,KR=UR.indexOf("AppleWebKit")>=0,WR=!(UR.indexOf("Chrome")>=0)&&UR.indexOf("Safari")>=0;var HR;UR.indexOf("iPad")>=0||WR&&navigator.maxTouchPoints,UR.indexOf("Edge/")>=0&&UR.indexOf("WebView/"),UR.indexOf("Electron/"),UR.indexOf("Android"),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(HR||(HR={}));const $R=jR?2:BR?1:3;var qR;function YR(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const i=e.charCodeAt(n),o=t.charCodeAt(r);if(i<o)return-1;if(i>o)return 1}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}function GR(e){return e>=qR.a&&e<=qR.z}function XR(e){return e>=qR.A&&e<=qR.Z}function JR(e){return e.split("").map(((e,t)=>e.toUpperCase()===e?`${0!==t?"-":""}${e.toLowerCase()}`:e)).join("")}!function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM"}(qR||(qR={}));class QR{constructor(){C(this,"segment"),C(this,"value"),C(this,"key"),C(this,"left"),C(this,"mid"),C(this,"right")}isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class ZR{constructor(e){C(this,"_iter"),C(this,"_root"),this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;for(this._root||(this._root=new QR,this._root.segment=n.value()),i=this._root;;){const e=n.cmp(i.segment);if(e>0)i.left||(i.left=new QR,i.left.segment=n.value()),i=i.left;else if(e<0)i.right||(i.right=new QR,i.right.segment=n.value()),i=i.right;else{if(!n.hasNext())break;n.next(),i.mid||(i.mid=new QR,i.mid.segment=n.value()),i=i.mid}}const r=i.value;return i.value=t,i.key=e,r}get(e){var t;return null==(t=this._getNode(e))?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),i=[];let r=this._root;for(;r;){const e=n.cmp(r.segment);if(e>0)i.push([1,r]),r=r.left;else if(e<0)i.push([-1,r]),r=r.right;else{if(!n.hasNext()){for(t?(r.left=void 0,r.mid=void 0,r.right=void 0):r.value=void 0;i.length>0&&r.isEmpty();){const[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}r=t}break}n.next(),i.push([0,r]),r=r.mid}}}findSubstr(e){const t=this._iter.reset(e);let n,i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())return n.mid?this._entries(n.mid):void 0;t.next(),n=n.mid}}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}const eD=UR||"",tD=new Map;var nD;tD.set("false",!1),tD.set("true",!0),tD.set("isMac",jR),tD.set("isLinux",VR),tD.set("isWindows",BR),tD.set("isEdge",eD.indexOf("Edg/")>=0),tD.set("isFirefox",eD.indexOf("Firefox")>=0),tD.set("isChrome",eD.indexOf("Chrome")>=0),tD.set("isSafari",eD.indexOf("Safari")>=0),tD.set("isIPad",eD.indexOf("iPad")>=0),function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"}(nD||(nD={}));const iD=class{constructor(){C(this,"type",0)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return sD.INSTANCE}};let rD=iD;C(rD,"INSTANCE",new iD);const oD=class{constructor(){C(this,"type",1)}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return rD.INSTANCE}};let sD=oD;C(sD,"INSTANCE",new oD);const aD=rn("contextKeyService");class lD{constructor(e=!0){C(this,"_value"),C(this,"_from"),C(this,"_to"),this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(this._value.charCodeAt(this._to)===qR.Period){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?YR(e,this._value,0,e.length,this._from,this._to):function(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){const s=e.charCodeAt(n),a=t.charCodeAt(r);if(s===a)continue;const l=s-a;if(!(32===l&&XR(a)||-32===l&&XR(s)))return GR(s)&&GR(a)?l:YR(e.toLowerCase(),t.toLowerCase(),n,i,r,o)}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}const cD=class{constructor(e){C(this,"element"),C(this,"next"),C(this,"prev"),this.element=e,this.next=cD.Undefined,this.prev=cD.Undefined}};let dD=cD;C(dD,"Undefined",new cD(void 0));class uD{constructor(){C(this,"_first",dD.Undefined),C(this,"_last",dD.Undefined),C(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===dD.Undefined}clear(){this._first=dD.Undefined,this._last=dD.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new dD(e);if(this._first===dD.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==dD.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==dD.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==dD.Undefined&&e.next!==dD.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===dD.Undefined&&e.next===dD.Undefined?(this._first=dD.Undefined,this._last=dD.Undefined):e.next===dD.Undefined?(this._last=this._last.prev,this._last.next=dD.Undefined):e.prev===dD.Undefined&&(this._first=this._first.next,this._first.prev=dD.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==dD.Undefined;)yield e.element,e=e.next}}function hD(){}function pD(e){const t=this;let n,i=!1;return function(){return i||(i=!0,n=e.apply(t,arguments)),n}}class fD extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function gD(e){if((t=e)&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]){const t=[];for(const n of e)if(n)try{n.dispose()}catch(f8){t.push(f8)}if(1===t.length)throw t[0];if(t.length>1)throw new fD(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e;var t}function mD(e){const t={dispose:pD((()=>{e()}))};return t}class _D{constructor(){C(this,"_toDispose",new Set),C(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{gD(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}C(_D,"DISABLE_DISPOSED_WARNING",!1);class vD{constructor(){C(this,"_store",new _D),this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}C(vD,"None",Object.freeze({dispose(){}}));class yD{constructor(){C(this,"dispose",(()=>{})),C(this,"unset",(()=>{})),C(this,"isset",(()=>!1))}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>void 0!==t,this.dispose=()=>{t&&(t(),t=void 0)},this}}const wD=rn("commandService");class bD{constructor(){C(this,"_commands",new Map)}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return!!e&&e.charCodeAt(0)===qR.Caret&&(e=e.substr(1)),this.registerCommand({id:e,handler:t})}let{id:n}=e;!!n&&n.charCodeAt(0)===qR.Caret&&(n=n.substr(1));let i=this._commands.get(n);i||(i=new uD,this._commands.set(n,i));const r=i.unshift(e);return mD((()=>{r();const e=this._commands.get(n);(null==e?void 0:e.isEmpty())&&this._commands.delete(n)}))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return t[Symbol.iterator]().next().value}getCommands(){const e=new Map;for(const t of this._commands.keys()){const n=this.getCommand(t);n&&e.set(t,n)}return e}clear(){for(const[e,t]of this._commands.entries())t.clear();this._commands.clear()}}const xD="CommandsRegistry";let CD=Reflect.get(globalThis,xD);CD||(CD=new bD,Reflect.set(globalThis,xD,CD));const kD=CD;let ED;const SD=class{static get defaultCanvasWidth(){return window.innerWidth-this.canvasResizerWidth-this.configPanelWidth}static registerInstance(e){ED||(ED=e,window.__editor=e,window.dispatchEvent(SD.onEditorCreated))}static dispose(){ED.dispose(),ED=null}static get editor(){return ED}static get logicWidth(){return ED.view.getViewport().logicWidth}static get model(){return null==ED?void 0:ED.model}static get view(){return null==ED?void 0:ED.view}static get viewModel(){return null==ED?void 0:ED.viewModel}static transform(e){return null==ED?void 0:ED.transform(e)}static recordSelectionChanges(e){return null==ED?void 0:ED.recordSelectionChanges(e)}static fork(){return null==ED?void 0:ED.fork()}static add(e){return null==ED?void 0:ED.add(e)}static commitAndMerge(){return null==ED?void 0:ED.commitAndMerge()}static checkout(){return null==ED?void 0:ED.checkout()}static undo(){return ED.undo()}static redo(){return ED.redo()}static get isInBaseBreakpoint(){if(!ED)return!1;const{breakpoints:e}=this.model.getValue(),t=[...e].sort(((e,t)=>t.maxWidth-e.maxWidth))[0];return this.logicWidth>t.maxWidth}static getComputedStyleOfId(e){return null==ED?void 0:ED.view.getComputedStyleOfId(e)}static getDeclaredStyle(e){return null==ED?void 0:ED.model.getMatchedStyle(e,this.viewportWidth).attrs}static get viewportWidth(){if(!ED)return;const{logicWidth:e}=this.view.getViewport();return this.isInBaseBreakpoint?void 0:e}static getSelectorStyleInCurrentVP(e,t,n){const i=this.viewportWidth;return null==ED?void 0:ED.model.getStyleBySelector(e,t,n,i).attrs}static updateCurrentStyle(e,t){return null==ED?void 0:ED.model.updateStyle(e,t,this.viewportWidth)}static setViewportWidth(e){SD.execEditorCommand("resizeCanvasWidth",e),setTimeout((()=>{SD.execEditorCommand("fitCanvas")}),0)}static resetEditorViewport(){SD.execEditorCommand("resetViewport")}static initSelection(){SD.viewModel.initSelection()}static execEditorCommand(e,...t){null==ED||ED.invokeWithinContext((n=>{n.get(wD).executeCommand(e,...t)}))}static getContainerNodesFromViewPos(e){const{view:t}=this,n=e||t.getViewCanvasCenterPos();let i=t.getNodesFromVector(n);return i=i.filter((e=>ho(e))),i}static transformClientVectorToViewVector(e){const{canvasHostDomNode:t,scrolls:n}=this.view,{scale:i}=this.view.getViewport(),r=t.getBoundingClientRect(),{scrollX:o,scrollY:s}=n;return{x:(e.x-r.left)/i+o,y:(e.y-r.top)/i+s}}static getContextKeyValue(e,t){ED?ED.invokeWithinContext((n=>{const i=n.get(aD).getContextKeyValue(e);t(i)})):t()}static setContextKeyValue(e,t,n){ED?ED.invokeWithinContext((i=>{i.get(aD).setContext(e,t),null==n||n(t)})):null==n||n()}static onDidContextKeysChange(e,t,n){ED?ED.invokeWithinContext((i=>{const r=i.get(aD).onDidChangeContext((n=>{n.affectsSome(new Set(e))&&t(n)}));n(r)})):n()}static getEditorService(e,t){ED?ED.invokeWithinContext((n=>{const i=n.get(e);null==t||t(i)})):null==t||t(null)}static queryValidNodesByIds(e,t){if(!this.model)return[];return e.map((e=>this.model.getNodeById(e))).filter((e=>{var n;return!!e&&(null==(n=null==t?void 0:t(e))||n)}))}static updateModel(e,t){const n=SD.editor;var i;i=e,Kt(Reflect.get(i,"triggers"))&&Reflect.set(i,"triggers",[]),Kt(Reflect.get(i,"animations"))&&Reflect.set(i,"animations",[]),n.replaceModel(e);const r=e.nodes.find((e=>ao(e)));if(r){n.viewModel.setSelectionById(r.id),SD.execEditorCommand("resetViewport");const e=(null==t?void 0:t.width)||0;e?SD.execEditorCommand("resizeCanvasWidth",e):SD.execEditorCommand("fitCanvas")}}static get richTextEditor(){return SD.editor.getRichTextEditor()}};let ID=SD;C(ID,"canvasResizerWidth",56),C(ID,"configPanelWidth",256),C(ID,"navBarHeight",56),C(ID,"pageNameHeight",24),C(ID,"canvasVerticalPadding",24),C(ID,"onEditorCreated",new Event("__onEditorCreated"));const OD=e=>`editor-${e}`,TD=E({key:OD("model"),default:Qn}),MD=E({key:OD("bp"),default:[]}),ND=E({key:OD("viewport"),default:null}),AD=S({key:OD("current-bp"),get({get:e}){const{breakpoints:t}=e(TD);return function(e,t){var n;const i=null!=(n=null==t?void 0:t.logicWidth)?n:window.innerWidth;return e.find((e=>i>=e.minWidth&&i<=e.maxWidth))}(t,e(ND))}}),RD=E({key:OD("selection"),default:[]}),DD=S({key:OD("group-style"),get:({get:e})=>function(e){const t={};return e.forEach((e=>{const{targetId:n,selectorType:i,subSelector:r}=e;i&&r||(t[n]||(t[n]=[]),t[n].push(e))})),t}(e(TD).styles)}),PD=E({key:OD("root"),default:{id:"",props:{},children:[],hide:!0}}),LD=S({key:OD("selection-style"),get({get:e}){const[t]=e(RD),n=e(DD),{breakpoints:i}=e(TD);e(AD);const r=Il(t,n[t]||[],function(e){return e.filter((e=>"__baseBreakpointId__"!==e.id))}(i),ID.viewportWidth);return new qr(r).attrs}}),UD=S({key:OD("selected-node"),get({get:e}){const{nodes:t}=e(TD),[n]=e(RD);return t.find((e=>e.id===n))}}),FD=S({key:OD("selected-link"),get({get:e}){const{links:t}=e(TD),[n]=e(RD);return t.find((e=>e.targetId===n))}}),BD=S({key:OD("selected-trigger"),get({get:e}){const{triggers:t}=e(TD),[n]=e(RD),i=e(UD),r=Boolean(i&&ao(i));return t.filter((e=>e.targetId===n||r&&!e.targetId))}});var jD,VD,zD={tree:"_tree_1nib3_1",visibleToggle:"_visibleToggle_1nib3_5",renameInput:"_renameInput_1nib3_10",visiableBtn:"_visiableBtn_1nib3_15",hide:"_hide_1nib3_19",triggerBtn:"_triggerBtn_1nib3_23",triggerBtnSelected:"_triggerBtnSelected_1nib3_28",suffixContainer:"_suffixContainer_1nib3_32",highlightTreeItem:"_highlightTreeItem_1nib3_40",stickyTreeItem:"_stickyTreeItem_1nib3_43"};function KD(e,t){if(!e)throw t instanceof Error?t:new Error(t)}function WD(e,t){const n=t instanceof Error?t:new Error(t);e||console.error(n)}function HD(e){return 100*e+"%"}function $D(e){return parseFloat(e||"0")}function qD(e){return parseInt(e||"0",10)}function YD(e,t,n){return Math.min(Math.max(t,e),n)}function GD(e){return"normal"===e?0:parseFloat(e)}function XD(e){const t=/blur\((\d+)px\)?/;if(!t.test(e))return 0;const[,n]=t.exec(e);return parseInt(n)}function JD(e){return`blur(${e=vP(e)})`}!function(e){e.notFound="404",e.badRequest="400",e.internalError="500"}(jD||(jD={})),function(e){e.webkit="-webkit-",e.moz="-moz-",e.ms="-ms-",e.o="-o-"}(VD||(VD={}));const QD="0px";var ZD,eP,tP,nP,iP;function rP(e){return e.split(" ").map((e=>parseFloat(e.trim())))}function oP(e,t,n){const i=rP(t.gridTemplateRows),r=rP(t.gridTemplateColumns),o=GD(t.columnGap),s=GD(t.rowGap),a=parseFloat(t.paddingTop),l=parseFloat(t.paddingLeft),{rowStart:c,rowEnd:d,columnStart:u,columnEnd:h}=function(e){const t=qD(e.gridRowStart),n=qD(e.gridRowEnd),i=qD(e.gridColumnStart),r=qD(e.gridColumnEnd);return WD(Gt(t)&&Gt(n)&&Gt(i)&&Gt(r)),{rowStart:t,rowEnd:n,columnStart:i,columnEnd:r}}(e),p=[];for(let w=0,b=r.length,x=n.left+l;w<=b;w++)p.push(x),x=x+r[w]+o;const f=[];for(let w=0,b=i.length,x=n.top+a;w<=b;w++)f.push(x),x=x+i[w]+s;if(c>f.length)throw new Error(jD.internalError);if(u>p.length)throw new Error(jD.internalError);const g=f[c-1],m=f[d-1]-s,_=p[u-1],v=p[h-1]-o,y=Object.create(null);return y.top=g,y.bottom=m,y.left=_,y.right=v,y.width=y.right-y.left,y.height=y.bottom-y.top,y}!function(e){e.grid="grid",e.flex="flex",e.inlineGrid="inline-grid",e.inlineFlex="inline-flex",e.none="none",e.listItem="list-item",e.block="block"}(ZD||(ZD={})),function(e){e.row="row",e.column="column"}(eP||(eP={})),function(e){e.wrap="wrap",e.nowrap="nowrap"}(tP||(tP={})),function(e){e.none="static",e.fixed="fixed",e.sticky="sticky"}(nP||(nP={})),function(e){e.visible="visible",e.hidden="hidden",e.scroll="scroll",e.auto="auto"}(iP||(iP={}));const sP=["rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ","perspective"],aP={rotateX:"0",rotateY:"0",rotateZ:"0",scaleX:"1",scaleY:"1",scaleZ:"1",skewX:"0",skewY:"0",translateX:"0",translateY:"0",translateZ:"0",perspective:"0"};function lP(e){const t=e,{perspective:n}=t,i=x(t,["perspective"]);let r="";return n&&(r+=`perspective(${n}) `),Object.keys(i).forEach((e=>{r+=`${e}(${i[e]}) `})),r}function cP(e){const t=`(${sP.join("|")})\\((.+?)\\)`,n=new RegExp(t,"g"),i={};return Array.from(e.matchAll(n),(e=>e)).forEach((e=>{const t=e[1],n=e[2];if(i[t]){if(i[t]!==aP[t])throw new Error("unimplemented");i[t]=n}else i[t]=n;return e})),i}var dP,uP,hP;function pP(e){return Ht(e)&&"auto"===e}function fP(e){return!e||pP(e)}function gP(e){return Ht(e)&&e.endsWith("px")}function mP(e){return Ht(e)&&e.endsWith("fr")}function _P(e){return function(e){return Ht(e)&&e.endsWith("vh")}(e)||function(e){return Ht(e)&&e.endsWith("vw")}(e)}function vP(e){const t=parseFloat(`${e}`);return Number.isFinite(t)?`${e}px`:`${e}`}!function(e){e.default="default",e.pointer="pointer",e.grab="grab",e.move="move",e.text="text"}(dP||(dP={})),function(e){e.px="px",e["%"]="%",e.vw="vw",e.vh="vh",e.fr="fr"}(uP||(uP={})),function(e){e.auto="auto",e.fitContent="fit-content"}(hP||(hP={}));const yP=[uP.px,uP["%"],uP.vw,uP.vh],wP=[hP.auto,hP.fitContent],bP=Object.values(uP),xP=e=>!e,CP=e=>e===hP.fitContent,kP=e=>xP(e)||pP(e)||CP(e),EP=(e,t=bP)=>{if(!kP(e))return t.find((t=>e.endsWith(t)))},SP=e=>{const t=EP(e),n=parseFloat(e);return Number.isInteger(n)||Number.isNaN(n)?n:t===uP.px?parseFloat(n.toFixed(0)):parseFloat(n.toFixed(1))},IP=e=>e.map((e=>e.includes("minmax")?e:e.includes("fr")||e.includes("auto")?`minmax(0px, ${e})`:e)).join(" ");var OP,TP;!function(e){e.none="none",e.start="start",e.end="end",e.center="center"}(OP||(OP={})),function(e){e.none="none",e.mandatory="both mandatory",e.proximity="both proximity"}(TP||(TP={}));const MP=pD((()=>{try{const e=document.createElement("div");return document.body.appendChild(e),getComputedStyle(e)}catch{return{}}}))();class NP{constructor(){}static isVisible(e){try{return!(ID.getComputedStyleOfId(e.id).display===ZD.none)}catch{return!1}}static toggleVisibility(e){const{id:t}=e,n=NP.isVisible(e);ID.transform((e=>{if(n){const e=ID.getComputedStyleOfId(t).display;ID.updateCurrentStyle(t,{"--display-cache":e,display:ZD.none})}else{const e=ID.getDeclaredStyle(t)["--display-cache"];ID.updateCurrentStyle(t,{display:e})}}))}}var AP,RP;function DP(e){const{itemType:t,dragRef:n,dropRef:i,index:r,key:o,canDrag:s,onHover:a,onDrop:l,onDragEnd:c}=e,[{isDragging:d},u,h]=I({type:t,item:()=>({index:r,key:o}),collect:e=>({isDragging:e.isDragging()}),canDrag:s,end:c}),[{handlerId:p,isOver:f},g]=O({accept:t,collect(e){const t=e.isOver({shallow:!0});return{handlerId:e.getHandlerId(),isOver:t}},drop(e,t){t.didDrop()||null==l||l(e,{index:r,key:o},t)},hover(e,t){null==a||a(e,{index:r,key:o},t)}});return u(n),g(i),{handlerId:p,isOver:f,isDragging:d,previewRef:h}}function PP(e,t,n){const{top:i,left:r,height:o,bottom:s,right:a}=e,{x:l,y:c}=t;if(l<r||l>a||c<i||c>s)return AP.none;if(n){const e=o/2;return c>=i&&c<i+e?AP.top:c>=i+e&&c<=i+o?AP.bottom:AP.none}const d=o/3;return c>=i&&c<i+d?AP.top:c>=i+d&&c<i+2*d?AP.middle:c>=i+2*d&&c<=i+o?AP.bottom:AP.none}function LP(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}(RP=AP||(AP={})).top="top",RP.middle="middle",RP.bottom="bottom",RP.none="none";const UP="https://cdn.dancf.com/fe-assets/iliad/img/842c31cc6b01fd2da3508756d2604dec.png",FP="https://cdn.dancf.com/fe-assets/iliad/img/6371c8955ce4e8dd7e0c647aa147e9cd.png",BP="https://cdn.dancf.com/fe-assets/iliad/img/80ea05507651832bf21185047b5d7b96.png",jP="https://cdn.dancf.com/fe-assets/iliad/img/0f45e3be7f29fc07d0e7598ca787deef.png",VP="https://cdn.dancf.com/fe-assets/iliad/img/1c621e91641e2b6c1e6f3cd386de61ab.png",zP="https://cdn.dancf.com/fe-assets/iliad/img/1643a80b4bcc9dd544c8d420a0c640c5.png",KP="https://cdn.dancf.com/fe-assets/20220311/iliad/src/assets/e3b2ad563645116071dc8ae5a0c72162.png",WP="https://cdn.dancf.com/fe-assets/20220311/iliad/src/assets/dd8280d24b3e4ddaa44a73e85fee716f.png",HP="https://cdn.dancf.com/fe-assets/iliad/img/a839b977695ff2132eee93793363f4a5.png",$P="https://cdn.dancf.com/fe-assets/iliad/img/206babab05618d5f63497009fa14be8a.png",qP="https://cdn.dancf.com/fe-assets/20220602/iliad/img/fec4bef9209ebf65fb28e5cf4edf5726.png",YP="https://cdn.dancf.com/fe-assets/20220125/Users/sjz/Desktop/deceb4892c0e6983c1fd84685bee19b1.png";var GP="_iliadTreeItem_1fbdd_5",XP="_pageIliadTreeItem_1fbdd_12",JP="_treeItem_1fbdd_20",QP="_treeItemSubSelected_1fbdd_23",ZP="_treeItemSubStart_1fbdd_27",eL="_treeItemSubEnd_1fbdd_31",tL="_treeItemDragging_1fbdd_35";var nL,iL="_flexCenter_150li_1",rL="_hideScrollbar_150li_12",oL="_textEllipsis_150li_21",sL="_dropIndicator_150li_26",aL="_dropIndicatorTop_150li_39",lL="_dropIndicatorBottom_150li_62",cL="_logicBackground_150li_86";(nL||(nL={})).treeItem="treeItem";const dL={overId:"",setOverId:e=>{},overPart:AP.none,setOverPart:e=>{},draggingNode:null,setDraggingNode:e=>{}},uL=T.exports.createContext(dL);function hL(e){const{nodes:t,treeClass:n,onItemEnter:i,onItemLeave:r,onDragStart:o,onDragEnd:s}=e,[a,l]=T.exports.useState(""),[c,d]=T.exports.useState(AP.none),[u,h]=T.exports.useState(null),{run:p}=M((e=>{const t=e.target;if(!t||!t.className.includes("tree-item"))return;const n=t.getAttribute("data-id");n?null==i||i(e,n):null==r||r()}),{wait:20}),{run:f}=M((()=>{null==r||r()}),{wait:20});return T.exports.useEffect((()=>{u?(null==r||r(),null==o||o(u)):(l(null),d(AP.none),null==s||s())}),[u]),k(uL.Provider,{value:{overId:a,overPart:c,setOverId:l,setOverPart:d,draggingNode:u,setDraggingNode:h},children:k("div",{className:n,onMouseMove:p,onMouseLeave:f,children:t.map((t=>k(pL,{node:t,others:e},t.key)))})})}function pL(e){const{overId:t,overPart:n,setOverId:i,setOverPart:r,setDraggingNode:o}=T.exports.useContext(uL),[s,a]=T.exports.useState(!1),l=T.exports.useRef(0),{model:c}=ID,{node:d,others:u}=e,{children:h,key:p,prefix:f,suffix:g,offset:m,label:_,labelSlot:v,negative:y,canDrag:w,isDragging:b,selected:x,empty:C,ispage:E,subSelected:S,subStart:I,subEnd:O,nodeItemClass:P}=d,{onSelect:L,onToggle:U,onContextMenu:F,onDblClick:B,onDrop:j,expandNodes:V,expandKeys:z,selectedKeys:K,treeItemClass:W}=u,H=V.findIndex((e=>e===p)),$=z.includes(p),q=c.getNodeById(p),Y=T.exports.useRef(null),G=T.exports.useRef(null),X=!!q&&ao(q),J=!!q&&ho(q),Q=!!q&&co(q)&&"root"!==q.from,Z=K.length,ee=!!q&&"root"===q.from,te=Z>0&&ID.queryValidNodesByIds(K,(e=>co(e)&&"root"!==e.from)).length===Z,ne=Z>0&&ID.queryValidNodesByIds(K,(e=>"root"===e.from)).length===Z,ie=K.includes(d.key),{run:re}=M(((e,t,n)=>{var o;const s=n.isOver({shallow:!0});let a=null,l=AP.none;const u=K.filter((e=>!c.isAncestorNodeOfId(e,d.key))).length>0&&!(ie||ne&&!ee||te&&!Q);if(s&&u){const e=null==(o=G.current)?void 0:o.getBoundingClientRect(),t=n.getClientOffset();if(e&&t){const n=32,{top:i,left:r,width:o,right:s}=e,c=PP({top:i,left:r,width:o,right:s,height:n,bottom:e.top+n},t,!J||te);l=c,a=d.key,!(!te&&Q||ee&&!ne)||c!==AP.bottom&&c!==AP.top?c===AP.bottom&&(J&&!Q&&$&&h.length>0?(l=AP.top,a=h[0]):X&&(a=null,l=AP.none)):(l=AP.none,a=null)}}a&&(i(a),r(l))}),{wait:10}),{run:oe}=M(((e,t,n)=>{var o;i(null),r(AP.none);const s=null==(o=G.current)?void 0:o.getBoundingClientRect(),a=n.getClientOffset();if(s&&a){const e=32,{top:t,left:n,width:i,right:r}=s,o=PP({top:t,left:n,width:i,right:r,height:e,bottom:s.top+e},a,!J||te);let l=d.key,c=o;o===AP.bottom&&J&&$&&h.length>0&&(l=h[0],c=AP.top),c!==AP.none&&(null==j||j(l,c))}}),{wait:10}),{handlerId:se,previewRef:ae,isDragging:le}=DP({itemType:nL.treeItem,dragRef:Y,dropRef:G,canDrag:w,index:H,key:d.key,onDrop:oe,onHover:re});T.exports.useEffect((()=>{o(le?d:null)}),[le]),T.exports.useEffect((()=>{t===p&&n===AP.middle?l.current||(l.current=setTimeout((()=>{null==U||U(null,d),l.current=0}),1e3)):(l.current&&clearTimeout(l.current),l.current=0)}),[t,n]);const ce={"--indicator-left":20*m+8+"px"},de=T.exports.useMemo((()=>{let e="";return t===d.key&&(e=n===AP.top?aL:n===AP.bottom?lL:""),a(n===AP.middle),e}),[t,n]),ue=T.exports.useMemo((()=>s&&t===p),[t,s,p]);return k("div",{ref:LP([G,Y]),"data-index":H,"data-id":p,"data-handler-id":se,className:N(["tree-item-container",JP,de,W,sL,b?tL:"",S?QP:"",I?ZP:"",O?eL:"",P]),style:ce,onDoubleClick:e=>{e.stopPropagation(),null==B||B(e,d)},children:A(R,{"data-id":p,label:_,open:$,offset:m,selected:x,negative:y,over:ue,empty:C,dir:"ltr",className:N(["tree-item",GP,E?XP:""]),"sp-tree-item-select":e=>{e.stopPropagation(),null==L||L(e,d)},"sp-tree-item-toggle":e=>{e.stopPropagation(),null==U||U(e,d)},contextmenu:e=>{e.stopPropagation(),e.preventDefault(),null==F||F(e,d)},children:[f,g,v,k(D,{connect:ae,src:HP})]},p)})}var fL,gL;let mL,_L;function vL(){const[e,t]=P(kL);function n(e,n){if(mL||(mL=document.querySelector("#contextMenuPopover")),!mL)return;const{innerWidth:i,innerHeight:r}=window,{width:o,height:s}=mL.getBoundingClientRect();let{x:a,y:l}=e,c=l+20;a+o>i&&(a=i-o),c+s>r&&(c=r-s);const d=n||fL.view;_L&&(clearTimeout(_L),_L=null),t({show:!0,from:d,x:a,y:c})}function i(){_L=setTimeout((()=>{t({show:!1,from:fL.view,x:0,y:0}),_L=null}),200)}return{status:e,showContextMenu:n,hideContextMenu:i,handleContextMenu:function(e,t,r){const{view:o,viewModel:s,model:a}=ID,l=o.getNodesFromVector(e).filter((e=>!!e&&!ao(e)&&!lo(e)));if(l.length<=0)return void i();const c=l.shift(),[d]=Sy(ID.editor,c.id,r);if(!d)return void i();d&&!s.isIdSelected(d)&&(r&&!s.selection.some((e=>{const t=a.getNodeById(e);return t&&!ao(t)&&!co(t)&&a.isAncestorNodeOfId(e,d)}))||!r)&&ID.recordSelectionChanges((()=>{s.setSelectionById(d)})),n(t)}}}(gL=fL||(fL={})).layer="layer",gL.view="view";const yL=e=>`editorMenu-${e}`;var wL,bL;(bL=wL||(wL={})).layer="layer",bL.add="add";const xL=E({key:yL("toolbar"),default:null}),CL=E({key:yL("config-panel-visible"),default:!0}),kL=E({key:yL("context-menu"),default:{show:!1,from:fL.view,x:0,y:0}}),EL=E({key:yL("layer-rename-node"),default:null}),SL=E({key:yL("current-animation-trigger-id"),default:null}),IL=E({key:yL("current-animation-target-id"),default:null}),OL=E({key:yL("current-animation-effect-key"),default:"to"});var TL,ML,NL="_pointValid_1hf7m_1";function AL(e){const t=e,{name:n,onClick:i,className:r,color:o="",style:s={}}=t,a=x(t,["name","onClick","className","color","style"]),l=`editor:${n}`;return k(L,w({className:N(NL,r),name:l,click:i,style:w({color:o},s)},a),n)}(ML=TL||(TL={})).WidthFill="WidthFill",ML.WidthFixed="WidthFixed",ML.WidthHug="WidthHug",ML.HeightFill="HeightFill",ML.HeightFixed="HeightFixed",ML.HeightHug="HeightHug",ML.LayoutSliding="LayoutSliding",ML.LayoutWrap="LayoutWrap",ML.LayoutHorz="LayoutHorz",ML.LayoutVert="LayoutVert",ML.SpacingHoriz="SpacingHoriz",ML.SpacingVert="SpacingVert",ML.LayoutPageturn="LayoutPageturn";var RL="_drawer_1weoy_1",DL="_content_1weoy_21",PL="_header_1weoy_28",LL="_title_1weoy_37",UL="_divider_1weoy_46",FL="_close_1weoy_51";var BL=T.exports.forwardRef((function(e,t){const n=T.exports.useRef(null),{onClose:i,children:r,title:o,visible:s=!0,className:a=""}=e;return T.exports.useImperativeHandle(t,(()=>({containerRef:n}))),s?A("div",{className:N(RL,a),children:[A("div",{className:PL,children:[k("span",{className:LL,children:o}),k("div",{className:FL,onClick:i,children:k(AL,{name:"Close"})})]}),k(U,{className:UL}),k("div",{ref:n,className:N(DL,rL),children:r})]}):null}));const jL=F.createContext(Object.create(null));function VL(){const{i18nService:e}=T.exports.useContext(jL);return WD(e),e.instance}function zL(e,t){const n=new B(e),i=new B(t);return n.gt(i)?1:-1}var KL,WL;(WL=KL||(KL={})).ToTop="layerToTop",WL.ToBottom="layerToBottom",WL.Up="layerUp",WL.Down="layerDown",WL.Current="Current";class HL{static layerStatus(e){const t={disabled:!0,upDisabled:!0,downDisabled:!0,toTopDisabled:!0,toBottomDisabled:!0},{viewModel:n,model:i}=e,{selection:r}=n;if(1!==r.length)return t;const[o]=r,s=i.getParentNodeOfId(r[0]);let a=0,l=-1;if(s){const{orders:e}=i.getChildrenGridAreaInfo(null==s?void 0:s.id);a=e.length,l=e.findIndex((e=>e.id===o)),-1!==l&&(t.toBottomDisabled=t.downDisabled=l>=a-1,t.upDisabled=t.toTopDisabled=l<=0)}return t.disabled=-1===l,t}static layerUp(e){const{disabled:t,upDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!co(a))return;const l=i.getParentNodeOfId(s);WD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=YL(c,s,KL.Up);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerDown(e){const{disabled:t,downDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!co(a))return;const l=i.getParentNodeOfId(s);WD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=YL(c,s,KL.Down);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerToTop(e){const{disabled:t,toTopDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!co(a))return;const l=i.getParentNodeOfId(s);WD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=YL(c,s,KL.ToTop);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerToBottom(e){const{disabled:t,toBottomDisabled:n}=this.layerStatus(e);if(t||n)return;const{model:i,viewModel:r}=e,{selection:o}=r,[s]=o,a=i.getNodeById(s);if(!a||!co(a))return;const l=i.getParentNodeOfId(s);WD(l);const{orders:c}=i.getChildrenGridAreaInfo(l.id),{able:d,ref:u}=YL(c,s,KL.ToBottom);d&&e.transform((e=>{e.reorderGridNode(l.id,u,s)}))}static layerMove(e,t,n){var i,r;const{model:o,viewModel:s}=e,{selection:a}=s;let l=ID.queryValidNodesByIds(a,(e=>co(e)&&"root"!==e.from));if(!t||l.length<=0)return;const[c]=o.queryNodes((e=>ao(e))),{orders:d}=o.getChildrenGridAreaInfo(c.id),u=d.findIndex((e=>e.id===t.id));if(-1===u)return;const h=n===KL.Current?d[u].id:null!=(r=null==(i=d[u+1])?void 0:i.id)?r:null,p=n===KL.Current?1:-1;l=l.filter((e=>e.id!==h)),l.length<=0||e.transform((e=>{l.sort(((e,t)=>d.findIndex((t=>t.id===e.id))>d.findIndex((e=>e.id===t.id))?p:-p)).forEach((t=>{e.reorderGridNode(c.id,h,t.id)}))}))}}class $L{static hasPageNode(e){const{viewModel:t}=e,{selection:n}=t;return ID.queryValidNodesByIds(n,(e=>ao(e))).length>0}static layerStatus(e){const{viewModel:t,model:n}=e,{selection:i}=t,r={disabled:!0,upDisabled:!0,downDisabled:!0,toTopDisabled:!0,toBottomDisabled:!0};if(this.hasPageNode(e))return r;const o=!i.some((e=>!!n.getNextSiblingNodeOfId(e))),s=!i.some((e=>{const t=n.getPreviousSiblingNodeOfId(e);return!!t&&!ao(t)}));return r.toTopDisabled=r.upDisabled=o,r.toBottomDisabled=r.downDisabled=s,r.disabled=o&&s,r}static layerUp(e){const{disabled:t,upDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{var t;const n=r.getNodeById(e),i=r.getNextSiblingNodeOfId(e);if(n&&i){const o=r.getNextSiblingNodeOfId(i.id);s.push({ref:null!=(t=null==o?void 0:o.id)?t:null,id:e,order:n.order})}})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>zL(t.order,e.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerDown(e){const{disabled:t,downDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{const t=r.getNodeById(e),n=r.getPreviousSiblingNodeOfId(e);t&&n&&s.push({ref:n.id,id:e,order:t.order})})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>zL(t.order,e.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerToTop(e){const{disabled:t,toTopDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{const t=r.getNodeById(e);t&&s.push({ref:null,id:e,order:t.order})})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>zL(e.order,t.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerToBottom(e){const{disabled:t,toBottomDisabled:n}=this.layerStatus(e);if(t||n)return;const{viewModel:i,model:r}=e,{selection:o}=i,s=[];o.forEach((e=>{const t=r.getNodeById(e);if(t){const n=r.getParentNodeOfId(e);WD(n);const i=r.getChildrenNodesOfId(null==n?void 0:n.id);let o=i[0];ao(o)&&(o=i[1]),s.push({ref:o.id,id:e,order:t.order})}})),s.length<=0||e.transform((()=>{s.sort(((e,t)=>zL(e.order,t.order))).forEach((e=>{r.reorderNode(e.id,e.ref)}))}))}static layerMove(e,t,n){const{model:i,viewModel:r,view:o}=e,{selection:s}=r,a=i.getParentNodeOfId(null==t?void 0:t.id);if(!t||!a)return;const l=s.filter((e=>!i.isAncestorNodeOfId(e,t.id)));if(l.length<=0)return;const c="root"===(null==t?void 0:t.from);let d=[];if(c){if(ao(t)&&n===KL.Current)return;d=ID.queryValidNodesByIds(l,(e=>!co(e)&&!lo(e)&&!ao(e)&&"root"===e.from))}else d=ID.queryValidNodesByIds(l,(e=>!co(e)&&!lo(e)&&!ao(e)&&"root"!==e.from));if(d.length<=0)return;const u=n===KL.Current?t:i.getNextSiblingNodeOfId(t.id),h=(e,t)=>KL.Current?zL(e.order,t.order):zL(t.order,e.order);e.transform((()=>{c||d.sort(((e,t)=>zL(e.order,t.order))).forEach((e=>{if(e.from!==a.id){const t=ID.getDeclaredStyle(e.id),n=o.getElementRectById(e.id),r=o.createStyleFromHitPosition(n,a,t);i.reparentNode(e.id,a.id),ID.updateCurrentStyle(e.id,r)}})),d.sort(h).forEach((e=>{var t;i.reorderNode(e.id,null!=(t=null==u?void 0:u.id)?t:null)}))}))}}class qL{static isShow(){if(!ID.editor)return!1;const{model:e,viewModel:t}=ID,{selection:n}=t;if(n.length<=0)return!1;let i=0,r=0,o=0;return n.forEach((t=>{const n=e.getNodeById(t);!n||lo(n)?o++:co(n)?this.isPositionFixed(n)?r++:i++:r++})),!o&&(!i||!r)}static isPositionFixed(e){return ID.getDeclaredStyle(e.id).position===nP.fixed}static isAllGridSection(){const{viewModel:e,model:t}=ID,{selection:n}=e;return n.some((e=>{const n=t.getNodeById(e);return n&&co(n)&&!this.isPositionFixed(n)}))}static get Service(){WD(this.isShow());return this.isAllGridSection()?HL:$L}}function YL(e,t,n){var i,r,o,s;const a=e.findIndex((e=>e.id===t));let l=!1;WD(-1!==a);let c=null;return n===KL.ToTop?(l=a>0,c=e[0].id):n===KL.ToBottom?(l=a<e.length-1,c=null):n===KL.Up?(l=a>0,c=null!=(r=null==(i=e[a-1])?void 0:i.id)?r:null):n===KL.Down&&(l=a<e.length-1,c=null!=(s=null==(o=e[a+2])?void 0:o.id)?s:null),c===t&&(c=null),{able:l,ref:c}}function GL(e){return gP(e)}function XL(e){return`url(${e})`}class JL{}C(JL,"isAuto",pP),C(JL,"isNone",xP),C(JL,"isFitContent",CP),C(JL,"getValueUnit",EP),C(JL,"getNumericValue",SP),C(JL,"fromValue",((e,t)=>`${SP(`${e}${t}`)}${t}`)),C(JL,"toPX",vP);function QL(e){const{"overflow-x":t,"overflow-y":n}=e;return t===iP.scroll||n===iP.scroll?iP.scroll:t||n||iP.visible}function ZL(e){var t,n;const i=T.exports.useContext(jL),r=null==(t=i.instantiationService)?void 0:t.invokeFunction((e=>e.get(xn))),{resolved:o}=function(e){const[t,{setTrue:n,setFalse:i}]=j(!1),[r,o]=T.exports.useState(),[s,a]=T.exports.useState(),l=V();return T.exports.useEffect((()=>{e.then((e=>{l.current||(n(),o(e))})).catch((e=>{l.current||(a(e),i())}))}),[e]),{resolved:t,value:r,reason:s}}((null==r?void 0:r.when(Cn.EditorCreated))||Promise.reject().catch(hD));return o?null==(n=i.instantiationService)?void 0:n.invokeFunction((t=>t.get(e))):null}const eU=rn("keybindingService");function tU(){const{t:e}=VL(),t=ZL(eU),n=z(RD),{model:i}=ID,r=z(PD),o=z(AD),[s,a]=T.exports.useState([]),[l,c]=T.exports.useState(),[d,u]=T.exports.useState(),h=T.exports.useRef(),[p,f]=P(xL),[g,m]=P(EL),{showContextMenu:_}=vL(),[v]=ID.editor?i.queryNodes((e=>ao(e))):[],y=p===wL.layer,x=z(SL),C=z(IL),E=T.exports.useRef(null),S=T.exports.useMemo((()=>Boolean(x&&C)),[x,C]);T.exports.useEffect((()=>{y&&L()}),[y]),T.exports.useEffect((()=>{g?null==t||t.setShouldDispatchKeyEventClassNames([]):null==t||t.setShouldDispatchKeyEventClassNames(["editorDispatchKeyEventClass"])}),[g,t]),T.exports.useEffect((()=>{const e=[];n.forEach((t=>{if(!i.getNodeById(t))return;const n=i.getAncestorNodesOfId(t);if(v.id!==t||s.includes(t)){const t=n.map((e=>e.id)).filter((e=>!s.includes(e)));e.push(...t)}else e.push(t)})),e.length>0&&a([...s,...e]),h.current&&!n.includes(h.current)&&(h.current=null),L()}),[n]),K((()=>{!function(e,t=!1){if(!ID.editor)return;let n;if(e){const t=ID.model.getNodeById(e);t&&!lo(t)&&([n]=Ny(ID,e,!1))}ID.view.updateOutline((e=>{const i=e.slice().filter((e=>!e.ignorable));n&&i.push(b(w({},n),{ignorable:!0,isAnimationEditing:t})),e.length=0,e.push(...i)}))}(l&&ID.viewModel.isIdSelected(l)?null:l||null,S)}),[l],{wait:30});const{triggers:I}=z(TD),{section:O,selection:M}=function(e){const{model:t}=ID,n=T.exports.useMemo((()=>{const[t]=e.slice(-1);return null!=t?t:null}),[e]);return{section:T.exports.useMemo((()=>{var e,i;if(!t)return null;const r=t.getNodeById(n);if(!r||lo(r)||ao(r))return null;if(co(r))return n;return null!=(i=null==(e=t.getAncestorNodesOfId(n).find((e=>co(e))))?void 0:e.id)?i:null}),[n]),selection:n}}(n);!function(e,t,n){var i;const r=null==(i=e.current)?void 0:i.containerRef.current,o=(e,t)=>{if(!r)return;const n=r.querySelector(`[data-id="${e}"]`);if(!n)return;const{scrollTop:i,offsetHeight:o}=r,s=i,a=s+o,l=n.getBoundingClientRect(),c=l.top+i;if(c>s&&c<a)return;const d=c+l.height/2-o/2;if(!t)return void(r.scrollTop=d);const u=20,h=(d-i)/u;let p=0;const f=setInterval((()=>{r.scrollTop+=h,p++,p>u&&clearInterval(f)}),300/u)};W((async()=>{var e;t&&n&&(await(e=0,new Promise((t=>{setTimeout(t,e)}))),o(t,!0))}),[t,n])}(E,M,y);const R=T.exports.useMemo((()=>{let t=[];const o=[],a=[];return function r(c,u={parentId:null,offset:0,selected:!1,negative:!1,fixed:!1}){let{offset:h,negative:p,selected:f,fixed:_,parentId:v}=u;const{id:y,children:w,meta:b}=c,x=!NP.isVisible(c);let E=!1;if("root"===v){const e=ID.getDeclaredStyle(y);E=e.position===nP.fixed,E&&(h=0)}const T=function(e){const{meta:t}=e;let n=null==t?void 0:t.componentType;const i=null==t?void 0:t.subType;if(i)i===Gr.LayouterHoriz?n="Layout":i===Jr.Title?n="Text":i===Jr.Paragraph&&(n="Paragraph");else if(n===Hr.Page)n="Pages";else if(n===Hr.SVG)n="Star";else if(n===Hr.Container){vr(ID.getDeclaredStyle(e.id))&&(n=function(e){var t;const n=TL.LayoutHorz,i=null==(t=ID.model)?void 0:t.getNodeById(e),r=ID.getDeclaredStyle(e);if(!i||!r)return n;const{"flex-wrap":o=tP.nowrap,"flex-direction":s=eP.row,"scroll-snap-type":a=TP.none}=r,l=QL(r);if(o===tP.wrap)return TL.LayoutWrap;if(l===iP.scroll)return a!==TP.none?TL.LayoutPageturn:TL.LayoutSliding;return s===eP.row?TL.LayoutHorz:s===eP.column?TL.LayoutVert:n}(e.id))}return k(AL,{name:n,size:"m",slot:"icon"})}(c),M=(null==b?void 0:b.label)||e(wy(c)),R=function(e,t){var n;const{id:i}=e;if(g!==i)return null;const r=(null==(n=e.meta)?void 0:n.label)||t;return k(H,{slot:"label",size:"xs",autofocus:!0,value:r,className:zD.renameInput,blur:e=>{var t,n;!function(e,t){if(m(null),!t)return;const{model:n}=ID,i=n.getNodeById(e),r=AR((null==i?void 0:i.meta)||{});r.label=t,ID.transform((()=>{n.updateNodeMetaById(e,r)}))}(i,null!=(n=null==(t=null==e?void 0:e.target)?void 0:t.value)?n:"")},onKeyUp:e=>{"Enter"===e.code&&e.target.blur()}})}(c,M),D=ao(c),P=lo(c);let L="";co(c)&&(L=O===y?N(zD.highlightTreeItem,zD.stickyTreeItem):zD.highlightTreeItem);const U=p||x,F=I.some((e=>e.targetId===y)),B=!D,j=!!d&&n.includes(c.id),V=S?C===c.id:n.includes(c.id),z=function(e,t,n,i,r,o){const s=o||!i&&(ao(e)||l!==e.id)||g===e.id,a=t?"EyeOff":"Eye";return k("span",{slot:"value",children:A("div",{className:zD.suffixContainer,children:[r&&k(AL,{className:N(zD.triggerBtn,n?zD.triggerBtnSelected:""),name:"Trigger",size:"m"}),k(AL,{className:N(zD.visiableBtn,s?zD.hide:""),name:a,size:"m",onClick:t=>{t.stopPropagation(),function(e){const t=ID.viewModel.getViewModelNodeById(e);if(!t)return;NP.toggleVisibility(t)}(e.id)}})]})})}(c,x,V,U,F,S),K=f;D&&(t=i.getChildrenGridAreaInfo(c.id).orders);const W=w.slice(0).filter((({id:e})=>i.getNodeById(e))).sort(((e,n)=>{const r=null==e?void 0:e.id,o=null==n?void 0:n.id;if(D){return zL(t.findIndex((e=>e.id===r)),t.findIndex((e=>e.id===o)))}{const e=i.getNodeById(r),t=i.getNodeById(o);return WD((null==e?void 0:e.order)&&(null==t?void 0:t.order)),zL(t.order,e.order)}})),$=W.map((e=>e.id)),q=$.length<=0||D,Y=o.length;let G=!1,X=!1;Y>0&&(G=!o[Y-1].subSelected&&K,X=K,K&&(o[Y-1].subEnd=!1));const J={key:y,label:M,prefix:T,suffix:z,labelSlot:R,negative:U,offset:h,empty:q,ispage:D,canDrag:B,isDragging:j,children:$,selected:V,subSelected:K,subStart:G,subEnd:X,nodeItemClass:L};P||(E||_?a.push(J):(o.push(J),D&&o.push(...a))),(s.includes(y)||P)&&W.forEach((e=>r(e,{offset:h+1,negative:U,selected:f||!D&&V,fixed:E||_,parentId:null==c?void 0:c.id})))}(r,{offset:-2,negative:!1,selected:!1,parentId:null,fixed:!1}),o}),[O,r.children,l,d,n,s,g,o,S,C]),D=T.exports.useMemo((()=>R.map((e=>e.key))),[R]);function L(){ID.getContextKeyValue(ym.editingMode.key,(e=>{e===hm.None&&ID.setContextKeyValue(ym.editingMode.key,hm.Focus)}))}return k(BL,{className:"editorDispatchKeyEventClass",visible:y,title:e("w.layer.layers"),onClose:function(){f(null)},ref:E,children:k(hL,{treeClass:zD.tree,treeItemClass:zD.treeItem,nodes:R,expandKeys:s,selectedKeys:n,expandNodes:D,onDrop:function(e,t){if(t===AP.none||!e)return;const{model:i,view:r}=ID,o=i.getNodeById(e);if(!o||n.length<=0)return;const l=n.filter((t=>t!==e&&!i.isAncestorNodeOfId(t,e)));if(!(l.length<=0))if(t===AP.middle&&ho(o)){s.includes(o.id)||a([...s,o.id]);const e=ID.queryValidNodesByIds(l,(e=>!co(e)&&!lo(e)&&!ao(e)&&"root"!==e.from));if(e.length<=0)return;ID.transform((()=>{e.sort(((e,t)=>zL(e.order,t.order))).forEach((e=>{const t=i.getParentNodeOfId(e.id);if(t&&t!==o){const t=ID.getDeclaredStyle(e.id),n=r.getElementRectById(e.id),s=r.createStyleFromHitPosition(n,o,t);i.reparentNode(e.id,o.id),ID.updateCurrentStyle(e.id,s)}}))}))}else if(co(o)&&"root"!==o.from){const e=t===AP.top?KL.Current:KL.Down;null==HL||HL.layerMove(ID,o,e)}else{const e=t===AP.top?KL.Up:KL.Current;$L.layerMove(ID,o,e)}},onDblClick:function(e,t){if(S)return;const{shiftKey:n,ctrlKey:i,metaKey:r}=e;if(n||i||r)return;const{key:o}=t;setTimeout((()=>{m(o)}))},onSelect:function(e,t){const{key:r}=t,{detail:{event:o}}=e;o.stopPropagation();const s=!S&&(o.ctrlKey||o.metaKey),a=!S&&o.shiftKey,{viewModel:l}=ID,c=r,d=l.isIdSelected(c);if(1===n.length&&l.isIdSelected(v.id)&&c!==v.id)h.current=c,ID.recordSelectionChanges((()=>{l.setSelectionById(c)}));else{if(a){if(!d){const e=[];if(h.current){const t=D.findIndex((e=>e===h.current)),n=D.findIndex((e=>e===c)),i=Math.max(t,n),r=Math.min(t,n);WD(-1!==r&&-1!==i);const o=D.slice(r,i+1);e.push(...o)}const t=e.reverse().filter(((t,r)=>!e.slice(r).concat(n).some((e=>i.isAncestorNodeOfId(e,t))))),r=[],o=[];t.forEach((e=>{const t=n.filter((t=>i.isAncestorNodeOfId(e,t)));r.push(e),o.push(...t)})),(r.length>0||o.length>0)&&ID.recordSelectionChanges((()=>{r.length>0&&r.forEach((e=>l.appendSelectionById(e))),o.length>0&&o.forEach((e=>l.removeSelectionById(e)))}))}}else if(s){const e=[],t=[];if(d)t.push(c);else if(!n.some((e=>i.isAncestorNodeOfId(e,c)))){const[n,i]=Sy(ID,c,!1);t.push(...i),n&&e.push(n)}(e.length>0||t.length>0)&&ID.recordSelectionChanges((()=>{e.length>0&&e.forEach((e=>l.appendSelectionById(e))),t.length>0&&t.forEach((e=>l.removeSelectionById(e)))}))}else ID.recordSelectionChanges((()=>{l.setSelectionById(c)})),c!==v.id&&"root"!==c&&setTimeout((()=>{ID.view.scrollNodeIntoView(c,!0)}),50);d||(h.current=c)}},onToggle:function(e,t){const{key:n}=t,i=s.slice(0),r=i.findIndex((e=>e===n));-1===r?i.push(n):i.splice(r,1),a(i)},onDragStart:function(e){const{viewModel:t}=ID,{key:n}=e;c(null),t.isIdSelected(n)||ID.recordSelectionChanges((()=>{t.setSelectionById(n)})),u(n)},onDragEnd:function(){u(null)},onContextMenu:function(e,t){if(S)return;const{key:n}=t,{clientX:i,clientY:r}=e,o={x:i,y:r},{viewModel:s}=ID;s.isIdSelected(n)||ID.recordSelectionChanges((()=>{s.setSelectionById(n)})),setTimeout((()=>{_(o,fL.layer)}))},onItemEnter:function(e,t){l!==t&&c(t)},onItemLeave:function(){c(null)}})})}var nU="_dragSketch_20qr9_1",iU="_componentContainer_20qr9_13";var rU,oU="_menuItem_73mpj_1",sU="_menuIcon_73mpj_16",aU="_menuTitle_73mpj_24";!function(e){e[e.backward=0]="backward",e[e.forward=1]="forward",e[e.inward=2]="inward",e[e.outward=3]="outward",e[e.self=4]="self",e[e.ancestors=5]="ancestors",e[e.descendants=6]="descendants"}(rU||(rU={}));const lU=new Uint8Array(16),cU=[];for(let os=0;os<256;os++)cU.push(os.toString(16).padStart(2,"0"));let dU;function uU(){dU(lU),lU[6]=15&lU[6]|64,lU[8]=63&lU[8]|128;let e=0,t="";return t+=cU[lU[e++]],t+=cU[lU[e++]],t+=cU[lU[e++]],t+=cU[lU[e++]],t+="-",t+=cU[lU[e++]],t+=cU[lU[e++]],t+="-",t+=cU[lU[e++]],t+=cU[lU[e++]],t+="-",t+=cU[lU[e++]],t+=cU[lU[e++]],t+="-",t+=cU[lU[e++]],t+=cU[lU[e++]],t+=cU[lU[e++]],t+=cU[lU[e++]],t+=cU[lU[e++]],t+=cU[lU[e++]],t}dU="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};function hU(){const{i18nService:e}=T.exports.useContext(jL);return{addNodeToViewPos:(t,n,i=!1)=>{var r;const{renderWidth:o=500,renderHeight:s=500}=t,{props:a,meta:l,styles:c=[],children:d=[]}=AR(t),{x:u,y:h}=n,p=u,f=h,g=ID.getContainerNodesFromViewPos({x:p,y:f}).filter((e=>ho(e))),{view:m,viewModel:_,model:v}=ID;let[y]=g,[x,C]=[u,h];if(!y){const[e]=v.queryNodes((e=>ao(e))),{orders:t}=v.getChildrenGridAreaInfo(e.id),n=null==(r=t[t.length-1])?void 0:r.id,i=ID.model.getNodeById(n);if(!i)throw new Error("404");y=i;const o=m.getElementRectById(n),{width:s,height:a,top:l,left:c}=o;x=c+s/2,C=l+a/2}const k=x-o/2,E=C-s/2,S={top:E,left:k,width:o,height:s,bottom:E+s,right:k+o},I={ref:y.id,direction:Cs.inward},O=i?ID.add:ID.transform;let T;const{nodes:M}=v.getValue();return O((t=>{const n=((e,t,n,i)=>{const r=e.t(i||n),o=new RegExp(`^${r} (\\d+)?$`),s=t.map((e=>{var t,n;const i=null!=(n=null==(t=e.meta)?void 0:t.label)?n:"";let r="0";if(i){const e=o.exec(i);e&&(r=e[1]?e[1]:"0")}return parseInt(r)}));return`${r} ${Math.max(...s)+1}`})(e,M,l.componentType,l.subType),i=t.addNode(I,a,b(w({},l),{label:n}));c.forEach((e=>{const{style:n,breakpointWidth:r,selectorType:o,subSelector:s}=e;let a={};!r&&!(o&&s)&&(a=m.createStyleFromHitPosition(S,y,n)),t.updateStyle(i.id,w(w({},n),a),r,o,s)})),d.forEach((e=>{const n=t.addNode({ref:i.id,direction:Cs.inward},{},e.meta);e.styles.forEach((e=>{t.updateStyle(n.id,e.style,e.breakpointWidth)}))})),_.setSelectionById(i.id),T=i})),T}}}function pU(e){const{t:t}=VL(),n=e,{sketchRef:i}=n,r=x(n,["sketchRef"]),{title:o,icon:s,renderWidth:a=500,renderHeight:l=280}=r,[,c]=P(xL),{onDrag:d,onDragStart:u,onDragEnd:h}=function({width:e,height:t,props:n,sketchRef:i}){const r=T.exports.useRef(null),o=T.exports.useRef(null),s=z(ND),{addNodeToViewPos:a}=hU(),l=(null==s?void 0:s.scale)||1,[,c]=P(xL),d=e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="move"},u=e=>{e.stopPropagation(),e.preventDefault();const{clientX:t,clientY:i}=e,r=ID.transformClientVectorToViewVector({x:t,y:i});return a(n,r),ID.setContextKeyValue(ym.editingMode.key,hm.Focus),!1};function h(){const e=document.createElement("div"),t={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",cursor:"grabbing","z-index":"var(--iliad-editor-above-canvas-overlay-index)"};return Object.assign(e.style,t),document.body.appendChild(e),e.ondragover=d,e.ondrop=u,e}return{onDrag:e=>{e.stopPropagation(),r.current||(r.current=h());const{clientX:t,clientY:n}=e,i=ID.transformClientVectorToViewVector({x:t,y:n});let s;const a=ID.getContainerNodesFromViewPos(i);if(a.length>0){const e=a.shift();[s]=Ny(ID,e.id,!0)}ID.view.updateOutline((e=>{e.length=0,s&&e.push(s)})),o.current&&"hidden"!==o.current.style.visibility&&(o.current.style.visibility="hidden")},onDragStart:n=>{var r;n.stopPropagation();const s=e*l,a=t*l;i.current&&(Object.assign(i.current.style,{width:`${s}px`,height:`${a}px`}),null==(r=n.dataTransfer)||r.setDragImage(i.current,s/2,a/2)),o.current=document.querySelector("#layerAddContainer")},onDragEnd:e=>{var t;e.stopPropagation(),i.current&&Object.assign(i.current.style,{width:0,height:0}),null==(t=r.current)||t.remove(),r.current=null,o.current=null,c(null),ID.view.updateOutline((e=>{e.length=0}))}}}({width:a,height:l,props:r,sketchRef:i}),{addNodeToViewPos:p}=hU();return A("div",{className:oU,onClick:function(){const e=ID.view.getViewCanvasCenterPos();p(r,e),c(null),ID.setContextKeyValue(ym.editingMode.key,hm.Focus)},onDragStart:u,onDrag:d,onDragEnd:h,draggable:!0,children:[k("p",{className:sU,children:k(AL,{name:s})}),k("p",{className:aU,children:t(o)})]})}var fU="_menusItem_1ad17_1",gU="_menusTitle_1ad17_6",mU="_menusList_1ad17_24";function _U(e){const{t:t}=VL(),{title:n,type:i,list:r,sketchRef:o}=e;return r.length<=0?null:A("div",{className:fU,children:[k("p",{className:gU,children:t(n)}),k("div",{children:k("div",{className:mU,children:r.map((e=>k(pU,w({sketchRef:o},e),`${e.type}-${e.title}`)))})})]},`menus-${i}`)}const vU={name:"系统字体",value:"system-ui",locales:["zh"]},yU={"--font-size-min":"","--font-size-max":"","--font-size-max-width":""},wU=new Map,bU=new ResizeObserver((e=>{const t=new Map;e.forEach((e=>{const n=e.target.getBoundingClientRect();t.set(e.target,n)})),t.forEach(((e,t)=>{const n=wU.get(t);null==n||n.callbacks.forEach((t=>t(e)))}))}));var xU;!function(e){e.width="width",e.height="height"}(xU||(xU={}));const CU={top:xU.height,bottom:xU.height,left:xU.width,right:xU.width,width:xU.width,"min-width":xU.width,"max-width":xU.width,height:xU.height,"min-height":xU.height,"max-height":xU.height,"padding-top":xU.width,"padding-right":xU.width,"padding-bottom":xU.width,"padding-left":xU.width,"margin-top":xU.width,"margin-right":xU.width,"margin-bottom":xU.width,"margin-left":xU.width};function kU(e,t,n){const i=ID.view.getViewport();if(!e)return"";let r="";const o=ID.getComputedStyleOfId(e);if(KD(n,jD.badRequest),KD(i,jD.badRequest),n===uP.px)r=o[t];else{if(n===uP["%"]){const n=function(e){const t=ID.view.getContainingBlockOfId(e);let n=0,i=0;if(t instanceof HTMLElement){const e=getComputedStyle(t);n=parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight),i=parseFloat(e.height)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)}else{const{logicWidth:e,logicHeight:t}=ID.view.getViewport();n=e,i=t}return{width:n,height:i}}(e)[CU[t]],i=o.getPropertyValue(t);return KD(GL(i)&&!Number.isNaN(n),jD.internalError),HD(qD(i)/n)}if(n===uP.vw)return qD(o[t])/i.logicWidth*100+"vw";if(n===uP.vh)return qD(o[t])/i.logicHeight*100+"vh";console.warn(jD.notFound)}return r}function EU(e){const t=z(UD);return n=>kU(null==t?void 0:t.id,e,n)}var SU,IU;(IU=SU||(SU={})).start="flex-start",IU.end="flex-end",IU.center="center";const OU=Object.freeze(w({"--auto-layout":"true",display:ZD.flex,"flex-direction":"row","justify-content":SU.start,"align-items":SU.start,width:hP.fitContent,height:hP.fitContent,"grid-template-rows":"","grid-template-columns":""},{"grid-row-start":"1","grid-row-end":"2","grid-column-start":"1","grid-column-end":"2"})),TU=Object.freeze({"flex-shrink":"0"});var MU,NU;(NU=MU||(MU={}))[NU.topLeft=0]="topLeft",NU[NU.topCenter=1]="topCenter",NU[NU.topRight=2]="topRight",NU[NU.midLeft=3]="midLeft",NU[NU.midCenter=4]="midCenter",NU[NU.midRight=5]="midRight",NU[NU.bottomLeft=6]="bottomLeft",NU[NU.bottomCenter=7]="bottomCenter",NU[NU.bottomRight=8]="bottomRight";const AU=Object.freeze({tagName:"DIV",wrapper:!1,componentType:Hr.Container});class RU{static isAutoLayout(e){return vr(ID.getDeclaredStyle(e))}static isAutoLayoutItem(e){const t=ID.model.getParentNodeOfId(e);return!!t&&this.isAutoLayout(t.id)}static showAutoLayout(e,t){const[n]=e;return 1===e.length&&ho(t)&&this.isAutoLayout(n)}addAutoLayout(e){const{model:t}=ID,[n]=e;if(1===e.length){const e=t.getChildrenNodesOfId(n),i=w(w({},OU),function(e){const t={},n=ID.model.getChildrenNodesOfId(e);return t["flex-direction"]=VU(n.map((e=>e.id))),t}(n));ID.transform((()=>{const r=jU(e.map((e=>e.id)),i["flex-direction"]),o=BU(r,i["flex-direction"]);i["row-gap"]=vP(o),i["column-gap"]=vP(o),ID.model.updateAllBpStyles(n,i,!1),ID.model.updateStyle(n,TU,void 0,">","*"),r.forEach((e=>{t.reorderNode(e,null)})),r.forEach((e=>{ID.model.updateAllBpStyles(e,b(w({},wr),{width:kU(e,"width",uP.px),height:kU(e,"height",uP.px)}),!1)}))}))}else{const i={ref:n,direction:Cs.backward},r=w(w({},OU),function(e){const t=ID.model.getParentNodeOfId(e[0]);KD(t,jD.badRequest);const n=ID.view.getGroupRectByIds(e),i=ID.view.createStyleFromHitPosition(n,t,{});return delete i.width,delete i.height,i["flex-direction"]=VU(e),i}(e)),o=jU(e,r["flex-direction"]),s=BU(o,r["flex-direction"]);let a;r["row-gap"]=vP(s),r["column-gap"]=vP(s),ID.fork(),ID.add((()=>{a=t.addNode(i,{},AU)})),ID.view.nextTick((()=>{ID.add((()=>{a=t.addNode(i,{},AU),o.forEach((e=>t.reparentNode(e,a.id,null))),ID.model.updateAllBpStyles(a.id,r,!1),ID.model.updateStyle(a.id,TU,void 0,">","*"),e.forEach((e=>{ID.model.updateAllBpStyles(e,b(w({},wr),{width:kU(e,"width",uP.px),height:kU(e,"height",uP.px)}),!1)})),ID.viewModel.setSelectionById(a.id)})),ID.commitAndMerge()}),(()=>Boolean(ID.view.getComputedStyleOfId(a.id))))}}deleteAutoLayout(e){const t={display:ZD.grid,"--auto-layout":"false","flex-direction":"","justify-content":"","align-items":"","row-gap":"","column-gap":"","grid-template-rows":IP(["1fr"]),"grid-template-columns":IP(["1fr"])},n=RU.getContainerDirection(e),i=ID.model.getChildrenNodesOfId(e).map((e=>e.id)),r=i.map((e=>ID.view.getElementRectById(e))),o=ID.getComputedStyleOfId(e),s=e=>{const t=$D(o[e]);return isNaN(t)?0:t},a=s("rowGap"),l=s("columnGap");t.width=o.width,t.height=o.height,ID.transform((()=>{ID.model.updateAllBpStyles(e,t),ID.model.updateStyle(e,{"flex-shrink":""},void 0,">","*");let o=0;i.forEach(((e,t)=>{const i={width:kU(e,"width",uP.px),height:kU(e,"height",uP.px)};n===eP.row?(ID.model.updateAllBpStyles(e,w(b(w({},br),{"margin-left":vP(o)}),i)),o+=l+r[t].width):n===eP.column?(ID.model.updateAllBpStyles(e,w(b(w({},br),{"margin-top":vP(o)}),i)),o+=a+r[t].height):console.error(jD.badRequest)}))}))}getContainerAlign(e){return function(e){const{"justify-content":t=SU.start,"align-items":n=SU.start}=e,i={"justify-content":t,"align-items":n};return FU.findIndex((e=>RR(i,e)))}(ID.getDeclaredStyle(e))}alignContainer(e,t){const n=function(e){return AR(FU[e])}(t);ID.updateCurrentStyle(e,n)}static getContainerDirection(e){const{"flex-direction":t=eP.row}=ID.getDeclaredStyle(e);return t}setContainerDirection(e,t){const n={};n["flex-direction"]=t,n.width=hP.fitContent,n.height=hP.fitContent,DU(e,t===eP.row?"width":"height"),ID.updateCurrentStyle(e,n)}static createFR(e=1,t){return{"flex-grow":e.toString(),"flex-basis":QD,[t]:vP(0)}}static setItemWidthToFillContainer(e,t){var n;const i=ID.model.getParentNodeOfId(e);KD(i);RU.getContainerDirection(i.id)===eP.row?ID.updateCurrentStyle(e,RU.createFR(t,"width")):ID.updateCurrentStyle(e,{"align-self":"stretch",width:hP.auto});const r=ID.getDeclaredStyle(i.id);return!!CP(null!=(n=r.width)?n:"")&&(UU(i,"width"),!0)}static setItemHeightToFillContainer(e,t){var n;const i=ID.model.getParentNodeOfId(e);KD(i);RU.getContainerDirection(i.id)===eP.row?ID.updateCurrentStyle(e,{"align-self":"stretch",height:hP.auto}):ID.updateCurrentStyle(e,RU.createFR(t,"height"));const r=ID.getDeclaredStyle(i.id);return!!CP(null!=(n=r.height)?n:"")&&(UU(i,"height"),!0)}static unsetItemHeightFromFillContainer(e){const t=ID.model.getParentNodeOfId(e);KD(t);RU.getContainerDirection(t.id)===eP.row?ID.updateCurrentStyle(e,{"align-self":MP.alignSelf}):ID.updateCurrentStyle(e,xr)}static unsetItemWidthFromFillContainer(e){const t=ID.model.getParentNodeOfId(e);KD(t);RU.getContainerDirection(t.id)===eP.row?ID.updateCurrentStyle(e,xr):ID.updateCurrentStyle(e,{"align-self":MP.alignSelf})}static isItemGrowAtMainAxis(e){const{"flex-grow":t="","flex-basis":n}=ID.getDeclaredStyle(e);return n===QD&&"number"==typeof qD(t)}static isItemGrowAtCounterAxis(e,t){const n=ID.getDeclaredStyle(e);return"stretch"===n["align-self"]&&n[t]===hP.auto}static isWidthFillContainer(e){try{const t=ID.model.getParentNodeOfId(e);KD(t);const n=RU.getContainerDirection(t.id);return!!RU.isAutoLayoutItem(e)&&(n===eP.row&&this.isItemGrowAtMainAxis(e)||n===eP.column&&this.isItemGrowAtCounterAxis(e,"width"))}catch{return!1}}static isHeightFillContainer(e){try{const t=ID.model.getParentNodeOfId(e);KD(t);const n=RU.getContainerDirection(t.id);return n===eP.column&&this.isItemGrowAtMainAxis(e)||n===eP.row&&this.isItemGrowAtCounterAxis(e,"height")}catch{return!1}}}function DU(e,t){if(!RU.isAutoLayout(e))return!1;return ID.model.getChildrenNodesOfId(e).some((e=>!!function(e,t){var n;const i=ID.getDeclaredStyle(e.id),r=null!=(n=i[t])?n:hP.auto;return!CP(r)&&(!(gP(r)&&!RU.isItemGrowAtMainAxis(e.id)&&!RU.isItemGrowAtCounterAxis(e.id,t))&&!_P(r))}(e,t)&&("width"===t?RU.unsetItemWidthFromFillContainer(e.id):RU.unsetItemHeightFromFillContainer(e.id),ID.updateCurrentStyle(e.id,{[t]:kU(e.id,t,uP.px)}),!0)))}function PU(e,t){const n=ID.getDeclaredStyle(e);return i=n[t],Ht(i)&&i.endsWith("%");var i}function LU(e,t){var n;const i=ID.model.getParentNodeOfId(e);if(!i)return!1;const r=ID.getDeclaredStyle(i.id);if(!vr(r))return!1;const o=null!=(n=r[t])?n:hP.auto;return!!CP(o)&&(UU(i,t),!0)}function UU(e,t){const n=ID.getComputedStyleOfId(e.id);ID.updateCurrentStyle(e.id,{[t]:n[t]})}const FU=[{"justify-content":SU.start,"align-items":SU.start},{"justify-content":SU.start,"align-items":SU.center},{"justify-content":SU.start,"align-items":SU.end},{"justify-content":SU.center,"align-items":SU.start},{"justify-content":SU.center,"align-items":SU.center},{"justify-content":SU.center,"align-items":SU.end},{"justify-content":SU.end,"align-items":SU.start},{"justify-content":SU.end,"align-items":SU.center},{"justify-content":SU.end,"align-items":SU.end}];function BU(e,t){if(e.length<=1)return 0;const n=e.map((e=>ID.view.getElementRectById(e)));let i=0;return n.forEach(((e,r)=>{const o=n[r+1];o&&(t===eP.row?i+=Math.max(o.left-e.right,0):i+=Math.max(o.top-e.bottom,0))})),Math.ceil(i/(n.length-1))}function jU(e,t){const n=e.map((e=>b(w({},ID.view.getElementRectById(e)),{id:e})));let i=[];return i=t===eP.row?n.sort(((e,t)=>e.left-t.left)).map((e=>e.id)):n.sort(((e,t)=>e.top-t.top)).map((e=>e.id)),i}function VU(e){if(!e.length)return eP.row;return function(e){const t=(e=jU(e,eP.row)).map((e=>ID.view.getElementRectById(e))),n=BU(e,eP.row),i=Math.min(...t.map((e=>e.top)));let r;const o=AR(t).map((e=>(e.top=i,e.bottom=e.top+e.height,r&&(e.left=r.right+n,e.right=e.left+e.width),r=e,e)));return zU(t,o)}(e)<function(e){const t=(e=jU(e,eP.column)).map((e=>ID.view.getElementRectById(e))),n=BU(e,eP.column),i=Math.min(...t.map((e=>e.left)));let r;const o=AR(t).map((e=>(e.left=i,e.right=e.left+e.width,r&&(e.top=r.bottom+n,e.bottom=e.top+e.height),r=e,e)));return zU(t,o)}(e)?eP.row:eP.column}function zU(e,t){let n=0;return e.forEach(((e,i)=>{const r=t[i];n+=function(e,t){const n=Math.abs(e.left-t.left),i=Math.abs(e.top-t.top);return Math.sqrt(Math.pow(n,2)+Math.pow(i,2))}(e,r)})),n}const KU={"justify-self":hr.start,"align-self":hr.start},WU=b(w({},IR("rgba(51, 51, 51, 1)")),{"font-family":vU.value}),HU=w(w({width:"500px",height:"auto","font-weight":"700","font-size":"24px","text-align":"center","line-height":"1.3"},WU),KU),$U=w(w({width:"500px",height:"auto","font-weight":"400","font-size":"16px","text-align":"left","line-height":"1.5"},WU),KU),qU=w({width:vP(500),height:vP(375),"aspect-ratio":(500/375).toString()},KU),YU=w(b(w({},OU),{width:"720px",height:"360px","row-gap":"16px","column-gap":"16px"}),KU),GU=b(w(b(w({},wr),{"background-image":ER(function(e){const t=$(e).toRgb();return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}("#e0e0e0"))}),RU.createFR()),{width:"100%",height:"100%"});const XU=w({width:"500px",height:"280px",display:"grid","grid-template-rows":IP(["1fr"]),"grid-template-columns":IP(["1fr"])},KU),JU=w({},KU),QU={type:"image",title:"w.component.image",icon:"Image",styles:[{style:qU}],props:{src:YP},meta:{componentType:Hr.Image},renderWidth:500,renderHeight:375};function ZU(e){const t=e,{meta:n={},styles:i=[]}=t,r=x(t,["meta","styles"]);return w({props:{},meta:w({tagName:"DIV",componentType:Hr.Container},n),renderWidth:720,renderHeight:360,styles:[...i,{selectorType:">",subSelector:"*",style:{"flex-shrink":"0"}}]},r)}function eF(e){return w({meta:{tagName:"DIV",componentType:Hr.Container},styles:[{style:w({},GU)}]},e)}const tF={styles:[{style:b(w(w({},GU),xr),{width:"576px"})}]},nF={styles:[{style:b(w(w({},GU),xr),{width:"576px"})}]},iF={styles:[{style:b(w(w({},GU),xr),{width:"168px",height:"168px"})}]};q.t("w.component.basic"),q.t("w.component.title"),q.t("w.component.paragraph"),q.t("w.component.image"),q.t("w.component.resource"),q.t("w.component.layout"),q.t("w.component.container"),q.t("w.component.autoLayout.row"),q.t("w.component.autoLayout.col"),q.t("w.component.autoLayout.scroll"),q.t("w.component.autoLayout.page"),q.t("w.component.autoLayout.wrap");const rF=LR([{type:"atom",title:"w.component.basic",list:[{type:"title",title:"w.component.title",icon:"Text",styles:[{style:HU}],props:{content:"<h1>这是一个标题</h1>"},meta:{tagName:"DIV",componentType:Hr.RichText,subType:Jr.Title},renderWidth:500,renderHeight:32},{type:"paragraph",title:"w.component.paragraph",icon:"Paragraph",styles:[{style:$U}],props:{content:"<p>我们都是设计师，因为我们都在刻意设计我们的生活、我们的房间和我们做事的方式。----唐纳德·A·诺曼</p>"},meta:{tagName:"DIV",wrapper:!1,componentType:Hr.RichText,subType:Jr.Paragraph},renderWidth:500,renderHeight:48},QU,{type:"container",title:"w.component.container",icon:"Container",styles:[{style:XU}],props:{},meta:{tagName:"DIV",wrapper:!1,componentType:Hr.Container},renderWidth:500,renderHeight:280}]},{type:"layout",title:"w.component.layout",list:[ZU({title:"w.component.autoLayout.row",type:"row",icon:TL.LayoutHorz,styles:[{style:YU},{breakpointWidth:750,style:b(w({},YU),{width:"360px","flex-direction":"column"})}],children:[eF({}),eF({}),eF({}),eF({})],meta:{label:"w.component.autoLayout.row"}}),ZU({title:"w.component.autoLayout.col",type:"col",icon:TL.LayoutVert,styles:[{style:b(w({},YU),{"flex-direction":"column"})}],children:[eF({}),eF({}),eF({}),eF({})],meta:{label:"w.component.autoLayout.col"}}),ZU({title:"w.component.autoLayout.scroll",type:"scroll",icon:TL.LayoutSliding,styles:[{style:b(w({},YU),{"--overflow-direction":"x","overflow-x":iP.scroll})}],children:[eF(tF),eF(tF),eF(tF),eF(tF)],meta:{label:"w.component.autoLayout.scroll"}}),ZU({title:"w.component.autoLayout.page",type:"page",icon:TL.LayoutPageturn,styles:[{style:b(w({},YU),{"--overflow-direction":"x","overflow-x":iP.scroll,"scroll-snap-type":TP.mandatory})},{style:{"scroll-snap-align":OP.start},selectorType:">",subSelector:"*"}],children:[eF(nF),eF(nF),eF(nF),eF(nF)],meta:{label:"w.component.autoLayout.page"}}),ZU({title:"w.component.autoLayout.wrap",type:"wrap",icon:TL.LayoutSliding,styles:[{style:b(w({},YU),{"flex-wrap":tP.wrap})}],children:[eF(iF),eF(iF),eF(iF),eF(iF),eF(iF),eF(iF)],meta:{label:"w.component.autoLayout.wrap"}})]},{type:"resource",title:"w.component.resource",list:[]}]),oF=rn("UIOptionListService");function sF(){const{t:e}=VL(),[t,n]=P(xL),i=t===wL.add,r=T.exports.useRef(null),o=function(){const e=ZL(oF),{data:t=[]}=Y((()=>(null==e?void 0:e.getComponents({}))||Promise.resolve([])),{cacheKey:"editor-components",refreshDeps:[e]});return t}(),s=T.exports.useMemo((()=>{const e=AR(rF),t=e.find((e=>"resource"===e.type)),n=o.map((e=>(e=>{const{title:t,config:n,src:i,data:r,renderWidth:o,renderHeight:s}=e;return{type:"web-widget",title:t,icon:"Container",styles:[{style:b(w({},JU),{width:`${o}px`,height:`${s}px`})}],props:{data:r,type:"system",src:i},meta:{config:n,componentType:Hr.WebWidget},renderWidth:o,renderHeight:s}})(e)));return null==t||t.list.push(...n),e}),[o]);return A(BL,{visible:i,title:e("w.component.add"),onClose:function(){n(null)},dir:"ltr",children:[k("div",{className:iU,children:s.map(((e,t)=>A("div",{children:[k(_U,w({sketchRef:r},e),`${e.type}-${t}`),t<s.length-1?k(U,{}):null]},`${e.type}-${t}`)))}),k("img",{id:"dragSketch",ref:r,className:nU,alt:""})]})}var aF;!function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE"}(aF||(aF={}));class lF{constructor(){C(this,"_keyCodeToStr"),C(this,"_strToKeyCode"),this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const cF=new lF,dF=new lF,uF=new lF;var hF,pF,fF;!function(){function e(e,t,n=t,i=n){cF.define(e,t),dF.define(e,n),uF.define(e,i)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}(),function(e){e.toString=function(e){return cF.keyCodeToStr(e)},e.fromString=function(e){return cF.strToKeyCode(e)},e.toUserSettingsUS=function(e){return dF.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return uF.keyCodeToStr(e)},e.fromUserSettings=function(e){return dF.strToKeyCode(e)||uF.strToKeyCode(e)}}(hF||(hF={})),function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"}(pF||(pF={})),function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"}(fF||(fF={}));class gF{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}function mF(e,t){if(0===e)return null;const n=(65535&e)>>>0;if(0!==(4294901760&e)>>>16)throw new Error("chordkeybinding is not su");return function(e,t){const n=!!(2048&e),i=!!(256&e),r=t===HR.Macintosh?i:n,o=!!(1024&e),s=!!(512&e),a=t===HR.Macintosh?n:i;return new gF(r,o,s,a,255&e)}(n,t)}class _F{constructor(e,t,n,i,r){C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyLabel"),this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=r}}var vF,yF,wF,bF,xF,CF,kF={layerGrab:"_layerGrab_1bol0_1",grab:"_grab_1bol0_10",grabbing:"_grabbing_1bol0_13"};function EF(e){const{container:t}=e,n=T.exports.useRef(null),i=function(e,t){var n,i;const[r,o]=T.exports.useState(vF.default),[s,a]=T.exports.useState(0),[l,c]=T.exports.useState(0),[d,u]=T.exports.useState(0),[h,p]=T.exports.useState(0),[f,g]=T.exports.useState(!1),m=ID.view,_=m.getViewport().scale,v=null==(i=null==(n=m.canvasHostDomNode)?void 0:n.contentDocument)?void 0:i.querySelector("body");G("keydown",(e=>{const t=hF.fromString(e.code);f||t!==aF.Space||document.activeElement!==document.body||(e.preventDefault(),o(vF.grab)),g(!0)})),G("keyup",(()=>{r!==vF.default&&o(vF.default),g(!1)}));const y=T.exports.useRef();return T.exports.useEffect((()=>{y.current=r===vF.default?null:e}),[r]),G("mousedown",(e=>{var n;if(r===vF.grab&&(null==t?void 0:t.current)){const{clientX:i,clientY:r}=e,s=t.current.scrollLeft,l=null!=(n=null==v?void 0:v.scrollTop)?n:0;a(i),c(r),u(s),p(l),o(vF.grabbing)}}),{target:y.current}),G("mousemove",(e=>{if(r===vF.grabbing&&(null==t?void 0:t.current)){const{clientX:n,clientY:i}=e,r=n-s,o=i-l;v&&(v.scrollTop=h-o/_),t.current.scrollLeft=d-r}}),{target:y.current}),G("mouseup",(()=>{r===vF.grabbing&&o(vF.grab)}),{target:y.current}),r}(null==n?void 0:n.current,t);return T.exports.useEffect((()=>{document.activeElement===ID.view.canvasHostDomNode&&ID.view.canvasHostDomNode.blur()}),[]),i===vF.default?null:k("div",{className:N([kF[i],kF.layerGrab]),ref:n})}(yF=vF||(vF={})).default="default",yF.grab="grab",yF.grabbing="grabbing";class SF{constructor(){}static isItemDocked(e,t){In()}dockItem(e,t){In()}undockItem(e,t){In()}static isHorizontalDocked(e){In()}static isVerticalDocked(e){In()}}(bF=wF||(wF={})).horizontalCenter="horizontalCenter",bF.verticalCenter="verticalCenter",(CF=xF||(xF={})).horizontalSpaceBetween="horizontalSpaceBetween",CF.verticalSpaceBetween="verticalSpaceBetween";const IF=w(w({},lr),wF),OF=w(w(w({},lr),wF),xF),TF={[IF.left]:{"justify-self":hr.start},[IF.right]:{"justify-self":hr.end},[IF.top]:{"align-self":hr.start},[IF.bottom]:{"align-self":hr.end},[IF.horizontalCenter]:{"justify-self":hr.center},[IF.verticalCenter]:{"align-self":hr.center}},MF={"margin-left":QD,"margin-right":QD},NF={"margin-top":QD,"margin-bottom":QD},AF={[IF.left]:MF,[IF.right]:MF,[IF.top]:NF,[IF.bottom]:NF,[IF.horizontalCenter]:MF,[IF.verticalCenter]:NF},RF={horizontal:[IF.left,IF.right,IF.horizontalCenter],vertical:[IF.top,IF.bottom,IF.verticalCenter]};class DF extends SF{static isSameAncestor(e){const t=e.map((e=>ID.model.getAncestorNodesOfId(e).map((e=>e.id)).join("")));return 1===[...new Set(t)].length}alignItems(e,t){if(1===e.length){KD(t in IF);const[n]=e,i=ID.model.getParentNodeOfId(n);KD(null==i?void 0:i.id,jD.badRequest);const r={};Object.assign(r,TF[t]),Object.assign(r,AF[t]);const{width:o,height:s}=ID.getComputedStyleOfId(n);DF.isHorizontalDocked(n)&&RF.horizontal.includes(t)&&(r.width=o),DF.isVerticalDocked(n)&&RF.vertical.includes(t)&&(r.height=s),ID.updateCurrentStyle(n,r)}else{const n=function(e,t){const n=ID.view.getGroupRectByIds(e);return t===OF.horizontalSpaceBetween?function(e,t){const n=[],{width:i}=t,r=e.map((e=>ID.view.getElementRectById(e))),o=r.reduce(((e,t)=>e+t.width),0),s=(i-o)/(e.length-1);let a=t.left;return e.forEach(((e,t)=>{const i=r[t],o=a-i.left;n.push(LF(e,o,0)),a=a+s+i.width})),n}(e,n):t===OF.verticalSpaceBetween?function(e,t){const n=[],{height:i}=t,r=e.map((e=>ID.view.getElementRectById(e))),o=r.reduce(((e,t)=>e+t.height),0),s=(i-o)/(e.length-1);let a=t.top;return e.forEach(((e,t)=>{const i=r[t],o=a-i.top;n.push(LF(e,0,o)),a=a+s+i.height})),n}(e,n):e.map((e=>function(e,t,n){const i={},r=function(e,t,n){const i=ID.view.getElementRectById(e),r={x:n.left+n.width/2,y:n.top+n.height/2},o={x:i.left+i.width/2,y:i.top+i.height/2};switch(t){case IF.left:return n.left-i.left;case IF.horizontalCenter:return r.x-o.x;case IF.right:return n.right-i.right;case IF.top:return n.top-i.top;case IF.verticalCenter:return r.y-o.y;case IF.bottom:return n.bottom-i.bottom;default:return 0}}(e,t,n);RF.horizontal.includes(t)?Object.assign(i,LF(e,r,0)):RF.vertical.includes(t)&&Object.assign(i,LF(e,0,r));return i}(e,t,n)))}(e,t);KD(DF.isSameAncestor(e),"多选对齐只能操作相同层级节点"),e.forEach(((e,t)=>{ID.updateCurrentStyle(e,n[t])}))}}static isHorizontalUndocked(e){const t=ID.getDeclaredStyle(e);return gr(t)}static isHorizontalDocked(e){return DF.isItemDocked(e,fr.left)&&DF.isItemDocked(e,fr.right)}static isVerticalUndocked(e){const t=ID.getDeclaredStyle(e);return mr(t)}static isVerticalDocked(e){return DF.isItemDocked(e,fr.top)&&DF.isItemDocked(e,fr.bottom)}static isItemDocked(e,t){const n=ID.getDeclaredStyle(e);return _r(n,t)}dockItem(e,t){const n=PF(e),{offsetLeft:i,offsetRight:r,offsetTop:o,offsetBottom:s}=n,a={};switch(t){case fr.left:a["margin-left"]=JL.toPX(i),DF.isItemDocked(e,fr.right)?(a["justify-self"]=hr.stretch,a.width=hP.auto):(a["justify-self"]=hr.start,a["margin-right"]=QD);break;case fr.right:a["margin-right"]=JL.toPX(r),DF.isItemDocked(e,fr.left)?(a["justify-self"]=hr.stretch,a.width=hP.auto):(a["justify-self"]=hr.end,a["margin-left"]=QD);break;case fr.top:a["margin-top"]=JL.toPX(o),DF.isItemDocked(e,fr.bottom)?(a["align-self"]=hr.stretch,a.height=hP.auto):(a["align-self"]=hr.start,a["margin-bottom"]=QD);break;case fr.bottom:a["margin-bottom"]=JL.toPX(s),DF.isItemDocked(e,fr.top)?(a["align-self"]=hr.stretch,a.height=hP.auto):(a["align-self"]=hr.end,a["margin-top"]=QD);break;case fr.around:a["justify-self"]=hr.stretch,a["align-self"]=hr.stretch,a["margin-left"]=JL.toPX(i),a["margin-right"]=JL.toPX(r),a["margin-top"]=JL.toPX(o),a["margin-bottom"]=JL.toPX(s),a.width=hP.auto,a.height=hP.auto;break;default:console.error(jD.badRequest)}ID.updateCurrentStyle(e,a)}undockItem(e,t){const n={},i=PF(e),{computedStyle:r,dockWidth:o,dockHeight:s,offsetLeft:a,offsetTop:l}=i,c=2*(a+$D(r.width)/2-o/2),d=2*(l+$D(r.height)/2-s/2);switch(t){case fr.left:DF.isItemDocked(e,fr.right)?(n["justify-self"]=hr.end,n["margin-left"]=QD,n.width=r.width):(n["justify-self"]=hr.center,n["margin-left"]=JL.toPX(c),n["margin-right"]=QD);break;case fr.right:DF.isItemDocked(e,fr.left)?(n["justify-self"]=hr.start,n["margin-right"]=QD,n.width=r.width):(n["justify-self"]=hr.center,n["margin-left"]=JL.toPX(c),n["margin-right"]=QD);break;case fr.top:DF.isItemDocked(e,fr.bottom)?(n["align-self"]=hr.end,n["margin-top"]=QD,n.height=r.height):(n["align-self"]=hr.center,n["margin-top"]=JL.toPX(d),n["margin-bottom"]=QD);break;case fr.bottom:DF.isItemDocked(e,fr.top)?(n["align-self"]=hr.start,n["margin-bottom"]=QD,n.height=r.height):(n["align-self"]=hr.center,n["margin-top"]=JL.toPX(d),n["margin-bottom"]=QD);break;case fr.none:n["justify-self"]=hr.center,n["align-self"]=hr.center,n["margin-left"]=JL.toPX(c),n["margin-top"]=JL.toPX(d),n.width=r.width,n.height=r.height,n["margin-right"]=QD,n["margin-bottom"]=QD;break;default:console.error(jD.badRequest)}ID.updateCurrentStyle(e,n)}}function PF(e){const t=ID.view.getElementById(e),n=ID.view.getComputedStyleOfId(e),i=ID.model.getParentNodeOfId(e);KD(i&&t,jD.badRequest),KD(ho(i)||ao(i),jD.badRequest);const r=ID.view.getComputedStyleOfId(i.id),o=ID.view.getElementRectById(e),s=ID.view.getElementRectById(i.id),a=function(e,t){return[t.top,t.right,t.bottom,t.left].some((e=>!Number.isNaN(e)))?t:e}(s,oP(n,r,s)),l=function(e,t){return{offsetLeft:e.left-t.left,offsetRight:t.right-e.right,offsetTop:e.top-t.top,offsetBottom:t.bottom-e.bottom}}(o,a);return b(w({},l),{computedStyle:n,parentComputedStyle:r,dockWidth:a.width,dockHeight:a.height})}function LF(e,t,n){const i=PF(e),{offsetLeft:r,offsetRight:o,offsetTop:s,offsetBottom:a}=i,{marginLeft:l,marginTop:c}=ID.getComputedStyleOfId(e),d={};return DF.isHorizontalUndocked(e)?d["margin-left"]=JL.toPX(qD(l)+2*t):DF.isHorizontalDocked(e)?(d["margin-left"]=JL.toPX(r+t),d["margin-right"]=JL.toPX(o-t)):DF.isItemDocked(e,IF.right)?d["margin-right"]=JL.toPX(o-t):d["margin-left"]=JL.toPX(r+t),DF.isVerticalUndocked(e)?d["margin-top"]=JL.toPX(qD(c)+2*n):DF.isVerticalDocked(e)?(d["margin-top"]=JL.toPX(s+n),d["margin-bottom"]=JL.toPX(a-n)):DF.isItemDocked(e,IF.bottom)?d["margin-bottom"]=JL.toPX(a-n):d["margin-top"]=JL.toPX(s+n),d}function UF(e,t){const{sampleRate:n}=t,{js_filter:i}=X(e)||{};let r=null;window.addEventListener("unhandledrejection",(function(t){var o;if("function"==typeof i&&!1===i(t))return;e.gdbehaviour&&(r=e.gdbehaviour.getCollect());const s=((null==(o=t.reason)?void 0:o.stack)||"").split("\n");s.shift();const a={w_msg:t.reason.message||t.type,w_file:"",w_line:"",w_col:"",category:J,stack:s,sampleRate:n,bl1:JSON.stringify(r)};e.report(a)}))}function FF(e,t){const{sampleRate:n}=t,{js_filter:i}=X(e)||{};let r=null;window.addEventListener("error",(function(t){if("function"==typeof i&&!1===i(t))return;e.gdbehaviour&&(r=e.gdbehaviour.getCollect());const o=(t.error.stack||"").split("\n");o.shift();const s={w_msg:t.message,w_file:t.filename,w_line:t.lineno,w_col:t.colno,category:J,stack:o,sampleRate:n,bl1:JSON.stringify(r)};e.report(s)}))}class BF{constructor(e,t){C(this,"firstRouteTriggered",!1),C(this,"collectlen",10),C(this,"collect",[]),C(this,"wpk"),C(this,"router"),this.wpk=e,this.router=t,this.routerCollection(),this.clickCollection(),this.logCollection()}routerChange(e){if(this.router)this.router.onReady((()=>{var t;if(!this.firstRouteTriggered){const n=null==(t=this.router)?void 0:t.fullPath,i=Q();this.firstRouteTriggered=!0,e({page:n,sourcePage:i})}})),this.router.onChange(((t,n)=>{let i="";const r=t;this.firstRouteTriggered?i=n:(i=Q(),this.firstRouteTriggered=!0),e({page:r,sourcePage:i})}));else if(!this.firstRouteTriggered){const t=location.href,n=Q();this.firstRouteTriggered=!0,e({page:t,sourcePage:n})}}routerCollection(){this.routerChange((({page:e,sourcePage:t})=>{const{device_id:n,user_id:i}=this.wpk.slsParams||{};this.setCollect("router.change",{deviceId:n,userId:i,page:e,sourcePage:t})}))}clickCollection(){window.addEventListener("click",(e=>{const t=te(e.target,5),n=ne(e.target,100);this.setCollect("ui.click",{xpath:t,outerhtml:n})}),!0)}logCollection(){const e=this.setCollect.bind(this),t=["warn","error"];for(let n=0;n<t.length;n++){const i=t[n];window.console[i]&&"function"==typeof window.console[i]&&Z(window.console,i,(function(t){return function(){const n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];e("console",{level:i,message:n}),t&&Function.prototype.apply.call(t,window.console,n)}}))}}getCollect(){return this.collect}setCollect(e,t){const n=Object.assign(t,{time:ee()});"router.change"!==e?(this.collect.length>=this.collectlen&&this.collect.splice(1,1),this.collect.push({type:e,data:n})):this.collect=[{type:e,data:n}]}}function jF(e,t){const n=new BF(e,t);e.gdbehaviour=n}var VF,zF;(zF=VF||(VF={})).dev="dev",zF.prod="prod",zF.stage="stage",zF.fat="fat",zF.development="development";const KF=parseInt(1730627933490),WF="production"!==VF.development,HF=["prod","stage"].includes("production");console.log(`Reporter is ${WF?"open":"close"}. Env: production ${KF}`);let $F=null;WF&&($F=new ie({bid:HF?"sls-37116e81e4edc2aefa":"sls-f57aba5542dcb8d1ba",env:"production",app_type:"web",app_name:"iliad-editor",app_version:"0.3.2",app_vct:KF,err_config:{js_sample_rate:1,res_sample_rate:1}}));class qF extends T.exports.Component{constructor(e){super(e),C(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){null==$F||$F.error(e,{bl1:t.componentStack}),console.error(e,t)}render(){return this.state.hasError?k("h6",{children:"Something went wrong."}):this.props.children}}function YF(e){return t=>{const n=z(UD),i=z(LD),r=z(RD);if(!n||!i||!r.length)return null;const o=w({node:n,style:i,selection:r},t),{node:s,style:a,selection:l}=o;return s&&a&&l?k(qF,{children:k(e,w({},o))}):null}}var GF="_input_1l986_1";var XF="_label_eibsq_1";function JF(e){const t=e,{children:n,className:i}=t,r=x(t,["children","className"]);return k(re,b(w({className:N(XF,i),"side-aligned":"start"},r),{children:n}))}var QF="_item_1ccd5_1",ZF="_normalMargin_1ccd5_4",eB="_itemDisabled_1ccd5_7",tB="_fieldContent_1ccd5_10";function nB(e){const t=e,{children:n,className:i="",label:r,disabled:o,required:s,sideAligned:a="start",labelStyle:l,contentStyle:c,margin:d="normal",empty:u=!1}=t,h=x(t,["children","className","label","disabled","required","sideAligned","labelStyle","contentStyle","margin","empty"]);return u?null:A("div",b(w({className:N(QF,i,{[eB]:o,[ZF]:"normal"===d})},h),{children:[k(JF,{disabled:o,required:s,sideAligned:a,style:l,children:r}),k("div",{className:tB,style:c,children:n})]}))}var iB="_input_1pqhx_1",rB="_logicInput_1pqhx_8",oB="_inputWrap_1pqhx_12",sB="_inputWithIcon_1pqhx_21",aB="_icon_1pqhx_25";function lB(e){G("keyup",(t=>{var n;"Enter"===t.code&&(null==(n=e.current)||n.blur())}),{target:e})}const cB=T.exports.forwardRef(((e,t)=>{const n=T.exports.useRef(null),i=e,{value:r="",suffix:o="",onChange:s,className:a,onFocus:l,onBlur:c,logic:d,onInput:u,autofocus:h,children:p,disabled:f}=i,g=x(i,["value","suffix","onChange","className","onFocus","onBlur","logic","onInput","autofocus","children","disabled"]),[m,_]=T.exports.useState(h),v=m?`${r}`:`${r}${o}`;return G("focus",(function(e){f||(null==l||l(e.target.value),_(!0),setTimeout((()=>{var e;null==(e=n.current)||e.select()}),50))}),{target:n}),G("blur",(function(e){null==c||c(e.target.value),_(!1)}),{target:n}),G("input",(function(e){null==u||u(e.target.value)}),{target:n}),lB(n),T.exports.useEffect((()=>{var e;(null==(e=n.current)?void 0:e.value)&&n.current.value!==v&&(n.current.value=v)})),k(H,b(w({className:N(iB,d?rB:"",a),ref:LP([n,t]),value:v,change:function(e){const t=e.target.value;var n;o&&(n=t).length===Number.parseFloat(n).toString().length?null==s||s(`${t}${o}`):null==s||s(t)},autofocus:h,disabled:f},g),{children:p}))}));function dB(e){const t=e,{name:n,className:i,style:r}=t,o=x(t,["name","className","style"]);return A("div",{className:N(oB,o.logic?cL:"",i),style:r,children:[k(cB,w({className:sB},o)),k(AL,{className:aB,name:n})]})}var uB="_title_1yto1_1",hB="_titleSecondary_1yto1_10",pB="_icon_1yto1_13";const fB=T.exports.forwardRef(((e,t)=>{const n=e,{children:i,className:r,variant:o="primary",action:s="",slotAdd:a}=n,l=x(n,["children","className","variant","action","slotAdd"]),c="add"===s,d="delete"===s;return A("h2",b(w({ref:t,className:N(r,uB,{[hB]:"secondary"===o})},l),{children:[i,c&&k(AL,{className:pB,name:"Add"}),d&&k(AL,{className:pB,name:"Remove"}),a]}))}));var gB,mB,_B="_divider_1agvc_1";function vB(){return k(U,{className:N(_B)})}(mB=gB||(gB={})).page="page",mB.site="site",mB.anchor="anchor",mB.phone="phone",mB.email="email",mB.none="none";const yB=/#.*$/,wB=/\/\//;function bB(e){return wB.test(e)||/^\//.test(e)}function xB(e){return yB.test(e)}class CB{static stringify(e){return e.anchor?`${e.href}#${e.anchor}`:e.href}static parse(e){const[t,n=""]=e.split("#");return{href:t,anchor:n}}}class kB{static stringify(e,t){const n=this.URIClassMap[e];if(!n)throw new Error("404");return n.stringify(t)}static parse(e){const t=function(e){return/^mailto:/.test(e)}(n=e)?gB.email:function(e){return/^tel:/.test(e)}(n)?gB.phone:xB(n)?gB.anchor:bB(n)?gB.site:gB.page;var n;const i=this.URIClassMap[t];if(!i)throw new Error("404");return w({type:t},i.parse(e))}}C(kB,"URIClassMap",{site:class{static stringify(e){let t=e.href;return bB(e.href)||(t=`//${e.href}`),t}static parse(e){return{href:e,anchor:""}}},phone:class{static stringify(e){return`tel:${e.href}`}static parse(e){const t=e.match(/^tel:(.+)/);return{href:t?t[1]:"",anchor:""}}},page:class{static stringify(e){return e.href}static parse(e){return{href:e,anchor:""}}},anchor:CB,email:class{static stringify(e){return`mailto:${e.href}`}static parse(e){const t=e.match(/^mailto:(.+)/);return{href:t?t[1]:"",anchor:""}}}});var EB="_toastContainer_mkv14_15";const SB={default:"",success:"positive",info:"info",warning:"warning",error:"negative"},IB={top:"_toastPlacementTop_mkv14_26",bottom:"_toastPlacementBottom_mkv14_30"};function OB(e){const[t,n]=T.exports.useState(!0),{type:i="default",duration:r=2e3,message:o="",actionText:s,showClose:a,onAction:l,close:c}=e,d={timeout:r,variant:SB[i],closeable:a};return T.exports.useEffect((()=>{t||null==c||c()}),[t]),A(se,b(w({open:t},d),{dir:"ltr",close:()=>{console.log("close"),n(!1)},children:[o,s?k(ae,{slot:"action",variant:"overBackground",quiet:!0,dir:"ltr",role:"button",size:"m",onClick:()=>{null==l||l()},children:s}):null]}))}function TB(e){const{placement:t="bottom"}=e,{container:n,remove:i}=function(e){const t=document.querySelector("sp-theme");if(!t)throw new Error("404");let n=t.querySelector("#toastContainer");return n||(n=document.createElement("sp-theme"),n.color="dark",n.size="m",n.dir="ltr",n.id="toastContainer",n.className=`${EB} ${IB[e]}`,t.appendChild(n)),{slot:t,container:n,remove:()=>{null==n||n.remove()}}}(t),r=()=>{i()};return oe.exports.render(k(OB,b(w({},e),{close:r})),n),r}q.t("w.anchor"),q.t("w.anchor.message.exists");var MB=YF((function(e){var t;const{node:n}=e,i=null!=(t=n.props.id)?t:"",{links:r,nodes:o}=z(TD),{t:s}=VL();return A("div",{children:[k(fB,{variant:i?"primary":"secondary",action:i?"delete":"add",onClick:i?function(){ID.transform((e=>{e.updateNodeById(n.id,{id:""})}))}:function(){var e,t;const i=`${null!=(t=null==(e=n.meta)?void 0:e.label)?t:s(wy(n))}${uU().slice(0,3)}`.replace(/\s/g,"");ID.transform((e=>{e.updateNodeById(n.id,{id:i})}))},children:s("w.anchor")}),i&&k(nB,{label:s("w.anchor.name"),margin:"none",children:k(cB,{className:GF,value:i,onChange:function(e){!function(e){return e.filter((e=>e.props.id)).map((e=>e.props.id))}(o).includes(e)?ID.transform((t=>{t.updateNodeById(n.id,{id:e}),function(e,t,n){e.filter((e=>xB(e.href)&&CB.parse(e.href).anchor===t)).forEach((e=>{const t=CB.parse(e.href).href;ID.model.updateLink(e.targetId,CB.stringify({href:t,anchor:n}),e.target,e.rel)}))}(r,i,e)})):TB({message:s("w.anchor.message.exists")})},required:!0,pattern:"[一-龥a-zA-Z0-9_-]*"})}),k(vB,{})]})}));var NB={container:"_container_puqqr_1",tabs:"_tabs_puqqr_4",tabContent:"_tabContent_puqqr_10",label:"_label_puqqr_17",imageUploader:"_imageUploader_puqqr_20",uploadHandle:"_uploadHandle_puqqr_34",itemsWrap:"_itemsWrap_puqqr_44",bgSizePicker:"_bgSizePicker_puqqr_49",linearSlider:"_linearSlider_puqqr_53",itemWrap:"_itemWrap_puqqr_62",itemDragHandle:"_itemDragHandle_puqqr_68",bgRow:"_bgRow_puqqr_76",bgDesc:"_bgDesc_puqqr_80"};var AB="_fieldGroup_1phd0_1",RB="_colorArea_1phd0_6",DB="_colorSlider_1phd0_9",PB="_inputGroup_1phd0_13",LB="_input_1phd0_13",UB="_opacitySlider_1phd0_27";function FB(e){const{className:t,color:n="#000000",onChange:i,autofocusInput:r=!1}=e,o=T.exports.useRef(),s=T.exports.useMemo((()=>$(n)),[n]),a=qD(""+100*s.toRgb().a),{run:l,cancel:c}=le(((e,t)=>{const n=$(e);n.setAlpha((null!=t?t:a)/100);const{r:r,g:o,b:s,a:l}=n.toRgb();null==i||i(`rgba(${r},${o},${s},${l})`)}),{wait:15});function d(e){const t=parseInt(e);l(n,t)}ce(c);const u=bR("transparent",s.toHexString());return A("div",{className:N(AB,t),children:[k(de,{className:RB,color:n,input:function(e){l(e.target.color)}}),k(ue,{className:DB,color:n,input:function(e){l(e.target.color)}}),k(he,{className:UB,value:a,min:0,max:100,step:1,labelVisibility:"none",input:e=>d(e.target.value),style:{backgroundImage:SR(u,90)}}),A("div",{className:PB,children:[k(cB,{ref:o,autofocus:r,className:LB,value:s.toHexString(),onChange:function(e){l(e)}}),k(cB,{className:LB,value:a,suffix:"%",onChange:d})]})]})}var BB="_panel_xsz69_13",jB="_content_xsz69_21";const VB={placement:"none",receivesFocus:"auto"},zB={click:"click",hover:"mouseenter"};function KB(e){const{trigger:t,content:n,interaction:i="click",options:r=VB,title:o,disabled:s,popoverStyle:a={},fitToConfigPanel:l=!1,triggerClass:c,triggerRef:d,panelClass:u}=e,[h,p]=pe(e,{valuePropName:"visible",trigger:"onVisibleChange",defaultValue:!1}),[f,g]=pe(e,{valuePropName:"position",trigger:"onPositionChange",defaultValue:[0,0]}),m=T.exports.useRef(0),_=T.exports.useRef(null),v=T.exports.useRef(null),y=T.exports.useRef(null);function b(e){e.type===zB[i]&&E()}function C(){"hover"===i&&(m.current=setTimeout((()=>{S()}),100))}function E(){clearTimeout(m.current),s||async function(){var e;const t=_.current,n=v.current;if(t&&n){const o=function(){var e;return null==(e=v.current)?void 0:e.querySelector("[autofocus=true]:not([disabled])")}();null==o||o.focus();const s=r,{receivesFocus:a}=s,c=x(s,["receivesFocus"]);if(y.current=await me.open(t,i,n,o?c:r),!h&&p(!0),l){const i=(null==(e=null==d?void 0:d.current)?void 0:e.getBoundingClientRect())||t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=YD(0,window.innerWidth-256-r.width-1,window.innerWidth-r.width),s=YD(0,i.top,window.innerHeight-r.height);g([o,s])}}}()}function S(){var e;null==(e=y.current)||e.call(y),I()}function I(){h&&p(!1)}return G("mouseenter",(()=>{"hover"===i&&clearTimeout(m.current)}),{target:v}),G("mouseleave",(()=>{C()}),{target:v}),G("sp-closed",I,{target:_.current}),G("move",(function(e){const t=e.detail.offset;g([t.x,t.y])}),{target:v.current}),T.exports.useEffect((()=>()=>{S()}),[]),T.exports.useEffect((()=>{h?E():S()}),[h]),T.exports.useEffect((()=>{var e;if(!o)try{null==(e=v.current)||e.header.remove()}catch{}})),A(T.exports.Fragment,{children:[k("div",{className:c,ref:_,onClick:b,onMouseEnter:b,onMouseLeave:C,children:t}),k(fe,{color:"light",scale:"medium",children:k(ge,{ref:v,className:N(u,BB),title:o,dismissable:!!o,close:S,moveable:!0,posx:f[0],posy:f[1],style:w({display:h?"block":"none",paddingTop:o?QD:vP(10)},a),children:k("div",{className:jB,children:n})})})]})}function WB(e){const{onChange:t}=e,n=T.exports.useRef(null);function i(e){t(e.target.value)}return T.exports.useEffect((()=>{var e;return null==(e=n.current)||e.addEventListener("change",i),()=>{var e;null==(e=n.current)||e.removeEventListener("change",i)}}),[n.current,i]),k(_e,w({ref:n},e))}var HB="_item_fb0li_1",$B="_activeItem_fb0li_13",qB="_add_fb0li_17",YB="_colorRect_fb0li_32";function GB(e){const t=e,{src:n}=t,i=x(t,["src"]);return k("img",w({src:n},i))}function XB(e){const t=e,{active:n=!1,logic:i=!1,children:r,className:o}=t,s=x(t,["active","logic","children","className"]);return k("div",b(w({className:N(HB,o,{[$B]:n,[cL]:i})},s),{children:r}))}function JB(e){const{visible:t}=e,n=t?"Eye":"EyeDisplay";return k("span",{style:{cursor:"pointer"},children:k(AL,{name:n,style:{color:"#949494"}},n)})}function QB(e){const{t:t}=VL();return k(ZB,w({src:zP,text:t("w.component.add")},e))}function ZB(e){const t=e,{src:n,text:i}=t,r=x(t,["src","text"]);return A("div",b(w({className:qB},r),{children:[k(GB,{src:n,width:20}),k("span",{children:i})]}))}function ej(e){const t=e,{color:n,name:i,background:r,text:o}=t,s=x(t,["color","name","background","text"]);return A("div",b(w({className:qB},s),{children:[k("div",{className:YB,style:r?{background:r}:{},children:k(AL,{name:i,style:n?{fill:n}:{}})}),k("span",{children:o})]}))}function tj(e){return k("div",w({className:YB},e))}var nj="_del_kno2e_1";function ij(e){return k("div",b(w({},e),{className:nj,children:"—"}))}function rj(){return new Promise(((e,t)=>{const n=document.createElement("input");n.type="file",n.accept='accept="image/*"',n.style.display="none",n.click(),n.addEventListener("change",(()=>{e(n.files),n.remove()}))}))}const oj=rn("fileStorageService");var sj="_logicRadio_wwwad_1";function aj(e){const t=e,{logic:n=!1,selected:i="",options:r,onChange:o,radioStyle:s}=t,a=x(t,["logic","selected","options","onChange","radioStyle"]),[l,c]=T.exports.useState("");return T.exports.useEffect((()=>{const e=setTimeout((()=>{c(i)}));return()=>{e&&clearTimeout(e)}}),[i]),k(ve,b(w({className:n?sj:"",selected:l,change:function(e){const{target:t,currentTarget:n}=e;if(t!==n)return;const i=e.currentTarget.selected;null==o||o(i)},type:"button"},a),{children:r.map((e=>k(ye,{value:e.value,disabled:e.disabled,type:"button",style:s,children:e.label},e.value)))}))}const lj=T.exports.createContext({});function cj(e){const[t,n]=we(-1);return k(lj.Provider,{value:{dropIndex:t,setDropIndex:n},children:e.children})}const dj={[AP.top]:0,[AP.bottom]:1};function uj(e){const{dropIndex:t,setDropIndex:n}=T.exports.useContext(lj),{dropRef:i,onDrop:r,size:o}=e,{run:s}=le(((e,t,r)=>{var o;const s=r.isOver({shallow:!0});let a=-1;const l=null==(o=i.current)?void 0:o.getBoundingClientRect(),c=r.getClientOffset();if(s&&l&&c){const e=PP(l,c,!1),i=dj[e];isFinite(i)&&(a=t.index+i,n(a))}}),{wait:10});function a(){n(-1)}const l=DP(b(w({},e),{onHover:s,onDrop(e,n,i){a(),e.index!==n.index&&(n.index=YD(0,t,o),null==r||r(e,n,i))},onDragEnd(e,n){if(!n.didDrop()){if(e.index===t)return;const i=YD(0,t,o);null==r||r(e,{index:i},n)}a()}}));return b(w({},l),{dropIndex:t})}function hj(e,t,n){if(n<t)e.splice(n,0,...e.splice(t,1));else{const i=e[t];e.splice(n,0,i),e.splice(t,1)}}var pj,fj,gj;(fj=pj||(pj={})).cover="cover",fj.contain="contain",fj.tile="tile",(gj||(gj={})).bgItem="bgItem";const mj=[{value:yR.color,label:"w.background.pureColor"},{value:yR.linear,label:"w.background.gradient"},{value:yR.image,label:"w.background.pattern"}];var _j,vj,yj,wj;(vj=_j||(_j={})).first="rgba(224, 224, 224, 1)",vj.second="rgba(0, 0, 0, 0.2)",(wj=yj||(yj={})).start="rgba(0, 0, 0, 1)",wj.end="rgba(0, 0, 0, 0)";var bj=YF((function(e){const{style:t,animationStyle:n,addStyle:i}=e,r=Boolean(null==n?void 0:n["background-image"]),[o,s]=T.exports.useState(-1),a=kR(t),l=a.length>1,c=ZL(oj),{t:d}=VL();function u(e){const t=function(e){const t=[],n=[],i=[],r=[];return e.forEach((e=>{const{colorStops:o,orientation:s,size:a,type:l,imageUrl:c,repeat:d=CR.repeat,position:u=CR.position,color:h}=e;l===yR.image?t.push(function(e){return`url(${e})`}(c)):l===yR.linear?t.push(SR(o,s)):l===yR.color&&t.push(ER(h)),n.push(a),i.push(d),r.push(u)})),{"background-image":t.join(","),"background-size":n.join(","),"background-repeat":i.join(","),"background-position":r.join(",")}}(e);i(t)}function h(e,t){const n=e.index,i=t.index;hj(a,n,i),u(a)}return k(cj,{children:k("div",{className:NB.container,children:k(nB,{label:d("w.background.fill"),labelStyle:{alignSelf:"start"},children:A("div",{className:NB.itemsWrap,children:[a.map(((e,t)=>k(Cj,{logic:r,index:t,size:a.length,item:e,onChange:e=>{e?function(e,t){a[e]=t,u(a)}(t,e):function(e){a.splice(e,1),u(a)}(t)},open:o===t,onOpen:()=>function(e){s(e)}(t),onClose:()=>{s(-1)},onDrop:h,canDrag:l,storageService:c},t))),k(QB,{onClick:function(){const e=0===a.length?_j.first:_j.second;a.unshift(b(w({},AR(CR)),{color:e})),u(a),setTimeout((()=>{s(0)}),200)}})]})})})})}));const xj={width:"12px",height:"12px"};function Cj(e){const{index:t,onDrop:n,canDrag:i,size:r}=e,o=T.exports.useRef(null),s=T.exports.useRef(null),{handlerId:a,previewRef:l,dropIndex:c}=uj({dragRef:o,dropRef:s,itemType:gj.bgItem,index:t,onDrop:n,canDrag:i,size:r}),d=0===t&&0===c,u=t===r-1&&c===r;return A("div",{ref:LP([s]),className:N(NB.itemWrap,iL,sL,{[aL]:c===t||d,[lL]:u}),"data-handler-id":a,children:[k(D,{connect:l,src:HP}),k("div",{ref:o,className:NB.itemDragHandle,children:i&&k(AL,{name:"Menu",color:"#949494",style:xj})}),k(kj,w({},e))]})}function kj(e){var t;const{item:n,logic:i=!1,onChange:r,open:o=!1,onOpen:s,onClose:a,storageService:l}=e,[c,d]=T.exports.useState(0),[u,h]=T.exports.useState(pj.cover),p=u===pj.tile,{size:f="100%",imageUrl:g="",colorStops:m,orientation:_,type:v,color:y}=n,x=v===yR.color?y:"",C=x?$(x).toHex():"",E=T.exports.useRef(new Map),{t:S}=VL();function I(e,t){!function(e){d(e)}(e),function(e,t){n.colorStops[e].length=`${t}%`,r(n)}(e,t)}const O=g?{backgroundImage:XL(g)}:{},M=T.exports.useMemo((()=>n.type===yR.color?{backgroundColor:x}:n.type===yR.linear?{backgroundImage:SR(m,_)}:{backgroundImage:XL(g||zP),backgroundSize:"cover"}),[n]),N="0%"!==n.size,R=k("div",{onClick:()=>{return e=!N,n.size=e?"100%":"0%",void r(n);var e},children:k(JB,{visible:N})}),D=k(ij,{onClick:function(){r(null),a()}}),P=T.exports.useMemo((()=>n.type===yR.color?C.toUpperCase():n.type===yR.linear?S("w.background.gradient"):S("w.background.pattern")),[n,C]);return A(XB,{className:NB.bgRow,logic:i,active:o,children:[k(KB,{triggerClass:NB.bgDesc,title:S("w.background.fill"),visible:o,onVisibleChange:function(e){e?s():a()},trigger:A(be,{children:[k(tj,{style:M}),k("div",{children:P})]}),content:A("div",{className:NB.tabs,children:[k(aj,{className:NB.singleLineField,selected:n.type,options:mj.map((e=>b(w({},e),{label:S(e.label)}))),onChange:function(e){const t=e;E.current.set(n.type,AR(n)),function(e){var t;const{colorStops:i,imageUrl:r="",orientation:o,color:s}=null!=(t=E.current.get(e))?t:{};e===yR.color?n.color=null!=s?s:CR.color:e===yR.image?n.imageUrl=r:(o&&(n.orientation=o),n.colorStops=null!=i?i:bR(yj.start,yj.end))}(t),n.type=t,r(n)},radioStyle:{padding:"13px 24px"}}),k(Ej,{selected:n.type===yR.color,children:k("div",{className:NB.tabContent,children:k(FB,{color:null!=x?x:_j.first,onChange:function(e){KD(n.type===yR.color,jD.internalError),n.color=e,r(n)},autofocusInput:!0})})}),k(Ej,{selected:n.type===yR.linear,children:A("div",{className:NB.tabContent,children:[k(he,{className:NB.linearSlider,min:0,max:100,step:1,labelVisibility:"none",variant:"range",click:function(){},style:{backgroundImage:SR(m,90)},children:m.map(((e,t)=>k(WB,{slot:"handle",value:parseInt(e.length),highlight:c===t,max:"next",min:"previous",onChange:e=>I(t,e),autofocus:0===t},t)))}),k(nB,{className:NB.clearFieldItemMargin,label:S("w.background.angle"),margin:"none",children:k(cB,{value:_,suffix:"°",onChange:function(e){n.orientation=qD(e),r(n)}})}),k(U,{}),k(FB,{color:null==(t=m[c])?void 0:t.color,onChange:function(e){n.colorStops[c].color=e,r(n)}})]})}),k(Ej,{selected:n.type===yR.image,children:A("div",{className:NB.tabContent,children:[k("div",{className:NB.imageUploader,style:O,children:k(ae,{variant:"primary",className:NB.uploadHandle,click:function(){rj().then((async e=>{const t=null==e?void 0:e.item(0);KD(t,jD.badRequest);const i=await(null==l?void 0:l.put(t));KD(i,jD.badRequest),n.imageUrl=i,r(n)}))},children:S("w.background.selectImage")})}),A("div",{children:[k(nB,{label:S("w.background.fillStyle"),margin:"none",children:A(xe,{className:NB.bgSizePicker,value:u,change:function(e){const{target:t,currentTarget:i}=e,o=e.target.value;t===i&&(h(o),o===pj.tile?(n.size="100%",n.repeat="repeat",n.position=CR.position):(n.size=o,n.repeat="no-repeat",n.position="center"),r(n))},children:[k(Ce,{value:pj.cover,children:S("w.background.fillStyle.cover")}),k(Ce,{value:pj.contain,children:S("w.background.fillStyle.contain")}),k(Ce,{value:pj.tile,children:S("w.background.fillStyle.tile")})]})}),p&&k(nB,{label:S("w.background.zoom"),children:k(cB,{value:parseInt(f),suffix:"%",onChange:function(e){n.size=e,r(n)}})})]})]})})]}),fitToConfigPanel:!0}),R,D]})}function Ej({selected:e,children:t}){return e?k("div",{children:t}):null}var Sj="_container_1smuc_1",Ij="_trigger_1smuc_5";function Oj(e){const t=e,{className:n,pickerClass:i,color:r="#000000",onChange:o,autofocusInput:s,visible:a,onVisibleChange:l}=t,c=x(t,["className","pickerClass","color","onChange","autofocusInput","visible","onVisibleChange"]),d=a&&l?{visible:a,onVisibleChange:l}:{};return k("div",b(w({className:N(Sj,n)},c),{children:k(KB,w({title:"颜色",trigger:k("div",{className:Ij,style:{backgroundColor:r}}),content:k(FB,{className:i,color:r,onChange:o,autofocusInput:s}),fitToConfigPanel:!0},d))}))}var Tj,Mj,Nj={itemContainer:"_itemContainer_tatp2_1",borderPopTrigger:"_borderPopTrigger_tatp2_4",radioGroup:"_radioGroup_tatp2_7"};(Mj=Tj||(Tj={})).none="none",Mj.dotted="dotted",Mj.dashed="dashed",Mj.solid="solid",q.t("w.border.style.solid"),q.t("w.border.style.dashed");const Aj={[Tj.solid]:"w.border.style.solid",[Tj.dashed]:"w.border.style.dashed"},Rj={"border-width":"1px","border-color":"#000000","border-style":Tj.solid};var Dj=YF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=VL(),{"border-width":o="","border-style":s="","border-color":a=""}=t,l=[{label:r("w.border.style.solid"),value:Tj.solid},{label:r("w.border.style.dashed"),value:Tj.dashed}],c=o&&a,d=qD(o),u=!!a&&$(a).getAlpha()>0,[h,p]=T.exports.useState(!1),[f,g]=T.exports.useState(!1),m=Boolean((null==n?void 0:n["border-color"])||(null==n?void 0:n["border-width"]));return k("div",{className:Nj.container,children:k(nB,{label:r("w.border"),children:c?A(XB,{logic:m,className:Nj.itemContainer,active:h||f,children:[k(Oj,{color:a,onChange:e=>i({"border-color":e}),autofocusInput:!0,visible:f,onVisibleChange:g}),k(KB,{triggerClass:Nj.borderPopTrigger,title:r("w.border"),trigger:A(be,{children:[d,",",r(Aj[s])]}),content:A(T.exports.Fragment,{children:[k(nB,{label:r("w.border.style"),margin:"none",children:k(aj,{className:Nj.radioGroup,selected:s,options:l,onChange:e=>i({"border-style":e}),radioStyle:{padding:"4px 24px"}})}),k(nB,{label:r("w.border.width"),children:k(cB,{value:d,onChange:function(e){e=e.includes("px")?e:vP(e),i({"border-width":e})}})})]}),fitToConfigPanel:!0,visible:h,onVisibleChange:p}),k("div",{onClick:()=>function(e){const t=$(a);e?t.setAlpha(1):t.setAlpha(0),i({"border-color":t.toRgbString()})}(!u),children:k(JB,{visible:u})}),k(ij,{onClick:function(){i({"border-width":"","border-color":"","border-style":""})}})]}):k(QB,{onClick:function(){i(Rj)}})})})}));var Pj="_container_vaww1_1",Lj="_fieldContent_vaww1_11",Uj="_itemWrap_vaww1_17",Fj="_itemDragHandle_vaww1_23",Bj="_halfLineInput_vaww1_32",jj="_singleLineInput_vaww1_36",Vj="_row_vaww1_40",zj="_descTrigger_vaww1_43";const Kj=/,(?![^\(]*\))/,Wj=/\s(?![^(]*\))/,Hj=/^[0-9]+[a-zA-Z%]+?$/,$j=e=>{const t=e.split(Wj),n=t.includes("inset"),i=t.slice(-1)[0],r=qj(i)?void 0:i,o=t.filter((e=>"inset"!==e)).filter((e=>e!==r)),[s,a,l,c]=o;return{inset:n,offsetX:s,offsetY:a,blurRadius:l,spreadRadius:c,color:r}},qj=e=>"0"===e||Hj.test(e),Yj={offsetX:QD,offsetY:"4px",blurRadius:"4px",spreadRadius:QD,color:"rgba(0, 0, 0, 0.25)"};function Gj(e){return e.split(Kj).map((e=>e.trim())).filter(Boolean).map($j)}function Xj(e,t){const n=[];return e.forEach((e=>{const{offsetX:i,offsetY:r,blurRadius:o="",color:s}=e,a=t?"":e.spreadRadius;n.push(`${i} ${r} ${o} ${a} ${s}`)})),n.join(",")}var Jj;(Jj||(Jj={})).shadow="shadow";var Qj=YF((function(e){const{style:t,animationStyle:n,node:i,updateStyle:r}=e,[o,s]=T.exports.useState(-1),{t:a}=VL(),l=to(i),c=l?"text-shadow":"box-shadow",d=Gj(t[c]||""),u=d.length>1,h=Boolean(null==n?void 0:n[c]);function p(e){r({[c]:Xj(e,l)})}function f(e,t){const n=e.index,i=t.index;hj(d,n,i),p(d)}return k(cj,{children:k("div",{className:Pj,children:k(nB,{label:a("w.shadow"),labelStyle:{alignSelf:"start"},children:A("div",{className:Lj,children:[d.map(((e,t)=>k(Zj,{logic:h,index:t,size:d.length,item:e,onChange:e=>{e?function(e,t){d[e]=t,p(d)}(t,e):function(e){d.splice(e,1),p(d)}(t)},open:o===t,onOpen:()=>function(e){s(e)}(t),onClose:()=>{s(-1)},onDrop:f,canDrag:u,isTextElement:l},t))),k(QB,{onClick:function(){d.unshift(w({},Yj)),p(d)}})]})})})})}));function Zj(e){const{index:t,onDrop:n,canDrag:i,size:r}=e,o=T.exports.useRef(null),s=T.exports.useRef(null),{handlerId:a,previewRef:l,dropIndex:c}=uj({dragRef:o,dropRef:s,itemType:Jj.shadow,index:t,onDrop:n,canDrag:i,size:r}),d=0===t&&0===c,u=t===r-1&&c===r;return A("div",{ref:LP([s]),className:N(Uj,iL,sL,{[aL]:c===t||d,[lL]:u}),"data-handler-id":a,children:[k(D,{connect:l,src:HP}),k("div",{ref:o,className:Fj,children:i&&k(AL,{name:"Menu",color:"#949494",style:{width:12,height:12}})}),k(eV,w({},e))]})}function eV(e){const{t:t}=VL(),{item:n,logic:i=!1,onChange:r,open:o=!1,onOpen:s,onClose:a,isTextElement:l}=e,{offsetX:c,offsetY:d,blurRadius:u,spreadRadius:h,color:p}=n,[f,g]=T.exports.useState(!1);function m(e,t){n[t]=`${e}px`,r(n)}const _=T.exports.useMemo((()=>{const{a:e}=$(p).toRgb();return 0!==e}),[p]),v=k("div",{onClick:()=>function(e){const t=$(p);e?t.setAlpha(1):t.setAlpha(0),n.color=t.toRgbString(),r(n)}(!_),children:k(JB,{visible:_})}),y=k(ij,{onClick:function(){r(null),a()}}),w=T.exports.useMemo((()=>A("div",{children:[qD(c),", ",qD(d),", ",qD(u),", ",qD(h)]})),[n,v,y]);return A(XB,{className:Vj,logic:i,active:o||f,children:[k(Oj,{color:p,onChange:function(e){n.color=e,r(n)},autofocusInput:!0,visible:f,onVisibleChange:g}),k(KB,{triggerClass:zj,title:t("w.shadow"),visible:o,onVisibleChange:function(e){e?s():a()},trigger:w,content:A("div",{children:[A(nB,{label:t("w.shadow.offset"),margin:"none",children:[k(cB,{className:Bj,value:qD(c),onChange:e=>m(e,"offsetX")}),k(cB,{className:Bj,value:qD(d),onChange:e=>m(e,"offsetY"),style:{marginLeft:"6px"}})]}),k(nB,{label:t("w.shadow.blur"),children:k(cB,{className:jj,value:qD(u),onChange:e=>m(e,"blurRadius")})}),!l&&k(nB,{label:t("w.shadow.spread"),children:k(cB,{className:jj,value:qD(h),onChange:e=>m(e,"spreadRadius")})})]}),fitToConfigPanel:!0}),v,y]})}var tV="_input_1l986_1";var nV=YF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=VL(),o=parseFloat((null==t?void 0:t.opacity)||"1"),s=Math.floor(100*o),a=Boolean(null==n?void 0:n.opacity);return k(nB,{label:r("w.opacity"),children:k(cB,{logic:a,className:tV,value:s,suffix:"%",onChange:function(e){const t=(Math.min(parseInt(e),100)/100).toString();i({opacity:t})}})})}));var iV,rV,oV="_singleInput_8qhdb_1",sV="_multiInputGroup_8qhdb_4",aV="_multiInput_8qhdb_4",lV="_divider_8qhdb_16",cV="_icon_8qhdb_22";(rV=iV||(iV={}))[rV.single=0]="single",rV[rV.multi=1]="multi",rV[rV.topLeft=2]="topLeft",rV[rV.topRight=3]="topRight",rV[rV.bottomRight=4]="bottomRight",rV[rV.bottomLeft=5]="bottomLeft";const dV={0:UP,1:$P,2:FP,3:BP,4:jP,5:VP};var uV=YF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=VL(),{"border-top-left-radius":o=QD,"border-top-right-radius":s=QD,"border-bottom-right-radius":a=QD,"border-bottom-left-radius":l=QD}=t,c=Boolean((null==n?void 0:n["border-top-left-radius"])||(null==n?void 0:n["border-top-right-radius"])||(null==n?void 0:n["border-bottom-right-radius"])||(null==n?void 0:n["border-bottom-left-radius"])),[d,u]=T.exports.useState(0),h=1===[...new Set([o,s,a,l])].length;function p(e,t){i({[e]:vP(t)})}function f(){u(1)}T.exports.useEffect((()=>{u(h?0:1)}),[]);const g=k("div",{className:lV});return A(nB,{label:r("w.roundedCorner"),children:[0===d?k(be,{children:k(cB,{logic:c,className:oV,value:h?qD(o):r("w.roundedCorner.multiple"),onChange:function(e){e=vP(e),i({"border-top-left-radius":e,"border-top-right-radius":e,"border-bottom-right-radius":e,"border-bottom-left-radius":e})}})}):A("div",{className:N(sV,iL,c?cL:""),children:[k(cB,{logic:c,className:aV,value:qD(o),onFocus:()=>u(2),onChange:e=>p("border-top-left-radius",e),onBlur:f}),g,k(cB,{logic:c,className:aV,value:qD(s),onFocus:()=>u(3),onChange:e=>p("border-top-right-radius",e),onBlur:f}),g,k(cB,{logic:c,className:aV,value:qD(a),onFocus:()=>u(4),onChange:e=>p("border-bottom-right-radius",e),onBlur:f}),g,k(cB,{logic:c,className:aV,value:qD(l),onFocus:()=>u(5),onChange:e=>p("border-bottom-left-radius",e),onBlur:f})]}),k(GB,{className:cV,src:dV[d],width:32,onClick:function(){u(0===d?1:0)}})]})}));q.t("w.display"),q.t("w.display.hidden"),q.t("w.display.scroll");var hV=YF((function(e){const{style:t,node:n,nodeStyle:i,animationStyle:r,updateStyle:o}=e,{t:s}=VL(),a=Boolean(r),l=T.exports.useMemo((()=>t.display||""),[n,t]),c=T.exports.useMemo((()=>a?i:t),[n,a]),d=T.exports.useMemo((()=>{const e=null==c?void 0:c.display;return(e===ZD.none?null==c?void 0:c["--display-cache"]:e)||ZD.block}),[c]),u=T.exports.useMemo((()=>[{value:d,label:"w.display.visible"},{value:ZD.none,label:"w.display.hidden"}]),[d]),h=Boolean((null==r?void 0:r.display)&&!((null==r?void 0:r.display)===ZD.block&&!t.display));return k(nB,{label:s("w.display"),margin:"none",children:k(aj,{logic:h,selected:l,options:u.map((e=>b(w({},e),{label:s(e.label)}))),onChange:e=>{const t={display:e};a||e!==ZD.none||""===l||Reflect.set(t,"--display-cache",l),o(t)},radioStyle:{padding:"3px 23px"}})})})),pV={};var fV=YF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=VL(),o="backdrop-filter",s=T.exports.useMemo((()=>XD(t[o]||"")),[t]),a=Boolean(null==n?void 0:n[o]),l=Boolean(n);return k(nB,{label:r("w.backdropFilter.blur"),children:k(be,{children:k(cB,{logic:a,className:pV.singleInput,value:s,onChange:function(e){!e||0!==parseInt(e)||l?i({[o]:JD(e)}):i({[o]:""})}})})})})),gV={};var mV=YF((function(e){const{style:t,animationStyle:n,updateStyle:i}=e,{t:r}=VL(),o="filter",s=T.exports.useMemo((()=>XD(t.filter||"")),[t]),a=Boolean(null==n?void 0:n.filter);return k(nB,{label:r("w.filter.blur"),children:k(be,{children:k(cB,{logic:a,className:gV.singleInput,value:s,onChange:function(e){i(e?{[o]:JD(e)}:{[o]:""})}})})})}));var _V=YF((function(e){const{node:t,animationStyle:n}=e,{t:i}=VL(),r=co(t),o=no(t),s=oo(t),a=io(t),l=o||s||a,c=Boolean(n);return A("div",{children:[!c&&k(fB,{children:i("w.appearance")}),k(hV,w({},e)),k(nV,w({},e)),!l&&k(bj,w({},e)),k(Dj,w({},e)),!r&&A(be,{children:[k(Qj,w({},e)),k(uV,w({},e)),k(mV,w({},e)),k(fV,w({},e))]}),k(vB,{})]})}));var vV="_container_1xyd5_1",yV="_gap_1xyd5_3",wV="_wrapInput_1xyd5_6",bV="_halfInput_1xyd5_10",xV="_alignTypes_1xyd5_14",CV="_gapInputGroup_1xyd5_26";const kV=[{label:k(AL,{slot:"icon",name:"DirectionDown"}),value:eP.column},{label:k(AL,{slot:"icon",name:"DirectionRight"}),value:eP.row}],EV=Object.values({HorizTop:"HorizTop",HorizCenters:"HorizCenters",HorizBottom:"HorizBottom"}),SV=Object.values({VertLeft:"VertLeft",VertCenters:"VertCenters",VertRight:"VertRight"}),IV=new Array(9).fill(-1);var OV=YF((function(e){const{selection:t,style:n,node:i,updateStyle:r}=e,{"flex-wrap":o=tP.nowrap,"row-gap":s=QD,"column-gap":a=QD}=n,l=new RU,c=RU.showAutoLayout(t,i),d=RU.getContainerDirection(i.id),u=l.getContainerAlign(i.id),{t:h}=VL(),p=[{label:k("span",{children:h("w.autoLayout.wrap.wrap")}),value:tP.wrap},{label:k("span",{children:h("w.autoLayout.wrap.nowrap")}),value:tP.nowrap}];function f(e){r({"row-gap":vP(e)})}function g(e){r({"column-gap":vP(e)})}return A("div",{className:vV,children:[k(fB,{action:c?"delete":"add",variant:c?"primary":"secondary",onClick:c?function(){l.deleteAutoLayout(i.id)}:function(){l.addAutoLayout(t)},children:h("w.autoLayout")}),c&&A(be,{children:[A(nB,{label:h("w.autoLayout.direction"),contentStyle:{alignItems:"flex-start",gap:4},margin:"none",children:[k(aj,{className:wV,selected:d,options:kV,onChange:e=>{return t=e,void ID.transform((()=>{l.setContainerDirection(i.id,t)}));var t},radioStyle:{padding:"3px 8px"}}),k("div",{className:xV,style:{gridAutoFlow:d===eP.row?"column":"row"},children:IV.map(((e,t)=>{const n=((e,t)=>e===eP.row?EV[t%3]:SV[t%3])(d,t);return k(AL,{name:n,onClick:()=>{return e=t,void ID.transform((()=>{l.alignContainer(i.id,e)}));var e},color:u===t?"#000":"#E0E0E0",className:"icon"+t,style:{width:"14px",height:"14px"}},t+n)}))})]}),k(nB,{label:h("w.autoLayout.wrap"),className:yV,children:k(aj,{className:wV,selected:o,options:p,onChange:e=>{r({"flex-wrap":e})},radioStyle:{padding:"3px 11px"}})}),k(nB,{label:h("w.autoLayout.gap"),children:o===tP.wrap?A("div",{className:CV,children:[k(dB,{className:bV,value:qD(a),onChange:g,name:TL.SpacingHoriz}),k(dB,{className:bV,value:qD(s),onChange:f,name:TL.SpacingVert})]}):k(dB,{value:d===eP.row?qD(a):qD(s),onChange:d===eP.row?g:f,name:d===eP.row?TL.SpacingHoriz:TL.SpacingVert})})]}),k(vB,{})]})}));var TV="_iconList_1h8pg_1",MV="_item_1h8pg_8",NV="_itemDisabled_1h8pg_13";var AV=YF((function(e){const{selection:t}=e,n=new DF,i=t.length>1&&DF.isSameAncestor(t);function r(e){ID.transform((()=>{n.alignItems(t,e)}))}return A("div",{children:[A("div",{className:TV,children:[k(AL,{className:MV,name:"AlignLeft",onClick:()=>r(OF.left)}),k(AL,{name:"AlignHorizCenters",className:MV,onClick:()=>r(OF.horizontalCenter)}),k(AL,{className:MV,name:"AlignRight",onClick:()=>r(OF.right)}),k(AL,{className:MV,name:"AlignTop",onClick:()=>r(OF.top)}),k(AL,{className:MV,name:"AlignVertCenters",onClick:()=>r(OF.verticalCenter)}),k(AL,{className:MV,name:"AlignBottom",onClick:()=>r(OF.bottom)}),k(AL,{className:N({[MV]:!0,[NV]:!i}),name:"AlignArrangeHoriz",onClick:()=>r(OF.horizontalSpaceBetween)}),k(AL,{className:N({[MV]:!0,[NV]:!i}),name:"AlignArrangeVert",onClick:()=>r(OF.verticalSpaceBetween)})]}),k(vB,{})]})}));var RV={positionField:"_positionField_l0typ_1",positionWrap:"_positionWrap_l0typ_3",positionMid:"_positionMid_l0typ_10",positionInput:"_positionInput_l0typ_16",dockWrap:"_dockWrap_l0typ_20",dockBorder:"_dockBorder_l0typ_28",dockDirection:"_dockDirection_l0typ_38",dockTop:"_dockTop_l0typ_45",dockMid:"_dockMid_l0typ_50",dockLeft:"_dockLeft_l0typ_54",dockCenter:"_dockCenter_l0typ_57",dockRight:"_dockRight_l0typ_59",dockBottom:"_dockBottom_l0typ_63",dockPoint:"_dockPoint_l0typ_68",activeDockPoint:"_activeDockPoint_l0typ_76",centerDockPoint:"_centerDockPoint_l0typ_79",activeDockLine:"_activeDockLine_l0typ_89",activeDockLineY:"_activeDockLineY_l0typ_93",activeDockLineX:"_activeDockLineX_l0typ_98",rangeSizeTriggerDisabled:"_rangeSizeTriggerDisabled_l0typ_103",rangeSizeTrigger:"_rangeSizeTrigger_l0typ_103",rangeSizeInput:"_rangeSizeInput_l0typ_115",rangeSizeDivider:"_rangeSizeDivider_l0typ_118",sizeRatio:"_sizeRatio_l0typ_122",singleLineField:"_singleLineField_l0typ_130",halfInput:"_halfInput_l0typ_134",ratioIcon:"_ratioIcon_l0typ_138",ratioIconActive:"_ratioIconActive_l0typ_142",whInput:"_whInput_l0typ_147",sizeInput:"_sizeInput_l0typ_150",optionItem:"_optionItem_l0typ_154",picker:"_picker_l0typ_158",iconSlot:"_iconSlot_l0typ_161"};var DV,PV,LV="_container_1bh4e_1",UV="_field_1bh4e_11",FV="_picker_1bh4e_15";function BV(e){const t=T.exports.useRef(null),n=e,{value:i="",logic:r,options:o,onChange:s,children:a,style:l={},menuItemClass:c}=n,d=x(n,["value","logic","options","onChange","children","style","menuItemClass"]);return T.exports.useEffect((()=>{r&&Reflect.set(l,"--spectrum-picker-m-background-color","var(--spectrum-global-color-static-magenta-100)")}),[r]),T.exports.useEffect((()=>{t.current&&(t.current.value=i)}),[i]),A(xe,b(w({ref:t,style:l,value:i,change:s},d),{children:[o.map((e=>k(Ce,{className:c,value:e.value,disabled:e.disabled,children:e.label},e.value))),a]}))}q.t("w.unit.auto"),q.t("w.unit.fitContent"),q.t("w.unit.px"),q.t("w.unit.percentage"),q.t("w.unit.vw"),q.t("w.unit.vh"),q.t("w.unit.fillContainer"),(PV=DV||(DV={})).auto="w.unit.auto",PV.fitContent="w.unit.fitContent",PV.fillContainer="w.unit.fillContainer",PV.px="w.unit.px",PV["%"]="w.unit.percentage",PV.vw="w.unit.vw",PV.vh="w.unit.vh";const jV=[{value:uP.px,label:DV.px},{value:uP["%"],label:DV["%"]},{value:uP.vw,label:DV.vw},{value:uP.vh,label:DV.vh},{value:hP.auto,label:DV.auto},{value:hP.fitContent,label:DV.fitContent}];function VV(e){const t=e,{value:n="",units:i=yP,onChange:r,className:o,defaultValue:s,disabled:a,logic:l=!1,unitConverter:c,autofocus:d}=t,u=x(t,["value","units","onChange","className","defaultValue","disabled","logic","unitConverter","autofocus"]),h=i.length<=1||a,p=T.exports.useRef(null),{t:f}=VL(),[g,{setTrue:m,setFalse:_}]=j(!1),v=JL.isNone(n),y=JL.isAuto(n),C=JL.isFitContent(n),E=JL.getValueUnit(n),S=JL.getNumericValue(n),I=T.exports.useMemo((()=>v?"-":y?f(DV.auto):C?f(DV.fitContent):E===uP.px?S:`${S}${E}`),[v,y,E,S]),O=T.exports.useMemo((()=>v?"":y?f(DV.auto):C?f(DV.fitContent):Number.isNaN(S)?n:S),[n,S]),M=g?O:I;return A("div",b(w({className:N(LV,o)},u),{children:[k(cB,{className:UV,ref:p,logic:l,autofocus:d,focused:g,onBlur:_,onFocus:m,value:M,onChange:function(e){let t=E||uP.px;const i=JL.getValueUnit(e);if(t=null!=i?i:t,kP(e))null==r||r(e,e);else if(Number.isNaN(parseFloat(e)))null==r||r(n);else{const n=JL.fromValue(parseFloat(e),t);null==r||r(n,t)}},disabled:a}),!h&&k(BV,{className:FV,icons:"only",quiet:!0,logic:l,options:jV.filter((e=>i.includes(e.value))).map((e=>b(w({},e),{label:f(e.label)}))),onChange:function(e){var t;const n=null==(t=e.target)?void 0:t.value;if(wP.includes(n))null==r||r(n,n);else{const e=null==c?void 0:c(n),t=Number.isNaN(S)?0:S;null==r||r(null!=e?e:`${t}${n}`,n)}},disabled:a})]}))}class zV extends SF{static isItemDocked(e,t){const n=ID.getDeclaredStyle(e);return _r(n,t)}dockItem(e,t){const n={top:zV.isItemDocked(e,fr.top),right:zV.isItemDocked(e,fr.right),bottom:zV.isItemDocked(e,fr.bottom),left:zV.isItemDocked(e,fr.left)};if(t===fr.around){const e=!0;Object.assign(n,{top:e,right:e,bottom:e,left:e})}else Object.assign(n,{[t]:!0});const{view:i,model:r}=ID,o=i.getElementRectById(e),s=r.getNodeById(e),a=WV(n,o,i,!!s&&co(s));ID.updateCurrentStyle(e,a)}undockItem(e,t){const n={top:zV.isItemDocked(e,fr.top),right:zV.isItemDocked(e,fr.right),bottom:zV.isItemDocked(e,fr.bottom),left:zV.isItemDocked(e,fr.left)};if(t===fr.none){const e=!1;Object.assign(n,{top:e,right:e,bottom:e,left:e})}else Object.assign(n,{[t]:!1});const{view:i,model:r}=ID,o=i.getElementRectById(e),s=r.getNodeById(e),a=WV(n,o,i,!!s&&co(s));ID.updateCurrentStyle(e,a)}static isHorizontalDocked(e){return zV.isItemDocked(e,fr.left)&&zV.isItemDocked(e,fr.right)}static isVerticalDocked(e){return zV.isItemDocked(e,fr.top)&&zV.isItemDocked(e,fr.bottom)}}function KV(){const e={"margin-top":"","margin-right":"","margin-bottom":"","margin-left":"",top:"",right:"",bottom:"",left:""};return e}function WV(e,t,n,i){const{left:r,top:o,right:s,bottom:a}=e,{width:l,height:c}=t,{offsetTop:d,offsetRight:u,offsetBottom:h,offsetLeft:p}=function(e,t){const{logicWidth:n,logicHeight:i}=t.getViewport(),{left:r,top:o,bottom:s,right:a}=e;return{offsetTop:o,offsetBottom:i-s,offsetLeft:r,offsetRight:n-a}}(t,n),f=KV();return r&&s?(f.width="auto",f.left="0",f.right="0",f["margin-left"]=`${p}px`,f["margin-right"]=`${u}px`):s?(f.width=i?"100%":`${l}px`,f.right="0",f["margin-right"]=`${u}px`):(f.width=i?"100%":`${l}px`,f.left="0",f["margin-left"]=`${p}px`),o&&a?(f.height="auto",f.top="0",f.bottom="0",f["margin-top"]=`${d}px`,f["margin-bottom"]=`${h}px`):a?(f.height=`${c}px`,f.bottom="0",f["margin-bottom"]=`${h}px`):(f.height=`${c}px`,f.top="0",f["margin-top"]=`${d}px`),f}var HV,$V;($V=HV||(HV={})).x="x",$V.y="y",$V.xy="xy";const qV=Object.values(uP);function YV(e){var t;const n=e,{value:i="",units:r=qV,onChange:o,logic:s=!1,className:a,disabled:l,unitConverter:c,options:d,inputStyle:u={},highlight:h}=n,p=x(n,["value","units","onChange","logic","className","disabled","unitConverter","options","inputStyle","highlight"]),f=r.length<=1||l,{t:g}=VL(),m=JL.isNone(i),_=JL.isAuto(i),v=JL.isFitContent(i),y=EP(i),C=SP(i),E=y===uP.px?void 0:y,S=null==(t=d.find((e=>e.value===(null!=y?y:i))))?void 0:t.icon,I=T.exports.useMemo((()=>m?"-":_?g(DV.auto):v?g(DV.fitContent):y===uP.px?C:Number.isNaN(C)?i:C),[i]);return A("div",b(w({className:N(RV.sizeInput,a)},p),{children:[k(cB,{tabIndex:-1,className:RV.whInput,value:I,onChange:function(e){let t=null!=y?y:uP.px;const n=JL.getValueUnit(e);if(t=null!=n?n:t,kP(e))null==o||o(e,e);else if(Number.isNaN(parseFloat(e)))null==o||o(i);else{const n=JL.fromValue(parseFloat(e),t);null==o||o(n,t)}},disabled:l,suffix:E,style:u,logic:s}),k(BV,{className:RV.picker,onChange:function(e){var t;const n=null==(t=e.target)?void 0:t.value;if(n===uP.fr)null==o||o("1fr",n);else if(wP.includes(n))null==o||o(n,n);else{const e=null==c?void 0:c(n),t=Number.isNaN(C)?0:C;null==o||o(null!=e?e:`${t}${n}`,n)}},disabled:f,options:d.filter((e=>r.includes(e.value))),icons:"only",logic:s,children:S&&k(AL,{className:RV.iconSlot,slot:"label",color:f?"rgba(0,0,0,0.24)":"#1F1F1F",name:S})})]}))}function GV(e){const{t:t}=VL();return A("div",{className:N(RV.optionItem,iL),children:[k(AL,{color:"#1F1F1F",slot:"icon",name:e.iconName}),k("span",{children:t(e.label)})]})}const XV=[{value:uP.px,label:k(GV,{iconName:TL.WidthFixed,label:DV.px}),icon:TL.WidthFixed},{value:uP["%"],label:k(GV,{iconName:TL.WidthFill,label:DV["%"]}),icon:TL.WidthFill},{value:uP.vw,label:k(GV,{iconName:TL.WidthFill,label:DV.vw}),icon:TL.WidthFill},{value:uP.vh,label:k(GV,{iconName:TL.WidthFill,label:DV.vh}),icon:TL.WidthFill}],JV=[...XV,{value:uP.fr,label:k(GV,{iconName:TL.WidthFill,label:DV.fillContainer}),icon:TL.WidthFill},{value:hP.auto,label:k(GV,{iconName:TL.WidthHug,label:DV.auto}),icon:TL.WidthHug},{value:hP.fitContent,label:k(GV,{iconName:TL.WidthHug,label:DV.fitContent}),icon:TL.WidthHug}],QV=[...XV,{value:uP.fr,label:k(GV,{iconName:TL.HeightFill,label:DV.fillContainer}),icon:TL.HeightFill},{value:hP.auto,label:k(GV,{iconName:TL.HeightHug,label:DV.auto}),icon:TL.HeightHug},{value:hP.fitContent,label:k(GV,{iconName:TL.HeightHug,label:DV.fitContent}),icon:TL.HeightHug}],ZV=[{label:"w.layout.scrollSnap.none",value:TP.none},{label:"w.layout.scrollSnap.proximity",value:TP.proximity},{label:"w.layout.scrollSnap.mandatory",value:TP.mandatory}],ez=[{label:"w.layout.scrollSnap.left",value:OP.start},{label:"w.layout.scrollSnap.center",value:OP.center},{label:"w.layout.scrollSnap.right",value:OP.end}];function tz(e){var t,n;const{t:i}=VL(),{style:r,node:o}=e,{"scroll-snap-type":s=TP.none}=r,a=QL(r)===iP.scroll,l=ZV.map((e=>b(w({},e),{label:i(e.label)}))),c=ez.map((e=>b(w({},e),{label:i(e.label)}))),d=null!=(n=null==(t=ID.getSelectorStyleInCurrentVP(o.id,">","*"))?void 0:t["scroll-snap-align"])?n:OP.none,u=s!==TP.none;function h(e){const t=e.target.value;ID.transform((()=>{ID.updateCurrentStyle(o.id,{"scroll-snap-type":t}),d===OP.none&&p({"scroll-snap-align":OP.start})}))}function p(e){ID.model.updateStyle(o.id,e,ID.viewportWidth,">","*")}return a?k(nB,{label:i("w.layout.scrollSnap"),children:u?A(be,{children:[k(BV,{className:RV.halfInput,value:s,options:l,onChange:h}),k(BV,{className:RV.halfInput,value:d,options:c,onChange:function(e){const t=e.target.value;ID.transform((()=>{p({"scroll-snap-align":t})}))},style:{marginLeft:"4px"}})]}):k(BV,{className:RV.singleLineField,value:s,options:l,onChange:h})}):null}q.t("w.layout.scrollSnap"),q.t("w.layout.scrollSnap.none"),q.t("w.layout.scrollSnap.mandatory"),q.t("w.layout.scrollSnap.proximity"),q.t("w.layout.scrollSnap.left"),q.t("w.layout.scrollSnap.center"),q.t("w.layout.scrollSnap.right"),q.t("w.sizeType.flexible"),q.t("w.sizeType.static"),q.t("w.overflow.visible"),q.t("w.overflow.hidden"),q.t("w.overflow.scroll");const nz=[{value:iP.visible,label:"w.overflow.visible"},{value:iP.hidden,label:"w.overflow.hidden"},{value:iP.scroll,label:"w.overflow.scroll"}],iz={label:"垂直",value:HV.y},rz=[{label:"水平",value:HV.x},iz,{label:"水平&垂直",value:HV.xy}];q.t("w.position.default"),q.t("w.position.fixed"),q.t("w.position.sticky");const oz=[{label:"w.position.default",value:"static"},{label:"w.position.fixed",value:"fixed"},{label:"w.position.sticky",value:"sticky"}];var sz,az,lz,cz,dz,uz;function hz(e){const{style:t,updater:n,node:i}=e,r=wz(),{t:o}=VL(),{width:s=hP.auto,height:a=hP.auto}=t,l=GL(s)||DF.isHorizontalDocked(i.id),c=GL(a)||DF.isVerticalDocked(i.id),d=l&&c;function u(e){return t=>{const i={[e]:t};n.updateStyle(i)}}return k(KB,{trigger:k("div",{className:N(RV.rangeSizeTrigger,{[RV.rangeSizeTriggerDisabled]:d}),children:o("w.flexibleSize")}),content:A(be,{children:[A(nB,{label:o("w.flexibleSize.widthRange"),disabled:l,margin:"none",children:[k(bz,{className:RV.rangeSizeInput,value:t["min-width"],onChange:u("min-width"),unitConverter:r.width,disabled:l}),k("span",{className:RV.rangeSizeDivider,children:"—"}),k(bz,{className:RV.rangeSizeInput,value:t["max-width"],onChange:u("max-width"),unitConverter:r.width,disabled:l})]}),A(nB,{label:o("w.flexibleSize.heightRange"),disabled:c,children:[k(bz,{className:RV.rangeSizeInput,value:t["min-height"],onChange:u("min-height"),unitConverter:r.height,disabled:c}),k("span",{className:RV.rangeSizeDivider,children:"—"}),k(bz,{className:RV.rangeSizeInput,value:t["max-height"],onChange:u("max-height"),unitConverter:r.height,disabled:c})]})]}),disabled:d,title:o("w.flexibleSize"),fitToConfigPanel:!0})}(az=sz||(sz={})).width="子项目宽度单位调整为像素",az.height="子项目高度单位调整为像素",(cz=lz||(lz={})).width="自动排版宽度单位调整为像素",cz.height="自动排版高度单位调整为像素",(uz=dz||(dz={})).width="自动宽度单位调整为像素",uz.height="自动高度单位调整为像素";var pz,fz=YF((function(e){var t;const{style:n,node:i,updateStyle:r,addStyle:o,commitAndMerge:s}=e,a={updateStyle:r,addStyle:o,commitAndMerge:s},{width:l=hP.auto,height:c=hP.auto,"--overflow-direction":d=HV.xy,"aspect-ratio":u,top:h="0","flex-grow":p,"align-self":f}=n,{model:g}=ID,m=n.position||nP.none,_=m===nP.fixed,v=_?new zV:new DF,y=QL(n),x=co(i),{handlePositionTypeChange:C,disabled:E}=function(e){const t=e=>e===nP.fixed,{view:n,model:i}=ID,{nodes:r}=z(TD),o=r.find((e=>lo(e))),s=r.find((e=>ao(e))),a=DF.isItemDocked(e.id,fr.left),l=DF.isItemDocked(e.id,fr.right),c=DF.isItemDocked(e.id,fr.top),d=DF.isItemDocked(e.id,fr.bottom),u=r.filter((e=>co(e))).filter((e=>"root"!==e.from)).length<=1&&co(e),h=co(e),p=()=>{const e=KV();return e["grid-row-start"]="",e["grid-row-end"]="",e["grid-column-start"]="",e["grid-column-end"]="",e},f=(e,t)=>{const{logicWidth:n,logicHeight:i}=t.getViewport(),{scrollX:r,scrollY:o}=t.scrolls,{left:s,top:u,width:p,height:f}=e,g=u-o,m=i-(g+f),_=s-r,v=n-(_+p),y={},w=!h&&l,b=!h&&d;return a&&w?(y.width=hP.auto,y.left="0",y.right="0",y["margin-left"]=`${_}px`,y["margin-right"]=`${v}px`):w?(y.width=`${p}px`,y.right="0",y["margin-right"]=`${v}px`):(y.width=h?"100%":`${p}px`,y.left="0",y["margin-left"]=`${_}px`),c&&b?(y.height=hP.auto,y.top="0",y.bottom="0",y["margin-top"]=`${g}px`,y["margin-bottom"]=`${m}px`):b?(y.height=`${f}px`,y.bottom="0",y["margin-bottom"]=`${m}px`):(y.height=`${f}px`,y.top="0",y["margin-top"]=`${g}px`),y};return{handlePositionTypeChange:(r,a)=>{var l;const c=n.getViewport(),d={position:a===nP.none?"":a};if(!t(r)&&!t(a))return a===nP.sticky&&(d.top="0px"),void ID.transform((()=>{i.updateAllBpStyles(e.id,d)}));if(Object.assign(d,p()),!t(r)&&t(a)){const t=n.getElementRectById(e.id),r=f(t,n);Object.assign(d,r),ID.transform((()=>{if(h){const t=n.getComputedStyleOfId(e.id),r=t["grid-row-start"],o=t["grid-row-end"];d["--grid-row-start"]=r,d["--grid-row-end"]=o,i.removeGridNode(s.id,e.id)}i.reparentNode(e.id,o.id),i.updateAllBpStyles(e.id,d)}))}else if(t(r)&&!t(a)){let t,r=null;const o=n.getElementRectById(e.id);if(h){const n=i.getMatchedStyle(e.id),a=n.attrs["--grid-row-start"]||"1",c=n.attrs["--grid-row-end"]||"2";KD(!!a&&!!c,jD.notFound);const{orders:u}=i.getChildrenGridAreaInfo(s.id),h=u.find((e=>{const{rowStart:t}=e.gridArea;return t>=parseInt(a)}));d["--grid-row-start"]="",d["--grid-row-end"]="",d.width="100%",d.height=`${o.height}px`,r=null!=(l=null==h?void 0:h.id)?l:null,t=s}else{const{scrollX:r,scrollY:a}=n.scrolls;Object.assign(o,{left:o.left+r,right:o.right+r,top:o.top+a,bottom:o.bottom+a});let l={x:o.left,y:o.top},u=ID.getContainerNodesFromViewPos(l).filter((e=>co(e)));if(u.length<=0&&(l={x:0,y:o.top},u=ID.getContainerNodesFromViewPos(l).filter((e=>co(e)))),u.length<=0){const{orders:e}=i.getChildrenGridAreaInfo(s.id),t=o.top<0?e.shift():e.pop();u=[i.getNodeById(null==t?void 0:t.id)]}if(u.length<=0)throw new Error("404");t=u[0];const h=i.getMatchedStyle(e.id,c.logicWidth).attrs,p=n.createStyleFromHitPosition(o,t,h);h.width&&!fP(h.width)||(p.width=`${o.width}px`),h.height&&!fP(h.height)||(p.height=`${o.height}px`),Object.assign(d,p)}a===nP.sticky&&(d.top="0px"),ID.transform((()=>{i.reparentNode(e.id,t.id,r),i.updateAllBpStyles(e.id,d),h&&i.insertGridNode(s.id,r,e.id,Er.addForward)}))}},disabled:u}}(i),S=no(i)||oo(i)||io(i),I=to(i)||ho(i)||co(i),O=I&&y===iP.scroll&&!to(i),M=T.exports.useMemo((()=>{if(x)return m===nP.fixed;const e=g.getParentNodeOfId(i.id);return!!e&&!RU.isAutoLayout(e.id)}),[i.id,m]),R=m===nP.sticky,D=function(e){return!Number.isNaN(parseFloat(e))}(u),P=D?"Locked":"Unlocked",L=T.exports.useMemo((()=>{const e=[...yP];return RU.isAutoLayout(i.id)||to(i)||ro(i)?e.push(hP.fitContent):co(i)&&e.push(hP.auto),e}),[i]),U=wz(),{t:F}=VL(),B=T.exports.useMemo((()=>RU.isAutoLayoutItem(i.id)?[...L,uP.fr]:L),[L]),j=T.exports.useMemo((()=>RU.isAutoLayoutItem(i.id)?[...L,uP.fr]:L),[x,i,L]),V=T.exports.useMemo((()=>{if(RU.isAutoLayoutItem(i.id)){const e=ID.model.getParentNodeOfId(i.id),t=RU.getContainerDirection(e.id);if(t===eP.row&&RU.isItemGrowAtMainAxis(i.id))return`${p}fr`;if(t===eP.column&&RU.isItemGrowAtCounterAxis(i.id,"width"))return"1fr"}return mP(l)?hP.auto:l}),[i,l,f,p]),K=T.exports.useMemo((()=>{if(RU.isAutoLayoutItem(i.id)){const e=ID.model.getParentNodeOfId(i.id),t=RU.getContainerDirection(e.id);if(t===eP.column&&RU.isItemGrowAtMainAxis(i.id))return`${p}fr`;if(t===eP.row&&RU.isItemGrowAtCounterAxis(i.id,"height"))return"1fr"}return mP(c)?hP.auto:c}),[i,c,f,p]),W=T.exports.useMemo((()=>{var e;const t=null==(e=oz.find((e=>e.value===m)))?void 0:e.label;return F(t)}),[m]);return A("div",{className:RV.container,children:[k(fB,{children:F("w.layout")}),M&&k(be,{children:A("div",{className:RV.positionField,children:[k(JF,{children:F("w.layout.position")}),k(_?yz:vz,w({updater:a,layoutService:v},e))]})}),k(nB,{label:F("w.layout.positionType"),children:k(xe,{className:RV.singleLineField,value:m,change:e=>{C(m,e.target.value)},label:W,children:oz.map((e=>k(Ce,{value:e.value,disabled:e.value===nP.fixed&&E,children:F(e.label)},e.value)))})}),R&&k(nB,{label:F("w.layout.topOffset"),children:k(VV,{className:RV.singleLineField,value:h,onChange:function(e){e!==h&&r({top:e})},unitConverter:U.top})}),!x&&k(nB,{label:F("w.layout.width"),children:k(YV,{value:V,onChange:function(e,t){ID.transform((()=>{const n=_?zV:DF;JL.isAuto(l)&&e!==l&&n.isHorizontalDocked(i.id)&&v.undockItem(i.id,fr.right),t!==uP.fr?(RU.isWidthFillContainer(i.id)&&(console.log("取消 FR"),RU.unsetItemWidthFromFillContainer(i.id)),t===uP["%"]&&LU(i.id,"width")&&TB({message:lz.width}),e===hP.fitContent&&DU(i.id,"width")&&TB({message:sz.width}),ID.updateCurrentStyle(i.id,{width:e})):RU.setItemWidthToFillContainer(i.id,qD(e))&&TB({message:lz.width})}))},unitConverter:U.width,units:B,options:JV})}),A(nB,{label:F("w.layout.height"),contentStyle:{position:"relative"},children:[k(YV,{disabled:D,value:K,onChange:function(e,t){ID.transform((()=>{const n=_?zV:DF;if(JL.isAuto(c)&&e!==c&&n.isVerticalDocked(i.id)&&v.undockItem(i.id,fr.bottom),t!==uP.fr){if(RU.isHeightFillContainer(i.id)&&(console.log("取消 FR"),RU.unsetItemHeightFromFillContainer(i.id)),t===uP["%"]){const e=ID.model.getParentNodeOfId(i.id);e&&co(e)&&function(e,t){const n=ID.model.getParentNodeOfId(e);return!!n&&(!!fP(ID.getDeclaredStyle(n.id)[t])&&(UU(n,t),!0))}(i.id,"height")?TB({message:dz.height}):LU(i.id,"height")&&TB({message:lz.height})}var r,o;x&&e===hP.auto&&(r=i.id,o="height",ID.model.getChildrenNodesOfId(r).some((e=>!!PU(e.id,o)&&(ID.updateCurrentStyle(e.id,{[o]:kU(e.id,o,uP.px)}),!0))))&&TB({message:sz.height}),e===hP.fitContent&&DU(i.id,"height")&&TB({message:sz.height}),S&&!D?ID.updateCurrentStyle(i.id,{height:e||c}):ID.updateCurrentStyle(i.id,{height:e})}else RU.setItemHeightToFillContainer(i.id,qD(e))&&TB({message:lz.height})}))},units:j,unitConverter:U.height,options:QV}),S&&A("div",{className:N(RV.sizeRatio,iL),onClick:function(){const e={},{width:t,height:n}=ID.getComputedStyleOfId(i.id);D?(e["aspect-ratio"]="auto",e.height=n):(e["aspect-ratio"]=""+qD(t)/qD(n),e.height=hP.auto),r(e)},children:[k(GB,{src:KP,width:8}),k(AL,{className:N(RV.ratioIcon,{[RV.ratioIconActive]:D}),name:P},P),k(GB,{src:WP,width:8})]})]}),k(nB,{children:k(hz,b(w({},e),{updater:a}))}),I&&k(nB,{label:F("w.layout.overflow"),children:k(aj,{className:RV.singleLineField,selected:y,options:nz.map((e=>b(w({},e),{label:F(e.label)}))),onChange:function(e){const t={};d===HV.x?t["overflow-x"]=e:(d===HV.y||(t["overflow-x"]=e),t["overflow-y"]=e),r(t)},radioStyle:{padding:"3px 11px"}})}),O&&k(nB,{label:F("w.layout.scrollDirection"),children:k(xe,{className:RV.singleLineField,value:d,change:function(e){const t=e.target.value,n={"--overflow-direction":t};t===HV.x?(n["overflow-x"]=y,n["overflow-y"]=iP.hidden):t===HV.y?(n["overflow-x"]=iP.hidden,n["overflow-y"]=y):(n["overflow-x"]=y,n["overflow-y"]=y),r(n)},label:null==(t=rz.find((e=>e.value===d)))?void 0:t.label,children:rz.map((e=>k(Ce,{value:e.value,children:e.label},e.value)))})}),k(tz,w({},e)),k(vB,{})]})}));function gz(e){const t=e,{active:n=!1}=t,i=x(t,["active"]);return k("div",w({className:N({[RV.dockPoint]:!0,[RV.activeDockPoint]:n})},i))}function mz(e){return k("div",w({className:N({[RV.centerDockPoint]:!0})},e))}function _z(e){const{direction:t}=e;return k("div",{className:N({[RV.activeDockLine]:!0,[RV.activeDockLineX]:0===t,[RV.activeDockLineY]:1===t})})}function vz(e){const{style:t,updater:n,node:i,layoutService:r}=e,o=DF.isItemDocked(i.id,fr.left),s=DF.isItemDocked(i.id,fr.right),a=DF.isItemDocked(i.id,fr.top),l=DF.isItemDocked(i.id,fr.bottom),c=wz();function d(e){ID.transform((()=>{DF.isItemDocked(i.id,e)?r.undockItem(i.id,e):r.dockItem(i.id,e)}))}return A("div",{className:RV.positionWrap,children:[k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-top"],onChange:e=>n.updateStyle({"margin-top":e}),unitConverter:c.marginTop}),A("div",{className:RV.positionMid,children:[k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-left"],onChange:e=>n.updateStyle({"margin-left":e}),unitConverter:c.marginLeft}),A("div",{className:RV.dockWrap,children:[k("div",{className:RV.dockBorder}),A("div",{className:N(RV.dockTop,RV.dockDirection),onClick:()=>d(fr.top),children:[k(gz,{active:a}),a&&k(_z,{direction:1})]}),A("div",{className:RV.dockMid,children:[A("div",{className:N(RV.dockLeft,RV.dockDirection),onClick:()=>d(fr.left),children:[k(gz,{active:o}),o&&k(_z,{direction:0})]}),k("div",{className:N(RV.dockCenter,RV.dockDirection),onClick:function(){ID.transform((()=>{DF.isItemDocked(i.id,fr.none)?r.dockItem(i.id,fr.around):r.undockItem(i.id,fr.none)}))},children:k(mz,{})}),A("div",{className:N(RV.dockRight,RV.dockDirection),onClick:()=>d(fr.right),children:[s&&k(_z,{direction:0}),k(gz,{active:s})]})]}),A("div",{className:N(RV.dockBottom,RV.dockDirection),onClick:()=>d(fr.bottom),children:[l&&k(_z,{direction:1}),k(gz,{active:l})]})]}),k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-right"],onChange:e=>n.updateStyle({"margin-right":e}),unitConverter:c.marginRight})]}),k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-bottom"],onChange:e=>n.updateStyle({"margin-bottom":e}),unitConverter:c.marginBottom})]})}function yz(e){const{style:t,updater:n,node:i,layoutService:r}=e,o=zV.isItemDocked(i.id,fr.left),s=zV.isItemDocked(i.id,fr.right),a=zV.isItemDocked(i.id,fr.top),l=zV.isItemDocked(i.id,fr.bottom),c=wz(),d=co(i);function u(e){ID.transform((()=>{zV.isItemDocked(i.id,e)?r.undockItem(i.id,e):r.dockItem(i.id,e)}))}return A("div",{className:RV.positionWrap,children:[k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-top"],onChange:e=>n.updateStyle({"margin-top":e}),unitConverter:c.marginTop}),A("div",{className:RV.positionMid,children:[k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-left"],onChange:e=>n.updateStyle({"margin-left":e}),unitConverter:c.marginLeft,disabled:d}),A("div",{className:RV.dockWrap,children:[k("div",{className:RV.dockBorder}),A("div",{className:N(RV.dockTop,RV.dockDirection),onClick:()=>u(fr.top),children:[k(gz,{active:a}),a&&k(_z,{direction:1})]}),A("div",{className:RV.dockMid,children:[A("div",{className:N(RV.dockLeft,RV.dockDirection),onClick:()=>u(fr.left),children:[k(gz,{active:o}),o&&k(_z,{direction:0})]}),k("div",{className:N(RV.dockCenter,RV.dockDirection),onClick:function(){ID.transform((()=>{zV.isItemDocked(i.id,fr.around)?r.undockItem(i.id,fr.none):r.dockItem(i.id,fr.around)}))},children:k(mz,{})}),A("div",{className:N(RV.dockRight,RV.dockDirection),onClick:()=>u(fr.right),children:[s&&k(_z,{direction:0}),k(gz,{active:s})]})]}),A("div",{className:N(RV.dockBottom,RV.dockDirection),onClick:()=>u(fr.bottom),children:[l&&k(_z,{direction:1}),k(gz,{active:l})]})]}),k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-right"],onChange:e=>n.updateStyle({"margin-right":e}),unitConverter:c.marginRight,disabled:d})]}),k(bz,{className:RV.positionInput,value:null==t?void 0:t["margin-bottom"],onChange:e=>n.updateStyle({"margin-bottom":e}),unitConverter:c.marginBottom})]})}function wz(){return{top:EU("top"),width:EU("width"),height:EU("height"),marginTop:EU("margin-top"),marginRight:EU("margin-right"),marginBottom:EU("margin-bottom"),marginLeft:EU("margin-left")}}function bz(e){return k(VV,w({units:yP},e))}!function(e){e[e.x=0]="x",e[e.y=1]="y"}(pz||(pz={}));var xz="_container_d9pil_1",Cz="_fieldGroup_d9pil_4",kz="_mid_d9pil_10",Ez="_field_d9pil_4",Sz="_lockIcon_d9pil_19",Iz="_lockIconActive_d9pil_26",Oz="_iconActive_d9pil_30";function Tz(e){return k(VV,w({units:yP},e))}var Mz=YF((function(e){const{style:t,updateStyle:n}=e,{"padding-top":i="","padding-right":r="","padding-bottom":o="","padding-left":s=""}=t,a=[i,r,o,s].some((e=>!JL.isNone(e))),[l,c]=T.exports.useState(!0),d=l?"Locked":"Unlocked",u={paddingTop:EU("padding-top"),paddingRight:EU("padding-right"),paddingBottom:EU("padding-bottom"),paddingLeft:EU("padding-left")},{t:h}=VL();function p(e){n({"padding-top":e,"padding-right":e,"padding-bottom":e,"padding-left":e})}function f(e,t){l?p(e):n({[t]:e})}return A("div",a?{className:xz,children:[k(fB,{action:"delete",onClick:function(){p("")},children:h("w.padding")}),A("div",{className:Cz,children:[k(Tz,{className:Ez,value:i,onChange:e=>f(e,"padding-top"),unitConverter:u.paddingTop}),A("div",{className:kz,children:[k(Tz,{className:Ez,value:s,onChange:e=>f(e,"padding-left"),unitConverter:u.paddingLeft}),k("div",{className:N(Sz,iL,{[Iz]:l}),onClick:()=>c(!l),children:k(AL,{className:N({[Oz]:l}),name:d},d)}),k(Tz,{className:Ez,value:r,onChange:e=>f(e,"padding-right"),unitConverter:u.paddingRight})]}),k(Tz,{className:Ez,value:o,onChange:e=>f(e,"padding-bottom"),unitConverter:u.paddingBottom})]}),k(vB,{})]}:{className:xz,children:[k(fB,{variant:"secondary",action:"add",onClick:function(){p(vP(16))},children:h("w.padding")}),k(vB,{})]})}));var Nz,Az,Rz,Dz,Pz,Lz,Uz,Fz,Bz="_container_smv5h_1",jz="_colorWrap_smv5h_3",Vz="_fontWeightPicker_smv5h_12",zz="_fullInput_smv5h_15",Kz="_spaceInput_smv5h_18",Wz="_radioGroup_smv5h_26",Hz="_textDecorationIconActive_smv5h_34",$z="_moreOption_smv5h_37";(Az=Nz||(Nz={})).left="left",Az.right="right",Az.center="center",Az.justify="justify",(Dz=Rz||(Rz={})).top="flex-start",Dz.middle="center",Dz.bottom="flex-end",(Lz=Pz||(Pz={})).bold="bold",Lz.italic="italic",Lz.underline="underline",Lz.lineThrough="line-through",Lz.none="none",(Fz=Uz||(Uz={})).decimal="decimal",Fz.disc="disc",Fz.none="none";const qz={thin:"100",light:"300",regular:"400",medium:"500",bold:"700"};class Yz{constructor(e){C(this,"updater"),this.updater=e}setFontFamily(e){this.updater.updateStyle({"font-family":e})}setFontWeight(e){this.updater.updateStyle({"font-weight":e})}setFontColor(e){this.updater.updateStyle({color:e})}setFontSize(e){this.updater.updateStyle({"font-size":e})}isDynamicFontSize(e){return Boolean(e["--font-size-min"]&&e["--font-size-max"])}setDynamicFontSize(e,t){const n=parseInt(e),i=(({minSize:e,maxSize:t,maxWidth:n})=>{const i="calc( var(--font-size-min) * 1px )";return{"--font-size-min":`${e}`,"--font-size-max":`${t}`,"--font-size-max-width":`${n}`,"font-size":`clamp(${i},calc( calc( var(--font-size-max) - var(--font-size-min) ) * calc( (100vw - calc( var(--font-size-min-width) * 1px )) / calc( var(--font-size-max-width) - var(--font-size-min-width) ) ) + ${i} ),calc( var(--font-size-max) * 1px ))`}})({minSize:n,maxSize:n,maxWidth:t});this.updater.updateStyle(i)}unsetDynamicFontSize(e){const t=b(w({},yU),{"font-size":vP(e)});this.updater.updateStyle(t)}updateDynamicFontSize(e,t){const[n,i]=e.map((e=>parseInt(e))),r=Math.max(n,i),o=Math.min(n,i);this.updater.updateStyle({"--font-size-max":`${r}`,"--font-size-min":`${o}`,"--font-size-max-width":`${t}`})}setInlineAlign(e){this.updater.updateStyle({"text-align":e})}setBlockAlign(e){let t="";switch(e){case Rz.bottom:t="flex-end";break;case Rz.middle:t="center";break;case Rz.top:t="flex-start";break;default:Sn()}this.updater.updateStyle({"justify-content":t,"align-items":"center",display:"flex","flex-direction":"column"})}setLineHeight(e){this.updater.updateStyle({"line-height":e})}setLetterSpacing(e){this.updater.updateStyle({"letter-spacing":e})}getTextDecorationOverride(e,t){const n={},i=this.isTextDecorationActive(e,t);return t===Pz.bold?n["font-weight"]=i?qz.regular:qz.bold:t===Pz.italic?n["font-style"]=i?MP.fontStyle:t:t===Pz.underline||t===Pz.lineThrough?n["text-decoration-line"]=i?MP.textDecorationLine:t:console.error(jD.badRequest),n}toggleTextDecoration(e,t){const n=this.getTextDecorationOverride(e,t);this.updater.updateStyle(n)}isTextDecorationActive(e,t){const{"font-weight":n,"font-style":i,"text-decoration-line":r}=e;return t===Pz.bold?n===qz.bold:t===Pz.italic?i===Pz.italic:t===Pz.underline?r===Pz.underline:t===Pz.lineThrough?r===Pz.lineThrough:void console.error(jD.badRequest)}setListType(e){Sn()}getListType(){Sn()}}var Gz="_option_1c1l9_1";function Xz(e){const t=e,{children:n,disabled:i,title:r}=t,o=x(t,["children","disabled","title"]);return k(KB,w({trigger:k(ke,{quiet:!0,className:Gz,disabled:i,children:k(AL,{slot:"icon",name:"MoreHoriz"})}),content:n,disabled:i,title:r,fitToConfigPanel:!0},o))}var Jz="_group_eqwbn_1",Qz="_groupOptionDivider_eqwbn_3";const Zz={indicatorSeparator:(e,t)=>b(w({},e),{display:"none"}),dropdownIndicator:(e,t)=>b(w({},e),{color:"#1F1F1F"}),groupHeading:(e,t)=>b(w({},e),{fontWeight:600,fontSize:"12px",color:"#C2C2C2",paddingBottom:"4px"}),menuList:(e,t)=>b(w({},e),{padding:"8px"}),container:(e,t)=>b(w({},e),{height:"32px",minHeight:"32px"}),control:(e,t)=>b(w({},e),{height:"32px",minHeight:"32px",alignContent:"center",borderWidth:"0px",background:"#F5F5F5",borderRadius:"6px"}),menu:(e,t)=>b(w({},e),{borderRadius:"12px",boxShadow:"0px 0px 1px rgba(0, 0, 0, 0.16), 0px 6px 32px 4px rgba(0, 0, 0, 0.08)",zIndex:10}),option:(e,t)=>b(w({},e),{backgroundColor:t.isFocused||t.isSelected?"var(--spectrum-global-color-gray-300)":e.backgroundColor,borderRadius:"6px",overflow:"hidden"})},eK=e=>{const{children:t,isSelected:n,innerRef:i,innerProps:r}=e,o=e.getStyles("option",e);return A("div",b(w({ref:i},r),{style:b(w({},o),{display:"flex",justifyContent:"space-between"}),children:[k("div",{children:t}),n&&k(AL,{name:"Done",color:"var(--spectrum-global-color-gray-900)"})]}))},tK=e=>A("div",{className:Jz,children:[k(Se.Group,w({},e)),k(U,{className:Qz})]});function nK(e){const t=e,{className:n,components:i}=t,r=x(t,["className","components"]);return k(Ee,w({placeholder:"",className:N(n),styles:Zz,theme:e=>b(w({},e),{colors:w({},e.colors)}),components:w({Option:eK,Group:tK},i)},r))}const iK=Ie.create({name:"doc",topNode:!0,content:"block+"}),rK=Ie.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",addAttributes:()=>({}),parseHTML:()=>[{tag:"p",getAttrs:e=>({})}],renderHTML({node:e,HTMLAttributes:t}){return["p",w({},Oe(this.options.HTMLAttributes,t)),0]}}),oK=Ie.create({name:"text",group:"inline"});function sK(e){return{default:null,parseHTML:t=>{var n;return null==(n=t.style.getPropertyValue(e))?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>{const n=t[e];return n?{style:`${e}: ${n}`}:{}},keepOnSplit:!0}}const aK=Te.create({name:"textStyleImpl",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{color:sK("color"),"font-size":sK("font-size"),"font-family":sK("font-family"),"font-weight":sK("font-weight"),"font-style":sK("font-style"),"text-decoration-line":sK("text-decoration-line"),"line-height":sK("line-height"),"letter-spacing":sK("letter-spacing")}}],addCommands:()=>({setStyle:e=>({chain:t,commands:n})=>{const{"text-align":i}=e;return Ht(i)?i?n.setTextAlign(i):n.unsetTextAlign():t().setMark("textStyle",e).removeEmptyTextStyle().run()}})}),lK=[1,2,3,4,5,6],cK=Ie.create({name:"heading",content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML:()=>lK.map((e=>({tag:`h${e}`,attrs:{level:e}}))),renderHTML({node:e,HTMLAttributes:t}){return[`h${lK.includes(e.attrs.level)?e.attrs.level:lK[0]}`,Oe(this.options.HTMLAttributes,t),0]},addInputRules(){return lK.map((e=>Me({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}}),dK=Ie.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",Oe(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:i})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:r}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=i.extensionManager,a=r||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&o){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.setHardBreak()}}}),uK=new DOMParser;var hK,pK;(pK=hK||(hK={})).orderedList="orderedList",pK.bulletList="bulletList";class fK extends Yz{constructor(e,t){super(e),C(this,"node"),C(this,"_stashOnUpdate"),this.node=t}static get isTextRangeSelected(){const e=ID.richTextEditor;if(!e)return!1;const{from:t,to:n}=e.state.selection;return e.getCharacterCount()!==n-t}static get isAllTextSelected(){return!this.isTextRangeSelected}setRangeTextStyle(e){const t=ID.richTextEditor;return null==t?void 0:t.chain().focus().setStyle(e).run()}stashTextEditorUpdate(e){e&&(this._stashOnUpdate=e.options.onUpdate,e.off("update",this._stashOnUpdate))}popTextEditorUpdate(e){e&&e.on("update",this._stashOnUpdate)}createOffscreenRichTextEditor(){const e=function(e){const t=document.createElement(e);return t.style.position="fixed",t.style.top="-100000px",t.style.left="-100000px",t}("div");document.body.append(e);const t=ID.view.getElementById(this.node.id);WD(t);const n=function(e,t,n,i=hD){const r=new Ne({element:e,extensions:[Ae,dK,iK,rK,cK,oK,Re,aK,De.configure({types:["paragraph"],alignments:["left","center","right","justify"],defaultAlignment:""}),Pe.configure({itemTypeName:"listItem",HTMLAttributes:{}}),Le.configure({itemTypeName:"listItem",HTMLAttributes:{}}),Ue],content:t.innerHTML,onUpdate({editor:e}){const t=uK.parseFromString(e.getHTML(),"text/html");Array.from(t.body.children).forEach((e=>{var n;if(0===e.childNodes.length&&(e.innerHTML="&#8203;"),"BR"===(null==(n=e.lastElementChild)?void 0:n.tagName)){const n=t.createElement("br");n.className="trailingBreak",e.appendChild(n)}})),n(t.body.innerHTML)},onDestroy:i}),o=t.className.split(/\s/i);return r.view.dom.classList.add(...o),r}(e,t,hD);return n.commands.selectAll(),n}removeAllTextStyle(e){var t;const n=this.createOffscreenRichTextEditor();n.chain().focus().setStyle(e).run();const i=n.getHTML();return null==(t=n.view.dom.parentElement)||t.remove(),n.destroy(),i}updateNodeContent(e){this.stashTextEditorUpdate(ID.richTextEditor),ID.model.updateNodeById(this.node.id,{content:e}),this.popTextEditorUpdate(ID.richTextEditor)}removeContentStyle(e){const t=this.removeAllTextStyle(e);this.updateNodeContent(t)}setFontFamily(e){fK.isAllTextSelected?ID.transform((()=>{super.setFontFamily(e),this.removeContentStyle({"font-family":""})})):this.setRangeTextStyle({"font-family":e})}setFontWeight(e){fK.isAllTextSelected?ID.transform((()=>{super.setFontWeight(e),this.removeContentStyle({"font-weight":""})})):this.setRangeTextStyle({"font-weight":e})}setFontColor(e){fK.isAllTextSelected?ID.transform((()=>{super.setFontColor(e),this.removeContentStyle({color:""})})):this.setRangeTextStyle({color:e})}setFontSize(e){fK.isAllTextSelected?ID.transform((()=>{super.setFontSize(e),this.removeContentStyle({"font-size":""})})):this.setRangeTextStyle({"font-size":e})}isDynamicFontSize(e){return Boolean(e["--font-size-min"]&&e["--font-size-max"])}setDynamicFontSize(e,t){fK.isAllTextSelected&&ID.transform((()=>{super.setDynamicFontSize(e,t),this.removeContentStyle({"font-size":""})}))}unsetDynamicFontSize(e){fK.isAllTextSelected&&ID.transform((()=>{super.unsetDynamicFontSize(e),this.removeContentStyle({"font-size":""})}))}updateDynamicFontSize(e,t){fK.isAllTextSelected&&ID.transform((()=>{super.updateDynamicFontSize(e,t)}))}setInlineAlign(e){fK.isAllTextSelected?ID.transform((()=>{super.setInlineAlign(e),this.removeContentStyle({"text-align":""})})):this.setRangeTextStyle({"text-align":e})}setBlockAlign(e){fK.isAllTextSelected&&ID.transform((()=>{super.setBlockAlign(e)}))}setLineHeight(e){fK.isAllTextSelected?ID.transform((()=>{super.setLineHeight(e),this.removeContentStyle({"line-height":""})})):this.setRangeTextStyle({"line-height":e})}setLetterSpacing(e){fK.isAllTextSelected?ID.transform((()=>{super.setLetterSpacing(e),this.removeContentStyle({"letter-spacing":""})})):this.setRangeTextStyle({"letter-spacing":e})}toggleTextDecoration(e,t){const n=super.getTextDecorationOverride(e,t);fK.isAllTextSelected?ID.transform((()=>{super.toggleTextDecoration(e,t);const i=function(e,t){e=AR(e);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=t);return e}(n,"");this.removeContentStyle(i)})):this.setRangeTextStyle(n)}doSetListType(e){var t;const n=null!=(t=ID.richTextEditor)?t:this.createOffscreenRichTextEditor(),i=()=>n.chain().focus().toggleOrderedList().run(),r=()=>n.chain().focus().toggleBulletList().run();switch(e){case Uz.decimal:i();break;case Uz.disc:r();break;case Uz.none:n.isActive(hK.bulletList)?r():i();break;default:Sn()}return n.getHTML()}getListType(){const e=ID.richTextEditor;return e?e.isActive(hK.bulletList)?Uz.disc:e.isActive(hK.orderedList)?Uz.decimal:Uz.none:Uz.none}setListType(e){if(ID.richTextEditor)this.doSetListType(e);else{const t=this.doSetListType(e);this.updateNodeContent(t)}}}function gK(){const[e,t]=we(!1);return G(ID.onEditorCreated.type,(()=>{t(!0)}),{target:window}),e}var mK="_fontSizeInput_bl81w_1",_K="_fontSizeInputDynamic_bl81w_5",vK="_bar_bl81w_9",yK="_toggleBtn_bl81w_13";const wK={b1:1e3,b2:750,default:1920};function bK(e){const{style:t,animationStyle:n,styleChangedMap:i,textService:r}=e,o=z(UD),s=z(AD),{model:a}=ID,l=T.exports.useMemo((()=>{const{styles:e}=a.getValue(),n=e.find((e=>e.targetId===(null==o?void 0:o.id)&&(null==e?void 0:e.breakpointId)===(null==s?void 0:s.id)));return(null==n?void 0:n["font-size"])?n:t}),[o,s,t]),c=T.exports.useMemo((()=>r.isDynamicFontSize(l)),[l,t]),{"font-size":d,"--font-size-max":u=d,"--font-size-min":h=d}=l,{t:p}=VL(),f=Fe((e=>{if(c){const t=s?wK[s.id]:wK.default;r.updateDynamicFontSize(e,t)}else r.setFontSize(e)})),g=Fe((()=>{if(c)r.unsetDynamicFontSize(u);else{const e=s?wK[s.id]:wK.default;r.setDynamicFontSize(d,e)}})),m=Boolean(n);return A(nB,{label:p("w.text.fontSize"),children:[c?A(T.exports.Fragment,{children:[k(VV,{logic:i["--font-size-min"],className:_K,value:vP(h),onChange:e=>{f([e,u])},units:[uP.px]}),k("i",{className:vK,children:"-"}),k(VV,{logic:i["--font-size-max"],className:_K,value:vP(u),onChange:e=>{f([h,e])},units:[uP.px]})]}):k(VV,{logic:i["font-size"],className:mK,value:d,onChange:f,units:[uP.px]}),k(ke,{className:yK,disabled:m,selected:c,onClick:g,children:k(AL,{name:"TextScale"})})]})}function xK(e){const{show:t,children:n}=e;return t?k(T.exports.Fragment,{children:n}):null}const CK=[vU].map((e=>({label:e.name,value:e.value,locales:e.locales}))),kK=Object.keys(qz).map((e=>({value:qz[e],label:e}))),EK=[{value:Nz.left,label:k(AL,{name:"FormatLeft"})},{value:Nz.center,label:k(AL,{name:"FormatCenter"})},{value:Nz.right,label:k(AL,{name:"FormatRight"})},{value:Nz.justify,label:k(AL,{name:"FormatJustified"})}],SK=[{value:Rz.top,label:k(AL,{name:"FormatAlignTop"})},{value:Rz.middle,label:k(AL,{name:"FormatAlignMedium"})},{value:Rz.bottom,label:k(AL,{name:"FormatAlignBottom"})}],IK=[{value:Pz.bold,iconName:"TextBold"},{value:Pz.italic,iconName:"TextItaly"},{value:Pz.underline,iconName:"TextUnderline"},{value:Pz.lineThrough,iconName:"TextDeleteline"}],OK=[{value:Uz.none,label:k("div",{children:"-"})},{value:Uz.disc,label:k(AL,{name:"FormatListBulleted"})},{value:Uz.decimal,label:k(AL,{name:"FormatListNumbered"})}],TK=(e,t)=>e.label.toLowerCase().includes(t.toLowerCase()),MK={marginLeft:"4px"};var NK=YF((function(e){const{node:t,animationStyle:n,updateStyle:i,addStyle:r}=e,o={addStyle:r,updateStyle:i},{t:s}=VL(),a=Boolean(n),l=function(e){const{style:t,node:n}=e,[i,r]=T.exports.useState({}),o=ID.richTextEditor,s=function(){const[e,t]=T.exports.useState(!1),n=gK();return T.exports.useEffect((()=>{ID.editor.onTextEditorCreated((()=>{t(!!ID.richTextEditor)}))}),[n]),e}(),a=Fe((()=>{if(!o)return;const e=o.getAttributes("textStyle"),t=function(e){e=AR(e);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];delete e[t],e[JR(t)]=n}return e}(o.getAttributes("paragraph"));r(DK(t,e))}));return T.exports.useEffect((()=>{if(o)return a(),o.on("update",a),o.on("selectionUpdate",a),()=>{o.off("update",a),o.off("selectionUpdate",a)}}),[s,o]),n&&t?DK(w({},t),i):{}}(e),{"font-family":c="","line-height":d="1.2","font-weight":u=qz.regular,"letter-spacing":h="0em","text-align":p=Nz.left,"justify-content":f=Rz.top,color:g="#000000"}=l,m=function(){const e=function(){const e=ZL(oF),{data:t=[]}=Y((()=>(null==e?void 0:e.getFonts({freeOfCharge:!0}))||Promise.resolve([])),{cacheKey:"editor-fonts",refreshDeps:[e]});return t}();return T.exports.useMemo((()=>{const t=e.map((e=>({label:e.title,value:e.family,preview:e.preview,locales:e.locales})));return[...CK,...t]}),[e])}(),[_,v]=Be("__iliad_fontUsageCacheKey",{defaultValue:{}}),y=function(e,t){const{fontfaces:n=[]}=z(TD),i=n.map((e=>e.family)),r=e.filter((e=>i.includes(e.value))).filter((e=>t[e.value])).sort(((e,n)=>t[n.value]-t[e.value])),o=e.filter((e=>!r.includes(e))),s=o.filter((e=>e.locales.includes("zh"))).sort(((e,t)=>e.value===vU.value?-1:t.value===vU.value?1:RK(e,t))),a=o.filter((e=>!s.includes(e))).sort(RK),{t:l}=VL();return T.exports.useMemo((()=>r.length?[{label:l("w.text.currentWork"),options:r},{label:l("w.text.zh"),options:s},{label:l("w.text.en"),options:a}]:[...s,...a]),[r,s,a,l])}(m,_),x=e=>Boolean(n&&n[e]),C={"--font-size-min":x("--font-size-min"),"--font-size-max":x("--font-size-max"),"font-size":x("font-size"),"font-family":x("font-family"),"line-height":x("line-height"),"font-weight":x("font-weight"),"letter-spacing":x("letter-spacing"),"text-align":x("text-align"),color:x("color"),"justify-content":x("justify-content")},E=a?new Yz(o):new fK(b(w({},o),{updateStyle:e=>{ID.updateCurrentStyle(t.id,e)}}),t),S=eo(t)&&!a,I=T.exports.useMemo((()=>m.find((e=>e.value===c))),[m,c]);return A("div",{className:N(Bz,"textEditorExitWhitelist"),children:[!a&&k(fB,{children:s("w.text")}),k(nB,{empty:a,label:s("w.text.fontFamily"),margin:"none",children:k(nK,{className:zz,value:I,onChange:function(e){var t;const n=null!=(t=null==e?void 0:e.value)?t:vU.value;E.setFontFamily(n),v(b(w({},_),{[n]:Date.now()}))},options:y,components:{Option:PK},filterOption:TK})}),A(nB,{label:s("w.text.fontWeight"),children:[k(BV,{logic:C["font-weight"],className:Vz,value:u,onChange:function(e){E.setFontWeight(e.target.value)},options:kK,menuItemClass:"textEditorExitWhitelist"}),k("div",{className:N(jz,C.color?cL:""),children:k(Oj,{color:g,onChange:e=>E.setFontColor(e),autofocusInput:!0,pickerClass:"textEditorExitWhitelist"})})]}),k(xK,{show:!a,children:k(bK,b(w({},e),{textService:E,styleChangedMap:C}))}),k(nB,{empty:a,label:s("w.text.textAlign"),children:k(aj,{logic:C["text-align"],selected:p,options:EK,onChange:function(e){E.setInlineAlign(e)},radioStyle:{padding:"3px 9.5px"}})}),k(nB,{empty:a,label:"",children:k(aj,{logic:C["justify-content"],selected:f,options:SK,onChange:function(e){E.setBlockAlign(e)},radioStyle:{padding:"3px 15.5px"}})}),A(nB,{label:s("w.text.lineHeight"),children:[k(dB,{logic:C["line-height"],className:Kz,value:HD($D(d)),onChange:function(e){E.setLineHeight((qD(e)/100).toString())},name:"FormatPacingLines"}),k(dB,{className:Kz,logic:C["letter-spacing"],style:MK,value:HD($D(h)),onChange:function(e){E.setLetterSpacing(qD(e)/100+"em")},name:"FormatSpacingLetter"})]}),k(nB,{empty:a,label:s("w.text.textDecoration"),children:k("div",{className:Wz,children:IK.map((e=>k(AL,{name:e.iconName,onClick:()=>{return t=e.value,void E.toggleTextDecoration(l,t);var t},className:N({[Hz]:E.isTextDecorationActive(l,e.value)})},e.value)))})}),S&&k(AK,b(w({},e),{textService:E})),k(vB,{})]})}));function AK(e){const{t:t}=VL(),{textService:n}=e;return k("div",{className:$z,children:k(Xz,{title:t("w.text.more"),panelClass:"textEditorExitWhitelist",children:k(nB,{label:t("w.text.list"),children:k(aj,{selected:n.getListType(),options:OK,onChange:e=>function(e){n.setListType(e)}(e)})})})})}function RK(e,t){return e.value.charCodeAt(0)-t.value.charCodeAt(0)}function DK(e,...t){return t.forEach((t=>{for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i&&(e[n]=i)}})),e}function PK(e){const{children:t,isSelected:n,innerProps:i,data:r}=e,o=e.getStyles("option",e);return A("div",b(w({},i),{style:b(w({},o),{display:"flex",justifyContent:"space-between"}),children:[r.preview?k(GB,{src:r.preview,height:"16px",loading:"lazy"}):k("div",{style:{color:"black"},children:t}),n&&k(AL,{name:"Done",color:"var(--spectrum-global-color-gray-900)"})]}))}q.t("w.text.currentWork"),q.t("w.text.zh"),q.t("w.text.en");var LK="_container_1hm2m_1",UK="_field_1hm2m_4";function FK(){const e=z(UD),{addStyle:t,commitAndMerge:n}=function(){const e=T.exports.useRef({}),t=z(UD);function n(n){KD(t&&n,jD.badRequest),ID.model.updateMode===Kr.None&&(console.log("fork"),ID.fork(),e.current={}),Object.assign(e.current,n),ID.add((()=>{ID.updateCurrentStyle(t.id,e.current)}))}return{commitAndMerge:()=>{var t;KD((null==(t=ID.model)?void 0:t.updateMode)===Kr.Add),console.log("commitAndMerge",e.current),ID.commitAndMerge(),e.current={}},addStyle:n}}();return{updateStyle:t=>{KD(e&&t,jD.badRequest),ID.transform((()=>{console.log("updateStyle",t),ID.updateCurrentStyle(e.id,t)}))},addStyle:t,commitAndMerge:n}}function BK(){const e=z(UD),t=z(RD),n=FK();T.exports.useEffect((()=>()=>{ID.model.updateMode===Kr.Add&&n.commitAndMerge()}),[t]),WD(e);const i=1===t.length,r=t.length>1&&DF.isSameAncestor(t)||i&&ho(e)&&!co(e),o=to(e)&&i,s=T.exports.useMemo((()=>{const t=ID.model.getParentNodeOfId(e.id);return!!t&&!RU.isAutoLayout(t.id)}),[e.id]),a=(co(e)||ho(e))&&i;return A("div",{className:LK,children:[s&&k(AV,w({},n)),k("div",{className:UK,children:i&&k(fz,w({},n))}),k("div",{className:UK,children:o&&k(NK,w({},n))}),k("div",{className:UK,children:r&&k(OV,w({},n))}),k("div",{className:UK,children:i&&k(_V,w({},n))}),k("div",{className:UK,children:a&&k(Mz,w({},n))}),k("div",{className:UK,children:i&&k(MB,w({},n))})]})}var jK="_container_1vktp_1";function VK(){const{t:e}=VL(),t=FK();return T.exports.useEffect((()=>()=>{ID.model.updateMode===Kr.Add&&t.commitAndMerge()}),[]),A("div",{className:jK,children:[k(fB,{style:{paddingBottom:0},children:e("w.page")}),k(vB,{}),k(bj,w({},t)),k(vB,{}),k(Mz,w({},t))]})}var zK="_container_g370z_1",KK="_attributeItem_g370z_6",WK="_attributeItemText_g370z_12",HK="_attributeIcon_g370z_22",$K="_popContent_g370z_30",qK="_attributeButtons_g370z_36",YK="_attributeButton_g370z_36",GK="_attrNameInput_g370z_48",XK="_attributeEditError_g370z_53";var JK="_container_1e53t_1",QK="_input_1e53t_5",ZK="_item_1e53t_9",eW="_itemContent_1e53t_18",tW="_itemContentActive_1e53t_30",nW="_triggerName_1e53t_33",iW="_actionName_1e53t_36",rW="_editIcon_1e53t_40",oW="_editIconActive_1e53t_46",sW="_delIcon_1e53t_49",aW="_popContent_1e53t_53";function lW(){return!0}function cW(e){const t=T.exports.useRef(null),n=e,{value:i,onChange:r,className:o,checkValidity:s=lW}=n,a=x(n,["value","onChange","className","checkValidity"]),[l,c]=T.exports.useState(!0);function d(e){c(s(e.target.value))}return G("input",d,{target:t}),T.exports.useEffect((()=>{c(s(i))}),[i]),k(H,w({ref:t,className:N(o),value:i,change:e=>null==r?void 0:r(e.target.value),onInput:d,invalid:!l,multiline:!0},a))}q.t("w.interaction.event"),q.t("w.interaction.add"),q.t("w.interaction.trigger"),q.t("w.interaction.eventType"),q.t("w.interaction.value"),q.t("w.interaction.click"),q.t("w.interaction.mouseover"),q.t("w.interaction.mouseenter"),q.t("w.interaction.mouseleave"),q.t("w.interaction.mouseup"),q.t("w.interaction.mousedown");const dW="w.interaction.event",uW="w.interaction.add",hW="w.interaction.trigger",pW="w.interaction.eventType",fW="w.interaction.value",gW=[{label:"w.interaction.click",value:"click"},{label:"w.interaction.mouseenter",value:"mouseenter"},{label:"w.interaction.mouseleave",value:"mouseleave"},{label:"w.interaction.mouseup",value:"mouseup"},{label:"w.interaction.mousedown",value:"mousedown"}];var mW=YF((function(e){var t;const{t:n}=VL(),{node:i}=e,r=function(){const e=z(UD),{interactions:t=[],triggers:n}=z(TD);if(!e)return[];const i=n.filter((t=>t.targetId===e.id)).map((e=>e.id));return t.filter((e=>i.includes(e.triggerId)))}(),[o,s]=T.exports.useState(null),[a,l]=T.exports.useState(null),[c,d]=T.exports.useState(!1),u=T.exports.useMemo((()=>({current:document.getElementById(""+("interaction-item-"+(null==a?void 0:a.id)))})),[a]);function h(e){ID.transform((()=>{ID.model.removeInteraction(e)})),f()}function p(e){setTimeout((()=>{l(e);const{triggers:t}=ID.model.getValue(),n=t.find((t=>t.id===e.triggerId));KD(n),s(n),d(!0)}),200)}function f(){s(null),l(null),d(!1)}return A("section",{className:JK,children:[k(fB,{variant:r.length?"primary":"secondary",action:"add",onClick:function(){ID.transform((()=>{p(ID.model.addInteraction(Xn.click,"",{},i.id))}))},children:n(dW)}),r.map((e=>k(_W,{interaction:e,onEdit:p,onDelete:h,active:!(!a||a.id!==e.id)},e.id))),k(KB,{title:n(uW),trigger:null,visible:c,onVisibleChange:function(e){d(e),!1===e&&(KD(o),KD(a),ID.transform((()=>{ID.model.updateInteraction(a.id,a),ID.model.updateTrigger(o.id,o)})),f())},content:A("div",{className:aW,children:[k(nB,{label:n(hW),margin:"none",children:k(BV,{className:QK,value:null==o?void 0:o.type,onChange:function(e){const t=e.target.value;KD(o),s(b(w({},o),{type:t}))},options:gW.map((e=>b(w({},e),{label:n(e.label)})))})}),k(nB,{label:n(pW),children:k(cB,{className:QK,value:null==a?void 0:a.eventType,onChange:function(e){KD(a),l(b(w({},a),{eventType:e}))}})}),k(nB,{label:n(fW),children:k(cW,{className:QK,value:JSON.stringify(null!=(t=null==a?void 0:a.detail)?t:{}),onChange:function(e){try{KD(a);const t=JSON.parse(e);KD(qt(t)),l(b(w({},a),{detail:t}))}catch(f8){console.error(f8)}},checkValidity:Xt})})]}),triggerRef:u,fitToConfigPanel:!0}),k(vB,{})]})}));function _W(e){var t,n,i;const{onEdit:r,interaction:o,onDelete:s,active:a}=e,{triggers:l}=z(TD),c=l.find((e=>e.id===o.triggerId)),{t:d}=VL(),u=null!=(i=d(null!=(n=null==(t=gW.find((e=>e.value===(null==c?void 0:c.type))))?void 0:t.label)?n:""))?i:null==c?void 0:c.type,h=!!o.eventType,p=h?"#FFFFFF":"#949494";return A("div",{id:"interaction-item-"+o.id,className:N(iL,ZK),children:[A("div",{className:N(eW,{[tW]:a}),onClick:()=>r(o),children:[k("span",{className:nW,children:u}),k("span",{className:N(rW,iL,{[oW]:h}),children:k(AL,{name:"Event",color:p})}),k("span",{className:iW,children:o.eventType})]}),k(AL,{className:sW,name:"Remove",onClick:()=>{s(o.id)}})]})}var vW="_fullInput_yav9h_1";const yW=["H1","H2","H3","H4","H5","H6","P"].reduce(((e,t)=>{const n={label:t,value:t};return e.push(n),e}),[]),wW=["ARTICLE","ASIDE","BUTTON","DIV","FIGCAPTION","FIGURE","FOOTER","HEADER","MAIN","NAV","SECTION"].reduce(((e,t)=>{const n={label:t,value:t};return e.push(n),e}),[]);q.t("w.node.tagName");var bW=YF((function(e){const{t:t}=VL(),{node:n}=e,i=T.exports.useMemo((()=>{var e,t;if(to(n)){const t=n.props.content;if(!t)return"P";return(null==(e=(new DOMParser).parseFromString(t,"text/html").body.firstElementChild)?void 0:e.tagName)||"P"}return(null==(t=n.meta)?void 0:t.tagName)||"DIV"}),[n]),r=T.exports.useMemo((()=>to(n)?yW:wW),[n]);return to(n)||ho(n)||ao(n)?A("div",{children:[k(nB,{label:t("w.node.tagName"),margin:"none",children:k(BV,{className:vW,value:i,onChange:function(e){const t=e.target.value;i!==t&&ID.transform((e=>{var i;if(to(n)){const r=n.props.content,o=null==(i=n.meta)?void 0:i.subType;if(!r)return;const s=(new DOMParser).parseFromString(r,"text/html"),a=s.createElement("div");for(const e of s.body.childNodes)if(e.nodeType!==s.ELEMENT_NODE)a.appendChild(e);else{const n=s.createElement(t);n.innerHTML=e.innerHTML,a.appendChild(n)}e.updateNodeById(n.id,{content:a.innerHTML}),"P"===t&&o!==Jr.Paragraph&&e.updateNodeMetaById(n.id,{subType:Jr.Paragraph}),t.startsWith("H")&&o!==Jr.Title&&e.updateNodeMetaById(n.id,{subType:Jr.Title})}else e.updateNodeMetaById(n.id,{tagName:t})}))},options:r},n.id)}),k(vB,{})]}):null}));var xW="_fullInput_yav9h_1";const CW=DR(zs).reduce(((e,t)=>{const n={label:t,value:t};return e.push(n),e}),[]);q.t("w.linkOrAnchor"),q.t("w.linkOrAnchor.rel");var kW=YF((function(e){const{t:t}=VL(),{node:n}=e,i=ID.model.getLink(n.id);if(!i)return null;const r=i.rel||"";return A("div",{children:[k(fB,{children:t("w.linkOrAnchor")}),k(nB,{label:t("w.linkOrAnchor.rel"),margin:"none",children:k(BV,{className:xW,value:r,onChange:function(e){const t=e.target.value;r!==t&&ID.transform((e=>{e.updateLink(i.targetId,i.href,i.target,t)}))},options:CW})}),k(vB,{})]})}));var EW="_input_1g5ee_1";const SW=["100","80","60","40","20"].reduce(((e,t)=>{const n={label:t+"%",value:t};return e.push(n),e}),[]);q.t("w.image"),q.t("w.image.alt"),q.t("w.image.ossResize"),q.t("w.image.ossResize.maxWidth"),q.t("w.image.ossResize.quality");var IW=YF((function(e){var t;const{node:n}=e,{t:i}=VL();if(!no(n))return null;const r=n.props.alt||"",o=null==(t=n.meta)?void 0:t.ossResize,s=(null==o?void 0:o.quality)||"80",a=(null==o?void 0:o.maxWidth)||"2560",l=o?()=>{ID.transform((e=>{e.updateNodeMetaById(n.id,{ossResize:void 0})}))}:()=>{ID.transform((e=>{e.updateNodeMetaById(n.id,{ossResize:{quality:"80",maxWidth:"2560"}})}))};return A("div",{children:[k(fB,{children:i("w.image")}),k(nB,{label:i("w.image.alt"),children:k(cB,{className:EW,value:r,onChange:e=>{r!==e&&ID.transform((t=>{t.updateNodeById(n.id,{alt:e})}))}})}),k(vB,{}),k(fB,{variant:o?"primary":"secondary",action:o?"delete":"add",onClick:l,children:i("w.image.ossResize")}),A(xK,{show:o,children:[k(nB,{label:i("w.image.ossResize.quality"),children:k(BV,{className:EW,value:s,onChange:e=>{const t=e.target.value;t!==s&&ID.transform((e=>{e.updateNodeMetaById(n.id,{ossResize:{quality:t}})}))},options:SW})}),k(nB,{label:i("w.image.ossResize.maxWidth"),children:k(cB,{className:EW,value:a,onChange:e=>{e!==a&&e&&ID.transform((t=>{t.updateNodeMetaById(n.id,{ossResize:{maxWidth:e}})}))},required:!0,pattern:"[1-9][0-9]*"})})]}),k(vB,{})]})}));function OW(e){const t={};for(const n of e)t[n.name]=n.value;return t}function TW(){return A("section",{className:zK,children:[k(MW,{}),k(vB,{}),k(mW,{}),k(bW,{}),k(kW,{}),k(IW,{})]})}const MW=YF((e=>{var t;const{t:n}=VL(),{node:i}=e,[r,o]=T.exports.useState([]),s=(null==(t=i.meta)?void 0:t.componentType)?n(wy(i)):"元素",a=n("w.attribute",{name:s}),[l,c]=T.exports.useState(-1);function d(){c(-1)}return je((()=>{var e;const t=Object.entries(null!=(e=i.props)?e:{}).filter((([e])=>e.startsWith("data-"))).map((([e,t])=>({name:e,value:t})));o(t)}),[i.props]),A(T.exports.Fragment,{children:[k(fB,{variant:r.length?"primary":"secondary",action:"add",onClick:function(){o([...r,{name:"data-",value:""}]),setTimeout((()=>{c(r.length)}),100)},children:a}),r.map(((e,t)=>k(NW,{visible:l===t,node:i,attribute:e,onClose:d,onShow:()=>function(e){c(e)}(t),onConfirm:(t,n)=>function(e,t,n){e||ID.transform((e=>{const o=OW(r.filter((e=>e!==n))),s=b(w({},o),{[t.name]:t.value});n.name!==t.name&&Kt(o[n.name])&&Reflect.set(s,n.name,void 0),e.updateNodeById(i.id,s),d()}))}(t,n,e),onRemove:()=>function(e){ID.transform((t=>{const n=w({},OW(r));Reflect.set(n,e.name,void 0),t.updateNodeById(i.id,n)}));const t=AR(r),n=t.findIndex((t=>t.name===e.name));t.splice(n,1),o(t)}(e)},t)))]})}));function NW(e){const{attribute:t,node:n,onShow:i,onClose:r,onConfirm:o,onRemove:s,visible:a}=e,{t:l}=VL(),[c,d]=T.exports.useState(""),[u,h]=T.exports.useState(Ve(t));function p(e){if(!e)return"";const i=[{check:()=>/^(data-)([A-Za-z0-9:._-]+)+$/.test(e),message:l("w.attribute.rule")},{check:()=>{const i=Object.keys(n.props);return e===t.name||!i.includes(e)},message:l("w.attribute.duplicate")}].find((e=>!e.check()));return(null==i?void 0:i.message)||""}function f(){r()}return A("div",{className:N(iL,KK),children:[k(KB,{title:l("w.attribute.add"),visible:a,onVisibleChange:function(e){e?(i(),h(Ve(t)),d(p(u.name))):f()},triggerClass:N(WK,oL),trigger:k("span",{children:`${t.name}="${t.value}"`}),content:A("div",{className:$K,children:[k(nB,{label:l("w.attribute.key"),children:A("div",{className:GK,children:[k(cB,{placeholder:"data-",value:u.name,maxlength:64,onInput:function(e){const t=e.toLowerCase(),n=p(t);d(n),h(b(w({},u),{name:t}))},invalid:!!c}),c&&k(AW,{children:c})]})}),k(nB,{label:l("w.attribute.value"),children:k(cW,{placeholder:l("w.attribute.value.placeholder"),value:u.value,onChange:function(e){h(b(w({},u),{value:e}))},style:{width:"100%"}})}),A("div",{className:qK,children:[k(ae,{className:YK,variant:"secondary",click:f,children:l("w.dialog.cancel")}),k(ae,{className:YK,variant:"cta",click:function(){o(c,u)},children:l("w.dialog.confirm")})]})]}),fitToConfigPanel:!0,options:b(w({},VB),{closeOnClickOutside:!1})}),k(AL,{className:HK,name:"Remove",onClick:()=>s(t)})]})}function AW(e){const t=e,{children:n}=t,i=x(t,["children"]);return k("span",b(w({className:XK},i),{children:n}))}var RW={title:"_title_1d19q_1",addMenu:"_addMenu_1d19q_10"},DW=Object.defineProperty,PW=(e,t,n)=>(((e,t,n)=>{t in e?DW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let LW=document,UW=window;const FW=new Map,BW=new Map,jW=new Map,VW=new Map,zW=new Map,KW=new Map,WW=new Map,HW=new Map,$W=new Map,qW=[BW,jW,VW,zW,KW,WW],YW=new Map,GW=new Map,XW=new Map,JW=new Map;let QW=new WeakMap;const ZW=e=>{e&&(e.timeline&&e.timeline.detachAnimation(e),e.cancel(),e.effect.clear(),e.dispose())},eH=e=>{e&&e.hasAttribute("style")&&e.removeAttribute("style")},tH=()=>{Array.from(YW.values()).forEach(ZW),Array.from(GW.values()).forEach(ZW),Array.from(XW.values()).forEach(ZW),Array.from(JW.values()).forEach(ZW),Array.from(FW.values()).forEach((e=>{e.deactivate()})),YW.clear(),GW.clear(),XW.clear(),JW.clear(),$W.clear(),HW.clear(),QW=new WeakMap,(()=>{const e=qW.reduce(((e,t)=>e.concat(Array.from(t.keys()))),[]);$W.clear(),Array.from(new Set(e)).forEach(eH)})(),qW.forEach((e=>e.clear()))};function nH(...e){throw e.length&&console.error(...e),new Error("not reached")}function iH(...e){throw e.length&&console.error(...e),new Error("not implemented")}function rH(e){return function(e){return void 0===e}(e)||null===e}const oH=e=>"number"==typeof e,sH=e=>"string"==typeof e,aH=Array.isArray;function lH(e,t,n){if(oH(e)&&oH(t)&&isFinite(e)&&isFinite(t))return e*(1-n)+t*n;if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){const i=[];for(let r=0;r<e.length;r++)i.push(lH(e[r],t[r],n));return i}iH()}function cH(e,t,n){return function(i){return n(lH(e,t,i))}}const dH=Object.create(null);function uH(e,t,n){Reflect.has(dH,n)||(dH[n]={parser:e,merger:t})}function hH(e,t,n){for(let i=0;i<n.length;i++){uH(e,t,n[i])}}function pH(e,t,n){if(t===n)return function(){return t};const i=dH[e];if(!i)return console.warn(`Animation Runtime: Property ${e} handler missed.`),null;const r=i.parser(t),o=i.parser(n);if(void 0!==r&&void 0!==o){const e=i.merger(r,o),s=cH(e.left,e.right,e.format);return function(e){return 0===e?t:1===e?n:s(e)}}return["background-size","background-repeat","background-position"].includes(e)?function(e){return n}:(console.warn(`Animation Runtime: Property ${e} unvalid value.`),null)}function fH(e){return e.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function gH(e,t,n){return Math.min(t,Math.max(e,n))}function mH(e){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e))return Number(e)}function _H(e,t){return{left:e,right:t,format:fH}}function vH(e,t){return function(n,i){return{left:n,right:i,format:n=>fH(gH(e,t,n))}}}function yH(e,t){return{left:e,right:t,format:e=>Math.round(e).toString()}}function wH(e,t){const n=e.exec(t);if(n){const i=e.ignoreCase?n[0].toLowerCase():n[0];return[[...i],t.substr(i.length)]}}function bH(e,t){const n=e(t=t.replace(/^\s*/,""));if(n)return[n[0],n[1].replace(/^\s*/,"")]}function xH(e,t,n){e=bH.bind(null,e);const i=[];for(;;){let r=e(n);if(!r)return[i,n];if(i.push(r[0]),r=wH(t,n=r[1]),!r||""===r[1])return[i,n];n=r[1]}}function CH(e,t){let n,i=0;for(n=0;n<t.length&&(!/\s|,/.test(t[n])||0!==i);n++)if("("===t[n])i++;else if(")"===t[n]&&(i--,0===i&&n++,i<=0))break;const r=e(t.substr(0,n));return rH(r)?void 0:[r,t.substr(n)]}function kH(e){return function(t){const n=e(t);return n&&(n[0]=void 0),n}}function EH(e,t){const n=[];for(let i=0;i<e.length;i++){const r=bH(e[i],t);if(!r||""===r[0])return;void 0!==r[0]&&n.push(r[0]),t=r[1]}if(""===t)return n}function SH(e,t,n){const i=[],r=[],o=[];let s=0;for(let a=0;a<n.length;a++){const l=n[a];if("function"==typeof l){const n=l(e[s],t[s++]);i.push(n.left),r.push(n.right),o.push(n.format)}else i.push(0),r.push(0),o.push((e=>l))}return{left:i,right:r,format(e){let t="";for(let n=0;n<e.length;n++)t+=o[n](e[n]);return t}}}hH((function(e){const t=e.trim().split(/\s*[\s,]\s*/);if(0===t.length)return;const n=[];for(let i=0;i<t.length;i++){const e=mH(t[i]);if(void 0===e)return;n.push(e)}return n}),(function(e,t){if(e.length===t.length)return{left:e,right:t,format:e=>e.map(fH).join(" ")}}),["stroke-dasharray"]),hH(mH,vH(0,1/0),["border-image-width","line-height"]),hH(mH,vH(0,1),["opacity","shape-image-threshold"]),hH(mH,(function(e,t){if(0!==e)return vH(0,1/0)(e,t)}),["flex-grow","flex-shrink"]),hH(mH,yH,["z-index"]),hH(mH,yH,["--font-size-min"]),hH(mH,yH,["--font-size-max"]);const IH=function(e,t,n,i,r){const o=[],s=[],a=[],l=function(e,t){let n=e,i=t;for(;n&&i;)n>i?n%=i:i%=n;return n=e*t/(n+i),n}(i.length,r.length);for(let c=0;c<l;c++){const e=t(i[c%i.length],r[c%r.length]);if(!e)return;o.push(e.left),s.push(e.right),a.push(e.format)}return{left:o,right:s,format(t){const i=t.map((function(e,t){return a[t](e)})).join(n);return e?e(i):i}}}.bind(null,null),OH=LW.createElementNS("http://www.w3.org/1999/xhtml","canvas");OH.width=OH.height=1;const TH=OH.getContext("2d");function MH(e){e=e.trim(),TH.fillStyle="#000",TH.fillStyle=e;const t=TH.fillStyle;if(TH.fillStyle="#fff",TH.fillStyle=e,t!==TH.fillStyle)return;TH.fillRect(0,0,1,1);const n=TH.getImageData(0,0,1,1).data;TH.clearRect(0,0,1,1);const i=n[3]/255;return[n[0]*i,n[1]*i,n[2]*i,i]}function NH(e,t){return{left:e,right:t,format(e){if(e[3])for(let n=0;n<3;n++)e[n]=Math.round((t=e[n]/e[3],Math.max(0,Math.min(255,t))));var t;return e[3]=gH(0,1,e[3]),"rgba("+e.join(",")+")"}}}hH(MH,NH,["background-color","border-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]);const AH=CH.bind(null,MH);function RH(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=RH(e[n]):t[n]=e[n]})),t}function DH(e){return Object.keys(e)}function PH(e){const t=/([\+\-\w\.]+|[\(\)\*\/])/g;let n;function i(){const i=t.exec(e);n=i?i[0]:void 0}function r(){if("("!==n)return function(){const e=Number(n);return i(),e}();i();const e=s();return")"!==n?NaN:(i(),e)}function o(){let e=r();for(;"*"===n||"/"===n;){const t=n;i();const o=r();"*"===t?e*=o:e/=o}return e}function s(){let e=o();for(;"+"===n||"-"===n;){const t=n;i();const r=o();"+"===t?e+=r:e-=r}return e}return i(),s()}function LH(e,t){if("0"===(t=t.trim().toLowerCase())&&"px".search(e)>=0)return{px:0};if(!/^[^(]*$|^calc/.test(t))return;t=t.replace(/calc\(/g,"(");const n={};t=t.replace(e,(function(e){return n[e]=null,"U"+e}));const i="U("+e.source+")";let r=t.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+i,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,"");const o=[/N\*(D)/g,/(N|D)[*/]N/g,/(N|D)O\1/g,/\((N|D)\)/g];let s=0;for(;s<o.length;)o[s].test(r)?(r=r.replace(o[s],"$1"),s=0):s++;if("D"===r){for(const e of DH(n)){const r=PH(t.replace(new RegExp("U"+e,"g"),"").replace(new RegExp(i,"g"),"*0"));if(!isFinite(r))return;n[e]=r}return n}}function UH(e,t){return FH(e,t,!0)}function FH(e,t,n=!1){const i=Array.from(new Set([...DH(e),...DH(t)]));return{left:i.map((function(t){return e[t]||0})),right:i.map((function(e){return t[e]||0})),format(e){const t=e.map((function(t,r){return 1===e.length&&n&&(t=Math.max(t,0)),fH(t)+i[r]})).join(" + ");return e.length>1?"calc("+t+")":t}}}const BH="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",jH=LH.bind(null,new RegExp(BH,"g")),VH=LH.bind(null,new RegExp(BH+"|%","g")),zH=LH.bind(null,/deg|rad|grad|turn/g),KH=CH.bind(null,VH),WH=CH.bind(null,jH),HH=xH.bind(void 0,WH,/^/),$H=xH.bind(void 0,HH,/^,/),qH=IH.bind(void 0,UH," ");hH((function(e){const t=$H(e);if(t&&""===t[1])return t[0]}),IH.bind(void 0,qH,","),["background-size"]),hH(VH,UH,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","border-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),hH(VH,FH,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"]);const YH=function(){function e(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][2]*e[1][1]*e[2][0]-e[1][2]*e[2][1]*e[0][0]-e[2][2]*e[0][1]*e[1][0]}function t(e){const t=n(e);return[e[0]/t,e[1]/t,e[2]/t]}function n(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function i(e,t,n,i){return[n*e[0]+i*t[0],n*e[1]+i*t[1],n*e[2]+i*t[2]]}return function(r){const o=[r.slice(0,4),r.slice(4,8),r.slice(8,12),r.slice(12,16)];if(1!==o[3][3])return null;const s=[];for(let e=0;e<4;e++)s.push(o[e].slice());for(let e=0;e<3;e++)s[e][3]=0;if(0===e(s))return null;const a=[];let l;if(o[0][3]||o[1][3]||o[2][3]){a.push(o[0][3]),a.push(o[1][3]),a.push(o[2][3]),a.push(o[3][3]);const t=function(t){const n=1/e(t),i=t[0][0],r=t[0][1],o=t[0][2],s=t[1][0],a=t[1][1],l=t[1][2],c=t[2][0],d=t[2][1],u=t[2][2],h=[[(a*u-l*d)*n,(o*d-r*u)*n,(r*l-o*a)*n,0],[(l*c-s*u)*n,(i*u-o*c)*n,(o*s-i*l)*n,0],[(s*d-a*c)*n,(c*r-i*d)*n,(i*a-r*s)*n,0]],p=[];for(let e=0;e<3;e++){let n=0;for(let i=0;i<3;i++)n+=t[3][i]*h[i][e];p.push(n)}return p.push(1),h.push(p),h}(s);l=function(e,t){const n=[];for(let i=0;i<4;i++){let r=0;for(let n=0;n<4;n++)r+=e[n]*t[n][i];n.push(r)}return n}(a,[[(c=t)[0][0],c[1][0],c[2][0],c[3][0]],[c[0][1],c[1][1],c[2][1],c[3][1]],[c[0][2],c[1][2],c[2][2],c[3][2]],[c[0][3],c[1][3],c[2][3],c[3][3]]])}else l=[0,0,0,1];var c;const d=o[3].slice(0,3),u=[];u.push(o[0].slice(0,3));const h=[];h.push(n(u[0])),u[0]=t(u[0]);const p=[];u.push(o[1].slice(0,3)),p.push(GH(u[0],u[1])),u[1]=i(u[1],u[0],1,-p[0]),h.push(n(u[1])),u[1]=t(u[1]),p[0]/=h[1],u.push(o[2].slice(0,3)),p.push(GH(u[0],u[2])),u[2]=i(u[2],u[0],1,-p[1]),p.push(GH(u[1],u[2])),u[2]=i(u[2],u[1],1,-p[2]),h.push(n(u[2])),u[2]=t(u[2]),p[1]/=h[2],p[2]/=h[2];const f=(g=u[1],m=u[2],[g[1]*m[2]-g[2]*m[1],g[2]*m[0]-g[0]*m[2],g[0]*m[1]-g[1]*m[0]]);var g,m;if(GH(u[0],f)<0)for(let e=0;e<3;e++)h[e]*=-1,u[e][0]*=-1,u[e][1]*=-1,u[e][2]*=-1;const _=u[0][0]+u[1][1]+u[2][2]+1;let v,y;return _>1e-4?(v=.5/Math.sqrt(_),y=[(u[2][1]-u[1][2])*v,(u[0][2]-u[2][0])*v,(u[1][0]-u[0][1])*v,.25/v]):u[0][0]>u[1][1]&&u[0][0]>u[2][2]?(v=2*Math.sqrt(1+u[0][0]-u[1][1]-u[2][2]),y=[.25*v,(u[0][1]+u[1][0])/v,(u[0][2]+u[2][0])/v,(u[2][1]-u[1][2])/v]):u[1][1]>u[2][2]?(v=2*Math.sqrt(1+u[1][1]-u[0][0]-u[2][2]),y=[(u[0][1]+u[1][0])/v,.25*v,(u[1][2]+u[2][1])/v,(u[0][2]-u[2][0])/v]):(v=2*Math.sqrt(1+u[2][2]-u[0][0]-u[1][1]),y=[(u[0][2]+u[2][0])/v,(u[1][2]+u[2][1])/v,.25*v,(u[1][0]-u[0][1])/v]),[d,h,p,y,l]}}();function GH(e,t){let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}function XH(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function JH(e){const t=e.rad||0;return((e.deg||0)/360+(e.grad||0)/400+(e.turn||0))*(2*Math.PI)+t}function QH(e){switch(e.t){case"rotatex":{const t=JH(e.d[0]);return[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1]}case"rotatey":{const t=JH(e.d[0]);return[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1]}case"rotate":case"rotatez":{const t=JH(e.d[0]);return[Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1]}case"rotate3d":{let t=e.d[0],n=e.d[1],i=e.d[2];const r=JH(e.d[3]),o=t*t+n*n+i*i;if(0===o)t=1,n=0,i=0;else if(1!==o){const e=Math.sqrt(o);t/=e,n/=e,i/=e}const s=Math.sin(r/2),a=s*Math.cos(r/2),l=s*s;return[1-2*(n*n+i*i)*l,2*(t*n*l+i*a),2*(t*i*l-n*a),0,2*(t*n*l-i*a),1-2*(t*t+i*i)*l,2*(n*i*l+t*a),0,2*(t*i*l+n*a),2*(n*i*l-t*a),1-2*(t*t+n*n)*l,0,0,0,0,1]}case"scale":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0],0,0,0,0,1];case"scale3d":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,e.d[2],0,0,0,0,1];case"skew":{const t=JH(e.d[0]),n=JH(e.d[1]);return[1,Math.tan(n),0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]}case"skewx":{const t=JH(e.d[0]);return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]}case"skewy":{const t=JH(e.d[0]);return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]}case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e.d[0].px||0,e.d[1].px||0,0,1];case"translatex":return[1,0,0,0,0,1,0,0,0,0,1,0,e.d[0].px||0,0,0,1];case"translatey":return[1,0,0,0,0,1,0,0,0,0,1,0,0,e.d[0].px||0,0,1];case"translatez":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,e.d[0].px||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e.d[0].px||0,e.d[1].px||0,e.d[2].px||0,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,e.d[0].px?-1/e.d[0].px:0,0,0,0,1];case"matrix":return[e.d[0],e.d[1],0,0,e.d[2],e.d[3],0,0,0,0,1,0,e.d[4],e.d[5],0,1];case"matrix3d":return e.d;default:console.assert(!1,"Transform item type "+e.t+" conversion to matrix not yet implemented.")}}function ZH(e){return 0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(QH).reduce(XH)}function e$(e){return[YH(ZH(e))]}const t$=function(){function e(e,t){const n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(let i=0;i<4;i++)for(let r=0;r<4;r++)for(let o=0;o<4;o++)n[i][r]+=t[i][o]*e[o][r];return n}return function(t,n,i,r,o){let s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];for(let e=0;e<4;e++)s[e][3]=o[e];for(let e=0;e<3;e++)for(let n=0;n<3;n++)s[3][e]+=t[n]*s[n][e];const a=r[0],l=r[1],c=r[2],d=r[3],u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];u[0][0]=1-2*(l*l+c*c),u[0][1]=2*(a*l-c*d),u[0][2]=2*(a*c+l*d),u[1][0]=2*(a*l+c*d),u[1][1]=1-2*(a*a+c*c),u[1][2]=2*(l*c-a*d),u[2][0]=2*(a*c-l*d),u[2][1]=2*(l*c+a*d),u[2][2]=1-2*(a*a+l*l),s=e(s,u);const h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];i[2]&&(h[2][1]=i[2],s=e(s,h)),i[1]&&(h[2][1]=0,h[2][0]=i[0],s=e(s,h)),i[0]&&(h[2][0]=0,h[1][0]=i[0],s=e(s,h));for(let e=0;e<3;e++)for(let t=0;t<3;t++)s[e][t]*=n[e];return(p=s)[0][2]||p[0][3]||p[1][2]||p[1][3]||p[2][0]||p[2][1]||p[2][2]||p[2][3]||p[3][2]||p[3][3]?s[0].concat(s[1],s[2],s[3]):[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]];var p}}();function n$(e,t,n){let i=GH(e,t);var r,o,s;r=i,o=-1,s=1,i=Math.max(Math.min(r,s),o);let a=[];if(1===i)a=e;else{const r=Math.acos(i),o=1*Math.sin(n*r)/Math.sqrt(1-i*i);for(let s=0;s<4;s++)a.push(e[s]*(Math.cos(n*r)-i*o)+t[s]*o)}return a}function i$(e){const t={};for(const n in e)t[n]=-e[n];return t}function r$(e){return wH(/^(left|center|right|top|bottom)\b/i,e)||KH(e)}const o$={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}};function s$(e,t){const n=xH(r$,/^/,t);if(!n||""!==n[1])return;const i=n[0];if(i[0]=i[0]||"center",i[1]=i[1]||"center",3===e&&(i[2]=i[2]||{px:0}),i.length===e){if(/top|bottom/.test(i[0])||/left|right/.test(i[1])){const e=i[0];i[0]=i[1],i[1]=e}if(/left|right|center|Object/.test(i[0])&&/top|bottom|center|Object/.test(i[1]))return i.map((function(e){return"object"==typeof e?e:o$[e]}))}}const a$=IH.bind(null,FH," ");function l$(e){const t=xH(r$,/^/,e);if(!t)return;const n=t[0],i=[{"%":50},{"%":50}];let r=0,o=!1;for(let s=0;s<n.length;s++){let e=n[s];"string"==typeof e?(o=/bottom|right/.test(e),r={left:0,right:0,center:r,top:1,bottom:1}[e],i[r]=o$[e],"center"===e&&r++):(o&&(e=i$(e),e["%"]=(e["%"]||0)+100),i[r]=e,r++,o=!1)}return[i,t[1]]}hH(s$.bind(null,3),a$,["transform-origin"]),hH(s$.bind(null,2),a$,["perspective-origin"]);function c$(e){const t={inset:!1,lengths:[],color:null};const n=xH((function(e){let n=wH(/^inset/i,e);return n?(t.inset=!0,n):(n=KH(e),n?(t.lengths.push(n[0]),n):(n=AH(e),n?(t.color=n[0],n):void 0))}),/^/,e);if(n&&n[0].length)return[t,n[1]]}hH((function(e){const t=xH(l$,/^,/,e);if(t&&""===t[1])return t[0]}),IH.bind(null,a$,", "),["background-position","object-position"]);hH((function(e){"none"===e&&(e="0px 0px 0px 0px rgba(0,0,0,0)");const t=xH(c$,/^,/,e);if(t&&""===t[1])return t[0]}),function(e,t,n,i){const r=[],o=[];function s(e){return{inset:e,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(let a=0;a<n.length||a<i.length;a++){const e=n[a]||s(i[a].inset),t=i[a]||s(n[a].inset);r.push(e),o.push(t)}return IH(e,t,r,o)}.bind(null,(function(e,t){for(;e.lengths.length<Math.max(e.lengths.length,t.lengths.length);)e.lengths.push({px:0});for(;t.lengths.length<Math.max(e.lengths.length,t.lengths.length);)t.lengths.push({px:0});if(e.inset!==t.inset||!!e.color!=!!t.color)return;const n=[];let i;const r=[[],0],o=[[],0];for(let s=0;s<e.lengths.length;s++){const i=FH(e.lengths[s],t.lengths[s],2===s);r[0].push(i.left),o[0].push(i.right),n.push(i.format)}if(e.color&&t.color){const n=NH(e.color,t.color);r[1]=n.left,o[1]=n.right,i=n.format}return{left:r,right:o,format(t){let r=e.inset?"inset ":" ";for(let e=0;e<n.length;e++)r+=n[e](t[0][e])+" ";return i&&(r+=i(t[1])),r}}}),", "),["box-shadow","text-shadow"]);const d$=CH.bind(null,VH),u$=xH.bind(void 0,d$,/^/),h$=IH.bind(void 0,FH," "),p$=IH.bind(void 0,h$,",");function f$(e){return function(t){let n=0;return e.map((function(e){return null===e?t[n++]:e}))}}function g$(e){return e}hH((function(e){const t=wH(/^circle/,e);if(t&&t[0])return["circle"].concat(EH([kH(wH.bind(void 0,/^\(/)),d$,kH(wH.bind(void 0,/^at/)),l$,kH(wH.bind(void 0,/^\)/))],t[1]));const n=wH(/^ellipse/,e);if(n&&n[0])return["ellipse"].concat(EH([kH(wH.bind(void 0,/^\(/)),u$,kH(wH.bind(void 0,/^at/)),l$,kH(wH.bind(void 0,/^\)/))],n[1]));const i=wH(/^polygon/,e);return i&&i[0]?["polygon"].concat(EH([kH(wH.bind(void 0,/^\(/)),(r=wH.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),o="nonzero,",function(e){const t=r(e);return t||[o,e]}),$H,kH(wH.bind(void 0,/^\)/))],i[1])):void 0;var r,o}),(function(e,t){if(e[0]===t[0])return"circle"===e[0]?SH(e.slice(1),t.slice(1),["circle(",FH," at ",a$,")"]):"ellipse"===e[0]?SH(e.slice(1),t.slice(1),["ellipse(",qH," at ",a$,")"]):"polygon"===e[0]&&e[1]===t[1]?SH(e.slice(2),t.slice(2),["polygon(",e[1],p$,")"]):void 0}),["shape-outside"]);const m$={px:0},_$={deg:0},v$={matrix:["NNNNNN",[null,null,0,0,null,null,0,0,0,0,1,0,null,null,0,1],g$],matrix3d:["NNNNNNNNNNNNNNNN",g$],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",f$([null,null,1]),g$],scalex:["N",f$([null,1,1]),f$([null,1])],scaley:["N",f$([1,null,1]),f$([1,null])],scalez:["N",f$([1,1,null])],scale3d:["NNN",g$],skew:["Aa",null,g$],skewx:["A",null,f$([null,_$])],skewy:["A",null,f$([_$,null])],translate:["Tt",f$([null,null,m$]),g$],translatex:["T",f$([null,m$,m$]),f$([null,m$])],translatey:["T",f$([m$,null,m$]),f$([m$,null])],translatez:["L",f$([m$,m$,null])],translate3d:["TTL",g$]};function y$(e){return e.toFixed(6).replace(".000000","")}function w$(e,t){let n,i;return e.decompositionPair!==t&&(e.decompositionPair=t,n=e$(e)),t.decompositionPair!==e&&(t.decompositionPair=e,i=e$(t)),null==n[0]||null==i[0]?{left:[!1],right:[!0],format:n=>n?t[0].d:e[0].d}:(n[0].push(0),i[0].push(1),{left:n,right:i,format(e){const t=n$(n[0][3],i[0][3],e[5]);return t$(e[0],e[1],e[2],t,e[4]).map(y$).join(",")}})}function b$(e){return e.replace(/[xy]/,"")}function x$(e){return e.replace(/(x|y|z|3d)?$/,"3d")}function C$(e){return 400===(e=gH(100,900,e=100*Math.round(e/100)))?"normal":700===e?"bold":String(e)}var k$;hH((function(e){if("none"===(e=e.toLowerCase().trim()))return[];const t=/\s*(\w+)\(([^)]*)\)/g,n=[];let i,r=0;for(;i=t.exec(e);){if(i.index!==r)return;r=i.index+i[0].length;const o=i[1],s=Reflect.get(v$,o);if(!s)return;const a=i[2].split(","),l=s[0];if(l.length<a.length)return;const c=[];for(let e=0;e<l.length;e++){const t=a[e],n=l[e];let i;if(t){i=Reflect.get({A:function(e){return"0"===e.trim()?_$:zH(e)},N:mH,T:VH,L:VH},n.toUpperCase())(t)}else i=Reflect.get({a:_$,n:c[0],t:m$},n);if(void 0===i)return;c.push(i)}if(n.push({t:o,d:c}),t.lastIndex===e.length)return n}}),(function(e,t){const n=e$&&!0;let i=!1;if(!e.length||!t.length){e.length||(i=!0,e=t,t=[]);for(let n=0;n<e.length;n++){const i=e[n].t,r=e[n].d,o="scale"===i.sub(0,5)?1:0;t.push({t:i,d:r.map((function(e){if("number"==typeof e)return o;const t={};for(const n in e)t[n]=o;return t}))})}}let r=[],o=[],s=[];if(e.length!==t.length){if(!n)return;const i=w$(e,t);r=[i.left],o=[i.right],s=[["matrix",[i.format]]]}else for(let c=0;c<e.length;c++){const i=e[c].t,d=t[c].t;let u=e[c].d,h=t[c].d;const p=Reflect.get(v$,i),f=Reflect.get(v$,d);let g;if(l=d,"perspective"===(a=i)&&"perspective"===l||("matrix"===a||"matrix3d"===a)&&("matrix"===l||"matrix3d"===l)){if(!n)return;const i=w$([e[c]],[t[c]]);r.push(i.left),o.push(i.right),s.push(["matrix",[i.format]]);continue}if(i===d)g=i;else if(p[2]&&f[2]&&b$(i)===b$(d))g=b$(i),u=p[2](u),h=f[2](h);else{if(!p[1]||!f[1]||x$(i)!==x$(d)){if(!n)return;const i=w$(e,t);r=[i.left],o=[i.right],s=[["matrix",[i.format]]];break}g=x$(i),u=p[1](u),h=f[1](h)}const m=[],_=[],v=[];for(let e=0;e<u.length;e++){const t=("number"==typeof u[e]?_H:FH)(u[e],h[e]);m[e]=t.left,_[e]=t.right,v.push(t.format)}r.push(m),o.push(_),s.push([g,v])}var a,l;if(i){const e=r;r=o,o=e}return{left:r,right:o,format:e=>e.map((function(e,t){const n=e.map((function(e,n){return s[t][1][n](e)})).join(",");return"matrix"===s[t][0]&&16===n.split(",").length&&(s[t][0]="matrix3d"),s[t][0]+"("+n+")"})).join(" ")}}),["transform"]),hH((function(e){const t=Number(e);if(!(isNaN(t)||t<100||t>900||t%100!=0))return t}),(function(e,t){return{left:e,right:t,format:C$}}),["font-weight"]),(k$=k$||{}).stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var n=e.visit(t.orientation);return n&&(n+=", "),t.type+"("+n+e.visit(t.colorStops)+")"},visit_shape:function(t){var n=t.value,i=e.visit(t.at),r=e.visit(t.style);return r&&(n+=" "+r),i&&(n+=" at "+i),n},"visit_default-radial":function(t){var n="",i=e.visit(t.at);return i&&(n+=i),n},"visit_extent-keyword":function(t){var n=t.value,i=e.visit(t.at);return i&&(n+=" at "+i),n},"visit_position-keyword":function(e){return e.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,n){var i=t,r=e.visit(n.length);return r&&(i+=" "+r),i},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(t){var n="",i=t.length;return t.forEach((function(t,r){n+=e.visit(t),r<i-1&&(n+=", ")})),n},visit:function(t){if(!t)return"";if(t instanceof Array)return e.visit_array(t,"");if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}throw Error("Invalid node.")}};return function(t){return e.visit(t)}}(),(k$=k$||{}).parse=function(){var e=/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,t=/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,n=/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,i=/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,r=/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,a=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,d=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,u=/^\(/,h=/^\)/,p=/^,/,f=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,m=/^rgb/i,_=/^rgba/i,v=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,y="";function w(e){var t=new Error(y+": "+e);throw t.source=y,t}function b(){var e=N(x);return y.length>0&&w("Invalid input not EOF"),e}function x(){return C("linear-gradient",e,E)||C("repeating-linear-gradient",t,E)||C("radial-gradient",n,S)||C("repeating-radial-gradient",i,S)}function C(e,t,n){return k(t,(function(t){var i=n();return i&&(U(p)||w("Missing comma before color stops")),{type:e,orientation:i,colorStops:N(A)}}))}function k(e,t){var n=U(e);if(n){U(u)||w("Missing (");var i=t(n);return U(h)||w("Missing )"),i}}function E(){return L("directional",r,1)||L("angular",d,1)}function S(){var e,t,n=I();return n&&((e=[]).push(n),t=y,U(p)&&((n=I())?e.push(n):y=t)),e}function I(){var e=function(){var e=L("shape",/^(circle)/i,0);e&&(e.style=P()||O());return e}()||function(){var e=L("shape",/^(ellipse)/i,0);e&&(e.style=D()||O());return e}();if(e)e.at=T();else{var t=O();if(t){e=t;var n=T();n&&(e.at=n)}else{var i=M();i&&(e={type:"default-radial",at:i})}}return e}function O(){return L("extent-keyword",o,1)}function T(){if(L("position",/^at/,0)){var e=M();return e||w("Missing positioning value"),e}}function M(){var e={x:D(),y:D()};if(e.x||e.y)return{type:"position",value:e}}function N(e){var t=e(),n=[];if(t)for(n.push(t);U(p);)(t=e())?n.push(t):w("One extra comma");return n}function A(){var e=L("hex",f,1)||k(_,(function(){return{type:"rgba",value:N(R)}}))||k(m,(function(){return{type:"rgb",value:N(R)}}))||L("literal",g,0);return e||w("Expected color definition"),e.length=D(),e}function R(){return U(v)[1]}function D(){return L("%",l,1)||L("position-keyword",s,1)||P()}function P(){return L("px",a,1)||L("em",c,1)}function L(e,t,n){var i=U(t);if(i)return{type:e,value:i[n]}}function U(e){var t,n;return(n=/^[\n\r\t\s]+/.exec(y))&&F(n[0].length),(t=e.exec(y))&&F(t[0].length),t}function F(e){y=y.substr(e)}return function(e){return y=e.toString(),b()}}();var E$,S$,I$,O$,T$,M$,N$,A$=k$.parse;function R$(e,t){if(!e)throw t instanceof Error?t:new Error(t)}function D$(e,t){const n=t instanceof Error?t:new Error(t);e||console.error(n)}function P$(e,t,n){return Math.min(Math.max(t,e),n)}function L$(e){return`blur(${e=function(e){const t=parseFloat(`${e}`);return Number.isFinite(t)?`${e}px`:`${e}`}(e)})`}!function(e){e.notFound="404",e.badRequest="400",e.internalError="500"}(E$||(E$={})),function(e){e.webkit="-webkit-",e.moz="-moz-",e.ms="-ms-",e.o="-o-"}(S$||(S$={})),function(e){e.grid="grid",e.flex="flex",e.inlineGrid="inline-grid",e.inlineFlex="inline-flex",e.none="none",e.listItem="list-item",e.block="block"}(I$||(I$={})),function(e){e.row="row",e.column="column"}(O$||(O$={})),function(e){e.wrap="wrap",e.nowrap="nowrap"}(T$||(T$={})),function(e){e.none="static",e.fixed="fixed",e.sticky="sticky"}(M$||(M$={})),function(e){e.visible="visible",e.hidden="hidden",e.scroll="scroll",e.auto="auto"}(N$||(N$={}));const U$=["rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ","perspective"],F$={rotateX:"0",rotateY:"0",rotateZ:"0",scaleX:"1",scaleY:"1",scaleZ:"1",skewX:"0",skewY:"0",translateX:"0",translateY:"0",translateZ:"0",perspective:"0"};function B$(e){const t=function(e){const t=`(${U$.join("|")})\\((.+?)\\)`,n=new RegExp(t,"g"),i={};return Array.from(e.matchAll(n),(e=>e)).forEach((e=>{const t=e[1],n=e[2];if(i[t]){if(i[t]!==F$[t])throw new Error("unimplemented");i[t]=n}else i[t]=n;return e})),i}(e),n={};Object.keys(t).forEach((e=>{Reflect.set(n,e,F$[e])}));return function(e){const t=e,{perspective:n}=t,i=x(t,["perspective"]);let r="";n&&(r+=`perspective(${n}) `);return Object.keys(i).forEach((e=>{r+=`${e}(${i[e]}) `})),r}(n)}var j$,V$,z$,K$,W$;!function(e){e.default="default",e.pointer="pointer",e.grab="grab",e.move="move",e.text="text"}(j$||(j$={})),function(e){e.px="px",e["%"]="%",e.vw="vw",e.vh="vh",e.fr="fr"}(V$||(V$={})),function(e){e.auto="auto",e.fitContent="fit-content"}(z$||(z$={})),V$.px,V$["%"],V$.vw,V$.vh,z$.auto,z$.fitContent,Object.values(V$),function(e){e.none="none",e.start="start",e.end="end",e.center="center"}(K$||(K$={})),function(e){e.none="none",e.mandatory="both mandatory",e.proximity="both proximity"}(W$||(W$={})),function(e){const t=this;let n,i=!1;return function(){return i||(i=!0,n=e.apply(t,arguments)),n}}((()=>{try{const e=document.createElement("div");return document.body.appendChild(e),getComputedStyle(e)}catch{return{}}}))();var H$,$$;function q$(e){const t=[];return e.forEach((e=>{const{colorStops:n,orientation:i,type:r,imageUrl:o,color:s}=e;r===H$.image?t.push(function(e){return`url(${e})`}(o)):r===H$.linear?t.push(function(e,t){return`linear-gradient(${t}deg, ${e.map((e=>`${e.color} ${e.length}`)).join(",")})`}(n,i)):r===H$.color&&t.push(function(e){return`linear-gradient(${e}, ${e})`}(s))})),t.join(",")}!function(e){e.color="color",e.linear="linear",e.image="image"}(H$||(H$={})),H$.color,function(e){e.color="color",e.linear="linear",e.image="image"}($$||($$={}));const Y$={type:$$.color,color:"rgba(0, 0, 0, 0)",colorStops:[],orientation:0,imageUrl:""};function G$(e){const t=RH(Y$);if(function(e){return e.trim().startsWith("linear-gradient")}(e)){const[n]=A$(e);n.orientation&&(R$("linear-gradient"===n.type,E$.badRequest),R$("angular"===n.orientation.type,E$.badRequest),t.orientation=(i=n.orientation.value,parseInt(i||"0",10)));const r=n.colorStops.map((e=>{R$("rgba"===e.type||"rgb"===e.type,E$.badRequest);const[t,n,i,r=1]=e.value,o={length:"",color:`rgba(${t},${n},${i},${r})`};if(e.length){const{type:t,value:n}=e.length;R$("%"===t,E$.badRequest),o.length=`${n}${t}`}return o}));1===[...new Set(r.map((e=>e.color)))].length?(t.type=$$.color,t.color=r[0].color):(t.type=$$.linear,t.colorStops=r)}else{t.type=$$.image;const i=(null==(n=/(?:\(['"]?)(.*?)(?:['"]?\))/.exec(e))?void 0:n[1])||"";t.imageUrl=i}var n,i;return t}function X$(e){if("none"===e||!e)return RH([Y$]);return function(e){const t=/((?:[^"']|".*?"|'.*?')*?)([(,)]|$)/g;return function n(){for(let i=[];;){let r=t.exec(e);if("("===r[2]?(i.push(r[1].trim()+"("+n().join(",")+")"),r=t.exec(e)):i.push(r[1].trim()),[",",")"].includes(r[2])&&r[1].endsWith("%")&&(i[i.length-1]+=r[1]),","!==r[2])return i.filter(Boolean)}}()}(e).map(G$)}function J$(e){return e.match(/(\d(\.\d+)?)+/g).map((e=>parseFloat(e)))}function Q$(e){return J$(e)[3]}function Z$(e){const t=e,{color:n,type:i}=t,r=x(t,["color","type"]);if(i!==$$.color)return null;const o=[{length:"0%",color:n},{length:"100%",color:n}];return b(w({},r),{color:n,type:$$.linear,colorStops:o,orientation:90})}function eq(e,t){const{left:n,right:i}=function(e,t){const n=e=>{const{color:t,colorStops:n,type:i}=e;return i===$$.image||(i===$$.color?1===Q$(t):i===$$.linear?!n.map((e=>Q$(e.color))).some((e=>1!==e)):void 0)},i=(e=e.filter((e=>e.type!==$$.image))).findIndex(n);-1!==i&&(e=e.slice(0,i+1));const r=t.findIndex(n);if(-1!==r&&(t=t.slice(0,r+1)),t[t.length-1].type===$$.image){const n=RH(t[t.length-1]);e.push(n)}return{left:e,right:t}}(e,t);if(n.length!==i.length){const e=Math.max(n.length,i.length),t=Math.min(n.length,i.length),r=new Array(e-t).fill(RH(Y$));(n.length===t?n:i).splice(Math.floor(t/2),0,...r)}D$(n.length===i.length);for(let r=0;r<n.length;r++){const e=Z$(n[r]);e&&(n[r]=e);const t=Z$(i[r]);t&&(i[r]=t);const o=i[r],s=n[r];if(o.type===$$.image&&D$(s.type===$$.image),s.type===$$.linear&&o.type===$$.linear){const e=o.colorStops,t=s.colorStops;if(t.length!==e.length){const n=Math.max(t.length,e.length),i=Math.min(t.length,e.length),r=n-i,o=t.length===i?t:e,s=o[o.length-1],a=parseInt(s.length.replace("%","")),l=new Array(r).fill({length:"",color:s.color}).map(((e,t)=>{const n=`${(100-a)/r*t+a}%`;return b(w({},e),{length:n})}));o.splice(Math.ceil(i/2),0,...l)}}}return{left:n,right:i}}function tq(e){const{colorStops:t,type:n,orientation:i}=e,r=[];let o=0;return n!==$$.linear||(o++,r.push(i),t.forEach((e=>{const{color:t,length:n}=e,i=parseInt(n),s=J$(t);o+=5,r.push(i,...s)}))),{count:o,inits:r}}function nq(e){return X$(e)}function iq(e){return L$(e)}hH(nq,(function(e,t){const{left:n,right:i}=eq(e,t);return{left:n.reduce(((e,t)=>{const{inits:n}=tq(t);return e.push(...n),e}),[]),right:i.reduce(((e,t)=>{const{inits:n}=tq(t);return e.push(...n),e}),[]),format(e){let t=0;return q$(i.map((n=>{const{count:i}=tq(n),r=e.slice(t,t+i);t+=i;return n.type===$$.linear?function(e,t){const n=e,{type:i,colorStops:r}=n,o=x(n,["type","colorStops"]);if(i!==$$.linear)return;const s=t[0],a=r.map(((e,n)=>{const i=5*n+1,r=t.slice(i,i+5),[o,...s]=r;return{length:`${o}%`,color:function(e){const[t,n,i,r]=e;return`rgba(${t},${n},${i},${r})`}(s)}}));return b(w({},o),{type:i,colorStops:a,orientation:s})}(n,r):n})))}}}),["background-image"]),CH.bind(null,nq),hH((function(e){return function(e){const t=/blur\((\d+)px\)?/;if(!t.test(e))return 0;const[,n]=t.exec(e);return parseInt(n)}(e)}),(function(e,t){return{left:e,right:t,format:iq}}),["filter","backdrop-filter"]);hH(String,(function(e,t){const n=[e,t].find((e=>"none"!==e));return e!==t&&[e,t].some((e=>"none"===e))?{left:1,right:1,format:()=>n}:null}),["display"]);const rq=["background-color","background-image","background-size","border-width","border-color","border-image-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-left-color","border-left-width","border-right-color","border-right-width","border-top-color","border-top-left-radius","border-top-right-radius","border-top-width","top","right","bottom","left","width","height","margin-bottom","margin-left","margin-right","margin-top","padding-bottom","padding-left","padding-right","padding-top","max-height","max-width","min-height","min-width","z-index","box-shadow","outline-width","outline-offset","font-size","--font-size-min","--font-size-max","font-weight","letter-spacing","line-height","word-spacing","text-decoration-color","text-indent","vertical-align","text-shadow","rotate","scale","skew","translate","perspective","perspective-origin","transform-origin","transform","color","clip","clip-path","filter","backdrop-filter","opacity","visibility","display","mask-border","mask-position","mask-size","shape-margin","shape-image-threshold","shape-outside","fill","flood-color","lighting-color","outline-color","stop-color","stroke","stroke-dashoffset","stroke-dasharray","flex-grow","flex-shrink","flex-basis","background-position","object-position"];var oq,sq,aq,lq,cq,dq,uq,hq,pq,fq,gq,mq,_q;!function(e){e.document="document",e.scroll="scroll"}(oq||(oq={})),function(e){e.normal="normal",e.reverse="reverse",e.alternate="alternate",e["alternate-reverse"]="alternate-reverse"}(sq||(sq={})),function(e){e.none="none",e.forwards="forwards",e.backwards="backwards",e.both="both",e.auto="auto"}(aq||(aq={})),function(e){e.group="group",e.sequence="sequence"}(lq||(lq={})),function(e){e.appearance="appearance",e.transition="transition"}(cq||(cq={})),function(e){e.start="start",e.end="end"}(dq||(dq={})),function(e){e.vertical="vertical",e.horizontal="horizontal",e.block="block",e.inline="inline"}(uq||(uq={})),function(e){e.enter="enter",e.exit="exit"}(hq||(hq={})),function(e){e.load="load",e.click="click",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.intersection="@intersection",e.loadScroll="@loadScroll",e.appear="@appear",e.mousedown="mousedown",e.mouseup="mouseup"}(pq||(pq={})),(gq=fq||(fq={})).inactive="inactive",gq.before="before",gq.active="active",gq.after="after",(_q=mq||(mq={})).idle="idle",_q.running="running",_q.paused="paused",_q.finished="finished",Object.freeze([]);class vq extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function yq(e){if((t=e)&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]){const t=[];for(const n of e)if(n)try{n.dispose()}catch(f8){t.push(f8)}if(1===t.length)throw t[0];if(t.length>1)throw new vq(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e;var t}class wq{constructor(){PW(this,"_toDispose",new Set),PW(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{yq(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}PW(wq,"DISABLE_DISPOSED_WARNING",!1);class bq{constructor(){PW(this,"_store",new wq),this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}PW(bq,"None",Object.freeze({dispose(){}}));class xq{constructor(){PW(this,"_value"),PW(this,"_isDisposed",!1)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null==(t=this._value)||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null==(e=this._value)||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class Cq{constructor(){PW(this,"dispose",(()=>{})),PW(this,"unset",(()=>{})),PW(this,"isset",(()=>!1))}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>void 0!==t,this.dispose=()=>{t&&(t(),t=void 0)},this}}const kq=new WeakMap;function Eq(e){const t=e.effect.target;kq.has(t)||kq.set(t,[]);kq.get(t).push(e)}function Sq(e){const t=e.effect.target,n=kq.get(t),i=n.indexOf(this);-1!==i&&n.splice(i,1)}let Iq=1;const Oq=new WeakMap;class Tq extends bq{constructor(){super(...arguments),PW(this,"animations",[]),PW(this,"pendingEffects",new Set),PW(this,"pendingTask")}asDocumentTimeline(){return null}attachAnimation(e){this.animations.includes(e)||this.animations.push(e),function(e){Oq.has(e)&&iH(),Oq.set(e,Iq++)}(e)}detachAnimation(e){const t=this.animations.indexOf(e);t>-1&&this.animations.splice(t),this.animations.length<=0&&this.dispose()}applyDirtiedAnimation(e){Eq(e),this.doTick(!1,[e]),this.applyPendingEffects()}animationFrameCallback(){this.pendingTask=null,this.doTick(!0,this.animations),this.applyPendingEffects()}doTick(e,t){const{currentTime:n}=this;this.pendingTask&&(cancelAnimationFrame(this.pendingTask),this.pendingTask=null);let i=!1;const r=[],o=[];for(const s of t){s.tick(n);const{inEffect:e}=s.effect;e?Eq(s):Sq(s),this.pendingEffects.add(s.effect);const t=s.playState;t===mq.running&&(i=!0);e||t===mq.running?r.push(s):o.push(s)}return this.monotonical&&i&&(this.pendingTask=requestAnimationFrame((()=>this.animationFrameCallback()))),[r,o]}applyPendingEffects(){for(const e of this.pendingEffects)e.apply();this.pendingEffects.clear()}}function Mq(e){return rH(e)}function Nq(e){return!rH(e)}const Aq=performance.now();class Rq extends Tq{constructor(){super(),PW(this,"zeroTime"),this.zeroTime=Aq}attachAnimation(e){super.attachAnimation(e),e.ready.then((()=>{this.applyDirtiedAnimation(e)}))}get currentTime(){return Mq(this.zeroTime)?null:(performance.now()-this.zeroTime)/1e3}get phase(){return fq.active}get monotonical(){return!0}asDocumentTimeline(){return this}}var Dq,Pq,Lq,Uq,Fq,Bq,jq,Vq;(Pq=Dq||(Dq={})).percentage="percentage",Pq.number="number",Pq.px="px";class zq{static parse(e,t){iH()}}(Uq=Lq||(Lq={})).length="length",Uq.angle="angle",Uq.time="time",Uq.frequency="frequency",Uq.resolution="resolution",Uq.flex="flex",Uq.percent="percent";class Kq extends zq{constructor(e,t){super(),this.value=e,this.unit=t}toString(){return`${this.value}${function(e){switch(e){case Dq.percentage:return"%";case"number":return"";default:return e.toLowerCase()}}(this.unit)}`}}(Bq=Fq||(Fq={})).percent=function(e){return new Kq(e,Dq.percentage)},Bq.px=function(e){return new Kq(e,Dq.px)},function(e){e.child=">",e.descendant=" ",e.sibling="~",e.attribute="[]",e.pseudoClass=":",e.pseudoElement=":"}(jq||(jq={})),function(e){e.visited="visited",e.active="active",e.hover="hover"}(Vq||(Vq={}));const Wq={"backdrop-filter":[S$.webkit]};function Hq(e){const t=getComputedStyle(e);return!(e!==LW.scrollingElement&&("visible"===t.overflow||"clip"===t.overflow))}function $q(e,t){const n="horizontal-tb"===getComputedStyle(e).writingMode;let i=t;return i===uq.block?i=n?uq.vertical:uq.horizontal:i===uq.inline&&(i=n?uq.horizontal:uq.vertical),i}function qq(e){const t=Object.create(null);return rq.forEach((n=>{Reflect.set(t,n,e.getPropertyValue(n));(Wq[n]||[]).forEach((i=>{const r=`${i}${n}`;Reflect.set(t,r,e.getPropertyValue(r))}))})),t}"function"==typeof requestIdleCallback&&"function"==typeof cancelIdleCallback||Object.freeze({didTimeout:!0,timeRemaining:()=>15});const Yq="mouseup",Gq="mousedown",Xq="mousemove",Jq="wheel",Qq="scroll";class Zq{constructor(e,t,n,i){PW(this,"_handler"),PW(this,"_node"),PW(this,"_type"),PW(this,"_options"),this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function eY(e,t,n,i){return new Zq(e,t,n,i)}function tY(e){const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof HTMLElement||e instanceof n}function nY(e,t){let n=0,i=0,r=e;for(;r&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop)&&(n+=r.offsetLeft-("BODY"!==r.tagName?r.scrollLeft:0),i+=r.offsetTop-("BODY"!==r.tagName?r.scrollTop:0),r=r.offsetParent,!r||!t||r!==t););return{top:i,left:n}}function iY(e){return"none"!==getComputedStyle(e).display}function rY(e){return sH(e)}class oY extends Tq{constructor(e=Object.create(null)){super(),PW(this,"_source"),PW(this,"_updateEvent",this._register(new xq)),PW(this,"orientation"),PW(this,"delcaredScrollOffsets"),this.orientation=e.orientation||uq.block,this.delcaredScrollOffsets=(e.scrollOffsets||[]).map((e=>{if(rY(e))return e;if(e.threshold){if(!isFinite(e.threshold))throw TypeError("Invalid threshold.");if(e.threshold<0||e.threshold>1)throw TypeError("threshold must be in the range [0, 1]")}return w({edge:dq.start,threshold:0},e)})),this.source=e.source||LW.body,this.source||nH()}get monotonical(){return!1}attachAnimation(e){super.attachAnimation(e),e.ready.then((()=>{this.applyDirtiedAnimation(e)}))}detachAnimation(e){var t;null==(t=this._updateEvent.value)||t.dispose(),super.detachAnimation(e)}get source(){return this._source}set source(e){this.source&&this._updateEvent.clear(),e&&(this._source=e,this._updateEvent.value=eY(e===LW.body?LW:e,Qq,this.tickAnimations.bind(this))),this.tickAnimations()}tickAnimations(){for(const e of this.animations)e.tick(this.currentTime),e.effect.apply()}get scrollOffsets(){return this.delcaredScrollOffsets}resolveScrollTimelineOffsets(){const e=[];let t=!0;0===this.scrollOffsets.length?(e.push(this.resolveScrollTimelineOffset("auto",t)),t=!1,e.push(this.resolveScrollTimelineOffset("auto",t))):1===this.scrollOffsets.length&&(e.push(this.resolveScrollTimelineOffset("auto",t)),t=!1);for(const n of this.scrollOffsets){const i=this.resolveScrollTimelineOffset(n,t);if(null===i)return[];e.push(i),t=!1}return e}resolveScrollTimelineOffset(e,t){return rY(e)?this.resolveContainerBasedOffset(e,t):this.resolveElementBasedOffset(e,t)}resolveContainerBasedOffset(e,t){if(!this.source||!iY(this.source)||!Hq(this.source))return null;const n=lY(this.source,this.orientation);if("auto"===e){return aY(new Kq(t?0:100,Dq.percentage),n)}if(e){return aY(function(e,t=!0){if(e instanceof zq)return e instanceof Kq?e:null;if(!t)return null;const n=e.trim().match(/^(-?[0-9]*\.?[0-9]*)(px|%)$/);if(n){const e=n[1];let t;const i=n[2];return i?"%"===i?t=Dq.percentage:"px"===i?t=Dq.px:iH():t=Dq.number,new Kq(+e,t)}return null}(e),n)}return null}resolveElementBasedOffset(e,t){const{source:n}=this;if(!n||!iY(n)||!Hq(n))return null;const{target:i}=e,r=e.threshold;if(!i||!iY(i))return null;let o=i.parentElement;for(;o!==LW.body&&!Hq(o);)o=o.parentElement;if(o!==n)return null;const{top:s,left:a}=nY(i,n);let l;const c=$q(n,this.orientation);l=e.edge===dq.start?c===uq.vertical?s+i.clientHeight:a+i.clientWidth:c===uq.vertical?s-n.clientHeight:a-n.clientWidth;const d=r*(c===uq.vertical?i.clientHeight:i.clientWidth);e.edge===dq.start?l-=d:l+=d;return l=P$(0,l,lY(n,this.orientation)),l}get effectiveScrollOffsets(){return this.resolveScrollTimelineOffsets()}get phase(){if(!this.source)return fq.inactive;if(!iY(this.source))return fq.inactive;if(!Hq(this.source))return fq.inactive;const{effectiveScrollOffsets:e}=this;if(0===e.length)return fq.inactive;const t=sY(this.source,this.orientation),n=e[0],i=e[e.length-1];(rH(n)||rH(i))&&nH();const r=this.resolveContainerBasedOffset("auto",!1);return t<n?fq.before:t>=i&&i<r?fq.after:fq.active}calculateScrollTimelineProgress(e,t=this.resolveScrollTimelineOffsets()){let n;for(n=t.length-2;n>=0&&!(t[n]<=e&&e<t[n+1]);n--);const i=t[n];return(n+(e-i)/(t[n+1]-i))*(1/(t.length-1))}get duration(){return 1}get currentTime(){const{effectiveScrollOffsets:e}=this;if(!(this.source&&iY(this.source)&&Hq(this.source)&&e.length))return null;const t=sY(this.source,this.orientation),n=e[0],i=e[e.length-1];if((rH(n)||rH(i))&&nH(),t<n)return 0;if(t>=i)return this.duration;return this.calculateScrollTimelineProgress(t)*this.duration}}function sY(e,t){const n="horizontal-tb"===getComputedStyle(e).writingMode;let i=e.scrollTop;return(t===uq.horizontal||t===uq.inline&&n||t===uq.block&&!n)&&(i=Math.abs(e.scrollLeft)),i}function aY(e,t){if(e instanceof Kq){if(e.unit===Dq.percentage)return e.value*t/100;if(e.unit===Dq.px)return e.value;throw TypeError("Unhandled unit type "+e.unit)}throw TypeError("Unsupported value type: "+typeof e)}function lY(e,t){const n=$q(e,t);return n===uq.vertical?e.scrollHeight-e.clientHeight:n===uq.horizontal?e.scrollWidth-e.clientWidth:void 0}var cY,dY;function uY(e){return 1-hY(1-e)}function hY(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function pY(e){return e}function fY(e){return function(t){return Math.pow(t,e)}}function gY(e){return function(t){return 1-Math.pow(1-t,e)}}function mY(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}}(dY=cY||(cY={})).BackIn="backIn",dY.BackOut="backOut",dY.BackInOut="backInOut",dY.BounceIn="bounceIn",dY.BounceOut="bounceOut",dY.BounceInOut="bounceInOut",dY.CircularIn="circularIn",dY.CircularOut="circularOut",dY.CircularInOut="circularInOut",dY.ElasticIn="elasticIn",dY.ElasticOut="elasticOut",dY.ElasticInOut="elasticInOut",dY.ExponentialIn="exponentialIn",dY.ExponentialOut="exponentialOut",dY.ExponentialInOut="exponentialInOut",dY.Linear="linear",dY.QuadraticIn="quadraticIn",dY.QuadraticOut="quadraticOut",dY.QuadraticInOut="quadraticInOut",dY.CubicIn="cubicIn",dY.CubicOut="cubicOut",dY.CubicInOut="cubicInOut",dY.QuarticIn="quarticIn",dY.QuarticOut="quarticOut",dY.QuarticInOut="quarticInOut",dY.QuinticIn="quinticIn",dY.QuinticOut="quinticOut",dY.QuinticInOut="quinticInOut",dY.SinusoidalIn="sinusoidalIn",dY.SinusoidalOut="sinusoidalOut",dY.SinusoidalInOut="sinusoidalInOut";const _Y=fY(2),vY=gY(2),yY=mY(2),wY=fY(3),bY=gY(3),xY=mY(3),CY=fY(4),kY=gY(4),EY=mY(4),SY=fY(5),IY=gY(5),OY=mY(5);var TY=Object.freeze(Object.defineProperty({__proto__:null,get EaseType(){return cY},backIn:function(e){const t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){const t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:uY,bounceOut:hY,bounceInOut:function(e){return e<.5?.5*uY(2*e):.5*hY(2*e-1)+.5},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){let t,n=.1;const i=.4;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=i*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},linear:pY,quadraticIn:_Y,quadraticOut:vY,quadraticInOut:yY,cubicIn:wY,cubicOut:bY,cubicInOut:xY,quarticIn:CY,quarticOut:kY,quarticInOut:EY,quinticIn:SY,quinticOut:IY,quinticInOut:OY,sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return-.5*(Math.cos(Math.PI*e)-1)}},Symbol.toStringTag,{value:"Module"}));function MY(e,t,n,i){return e<0||e>1||n<0||n>1?pY:function(r){if(r<=0){let o=0;return e>0?o=t/e:!t&&n>0&&(o=i/n),o*r}if(r>=1){let o=0;return n<1?o=(i-1)/(n-1):1===n&&e<1&&(o=(t-1)/(e-1)),1+o*(r-1)}let o,s=0,a=1;function l(e,t,n){return 3*e*(1-n)*(1-n)*n+3*t*(1-n)*n*n+n*n*n}for(;s<a;){o=(s+a)/2;const c=l(e,n,o);if(Math.abs(r-c)<1e-5)return l(t,i,o);c<r?s=o:a=o}return l(t,i,o)}}const NY={ease:MY(.25,.1,.25,1),"ease-in":MY(.42,0,1,1),"ease-out":MY(0,0,.58,1),"ease-in-out":MY(.42,0,.58,1)};function AY(e){if("linear"===e)return pY;if(Array.isArray(e)&&e.every((e=>isFinite(e)))){return MY(...e)}if(sH(e)){if(Reflect.has(TY,e))return Reflect.get(TY,e);if(Reflect.has(NY,e))return Reflect.get(NY,e)}return pY}const RY={delay:0,duration:0,easing:"linear",endDelay:0,fill:aq.auto,iterationStart:0,iterations:1,direction:sq.normal};class DY{constructor(e){PW(this,"totalDuration"),PW(this,"easingFunction"),PW(this,"delay"),PW(this,"duration"),PW(this,"easing"),PW(this,"endDelay"),PW(this,"fill"),PW(this,"iterationStart"),PW(this,"iterations"),PW(this,"direction"),PW(this,"activeDuration");const t=w(w({},RY),e);DH(t).forEach((e=>{Reflect.set(this,e,t[e])})),this.activeDuration=this.duration*this.iterations,this.easingFunction=AY(t.easing)}}function PY(e,t,n){e.style.setProperty(t,n)}function LY(e,t){e.style.removeProperty(t)}function UY(e,t){return"CSSStyleDeclaration"===e.constructor.name?e.getPropertyValue(t):e[t]}class FY{constructor(e,t,n){PW(this,"animation"),PW(this,"target"),PW(this,"effectTiming"),PW(this,"iterationProgress"),PW(this,"interpolations"),PW(this,"keyframes"),PW(this,"propertySpecificKeyframeGroups"),PW(this,"reservedStyle"),PW(this,"_cleared",!1),PW(this,"currentDirection"),PW(this,"beforeFlag"),this.target=e;const i=new DY(n);this.effectTiming=i;const r=t.reduce(((e,t)=>(DH(t).forEach((n=>{if("unit"===n)return;const i=t[n];Reflect.set(e,n,i)})),e)),{});this.keyframes=function(e,t,n){const i=t.reduce(((e,t)=>e+(isFinite(t.unit)?t.unit:1)),0);let r,o=0;const s=(e,t,n)=>{if(!r){const t=$W.get(e)||[getComputedStyle(e)];r=t[t.length-1]}let i=UY(r,t);if("transform"===t&&"none"===i)return B$(n);if(!i){const e=Wq[t]||[];for(let n=0;n<e.length;n++){const o=`${e[n]}${t}`;if(i=UY(r,o),i)break}}return i||""},a=e=>e.replace(/rgb\((\d+),\s*(\d+),\s*(\d+)\)?/g,((...e)=>{const[,t,n,i]=e;return`rgba(${t},${n},${i},1)`}));return t.reduce(((t,r)=>{const l=Object.create(null),c=Object.create(null);return DH(r).forEach((t=>{if("unit"===t)return;const n=r[t];return sH(n)?(l[t]=a(s(e,t,n)),void(c[t]=a(n))):(D$(n[0]||n[1]),Array.isArray(n)&&2===n.length?(l[t]=a(n[0]||s(e,t)),void(c[t]=a(n[1]||s(e,t)))):void nH())})),l.easing=n.easing,c.easing=n.easing,l.offset=o/i,o+=isFinite(r.unit)?r.unit:1,c.offset=o/i,t.push(l),t.push(c),t}),[])}(e,t,i),this.propertySpecificKeyframeGroups=function(e){const t=Object.create(null);for(const n of e){const e=DH(n);for(const i of e){if("offset"===i||"easing"===i||"computedOffset"===i)continue;const e={offset:n.offset,easing:n.easing,value:n[i]};Reflect.has(t,i)||(t[i]=[]),t[i].push(e)}}for(const n of DH(t)){const e=t[n];if(0!==e[0].offset||e.length>1&&1!==e[e.length-1].offset)throw new DOMException("Partial keyframes are not supported","NotSupportedError")}return t}(this.keyframes);const{interpolations:o,unhandleKeys:s}=function(e){const t=[],n=[];for(const i of DH(e)){const r=e[i];for(let e=0;e<r.length-1;e++){let o=e,s=e+1;const a=r[o].offset,l=r[s].offset;let c=a,d=l;0===e&&(c=-1/0,0===l&&(s=o)),e===r.length-2&&(d=1/0,1===a&&(o=s));const u=pH(i,r[o].value,r[s].value);u?t.push({applyFrom:c,applyTo:d,startOffset:r[o].offset,endOffset:r[s].offset,easingFunction:AY(r[o].easing),property:i,interpolation:u}):n.push(i)}}return t.sort(((e,t)=>e.startOffset-t.startOffset)),{interpolations:t,unhandleKeys:n}}(this.propertySpecificKeyframeGroups);this.interpolations=o,this.reservedStyle=s.map((e=>{const t=r[e];return{key:e,value:aH(t)?t[0]:t}}))}getTiming(){return this.effectTiming}interpolate(){if(Nq(this.iterationProgress)){const{iterationProgress:e}=this;for(const t of this.interpolations)if(e>=t.applyFrom&&e<t.applyTo){const n=e-t.startOffset,i=t.endOffset-t.startOffset,r=0===i?0:t.easingFunction(n/i),o=t.interpolation(r);PY(this.target,t.property,o);const s=Wq[t.property];s&&s.length>0&&s.forEach((e=>{PY(this.target,`${e}${t.property}`,o)}))}for(const t of this.reservedStyle)PY(this.target,t.key,t.value)}else{for(const e of DH(this.propertySpecificKeyframeGroups))LY(this.target,e);for(const e of DH(this.reservedStyle))LY(this.target,e)}}get localTime(){return this.animation?this.animation.currentTime:null}get endTime(){return this.effectTiming.delay+this.effectTiming.activeDuration+this.effectTiming.endDelay}get phase(){const{localTime:e}=this;if(Mq(e))return fq.inactive;const{endTime:t}=this,{delay:n,activeDuration:i}=this.effectTiming;return n>=0&&e<Math.min(n,t)||n<0&&e<Math.abs(n)?fq.before:n>=0&&e>Math.min(n+i,t)?fq.after:fq.active}inPlay(){return this.phase===fq.active&&this.animation&&this.animation.playState!==mq.finished}current(){return this.inPlay()||this.animation&&this.animation.playbackRate>0&&this.phase===fq.before||this.animation&&this.animation.playbackRate<0&&this.phase===fq.after}get inEffect(){return Nq(this.activeTime)}get activeTime(){const{phase:e,localTime:t}=this,{fill:n,activeDuration:i,delay:r}=this.effectTiming;return e===fq.before?n===aq.backwards||n===aq.both?Math.max(t-r,0):null:e===fq.active?t-r:e===fq.after?n===aq.forwards||n===aq.both?Math.max(Math.min(t-r,i),0):null:e===fq.inactive?null:void nH()}get iterationDuration(){return this.effectTiming.duration}get iterationCount(){return this.effectTiming.iterations}get iterationStart(){return this.effectTiming.iterationStart}get activeDuration(){return this.effectTiming.activeDuration}get overallProgress(){const{activeTime:e,iterationDuration:t}=this;if(Mq(e))return null;let n;return n=0===t?this.phase===fq.before?0:this.iterationCount:e/t,n+this.iterationStart}get simpleIterationProgress(){const{overallProgress:e}=this;if(Mq(e))return null;let t;t=e===1/0?this.iterationStart%1:e%1;const{phase:n,activeTime:i,activeDuration:r,iterationCount:o}=this;return 0!==t||n!==fq.active&&n!==fq.after||i!==r||0===o||(t=1),t}get currentIteration(){const{activeTime:e}=this;return Mq(e)?null:this.phase===fq.after&&this.iterationCount===1/0?1/0:1===this.simpleIterationProgress?Math.floor(this.overallProgress)-1:Math.floor(this.overallProgress)}get playbackDirection(){return this.effectTiming.direction}get directedProgress(){const{simpleIterationProgress:e}=this;if(Mq(e))return null;let t=this.playbackDirection;if(this.playbackDirection!==sq.normal&&this.playbackDirection!==sq.reverse){let e=this.currentIteration;this.playbackDirection===sq["alternate-reverse"]&&(e+=1),t=e===1/0||e%2==0?sq.normal:sq.reverse}return this.currentDirection=t,t===sq.normal?e:1-e}get transformedProgress(){const{directedProgress:e,currentDirection:t,phase:n}=this;if(Mq(e))return null;const i=t===sq.normal,r=n===fq.before&&!0===i||n===fq.after&&!1===i;return this.beforeFlag=r,e}apply(){const{localTime:e}=this;if(!Mq(e))return this._cleared||(this.iterationProgress=this.transformedProgress,this.interpolate()),!rH(this.iterationProgress)}clear(){this.iterationProgress=null,this._cleared=!0,this.interpolate()}}function BY(e,t){return(t||document).querySelector("."+e)}const jY=class{constructor(e){PW(this,"element"),PW(this,"next"),PW(this,"prev"),this.element=e,this.next=jY.Undefined,this.prev=jY.Undefined}};let VY=jY;PW(VY,"Undefined",new jY(void 0));class zY{constructor(){PW(this,"_first",VY.Undefined),PW(this,"_last",VY.Undefined),PW(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===VY.Undefined}clear(){this._first=VY.Undefined,this._last=VY.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new VY(e);if(this._first===VY.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==VY.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==VY.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==VY.Undefined&&e.next!==VY.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===VY.Undefined&&e.next===VY.Undefined?(this._first=VY.Undefined,this._last=VY.Undefined):e.next===VY.Undefined?(this._last=this._last.prev,this._last.next=VY.Undefined):e.prev===VY.Undefined&&(this._first=this._first.next,this._first.prev=VY.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==VY.Undefined;)yield e.element,e=e.next}}let KY,WY,HY,$Y=!1,qY=!1,YY="en";const GY="object"==typeof self?self:"object"==typeof global?global:{};let XY;void 0!==GY.vscode&&void 0!==GY.vscode.process?XY=GY.vscode.process:"undefined"!=typeof process&&(XY=process);const JY="string"==typeof(null==(u=null==XY?void 0:XY.versions)?void 0:u.electron)&&"renderer"===(null==XY?void 0:XY.type);if(JY&&(null==XY||XY.sandboxed),"object"!=typeof navigator||JY)if("object"==typeof XY){XY.platform,XY.platform,$Y="linux"===XY.platform,$Y&&XY.env.SNAP&&XY.env.SNAP_REVISION,XY.env.CI||XY.env.BUILD_ARTIFACTSTAGINGDIRECTORY,KY="en",YY="en";const e=XY.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];KY=t.locale,YY=n||"en",WY=t._translationsConfigFile}catch(f8){}}else console.error("Unable to resolve platform.");else HY=navigator.userAgent,HY.indexOf("Windows"),HY.indexOf("Macintosh"),(HY.indexOf("Macintosh")>=0||HY.indexOf("iPad")>=0||HY.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,$Y=HY.indexOf("Linux")>=0,qY=!0,KY=navigator.language,YY=KY;var QY;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(QY||(QY={})),qY&&GY.importScripts;const ZY=HY,eG=YY;var tG,nG;!function(e){e.value=function(){return eG},e.isDefaultVariant=function(){return 2===eG.length?"en"===eG:eG.length>=3&&("e"===eG[0]&&"n"===eG[1]&&"-"===eG[2])},e.isDefault=function(){return"en"===eG}}(tG||(tG={})),(()=>{if("function"==typeof GY.postMessage&&!GY.importScripts){const e=[];GY.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),GY.postMessage({vscodeScheduleAsyncWork:i},"*")}}})(),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(nG||(nG={}));const iG=!!(ZY&&ZY.indexOf("Chrome")>=0);ZY&&ZY.indexOf("Firefox"),!iG&&ZY&&ZY.indexOf("Safari"),ZY&&ZY.indexOf("Edg/"),ZY&&ZY.indexOf("Android");const rG=GY.performance&&"function"==typeof GY.performance.now;class oG{constructor(e){PW(this,"_highResolution"),PW(this,"_startTime"),PW(this,"_stopTime"),this._highResolution=rG&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new oG(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?GY.performance.now():Date.now()}}const sG=new class{constructor(){PW(this,"unexpectedErrorHandler"),PW(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function aG(e){(function(e){if(e instanceof lG)return!0;return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message})(e)||sG.onUnexpectedError(e)}class lG extends Error{constructor(){super("Canceled"),this.name=this.message}}var cG;!function(e){function t(e){return(t,n=null,i)=>{let r=!1;const o=e((e=>{if(!r)return o?o.dispose():r=!0,t.call(n,e)}),null,i);return r&&o.dispose(),o}}function n(e){let t;const n=new fG({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}e.None=()=>bq.None,e.once=t,e.map=function(e,t){return n(((n,i=null,r)=>e((e=>n.call(i,t(e))),null,r)))},e.filter=function(e,t){return n(((n,i=null,r)=>e((e=>t(e)&&n.call(i,e)),null,r)))},e.snapshot=n,e.toPromise=function(e){return new Promise((n=>t(e)(n)))}}(cG||(cG={}));const dG=class{constructor(e){PW(this,"_name"),PW(this,"_stopWatch"),PW(this,"_listenerCount",0),PW(this,"_invocationCount",0),PW(this,"_elapsedOverall",0),this._name=`${e}_${dG._idPool++}`}start(e){this._stopWatch=new oG(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let uG=dG;PW(uG,"_idPool",0);class hG{constructor(e){this.value=e}static create(){var e;return new hG(null!=(e=(new Error).stack)?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class pG{constructor(e,t,n){PW(this,"subscription",new Cq),this.callback=e,this.callbackThis=t,this.stack=n}invoke(e){this.callback.call(this.callbackThis,e)}}class fG{constructor(e){var t;PW(this,"_options"),PW(this,"_leakageMon"),PW(this,"_perfMon"),PW(this,"_disposed",!1),PW(this,"_event"),PW(this,"_deliveryQueue"),PW(this,"_listeners"),this._options=e,this._leakageMon=void 0,this._perfMon=(null==(t=this._options)?void 0:t._profName)?new uG(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(),null==(n=null==(t=this._options)?void 0:t.onLastListenerRemove)||n.call(t),null==(i=this._leakageMon)||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,r,o;this._listeners||(this._listeners=new zY);const s=this._listeners.isEmpty();let a,l;s&&(null==(i=this._options)?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(l=hG.create(),a=this._leakageMon.check(l,this._listeners.size+1));const c=new pG(e,t,l),d=this._listeners.push(c);s&&(null==(r=this._options)?void 0:r.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null==(o=this._options)?void 0:o.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,t);const u=c.subscription.set((()=>{if(a&&a(),!this._disposed&&(d(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}));return n instanceof wq?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new zY);for(const t of this._listeners)this._deliveryQueue.push([t,e]);for(null==(t=this._perfMon)||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{e.invoke(t)}catch(f8){aG(f8)}}null==(n=this._perfMon)||n.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}class gG extends bq{constructor(e,t,n){super(),PW(this,"_event",this._register(new fG)),PW(this,"listeners",this._register(new wq)),PW(this,"firedCount",0),this.model=e,this.target=t,this.count=n}deactivate(){this.listeners.clear()}get event(){return this._event.event}start(e){const{running:t,reversingShorteningFactor:n}=this;t&&t.playState!==mq.finished&&t.pause();const i=function(e,t=1,n){const i=RG(e.timeline),r=RH(e.effects);n&&Reflect.set(r.timing,"fill",n);const o=DG(r,t),s=new OG(o,i);return QW.set(s,e),s}(this.model,n,e);this.running=i,t&&(t.cancel(),this.completed=t),i.ready.then((()=>{i.play(),this.fire(i)}))}fire(e){this.firedCount<this.count&&(this._event.fire({trigger:this,animation:e}),e.finished.finally((()=>{this.firedCount++,this.running===e&&(this.running=void 0,this.completed=e),this.firedCount>=this.count&&this.deactivate()})))}}const mG=new class extends bq{constructor(){super(),PW(this,"_document"),PW(this,"_moveListener"),PW(this,"_eventEnterEmitter",new fG),PW(this,"_eventLeaveEmitter",new fG),PW(this,"_enterTargets",new Set),PW(this,"_leaveTargets",new Set),PW(this,"_prevHoverTargets",new Set),this._document=document}hasEvent(){return void 0!==this._moveListener}addEvent(){this._moveListener||(this._moveListener=this._register(eY(this._document,Xq,this.handleMove.bind(this))))}removeEvent(){this._moveListener&&(this._moveListener.dispose(),this._moveListener=void 0)}provideDocument(e){this._document=e}dispose(){super.dispose(),this.removeEvent(),this._enterTargets.clear(),this._leaveTargets.clear(),this._eventEnterEmitter.dispose(),this._eventLeaveEmitter.dispose()}handleMove(e){const t=this._prevHoverTargets,n=new Set(e.composedPath().filter(tY));for(const i of this._enterTargets)!t.has(i)&&n.has(i)&&this._eventEnterEmitter.fire({target:i});for(const i of this._leaveTargets)t.has(i)&&!n.has(i)&&this._eventLeaveEmitter.fire({target:i});this._prevHoverTargets=n}addEnterTarget(e,t){return this._enterTargets.add(e),this.handleBindTargetsChange(),this._eventEnterEmitter.event((n=>{n.target===e&&t()}))}addLeaveTarget(e,t){return this._leaveTargets.add(e),this.handleBindTargetsChange(),this._eventLeaveEmitter.event((n=>{n.target===e&&t()}))}removeEnterTarget(e){this._enterTargets.delete(e),this.handleBindTargetsChange()}removeLeaveTarget(e){this._leaveTargets.delete(e),this.handleBindTargetsChange()}handleBindTargetsChange(){this._enterTargets.size+this._leaveTargets.size<=0?this.removeEvent():this.addEvent()}};class _G extends gG{constructor(e,t,n,i){super(e,t,n),PW(this,"triggerTarget"),this.type=i;const{effects:r}=this.model;this.triggerTarget=BY(r.targetId,LW)}activate(){this.type===pq.mouseenter&&this.listeners.add(mG.addEnterTarget(this.target,(()=>{this.addComputedStyle(),this.start(),HW.set(this.triggerTarget,pq.mouseenter)}))),this.type===pq.mouseleave&&this.listeners.add(mG.addLeaveTarget(this.target,(()=>{this.deleteClickComputeStyle(),this.start(this.checkFillMode()),this.deleteComputeStyle(),HW.set(this.triggerTarget,pq.mouseleave)})))}deactivate(){super.deactivate(),this.type===pq.mouseenter&&mG.removeEnterTarget(this.target),this.type===pq.mouseleave&&mG.removeLeaveTarget(this.target),this.deleteComputeStyle()}checkFillMode(){if(zW.has(this.triggerTarget)){if(($W.get(this.triggerTarget)||[]).length>1)return aq.both}return null}addComputedStyle(){if(zW.has(this.triggerTarget)){const e=this.model.id,t=$W.get(this.triggerTarget)||[];if(t.some((t=>t.animationId===e)))return;const n=qq(getComputedStyle(this.triggerTarget));$W.set(this.triggerTarget,[...t,b(w({},n),{animationId:e,triggerType:pq.mouseenter})])}}deleteComputeStyle(){if($W.has(this.triggerTarget)){const e=$W.get(this.triggerTarget)||[];if(e.some((e=>e.triggerType===pq.mouseenter))){const t=e.filter((e=>e.triggerType!==pq.mouseenter));t.length<=0?$W.delete(this.triggerTarget):$W.set(this.triggerTarget,t)}}}deleteClickComputeStyle(){if($W.has(this.triggerTarget)){const e=$W.get(this.triggerTarget)||[];if(e.some((e=>e.triggerType===pq.mousedown))){const t=e.filter((e=>e.triggerType!==pq.mousedown));t.length<=0?$W.delete(this.triggerTarget):$W.set(this.triggerTarget,t)}}}get running(){return YW.get(this.model)}get completed(){return GW.get(this.model)}set running(e){YW.set(this.model,e)}set completed(e){GW.set(this.model,e)}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==mq.finished&&(t.pause(),e=P$(0,t.effect.transformedProgress,1)),e}}var vG,yG,wG,bG,xG,CG;(yG=vG||(vG={}))[yG.NONE=0]="NONE",yG[yG.ENTER=1]="ENTER";class kG extends gG{constructor(e,t,n,i,r,o,s,a){super(e,t,n),PW(this,"prevScrollY"),PW(this,"fireOnActive",!1),PW(this,"targetStatus",0),this.animationTarget=i,this.orientation=r,this.edge=o,this.threshold=s,this.phase=a}activate(e=!1){this.activeCheck(),this.listeners.add(eY(UW,Jq,this.handleScroll.bind(this))),this.fireOnActive=e,e&&this.handleScroll()}deactivate(){this.listeners.clear()}checkScroll(){const e=UW.scrollY,t=e-this.prevScrollY;this.prevScrollY=e;const{edge:n,threshold:i,target:r}=this;let o=r.parentElement;for(;o!==LW.body&&!Hq(o);)o=o.parentElement;const s=$q(o,this.orientation);let a;n===dq.start?s===uq.vertical?a=nY(r).top+r.clientHeight:iH():s===uq.vertical?a=nY(r).top-UW.innerHeight:iH();const l=i*(s===uq.vertical?r.clientHeight:r.clientWidth);return n===dq.start?a-=l:a+=l,{scrollOffset:a,preOffsetY:t}}handleScroll(){const{phase:e}=this,t=UW.scrollY,{scrollOffset:n,preOffsetY:i}=this.checkScroll();t>n&&(0===this.targetStatus&&e===hq.enter&&i>=0&&this.canStart()&&this.start(),0===this.targetStatus&&(this.targetStatus=1)),t<n&&(1===this.targetStatus&&e===hq.exit&&i>=0&&this.canStart()&&this.start(),1===this.targetStatus&&(this.targetStatus=0))}activeCheck(){const{phase:e}=this,t=UW.scrollY,{scrollOffset:n}=this.checkScroll();t>n&&(e===hq.enter?this.targetStatus=0:this.targetStatus=1),t<n&&(e===hq.exit?this.targetStatus=0:this.targetStatus=1),this.handleScroll()}get running(){return XW.get(this.model)}get completed(){return JW.get(this.model)}set running(e){XW.set(this.model,e)}set completed(e){JW.set(this.model,e)}canStart(){const{phase:e}=this,{running:t,completed:n}=this,{target:i,model:r}=this;if(e===hq.enter){if(QW.get(t)===r)return!1;return!(BW.get(i)||[]).filter((e=>e!==r)).some((e=>QW.get(n)===e))}if(e===hq.exit){if(QW.get(t)===r)return!1;const e=BW.get(i)||[];if(!e.length)return!0;if(e.some((e=>QW.get(n)===e)))return!0}return!1}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==mq.finished&&this.phase===hq.enter&&(t.pause(),e=P$(0,t.effect.transformedProgress,1)),e}}(bG=wG||(wG={})).play="play",bG.pause="pause",(CG=xG||(xG={})).pending="pending",CG.resolved="resolved",CG.rejected="rejected";class EG{constructor(){PW(this,"promise"),PW(this,"state",xG.pending),PW(this,"nativeResolve"),PW(this,"nativeReject"),this.state=xG.pending,this.nativeResolve=this.nativeReject=null,this.promise=new Promise(((e,t)=>{this.nativeResolve=e,this.nativeReject=t}))}resolve(e){this.state=xG.resolved,this.nativeResolve(e)}reject(e){this.state=xG.rejected,this.promise.catch((()=>{})),this.nativeReject(e)}}const SG=[];let IG=!1;class OG extends bq{constructor(e,t=new Rq){super(),PW(this,"effect"),PW(this,"_timeline"),PW(this,"playbackRate",1),PW(this,"currentReadyPromise"),PW(this,"initialCurrentReadyPromise"),PW(this,"currentFinishedPromise"),PW(this,"_startTime"),PW(this,"holdTime"),PW(this,"readyTime"),PW(this,"holdPhase"),PW(this,"previousCurrentTime"),PW(this,"pendingTasks",new Map),PW(this,"pendingFinishNotificationSteps"),PW(this,"pendingPlaybackRate"),PW(this,"resetCurrentTimeOnResume",!1),PW(this,"_onfinish",this._register(new fG)),PW(this,"_oncancel",this._register(new fG)),PW(this,"_onremove",this._register(new fG)),this.initialCurrentReadyPromise=Promise.resolve(this),this.currentFinishedPromise=new EG,this.effect=e,e.animation=this,this.timeline=t}get timeline(){return this._timeline}set timeline(e){const t=this.timeline;if(e===t)return;const n=this.playState,i=this.currentTime,r=this.timeline?this.timeline.phase:null;let o;o=Mq(i)?null:0===this.endTime?0:i/this.endTime;const s=t instanceof oY,a=e&&e instanceof oY;this._timeline&&this._timeline.detachAnimation(this),this._timeline=e;const l=this.pending;if(this.resetCurrentTimeOnResume=!1,a){this.applyPendingPlaybackRate();const e=this.playbackRate>=0?0:this.effectEnd;n===mq.running||n===mq.finished?this.startTime=e:n===mq.paused&&(Nq(o)?(this.resetCurrentTimeOnResume=!0,this.startTime=null,this.holdTime=o*this.endTime,this.holdPhase=r):this.startTime=e),l&&(this.currentReadyPromise&&this.currentReadyPromise.state!==xG.resolved||(this.currentReadyPromise=new EG))}else s&&Nq(o)&&(this.currentTime=o*this.endTime);Nq(this.startTime)&&(this.holdTime=null,this.holdPhase=null),this.updateFinishedState(!1,!1),this.timeline&&this.timeline.attachAnimation(this)}get ready(){return this.currentReadyPromise?this.currentReadyPromise.promise:this.initialCurrentReadyPromise}get finished(){return this.currentFinishedPromise.promise}get onfinish(){return this._onfinish.event}get oncancel(){return this._oncancel.event}get onremove(){return this._onremove.event}get currentTime(){return Nq(this.holdTime)?this.holdTime:!this.timeline||this.timeline.phase===fq.inactive||Mq(this.startTime)?null:(this.timeline.currentTime-this.startTime)*this.playbackRate}silentlySetTheCurrentTime(e){if(Mq(e)&&Nq(this.currentTime))throw new TypeError;Nq(this.holdTime)||Mq(this.startTime)||!this.timeline||this.timeline.phase===fq.inactive||0===this.playbackRate?this.holdTime=e:this.startTime=this.timeline.currentTime-e/this.playbackRate,this.timeline&&this.timeline.phase!==fq.inactive||(this.startTime=null),this.previousCurrentTime=null}set currentTime(e){this.silentlySetTheCurrentTime(e),this.hasPendingTask(wG.pause)&&(this.holdTime=e,this.applyPendingPlaybackRate(),this.startTime=null,this.cancelPendingTask(wG.pause),this.currentReadyPromise.resolve(this)),this.updateFinishedState(!0,!1)}calculateCurrentTime(){const e=this.timeline.currentTime;return Mq(e)||Mq(this.startTime)?null:(e-this.startTime)*this.playbackRate}updateFinishedState(e,t){if(!this.timeline)return;const n=e?this.currentTime:this.calculateCurrentTime();Nq(n)&&Nq(this.startTime)&&!this.pending&&(this.playbackRate>0&&n>=this.effectEnd?e?this.holdTime=n:Nq(this.previousCurrentTime)?this.holdTime=Math.max(this.previousCurrentTime,this.effectEnd):this.holdTime=this.effectEnd:this.playbackRate<0&&n<=0?e?this.holdTime=n:Nq(this.previousCurrentTime)?this.holdTime=Math.min(this.previousCurrentTime,0):this.holdTime=0:0!==this.playbackRate&&this.timeline&&(e&&Nq(this.holdTime)&&(this.startTime=this.timeline.currentTime-this.holdTime/this.playbackRate),this.holdTime=null)),this.previousCurrentTime=this.currentTime;const i=this.playState===mq.finished;let r;var o;i&&(r=()=>{this.playState===mq.finished&&(this.currentFinishedPromise.resolve(this),this.pendingFinishNotificationSteps=null)},t?this.pendingFinishNotificationSteps&&(!function(e){const t=SG.indexOf(e);t>-1&&SG.splice(t,1)}(this.pendingFinishNotificationSteps),this.pendingFinishNotificationSteps=null,r()):this.pendingFinishNotificationSteps||(this.pendingFinishNotificationSteps=r,o=r,SG.push(o),IG||queueMicrotask((()=>{IG=!1;for(const e of SG)e();SG.length=0})))),!i&&this.currentFinishedPromise&&this.currentFinishedPromise.state===xG.resolved&&(this.currentFinishedPromise=new EG)}hasPendingTask(e){return this.pendingTasks.has(e)}queuePendingTask(e,t){this.pendingTasks.set(e,t)}cancelPendingTask(e){this.pendingTasks.delete(e)}runPendingTask(e){const t=this.pendingTasks.get(e);this.pendingTasks.delete(e),"function"==typeof t&&t()}get startTime(){return this._startTime}set startTime(e){Mq(this.timeline&&this.timeline.phase!==fq.inactive?this.timeline.currentTime:null)&&Nq(this.startTime)&&(this.holdTime=null);const t=this.currentTime;this.applyPendingPlaybackRate(),this._startTime=e,Nq(this.startTime)?0!==this.playbackRate&&(this.holdTime=null):this.holdTime=t,this.pending&&(this.cancelPendingTask(wG.pause),this.cancelPendingTask(wG.play),this.currentReadyPromise.resolve(this)),this.updateFinishedState(!0,!1)}applyPendingPlaybackRate(){this.pendingPlaybackRate&&(this.playbackRate=this.pendingPlaybackRate,this.pendingPlaybackRate=null)}get playState(){const e=this.currentTime;if(Mq(this.currentTime)&&Mq(this.startTime)&&!this.pending)return mq.idle;if(this.hasPendingTask(wG.pause)||Mq(this.startTime)&&!this.hasPendingTask(wG.play))return mq.paused;if(Nq(e)){if(this.playbackRate>0&&e>=this.effectEnd)return mq.finished;if(this.playbackRate<0&&e<=0)return mq.finished}return mq.running}get effectEnd(){const e=this.effect.getTiming(),t=e.delay+e.endDelay+e.iterations*e.duration;return Math.max(0,t)}get startDelay(){return this.effect.getTiming().delay}get endTime(){return Math.max(this.startTime+this.startDelay+this.activeDuration+this.endDelay,0)}get activeDuration(){return this.effect.getTiming().activeDuration}get endDelay(){return this.effect.getTiming().endDelay}get pending(){return this.hasPendingTask(wG.play)||this.hasPendingTask(wG.pause)}get effectivePlaybackRate(){return this.pendingPlaybackRate||this.playbackRate}createReadyPromise(){this.currentReadyPromise=new EG}resetPendingTasks(){this.pending&&(this.hasPendingTask(wG.play)&&this.cancelPendingTask(wG.play),this.hasPendingTask(wG.pause)&&this.cancelPendingTask(wG.pause),this.applyPendingPlaybackRate(),this.currentReadyPromise.reject(new DOMException("AbortError","AbortError")),this.currentReadyPromise=new EG)}cancel(){this.playState!==mq.idle&&(this.resetPendingTasks(),this.currentFinishedPromise.reject(new DOMException("AbortError","AbortError")),this.currentFinishedPromise=new EG),this.holdTime=null,this.startTime=null}finish(){if(0===this.effectivePlaybackRate||this.effectivePlaybackRate>0&&this.effectEnd===1/0)throw new DOMException("","InvalidStateError");this.applyPendingPlaybackRate();const e=this.playbackRate>0?this.effectEnd:0;this.silentlySetTheCurrentTime(e),Mq(this.startTime)&&this.timeline&&(this.startTime=this.timeline.currentTime-e/this.playbackRate),this.hasPendingTask(wG.pause)&&Nq(this.startTime)&&(this.holdTime=null,this.cancelPendingTask(wG.pause),this.currentReadyPromise.resolve(this)),this.hasPendingTask(wG.play)&&Nq(this.startTime)&&(this.cancelPendingTask(wG.play),this.currentReadyPromise.resolve(this)),this.updateFinishedState(!0,!0)}play(e=!0){const t=this.hasPendingTask(wG.pause);let n=!1,i=null;const r=!this.timeline.monotonical,o=this.currentTime;if(this.effectivePlaybackRate>0&&e&&(Mq(o)||o<0||o>=this.effectEnd))i=0;else if(this.effectivePlaybackRate<0&&e&&(Mq(o)||o<=0||o>this.effectEnd)){if(this.effectEnd===1/0)throw new DOMException("","InvalidStateError");i=this.effectEnd}else 0===this.effectivePlaybackRate&&Mq(o)&&(i=0);if(Nq(i)&&(r?(this.startTime=i,this.holdTime=null,this.applyPendingPlaybackRate()):this.holdTime=i),Nq(this.holdTime)&&(this.startTime=null),this.pending&&(this.cancelPendingTask(wG.pause),this.cancelPendingTask(wG.play),n=!0),Mq(this.holdTime)&&null===i&&!t&&null===this.pendingPlaybackRate)return;const s=this.ready;!1!==n||this.pending||this.createReadyPromise(),this.queuePendingTask(wG.play,(()=>{Mq(this.startTime)&&Mq(this.holdTime)&&nH();const e=this.readyTime;if(Nq(this.holdTime)){let t;this.applyPendingPlaybackRate(),t=this.playbackRate?e-this.holdTime/this.playbackRate:e,this.startTime=t,0!==this.playbackRate&&(this.holdTime=null)}else if(Nq(this.startTime)&&Nq(this.pendingPlaybackRate)){const t=(e-this.startTime)*this.playbackRate;let n;this.applyPendingPlaybackRate(),0===this.playbackRate&&(this.holdTime=t),n=0!==this.playbackRate?e-t/this.playbackRate:e,this.startTime=n}this.currentReadyPromise.state===xG.pending&&this.currentReadyPromise.resolve(this),this.updateFinishedState(!1,!1),this.timeline.applyDirtiedAnimation(this)})),s.then((()=>{this.readyTime=this.timeline.currentTime,this.runPendingTask(wG.play)}))}pause(){if(this.hasPendingTask(wG.pause))return;if(this.playState===mq.paused)return;let e=null;const t=!this.timeline.monotonical;if(Mq(this.currentTime))if(this.playbackRate>=0)e=0;else{if(this.effectEnd===1/0)throw new DOMException("","InvalidStateErro");e=this.effectEnd}Nq(e)&&(t?this.startTime=e:this.holdTime=e);let n=!1;this.hasPendingTask(wG.play)&&(this.cancelPendingTask(wG.play),n=!0),n||this.pending||this.createReadyPromise(),setTimeout((()=>{this.runPendingTask(wG.pause)})),this.queuePendingTask(wG.pause,(()=>{const e=this.timeline.currentTime;Nq(this.startTime)&&Mq(this.holdTime)&&(this.holdTime=(e-this.startTime)*this.playbackRate),this.applyPendingPlaybackRate(),this.startTime=null,this.currentReadyPromise.resolve(this),this.updateFinishedState(!1,!1),this.timeline.applyDirtiedAnimation(this)}))}tick(e){if(Mq(e))return;const t=this.playState;t!==mq.running&&t!==mq.finished||(this.currentTime=(e-this.startTime)*this.playbackRate,t===mq.finished&&0!==this.effectivePlaybackRate&&(this.holdTime=null),this.updateFinishedState(!1,!1))}}class TG extends gG{constructor(e,t,n,i){super(e,t,n),PW(this,"triggerTarget"),this.type=i;const{effects:r}=this.model;this.triggerTarget=BY(r.targetId,LW)}activate(){this.type===pq.mousedown&&this.listeners.add(eY(this.target,Gq,(()=>{this.addComputeStyle(),this.start(),HW.set(this.triggerTarget,pq.mousedown)}))),this.type===pq.mouseup&&this.listeners.add(eY(this.target,Yq,(()=>{HW.set(this.triggerTarget,pq.mouseleave),this.start(this.checkFillMode()),HW.set(this.triggerTarget,pq.mouseup)})))}deactivate(){super.deactivate(),this.deleteComputeStyle()}checkFillMode(){if(WW.has(this.triggerTarget)){if(($W.get(this.triggerTarget)||[]).length>1)return aq.both}return null}addComputeStyle(){const e=WW.has(this.triggerTarget),t=HW.get(this.triggerTarget)===pq.mouseup;if(e&&!t){const e=this.model.id,t=$W.get(this.triggerTarget)||[];if(t.some((t=>t.animationId===e)))return;const n=qq(getComputedStyle(this.triggerTarget));$W.set(this.triggerTarget,[...t,b(w({},n),{animationId:e,triggerType:pq.mousedown})])}}deleteComputeStyle(){if($W.has(this.triggerTarget)){const e=$W.get(this.triggerTarget)||[];if(e.some((e=>e.triggerType===pq.mousedown))){const t=e.filter((e=>e.triggerType!==pq.mousedown));t.length<=0?$W.delete(this.triggerTarget):$W.set(this.triggerTarget,t)}}}get running(){return YW.get(this.model)}get completed(){return GW.get(this.model)}set running(e){YW.set(this.model,e)}set completed(e){GW.set(this.model,e)}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==mq.finished&&(t.pause(),e=P$(0,t.effect.transformedProgress,1)),e}}class MG extends gG{constructor(e,t,n){super(e,t,n)}activate(){this.start()}deactivate(){super.deactivate()}get running(){return YW.get(this.model)}get completed(){return GW.get(this.model)}set running(e){YW.set(this.model,e)}set completed(e){GW.set(this.model,e)}get reversingShorteningFactor(){let e=1;const{running:t}=this;return t&&t.playState!==mq.finished&&(t.pause(),e=P$(0,t.effect.transformedProgress,1)),e}}function NG(e){return!Reflect.has(e,"type")}function AG(e){var t,n,i,r,o,s,a,l;const{trigger:c,effects:d}=e;if(NG(d)||iH(),c){const{type:u}=c,h=BY(d.targetId,LW);switch(u){case pq.mouseenter:case pq.mouseleave:{const n=new _G(e,BY(c.targetId,LW),null!=(t=c.count)?t:1/0,u);FW.set(e,n),n.type===pq.mouseenter&&VW.set(h,e),n.type===pq.mouseleave&&zW.set(h,e),n.activate();break}case pq.mousedown:case pq.mouseup:{const t=new TG(e,BY(c.targetId,LW),null!=(n=c.count)?n:1/0,u);FW.set(e,t),t.type===pq.mousedown&&KW.set(h,e),t.type===pq.mouseup&&WW.set(h,e),t.activate();break}case pq.intersection:{const t=new kG(e,BY(c.targetId,LW),null!=(i=c.count)?i:1/0,h,null!=(r=c.intersectionOrientation)?r:uq.block,null!=(o=c.intersectionEdge)?o:dq.start,null!=(s=c.intersectionThreshold)?s:0,null!=(a=c.intersectionPhase)?a:hq.enter);FW.set(e,t),t.phase===hq.enter?(BW.has(h)||BW.set(h,[]),BW.get(h).push(e)):(jW.has(h)||jW.set(h,[]),jW.get(h).push(e));break}case pq.load:case pq.loadScroll:{const t=new MG(e,BY(c.targetId,LW),null!=(l=c.count)?l:1/0);FW.set(e,t),BW.has(h)||BW.set(h,[]),BW.get(h).push(e);break}}}else iH()}function RG(e){let t;if(e){const n=[];if(e.scrollOffsets)for(const t of e.scrollOffsets)if(rY(t))n.push(t);else{const e=BY(t.target,LW);n.push({target:e,threshold:t.threshold,edge:t.edge})}const i={source:BY(e.source,LW),orientation:e.orientation,scrollOffsets:n};t=new oY(i)}else t=new Rq;return t}function DG(e,t=1){NG(e)||iH();const n=new DY(e.timing),i=RH(e.timing);return 1!==t&&n.activeDuration!==1/0&&(i.delay=n.delay*t,i.duration=n.duration*t,i.endDelay=n.endDelay*t),new FY(BY(e.targetId,LW),e.effect,i)}const PG=(e,t)=>{const n=((e,t)=>e.map((e=>{const{triggerId:n}=e,i=t.find((e=>e.id===n));return b(w({},e),{trigger:i})})).filter((e=>!!e.trigger)))(e,t);mG.provideDocument(LW),mG.hasEvent()&&mG.removeEvent(),function(e){for(const t of e)AG(t);for(const t of BW.values())for(const e of t){Reflect.set(window,"enter",e);const t=FW.get(e);t&&t.activate(!0)}for(const t of jW.values())for(const e of t){Reflect.set(window,"exit",e);const t=FW.get(e);t&&t.activate()}}(n)},LG=new Map,UG=new Set,FG=e=>{const{targetId:t}=e.effects;return t?BY(t,LW):null},BG=e=>{const t=RG(e.timeline),n=FG(e);n&&UG.add(n);const i=DG(e.effects,1);return new OG(i,t)},jG=(e,t,n)=>{let i=0;const r=new Set;for(const s of e){const a=LG.get(s);a&&ZW(a);const l=BG(s);LG.set(s,l);const c=FG(s);r.add(c),l.ready.then((()=>{l.play(),l.finished.finally((()=>{const{timeline:r}=l;r instanceof oY||r instanceof DocumentTimeline||(ZW(l),LG.delete(s),t&&o()),i++,i>=e.length&&(null==n||n())}))}))}const o=()=>{if(!(r.size<=0)){for(const e of r)eH(e),e&&UG.delete(e);$W.clear()}};return o},VG=e=>{Array.from(LG.values()).forEach(ZW),Array.from(UG).forEach(eH),$W.clear(),UG.clear(),null==e||e()};var zG;zG=()=>{const e=document.querySelector('[type="application/interaction+json"]');if(!e)return;const t=JSON.parse(e.textContent),{animations:n=[],triggers:i=[]}=t;PG(n,i)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),zG()})):zG(),q.t("w.trigger.intersection"),q.t("w.trigger.hover"),q.t("w.trigger.press"),q.t("w.trigger.scroll");const KG=[{type:Xn.intersection,title:"w.trigger.intersection"},{type:Xn.mouseenter,title:"w.trigger.hover"},{type:Xn.mousedown,title:"w.trigger.press"},{type:"divider"},{type:Xn.loadScroll,title:"w.trigger.scroll"}];var WG,HG,$G,qG;(HG=WG||(WG={})).left="left",HG.right="right",HG.down="down",HG.up="up",(qG=$G||($G={})).fadeIn="fadeIn",qG.clipFade="clipFade",qG.clipSlide="clipSlide",qG.grow="grow",qG.growBig="growBig",qG.shrink="shrink",qG.shrinkBig="shrinkBig",qG.flip="flip",qG.spin="spin",qG.spring="spring",qG.zoom="zoom",qG.slide="slide",qG.drop="drop",qG.scroll="scroll",q.t("w.animation.easing.EaseOutQuad"),q.t("w.animation.easing.EaseInQuad"),q.t("w.animation.easing.EaseOutCubic"),q.t("w.animation.easing.EaseInCubic"),q.t("w.animation.easing.EaseInOutCubic"),q.t("w.animation.easing.EaseOutBack"),q.t("w.animation.easing.EaseOutElastic"),q.t("w.animation.easing.EaseOutBounce"),q.t("w.animation.easing.Linear");const YG=[{label:"w.animation.easing.EaseOutQuad",value:cY.QuadraticOut,icon:"Easeoutquad"},{label:"w.animation.easing.EaseInQuad",value:cY.QuadraticIn,icon:"Easeinquad"},{label:"w.animation.easing.EaseOutCubic",value:cY.CubicOut,icon:"Easeoutcubic"},{label:"w.animation.easing.EaseInCubic",value:cY.CubicIn,icon:"Easeincubic"},{label:"w.animation.easing.EaseInOutCubic",value:cY.CubicInOut,icon:"Easeinoutcubic"},{label:"w.animation.easing.EaseOutBack",value:cY.BackOut,icon:"Easeoutback"},{label:"w.animation.easing.EaseOutElastic",value:cY.ElasticOut,icon:"Easeoutelastic"},{label:"w.animation.easing.EaseOutBounce",value:cY.BounceOut,icon:"Easeoutbounce"},{label:"w.animation.easing.Linear",value:cY.Linear,icon:"Linear"}];var GG,XG;(XG=GG||(GG={})).fadeIn="fadeIn",XG.fadeOut="fadeOut",XG.grow="grow",XG.shrink="shrink",XG.slide="slide",XG.slideGrow="slideGrow",XG.skew="skew",XG.swing="swing",XG.swingGrow="swingGrow",XG.spin="spin",q.t("w.animation.appearance"),q.t("w.animation.transition"),zn.appearance,zn.transition,q.t("w.animation.appearance.fadeIn"),q.t("w.animation.appearance.clipFade"),q.t("w.animation.appearance.clipSlide"),q.t("w.animation.appearance.grow"),q.t("w.animation.appearance.growBig"),q.t("w.animation.appearance.shrink"),q.t("w.animation.appearance.shrinkBig"),q.t("w.animation.appearance.slide"),q.t("w.animation.appearance.flip"),q.t("w.animation.appearance.spin"),q.t("w.animation.appearance.zoom"),q.t("w.animation.appearance.drop"),q.t("w.animation.appearance.spring"),q.t("w.animation.appearance.scroll");const JG=[{label:"w.animation.appearance.fadeIn",type:$G.fadeIn,thumb:qP,props:{opacity:"0.5"},easing:cY.CubicOut},{label:"w.animation.appearance.grow",type:$G.grow,thumb:qP,props:{transform:lP({scaleX:"0.8",scaleY:"0.8"}),opacity:"0"},easing:cY.CubicIn},{label:"w.animation.appearance.growBig",type:$G.growBig,thumb:qP,props:{transform:lP({scaleX:"0",scaleY:"0"}),opacity:"0"},easing:cY.CubicIn},{label:"w.animation.appearance.shrink",type:$G.shrink,thumb:qP,props:{transform:lP({scaleX:"1.2",scaleY:"1.2"}),opacity:"0"},easing:cY.CubicIn},{label:"w.animation.appearance.shrinkBig",type:$G.shrinkBig,thumb:qP,props:{transform:lP({scaleX:"2",scaleY:"2"}),opacity:"0"},easing:cY.CubicIn},{label:"w.animation.appearance.slide",type:$G.slide,thumb:qP,directions:{[WG.up]:{transform:lP({translateY:"20%"}),opacity:"0"},[WG.down]:{transform:lP({translateY:"-20%"}),opacity:"0"},[WG.left]:{transform:lP({translateX:"20%"}),opacity:"0"},[WG.right]:{transform:lP({translateX:"-20%"}),opacity:"0"}},easing:cY.CubicIn},{label:"w.animation.appearance.flip",type:$G.flip,thumb:qP,directions:{[WG.up]:{transform:lP({perspective:"800px",rotateX:"-90deg"})},[WG.down]:{transform:lP({perspective:"800px",rotateX:"90deg"})},[WG.left]:{transform:lP({perspective:"800px",rotateY:"90deg"})},[WG.right]:{transform:lP({perspective:"800px",rotateY:"-90deg"})}},easing:cY.CubicIn},{label:"w.animation.appearance.spin",type:$G.spin,thumb:qP,props:{transform:lP({scaleX:"0",scaleY:"0",rotateZ:"-1440deg"}),opacity:"0"},easing:cY.CubicIn},{label:"w.animation.appearance.zoom",type:$G.zoom,thumb:qP,props:{transform:lP({scaleX:"0",scaleY:"0"})},easing:cY.BackOut},{label:"w.animation.appearance.drop",type:$G.drop,thumb:qP,props:{transform:lP({translateY:"-50%"}),opacity:"0"},easing:cY.BounceOut},{label:"w.animation.appearance.spring",type:$G.spring,thumb:qP,props:{transform:lP({scaleX:"0",scaleY:"0"}),opacity:"0"},easing:cY.ElasticOut},{label:"w.animation.appearance.scroll",type:$G.scroll,thumb:qP,directions:{[WG.up]:{transform:lP({translateY:"100vh"})},[WG.down]:{transform:lP({translateY:"-100vh"})},[WG.left]:{transform:lP({translateX:"100vw"})},[WG.right]:{transform:lP({translateX:"-100vw"})}},easing:cY.Linear}];q.t("w.animation.transition.fadeIn"),q.t("w.animation.transition.fadeOut"),q.t("w.animation.transition.grow"),q.t("w.animation.transition.shrink"),q.t("w.animation.transition.slide"),q.t("w.animation.transition.slideGrow"),q.t("w.animation.transition.skew"),q.t("w.animation.transition.swing"),q.t("w.animation.transition.swingGrow"),q.t("w.animation.transition.spin");const QG=[{label:"w.animation.transition.fadeIn",type:GG.fadeIn,thumb:qP,props:{opacity:"1"},easing:cY.QuadraticOut},{label:"w.animation.transition.fadeOut",type:GG.fadeOut,thumb:qP,props:{opacity:".5"},easing:cY.QuadraticOut},{label:"w.animation.transition.grow",type:GG.grow,thumb:qP,props:{transform:lP({scaleX:"1.1",scaleY:"1.1"})},easing:cY.QuadraticOut},{label:"w.animation.transition.shrink",type:GG.shrink,thumb:qP,props:{transform:lP({scaleX:"0.9",scaleY:"0.9"})},easing:cY.QuadraticOut},{label:"w.animation.transition.slide",type:GG.slide,thumb:qP,directions:{[WG.up]:{transform:lP({translateY:"-10%"})},[WG.down]:{transform:lP({translateY:"10%"})},[WG.left]:{transform:lP({translateX:"-10%"})},[WG.right]:{transform:lP({translateX:"10%"})}},easing:cY.QuadraticOut},{label:"w.animation.transition.slideGrow",type:GG.slideGrow,thumb:qP,directions:{[WG.up]:{transform:lP({translateY:"-10%",scaleX:"1.05",scaleY:"1.05"})},[WG.down]:{transform:lP({translateY:"10%",scaleX:"1.05",scaleY:"1.05"})},[WG.left]:{transform:lP({translateX:"-10%",scaleX:"1.05",scaleY:"1.05"})},[WG.right]:{transform:lP({translateX:"10%",scaleX:"1.05",scaleY:"1.05"})}},easing:cY.QuadraticOut},{label:"w.animation.transition.skew",type:GG.skew,thumb:qP,props:{transform:lP({skewX:"1.05deg",skewY:"1.05deg"})},easing:cY.QuadraticOut},{label:"w.animation.transition.swing",type:GG.swing,thumb:qP,props:{transform:lP({rotateZ:"3deg"})},easing:cY.QuadraticOut},{label:"w.animation.transition.swingGrow",type:GG.swingGrow,thumb:qP,props:{transform:lP({rotateZ:"3deg",scaleX:"1.05",scaleY:"1.05"})},easing:cY.QuadraticOut},{label:"w.animation.transition.spin",type:GG.spin,thumb:qP,props:{transform:lP({rotateZ:"720deg"})},easing:cY.CubicInOut}],ZG=new Map,eX=new Map,tX=e=>{const t={};return Object.keys(e).sort(((e,t)=>e>t?-1:1)).forEach((n=>{"transform"===n?Reflect.set(t,"transform",cP(e.transform)):Reflect.set(t,n,e[n])})),t},nX=(e,t)=>{t.forEach((t=>{const{props:n,type:i,directions:r}=t;function o(t,n){const r=tX(t);e.set(JSON.stringify(r),{type:i,direction:n})}n?o(n,null):(WD(r),Object.keys(r).forEach((e=>{o(r[e],e)})))}))};nX(ZG,JG),nX(eX,QG);const iX=(e,t,n)=>{let i;return i=e===zn.appearance?((e,t=WG.left)=>{const n=JG.find((t=>t.type===e));WD(n);const{props:i,directions:r,easing:o}=n;return AR({value:i||r[t],easing:o})})(t,n):((e,t=WG.left)=>{const n=QG.find((t=>t.type===e));WD(n);const{props:i,directions:r,easing:o}=n;return AR({value:i||r[t],easing:o})})(t,n),i};class rX{constructor(e="",t=localStorage){this.prefixKey=e,this.storage=t}getKey(e){return`${this.prefixKey}${e}`.toUpperCase()}set(e,t,n=604800){const i=JSON.stringify({value:t,expire:null!==n?(new Date).getTime()+1e3*n:null});this.storage.setItem(this.getKey(e),i)}get(e,t=null){const n=this.storage.getItem(this.getKey(e));if(n)try{const t=JSON.parse(n),{value:i,expire:r}=t;if(null===r||r>=Date.now())return i;this.remove(this.getKey(e))}catch(f8){return t}return t}remove(e){this.storage.removeItem(this.getKey(e))}clear(){this.storage.clear()}}const oX=!!navigator.clipboard;class sX{constructor(){C(this,"clipboard",navigator.clipboard)}async set(e){var t;e&&await(null==(t=this.clipboard)?void 0:t.writeText(e))}async get(){var e;let t="";return t=await(null==(e=this.clipboard)?void 0:e.readText()),t}async getData(){var e;let t=null;return t=await(null==(e=this.clipboard)?void 0:e.read()),t}async clear(){var e;await(null==(e=this.clipboard)?void 0:e.writeText(""))}}const aX=(({prefixKey:e="",storage:t=localStorage}={})=>new rX(e,t))({storage:localStorage,prefixKey:"iliad-editor"}),lX=new sX;var cX="_scrollBar_m81d8_1",dX="_scrollBarBlock_m81d8_18";var uX="_bodyS_67lkz_1";const hX="wheel",pX="keydown",fX="keyup";class gX{constructor(e,t,n,i){C(this,"_handler"),C(this,"_node"),C(this,"_type"),C(this,"_options"),this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function mX(e,t,n,i){return new gX(e,t,n,i)}function _X(){var e;const{view:t}=ID,{canvasHostDomNode:n}=t,i=null==(e=n.contentDocument)?void 0:e.body,r=T.exports.useRef();if(!r.current){const e=document.querySelector("#canvasContainer");r.current=e}const[o,s]=T.exports.useState(0),a=T.exports.useMemo((()=>`${Math.floor(100*o)}%`),[o]),{run:l}=M((()=>{const{scrollTop:e,scrollHeight:t,clientHeight:n}=i;if(t<=n)return void s(1);s(e/(t-n))}),{wait:20});return T.exports.useEffect((()=>{l();const e=mX(i,hX,l);return()=>{e.dispose()}}),[]),oe.exports.createPortal(k("div",{className:cX,children:k("div",{className:N(uX,oL,dX),children:a})}),r.current)}var vX,yX,wX={};(yX=vX||(vX={})).start="start",yX.end="end",q.t("w.animation.scroll.key"),q.t("w.animation.scroll.keyStart"),q.t("w.animation.scroll.keyEnd"),q.t("w.animation.scroll.scrollProgress"),q.t("w.animation.scroll.elementEnterProgress"),q.t("w.animation.scroll.elementExitProgress");const bX=[{key:vX.start,value:vX.start,label:"w.animation.scroll.keyStart"},{key:vX.end,value:vX.end,label:"w.animation.scroll.keyEnd"}];function xX(e){const{scrollKey:t,setScrollKey:n,scrollValues:i,updateScrollValue:r}=e,o=i.some((e=>Ht(e))),{t:s}=VL(),a=T.exports.useMemo((()=>{const e=bX.findIndex((e=>e.value===t));return i[e]}),[i,t]),l=e=>{r(t,e)};return A(be,{children:[k(nB,{label:s("w.animation.scroll.key"),children:k(aj,{className:wX.singleLineField,selected:t,options:bX.map((e=>b(w({},e),{label:s(e.label)}))),onChange:e=>{n(e)},radioStyle:{padding:"3px 23px"}})}),o?k(CX,{scrollValue:a,onChange:l}):k(kX,{edge:a.edge,scrollValue:a,onChange:l}),k(xK,{show:o,children:k(_X,{})})]})}function CX({scrollValue:e,onChange:t}){const{t:n}=VL();return k(nB,{label:n("w.animation.scroll.scrollProgress"),children:k(cB,{className:wX.input,value:(i=e,i.replace("%","")),onChange:e=>{const n=parseInt(e);t(`${n}%`)},suffix:"%"})});var i}function kX({scrollValue:e,edge:t,onChange:n}){const{t:i}=VL(),{threshold:r}=e,o=Math.floor(100*r),s=t===Wn.start?"w.animation.scroll.elementEnterProgress":"w.animation.scroll.elementExitProgress";return k(nB,{label:i(s),children:k(cB,{className:wX.input,value:o,onChange:t=>{const i=parseFloat((parseFloat(t)/100).toFixed(2));n(b(w({},e),{threshold:i}))},suffix:"%"})})}var EX,SX,IX,OX,TX,MX,NX,AX,RX,DX,PX,LX,UX,FX;!function(e){e.percentage="percentage",e.number="number",e.px="px"}(EX||(EX={}));!function(e){e.length="length",e.angle="angle",e.time="time",e.frequency="frequency",e.resolution="resolution",e.flex="flex",e.percent="percent"}(SX||(SX={}));class BX extends class{static parse(e,t){In()}}{constructor(e,t){super(),this.value=e,this.unit=t}toString(){return`${this.value}${function(e){switch(e){case EX.percentage:return"%";case"number":return"";default:return e.toLowerCase()}}(this.unit)}`}}!function(e){e.percent=function(e){return new BX(e,EX.percentage)},e.px=function(e){return new BX(e,EX.px)}}(IX||(IX={})),function(e){e.document="document",e.scroll="scroll"}(OX||(OX={})),function(e){e.normal="normal",e.reverse="reverse",e.alternate="alternate",e["alternate-reverse"]="alternate-reverse"}(TX||(TX={})),function(e){e.none="none",e.forwards="forwards",e.backwards="backwards",e.both="both",e.auto="auto"}(MX||(MX={})),function(e){e.group="group",e.sequence="sequence"}(NX||(NX={})),function(e){e.appearance="appearance",e.transition="transition"}(AX||(AX={})),function(e){e.start="start",e.end="end"}(RX||(RX={})),function(e){e.vertical="vertical",e.horizontal="horizontal",e.block="block",e.inline="inline"}(DX||(DX={})),function(e){e.enter="enter",e.exit="exit"}(PX||(PX={})),function(e){e.load="load",e.click="click",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.intersection="@intersection",e.loadScroll="@loadScroll",e.appear="@appear",e.mousedown="mousedown",e.mouseup="mouseup"}(LX||(LX={})),function(e){e.child=">",e.descendant=" ",e.sibling="~",e.attribute="[]",e.pseudoClass=":",e.pseudoElement=":"}(UX||(UX={})),function(e){e.visited="visited",e.active="active",e.hover="hover"}(FX||(FX={})),VD.webkit;const jX=(e,t,n)=>w({duration:e,easing:t,delay:0,fill:Fn.none},n),VX=e=>e.replace(";",""),zX=(e,t="")=>e.replace(VX(t),""),KX=(e,t="")=>`${VX(t)} ${e}`,WX=(e,t)=>{const n=lP(e);return`${KX(n,t)}`},HX=e=>{const{effect:t}=e,n=!t.some((e=>{const t=e,{unit:n}=t,i=x(t,["unit"]);return Object.values(i).some((e=>!Yt(e)))})),i=!t.some((e=>{const t=e,{unit:n}=t,i=x(t,["unit"]);return Object.values(i).some((e=>!Ht(e)))}));return WD(n||i),n?zn.appearance:zn.transition},$X=(e,t="")=>{const n=((e,t="")=>{const{effect:n}=e;return n.map((e=>{const n={},i={},r=e,{unit:o}=r,s=x(r,["unit"]);return Object.keys(s).forEach((e=>{const t=s[e];Yt(t)?(Reflect.set(n,e,t[0]),Reflect.set(i,e,t[1])):Reflect.set(i,e,t)})),[i,n].forEach((e=>{if(e.transform&&t){const n=zX(e.transform,t);Reflect.set(e,"transform",n)}})),{from:n,to:i,unit:o}}))})(e,t);WD(1===n.length);const[i]=n;return i},qX=(e,t="to",n="")=>$X(e,n)[t];function YX(e,t){const{triggers:n,animations:i}=z(TD),r=ze(OL),o=n.find((t=>t.id===e));WD(o,"Trigger can not be empty. ");const s=T.exports.useMemo((()=>i.filter((e=>e.triggerId===o.id))),[i,o]),a=s.filter((e=>e.effects.targetId===t));WD(a.length<=2,"Animation model is less than 2 in target.");const[l]=a,c=o.type===Xn.intersection||o.type===Xn.loadScroll?zn.appearance:zn.transition;return T.exports.useEffect((()=>{const e=c===zn.appearance?"from":"to";r(e)}),[e,t]),{trigger:o,animation:l,triggerAnimations:s,triggerAnimationType:c}}function GX(e,t){const[n,i]=T.exports.useState({});return T.exports.useEffect((()=>{let n=null;n=t?t.effects.timing:(e=>{let t;switch(e){case Xn.intersection:t=jX(1.2,cY.Linear);break;case Xn.loadScroll:t=jX(1,cY.Linear);break;default:t=jX(.2,cY.Linear)}return t})(e.type),i(n)}),[t]),{timing:n,setTiming:i,updateTiming:e=>{i(w(w({},n),e))}}}function XX(e){const t=z(AD);WD(e);const{nodeStyle:n,computedStyle:i}=T.exports.useMemo((()=>({nodeStyle:ID.getDeclaredStyle(e),computedStyle:AR(ID.view.getComputedStyleOfId(e))})),[e,t]);return{nodeStyle:n,computedStyle:i,createEffect:(t,i,r)=>{const o={to:{},from:{}};if(i.to&&i.from)Reflect.set(o,"to",i.to),Reflect.set(o,"from",i.from);else{const e=t===zn.appearance?"from":"to";Reflect.set(o,e,i)}const s=((e,t,n)=>{const i={},{from:r,to:o}=t;return Array.from(new Set([...Object.keys(r),...Object.keys(o)])).filter((e=>r[e]||o[e])).forEach((t=>{let s;if(s=e===zn.appearance?[r[t]||null,o[t]||null]:o[t],"transform"===t){const e=n.transform||"";if(Yt(s)){const t=cP(s[0]||""),n=cP(s[1]||"");Array.from(new Set([...Object.keys(t),...Object.keys(n)])).forEach((e=>{t[e]||Reflect.set(t,e,aP[e]),n[e]||Reflect.set(n,e,aP[e])})),s=[t,n].map((t=>WX(t,e)))}else{const t=cP(s||"");s=WX(t,e)}}Reflect.set(i,t,s)})),i})(t,o,n);return((e,t,n)=>({targetId:e,effect:[t],timing:n}))(e,s,r)}}}const JX={[Xn.intersection]:Xn.intersection,[Xn.mouseenter]:Xn.mouseleave,[Xn.mousedown]:Xn.mouseup},QX={[zn.appearance]:Fn.backwards,[zn.transition]:Fn.forwards},ZX={intersectionEdge:Wn.end,intersectionPhase:Yn.enter,intersectionThreshold:0},eJ={intersectionEdge:Wn.end,intersectionPhase:Yn.exit,intersectionThreshold:1};function tJ(e,t,n){const{model:i}=ID,{animations:r,triggers:o}=z(TD),s=z(OL),{createEffect:a}=XX(e),{mirrorTrigger:l,mirrorAnimation:c}=T.exports.useMemo((()=>{if(!t||!n)return{mirrorAnimation:null,mirrorTrigger:null};const{effects:e}=t,{targetId:i}=e,a=qX(e,s);a.transform&&Reflect.set(a,"transform",cP(a.transform));const l="from"===s?"to":"from",c=r.filter((e=>e.id!==t.id)).find((e=>{const{triggerId:t,effects:r}=e,{targetId:s}=r;if(!s||s!==i)return!1;const c=qX(r,l);if(c.transform&&Reflect.set(c,"transform",cP(c.transform)),!RR(c,a))return!1;const d=o.find((e=>e.id===t));return(null==d?void 0:d.targetId)===(null==n?void 0:n.targetId)&&(u=null==n?void 0:n.type,(null==d?void 0:d.type)===JX[u]);var u})),d=o.find((e=>e.id===(null==c?void 0:c.triggerId)));return{mirrorAnimation:c||null,mirrorTrigger:d||null}}),[r,o,t,n]);WD(c&&l||!c&&!l);const d=e=>{const t=HX(e)===zn.appearance?zn.transition:zn.appearance,n=qX(e,s),i=e.timing,r=QX[t];return a(t,n,b(w({},i),{fill:r}))};return{mirrorTrigger:l,mirrorAnimation:c,addMirrorAnimation:s=>{const a=t||s;if(!a)return;const l=d(a.effects),c=n,{targetId:u=null,type:h,id:p}=c,f=x(c,["targetId","type","id"]),g=JX[h];let m=o.find((t=>{if(t.id===n.id)return!1;if(t.type===Xn.intersection){const{intersectionEdge:e,intersectionPhase:n,intersectionThreshold:i}=t;if(!RR({intersectionEdge:e,intersectionPhase:n,intersectionThreshold:i},eJ))return!1}return t.targetId===u&&t.type===g&&r.some((n=>n.triggerId===t.id&&n.effects.targetId===e))}));m||(g===Xn.intersection&&Object.assign(f,eJ),m=i.addTrigger(g,u,f)),i.addAnimation(m.id,l)},removeMirrorAnimation:()=>{if(!c||!l)return;i.removeAnimation(c.id);const{animations:e}=i.getValue();e.some((e=>e.triggerId===l.id))||i.removeTrigger(l.id)},updateAnimationEffects:e=>{if(t&&(i.updateAnimationEffects(t.id,e),c)){const t=d(e);i.updateAnimationEffects(c.id,t)}}}}function nJ(e,t,n){if(e){const i=n.transform;return qX(e.effects,t,i)}return{}}function iJ(e){const{model:t}=ID,n=`page${function(){const e=location.href,t=/id=(\d+)/;if(e.match(t)){const n=t.exec(e);if(n)return n[1]}return""}()}-${e}`,i=T.exports.useRef(!1),[r,o]=T.exports.useState([]),s=Ke(r),a=()=>{const e=s.current;aX.set(n,e.join(","))},{run:l,cancel:c}=le(a,{wait:50});return T.exports.useEffect((()=>{i.current&&l()}),[r]),T.exports.useEffect((()=>{const e=(()=>{const e=aX.get(n),i=e?e.split(","):[],{triggers:r}=t.getValue(),o=new Set(r.map((e=>e.id)));return i.filter((e=>{const[t,n]=e.split("|");return!(!n||!o.has(t))}))})();return o(e),i.current=!0,()=>{a(),c()}}),[]),{ids:r,addIds:e=>{o(Array.from(new Set([...r,...e])))},removeIds:e=>{const t=r.filter((t=>!e.includes(t)));o(t)}}}function rJ(e,t){const n=e.type===Xn.loadScroll,i=z(IL),[r,o]=T.exports.useState([]),s=e.targetId,a=!s;T.exports.useEffect((()=>{if(n)if(t&&t.timeline&&t.timeline.scrollOffsets)o(t.timeline.scrollOffsets);else{const e=((e,t)=>t?["0%","100%"]:[{edge:Wn.start,threshold:1,target:e},{edge:Wn.end,threshold:1,target:e}])(s,a);o(e)}return()=>{o([])}}),[i,e]);return{scrollValues:r,setScrollValues:o,updateScrollValue:(e,n)=>{const i=e===vX.start?0:1,s=r.slice();s[i]=n,t?(WD(t.timeline),ID.transform((()=>{ID.model.updateAnimationTimeline(t.id,b(w({},t.timeline),{scrollOffsets:s}))}))):o(s)},createNewScrollTimeline:()=>({timelineType:Dn.scroll,scrollOffsets:r})}}var oJ="_triggerItem_10uiq_1",sJ="_triggerBlock_10uiq_11",aJ="_animationTrigger_10uiq_14",lJ="_triggerItemDivider_10uiq_20",cJ="_animationTriggerEditBtn_10uiq_24";var dJ={tabContent:"_tabContent_xw4wx_1",animationItem:"_animationItem_xw4wx_6",animationThumbBox:"_animationThumbBox_xw4wx_15",active:"_active_xw4wx_25",animationThumb:"_animationThumb_xw4wx_15",animationItemTitle:"_animationItemTitle_xw4wx_34"};const uJ=[{value:WG.right,label:k(AL,{slot:"icon",name:"DirectionRight"})},{value:WG.left,label:k(AL,{slot:"icon",name:"DirectionLeft"})},{value:WG.up,label:k(AL,{slot:"icon",name:"DirectionUp"})},{value:WG.down,label:k(AL,{slot:"icon",name:"DirectionDown"})}];function hJ(e){const{curAnimationTab:t=zn.transition,initTransform:n="",hasAnimation:i,clearAnimation:r,handleSelect:o,handleHover:s,cancelHover:a,handleVisibleChange:l,animation:c,open:d}=e,{t:u}=VL(),{animationType:h,presetType:p,direction:f}=function(e,t=""){const n=z(OL);return T.exports.useMemo((()=>{let i=null,r=null,o=zn.appearance;if(e){o=HX(e.effects);const s=qX(e.effects,n);if(s.transform&&t){const e=zX(s.transform,t);Reflect.set(s,"transform",e)}const a=(o===zn.appearance?ZG:eX).get(JSON.stringify(tX(s)));a&&(r=a.type,i=a.direction)}return{presetType:r,direction:i,animationType:o}}),[e,n])}(c,n),g=T.exports.useMemo((()=>{if(!c||h!==t)return null;return(h===zn.appearance?JG:QG).find((e=>e.type===p))||null}),[h,p,t,c]);let m="w.animation.none";i&&(m=g?g.label:"w.animation.custom");const _=u(m),v=i?"#ffffff":"#858585",y=i?"#F55897":"#ffffff";return k(KB,{popoverStyle:{width:"256px"},title:u("w.animation.presets"),visible:d,onVisibleChange:()=>{l()},trigger:k(ej,{name:"Effect",text:_,color:v,background:y}),content:k(pJ,{hasAnimation:i,selectedPreset:g,direction:f,presetType:p,animationType:h,curAnimationTab:t,handleHover:s,cancelHover:a,handleSelect:o,clearAnimation:r}),fitToConfigPanel:!0})}function pJ(e){const{selectedPreset:t,hasAnimation:n,animationType:i,clearAnimation:r,handleHover:o,cancelHover:s,handleSelect:a,curAnimationTab:l,direction:c,presetType:d}=e,{t:u}=VL(),h=T.exports.useMemo((()=>Boolean(null==t?void 0:t.directions)),[t]),p=WG.left;return A("div",{className:dJ.animationContent,children:[l===zn.appearance&&A("div",{className:dJ.tabContent,children:[k(fJ,{active:!n,onSelect:r}),JG.map((e=>k(gJ,b(w({},e),{active:i===zn.appearance&&d===e.type,onSelect:()=>{a(zn.appearance,e,c||p)},onHoverIn:()=>{o(zn.appearance,e,c||p)},onHoverOut:()=>{s()}}),`${zn.appearance}-${e.type}`)))]}),l===zn.transition&&A("div",{className:dJ.tabContent,children:[k(fJ,{active:!n,onSelect:r}),QG.map((e=>k(gJ,b(w({},e),{active:i===zn.transition&&d===e.type,onSelect:()=>{a(zn.transition,e,c||p)},onHoverIn:()=>{o(zn.transition,e,c||p)},onHoverOut:()=>{s()}}),`${zn.transition}-${e.type}`)))]}),h&&k(nB,{label:u("w.animation.direction"),contentStyle:{justifyContent:"flex-end"},children:k(aj,{className:dJ.halfInput,selected:c||p,options:uJ,onChange:e=>{a(i,t,e)},radioStyle:{padding:"3px 6.1px"}})})]})}function fJ(e){const{t:t}=VL(),{onSelect:n,active:i}=e,r=T.exports.useRef();return G("click",(()=>{n()}),{target:r}),A("div",{className:dJ.animationItem,ref:r,children:[k("div",{className:N(dJ.animationThumbBox,{[dJ.active]:i}),children:k(AL,{size:"xl",color:"#E0E0E0",name:"Linear"})}),k("p",{className:dJ.animationItemTitle,children:t("w.animation.none")})]})}function gJ(e){const{t:t}=VL(),{label:n,thumb:i,onSelect:r,onHoverIn:o,onHoverOut:s,active:a}=e,l=T.exports.useRef();return G("click",(()=>{r()}),{target:l}),G("mouseenter",(()=>{o()}),{target:l}),G("mouseleave",(()=>{s()}),{target:l}),A("div",{className:dJ.animationItem,ref:l,children:[k("div",{className:N(dJ.animationThumbBox,{[dJ.active]:a}),children:k("img",{className:dJ.animationThumb,src:i,alt:""})}),k("p",{className:dJ.animationItemTitle,children:t(n)})]})}function mJ(e){const{triggerId:t,targetId:n,className:i="",outlineWidth:r="2px",triggerHasAnimation:o=!1}=e,{trigger:s,animation:a}=YX(t,n),l=Boolean(a)||o,[c,d]=T.exports.useState(!1),{nodeStyle:u,createEffect:h}=XX(n),{updateAnimationEffects:p,removeMirrorAnimation:f}=tJ(n,a,s),g=s.type===Xn.intersection?zn.appearance:zn.transition,m=(e,t,i,r)=>{WD(!!n,"TargetId can not be null");const{value:o,easing:a}=iX(e,t.type,r),l=s.type===Xn.intersection?1.2:.2,c=jX(l,a,{fill:i});return h(e,o,c)},_=T.exports.useRef(),{run:v,cancel:y}=le(((e,n,i)=>{_.current&&clearTimeout(_.current),VG();const r=uU(),o=e===zn.transition?Fn.forwards:Fn.backwards,s=m(e,n,o,i),a=jG([{id:r,effects:s,triggerId:t}],!1,(()=>{_.current=setTimeout((()=>{a(),_.current=void 0}),1e3)}))}),{wait:500});return k(XB,{className:i,active:c,style:{outlineWidth:r,padding:"6px 0"},children:k(hJ,{curAnimationTab:g,trigger:s,animation:a,hasAnimation:l,initTransform:u.transform||"",open:c,handleHover:v,cancelHover:y,handleSelect:(e,n,i)=>{const r=e===zn.transition?Fn.forwards:Fn.backwards,o=m(e,n,r,i);ID.transform((()=>{a?p(o):ID.model.addAnimation(t,o)})),setTimeout((()=>{v(e,n,i)}),50)},clearAnimation:()=>{ID.transform((()=>{a&&(f(),ID.model.removeAnimation(a.id))}))},handleVisibleChange:()=>{d(!c)}})})}function _J(e){const{t:t}=VL(),{trigger:n}=e,{type:i,id:r}=n,[o]=z(RD),s=o,a=KG.find((e=>e.type===i)),l=ze(SL),c=ze(IL),{animations:d}=z(TD),u=d.find((e=>e.triggerId===r))||null,h=Boolean(u),{removeMirrorAnimation:p}=tJ(s,u,n);return a?A("div",{className:oJ,children:[k("div",{className:sJ,children:k(fB,{action:"delete",onClick:()=>{const{model:e}=ID;ID.transform((()=>{p(),e.removeTrigger(r)}))},style:{height:"48px",padding:"0",marginBottom:"0"},children:t(a.title)})}),k("div",{className:sJ,children:A(nB,{label:t("w.trigger"),labelStyle:{alignSelf:"start"},contentStyle:{flexDirection:"row",width:"100%"},style:{marginTop:"0"},children:[k(mJ,{triggerHasAnimation:h,className:aJ,triggerId:n.id,targetId:s}),k(ke,{className:cJ,click:()=>{l(r),c(o)},children:k(AL,{slot:"icon",name:"Edit"})})]})}),k(U,{className:lJ})]}):null}const vJ=e=>{const t=[Xn.mouseleave,Xn.mouseup];return e.type===Xn.intersection?(e=>{const{intersectionEdge:t,intersectionPhase:n,intersectionThreshold:i}=e;return RR({intersectionEdge:t,intersectionPhase:n,intersectionThreshold:i},eJ)})(e):t.includes(e.type)};function yJ(){const e=function(){const e=z(BD);return T.exports.useMemo((()=>e.filter((e=>!vJ(e))).reverse()),[e])}();return k(be,{children:e.map((e=>k(_J,{trigger:e},e.id)))})}function wJ(){const{t:e}=VL();return k(fB,{style:{padding:"0",marginBottom:"8px",color:"rgba(0, 0, 0, 0.42)"},slotAdd:k(bJ,{}),children:e("w.trigger")})}function bJ(){const{t:e}=VL(),t=z(UD);return k("span",{children:A(We,{quiet:!0,className:RW.addMenu,children:[KG.map((n=>{const{type:i}=n;return"divider"===i?k(U,{style:{margin:"4px 0"}},n.type):k(Ce,{style:{width:"144px"},value:n.type,click:()=>{(e=>{if(t)switch(e.type){case Xn.intersection:ID.transform((()=>{ID.model.addTrigger(e.type,t.id,w({},ZX))}));break;default:{let n=t.id;e.type===Xn.loadScroll&&ao(t)&&(n=null),ID.transform((()=>{ID.model.addTrigger(e.type,n)}));break}}})(n)},children:e(n.title)},n.type)})),k(AL,{slot:"icon",className:RW.icon,name:"Add"})]})})}function xJ(){return z(UD)?A("div",{className:N(RW.triggerContainer,rL),children:[k(wJ,{}),k(U,{className:RW.triggerItemDivider}),k(yJ,{})]}):null}function CJ(e){const t=e,{showText:n}=t,i=x(t,["showText"]);return A(be,{children:[n&&k(NK,w({},i)),k(_V,w({},i))]})}var kJ="_singleLineField_18slj_1";const EJ=[];for(let os=0;os<16;os++)EJ.push({label:100*os+"ms",value:""+os/10});function SJ(e){var t,n,i,r;const{showOthers:o,timing:s,updateTiming:a}=e,l=`${s.duration}`,c=`${s.delay}`,d=null==(t=s.easing)?void 0:t.toString(),{t:u}=VL(),h=z(SL),p=z(IL);return WD(h&&p),A("div",{children:[k(xK,{show:o,children:k(nB,{label:u("w.animation.timing.effectPreset"),children:k(mJ,{className:kJ,triggerId:h,targetId:p,outlineWidth:"1px"})})}),k(xK,{show:o,children:k(nB,{label:u("w.animation.timing.delay"),children:k(xe,{className:kJ,value:c,change:e=>{a({delay:parseFloat(e.target.value)})},label:null==(n=EJ.find((e=>e.value===c)))?void 0:n.label,children:EJ.map((e=>k(Ce,{value:e.value,children:e.label},e.value)))})})}),k(nB,{label:u("w.animation.timing.duration"),children:k(xe,{className:kJ,value:l,change:e=>{a({duration:parseFloat(e.target.value)})},label:null==(i=EJ.find((e=>e.value===l)))?void 0:i.label,children:EJ.map((e=>k(Ce,{value:e.value,children:e.label},e.value)))})}),k(nB,{label:u("w.animation.timing.easing"),children:k(xe,{className:kJ,value:d,change:e=>{a({easing:e.target.value})},icons:"none",label:null==(r=EJ.find((e=>e.value===d)))?void 0:r.label,children:YG.map((e=>A(Ce,{value:e.value,children:[k(AL,{slot:"icon",name:e.icon}),u(e.label)]},e.value)))})}),k(vB,{})]})}var IJ={itemsWrap:"_itemsWrap_1o1if_1",itemRowWrap:"_itemRowWrap_1o1if_8",sizeRatio:"_sizeRatio_1o1if_16",ratioIcon:"_ratioIcon_1o1if_25",ratioIconActive:"_ratioIconActive_1o1if_29"};function OJ(e){const{t:t}=VL(),{transformState:n,transformChanged:i,onTransformChange:r,is3D:o}=e,{scaleX:s,scaleY:a,scaleZ:l}=n,c=(e,t)=>{let n=null;"x"!==e&&"y"!==e||!d||(n=parseFloat(s)/parseFloat(a));const i={[`scale${e.toUpperCase()}`]:t},o=t.includes(".")?t.split(".")[1].length:0;if(n){const r=parseFloat(t);if("x"===e){const e=r/n;Reflect.set(i,"scaleY",e.toFixed(o))}else{const e=r*n;Reflect.set(i,"scaleX",e.toFixed(o))}}r(i)},[d,u]=T.exports.useState(!0),h=d?"Locked":"Unlocked";return k(nB,{label:t("w.animation.transform.scale"),labelStyle:{alignSelf:"start"},children:A("div",{className:IJ.itemsWrap,children:[A("div",{className:IJ.itemRowWrap,children:["X",k(cB,{logic:i.scaleX,className:IJ.input,value:s,onChange:e=>{c("x",e)}})]}),A("div",{className:IJ.itemRowWrap,children:["Y",k(cB,{logic:i.scaleY,className:IJ.input,value:a,onChange:e=>{c("y",e)}})]}),o&&A("div",{className:IJ.itemRowWrap,children:["Z",k(cB,{logic:i.scaleZ,className:IJ.input,value:l,onChange:e=>{c("z",e)}})]}),A("div",{className:N(IJ.sizeRatio,iL),onClick:()=>{u(!d)},children:[k(GB,{src:KP,width:8}),k(AL,{className:N(IJ.ratioIcon,{[IJ.ratioIconActive]:d}),name:h},h),k(GB,{src:WP,width:8})]})]})})}var TJ={itemsWrap:"_itemsWrap_lq6ex_1",itemRowWrap:"_itemRowWrap_lq6ex_8"};function MJ(e){const{t:t}=He(),{transformState:n,transformChanged:i,onTransformChange:r,is3D:o}=e,{rotateX:s,rotateY:a,rotateZ:l}=n,c=(e,t)=>{r({[`rotate${e.toUpperCase()}`]:t})},d=e=>e.replace("deg",""),u=e=>e.includes("deg")||"0"===e?e:`${e}deg`;return k(nB,{label:t("w.animation.transform.rotate"),children:A("div",{className:TJ.itemsWrap,children:[o&&A("div",{className:TJ.itemRowWrap,children:["X",k(cB,{logic:i.rotateX,className:TJ.input,value:d(s),onChange:e=>{const t=parseInt(e).toString();c("x",u(t))},suffix:"°"})]}),o&&A("div",{className:TJ.itemRowWrap,children:["Y",k(cB,{logic:i.rotateY,className:TJ.input,value:d(a),onChange:e=>{const t=parseInt(e).toString();c("y",u(t))},suffix:"°"})]}),A("div",{className:TJ.itemRowWrap,children:["Z",k(cB,{logic:i.rotateZ,className:TJ.input,value:d(l),onChange:e=>{const t=parseInt(e).toString();c("z",u(t))},suffix:"°"})]})]})})}var NJ="_itemsWrap_2ubzz_4",AJ="_itemRowWrap_2ubzz_11";const RJ=[...yP];function DJ(e){const{t:t}=VL(),n=z(IL);WD(n);const{transformState:i,transformChanged:r,onTransformChange:o,is3D:s}=e,{translateX:a,translateY:l,translateZ:c}=i,d=["0px","0%","0vw","0vh"],u=(e,t)=>{d.includes(t)&&(t="0"),o({[`translate${e.toUpperCase()}`]:t})},h=(e,t)=>kU(n,"y"===e?"top":"left",t);return k(nB,{label:t("w.animation.transform.translate"),children:A("div",{className:NJ,children:[A("div",{className:AJ,children:["X",k(YV,{inputStyle:{width:"69px"},logic:r.translateX,value:a,onChange:e=>{u("x",e)},unitConverter:e=>h("x",e),units:RJ,options:XV})]}),A("div",{className:AJ,children:["Y",k(YV,{inputStyle:{width:"69px"},logic:r.translateY,value:l,onChange:e=>{u("y",e)},units:RJ,unitConverter:e=>h("y",e),options:XV})]}),s&&A("div",{className:AJ,children:["Z",k(YV,{inputStyle:{width:"69px"},logic:r.translateZ,value:c,onChange:e=>{u("z",e)},units:RJ,unitConverter:e=>h("z",e),options:XV})]})]})})}var PJ,LJ,UJ,FJ,BJ,jJ={itemsWrap:"_itemsWrap_lq6ex_1",itemRowWrap:"_itemRowWrap_lq6ex_8"};function VJ(e){const{t:t}=VL(),{transformState:n,transformChanged:i,onTransformChange:r}=e,{skewX:o,skewY:s}=n,a=(e,t)=>{r({[`skew${e.toUpperCase()}`]:t})},l=e=>e.replace("deg",""),c=e=>e.includes("deg")||"0"===e?e:`${e}deg`;return k(nB,{label:t("w.animation.transform.skew"),children:A("div",{className:jJ.itemsWrap,children:[A("div",{className:jJ.itemRowWrap,children:["X",k(cB,{logic:i.skewX,className:jJ.input,value:l(o),onChange:e=>{const t=parseInt(e).toString();a("x",c(t))},suffix:"°"})]}),A("div",{className:jJ.itemRowWrap,children:["Y",k(cB,{logic:i.skewY,className:jJ.input,value:l(s),onChange:e=>{const t=parseInt(e).toString();a("y",c(t))},suffix:"°"})]})]})})}function zJ(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=qe(e)?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"==typeof e[n]?t[n]=zJ(e[n]):t[n]=e[n]})),t}!function(e){e.GET="get",e.HAS="has",e.ITERATE="iterate"}(PJ||(PJ={})),function(e){e.SET="set",e.ADD="add",e.DELETE="delete",e.CLEAR="clear"}(LJ||(LJ={})),new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter($e)),function(e){e.SKIP="__v_skip",e.IS_REACTIVE="__v_isReactive",e.IS_READONLY="__v_isReadonly",e.RAW="__v_raw"}(UJ||(UJ={})),function(e){e[e.INVALID=0]="INVALID",e[e.COMMON=1]="COMMON",e[e.COLLECTION=2]="COLLECTION"}(FJ||(FJ={})),function(e){e[e.none=0]="none",e[e.update=1]="update",e[e.undoRedo=2]="undoRedo"}(BJ||(BJ={}));const KJ=T.exports.forwardRef(((e,t)=>{const{animationStyle:n,updateStyle:i,is3D:r}=e,{transformState:o,transformChanged:s,showTransformState:a}=T.exports.useMemo((()=>{const e=cP(n.transform||""),t={};return Object.keys(aP).forEach((n=>{const i=e[n]&&e[n]!==aP[n];Reflect.set(t,n,i)})),{transformState:e,transformChanged:t,showTransformState:w(w({},aP),e)}}),[n]),l=e=>{const t=zJ(o);Object.keys(e).forEach((n=>{const i=e[n];i===aP[n]?Reflect.deleteProperty(t,n):Reflect.set(t,n,i)}));const n=lP(t);i({transform:n})};return Ye((()=>{if(!r){const e={};["rotateX","rotateY","scaleZ","translateZ"].forEach((t=>{Reflect.set(e,t,aP[t])})),l(e)}}),[r]),T.exports.useImperativeHandle(t,(()=>({reset3DEffect:()=>{l({scaleZ:aP.scaleZ,rotateX:aP.rotateX,rotateY:aP.rotateY,translateZ:aP.translateZ})}}))),A(be,{children:[k(DJ,{is3D:r,transformState:a,transformChanged:s,onTransformChange:l}),k(OJ,{is3D:r,transformState:a,transformChanged:s,onTransformChange:l}),k(VJ,{transformState:a,transformChanged:s,onTransformChange:l}),k(MJ,{is3D:r,transformState:a,transformChanged:s,onTransformChange:l}),k(vB,{})]})}));var WJ,HJ,$J={animationViewContainer:"_animationViewContainer_wlepn_1",animationBar:"_animationBar_wlepn_10",animationControlBar:"_animationControlBar_wlepn_19",previewButton:"_previewButton_wlepn_28",finishButton:"_finishButton_wlepn_34",actionBar:"_actionBar_wlepn_41"};function qJ(){var e,t;const{t:n}=VL(),[i,r]=P(SL),[o,s]=P(IL),[a,l]=P(OL),{model:c}=ID;WD(o&&i);const d=z(UD),u=c.getNodeById(o),{animation:h,trigger:p,triggerAnimationType:f,triggerAnimations:g}=YX(i,o),m=p.type===Xn.loadScroll,_=T.exports.useMemo((()=>"from"===a?vX.start:vX.end),[a]),{scrollValues:v,updateScrollValue:y,createNewScrollTimeline:x}=rJ(p,h),{mirrorAnimation:C,addMirrorAnimation:E,removeMirrorAnimation:S,updateAnimationEffects:I}=tJ(o,h,p),{ids:O,addIds:M,removeIds:R}=iJ("animation-3D-ids"),{ids:D,addIds:L,removeIds:U}=iJ("animation-mirror-ids"),F=null!=(t=null==(e=KG.find((e=>e.type===p.type)))?void 0:e.title)?t:"",{nodeStyle:B,computedStyle:j,createEffect:V}=XX(o),{style:K,animationStyle:W,pairEffectProps:H,mergeStyle:$,commitAndMerge:q}=function(e,t,n,i){const r=z(OL),o=T.exports.useMemo((()=>{const e=nJ(t,r,n);return Object.keys(e).reduce(((t,n)=>(e[n]&&Reflect.set(t,n,e[n]),t)),{})}),[e,t,r]),s=T.exports.useMemo((()=>t?$X(t.effects):{from:{},to:{}}),[e,t]);return{style:T.exports.useMemo((()=>w(w({},n),o)),[o,n]),animationStyle:o,pairEffectProps:s,mergeStyle:e=>{const t=w(w({},o),e);return Object.keys(e).forEach((r=>{("transform"===r&&!e[r]||"transform"!==r&&(n[r]?e[r]===n[r]:e[r]===i[r]))&&Reflect.deleteProperty(t,r)})),t},commitAndMerge:hD}}(o,h,B,j),{timing:Y,updateTiming:G}=GX(p,h),{initAnimationOverrideStyle:X,unInitAnimationOverrideStyle:J,updateAnimationOverrideStyle:Q}=function(e){const{viewModel:t}=ID,n=z(OL),i=(e,t)=>{const n=w({},t);return n.transform&&(n.transform=KX(n.transform,e.transform)),n};return{initAnimationOverrideStyle:()=>{e.forEach((e=>{const{effects:r}=e,{targetId:o}=r,s=ID.getDeclaredStyle(o),a=nJ(e,n,s),l=i(s,a);t.addOverrideStyle(o,l)}))},unInitAnimationOverrideStyle:()=>{t.clearAllOverrideStyle()},updateAnimationOverrideStyle:(e,n)=>{const[r]=t.getOverrideStyle(e),o=ID.getDeclaredStyle(e),s=i(o,n);r?t.updateOverrideStyle(r.id,s):t.addOverrideStyle(e,s)}}}(g),Z=T.exports.useRef(),[ee,te]=T.exports.useState(!1),ne=T.exports.useRef(),ie=T.exports.useRef(),re=T.exports.useMemo((()=>f!==zn.appearance),[f]),oe=!m,se=T.exports.useMemo((()=>`${i}|${o}`),[i,o]),ae=T.exports.useMemo((()=>D.includes(se)),[se,D]),le=T.exports.useMemo((()=>O.includes(se)),[se,O]),ce=T.exports.useMemo((()=>Y.iterations===1/0),[Y]),de=T.exports.useMemo((()=>{const e=c.getNodeById(o);return WD(e),to(e)}),[o]);WD(d&&u),T.exports.useEffect((()=>{if(h){const e=qX(h.effects,a),{transform:t=""}=e,n=cP(t);["perspective","scaleZ","rotateX","rotateY","translateZ"].some((e=>n[e]&&n[e]!==aP[e]))&&!le&&M([se])}}),[o]),T.exports.useEffect((()=>{h&&C&&!ae&&L([se])}),[h,C]),T.exports.useEffect((()=>(X(),()=>{J()})),[a]),T.exports.useEffect((()=>(TB({message:n("w.animation.control.selectTips"),duration:3e3}),()=>{ne.current=void 0,s(null),VG()})),[]);const ue=T.exports.useMemo((()=>JJ(W)),[W]);T.exports.useEffect((()=>{Q(o,W)}),[W]);const he=e=>{if(G(e),h){const t=AR(h.effects);Reflect.set(t,"timing",w(w({},Y),e)),ID.transform((()=>{I(t)}))}},pe=e=>{const t=AR(H),n=$(e);Reflect.set(t,a,n);const{to:r,from:o}=t;if([r,o].some((e=>!JJ(e)&&Object.values(e).some((e=>Boolean(e)))))){const e=h?HX(h.effects):f,n=m?Fn.both:QX[e],r=V(e,t,b(w({},Y),{fill:n}));ID.transform((()=>{if(h)I(r);else{let e;WD(!C),m&&(e=x());const t=c.addAnimation(i,r,e);ae&&E(t)}}))}else h&&!ue&&ID.transform((()=>{C&&S(),c.removeAnimation(h.id)}))},fe={node:d,style:K,nodeStyle:B,animationStyle:W,selection:[o],updateStyle:pe,commitAndMerge:q,addStyle:pe},ge={loopShow:oe,mirrorShow:re,is3D:le,isMirror:ae,isLoop:ce,handleLoopChange:e=>{he({iterations:e?1/0:1})},handleMirrorChange:()=>{ae?(h&&C&&ID.transform((()=>{S()})),U([se])):(h&&!C&&ID.transform((()=>{E()})),L([se]))},handle3DChange:()=>{var e;le?(R([se]),null==(e=Z.current)||e.reset3DEffect()):M([se])},handleRemoveEffect:()=>{h&&ID.transform((()=>{S(),c.removeAnimation(h.id)}))}};return A(T.exports.Fragment,{children:[A("div",{className:N($J.animationViewContainer,rL),children:[k(fB,{style:{marginTop:"8px"},children:n(F)}),k(xK,{show:m&&v.length>0,children:k(xX,{scrollKey:_,setScrollKey:e=>{const t=e===vX.start?"from":"to";l(t)},scrollValues:v,updateScrollValue:y})}),k(vB,{}),k(fB,{style:{marginTop:"-8px"},slotAdd:k(XJ,w({},ge)),children:n("w.animation.timing.effect")}),k(SJ,{showOthers:!m,timing:Y,updateTiming:he}),k(CJ,w({showText:de},fe)),k(KJ,{ref:Z,is3D:le,nodeStyle:B,animationStyle:W,updateStyle:pe})]}),k(YJ,{previewDisabled:g.length<=0,playing:ee,onFinish:()=>{r(null),s(null)},onPreview:()=>{const e=p.type===Xn.loadScroll;var t;ee?(ne.current=void 0,VG(),X(),e&&te(!1)):(null==(t=ie.current)||t.call(ie),J(),ID.view.nextTick((()=>{ne.current=()=>{ie.current=void 0,X()};const e=g.map((e=>{const t=AR(e);return t.effects.timing.iterations=1,t}));ie.current=jG(e,!0,(()=>{var e;null==(e=ne.current)||e.call(ne),ne.current=void 0}))})),e&&te(!0))}})]})}function YJ(e){const{t:t}=VL(),{previewDisabled:n,playing:i,onFinish:r,onPreview:o}=e;return k("div",{className:$J.animationBar,children:A("div",{className:$J.animationControlBar,children:[k(ae,{variant:"primary",disabled:n,click:o,className:$J.previewButton,children:k(AL,{slot:"icon",name:i?"Stop":"Play"})}),k(ae,{click:r,className:$J.finishButton,children:t("w.animation.control.finish")})]})})}(HJ=WJ||(WJ={})).open="open",HJ.close="close";const GJ=[{value:WJ.close,label:"w.animation.control.close"},{value:WJ.open,label:"w.animation.control.open"}];function XJ(e){const[t,n]=T.exports.useState(!1),{t:i}=VL(),{isLoop:r,is3D:o,isMirror:s,loopShow:a,mirrorShow:l,handleLoopChange:c,handle3DChange:d,handleMirrorChange:u,handleRemoveEffect:h}=e;return k("span",{className:$J.actionBar,children:k(KB,{popoverStyle:{width:"256px"},title:i("w.animation.presets"),visible:t,onVisibleChange:()=>{n(!t)},trigger:k(ke,{quiet:!0,className:$J.addMenu,children:k(AL,{slot:"icon",className:$J.icon,name:"MoreHoriz"})}),content:A("div",{children:[k(xK,{show:a,children:k(nB,{label:i("w.animation.control.loop"),children:k(aj,{selected:r?WJ.open:WJ.close,options:GJ.map((e=>b(w({},e),{label:i(e.label)}))),onChange:e=>{c(e===WJ.open)},radioStyle:{padding:"13px 23px"}})})}),k(xK,{show:l,children:k(nB,{label:i("w.animation.control.mirror"),children:k(aj,{selected:s?WJ.open:WJ.close,options:GJ.map((e=>b(w({},e),{label:i(e.label)}))),onChange:e=>{u(e===WJ.open)},radioStyle:{padding:"13px 23px"}})})}),k(nB,{label:i("w.animation.control.3d"),children:k(aj,{selected:o?WJ.open:WJ.close,options:GJ.map((e=>b(w({},e),{label:i(e.label)}))),onChange:e=>{d(e===WJ.open)},radioStyle:{padding:"13px 23px"}})})]}),fitToConfigPanel:!0})})}function JJ(e){return Object.keys(e).length<=0}var QJ="_animationItem_179lx_1";function ZJ(e){const{tab:t}=e,n=z(RD),[i,r]=P(SL),[o,s]=P(IL);T.exports.useEffect((()=>()=>{r(null),s(null)}),[t]);const a=()=>{var e;ID.setContextKeyValue(ym.isAnimationEditing.key,!1),null==(e=ID.viewModel)||e.popSelection()},l=T.exports.useMemo((()=>Boolean(i&&o)),[i,o]);return T.exports.useEffect((()=>{var e;return l&&(ID.setContextKeyValue(ym.isAnimationEditing.key,l),null==(e=ID.viewModel)||e.stashSelection()),()=>{l&&a()}}),[l]),T.exports.useEffect((()=>()=>{a()}),[]),1!==n.length?null:k("section",{className:QJ,children:k(l?qJ:xJ,{})})}var eQ,tQ,nQ="_configPanel_1m4cs_1",iQ="_tabs_1m4cs_10",rQ="_tabButton_1m4cs_22",oQ="_tabPanel_1m4cs_30",sQ="_drawer_1m4cs_34",aQ="_animationDrawer_1m4cs_46";function lQ(e,t){const[n,i]=we(),r=gK();function o(){ID.getContextKeyValue(e,(e=>{i(e)}))}return T.exports.useEffect((()=>{let t;return ID.onDidContextKeysChange([e],o,(e=>{t=e})),()=>{null==t||t.dispose()}}),[r,e]),T.exports.useEffect(o,[r,...t]),n}function cQ(){const e=lQ(ym.viewMode.key,[]),t=e===pm.Editing,n=e===pm.Preview;return{editorMode:null!=e?e:pm.Editing,isInEditingMode:t,isInPreviewMode:n,setEditorMode:function(e){ID.editor.setMode(e)}}}function dQ(){const e=z(UD);if(!e)return null;const t=ao(e);return k("div",{className:N(sQ,rL),children:k(t?VK:BK,{})})}function uQ(e){return k("div",{className:N(sQ,aQ,rL),children:k(ZJ,w({},e))})}function hQ(){const{t:e}=VL(),[t]=P(CL),n=z(RD),{isInPreviewMode:i,editorMode:r}=cQ(),o=Ge(n,((e,t)=>!Jt(e,t,Object.is))),[s,a]=T.exports.useState(eQ.design),l="configPanelTabs";return T.exports.useEffect((()=>{document.querySelectorAll("active-overlay").forEach((e=>e.remove()))}),[o]),T.exports.useEffect((()=>{var e;const t=null==(e=ID.view)?void 0:e.getViewport();t&&(ID.setViewportWidth(t.logicWidth+1),setTimeout((()=>{ID.setViewportWidth(t.logicWidth)}),100))}),[r]),!t||i?null:k("div",{className:nQ,children:A(Xe,{id:l,className:iQ,selected:eQ.design,change:function(e){var t;(null==(t=e.target)?void 0:t.id)===l&&a(e.target.selected||eQ.design)},children:[k(Je,{className:rQ,value:eQ.design,children:e("w.design")}),k(Je,{className:rQ,value:eQ.animation,children:e("w.animation")}),k(Je,{className:rQ,value:eQ.settings,children:e("w.setting")}),k(Qe,{className:oQ,value:eQ.design,children:k(dQ,{})}),k(Qe,{className:oQ,value:eQ.animation,children:k(uQ,{tab:s})}),k(Qe,{className:oQ,value:eQ.settings,children:k(TW,{})})]})})}(tQ=eQ||(eQ={})).design="design",tQ.animation="animation",tQ.settings="settings";var pQ="_container_z577f_1",fQ="_left_z577f_8",gQ="_mid_z577f_13",mQ="_bp_z577f_22",_Q="_activeBp_z577f_32",vQ="_viewportInputWrap_z577f_45",yQ="_viewportInput_z577f_45",wQ="_viewportInputUnit_z577f_61",bQ="_right_z577f_65",xQ="_navBtnIcon_z577f_78",CQ="_iconDisabled_z577f_81",kQ="_buttonGroup_z577f_85",EQ="_popoverMenu_z577f_91",SQ="_hoverPopoverMenu_z577f_95",IQ="_devicePopoverTitle_z577f_99",OQ="_devicePopoverContent_z577f_108",TQ="_devicePopoverExplain_z577f_117",MQ="_icon_z577f_81",NQ="_iconAlign_z577f_148";var AQ,RQ,DQ="_container_1frck_1",PQ="_editorToolbar_1frck_4",LQ="_siteManage_1frck_38 _itemHover_1frck_23 _activeItem_1frck_30 _itemLayout_1frck_17",UQ="_layer_1frck_42 _itemHover_1frck_23 _activeItem_1frck_30 _itemLayout_1frck_17",FQ="_add_1frck_46 _itemHover_1frck_23 _activeItem_1frck_30 _itemLayout_1frck_17",BQ="_menuBtnIcon_1frck_50",jQ="_divider_1frck_54",VQ="_popoverMenu_1frck_59";(RQ=AQ||(AQ={})).NOT_CREATED="NOT_CREATED",RQ.SAVED="SAVED",RQ.MODIFIED="MODIFIED";const zQ=rn("recordService");function KQ(){const{t:e}=VL(),[t,n]=P(xL),i=ZL(zQ);function r(){n(null)}function o(e){n(e)}function s(){window.location.href="/"}function a(){null==i||i.import()}function l(){return A(Ze,{className:VQ,children:[A(Ce,{click:s,children:[k(AL,{slot:"icon",name:"Home"}),e("w.menu.returnHome")]}),k(et,{}),A(Ce,{click:a,children:[k(AL,{slot:"icon",name:"Add"}),e("w.menu.import")]})]})}return T.exports.useEffect((()=>{var e;t||null==(e=document.activeElement)||e.blur(),ID.execEditorCommand("fitCanvas")}),[t]),A("div",{className:N([DQ,"editorDispatchKeyEventClass"]),children:[A("div",{className:PQ,children:[k(KB,{options:{placement:"bottom-start"},content:k(l,{}),trigger:k("div",{tabIndex:1,className:N({[LQ]:!0}),children:k(AL,{className:BQ,name:"Menu"})})}),k(U,{className:jQ,vertical:!0}),k("div",{tabIndex:2,className:N({[UQ]:!0}),onClick:()=>t===wL.layer?r():o(wL.layer),children:k(AL,{className:BQ,name:"Layers"})}),k("div",{tabIndex:3,className:N({[FQ]:!0}),onClick:()=>t===wL.add?r():o(wL.add),children:k(AL,{className:BQ,name:"Add"})})]}),k("div",{})]})}var WQ="_buttonDisabled_ilxqq_12",HQ="_navButton_ilxqq_20 _buttonHover_ilxqq_1";function $Q(e){const t=e,{children:n,onClick:i,disabled:r}=t,o=x(t,["children","onClick","disabled"]);return k("div",b(w({className:N(HQ,{[WQ]:r}),onClick:function(e){i&&i(e)}},o),{children:n}))}var qQ,YQ="_saveButtonContainer_1kh4r_1",GQ="_saveButtonMessage_1kh4r_26",XQ="_buttonDisabled_1kh4r_31",JQ="_saveStatusInfo_1kh4r_37",QQ="_saveStatusWarning_1kh4r_41",ZQ="_saveStatusError_1kh4r_45",eZ="_saveStatusCompleted_1kh4r_49",tZ="_savingIcon_1kh4r_53",nZ="_savingIconCircle1_1kh4r_77",iZ="_savingIconCircle2_1kh4r_84",rZ="_savingIconCircle3_1kh4r_91",oZ="_pointerIcon_1kh4r_116";!function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"}(qQ||(qQ={}));class sZ{constructor(){C(this,"_coreKeybindings"),C(this,"_extensionKeybindings"),C(this,"_cachedMergedKeybindings"),this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if($R===HR.Windows){if(e&&e.win)return e.win}else if($R===HR.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}static bindToCurrentPlatform2(e){if($R===HR.Windows){if(e&&e.win)return e.win}else if($R===HR.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=sZ.bindToCurrentPlatform(e);if(t&&t.primary){const n=mF(t.primary,$R);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const i=mF(t.secondary[n],$R);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,-n-1,e.when)}}setExtensionKeybindings(e){const t=[];let n=0;for(let i=0,r=e.length;i<r;i++){const r=e[i],o=sZ.bindToCurrentPlatform2(r);o&&o.primary&&(t[n++]={keybinding:o.primary,command:r.id,commandArgs:r.args,when:r.when,weight1:r.weight,weight2:0,extensionId:r.extensionId||null,isBuiltinExtension:r.isBuiltinExtension||!1})}this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return this.registerKeybindingRule(e),kD.registerCommand(e)}static _mightProduceChar(e){return e>=aF.KEY_0&&e<=aF.KEY_9||(e>=aF.KEY_A&&e<=aF.KEY_Z||(e===aF.US_SEMICOLON||e===aF.US_EQUAL||e===aF.US_COMMA||e===aF.US_MINUS||e===aF.US_DOT||e===aF.US_SLASH||e===aF.US_BACKTICK||e===aF.ABNT_C1||e===aF.ABNT_C2||e===aF.US_OPEN_SQUARE_BRACKET||e===aF.US_BACKSLASH||e===aF.US_CLOSE_SQUARE_BRACKET||e===aF.US_QUOTE||e===aF.OEM_8||e===aF.OEM_102))}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&sZ._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,r,o){$R===HR.Windows&&this._assertNoCtrlAlt(e,t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:i,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(dZ)),this._cachedMergedKeybindings.slice(0)}clear(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}}const aZ="KeybindingsRegistry";let lZ=Reflect.get(globalThis,aZ);lZ||(lZ=new sZ,Reflect.set(globalThis,aZ,lZ));const cZ=lZ;function dZ(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}class uZ extends am{constructor(e){super({id:"save",kbOpts:{weight:qQ.WorkbenchContrib,primary:fF.CtrlCmd|aF.KEY_S}}),this.cb=e}async runEditorCommand(e,t,n){this.cb()}}function hZ(){return k("div",{className:tZ,children:A("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"currentcolor",xmlns:"http://www.w3.org/2000/svg",children:[k("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75 9C5.75 6.65279 7.65279 4.75 10 4.75C11.8145 4.75 13.3653 5.88747 13.9745 7.49086L14.2341 8.17414L14.9238 7.9322C15.2597 7.81439 15.6215 7.75 16 7.75C17.7949 7.75 19.25 9.20507 19.25 11C19.25 11.0908 19.2463 11.1806 19.239 11.2693L19.1966 11.788L19.6676 12.0093C20.6041 12.4493 21.25 13.4 21.25 14.5C21.25 15.848 20.2801 16.9695 19 17.2047V18.7209C21.1116 18.4734 22.75 16.6781 22.75 14.5C22.75 12.9776 21.9495 11.6434 20.7488 10.8932C20.692 8.31918 18.5877 6.25 16 6.25C15.6916 6.25 15.3895 6.2795 15.0967 6.33593C14.1364 4.50243 12.2152 3.25 10 3.25C6.90712 3.25 4.38459 5.69193 4.25521 8.75298C2.47946 9.59416 1.25 11.4027 1.25 13.5C1.25 15.8783 2.83138 17.8872 5 18.5326V16.938C3.67557 16.3593 2.75 15.0377 2.75 13.5C2.75 11.8664 3.79496 10.475 5.2552 9.96133L5.78335 9.77555L5.7554 9.21638C5.75181 9.14476 5.75 9.07263 5.75 9Z"}),k("circle",{className:nZ,cx:"8",cy:"18",r:"1.25"}),k("circle",{className:iZ,cx:"12",cy:"18",r:"1.25"}),k("circle",{className:rZ,cx:"16",cy:"18",r:"1.25"})]})})}function pZ(){const[e,t]=T.exports.useState(!1),[n,i]=T.exports.useState(!1),{editorMode:r}=cQ(),{recordService:o,message:s,status:a,type:l,setMessage:c,setType:d}=function(){const e=ZL(zQ),[t,n]=T.exports.useState(),[i,r]=T.exports.useState(""),[o,s]=T.exports.useState("");return T.exports.useEffect((()=>{let t;return e&&(t=e.onUpdated((({status:e,message:t,type:i})=>{n(e),r(t||""),s(i||"info")}))),()=>{t&&t.dispose()}}),[e]),{recordService:e,status:t,message:i,type:o,setMessage:r,setType:s,setStatus:n}}(),u=e||!o||!window.navigator.onLine;async function h(){u||(t(!0),i(!1),await o.manualSave({release:!1}).then((()=>{t(!1),i(!0),setTimeout((()=>{i(!1)}),5e3)})).catch((e=>{d("error"),c(e.message),t(!1),i(!1)})))}!function(e,t){let n;T.exports.useEffect((()=>(e===pm.Editing&&(n=dm(new uZ(t))),()=>{null==n||n.dispose()})),[e,t])}(r,h);const p=n?"CloudDone":"CloudOff";return s||a===AQ.MODIFIED||n||e?A("div",{className:N(YQ,{[XQ]:u}),children:[k("button",{className:N({[JQ]:"info"===l,[QQ]:"warning"===l,[ZQ]:"error"===l,[eZ]:n}),disabled:u,onClick:h,children:e?k(hZ,{}):k(AL,{name:p})}),s?A("div",{className:GQ,children:[k("span",{children:s}),k("svg",{className:oZ,width:"36",height:"5",viewBox:"0 0 36 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:k("path",{d:"M19.2882 1.17113L22.3557 3.95976C23.092 4.62911 24.0514 5 25.0464 5L10.5518 5C11.4875 5 12.3937 4.67194 13.1125 4.07289L16.6625 1.11456C17.4293 0.475611 18.5497 0.499748 19.2882 1.17113Z",fill:"#383838"})})]}):null]}):null}function fZ(e){const t=e,{children:n}=t,i=x(t,["children"]);return k(fe,{color:"light",scale:"medium",children:k(tt,b(w({},i),{children:n}))})}const gZ=rn("undoRedoService");function mZ(){const{isInEditingMode:e}=cQ();return k(fe,{color:"dark",scale:"medium",children:A("div",{className:pQ,style:{height:`${ID.navBarHeight}px`},children:[e&&k("div",{className:fQ,children:k(KQ,{})}),k(CZ,{}),k(_Z,{})]})})}function _Z(){const{t:e}=VL(),t=z(ND),[n,i]=P(CL),{isInEditingMode:r,setEditorMode:o}=cQ(),s=ZL(zQ);return T.exports.useEffect((()=>{setTimeout((()=>{ID.execEditorCommand("fitCanvas")}),0)}),[n]),A("div",r?{className:bQ,children:[k(pZ,{}),A(fZ,{placement:"bottom-start",children:[A($Q,{slot:"trigger",children:[(100*((null==t?void 0:t.scale)||1)).toFixed(0),"%"]}),k(nt,{slot:"click-content",children:k(yZ,{})})]}),k("div",{className:kQ,children:k(wZ,{})}),k(ae,{variant:"primary",onClick:function(){setTimeout((()=>{o(pm.Preview),null==s||s.preview()}))},children:e("w.nav.preview")}),k(vZ,{}),k($Q,{onClick:()=>i(!n),children:k(AL,{className:xQ,name:"Tune"})})]}:{className:bQ,children:[k(ae,{variant:"primary",onClick:function(){o(pm.Editing)},children:e("w.nav.edit")}),k(vZ,{style:{marginRight:24}})]})}function vZ(e){const{t:t}=VL(),n=ZL(zQ);return k(ae,b(w({variant:"cta",onClick:function(){null==n||n.release()}},e),{children:t("w.nav.publish")}))}function yZ(){const{t:e}=VL();return A(Ze,{className:EQ,change:e=>{!function(e){switch(e){case"zoomOut":ID.execEditorCommand("zoomOut");break;case"zoomIn":ID.execEditorCommand("zoomIn");break;case"zoomReset":ID.execEditorCommand("zoomReset")}}(e.target.value)},children:[A(Ce,{value:"zoomIn",children:[A("span",{slot:"value",children:[k(AL,{name:"Command",className:NQ}),k(AL,{name:"Add",className:NQ})]}),e("w.zoom.zoomIn")]}),A(Ce,{value:"zoomOut",children:[A("span",{slot:"value",children:[k(AL,{name:"Command",className:NQ}),k(AL,{name:"Remove",className:NQ})]}),e("w.zoom.zoomOut")]}),A(Ce,{value:"zoomReset",children:[A("span",{slot:"value",children:[k(AL,{name:"Command",className:NQ}),k("span",{className:N([MQ,NQ]),children:"0"})]}),e("w.zoom.100%")]})]})}function wZ(){const{canUndo:e,canRedo:t}=function(){const[e,t]=T.exports.useState({canRedo:!1,canUndo:!1}),n=gK(),i=ZL(gZ),{run:r}=le((()=>{i&&t({canUndo:i.canUndo(),canRedo:i.canRedo()})}),{wait:50});return T.exports.useEffect((()=>{var e;r();const t=null==(e=ID.model)?void 0:e.onUpdated(r);return()=>{null==t||t.dispose()}}),[n]),e}();return A(T.exports.Fragment,{children:[k($Q,{onClick:function(){ID.undo()},children:k(AL,{className:N({[xQ]:!0,[CQ]:!e}),name:"Undo"})}),k($Q,{onClick:function(){ID.redo()},children:k(AL,{className:N({[xQ]:!0,[CQ]:!t}),name:"Redo"})})]})}var bZ,xZ;function CZ(){const[e,t]=T.exports.useState(0),n=z(MD),i=z(AD),r=z(ND),{t:o}=VL(),s=T.exports.useRef(null);return lB(s),T.exports.useEffect((()=>{(null==r?void 0:r.logicWidth)&&t(r.logicWidth)}),[null==r?void 0:r.logicWidth]),A("div",{className:gQ,children:[k("div",{className:kQ,children:n.map((e=>{const{maxWidth:t}=e;let r=bZ.Desktop,o={title:"w.device.desktop",content:"w.device.desktop.breakpoint",explain:"w.device.desktop.desc"};return t<=750?(r=bZ.Smartphone,o={title:"w.device.phone",content:"w.device.phone.breakpoint",explain:"w.device.phone.desc"}):t<=1e3&&(r=bZ.TabletMac,o={title:"w.device.tablet",content:"w.device.tablet.breakpoint",explain:"w.device.tablet.desc"}),A(fZ,{placement:"bottom",children:[k("div",{slot:"trigger",onClick:()=>function(e){const t=n.find((t=>t.id===e)),i=n[1].maxWidth;KD(t),"__baseBreakpointId__"===e?ID.defaultCanvasWidth<i?ID.setViewportWidth(i+100):ID.resetEditorViewport():t.minWidth>750?ID.setViewportWidth(768):(r=t,r.minWidth>300?ID.setViewportWidth(360):ID.setViewportWidth(null==t?void 0:t.minWidth));var r}(e.id),className:N({[mQ]:!0,[_Q]:r===bZ.Desktop?!i:(null==i?void 0:i.id)===e.id}),children:k(AL,{className:xQ,name:r})}),k(nt,{slot:"hover-content",delayed:!0,children:k(kZ,{detail:o})})]},e.id)}))}),A("div",{className:vQ,children:[k("input",{ref:s,className:yQ,type:"text",value:e,onChange:e=>t(e.target.value),onBlur:e=>{!function(e){if(e>1e4||e<320)return TB({message:o("w.device.adjustTips"),duration:2e3,showClose:!1}),void((null==r?void 0:r.logicWidth)&&t(null==r?void 0:r.logicWidth));ID.setViewportWidth(e)}(function(e){var n;const i=parseInt(null==(n=e.target)?void 0:n.value);if(Number.isNaN(i)){const e=(null==r?void 0:r.logicWidth)||320;return t(e),e}return i}(e))}}),k("span",{className:wQ,children:"px"})]})]})}function kZ(e){const{t:t}=VL(),{title:n,content:i,explain:r}=e.detail;return A("div",{className:SQ,children:[k("p",{className:IQ,children:t(n)}),k("p",{className:OQ,children:t(i)}),k("p",{className:TQ,children:t(r)})]})}(xZ=bZ||(bZ={})).Desktop="Desktop",xZ.Smartphone="Smartphone",xZ.TabletMac="TabletMac",q.t("w.device.desktop"),q.t("w.device.desktop.breakpoint"),q.t("w.device.desktop.desc"),q.t("w.device.phone"),q.t("w.device.phone.breakpoint"),q.t("w.device.phone.desc"),q.t("w.device.tablet"),q.t("w.device.tablet.breakpoint"),q.t("w.device.tablet.desc");var EZ="_toolbar_1d429_1";var SZ="_wrapper_1v0un_1",IZ="_underlay_1v0un_13",OZ="_dialog_1v0un_21",TZ="_content_1v0un_25",MZ="_leftBar_1v0un_30",NZ="_rightBar_1v0un_39",AZ="_footer_1v0un_45",RZ="_radioItem_1v0un_54",DZ="_linkBtn_1v0un_58";var PZ={emptyContent:"_emptyContent_1akk1_1",emptyWord:"_emptyWord_1akk1_14",emptyTitle:"_emptyTitle_1akk1_21",fieldItem:"_fieldItem_1akk1_29",inputItem:"_inputItem_1akk1_34"};q.t("w.link.type.none"),q.t("w.link.type.site"),q.t("w.link.type.anchor"),q.t("w.link.type.phone"),q.t("w.link.type.email");const LZ=[{value:gB.none,title:"w.link.type.none",content:FZ},{value:gB.site,title:"w.link.type.site",content:function(e){const{t:t}=VL(),{linkInfo:n,onChange:i}=e,r=VZ();return A("div",{className:PZ.pageContent,children:[k(jZ,{id:"site",label:t("w.link.href"),children:k(H,{className:PZ.inputItem,autofocus:r,value:n.href,placeholder:t("w.link.placeholder.site"),change:e=>{i("href",e)}})}),k(jZ,{id:"target",label:t("w.link.target"),children:k(BZ,{target:n.target,onChange:e=>{i("target",e)}})})]})}},{value:gB.anchor,title:"w.link.type.anchor",content:function(e){const{t:t}=VL(),{pageList:n,anchorList:i,linkInfo:r,onChange:o}=e;n.map((e=>{const{title:t,value:n}=e;return{label:t,value:n}}));const s="none",a=i.length>0?i.map((e=>{const{title:t,value:n}=e;return{label:t,value:n}})):[{label:t("w.link.anchorEmpty"),value:s}],l=i.length<=0;return k("div",{className:PZ.pageContent,children:k(jZ,{id:"anchor",label:t("w.link.title.anchor"),children:k(BV,{className:PZ.inputItem,disabled:l,value:l?s:r.anchor,options:a,onChange:e=>{o("anchor",e)}})})})}},{value:gB.phone,title:"w.link.type.phone",content:function(e){const{t:t}=VL(),{linkInfo:n,onChange:i}=e,r=VZ();return k("div",{className:PZ.pageContent,children:k(jZ,{id:"phone",label:t("w.link.title.phone"),children:k(H,{className:PZ.inputItem,autofocus:r,value:n.href,placeholder:t("w.link.placeholder.phone"),change:e=>{i("href",e)}})})})}},{value:gB.email,title:"w.link.type.email",content:function(e){const{t:t}=VL(),{linkInfo:n,onChange:i}=e,r=VZ();return k("div",{className:PZ.pageContent,children:k(jZ,{id:"email",label:t("w.link.title.email"),children:k(H,{className:PZ.inputItem,autofocus:r,value:n.href,placeholder:t("w.link.placeholder.email"),change:e=>{i("href",e)}})})})}}];function UZ(e){var t,n;const{linkInfo:i,onChange:r,pageList:o,anchorList:s}=e,a=null!=(t=null==i?void 0:i.type)?t:gB.none,l=(null==(n=LZ.find((e=>e.value===a)))?void 0:n.content)||FZ;return k(l,{pageList:o,anchorList:s,linkInfo:i,onChange:r})}function FZ(){const{t:e}=VL();return A("div",{className:PZ.emptyContent,children:[k("p",{className:PZ.emptyTitle,children:e("w.link.listEmpty")}),k("p",{className:PZ.emptyWord,children:e("w.link.listEmpty.desc")})]})}function BZ(e){const{target:t,onChange:n}=e,i=VZ(),{t:r}=VL();return A(ve,{autofocus:i,name:"linkTargetType",vertical:!0,selected:t,change:n,children:[k(ye,{emphasized:!0,value:"_self",className:PZ.inputItem,children:r("w.link.target.self")},"_self"),k(ye,{emphasized:!0,value:"_blank",className:PZ.inputItem,children:r("w.link.target.blank")},"_blank")]})}function jZ(e){const{label:t,id:n,children:i}=e;return A("div",{className:PZ.fieldItem,children:[k(re,{for:n,children:t}),i]})}function VZ(){const[e,t]=T.exports.useState(!1);return T.exports.useEffect((()=>{let e=setTimeout((()=>{t(!0),e=0}),100);return()=>{clearTimeout(e)}}),[]),e}const zZ=[],KZ={type:gB.none,href:"",anchor:"",target:"_blank",rel:zs[""]};function WZ(e){const{link:t,open:n,onClose:i}=e,{removeLink:r,updateLink:o}=function(){const e=z(RD);return{updateLink:t=>{const n=t,{type:i,target:r,rel:o}=n,s=x(n,["type","target","rel"]);if("none"===i)return;const a=kB.stringify(i,s),[l]=e;l&&a&&r?ID.transform((e=>{e.updateLink(l,a,r,o)})):console.error(jD.badRequest)},removeLink:()=>{const[t]=e;t?ID.transform((e=>{e.removeLink(t)})):console.error(jD.badRequest)}}}(),[s,a]=T.exports.useState(!1),[l,c]=T.exports.useState(KZ),{nodes:d}=z(TD),{t:u}=VL(),h=T.exports.useMemo((()=>d.filter((e=>{var t;return!!(null==(t=e.props)?void 0:t.id)})).map((e=>{const{id:t}=e.props;return{title:t,value:t}}))),[d]);function p(e){if(e){const{href:t,target:n}=e;let{href:i,type:r,anchor:o=""}=kB.parse(t);return r!==gB.anchor||h.find((e=>e.value===o))?r===gB.page&&zZ.find((e=>e.value===i))&&(i=""):o="",{target:n,href:i,type:r,anchor:o}}return w({},KZ)}function f(){i&&i()}return T.exports.useEffect((()=>{if(n){const e=p(t);c(e)}}),[n]),T.exports.useEffect((()=>{const e=p(t);c(e)}),[t]),T.exports.useEffect((()=>{const{type:e,href:t,anchor:n}=l,i=e!==gB.none&&(e!==gB.anchor&&!t||e===gB.anchor&&!n);a(i)}),[l]),n?A("div",{className:SZ,children:[k(it,{open:!0,className:IZ}),A(ge,{divider:!0,title:u("w.link"),dismissable:!0,className:OZ,close:f,children:[A("div",{className:TZ,children:[k("div",{className:MZ,children:k(ve,{vertical:!0,name:"linkType",selected:l.type,change:function(e){var t,n,i,r,o;const s=null==(t=e.target)?void 0:t.value;if(void 0===s)return;let a="_self",l="",d="";[gB.page,gB.anchor].includes(s)&&(l=null!=(i=null==(n=zZ[0])?void 0:n.value)?i:"",s===gB.anchor&&(d=null!=(o=null==(r=h[0])?void 0:r.value)?o:"")),[gB.page,gB.site].includes(s)&&(a="_blank"),c({type:s,href:l,target:a,anchor:d})},children:LZ.map((e=>k(ye,{emphasized:!0,value:e.value,className:RZ,children:u(e.title)},e.value)))})}),k(U,{vertical:!0}),k("div",{className:NZ,children:k(UZ,{linkInfo:l,pageList:zZ,anchorList:h,onChange:function(e,t){var n;c(b(w({},l),{[e]:null==(n=t.target)?void 0:n.value}))}})})]}),k(U,{}),k("div",{className:AZ,children:A(rt,{children:[k(ae,{variant:"secondary",className:DZ,onClick:f,children:u("w.dialog.cancel")}),k(ae,{variant:"cta",className:DZ,disabled:s,onClick:function(){const{type:e}=l;e===gB.none?r():o(l),f()},children:u("w.dialog.confirm")})]})})]})]}):null}var HZ="_btn_ldfe6_1";function $Z(){return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:HZ,onClick:function(){ID.execEditorCommand("wrap")},children:"放置在容器中"}),k(U,{vertical:!0})]})}function qZ(){const e=z(RD);if(1===e.length&&RU.isAutoLayout(e[0]))return null;return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:HZ,onClick:function(){ID.execEditorCommand("unwrap")},children:"移除容器"}),k(U,{vertical:!0})]})}const YZ=e=>{const[t,n]=T.exports.useState(e.data),[i,r]=T.exports.useState(!0),o=[...ot.materialRenderers];return A(T.exports.Fragment,{children:[k(st.JsonForms,{schema:e.dataSchema,data:t,renderers:o,cells:ot.materialCells,onChange:({errors:e,data:t})=>{(null==e?void 0:e.length)?r(!1):(r(!0),n(t))}}),k(at,{onClick:()=>{var n;return null==(n=e.onDataChange)?void 0:n.call(e,t)},disabled:!i,color:"primary",variant:"contained",children:"Confirm"})]})};var GZ=()=>{let e,t;return{async mount({container:n,data:i,context:r}){t=document.createElement("div");const o=lt(b(w({},ct()),{insertionPoint:t}));n.appendChild(t),e=dt.render(k(ut,{jss:o,children:k(YZ,{data:i.data,dataSchema:i.dataSchema,onDataChange:e=>{r.update({data:e})}})}),t)},async unmount({container:n}){e&&e.unmount?e.unmount():dt.unmountComponentAtNode(t),n.innerHTML=""}}};const{INITIAL:XZ,UPDATING:JZ,MOUNTED:QZ}=ht;var ZZ=({data:e,dataSchema:t,dataUserInterface:n,onDataChange:i})=>{const r=T.exports.createRef(),o=!!n;if(!t&&!n)throw new Error("options.dataSchema or options.dataUserInterface must exist");return T.exports.useEffect((()=>{const n=r.current;n.createRenderRoot=()=>n,n.data=o?e:{data:e,dataSchema:t},n.application=GZ;let s=XZ;n.addEventListener("statechange",(()=>{const e=(t=n.data,JSON.parse(JSON.stringify(t)));var t;s===JZ&&n.state===QZ&&i(e),s=n.state})),n.inactive=!1}),[]),k(T.exports.Fragment,{children:k("web-widget",{name:"web-widget-data-form",ref:r,inactive:!0})})};var e0="_panelContent_1ukq2_1",t0="_panelWrapper_1ukq2_7";var n0="_btn_ldfe6_1";var i0="_btn_ldfe6_1";function r0(e){return e.reduce(((e,t)=>e+t),0)}const o0=[{component:function(){const e=z(FD),t=!!e,n=document.querySelector("sp-theme"),[i,r]=T.exports.useState(!1);return n?A("div",{children:[k(ke,{quiet:!0,selected:t,onClick:()=>{r(!0)},children:k(AL,{slot:"icon",name:"Link"})}),oe.exports.createPortal(k(WZ,{link:e,open:i,onClose:()=>{r(!1)}}),n)]}):null},filter:(e,t)=>1===t.length&&!co(e)&&!ro(e)},{component:function(){const e=z(UD),t=ZL(oj);return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:n0,onClick:function(){rj().then((async n=>{const i=null==n?void 0:n.item(0);KD(i,jD.badRequest);const r=await(null==t?void 0:t.put(i));KD(r,jD.badRequest),ID.transform((t=>{t.updateNodeById(null==e?void 0:e.id,{src:r})}))}))},children:"替换图片"}),k(U,{vertical:!0})]})},filter:(e,t)=>1===t.length&&no(e)},{component:function(){var e,t;const n=z(UD),[i,r]=T.exports.useState(null),[o,s]=T.exports.useState(!1);if(T.exports.useEffect((()=>{o||r(null)}),[o]),je((()=>{f()}),[n]),!n)return null;const{meta:a,props:l,id:c}=n,d=null!=(e=null==a?void 0:a.config)?e:"",u=!d,h=null!=(t=null==l?void 0:l.data)?t:{},p=document.querySelector("sp-theme");if(!p)return null;function f(){ID.commitAndMerge(),s(!1)}return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,click:function(){ID.fork(),async function(){const e=await async function(e){return(await fetch(e,{method:"GET",mode:"cors",cache:"default",headers:{"Content-Type":"application/json"}})).json()}(d);r(e.dataSchema||null)}(),s(!0)},disabled:u,children:k(AL,{slot:"icon",name:"Settings"})}),o&&i?oe.exports.createPortal(k(ge,{title:"物料设置",dismissable:!0,divider:!0,className:t0,open:o,close:f,children:k("div",{className:e0,children:k(ZZ,{data:h,dataSchema:i,onDataChange:function(e){const t=AR(e);ID.add((e=>{e.updateNodeById(c,b(w({},l),{data:t}))}))}})})}),p):null]})},filter:(e,t)=>1===t.length&&ro(e)},{component:function(){const e=z(UD),{t:t}=VL();return A(T.exports.Fragment,{children:[k(ke,{quiet:!0,className:i0,onClick:function(){KD(e);const{width:t="",height:n="","flex-direction":i=eP.row}=ID.getDeclaredStyle(e.id),{width:r,height:o}=ID.view.getElementRectById(e.id),s={},a=ID.model.getChildrenNodesOfId(e.id),l=CP(t),c=CP(n),d=a.map((e=>ID.view.getElementRectById(e.id))),u=r0(d.map((e=>e.width))),h=r0(d.map((e=>e.height)));i===eP.row&&u>r&&(s.width="100px"),i===eP.column&&h>o&&(s.height="100px"),i===eP.row&&a.some((e=>{var t;return GL(null!=(t=ID.getDeclaredStyle(e.id).width)?t:"")}))&&(s.width="100px"),i===eP.column&&a.some((e=>{var t;return GL(null!=(t=ID.getDeclaredStyle(e.id).height)?t:"")}))&&(s.height="100px"),l&&(s.width="100px"),c&&(s.height="100px"),Object.keys(s).length&&Object.assign(s,w({},xr)),ID.transform((t=>{const n=eF({styles:[{style:w(w({},GU),s)}]}),i=t.addNode({ref:e.id,direction:Cs.inward},{},n.meta);n.styles.forEach((e=>{t.updateStyle(i.id,e.style,e.breakpointWidth)}))}))},children:t("w.autoLayout.addItem")}),k(U,{vertical:!0})]})},filter:(e,t)=>1===t.length&&RU.isAutoLayout(e.id)},{component:function(){const e=z(RD),t=lQ(ym.wrapMode.key,[e]);return t===gm.None?null:A(T.exports.Fragment,{children:[(t===gm.WrapAble||t===gm.Both)&&k($Z,{}),(t===gm.UnwrapAble||t===gm.Both)&&k(qZ,{})]})},filter:(e,t)=>!0}];function s0(){const e=document.querySelector(".toolbar"),{status:t,showContextMenu:n,hideContextMenu:i}=vL(),r=z(UD),o=z(RD);if(!e||!r||ao(r))return null;const s=o0.filter((({filter:e})=>e(r,o))).map((({component:e})=>e));return oe.exports.createPortal(A("div",{className:EZ,children:[s.map(((e,t)=>k(e,{},t))),k(ke,{quiet:!0,click:function(e){if(t.show)i();else{const t={x:e.clientX,y:e.clientY};n(t)}},children:k(AL,{slot:"icon",name:"MoreHoriz"})})]}),e)}var a0="_popover_1lehv_3";var l0="_popoverMenu_ml8zv_1";var c0="_iconWrap_clnmf_1",d0="_menuItem_clnmf_5";var u0="_iconWrap_xdkpv_1",h0="_popoverMenu_xdkpv_4";class p0 extends am{constructor(){super({id:"layerUp",kbOpts:{weight:qQ.WorkbenchContrib,primary:fF.CtrlCmd|aF.US_CLOSE_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){qL.Service.layerUp(t)}}class f0 extends am{constructor(){super({id:"layerDown",kbOpts:{weight:qQ.WorkbenchContrib,primary:fF.CtrlCmd|aF.US_OPEN_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){qL.Service.layerDown(t)}}class g0 extends am{constructor(){super({id:"layerToTop",kbOpts:{weight:qQ.WorkbenchContrib,primary:fF.CtrlCmd|fF.Alt|aF.US_CLOSE_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){qL.Service.layerToTop(t)}}class m0 extends am{constructor(){super({id:"layerToBottom",kbOpts:{weight:qQ.WorkbenchContrib,primary:fF.CtrlCmd|fF.Alt|aF.US_OPEN_SQUARE_BRACKET}})}async runEditorCommand(e,t,n){qL.Service.layerToBottom(t)}}var _0={};var v0={};var y0={};function w0(e){return k(Ce,w({className:d0},e))}function b0(e){return t=>{const n=z(UD),i=z(RD),{t:r}=VL();return i.length<=0||!n?null:k(e,w({node:n,selections:i,t:r},t))}}const x0=b0((function(e){const{t:t,selections:n}=e,i=D0(n);return A(w0,{click:function(){var t;ID.execEditorCommand("cut"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},disabled:i.length<=0,children:[A("span",{slot:"value",className:v0.iconWrap,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelX"})]}),t("w.contextmenu.cut")]})})),C0=b0((function(e){const{t:t,selections:n}=e,i=D0(n);return A(w0,{click:function(){var t;ID.execEditorCommand("copy"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},disabled:i.length<=0,children:[A("span",{slot:"value",className:_0.iconWrap,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelC"})]}),t("w.contextmenu.copy")]})})),k0=b0((function(e){const{t:t}=e,{model:n}=ID,i=function(){const[e,t]=T.exports.useState(null);return T.exports.useEffect((()=>{lX.get().then((e=>{const n=JSON.parse(e);JT(n)?t(n):t(null)})).catch((()=>{t(null)}))}),[]),e}(),r=null==n?void 0:n.getClonedFragment();return A(w0,{click:function(){var n;oX?ID.execEditorCommand("paste"):TB({message:t("w.contextmenu.clipboardInvalid"),duration:2e3,showClose:!1}),null==(n=null==e?void 0:e.onHandler)||n.call(e)},disabled:oX&&!i&&!r,children:[A("span",{slot:"value",className:y0.iconWrap,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelV"})]}),t("w.contextmenu.paste")]})})),E0=b0((function(e){const{t:t}=VL(),n=D0(z(RD));return A(w0,{disabled:n.length<=0,click:function(){var t;ID.execEditorCommand("duplicate"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[A("span",{slot:"value",className:c0,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelD"})]}),t("w.contextmenu.duplicate")]})})),S0=b0((function(e){const{t:t,selections:n}=e,i=ze(EL);return k(w0,{disabled:n.length>1,click:function(){var t;const[r]=n;i(r),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:t("w.contextmenu.rename")})})),I0=b0((function(e){const{t:t,selections:n}=e,i=n.length<=0,{viewModel:r}=ID;return k(w0,{disabled:i,click:function(){var t;n.forEach((e=>{const t=r.getViewModelNodeById(e);t&&NP.toggleVisibility(t)})),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:t("w.contextmenu.toggleVisibility")})})),O0=b0((function(e){const{t:t,selections:n}=e,i=n.length<=0;return A(w0,{disabled:i,click:function(){var t;ID.execEditorCommand("deleteLeft"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[k(AL,{name:"Backspace",slot:"value"}),t("w.contextmenu.delete")]})})),T0=b0((function(e){const{selections:t}=e,n=t.length>=1,i=!(1===t.length&&RU.isAutoLayout(t[0]));return n||i?A(be,{children:[k(et,{}),n&&k(N0,w({},e)),i&&k(M0,w({},e))]}):null})),M0=b0((function(e){const{t:t,selections:n}=e,i=lQ(ym.wrapMode.key,[n]),r=i!==gm.UnwrapAble&&i!==gm.Both;return r?null:A(w0,{disabled:r,click:function(){var t;ID.execEditorCommand("unwrap"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[A("span",{slot:"value",className:c0,children:[k(AL,{name:"Command"}),k(AL,{name:"Shift"}),k(AL,{name:"LabelG"})]}),t("w.contextmenu.unwrap")]})})),N0=b0((function(e){const{t:t,selections:n}=e,i=lQ(ym.wrapMode.key,[n]);if(n.length<1)return null;const r=i!==gm.WrapAble&&i!==gm.Both;return A(w0,{disabled:r,click:function(){var t;ID.execEditorCommand("wrap"),null==(t=null==e?void 0:e.onHandler)||t.call(e)},children:[A("span",{slot:"value",className:c0,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelG"})]}),t("w.contextmenu.wrap")]})})),A0=b0((function(e){const{t:t,selections:n}=e,[i]=n;return 1===n.length?A(be,{children:[k(et,{}),k(w0,{click:function(){var n;null==(n=null==e?void 0:e.onHandler)||n.call(e);const{view:r,model:o}=ID;r.getViewport();const s=o.queryNodes((e=>o.isAncestorNodeOfId(i,e.id))).map((e=>e.id)),a=[i,...s];ID.transform((()=>{a.forEach((e=>{const t=AR(ID.getDeclaredStyle(e));Reflect.deleteProperty(t,"breakpointId"),Reflect.deleteProperty(t,"targetId"),Reflect.deleteProperty(t,"id"),o.updateAllBpStyles(e,t)}))})),TB({message:t("w.contextmenu.apply.success"),duration:2e3,showClose:!1})},children:t("w.contextmenu.apply")})]}):null})),R0=b0((function(e){const{t:t}=e,[n,i]=T.exports.useState(!1),r=qL.Service.layerStatus(ID),o=qL.isAllGridSection()?t("w.contextmenu.sectionOrder"):t("w.contextmenu.layerOrder"),{editorMode:s}=cQ();!function(e){let t=[];T.exports.useEffect((()=>(e===pm.Editing&&(t.push(dm(new p0)),t.push(dm(new f0)),t.push(dm(new g0)),t.push(dm(new m0))),()=>{t.forEach((e=>{null==e||e.dispose()})),t=[]})),[e])}(s);const{open:a}=e;function l(t){var n;ID.execEditorCommand(t),null==(n=e.onHandler)||n.call(e)}return T.exports.useEffect((()=>{a||i(!1)}),[a]),k(KB,{options:{placement:"right-start"},interaction:"hover",visible:n,disabled:r.disabled,onVisibleChange:i,trigger:A(w0,{disabled:r.disabled,children:[k(AL,{slot:"value",name:"ArrowRight"}),o]}),content:A(Ze,{className:h0,children:[A(w0,{disabled:r.upDisabled,click:()=>{l(KL.Up)},children:[A("span",{slot:"value",className:u0,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelClosebracket"})]}),t("w.contextmenu.layerUp")]}),A(w0,{disabled:r.toTopDisabled,click:()=>{l(KL.ToTop)},children:[A("span",{slot:"value",className:u0,children:[k(AL,{name:"Command"}),k(AL,{name:"Option"}),k(AL,{name:"LabelClosebracket"})]}),t("w.contextmenu.layerToTop")]}),A(w0,{disabled:r.downDisabled,click:()=>{l(KL.Down)},children:[A("span",{slot:"value",className:u0,children:[k(AL,{name:"Command"}),k(AL,{name:"LabelOpenbracket"})]}),t("w.contextmenu.layerDown")]}),A(w0,{disabled:r.toBottomDisabled,click:()=>{l(KL.ToBottom)},children:[A("span",{slot:"value",className:u0,children:[k(AL,{name:"Command"}),k(AL,{name:"Option"}),k(AL,{name:"LabelOpenbracket"})]}),t("w.contextmenu.layerToBottom")]})]})})}));function D0(e){const{model:t}=ID;return e.slice().filter((e=>{const n=t.getNodeById(e);return n&&!ao(n)&&!lo(n)}))}function P0(e){const{clickHandler:t,show:n,from:i}=e,r=qL.isShow();return A(Ze,{className:l0,children:[r?A(be,{children:[k(R0,{open:n,onHandler:t}),k(et,{})]}):null,k(x0,{onHandler:t}),k(C0,{onHandler:t}),k(k0,{onHandler:t}),k(E0,{onHandler:t}),k(et,{}),i===fL.layer?k(S0,{onHandler:t}):null,k(I0,{onHandler:t}),k(O0,{onHandler:t}),k(T0,{onHandler:t}),k(A0,{onHandler:t})]})}var L0="_popoverMenu_ml8zv_1";function U0(e){const{clickHandler:t,from:n}=e;return k(Ze,{className:L0,children:n===fL.layer?k(S0,{onHandler:t}):null})}function F0(){const{status:e,hideContextMenu:t}=vL(),n=z(ND),i=Boolean(n),{model:r}=ID,{show:o,x:s,y:a,from:l}=e,c={transform:`translate(${s}px,${a}px)`},d=z(RD).some((e=>{const t=r.getNodeById(e);return t&&ao(t)})),u=T.exports.useRef();function h(e){var n;null==e||e.preventDefault(),(null==(n=null==u?void 0:u.current)?void 0:n.contains(null==e?void 0:e.target))||t()}return function(e,t,n=!1){T.exports.useEffect((()=>{var i,r,o;let s=null,a=!1;function l(){s&&clearTimeout(s),s=null,a=!0}function c(){s=setTimeout((()=>{t()})),a=!1}return null==(i=e.current)||i.setAttribute("tabindex","-1"),null==(r=e.current)||r.addEventListener("focus",l,!0),null==(o=e.current)||o.addEventListener("blur",c,!0),n&&window.addEventListener("blur",l,!1),s=setTimeout((()=>{var t;a||null==(t=e.current)||t.focus()}),60),()=>{var t,i,r;s&&clearTimeout(s),null==(t=e.current)||t.removeAttribute("tabindex"),null==(i=e.current)||i.removeEventListener("focus",l,!0),null==(r=e.current)||r.removeEventListener("blur",c,!0),n&&window.addEventListener("blur",l,!1)}}),[e,t])}(u,(()=>{t()})),i?k(nt,{id:"contextMenuPopover",ref:u,className:a0,open:o,style:c,contextmenu:function(e){e.preventDefault()},children:k(d?U0:P0,{show:o,from:l,clickHandler:h})}):null}function B0(e){const[t,n]=T.exports.useState(null);return T.exports.useEffect((()=>{if(!e)return void n(null);const t=(i=e,r=n,{observe(){wU.has(i)?wU.get(i).callbacks.push(r):(wU.set(i,{callbacks:[r]}),bU.observe(i))},unobserve(){const e=wU.get(i);if(e){const t=e.callbacks.indexOf(r);t>=0&&e.callbacks.splice(t,1),e.callbacks.length||(wU.delete(i),bU.unobserve(i))}}});var i,r;return t.observe(),()=>t.unobserve()}),[e]),t}let j0,V0,z0,K0=!1,W0=!1,H0="en";const $0="object"==typeof self?self:"object"==typeof global?global:{};let q0;void 0!==$0.vscode&&void 0!==$0.vscode.process?q0=$0.vscode.process:"undefined"!=typeof process&&(q0=process);const Y0="string"==typeof(null==(h=null==q0?void 0:q0.versions)?void 0:h.electron)&&"renderer"===(null==q0?void 0:q0.type);if(Y0&&(null==q0||q0.sandboxed),"object"!=typeof navigator||Y0)if("object"==typeof q0){q0.platform,q0.platform,K0="linux"===q0.platform,K0&&q0.env.SNAP&&q0.env.SNAP_REVISION,q0.env.CI||q0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,j0="en",H0="en";const e=q0.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];j0=t.locale,H0=n||"en",V0=t._translationsConfigFile}catch(f8){}}else console.error("Unable to resolve platform.");else z0=navigator.userAgent,z0.indexOf("Windows"),z0.indexOf("Macintosh"),(z0.indexOf("Macintosh")>=0||z0.indexOf("iPad")>=0||z0.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,K0=z0.indexOf("Linux")>=0,W0=!0,j0=navigator.language,H0=j0;var G0;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(G0||(G0={})),W0&&$0.importScripts;const X0=z0,J0=H0;var Q0,Z0;!function(e){e.value=function(){return J0},e.isDefaultVariant=function(){return 2===J0.length?"en"===J0:J0.length>=3&&("e"===J0[0]&&"n"===J0[1]&&"-"===J0[2])},e.isDefault=function(){return"en"===J0}}(Q0||(Q0={})),(()=>{if("function"==typeof $0.postMessage&&!$0.importScripts){const e=[];$0.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),$0.postMessage({vscodeScheduleAsyncWork:i},"*")}}})(),function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(Z0||(Z0={}));const e1=!!(X0&&X0.indexOf("Chrome")>=0);X0&&X0.indexOf("Firefox"),!e1&&X0&&X0.indexOf("Safari"),X0&&X0.indexOf("Edg/"),X0&&X0.indexOf("Android");class t1 extends vD{constructor(){super(...arguments),C(this,"_handlerMap",new Map)}register(e,t){e.forEach((e=>{if(this._handlerMap.has(e)){this._handlerMap.get(e).push(t)}else{const n=[t];this._handlerMap.set(e,n)}}))}emit(e,t){const n=this._handlerMap.get(e);n&&n.forEach((e=>{e(t)}))}remove(e){for(const t of this._handlerMap.values()){const n=t.findIndex((t=>t===e));-1!==n&&t.splice(n,1)}}clear(){this._handlerMap.clear()}}const n1="PasteHandlerRegistry";let i1;Reflect.has($0,n1)?i1=Reflect.get($0,n1):(i1=new t1,Reflect.set($0,n1,i1));const r1=i1,o1=()=>{const e=ZL(oj),t=z(ND),{model:n,view:i,viewModel:r}=ID,{addNodeToViewPos:o}=hU(),s=async e=>{const{data:t,type:n}=e;let i=null;const r=t.constructor.name;"DataTransferItem"===r?i=t.getAsFile():"File"===r?i=t:"ClipboardItem"===r&&(i=await t.getType(n)),c(i)},a=async e=>{const{data:t}=e,n=t.constructor.name;if("DataTransferItem"===n)t.getAsString((e=>{d(e)}));else if("ClipboardItem"===n){const e=await t.getType("text/plain"),n=await e.text();d(n)}},l=async e=>{var s;try{const a=await function(e="",t=""){return new Promise(((n,i)=>{const r=new Image;r.crossOrigin=t,r.onload=()=>{n(r)},r.onerror=()=>{i(new Error(`Image load error: ${e}`))},r.src=e}))}(e);let{width:l,height:c}=a;const d=null==t?void 0:t.logicWidth,u=.8;if(d&&l>d*u){const e=l/c;l=Math.floor(d*u),c=Math.floor(l/e)}const h=AR(QU);Object.assign(h,{props:{src:e},renderWidth:l,renderHeight:c}),Object.assign(h.styles[0],{width:`${l}px`,height:`${c}px`,"aspect-ratio":""+l/c});const p=r.selection.slice();let f=i.getViewCanvasCenterPos();const[g]=p;if(g){const e=n.getNodeById(g);if(e&&ho(e)){const e=i.getElementRectById(g);f={x:e.left+e.width/2,y:e.top+e.height/2}}}const m=o(h,f,!0);if(!m)throw new Error("404");const _=n.cloneFragment([m.id],null!=(s=null==t?void 0:t.logicWidth)?s:null);ID.add((()=>{ID.execEditorCommand("pasteFragment",_,p,ID.editor)})),ID.commitAndMerge(),setTimeout((()=>{const{selection:e}=r;e[0]&&i.scrollNodeIntoView(e[0])}))}catch(a){console.warn("Get Image From Url Failed.",a)}},c=async t=>{if(t)try{const n=await(null==e?void 0:e.put(t));n&&l(n)}catch(n){console.warn("Handle Paste Image Failed.",n)}},d=async t=>{if(t)try{const i=[],r=JSON.parse(t);if(Yt(r)&&!r.some((e=>!JT(e)))?i.push(...r):JT(r)&&(i.push(r),n.setClonedFragment(r)),i.length<=0)return;const o=[];for(let t=0;t<i.length;t++){const n=await(null==e?void 0:e.uploadInlineResources(i[t]));n&&o.push(n)}if(o.length<=0)throw new Error("Fragment Parsed Error.");u(o)}catch(i){console.warn("Handle Paste Text Failed.",i)}},u=e=>{const t=e.some((e=>"root"===e.roots[0]));if(h()&&t){const t=aM(e);if(!t)return;const n=AR(t);Reflect.deleteProperty(n,"roots");const i="__designDocumentMeta",r=Reflect.get(n.meta,i,{});ID.updateModel(n,r)}else ID.transform((()=>{e.forEach((e=>{const t=r.selection.slice();h()&&"root"===e.roots[0]||ID.execEditorCommand("pasteFragment",e,t,ID.editor)}))}))},h=()=>{const{nodes:e}=n.getValue();return e.length<=3},p=["image/jpeg","image/png","image/gif","image/bmp","image/webp"],f=["text/plain"];T.exports.useEffect((()=>(r1.register(p,s),r1.register(f,a),()=>{r1.remove(s),r1.remove(a)})),[e])};function s1(){const{isInPreviewMode:e}=cQ(),t=gK();T.exports.useEffect((()=>{e?function(){var e;if(!ID.editor)return;const{animations:t,triggers:n}=null==(e=ID.model)?void 0:e.getValue();PG(t,n)}():tH()}),[t,e])}function a1({slot:e}){var t,n;const i=T.exports.useRef(null),[r,o]=P(TD),s=ze(PD),a=ze(RD),[l,c]=P(ND),d=ze(MD),u=ze(IL),{handleContextMenu:h}=vL();o1(),s1();const p=Boolean(l),f=B0(null==(t=ID.view)?void 0:t.canvasHostDomNode),g=T.exports.useContext(jL),{run:m,cancel:_}=le(((e,t)=>{const n=e.model.getValue();o(AR(n)),d(function(e){const t=AR(e).sort(((e,t)=>t.maxWidth-e.maxWidth)),n=t[0];return n&&t.unshift({id:"__baseBreakpointId__",minWidth:n.maxWidth+1,maxWidth:Number.POSITIVE_INFINITY}),t}(AR(n.breakpoints))),s(AR(t.root.value))}),{wait:100});T.exports.useEffect((()=>{const e=function(e,t,n=Object.create(null)){let i;if(n.instantiationService)i=n.instantiationService;else{const e=new OM;e.set(zm,new IM(t_)),e.set(kM,new IM(SM)),e.set(Do,new IM(xs)),e.set(Dp,new IM(Hg,[document.body])),e.set(Df,new IM(em)),e.set(eg,new IM(im)),e.set(Ol,new lR),e.set(Ay,new CM),i=new pR(e)}i.createInstance($l,li(e),!1),i.createInstance(Rp),i.createInstance(nA,t);const r=i.createInstance(Mm);return i.invokeFunction((e=>{try{e.get(TM).phase=MM.EditorCreated}catch(f8){}})),r}(Qn,i.current||document.body,g);ID.registerInstance(e);const{model:t,viewModel:n,view:r}=e;return t.onUpdated(m.bind(null,e,n)),n.onReconnected(m.bind(null,e,n)),n.onDidChangeSelection((()=>{const{selection:e}=n;e.length?ID.getContextKeyValue(ym.isAnimationEditing.key,(t=>{t?(WD(1===e.length),u(e[0])):a([...e])})):ID.initSelection()})),r.onWorkspaceTreeUpdated((()=>s(AR(n.root.value)))),r.onViewportUpdated((()=>{const e=r.getViewport();c(e)})),r.onMouseDown((()=>{var e;r.boundaryDomNode.contains(document.activeElement)||(document.activeElement instanceof HTMLElement&&(null==(e=document.activeElement)||e.blur()),r.boundaryDomNode.click())})),r.onContextMenu((t=>{t.event.preventDefault(),ID.getContextKeyValue(ym.isAnimationEditing.key,(n=>{n||((e,t)=>{var n,i;const{view:r}=t,{browserEvent:o,posX:s,posY:a}=e.event,l=r.canvasHostDomNode.getBoundingClientRect(),{left:c,top:d}=l,{scale:u}=r.getViewport(),{clientX:p,clientY:f}=o;let g=p,m=f;(null==(i=null==(n=r.canvasHostDomNode)?void 0:n.contentDocument)?void 0:i.contains(o.currentTarget))&&(g=p*u+c,m=f*u+d);const _={x:s,y:a},v=!e.event.ctrlKey&&!e.event.metaKey;setTimeout((()=>{h(_,{x:g,y:m},v)}))})(t,e)}))})),m(e,n),a([...n.selection]),c(r.getViewport()),ID.resetEditorViewport(),ID.view.nextTick((()=>{var e,t;ID.initSelection(),e=ID.view.canvasHostDomNode.contentDocument,t=ID.view.canvasHostDomNode.contentWindow,LW=e,UW=t})),()=>{_(),ID.dispose()}}),[]);const v=T.exports.useMemo((()=>{var e;const t={};return(null==l?void 0:l.visualWidth)&&i.current&&(null==l?void 0:l.visualWidth)+ID.canvasResizerWidth>(null==(e=i.current)?void 0:e.clientWidth)&&(t.justifyContent="flex-start",t.alignContent="flex-start"),t}),[l,i.current]);return A("div",{className:"",children:[k(mZ,{}),k(s0,{}),A("div",{className:NR,children:[k("div",{className:OR,style:{height:`${ID.pageNameHeight}px`,left:vP((null==f?void 0:f.left)||0)},onClick:function(){ID.initSelection()},children:null==(n=r.meta)?void 0:n.title}),A("div",{className:TR,children:[k(tU,{}),k(sF,{}),k("div",{ref:i,id:"canvasContainer",className:MR,style:v}),k(hQ,{})]})]}),k(F0,{}),p?k(EF,{container:i}):null,e&&k(e,{})]})}const l1=rn("i18nService");var c1={"w.page":"页面",Image:"图片",Container:"容器",Section:"模块",Symbol:"符号",Text:"文字",SVG:"图形",Video:"视频",Page:"页面",WebWidget:"物料",RichText:"富文本",LayouterVert:"布局",LayouterHoriz:"布局",AutoLayouterVert:"垂直排版",AutoLayouterHoriz:"水平排版",Button:"按钮",Title:"标题",Paragraph:"段落","w.design":"设计","w.interaction":"交互","w.animation":"动画","w.animation.presets":"动画效果","w.animation.direction":"方向","w.animation.appearance":"出场","w.animation.transition":"转场","w.animation.none":"无","w.animation.custom":"自定义","w.animation.scroll.key":"关键帧","w.animation.scroll.keyStart":"起始","w.animation.scroll.keyEnd":"结束","w.animation.scroll.scrollProgress":"进度","w.animation.scroll.elementEnterProgress":"元素进入","w.animation.scroll.elementExitProgress":"元素离开","w.animation.timing.effect":"效果","w.animation.timing.effectPreset":"效果预设","w.animation.timing.delay":"延迟","w.animation.timing.duration":"持续时长","w.animation.timing.easing":"缓动","w.animation.appearance.fadeIn":"渐显","w.animation.appearance.clipFade":"显示","w.animation.appearance.clipSlide":"划入","w.animation.appearance.grow":"轻微放大","w.animation.appearance.growBig":"放大","w.animation.appearance.shrink":"轻微缩小","w.animation.appearance.shrinkBig":"缩小","w.animation.appearance.slide":"滑动","w.animation.appearance.flip":"翻转","w.animation.appearance.spin":"旋转进入","w.animation.appearance.zoom":"弹出","w.animation.appearance.drop":"掉落","w.animation.appearance.spring":"弹簧","w.animation.appearance.scroll":"滚动","w.animation.transition.fadeIn":"渐显","w.animation.transition.fadeOut":"渐隐","w.animation.transition.grow":"增大","w.animation.transition.shrink":"收缩","w.animation.transition.slide":"滑动","w.animation.transition.slideGrow":"滑动增大","w.animation.transition.skew":"歪斜","w.animation.transition.swing":"摆动","w.animation.transition.swingGrow":"摆动增大","w.animation.transition.spin":"旋转","w.animation.transform.scale":"缩放","w.animation.transform.translate":"偏移","w.animation.transform.skew":"斜切","w.animation.transform.rotate":"旋转","w.animation.easing.EaseOutQuad":"减速-缓和","w.animation.easing.EaseInQuad":"加速-缓和","w.animation.easing.EaseOutCubic":"减速","w.animation.easing.EaseInCubic":"加速","w.animation.easing.EaseInOutCubic":"加速减速","w.animation.easing.EaseOutBack":"弹出","w.animation.easing.EaseOutElastic":"震荡","w.animation.easing.EaseOutBounce":"弹跳","w.animation.easing.Linear":"线性","w.animation.control.preview":"预览","w.animation.control.finish":"完成","w.animation.control.open":"开启","w.animation.control.close":"关闭","w.animation.control.loop":"循环","w.animation.control.mirror":"镜像","w.animation.control.3d":"3D效果","w.animation.control.animationMissed":"请先添加动画效果","w.animation.control.selectTips":"请选择任意对象，自定义动画效果","w.trigger":"触发","w.trigger.intersection":"进入视图","w.trigger.click":"点击","w.trigger.hover":"悬停","w.trigger.press":"按住","w.trigger.scroll":"页面滚动","w.trigger.mouseenter":"光标移入","w.trigger.mouseleave":"光标移出","w.trigger.mousedown":"鼠标按下","w.trigger.mouseup":"鼠标抬起","w.setting":"设置","w.background.fill":"填充","w.background.gradient":"渐变","w.background.pattern":"图案","w.background.pureColor":"纯色","w.background.angle":"角度","w.background.selectImage":"选择图片","w.background.fillStyle":"填充方式","w.background.fillStyle.cover":"充满","w.background.fillStyle.contain":"适合","w.background.fillStyle.tile":"平铺","w.background.zoom":"缩放","w.padding":"边距","w.unit.auto":"自动","w.unit.fitContent":"适应内容","w.unit.px":"像素 (px)","w.unit.percentage":"百分比 (%)","w.unit.vw":"视窗宽度 (vw)","w.unit.vh":"视窗高度 (vh)","w.display":"图层","w.display.visible":"显示","w.display.hidden":"隐藏","w.layout":"排版","w.layout.position":"位置","w.layout.positionType":"位置类型","w.layout.topOffset":"顶部偏移","w.layout.width":"宽度","w.layout.height":"高度","w.layout.overflow":"溢出","w.layout.scrollDirection":"滚动方向","w.flexibleSize":"尺寸范围","w.flexibleSize.widthRange":"宽度","w.flexibleSize.heightRange":"高度","w.position.default":"默认","w.position.fixed":"固定","w.position.sticky":"粘性","w.overflow.visible":"显示","w.overflow.hidden":"隐藏","w.overflow.scroll":"滚动","w.sizeType.flexible":"弹性","w.sizeType.static":"静态","w.autoLayout":"自动布局","w.autoLayout.direction":"方向","w.autoLayout.gap":"间距","w.appearance":"样式","w.opacity":"透明度","w.border":"描边","w.border.width":"粗细","w.border.style":"类型","w.border.style.solid":"实线","w.border.style.dashed":"虚线","w.shadow":"投影","w.shadow.offset":"偏移","w.shadow.blur":"模糊","w.shadow.spread":"延展","w.shadow.color":"颜色","w.roundedCorner":"圆角","w.roundedCorner.multiple":"多种","w.filter.blur":"图层模糊","w.backdropFilter.blur":"背景模糊","w.link.type.none":"无","w.link.type.site":"网址","w.link.type.anchor":"锚点","w.link.type.phone":"电话号码","w.link.type.email":"邮箱","w.link.href":"选择页面","w.link.target":"标签页打开","w.link.title.anchor":"选择锚点","w.link.title.phone":"电话号码","w.link.title.email":"邮箱地址","w.link.target.self":"当前标签页打开","w.link.target.blank":"新标签页打开","w.link.placeholder.site":"粘贴或输入网址","w.link.placeholder.phone":"粘贴或输入电话号码","w.link.placeholder.email":"粘贴或输入邮箱地址","w.link.anchorEmpty":"暂无锚点","w.dialog.cancel":"取消","w.dialog.confirm":"确定","w.link.listEmpty":"无链接","w.link.listEmpty.desc":"从左侧列表选择要跳转的类型","w.link":"链接","w.anchor":"锚点","w.anchor.name":"锚点名称","w.text":"文本","w.text.fontFamily":"字体","w.text.fontWeight":"字重","w.text.fontSize":"字号","w.text.textAlign":"段落对齐","w.text.lineHeight":"间距","w.text.textDecoration":"装饰","w.text.more":"更多","w.text.list":"列表","w.menu.returnHome":"返回首页","w.menu.import":"文件导入","w.layer.layers":"图层","w.component.add":"添加","w.component.basic":"基础","w.component.title":"标题","w.component.paragraph":"段落","w.component.image":"图片","w.component.resource":"资源库","w.component.layout":"布局","w.component.container":"容器","w.component.titleContent":"这是一个标题","w.component.paragraphContent":"我们都是设计师，因为我们都在刻意设计我们的生活、我们的房间和我们做事的方式。----唐纳德·A·诺曼","w.contextmenu.cut":"剪切","w.contextmenu.copy":"复制","w.contextmenu.paste":"粘贴","w.contextmenu.duplicate":"创建副本","w.contextmenu.rename":"重命名","w.contextmenu.toggleVisibility":"显示/隐藏图层","w.contextmenu.delete":"删除","w.contextmenu.unwrap":"移除容器","w.contextmenu.wrap":"放置到容器中","w.contextmenu.apply":"应用到所有断点","w.contextmenu.apply.success":"已应用到所有断点","w.contextmenu.addAnchor":"设置为锚点","w.contextmenu.sectionOrder":"模块顺序","w.contextmenu.layerOrder":"图层顺序","w.contextmenu.layerUp":"上移","w.contextmenu.layerToTop":"移动到最上方","w.contextmenu.layerDown":"下移","w.contextmenu.layerToBottom":"移动到最下方","w.contextmenu.clipboardInvalid":"请使用快捷键操作：Ctrl + V","w.nav.preview":"预览","w.nav.edit":"返回编辑","w.nav.publish":"发布","w.zoom.zoomIn":"放大","w.zoom.zoomOut":"缩小","w.zoom.100%":"缩放到100%","w.device.adjustTips":"断点必须介于320px与10000px之间","w.device.desktop":"桌面端","w.device.desktop.breakpoint":"编辑效果适合1001px及以上设备显示","w.device.desktop.desc":"从该断点开始编辑。在该断点的编辑会应用在所有断点，除非在更小断点编辑过。","w.device.phone":"移动端","w.device.phone.breakpoint":"编辑效果适合320-750px设备显示","w.device.phone.desc":"在该断点编辑会应用在478px及以下尺寸。","w.device.tablet":"Pad","w.device.tablet.breakpoint":"编辑效果适合751-1000px设备显示","w.device.tablet.desc":"在该断点编辑会应用在1000px及以下尺寸，除非在更小断点编辑过。","ext.market.publish":"发布","ext.market.re-publish":"重新发布","ext.market.enterTitle":"请输入页面标题","ext.market.publishing":"发布中...","ext.market.published":"发布","w.attribute":"自定义<{{name}}>属性","w.attribute.rule":"名称以 data- 开头只能包含字母、数字、破折号(-)、句号(.)、冒号(:)和下划线(_)任何大写字母都会被转换为小写","w.attribute.duplicate":"该名称已被占用","w.attribute.empty":"名称不能为空","w.attribute.add":"添加属性","w.attribute.key":"名称","w.attribute.value":"值","w.attribute.value.placeholder":"自定义","w.unit.fillContainer":"充满容器","ext.market.import.unsupported":"不支持的文件类型","ext.market.import.dropFile":"将 JSON/PSD/Sketch 文件拖拽到此处，或者","ext.market.import.selectFile":"选择文件...","ext.market.import.parsing":"文件解析中...","ext.market.import.import":"文件导入","ext.market.record.networkError":"网络存在异常。","ext.market.record.networkErrorDes":"网络存在异常，请确保网络恢复后再进行操作。","ext.market.record.networkErrorConfirm":"刷新","ext.market.record.networkErrorSaveTip":"网络异常，请等待网络恢复后重新尝试。","ext.market.record.autoSaveError":"自动保存发生异常，请尝试手动 ctrl/cmd + s 保存。","ext.market.record.manualSaveError":"保存失败，请稍后重试。","ext.market.record.backupTips":"该浏览器存在未保存的变更，是否恢复？","ext.market.parser.parseError":"文件解析失败，请检查设计文件是否符合规范。","w.anchor.message.exists":"锚点名称已存在","w.interaction.add":"添加事件","w.interaction.event":"全局自定义事件","w.interaction.trigger":"触发","w.interaction.eventType":"事件名称","w.interaction.value":"值","w.interaction.click":"点击","w.interaction.mouseover":"悬停","w.interaction.mouseenter":"鼠标移入","w.interaction.mouseleave":"鼠标移出","w.interaction.mouseup":"鼠标按下","w.interaction.mousedown":"鼠标抬起","w.text.currentWork":"当前作品","w.text.zh":"中文","w.text.en":"英文","w.component.autoLayout.row":"栏","w.component.autoLayout.col":"列","w.component.autoLayout.scroll":"滑块","w.component.autoLayout.page":"翻页","w.component.autoLayout.wrap":"自动换行","w.autoLayout.wrap":"换行","w.autoLayout.wrap.wrap":"是","w.autoLayout.wrap.nowrap":"否","w.autoLayout.addItem":"添加子项","w.layout.scrollSnap":"滚动吸附","w.layout.scrollSnap.none":"无","w.layout.scrollSnap.mandatory":"强制吸附","w.layout.scrollSnap.proximity":"靠近吸附","w.layout.scrollSnap.left":"开端","w.layout.scrollSnap.center":"居中","w.layout.scrollSnap.right":"末端","w.display.scroll":"__未翻译__","w.node.tagName":"HTML 标签","w.linkOrAnchor":"链接","w.linkOrAnchor.rel":"Rel 属性","w.image.alt":"Alt 属性","w.image":"图像","w.image.ossResize":"图像压缩","w.image.ossResize.maxWidth":"最大宽度","w.image.ossResize.quality":"图像质量"};var d1={"w.page":"Page",Image:"Image",Container:"Container",Section:"Section",Symbol:"Symbol",Text:"Text",SVG:"Shape",Video:"Video",Page:"Page",WebWidget:"WebWidget",RichText:"RichText",LayouterVert:"Layouter",LayouterHoriz:"Layouter",AutoLayouterVert:"AutoLayouterVert",AutoLayouterHoriz:"AutoLayouterHoriz",Button:"Button",Title:"Title",Paragraph:"Paragraph","w.design":"Design","w.animation":"Animation","w.animation.direction":"Direction","w.animation.presets":"Animation Presets","w.animation.appearance":"__未翻译__","w.animation.transition":"__未翻译__","w.animation.none":"None","w.animation.custom":"Custom","w.animation.scroll.key":"__未翻译__","w.animation.scroll.keyStart":"__未翻译__","w.animation.scroll.keyEnd":"__未翻译__","w.animation.scroll.scrollProgress":"__未翻译__","w.animation.scroll.elementEnterProgress":"__未翻译__","w.animation.scroll.elementExitProgress":"__未翻译__","w.animation.timing.effect":"Effect","w.animation.timing.effectPreset":"Effect Preset","w.animation.timing.delay":"Delay","w.animation.timing.duration":"Duration","w.animation.timing.easing":"Easing","w.animation.appearance.fadeIn":"__未翻译__","w.animation.appearance.clipFade":"__未翻译__","w.animation.appearance.clipSlide":"__未翻译__","w.animation.appearance.grow":"__未翻译__","w.animation.appearance.growBig":"__未翻译__","w.animation.appearance.shrink":"__未翻译__","w.animation.appearance.shrinkBig":"__未翻译__","w.animation.appearance.slide":"__未翻译__","w.animation.appearance.flip":"__未翻译__","w.animation.appearance.spin":"__未翻译__","w.animation.appearance.zoom":"__未翻译__","w.animation.appearance.drop":"__未翻译__","w.animation.appearance.spring":"__未翻译__","w.animation.appearance.scroll":"__未翻译__","w.animation.transition.fadeIn":"__未翻译__","w.animation.transition.fadeOut":"__未翻译__","w.animation.transition.grow":"__未翻译__","w.animation.transition.shrink":"__未翻译__","w.animation.transition.slide":"__未翻译__","w.animation.transition.slideGrow":"__未翻译__","w.animation.transition.skew":"__未翻译__","w.animation.transition.swing":"__未翻译__","w.animation.transition.swingGrow":"__未翻译__","w.animation.transition.spin":"__未翻译__","w.animation.transform.scale":"Scale","w.animation.transform.translate":"Translate","w.animation.transform.skew":"Skew","w.animation.transform.rotate":"Rotate","w.animation.easing.EaseOutQuad":"EaseOutQuad","w.animation.easing.EaseInQuad":"EaseInQuad","w.animation.easing.EaseOutCubic":"EaseOutCubic","w.animation.easing.EaseInCubic":"EaseInCubic","w.animation.easing.EaseInOutCubic":"EaseInOutCubic","w.animation.easing.EaseOutBack":"EaseOutBack","w.animation.easing.EaseOutElastic":"EaseOutElastic","w.animation.easing.EaseOutBounce":"EaseOutBounce","w.animation.easing.Linear":"EaseLinear","w.animation.control.preview":"Preview","w.animation.control.finish":"Finish","w.animation.control.open":"Open","w.animation.control.close":"Close","w.animation.control.loop":"Loop","w.animation.control.mirror":"Mirror","w.animation.control.3d":"3D Effect","w.animation.control.animationMissed":"Add animation effect first.","w.animation.control.selectTips":"Select target to add animation effect.","w.trigger":"Trigger","w.trigger.click":"On Click","w.trigger.hover":"On Hover","w.trigger.press":"On Press","w.trigger.scroll":"On Scroll","w.trigger.mouseenter":"Mouse Enter","w.trigger.mouseleave":"Mouse Leave","w.trigger.mousedown":"Mouse Down","w.trigger.mouseup":"Mouse Up","w.setting":"Setting","w.background.gradient":"Gradient","w.background.pattern":"Pattern","w.background.pureColor":"Pure Color","w.background.angle":"Angle","w.background.selectImage":"Select An Image","w.background.fillStyle":"Fill Style","w.background.fillStyle.cover":"Cover","w.background.fillStyle.contain":"Contain","w.background.fillStyle.tile":"Tile","w.background.zoom":"Zoom","w.background.fill":"Fill","w.padding":"Padding","w.unit.auto":"Auto","w.unit.fitContent":"FitContent","w.unit.px":"px","w.unit.percentage":"%","w.unit.vw":"vw","w.unit.vh":"vh","w.display":"Display","w.display.visible":"Visible","w.display.hidden":"Hidden","w.layout":"Layout","w.layout.position":"Position","w.layout.positionType":"Position Type","w.layout.topOffset":"TopOffset","w.layout.width":"Width","w.layout.height":"Height","w.layout.overflow":"Overflow","w.layout.scrollDirection":"Scroll Direction","w.flexibleSize":"Flexible Size","w.flexibleSize.widthRange":"Width Range","w.flexibleSize.heightRange":"Height Range","w.position.default":"Default","w.position.fixed":"Fixed","w.position.sticky":"Sticky","w.overflow.visible":"Visible","w.overflow.hidden":"Hidden","w.overflow.scroll":"Scroll","w.sizeType.flexible":"Flexible","w.sizeType.static":"Static","w.autoLayout":"Auto Layout","w.autoLayout.direction":"Direction","w.autoLayout.gap":"Gap","w.appearance":"Appearance","w.opacity":"Opacity","w.border":"Border","w.border.width":"Width","w.border.style":"Style","w.border.style.solid":"Solid","w.border.style.dashed":"Dashed","w.shadow":"Shadow","w.shadow.offset":"Offset","w.shadow.blur":"Blur","w.shadow.spread":"Spread","w.shadow.color":"Color","w.roundedCorner":"Rounded Corner","w.roundedCorner.multiple":"Multiple","w.filter.blur":"Blur","w.backdropFilter.blur":"Backdrop Blur","w.link.type.none":"None","w.link.type.site":"Site","w.link.type.anchor":"Anchor","w.link.type.phone":"Phone","w.link.type.email":"Email","w.link.href":"__未翻译__","w.link.target":"__未翻译__","w.link.title.anchor":"__未翻译__","w.link.title.phone":"Phone Number","w.link.title.email":"Email Address","w.link.target.self":"__未翻译__","w.link.target.blank":"__未翻译__","w.link.placeholder.site":"__未翻译__","w.link.placeholder.phone":"__未翻译__","w.link.placeholder.email":"__未翻译__","w.link.anchorEmpty":"__未翻译__","w.dialog.cancel":"Cancel","w.dialog.confirm":"Confirm","w.link.listEmpty":"__未翻译__","w.link.listEmpty.desc":"__未翻译__","w.link":"Link","w.anchor":"Anchor","w.anchor.name":"Anchor Name","w.text":"Text","w.text.fontFamily":"Font Family","w.text.fontWeight":"Font Weight","w.text.fontSize":"Font Size","w.text.textAlign":"Text Align","w.text.lineHeight":"Line Height","w.text.textDecoration":"Text Decoration","w.text.more":"More","w.text.list":"List","w.menu.returnHome":"Return Home","w.menu.import":"Import File","w.layer.layers":"Layers","w.component.add":"Add","w.component.basic":"Basic","w.component.title":"Title","w.component.paragraph":"Paragraph","w.component.image":"Image","w.component.resource":"Resource","w.component.layout":"Layout","w.component.container":"Container","w.component.titleContent":"__未翻译__","w.component.paragraphContent":"__未翻译__","w.contextmenu.cut":"Cut","w.contextmenu.copy":"Copy","w.contextmenu.paste":"Paste","w.contextmenu.duplicate":"Duplicate","w.contextmenu.rename":"Rename","w.contextmenu.toggleVisibility":"Toggle Visibility","w.contextmenu.delete":"Delete","w.contextmenu.unwrap":"Remove Container","w.contextmenu.wrap":"Place in Container","w.contextmenu.apply":"Apply to All Breakpoints","w.contextmenu.apply.success":"__未翻译__","w.contextmenu.addAnchor":"Add Anchor","w.contextmenu.sectionOrder":"Section Order","w.contextmenu.layerOrder":"Layer Order","w.contextmenu.layerUp":"Layer Up","w.contextmenu.layerToTop":"Layer To Top","w.contextmenu.layerDown":"Layer Down","w.contextmenu.layerToBottom":"Layer To Bottom","w.contextmenu.clipboardInvalid":"Try Command Ctrl + V Please.","w.nav.preview":"Preview","w.nav.edit":"Edit","w.nav.publish":"Publish","w.zoom.zoomIn":"Zoom In","w.zoom.zoomOut":"Zoom Out","w.zoom.100%":"100%","w.device.adjustTips":"__未翻译__","w.device.desktop":"__未翻译__","w.device.desktop.breakpoint":"__未翻译__","w.device.desktop.desc":"__未翻译__","w.device.phone":"__未翻译__","w.device.phone.breakpoint":"__未翻译__","w.device.phone.desc":"__未翻译__","w.device.tablet":"__未翻译__","w.device.tablet.breakpoint":"__未翻译__","w.device.tablet.desc":"__未翻译__","ext.market.publish":"Publish","ext.market.re-publish":"Republish","ext.market.enterTitle":"Enter Page Title","ext.market.publishing":"Publishing...","ext.market.published":"Publish","w.attribute":"Define <{{name}}> Attribute","w.attribute.rule":"__未翻译__","w.attribute.duplicate":"__未翻译__","w.attribute.empty":"__未翻译__","w.attribute.add":"Add Attribute","w.attribute.key":"Key","w.attribute.value":"Value","w.attribute.value.placeholder":"Custom","w.unit.fillContainer":"__未翻译__","ext.market.import.unsupported":"__未翻译__","ext.market.import.dropFile":"__未翻译__","ext.market.import.selectFile":"__未翻译__","ext.market.import.parsing":"__未翻译__","ext.market.import.import":"__未翻译__","ext.market.record.networkError":"There is a network exception.","ext.market.record.networkErrorDes":"Unprocessed changes are saved in your browser. When the network is restored, these changes are automatically saved to a cloud file.","ext.market.record.networkErrorConfirm":"Refresh","ext.market.record.networkErrorSaveTip":"When the network is restored, unsaved changes are automatically saved to the cloud file.","ext.market.record.autoSaveError":"An exception occurred with auto-save, please try to save manually ctrl/cmd + s.","ext.market.record.manualSaveError":"Save failed, please try again later.","ext.market.record.backupTips":"There are unsaved changes in this browser, do you want to restore them?","ext.market.parser.parseError":"File parsing failed, please check if the design file conforms to the specification.","w.anchor.message.exists":"__未翻译__","w.interaction":"__未翻译__","w.interaction.add":"__未翻译__","w.interaction.event":"__未翻译__","w.interaction.trigger":"__未翻译__","w.interaction.eventType":"__未翻译__","w.interaction.value":"__未翻译__","w.interaction.click":"__未翻译__","w.interaction.mouseover":"__未翻译__","w.interaction.mouseenter":"__未翻译__","w.interaction.mouseleave":"__未翻译__","w.interaction.mouseup":"__未翻译__","w.interaction.mousedown":"__未翻译__","w.text.currentWork":"__未翻译__","w.text.zh":"__未翻译__","w.text.en":"__未翻译__","w.component.autoLayout.row":"__未翻译__","w.component.autoLayout.col":"__未翻译__","w.component.autoLayout.scroll":"__未翻译__","w.component.autoLayout.page":"__未翻译__","w.component.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap":"__未翻译__","w.autoLayout.wrap.wrap":"__未翻译__","w.autoLayout.wrap.nowrap":"__未翻译__","w.autoLayout.addItem":"__未翻译__","w.layout.scrollSnap":"__未翻译__","w.layout.scrollSnap.none":"__未翻译__","w.layout.scrollSnap.left":"__未翻译__","w.layout.scrollSnap.center":"__未翻译__","w.layout.scrollSnap.right":"__未翻译__","w.layout.scrollSnap.proximity":"__未翻译__","w.layout.scrollSnap.mandatory":"__未翻译__","w.trigger.intersection":"__未翻译__","w.display.scroll":"__未翻译__","w.node.tagName":"__未翻译__","w.linkOrAnchor":"__未翻译__","w.linkOrAnchor.rel":"__未翻译__","w.image.alt":"__未翻译__","w.image":"__未翻译__","w.image.ossResize":"__未翻译__","w.image.ossResize.maxWidth":"__未翻译__","w.image.ossResize.quality":"__未翻译__"};class u1{constructor(){C(this,"_serviceBrand"),pt.init({lng:"zh",fallbackLng:"en",resources:{en:{translation:d1},zh:{translation:c1}}})}get instance(){return pt}t(e,t,n){return n?this.instance.t(e,t,n):this.instance.t(e,t)}}function h1({instantiationService:e,slot:t}){const n=function(e){const t=e?e.invokeFunction((e=>e.get(l1))):new u1;return vt(t.instance),t}(e);return T.exports.useEffect((()=>{document.body.appendChild(function(e,t){const n=document.createElement("script");return n.type=e,n.innerHTML=t,n}("systemjs-importmap",'\n        {\n          "imports": {\n            "vue": "https://st0.dancf.com/package/npm/gaoding/widget-vue/0.0.1/dist/index.system.js"\n          }\n        }\n        ')),$F&&($F.addPlugin(jF,null),$F.addPlugin(FF,{sampleRate:1}),$F.addPlugin(UF,{sampleRate:1}),$F.install())}),[]),k(jL.Provider,{value:{instantiationService:e,i18nService:n},children:k(T.exports.StrictMode,{children:k(ft,{children:A(fe,{className:"app-theme",color:"light",scale:"medium",children:[k(gt,{}),k(mt,{backend:_t,context:window,children:k(Rn,{children:k(a1,{slot:t})})})]})})})})}const p1=$0.performance&&"function"==typeof $0.performance.now;class f1{constructor(e){C(this,"_highResolution"),C(this,"_startTime"),C(this,"_stopTime"),this._highResolution=p1&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new f1(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?$0.performance.now():Date.now()}}var g1;!function(e){function t(e){return(t,n=null,i)=>{let r=!1;const o=e((e=>{if(!r)return o?o.dispose():r=!0,t.call(n,e)}),null,i);return r&&o.dispose(),o}}function n(e){let t;const n=new w1({onFirstListenerAdd(){t=e(n.fire,n)},onLastListenerRemove(){t.dispose()}});return n.event}e.None=()=>vD.None,e.once=t,e.map=function(e,t){return n(((n,i=null,r)=>e((e=>n.call(i,t(e))),null,r)))},e.filter=function(e,t){return n(((n,i=null,r)=>e((e=>t(e)&&n.call(i,e)),null,r)))},e.snapshot=n,e.toPromise=function(e){return new Promise((n=>t(e)(n)))}}(g1||(g1={}));const m1=class{constructor(e){C(this,"_name"),C(this,"_stopWatch"),C(this,"_listenerCount",0),C(this,"_invocationCount",0),C(this,"_elapsedOverall",0),this._name=`${e}_${m1._idPool++}`}start(e){this._stopWatch=new f1(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let _1=m1;C(_1,"_idPool",0);class v1{constructor(e){this.value=e}static create(){var e;return new v1(null!=(e=(new Error).stack)?e:"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class y1{constructor(e,t,n){C(this,"subscription",new yD),this.callback=e,this.callbackThis=t,this.stack=n}invoke(e){this.callback.call(this.callbackThis,e)}}class w1{constructor(e){var t;C(this,"_options"),C(this,"_leakageMon"),C(this,"_perfMon"),C(this,"_disposed",!1),C(this,"_event"),C(this,"_deliveryQueue"),C(this,"_listeners"),this._options=e,this._leakageMon=void 0,this._perfMon=(null==(t=this._options)?void 0:t._profName)?new _1(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(),null==(n=null==(t=this._options)?void 0:t.onLastListenerRemove)||n.call(t),null==(i=this._leakageMon)||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,r,o;this._listeners||(this._listeners=new uD);const s=this._listeners.isEmpty();let a,l;s&&(null==(i=this._options)?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this),this._leakageMon&&this._listeners.size>=30&&(l=v1.create(),a=this._leakageMon.check(l,this._listeners.size+1));const c=new y1(e,t,l),d=this._listeners.push(c);s&&(null==(r=this._options)?void 0:r.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),(null==(o=this._options)?void 0:o.onListenerDidAdd)&&this._options.onListenerDidAdd(this,e,t);const u=c.subscription.set((()=>{if(a&&a(),!this._disposed&&(d(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}));return n instanceof _D?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new uD);for(const t of this._listeners)this._deliveryQueue.push([t,e]);for(null==(t=this._perfMon)||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{e.invoke(t)}catch(f8){un(f8)}}null==(n=this._perfMon)||n.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}const b1=rn("logService");var x1,C1;(C1=x1||(x1={}))[C1.Trace=0]="Trace",C1[C1.Debug=1]="Debug",C1[C1.Info=2]="Info",C1[C1.Warning=3]="Warning",C1[C1.Error=4]="Error",C1[C1.Critical=5]="Critical",C1[C1.Off=6]="Off";class k1 extends vD{constructor(){super(...arguments),C(this,"level",2),C(this,"_onDidChangeLogLevel",this._register(new w1)),C(this,"onDidChangeLogLevel",this._onDidChangeLogLevel.event)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}const E1=rn("environmentService");var S1,I1;(I1=S1||(S1={})).dev="dev",I1.fat="fat",I1.stage="stage",I1.prod="prod";const O1=rn("resourceService");var T1;!function(e){e[e.APPLICATION=1]="APPLICATION"}(T1||(T1={}));const M1={properties:{},patternProperties:{}},N1={properties:{},patternProperties:{}};class A1{constructor(){C(this,"defaultValues"),C(this,"configurationProperties"),C(this,"excludedConfigurationProperties"),this.defaultValues={},this.configurationProperties={},this.excludedConfigurationProperties={}}getConfigurationProperties(){return this.configurationProperties}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=[];e.forEach((e=>{n.push(...this.validateAndRegisterProperties(e,t)),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e,t=!0,n=1){n=Wt(e.scope)?n:e.scope;const i=[],r=e.properties;if(r)for(const s in r){if(t&&L1(s)){delete r[s];continue}const e=r[s];this.updatePropertyDefaultValue(s,e),W1.test(s)?e.scope=void 0:e.scope=Wt(e.scope)?n:e.scope,!r[s].hasOwnProperty("included")||r[s].included?(this.configurationProperties[s]=r[s],!r[s].deprecationMessage&&r[s].markdownDeprecationMessage&&(r[s].deprecationMessage=r[s].markdownDeprecationMessage),i.push(s)):(this.excludedConfigurationProperties[s]=r[s],delete r[s])}const o=e.allOf;if(o)for(const s of o)i.push(...this.validateAndRegisterProperties(s,t,n));return i}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];Kt(n)&&(n=t.default),Kt(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n}registerJSONConfiguration(e){const t=e=>{const n=e.properties;if(n)for(const t in n)this.updateSchema(t,n[t]);const i=e.allOf;i&&i.forEach(t)};t(e)}updateSchema(e,t){switch(M1.properties[e]=t,t.scope){case 1:N1.properties[e]=t}}}const R1="configurationRegistry";let D1=Reflect.get($0,R1);D1||(D1=new A1,Reflect.set($0,R1,D1));const P1=D1;function L1(e){return e.trim()?W1.test(e)?`Cannot register '${e}. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`:void 0!==P1.getConfigurationProperties()[e]?`Cannot register '${e}'. This property is already registered.`:null:"Cannot register an empty property"}const U1=rn("configurationService");var F1;function B1(e,t,n){const i=function(e,t){let n=e;for(const i of t){if("object"!=typeof n||null===n)return;n=n[i]}return n}(e,t.split("."));return void 0===i?n:i}function j1(e,t){const n=Object.create(null);for(const i in e)V1(n,i,e[i],t);return n}function V1(e,t,n,i){const r=t.split("."),o=r.pop();let s=e;for(let a=0;a<r.length;a++){const e=r[a];let n=s[e];switch(typeof n){case"undefined":n=s[e]=Object.create(null);break;case"object":break;default:return void i(`Ignoring ${t} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(n)}`)}s=n}if("object"==typeof s&&null!==s)try{s[o]=n}catch(f8){i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}else i(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}function z1(e,t){K1(e,t.split("."))}function K1(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const i=e[n];"object"!=typeof i||Array.isArray(i)||(K1(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}!function(e){e[e.USER=1]="USER",e[e.WORKSPACE=2]="WORKSPACE",e[e.DEFAULT=3]="DEFAULT",e[e.MEMORY=4]="MEMORY"}(F1||(F1={}));const W1=new RegExp("\\[.*\\]$");function H1(e){return e.substring(1,e.length-1)}class $1{constructor(e={},t=[],n=[]){C(this,"isFrozen",!1),this._contents=e,this._keys=t,this._overrides=n}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?B1(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?B1(n,e):n:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;const n={};for(const i of function(e,t){if(!t)return e.filter(((t,n)=>e.indexOf(t)===n));const n=Object.create(null);return e.filter((e=>{const i=t(e);return!n[i]&&(n[i]=!0,!0)}))}([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[i];const r=t[i];r&&("object"==typeof e&&"object"==typeof r?(e=AR(e),this.mergeContents(e,r)):e=r),n[i]=e}return new $1(n,this.keys,this.overrides)}merge(...e){const t=AR(this.contents),n=AR(this.overrides),i=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const e of r.overrides){const[t]=n.filter((t=>Jt(t.identifiers,e.identifiers)));t?this.mergeContents(t.contents,e.contents):n.push(AR(e))}for(const e of r.keys)-1===i.indexOf(e)&&i.push(e)}return new $1(t,i,n)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const n of Object.keys(t))n in e&&qt(e[n])&&qt(t[n])?this.mergeContents(e[n],t[n]):e[n]=AR(t[n])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?LR(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}setValue(e,t){this.addKey(e),V1(this.contents,e,t,(e=>{throw new Error(e)}))}removeValue(e){this.removeKey(e)&&z1(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)0===e.indexOf(this.keys[n])&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}class q1{constructor(e,t=new $1,n=new $1,i=!0){C(this,"_workspaceConsolidatedConfiguration",null),this._defaultConfiguration=e,this._workspaceConfiguration=t,this._memoryConfiguration=n,this._freeze=i}getValue(e){return this.getConsolidateConfigurationModel().getValue(e)}updateValue(e,t){const n=this._memoryConfiguration;void 0===t?n.removeValue(e):n.setValue(e,t)}inspect(e){return{value:this.getConsolidateConfigurationModel().getValue(e)}}get defaults(){return this._defaultConfiguration}getConsolidateConfigurationModel(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys}}}static parseConfigurationModel(e){return new $1(e.contents,e.keys,e.overrides).freeze()}}class Y1 extends $1{constructor(){const e=function(){const e=Object.create(null),t=P1.getConfigurationProperties();for(const n in t)V1(e,n,t[n].default,(e=>console.error(`Conflict in default settings: ${e}`)));return e}(),t=function(){const e=P1.getConfigurationProperties();return Object.keys(e)}(),n=[];for(const i of Object.keys(e))W1.test(i)&&n.push({identifiers:[H1(i).trim()],keys:Object.keys(e[i]),contents:j1(e[i],(e=>console.error(`Conflict in default settings file: ${e}`)))});super(e,t,n)}}class G1{constructor(){C(this,"_past"),C(this,"_future"),C(this,"locked"),C(this,"versionId"),this._past=[],this._future=[],this.locked=!1,this.versionId=1}test_getPast(){return this._past}test_getFuture(){return this._future}push(e){this._future.length=0,this._past.push(e),this.versionId++}pop(){this._future.length=0,this._past.pop(),this.versionId++}amend(e){if(!this._past.length)throw new Error("400");this._future.length=0;const t=this.getClosestPastElement();if(!t)throw new Error("500");return t.merge(e),t}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}dispose(){this.versionId++}}class X1{constructor(e,t){C(this,"_defaultKeybindings"),C(this,"_keybindings"),C(this,"_defaultBoundCommands"),C(this,"_map"),C(this,"_lookupMap"),this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let n=0,i=e.length;n<i;n++){const t=e[n].command;t&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=X1.combine(e,t);for(let n=0,i=this._keybindings.length;n<i;n++){const e=this._keybindings[n];0!==e.keypressParts.length&&(e.when&&e.when.type===nD.False||this._addKeyPress(e.keypressParts[0],e))}}static _isTargetedForRemoval(e,t,n,i,r){if(e.command!==i)return!1;if(t&&e.keypressParts[0]!==t)return!1;if(n&&e.keypressParts[1]!==n)return!1;if(r){if(!e.when)return!1;if(!r.equals(e.when))return!1}return!0}static combine(e,t){e=e.slice(0);const n=[];for(const i of t){if(!i.command||0===i.command.length||"-"!==i.command.charAt(0)){n.push(i);continue}const t=i.command.substr(1),r=i.keypressParts[0],o=i.keypressParts[1],s=i.when;for(let n=e.length-1;n>=0;n--)this._isTargetedForRemoval(e[n],r,o,t,s)&&e.splice(n,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(void 0===n)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let i=n.length-1;i>=0;i--){const e=n[i];if(e.command===t.command)continue;const r=e.keypressParts.length>1,o=t.keypressParts.length>1;r&&o&&e.keypressParts[1]!==t.keypressParts[1]||X1.whenIsEntirelyIncluded(e.when,t.when)&&this._removeFromLookupMap(e)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(void 0!==t)for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return void t.splice(n,1)}static whenIsEntirelyIncluded(e,t){return!t||!!e&&this._implies(e,t)}static _implies(e,t){const n=e=>e.type===nD.Or?e.expr:[e],i=n(e.negate()).concat(n(t));for(let r=0;r<i.length;r++){const e=i[r].negate();for(let t=r+1;t<i.length;t++){const n=i[t];if(e.equals(n))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(void 0===t||0===t.length)return[];const n=[];let i=0;for(let r=t.length-1;r>=0;r--)n[i++]=t[r];return n}lookupPrimaryKeybinding(e){const t=this._lookupMap.get(e);return void 0===t||0===t.length?null:t[t.length-1]}resolve(e,t){this._log(`| Resolving ${t}`);let n=null;const i=this._map.get(t);if(void 0===i)return this._log("\\ No keybinding entries."),null;n=i;const r=this._findCommand(e,n);return r?(this._log(`\\ From ${n.length} keybinding entries, matched ${r.command}, when: ${function(e){if(!e)return"no when condition";return`${e.serialize()}`}(r.when)}, source: ${o=r,o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}.`),{leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null);var o}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(X1.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return!t||t.evaluate(e)}_log(...e){}}class J1{constructor(e,t){C(this,"_parent"),C(this,"_value"),C(this,"_id"),this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e=w(w({},e),this._value),delete e._contextId,e}}const Q1=class extends J1{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let Z1=Q1;C(Z1,"INSTANCE",new Q1);const e2=class extends J1{constructor(e){super(e,null),C(this,"_values",new ZR(new lD))}getValue(e){return 0!==e.indexOf(e2._keyPrefix)?super.getValue(e):this._values.has(e)?this._values.get(e):null}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach(((t,n)=>e[n]=t)),w(w({},e),super.collectAllValues())}};let t2=e2;C(t2,"_keyPrefix","config.");class n2{constructor(e,t,n){C(this,"_service"),C(this,"_key"),C(this,"_defaultValue"),this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class i2{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class r2 extends vD{constructor(e){super(),C(this,"_isDisposed"),C(this,"_myContextId"),C(this,"_onDidChangeContext",this._register(new w1)),C(this,"onDidChangeContext",this._onDidChangeContext.event),this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new n2(this,e,t)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return X1.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new i2(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new i2(e))}getContext(e=null){return this._isDisposed?Z1.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute("data-keybinding-context")){const t=e.getAttribute("data-keybinding-context");return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}}class o2 extends vD{constructor(e,t){super(),C(this,"_serviceBrand"),C(this,"_currentSingleModifier"),C(this,"_currentSingleModifierClearTimeout"),this._contextKeyService=e,this._commandService=t,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new cn}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return this._getResolver().lookupKeybindings(e).map((e=>e.resolvedKeybinding)).filter((e=>!!e))}lookupKeybinding(e){const t=this._getResolver().lookupPrimaryKeybinding(e);if(t)return t.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getDispatchParts();if(null===i)return null;const r=this._contextKeyService.getContext(t);return this._getResolver().resolve(r,i)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1,e)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();return null!==i&&null===this._currentSingleModifier?(this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._currentSingleModifier=null}),300),!1):null!==i&&i===this._currentSingleModifier?(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0,e)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_getCommandResult(e,t,n=!1){let i=null;if(n){const[t]=e.getSingleModifierDispatchParts();i=t}else[i]=e.getDispatchParts();let r=null;if(i){const e=this._contextKeyService.getContext(t);r=this._getResolver().resolve(e,i)}return{result:r,firstPart:i}}_doDispatch(e,t,n=!1,i){const{firstPart:r,result:o}=this._getCommandResult(e,t,n);let s=!1;if(r){if(o&&o.commandId){o.bubble||(s=!0);const e=o.commandArgs||[];e.push(i),this._commandService.executeCommand(o.commandId,e).then(void 0,(e=>{console.error(e)}))}return s}s=!0}}class s2{constructor(e){C(this,"_standardKeyboardEventBrand",!0),C(this,"browserEvent"),C(this,"target"),C(this,"ctrlKey"),C(this,"shiftKey"),C(this,"altKey"),C(this,"metaKey"),C(this,"keyCode"),C(this,"code"),C(this,"_asKeybinding");const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return hF.fromString(t)}return a2[e.keyCode]||aF.Unknown}(t),this.code=t.code}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}equals(e){return this._asKeybinding===e}}const a2=new Array(230),l2=new Array(aF.MAX_VALUE);!function(){for(let t=0;t<l2.length;t++)l2[t]=-1;function e(e,t){a2[e]=t,l2[t]=e}e(3,aF.PauseBreak),e(8,aF.Backspace),e(9,aF.Tab),e(13,aF.Enter),e(16,aF.Shift),e(17,aF.Ctrl),e(18,aF.Alt),e(19,aF.PauseBreak),e(20,aF.CapsLock),e(27,aF.Escape),e(32,aF.Space),e(33,aF.PageUp),e(34,aF.PageDown),e(35,aF.End),e(36,aF.Home),e(37,aF.LeftArrow),e(38,aF.UpArrow),e(39,aF.RightArrow),e(40,aF.DownArrow),e(45,aF.Insert),e(46,aF.Delete),e(48,aF.KEY_0),e(49,aF.KEY_1),e(50,aF.KEY_2),e(51,aF.KEY_3),e(52,aF.KEY_4),e(53,aF.KEY_5),e(54,aF.KEY_6),e(55,aF.KEY_7),e(56,aF.KEY_8),e(57,aF.KEY_9),e(65,aF.KEY_A),e(66,aF.KEY_B),e(67,aF.KEY_C),e(68,aF.KEY_D),e(69,aF.KEY_E),e(70,aF.KEY_F),e(71,aF.KEY_G),e(72,aF.KEY_H),e(73,aF.KEY_I),e(74,aF.KEY_J),e(75,aF.KEY_K),e(76,aF.KEY_L),e(77,aF.KEY_M),e(78,aF.KEY_N),e(79,aF.KEY_O),e(80,aF.KEY_P),e(81,aF.KEY_Q),e(82,aF.KEY_R),e(83,aF.KEY_S),e(84,aF.KEY_T),e(85,aF.KEY_U),e(86,aF.KEY_V),e(87,aF.KEY_W),e(88,aF.KEY_X),e(89,aF.KEY_Y),e(90,aF.KEY_Z),e(93,aF.ContextMenu),e(96,aF.NUMPAD_0),e(97,aF.NUMPAD_1),e(98,aF.NUMPAD_2),e(99,aF.NUMPAD_3),e(100,aF.NUMPAD_4),e(101,aF.NUMPAD_5),e(102,aF.NUMPAD_6),e(103,aF.NUMPAD_7),e(104,aF.NUMPAD_8),e(105,aF.NUMPAD_9),e(106,aF.NUMPAD_MULTIPLY),e(107,aF.NUMPAD_ADD),e(108,aF.NUMPAD_SEPARATOR),e(109,aF.NUMPAD_SUBTRACT),e(110,aF.NUMPAD_DECIMAL),e(111,aF.NUMPAD_DIVIDE),e(112,aF.F1),e(113,aF.F2),e(114,aF.F3),e(115,aF.F4),e(116,aF.F5),e(117,aF.F6),e(118,aF.F7),e(119,aF.F8),e(120,aF.F9),e(121,aF.F10),e(122,aF.F11),e(123,aF.F12),e(124,aF.F13),e(125,aF.F14),e(126,aF.F15),e(127,aF.F16),e(128,aF.F17),e(129,aF.F18),e(130,aF.F19),e(144,aF.NumLock),e(145,aF.ScrollLock),e(186,aF.US_SEMICOLON),e(187,aF.US_EQUAL),e(188,aF.US_COMMA),e(189,aF.US_MINUS),e(190,aF.US_DOT),e(191,aF.US_SLASH),e(192,aF.US_BACKTICK),e(193,aF.ABNT_C1),e(194,aF.ABNT_C2),e(219,aF.US_OPEN_SQUARE_BRACKET),e(220,aF.US_BACKSLASH),e(221,aF.US_CLOSE_SQUARE_BRACKET),e(222,aF.US_QUOTE),e(223,aF.OEM_8),e(226,aF.OEM_102),e(229,aF.KEY_IN_COMPOSITION),zR?(e(59,aF.US_SEMICOLON),e(107,aF.US_EQUAL),e(109,aF.US_MINUS),jR&&e(224,aF.Meta)):KR&&(e(91,aF.Meta),e(jR?93:92,aF.Meta))}();class c2{constructor(e,t,n,i,r,o,s){C(this,"_resolvedKeybindingItemBrand"),C(this,"resolvedKeybinding"),C(this,"keypressParts"),C(this,"bubble"),C(this,"command"),C(this,"commandArgs"),C(this,"when"),C(this,"isDefault"),C(this,"extensionId"),C(this,"isBuiltinExtension"),this.resolvedKeybinding=e,this.keypressParts=e?d2(e.getDispatchParts()):[],e&&0===this.keypressParts.length&&(this.keypressParts=d2(e.getSingleModifierDispatchParts())),this.bubble=!!t&&t.charCodeAt(0)===qR.Caret,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=s}}function d2(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i)return t;t.push(i)}return t}const u2=new class{constructor(e,t,n=t){C(this,"modifierLabels"),this.modifierLabels=[null],this.modifierLabels[HR.Macintosh]=e,this.modifierLabels[HR.Windows]=t,this.modifierLabels[HR.Linux]=n}toLabel(e,t,n){if(0===t.length)return null;const i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r],s=n(o);if(null===s)return null;i[r]=h2(o,s,this.modifierLabels[e])}return i.join(" ")}}({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function h2(e,t,n){if(null===t)return"";const i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),""!==t&&i.push(t),i.join(n.separator)}class p2 extends class extends class{}{constructor(e,t){if(super(),C(this,"_os"),C(this,"_parts"),0===t.length)throw new Error("400");this._os=e,this._parts=t}getLabel(){return u2.toLabel(this._os,this._parts,(e=>this._getLabel(e)))}getParts(){return this._parts.map((e=>this._getPart(e)))}_getPart(e){return new _F(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e))}getDispatchParts(){return this._parts.map((e=>this._getDispatchPart(e)))}getSingleModifierDispatchParts(){return this._parts.map((e=>this._getSingleModifierDispatchPart(e)))}}{constructor(e,t){super(t,[e])}_keyCodeToUILabel(e){if(this._os===HR.Macintosh)switch(e){case aF.LeftArrow:return"←";case aF.UpArrow:return"↑";case aF.RightArrow:return"→";case aF.DownArrow:return"↓"}return hF.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getDispatchPart(e){return p2.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=hF.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode!==aF.Ctrl||e.shiftKey||e.altKey||e.metaKey?e.keyCode!==aF.Shift||e.ctrlKey||e.altKey||e.metaKey?e.keyCode!==aF.Alt||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==aF.Meta||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}}var f2=Object.defineProperty,g2=Object.getOwnPropertyDescriptor,m2=(e,t)=>(n,i)=>t(n,i,e);const _2=["input","textarea","select","sp-textfield"];const v2=["-","=","0"];let y2=class extends o2{constructor(e,t,n){super(t,n),C(this,"_cachedResolver"),C(this,"_dynamicKeybindings"),C(this,"shouldDispatchKeyEventClassNames",[]),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(mX(e,pX,(e=>{if((e.ctrlKey||e.metaKey)&&v2.includes(e.key)&&e.preventDefault(),!(document.activeElement instanceof HTMLElement))return;const t=this.shouldDispatchKeyEventClassNames.length>0&&this.shouldDispatchKeyEventClassNames.some((e=>!!document.activeElement.closest(`.${e}`)));if(n=document.activeElement,(_2.includes(n.tagName.toLowerCase())||n.isContentEditable||"true"===n.contentEditable)&&!t)return;var n;const i=new s2(e);this._dispatch(i,i.target)&&(i.preventDefault(),i.stopPropagation())}))),this._register(mX(e.ownerDocument.defaultView,fX,(e=>{const t=new s2(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})))}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(cZ.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new X1(e,t)}return this._cachedResolver}setShouldDispatchKeyEventClassNames(e){this.shouldDispatchKeyEventClassNames=e}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const r of e){const e=r.when||void 0,o=r.keybinding;if(o){const s=this.resolveKeybinding(o);for(const o of s)n[i++]=new c2(o,r.command,r.commandArgs,e,t,null,!1)}else n[i++]=new c2(void 0,r.command,r.commandArgs,e,t,null,!1)}return n}resolveKeybinding(e){return[new p2(e,$R)]}resolveKeyboardEvent(e){const t=new gF(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new p2(t,$R)}};y2=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?g2(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&f2(t,n,o),o})([m2(1,aD),m2(2,wD)],y2);var w2=Object.defineProperty,b2=Object.getOwnPropertyDescriptor;let x2=class{constructor(e){C(this,"_needEventCommandIds",new Set),this._instantiationService=e}executeCommand(e,...t){const n=kD.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{const e=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return Promise.resolve(e)}catch(i){return Promise.reject(i)}}};function C2(e){return yt.hash(e)}function k2(){const e=URL.createObjectURL(new Blob([]));return URL.revokeObjectURL(e),e.split("/").pop()}function E2(e="",t=""){return new Promise(((n,i)=>{const r=new Image;r.crossOrigin=t,r.onload=()=>{n(r)},r.onerror=()=>{i(new Error(`Image load error: ${e}`))},r.src=e}))}x2=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?b2(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&w2(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(0,tn)],x2);const S2=rn("marketRequestService"),I2=new Map([["NETWORK_ANOMALY",0],["CONTINUE",100],["SWITCHING_PROTOCOLS",101],["EARLY_HINTS",103],["OK",200],["CREATED",201],["ACCEPTED",202],["NON_AUTHORITATIVE_INFORMATION",203],["NO_CONTENT",204],["RESET_CONTENT",205],["PARTIAL_CONTENT",206],["MULTIPLE_CHOICES",300],["MOVED_PERMANENTLY",301],["FOUND",302],["SEE_OTHER",303],["NOT_MODIFIED",304],["TEMPORARY_REDIRECT",307],["PERMANENT_REDIRECT",308],["BAD_REQUEST",400],["UNAUTHORIZED",401],["PAYMENT_REQUIRED",402],["FORBIDDEN",403],["NOT_FOUND",404],["METHOD_NOT_ALLOWED",405],["NOT_ACCEPTABLE",406],["PROXY_AUTHENTICATION_REQUIRED",407],["REQUEST_TIMEOUT",408],["CONFLICT",409],["GONE",410],["LENGTH_REQUIRED",411],["PRECONDITION_FAILED",412],["PAYLOAD_TOO_LARGE",413],["URI_TOO_LONG",414],["UNSUPPORTED_MEDIA_TYPE",415],["RANGE_NOT_SATISFIABLE",416],["EXPECTATION_FAILED",417],["IM_A_TEAPOT",418],["UNPROCESSABLE_ENTITY",422],["TOO_EARLY",425],["UPGRADE_REQUIRED",426],["PRECONDITION_REQUIRED",428],["TOO_MANY_REQUESTS",429],["REQUEST_HEADER_FIELDS_TOO_LARGE",431],["UNAVAILABLE_FOR_LEGAL_REASONS",451],["INTERNAL_SERVER_ERROR",500],["NOT_IMPLEMENTED",501],["BAD_GATEWAY",502],["SERVICE_UNAVAILABLE",503],["GATEWAY_TIMEOUT",504],["HTTP_VERSION_NOT_SUPPORTED",505],["VARIANT_ALSO_NEGOTIATES",506],["INSUFFICIENT_STORAGE",507],["LOOP_DETECTED",508],["NOT_EXTENDED",510],["NETWORK_AUTHENTICATION_REQUIRED",511]]);var O2="_toast_mhiw0_1",T2="_toastPlacementTop_mhiw0_20",M2="_toastPlacementBottom_mhiw0_24",N2="_toastSeparator_mhiw0_28",A2="_toastClose_mhiw0_35",R2="_toastCloseIcon_mhiw0_42",D2="_toastButton_mhiw0_47";const P2={default:"#202123",info:"#1544EA",success:"#049A42",warning:"#F87107",error:"#F13025"};function L2(e){const{message:t,showClose:n,placement:i,type:r,buttons:o}=e,s=N(O2,"top"===i?T2:M2),a={"--background-color":P2[r||"default"]},l=Array.isArray(o)&&o.map((e=>k("span",{className:D2,onClick:e.handler,children:e.text},e.text)));return A("div",{className:s,style:a,children:[t,l,n&&A(be,{children:[k("i",{className:N2}),k("span",{className:A2,onClick:e.close,children:k(L,{className:R2,name:"editor:Close"})})]})]})}function U2(e){const{container:t,remove:n}=function(){const e=document.querySelector("sp-theme"),t=document.createElement("div");return e.appendChild(t),{slot:e,container:t,remove:()=>{e.contains(t)&&e.removeChild(t)}}}(),i=()=>n(),r=b(w({},e),{close:i});return e.duration&&setTimeout((()=>i()),e.duration),oe.exports.render(k(L2,w({},r)),t),i}function F2(e){const t=()=>e.confirmLogin(),n={[I2.get("UNAUTHORIZED")]:t,[I2.get("FORBIDDEN")]:t};return e=>{const t=n[e.status];return!!t&&(t(),!0)}}function B2(e){return t=>{const n=j2(t),i=F2(e),r=setTimeout((()=>{i(n)||(e=>{U2({message:e.message,duration:2e3,type:"error",placement:"top",showClose:!0})})(n)}));return Object.assign(n,{cancelErrorHandle:()=>{clearTimeout(r)}})}}function j2(e){var t,n,i,r,o;const s=(null==(n=null==(t=e.response)?void 0:t.data)?void 0:n.message)||e.message;return{status:(null==(r=null==(i=e.response)?void 0:i.data)?void 0:r.status)||(null==(o=e.request)?void 0:o.status),message:s,request:e.request,response:e.response}}function V2(e){const t=F2(e),n=function(){let e="";try{const t=JSON.parse(window.localStorage.getItem("token")||"null");e=(null==t?void 0:t.token)||""}catch(n){}return()=>e?Promise.resolve(e):wt.get("/api/token").then((t=>(e=t.data.data.token,e))).catch((n=>{const i=j2(n);return t(i),e="",e}))}();return()=>n().then((e=>({authorization:e})))}function z2(e){const t=e.get(S2).authClient;return{baseURL:e.get(E1).getCustomArgv("market","MARKET_ORIGIN"),withCredentials:!1,headerHandlers:[V2(t)],errorHandler:B2(t),apis:{postOSSToken:"POST public/tokens",postLandingPage:"POST manage/landing-pages",copyLandingPage:"POST manage/landing-pages/:id",getLandingPage:"GET manage/landing-pages/:id",putLandingPage:"PUT manage/landing-pages/:id",deleteLandingPage:"DELETE /manage/landing-pages/:id",getLandingPages:"GET manage/landing-pages",getLandingPageHistories:"GET manage/landing-pages/publish-histories",getLandingPageHistory:"GET manage/landing-pages/publish-histories/:id",recoverLandingPageHistory:"POST manage/landing-pages/publish-histories/:id",createLandingTemplate:"POST manage/landing-pages/:id/to-template"}}}var K2=Object.defineProperty,W2=Object.getOwnPropertyDescriptor,H2=(e,t)=>(n,i)=>t(n,i,e);let $2=class{constructor(e,t){C(this,"_serviceBrand"),C(this,"oss"),this.requestService=e,this.instantiationService=t;const n=this.requestService.getClient(this._getAPIConfig());this.oss=new bt({getToken:e=>n.postOSSToken({type:"oss",key:e})})}_getAPIConfig(){return this.instantiationService.invokeFunction(z2)}_uuid(){const e=URL.createObjectURL(new Blob([]));return URL.revokeObjectURL(e),e.split("/").pop()}_getFileSuffix(e){return e.type.split("/").pop().replace(/\+\w+$/,"")}_generateFileName(e){return`${this._uuid()}.${this._getFileSuffix(e)}`}_generateFileKey(e){return`iliad-editor/${this._uuid()}.${this._getFileSuffix(e)}`}_blobToFile(e){return e instanceof File?e:new File([e],this._generateFileName(e))}get(e,t="blob"){return fetch(e).then((e=>e[t]()))}async put(e,t){const n=this._blobToFile(e),i=this._generateFileKey(e);return this.oss.upload(n,i,t).then((e=>`${e.actionUrl}${e.key}`))}async uploadInlineResources(e){const t=this,n=new Map,i=JSON.stringify(e,((e,t)=>{if(t&&"string"==typeof t&&((i=t)&&i.includes("data:")&&i.includes(";base64,"))){const e=t.split(/\s|\(|\)/).filter((e=>e.startsWith("data:")&&e.includes(";base64,")));if(e.length){const i=e.map((e=>{const n={key:C2(e),value:e};return t=t.replace(n.value,n.key),n}));return n.set(t,i),t}}var i;return t})),r=[...n].map((([e,i])=>{const r=i.map((({key:e,value:n})=>{const i=function(e,t=""){const n=t?`data:${t};base64,${e}`:e,[i,r]=n.split(","),o=window.atob(r),s=i.split(":")[1].split(";")[0],a=new ArrayBuffer(o.length),l=new Uint8Array(a);for(let c=0;c<o.length;c+=1)l[c]=o.charCodeAt(c);return new Blob([a],{type:s})}(n);return t.put(i).then((t=>({key:e,value:t})))}));return Promise.all(r).then((t=>{n.set(e,t)}))}));return await Promise.all(r),JSON.parse(i,((e,t)=>{if(t&&"string"==typeof t){const e=n.get(t);e&&e.forEach((({key:e,value:n})=>{t=t.replace(e,n)}))}return t}))}};$2=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?W2(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&K2(t,n,o),o})([H2(0,S2),H2(1,tn)],$2);const q2=rn("outputService"),Y2={},G2=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in Y2)return;Y2[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((e,t)=>{i.addEventListener("load",e),i.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};function X2(e){return new Promise((t=>{requestIdleCallback((()=>{t(e())}))}))}globalThis.requestIdleCallback=globalThis.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},globalThis.cancelIdleCallback=globalThis.cancelIdleCallback||function(e){clearTimeout(e)};let J2=null;function Q2(){return J2?Promise.resolve(J2):G2((()=>import("./renderWorker.b7b7b6ce.js")),[]).then((e=>{const t=new(0,e.default);return J2=xt(t),J2}))}function Z2(e){return JSON.parse(JSON.stringify(e))}async function e5(e,t){let n=0;e.breakpoints.forEach((e=>{n=Math.max(n,e.maxWidth)}));const i=1.4*n,r=await Q2(),o=await r.renderSvg(Z2(e),{viewport:{width:n,height:i}}),s=await E2(o),a=await X2((()=>function(e,t,n){const i=200,r=Math.round(i*n/t),o=document.createElement("canvas");o.width=i,o.height=r;const s=o.getContext("2d");return s.fillStyle="#fff",s.fillRect(0,0,i,r),s.drawImage(e,0,0,t,n,0,0,i,r),o}(s,n,i)));return X2((()=>function(e,t){return new Promise((n=>e.toBlob((e=>{n(e)}),t)))}(a,t)))}let t5=0;function n5(e,t,n){return function(){const e="$memoize"+t5++;let t;const n=function(n,i,r){let o=null,s=null;if("function"==typeof r.value?(o="value",s=r.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof r.get&&(o="get",s=r.get),!s)throw new Error("not supported");const a=`${e}:${i}`;r[o]=function(...e){return t=this,this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!0,enumerable:!1,writable:!0,value:s.apply(this,e)}),this[a]}};return n.clear=()=>{void 0!==t&&Object.getOwnPropertyNames(t).forEach((n=>{0===n.indexOf(e)&&delete t[n]}))},n}()(e,t,n)}const i5=Object.freeze((function(e,t){const n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));var r5;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof o5||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:g1.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i5})}(r5||(r5={}));class o5{constructor(){C(this,"_isCancelled",!1),C(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i5:(this._emitter||(this._emitter=new w1),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class s5{constructor(e){C(this,"_token"),C(this,"_parentListener"),this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new o5),this._token}cancel(){this._token?this._token instanceof o5&&this._token.cancel():this._token=r5.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof o5&&this._token.dispose():this._token=r5.None}}var a5=Object.defineProperty,l5=Object.getOwnPropertyDescriptor,c5=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?l5(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&a5(t,n,o),o},d5=(e,t)=>(n,i)=>t(n,i,e);let u5=class{constructor(e,t,n){C(this,"_serviceBrand"),this.instantiationService=e,this.storage=t,this.resourceService=n}get editorModel(){return this.instantiationService.invokeFunction((e=>e.get(zr)))}async exportHtmlContent(){return async function(e){return(await Q2()).renderHTML(Z2(e))}(await this.processModel(this.editorModel))}async processModel(e){const{fontfaces:t=[]}=e.getValue(),n=function(e){const{nodes:t,styles:n}=e.getValue(),i=new Map,r=new Map;return n.forEach((e=>{var t;const n=null!=(t=r.get(e.targetId))?t:[];r.set(e.targetId,[...n,e])})),t.filter(eo).forEach((e=>{(function(e){const t=new Map;if(!Ht(e))return e;const{body:n}=(new DOMParser).parseFromString(e,"text/html");return n.querySelectorAll("*").forEach((e=>{if(function(e){const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof HTMLElement||e instanceof n}(e)){e.style.fontFamily.split(",").forEach((n=>{var i;n&&t.set(n,(null!=(i=t.get(n))?i:"")+e.textContent)}))}})),t})(e.props.content).forEach(((e,t)=>{var n;i.set(t,null!=(n=i.get(t))?n:""+e)}))})),i.forEach(((e,t)=>{i.set(t,[...new Set(e.split(""))].join(""))})),i}(e),i=(new s5).token,r=t.map((async e=>{var t,r;const o=null==(t=n.get(e.family))?void 0:t.split(""),s=await this.resourceService.queryFontResource({family:e.family,chars:o},i);return b(w({},e),{src:(null==(r=s[0])?void 0:r.src)||e.src})})),o=await Promise.all(r);return b(w({},e.getValue()),{fontfaces:o})}async exportHtmlBlob(){const e=await this.exportHtmlContent();return new Blob([e],{type:"text/html"})}async exportHtmlURL(){const e=await this.exportHtmlBlob();return this.storage.put(e).catch((e=>(e.cancelErrorHandle&&e.cancelErrorHandle(),console.error(e),"")))}async exportHtmlImage(e="image/jpeg"){const t=await e5(this.editorModel.getValue(),e);return this.storage.put(t).catch((e=>(e.cancelErrorHandle&&e.cancelErrorHandle(),console.error(e),"")))}};c5([n5],u5.prototype,"editorModel",1),u5=c5([d5(0,tn),d5(1,oj),d5(2,O1)],u5),rn("templateConvertService");function h5(e,t){let n=null,i=e.filter((e=>{Reflect.deleteProperty(e,"$index");const{top:i,left:r,width:o,height:s}=e;e.top=i-t.top;if([["image","svg","group"].includes(e.type),r<0?o+r-t.width>=-4:o-t.width>=-4&&r<=4,Math.abs(s-t.height)<4,Math.abs(i+s-(t.top+t.height))<4].every((e=>e))){if(n){const t=n.width*n.height;n=o*s>t?e:n}else n=e;return!1}return!0}));if(n&&"group"===n.type){n.elements.forEach((e=>{e.top+=n.top,e.left+=n.left}));const e=h5(n.elements,{width:n.width,height:n.height,top:n.top,left:n.left});n=e.backgroundElement,i=[...i,...e.normalElements]}return{backgroundElement:n,normalElements:i}}async function p5(e){const t=await A5(e);return n=t.content,`data:image/svg+xml;base64,${window.btoa(window.decodeURIComponent(window.encodeURIComponent(n)))}`;var n}function f5(e){return Ct(e,{scale:.1}).then((e=>e))}async function g5(e){if(!e)return null;const t={color:"",gradient:null,image:null},n="image"===e.type?e.url:await p5(e);if(n){const i=await f5(n);i.length&&(t.color=i[0].color,i.length>1&&"image"===e.type&&(t.image=e))}return t}function m5(e){const t=e.map(((e,t)=>async function(e,t){const{rect:n,elements:i}=e,{backgroundElement:r,normalElements:o}=h5(i,n),s=await g5(r);return{$index:t,uuid:k2(),title:`layout_${t}`,backgroundEffectImage:null,background:s,backgroundRepeat:"no-repeat",backgroundMask:null,height:n.height,width:n.width,mosaic:null,border:null,className:null,top:0,backgroundColor:"",backgroundImage:"",backgroundImageInfo:null,elements:o}}(e,t)));return Promise.all(t)}async function _5(e){const t=function(e){return function(e){const t=e.slice(0).sort(((e,t)=>e.top-t.top)),n=[];return t.length?(t.reduce(((e,t)=>t.top>=e.top+e.height?(n.push(e),t):t.top+t.height>=e.top+e.height||t.height>e.height?t:e)),n):[]}(e.elements.filter((t=>{const{width:n,height:i,left:r}=t;return[r<0?n+r-e.width>=-4:n-e.width>=-4&&r<=4,i>=16].every((e=>e))})))}(e);if(!t.length)return[e];const n=function(e,t){const n=e.map((e=>({rect:{top:e.rangs[0],left:0,width:t.width,height:e.rangs[1]-e.rangs[0]},elements:[]})));let i=0;const r=t.elements.slice();for(;r.length;){const e=r.pop();e.$index=i,i+=1;let o=0,s=0;n.forEach((({rect:n},i)=>{const r=(e.top>=n.top+n.height?0:Math.max(e.top+e.height-n.top,0))*(e.left<0?Math.max(Math.min(e.left+e.width,t.width),0):Math.max(Math.min(t.width-e.left,e.width),0));r>s&&(s=r,o=i)})),n[o].elements.push(e)}return n}(function(e,t){const n=e.map(((e,t)=>({order:t,rangs:[e.top,e.top+e.height]}))),i=n[0];i.rangs[0]>0&&n.unshift({order:i.order-.1,rangs:[0,i.rangs[0]]});const r=n[n.length-1];r.rangs[1]<t.height&&n.push({order:r.order+.1,rangs:[r.rangs[1],t.height]});let o=n.shift();const s=[o];for(;n.length;){const e=n.shift();if(e.rangs[0]-o.rangs[1]>16){const t={order:e.order-.1,rangs:[o.rangs[1],e.rangs[0]]};s.push(t),s.push(e)}else s.push(e);o=e}return s}(t,e),e);return await m5(n)}const v5=[vU.value];function y5(e){const t=$(e).toRgb();return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}function w5(e,t="px"){return"string"==typeof e?e:`${e}${t}`}function b5(e,t){const n=document.createElement("canvas");return n.width=e,n.height=t,n}function x5(e){return e?e.localTransform?e:kt(e):kt(new Et)}function C5(e){const t={display:"grid","box-sizing":"border-box","grid-template-rows":IP(e.rows),"grid-template-columns":IP(e.columns)};return e.position&&(t.position=e.position),e.height&&(t.height=w5(e.height)),e.width&&(t.width=w5(e.width)),t}function k5(e){const t={"align-self":"stretch","justify-self":"stretch","grid-row-start":e.rowStart.toString(),"grid-row-end":e.rowEnd.toString(),"grid-column-start":e.columnStart.toString(),"grid-column-end":e.columnEnd.toString()};return e.alignSelf&&(t["align-self"]=e.alignSelf),e.justifySelf&&(t["justify-self"]=e.justifySelf),t}function E5(e){var t;const n={},i=(null==(t=e.background)?void 0:t.color)||"";if(i){const e=y5(i);Object.assign(n,{"background-image":ER(e),"background-size":"cover","background-repeat":"repeat"})}return n}function S5(e){var t;const n={},i=null==(t=e.background)?void 0:t.gradient;if(i){const e=i.stops.map((e=>`${y5(e.color)} ${100*e.offset+"%"}`)).join(",");Object.assign(n,{"background-image":`linear-gradient(${i.angle-90}deg, ${e})`,"background-size":"cover","background-repeat":"repeat"})}return n}function I5(e){const{naturalWidth:t,naturalHeight:n,width:i,height:r}=e,o=x5(e.imageTransform),s=t*o.scale.x,a=n*o.scale.y;return{renderWidth:s,renderHeight:a,cropWidth:i,cropHeight:r,topOffset:(a-r)/2-o.position.y,leftOffset:(s-i)/2-o.position.x}}function O5(e){const t={},n=e.background.image,i=null==n?void 0:n.url;if(n&&i){const e=I5(n);Object.assign(t,{"background-image":`url(${i})`,"background-size":`${e.renderWidth}px ${e.renderHeight}px`,"background-repeat":`${n.repeat||"no-repeat"}`,"background-position":`${-e.leftOffset}px ${-e.topOffset}px`})}return t}function T5(e,t=["color","gradient","image"]){const n={"overflow-x":"hidden","overflow-y":"hidden"};if(!e)return n;const i={color:E5,gradient:S5,image:O5};return t.forEach((t=>{const r=i[t];Object.assign(n,r(e))})),n}function M5(e){const t={tagName:"IMG",componentType:Hr.Image},n={tagName:"SPAN",componentType:Hr.SVG},i={tagName:"DIV",componentType:Hr.Text},r={tagName:"DIV",componentType:Hr.Container},o=new Map([["image",t],["mask",t],["ninePatch",t],["svg",n],["rect",n],["arrow",n],["brush",n],["text",i],["effect-text",i],["threeText",i],["group",r]]).get(e.type);return o||console.log("unknown element type",e.type),o||{tagName:"DIV",componentType:Hr.Container}}async function N5(e){const{url:t,naturalWidth:n,naturalHeight:i}=e,r=x5(e.imageTransform);let o=null;if("mask"in e){(await f5(e.mask)).length>1&&(o=await E2(e.mask))}if(r.scale.x-1<=.001&&r.scale.y-1<=.001&&!o)return{src:t,intrinsicWidth:n,intrinsicHeight:i};const{renderHeight:s,renderWidth:a,cropHeight:l,cropWidth:c,topOffset:d,leftOffset:u}=I5(e),h=await E2(t),p=b5(a,s);p.getContext("2d").drawImage(h,0,0,a,s);const f=b5(c,l),g=f.getContext("2d");if(g.drawImage(p,u,d,c,l,0,0,c,l),o){g.globalCompositeOperation="destination-in";const e=b5(c,l);e.getContext("2d").drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,c,l),g.drawImage(e,0,0)}return{src:f.toDataURL(),originSrc:t,intrinsicWidth:c,intrinsicHeight:l}}async function A5(e){const{content:t,url:n}=e;let i=t;if(!t&&n&&(i=await fetch(n).then((e=>e.text()))),!i)return{content:""};const r=i.match(/\{\{colors\[\d+\]\}\}/g);return r&&r.length&&r.forEach((t=>{const n=t.replace(/\{|\}/g,""),r=y5(St(e,n,"#000"));i=i.replaceAll(t,r)})),{content:i}}function R5(e){const{content:t}=e;return Promise.resolve({content:t})}function D5(e){return(new Map([["image",()=>N5(e)],["mask",()=>N5(e)],["ninePatch",()=>N5(e)],["text",()=>R5(e)],["effect-text",()=>R5(e)],["threeText",()=>R5(e)],["svg",()=>A5(e)],["arrow",()=>A5(e)],["brush",()=>A5(e)],["rect",()=>async function(e){let t=e.radius;const n=Math.round(e.width-e.strokeWidth),i=Math.round(e.height-e.strokeWidth);n<2*t&&(t=n/2),i<2*t&&(t=i/2),t=t?t+.01:0;const r=e.strokeWidth/2,o=e.strokeWidth/2,s=t,a=t,l=Math.max(e.strokeWidth+1,e.width-e.strokeWidth),c=Math.max(e.strokeWidth+1,e.height-e.strokeWidth),d={};"dashed"===e.strokeLineStyle&&(d.strokeDasharray=`${2*e.strokeWidth} ${e.strokeWidth}`),"dotted"===e.strokeLineStyle&&(d.strokeLinecap="round",d.strokeDasharray="0 "+2*e.strokeWidth);const u=Object.entries(b(w({},d),{stroke:y5(e.stroke),strokeWidth:e.strokeWidth,fill:y5(e.fill||"transparent")})).map((([e,t])=>`${e}:${t}`)).join(";");return{content:`\n    <svg\n          width="${e.width}"\n          height="${e.height}"\n          viewBox="0 0 ${e.width} ${e.height}"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n      >\n          <rect\n              x="${r}"\n              y="${o}"\n              rx="${s}"\n              ry="${a}"\n              width="${l}"\n              height="${c}"\n              style="${u}"\n          />\n      </svg>\n    `}}(e)],["group",()=>Promise.resolve({})]]).get(e.type)||(()=>Promise.resolve({})))()}function P5(e){const{fontFamily:t,contents:n}=e,i=[t];Array.isArray(n)&&n.length&&n.forEach((e=>{e.fontFamily&&i.push(e.fontFamily)}));return v5.find((e=>{const t=e.split(" ").shift().toLowerCase();return i.some((e=>e.toLowerCase().includes(t)))}))||vU.value}function L5(e){const t=b(w({},IR(y5(e.color))),{width:w5(Math.ceil(e.width)),height:w5(Math.ceil(e.height)),"font-family":P5(e),"font-size":w5(e.fontSize),"font-weight":w5(e.fontWeight,""),"letter-spacing":w5(e.letterSpacing),"line-height":w5(100*(e.lineHeight||1.2),"%"),"text-align":e.textAlign});let n=e.width,i=0;const r=()=>{if(i>100)return;i+=1;(function(e,t){const n=M5(e),i=document.createElement(n.tagName);i.innerText=e.content,i.style.cssText=Object.entries(b(w({},t),{position:"fixed",top:"0px",left:`-${t.width}`,visibility:"hidden","overflow-wrap":"break-word","font-family":P5(e)})).map((([e,t])=>`${e}:${t}`)).join(";"),document.body.appendChild(i);const r=(i.scrollHeight-e.height)/e.height;return document.body.removeChild(i),r})(e,t)>.5&&(n+=2,t.width=w5(n),r())};return r(),t}function U5(e){return["text","effect-text","threeText"].includes(e.type)}function F5(e){const t={},n=e.shadows||"";n&&(U5(e)?t["text-shadow"]=n:t["box-shadow"]=n);const i=new Map([["text",()=>L5(e)],["group",()=>C5({columns:["1fr"],rows:["1fr"],position:"static"})]]).get(e.type);return i&&Object.assign(t,i()),t}function B5(e){const{layout:t,element:n}=e,i={},r=function(e){const{element:t,layout:n}=e,i={width:t.width,height:t.height,top:t.top,left:t.left,bottom:n.height-(t.top+t.height),right:n.width-(t.left+t.width),near:{top:!1,left:!1,bottom:!1,right:!1}};return i.near.top=i.top<=i.bottom,i.near.bottom=!i.near.top,i.near.left=i.left<i.right,i.near.right=!i.near.left,i}(e);return Object.assign(i,function(e,t){const n=t.width/2,i=e.left-(n-e.width/2);return{position:"static",width:w5(e.width),height:w5(e.height),"margin-top":w5(e.top),"margin-left":w5(2*i)}}(r,{width:t.width,height:t.height})),Object.assign(i,function(e){const t={};return U5(e)||"elements"in e&&e.elements.length||(t["aspect-ratio"]=""+e.width/e.height,t.height=""),t}(n)),Object.assign(i,k5({rowStart:1,rowEnd:2,columnStart:1,columnEnd:2,justifySelf:"center",alignSelf:"start"})),Object.assign(i,function(e){const t={},n=x5(e.transform);return t.transform=n.toString(),t}(n)),Object.assign(i,F5(n)),i}const j5={enable:!1,type:"color",opacity:1,width:10,direction:[1,1,1,1],image:"",imageRepeat:"round",imageSlice:{left:0,right:0,top:0,bottom:0},color:"#000000ff",$loaded:!1},V5=["filter","filterInfo","backgroundColor","backgroundImage","backgroundImageInfo","backgroundGradient","backgroundWatermarkEnable","backgroundRepeat"],z5=Ve(It({uuid:null,elements:[],title:"",backgroundImage:null,backgroundEffectImage:null,backgroundColor:"#ffffffff",background:{color:"#ffffffff",watermarkEnable:!1},backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},resourceType:"image",naturalDuration:0},backgroundWatermarkEnable:!1,backgroundRepeat:"no-repeat",backgroundGradient:null,backgroundMask:{color:"#000000FF",opacity:.7},height:480,width:640,mosaic:{enable:!1,type:-1,color:"#000000ff",url:"",imageUrl:"",tileWidth:0,tileHeight:0,blur:50,paths:[]},border:null,className:null,repeatId:null,repeatGroup:null,metaInfo:null,watermarkEnable:!1,filter:{contrast:0,sharpness:0,hueRotate:0,saturate:0,brightness:0,gaussianBlur:0,temperature:0,tint:0},filterInfo:null,userAdded:!1,$loaded:!1,$dragOver:!1,$backgroundLoaded:!1,$backgroundEditing:!1,$backgroundSelected:!1},V5));const K5=e=>{var t,n,i,r;if(function(e){var t,n,i;if((null==(t=e.background)?void 0:t.image)||(null==(n=e.background)?void 0:n.gradient))return e;const r=e.backgroundImageInfo&&b(w({},e.backgroundImageInfo),{url:e.backgroundImage,width:e.width,height:e.height,left:0,top:0,naturalWidth:e.backgroundImageInfo.width,naturalHeight:e.backgroundImageInfo.height,imageTransform:e.backgroundImageInfo.transform,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},repeat:e.backgroundRepeat,opacity:St(e,"backgroundImageInfo.opacity",1),filterInfo:e.filterInfo||null,filter:e.filter||null}),o={color:(null==(i=e.background)?void 0:i.color)||e.backgroundColor};e.backgroundGradient&&(o.gradient=e.backgroundGradient),r&&(o.image=r),e.background=Ve(o);for(const s of V5)delete e[s]}(e),St(e,"background.image")){const i=e.background.image;i.width||Mt(i,"width",e.width),i.height||Mt(i,"height",e.height),void 0===i.opacity&&Mt(i,"opacity",1),!(null==(t=i.imageTransform)?void 0:t.localTransform)&&Mt(e,"background.image.imageTransform",kt(i.imageTransform)),!(null==(n=i.transform)?void 0:n.localTransform)&&Mt(e,"background.image.transform",kt(i.transform))}const o=Object.assign(Ve(z5),{border:Ve(j5)});return Object.keys(o).forEach((t=>{const n=e[t];(Nt(n)||At(n))&&(e[t]=o[t])})),Mt(e,"background.color",function(e,t=null){return e?$(e).toString("rgb"):t}(St(e,"background.color","rgba(0,0,0,0)"))),!(null==(i=e.background)?void 0:i.image)||e.background.image.url||(null==(r=e.background.image.elementRefIds)?void 0:r.length)||(e.background.image=null),e};function W5(e){if("elements"in e&&e.elements.length){if(e.elements.length>1)return void e.elements.forEach((e=>W5(e)));if("group"===e.elements[0].type){const t=e.elements[0],n=t.elements.map((e=>(e.top+=t.top,e.left+=t.left,W5(e),e)));e.elements=n}}}async function H5(e){Tt(e,{border:Ve(j5)},K5(e)),W5(e);const{backgroundElement:t,normalElements:n}=h5(e.elements,{top:0,left:0,width:e.width,height:e.height});e.elements=n;const i=await g5(t);return i&&(e.background=Tt(e.background,i)),e}const $5=(e,t,n=3)=>{const i=String(t);return`${e}${Array(n-i.length).fill(0).join("")}${i}`};class q5{constructor(e,t){C(this,"_serviceBrand"),C(this,"_model",null),this.template=e,this.storage=t,this._initModel()}_initModel(){this._model={schemaVersion:1,meta:{},nodes:[],styles:[],links:[],breakpoints:[],triggers:[],animations:[],interactions:[]}}_createRootNode(){this._model.nodes.push({id:"root",props:{}})}_createBreakpoints(){this._model.breakpoints=Ve(Qn.breakpoints)}async _convertElement(e){var t;const{layout:n,element:i,parentNode:r,order:o}=e,s=M5(i),a=await D5(i),l={id:`comp_element_${i.type}_${k2()}`,from:r.id,props:a,meta:s,order:o},c=w({id:`s_${k2()}`,targetId:l.id,breakpointId:null},B5({element:i,layout:n,componentType:l.meta.componentType}));if("group"!==i.type)this._model.nodes.push(l),this._model.styles.push(c);else{if(!(null==(t=i.elements)?void 0:t.length))return;this._model.nodes.push(l),this._model.styles.push(c);const e=i.elements.map(((e,t)=>this._convertElement({layout:i,parentNode:l,order:$5(l.order,t),element:e})));await Promise.all(e)}}async _convertLayout(e){const{layout:t,parentNode:n,order:i}=e,r={id:`comp_section_${k2()}`,props:{},from:n.id,meta:{tagName:"SECTION",componentType:Hr.Section},order:i},o=w(w(w({id:`s_${k2()}`,targetId:r.id,breakpointId:null,width:"100%"},C5({columns:["1fr"],rows:["1fr"],position:"static",height:t.height})),k5({rowStart:e.index+1,rowEnd:e.index+2,columnStart:1,columnEnd:2,alignSelf:"stretch",justifySelf:"stretch"})),T5(t,["color"]));this._model.nodes.push(r),this._model.styles.push(o);const s=t.elements.map(((e,n)=>this._convertElement({layout:t,element:e,parentNode:r,order:$5(r.order,n)})));await Promise.all(s)}_convertGlobalLayout(){var e;const{template:t,_model:n}=this,i=n.nodes[0],r={id:"comp_page",props:{},meta:{tagName:"DIV",componentType:Hr.Page},from:i.id,order:"0.1"},o=w(w({id:`s_${k2()}`,targetId:r.id,breakpointId:null},C5({columns:["1fr"],rows:Array.from({length:t.layouts.length}).fill("auto"),position:"static",height:"auto"})),T5(null==(e=t.global)?void 0:e.layout));Reflect.deleteProperty(o,"overflow-x"),Reflect.deleteProperty(o,"overflow-y"),this._model.nodes.push(r),this._model.styles.push(o)}async _convertLayouts(){const{template:e,_model:t}=this,n=t.nodes[1],i=e.layouts.map(((e,t)=>this._convertLayout({index:t,layout:e,parentNode:n,order:$5(n.order,t)})));await Promise.all(i)}async _uploadResources(){const{storage:e,_model:t}=this;this._model=await this.storage.uploadInlineResources(t)}async convert(){return await async function(e){var t;(null==(t=e.global)?void 0:t.layout)&&(e.global.layout=await H5(e.global.layout));const n=e.layouts.map((e=>H5(e)));return e.layouts=await Promise.all(n),await Ot((e=>{if(["image","mask","ninePatch"].includes(e.type)&&(e.naturalWidth||(e.naturalWidth=e.width),e.naturalHeight||(e.naturalHeight=e.height)),["text","effect-text","threeText"].includes(e.type)){const t=e;t.content||(t.content=t.contents.reduce(((e,n)=>(Object.assign(t,n),e+n.content)),""))}}),!0,e.layouts),e}(this.template).then((e=>{this.template=e})),this._createRootNode(),this._createBreakpoints(),this._convertGlobalLayout(),await this._convertLayouts(),await this._uploadResources(),this._model}}const Y5=rn("fileParserService");var G5="_fileImporter_l2srk_1",X5="_fileImporterContent_l2srk_14",J5="_fileImporterDrag_l2srk_18",Q5="_fileImporterDragIn_l2srk_35",Z5="_fileImporterDragError_l2srk_39",e4="_fileImporterDragLoading_l2srk_43",t4="_fileImporterDes_l2srk_48",n4="_fileImporterError_l2srk_52",i4="_fileImporterButton_l2srk_56",r4="_fileImporterLoading_l2srk_78";let o4;function s4(){return o4}function a4(e,t){e&&Rt.addListeners(e,"receive",(e=>{const n=new Rt.Transmat(e);if(n.accept()&&n.hasType("application/json")){const e=JSON.parse(n.getData("application/json"));t(e)}}))}const l4=["image/vnd.adobe.photoshop","image/x-photoshop","application/json",".psd",".sketch",".json"].join(","),c4=/\.psd|sketch|json$/;function d4(e){const{t:t}=s4(),n="market-file-parser-input",[i,r]=T.exports.useState(!1),[o,s]=T.exports.useState(!1),[a,l]=T.exports.useState(""),c=T.exports.useRef();function d(t){r(!0),l(""),e.resolve(t.target.files[0])}T.exports.useEffect((()=>{a4(c.current,(t=>{r(!0),e.resolve(t)}))}),[c]);const u=N(J5,{[Q5]:o,[Z5]:!!a,[e4]:i});return k("section",{className:G5,children:k(ge,{dismissable:!0,title:t(i?"ext.market.import.parsing":"ext.market.import.import"),className:X5,close:function(){i||e.resolve(null)},children:A("div",{tabIndex:1,className:u,onDragOver:function(e){e.preventDefault(),s(!0),l("")},onDragLeave:function(e){e.preventDefault(),s(!1),l("")},onDrop:function(n){if(n.preventDefault(),n.stopPropagation(),!i&&(s(!1),n.dataTransfer.files.length)){const[i]=n.dataTransfer.files;c4.test(i.name)?(r(!0),e.resolve(i)):function(e,t=2e3){l(e),setTimeout((()=>{l("")}),t)}(t("ext.market.import.unsupported"))}},ref:c,children:[a||i?null:A(be,{children:[k("span",{className:t4,children:t("ext.market.import.dropFile")}),A("label",{className:i4,htmlFor:n,children:[t("ext.market.import.selectFile"),k("input",{type:"file",id:n,onChange:d,accept:l4})]})]}),a?k("span",{className:n4,children:a}):null,!i||a?null:A("div",{className:r4,children:[k("div",{}),k("div",{}),k("div",{}),k("div",{})]})]})})})}const u4={parseSVG:!0,parseWidget:!0,parseMultipleLayout:!0,autoIdentifyBackgroundImage:!0,autoIdentifyBackgroundColor:!0,parseGlobalBackground:!0,ignoreMetaInfo:!1,rasterizeText:!1,groupMode:"merge",defaultTextType:"content",imageQuality:90,imageMaxWidth:5e3,imageMaxHeight:5e3,loggerOptions:{disable:!0,isDebug:!1}};function h4(){window.Buffer=Dt.Buffer,window.arguments=window.arguments||[]}async function p4(e,t){const n=await(h4(),G2((()=>import("./psd-to-templet.es.4c9d7c36.js")),["assets/psd-to-templet.es.4c9d7c36.js","assets/vendor.069988a9.js","assets/vendor.76f26e25.css","assets/color-alchemy.es.200a66b1.js"]).then((e=>e.default))),i=e=>{console.log(e)};return await n(e,b(w({},u4),{groupMode:"tag",fontMetricsMap:t.fontList,onProgress:({message:e,progress:t})=>{console.log(`${t}% ${e}`)},onError:i,onFail:i}))}async function f4(e,t){const n=await(h4(),G2((()=>import("./sketch-to-templet.es.81151c65.js")),["assets/sketch-to-templet.es.81151c65.js","assets/vendor.069988a9.js","assets/vendor.76f26e25.css","assets/color-alchemy.es.200a66b1.js"]).then((e=>e.default))),i=e=>{console.log(e)},r=e=>{const t=St(e,"style.shadows",[]),n="text"===St(e,"_class","");return Xj(t.map((e=>{const t=e.color,i=$({r:Math.floor(255*t.red),g:Math.floor(255*t.green),b:Math.floor(255*t.blue),a:t.alpha}).toRgbString();return{offsetX:`${e.offsetX}px`,offsetY:`${e.offsetY}px`,blurRadius:`${e.blurRadius}px`,spreadRadius:n?"":`${e.spread}px`,color:i}})))},o=[(e,t)=>{const n=St(t,"style.fills",[]),i=St(t,"points",[]).every((e=>!e.cornerRadius));if("mask"===e.type&&1===n.length&&i){const{image:t}=n[0],i=(e.$root.images||{})[t._ref];i&&(e.type="image",e.url=i,Reflect.deleteProperty(e,"mask"))}},(e,t)=>{const{frame:n}=t;if("svg"===e.type&&(e.width!==n.width||e.height!==n.height)){const i=document.createElement("div");i.innerHTML=e.content;const o=i.children[0],s=St(o,"attributes.viewBox.nodeValue","");if(s){const[i,a]=s.split(" ").map((e=>parseInt(e,10)));e.top-=a,e.left-=i,e.width=n.width,e.height=n.height;const l=`0 0 ${n.width} ${n.height}`;o.setAttribute("viewBox",l),e.content=o.outerHTML,e.shadows=r(t)}}},(e,t)=>{const{frame:n}=t;e.width!==n.width||e.height!==n.height||e.shadow||(e.shadows=r(t))}];return await n(e,b(w(w({},u4),t),{onProgress:({message:e,progress:t})=>{console.log(`${t}% ${e}`)},onError:i,onFail:i,onDetectFont:(e,t)=>{console.log(e,t)},afterParseElement:(e,t)=>{o.forEach((n=>n(e,t)))}}))}function g4(e){return{baseURL:"https://www.gaoding.com",withCredentials:!0,errorHandler:B2(e),apis:{getTemplate:"GET api/v2/materials/:template_id/info",getFonts:"GET api/v2/fonts"}}}function m4(e){if(!e.meta)return{};const t=Reflect.get(e.meta,"__designDocumentMeta")||{};return Reflect.deleteProperty(e.meta,"__designDocumentMeta"),t}const _4=async e=>{const t=await function(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=e=>{t(JSON.parse(e.target.result))},i.onerror=e=>{n(new Error(`JSON load error: ${e.target.error}`))},i.readAsText(e)}))}(e),n=[],i=e=>Jt(e.roots,["root"]);if(Yt(t)&&!t.some((e=>!JT(e)))&&t.some(i)?n.push(...t):JT(t)&&i(t)&&n.push(t),n.length<=0)return null;const r=aM(n);if(!r)return null;const o=AR(r);return Reflect.deleteProperty(o,"roots"),o};var v4=Object.defineProperty,y4=Object.getOwnPropertyDescriptor,w4=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?y4(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&v4(t,n,o),o},b4=(e,t)=>(n,i)=>t(n,i,e);let x4=class{constructor(e,t,n,i){C(this,"_serviceBrand"),C(this,"_fontList",[]),this.storage=e,this.i18n=t,this.instantiationService=n,this.requestService=i}get requestClient(){return this.requestService.getClient(g4(this.requestService.authClient))}async _initFontList(){this._fontList.length||(this._fontList=await this.requestClient.getFonts({type:"font",page_num:1,page_size:500}).then((e=>e.data)))}async convertContent(e,t=!1){const n=t?await async function(e){const t=e.layouts.map((e=>_5(e))),n=await Promise.all(t);return e.layouts=n.flat(),e}(e):e;return new q5(n,this.storage).convert()}async importFile(){var e;const t=await new Promise((e=>{const t=document.querySelector("sp-theme"),n=document.createElement("div"),i=()=>{t.contains(n)&&t.removeChild(n)},r={resolve:t=>{e({file:t,close:i})}};oe.exports.render(k(d4,w({},r)),n),t.contains(n)||t.appendChild(n)}));if(!t.file)return t.close(),null;if(t.file instanceof File){const r=t.file.name.includes(".sketch");let o=null,s=!1;if(t.file.name.includes(".json")){const e=await _4(t.file);e?o=await this.storage.uploadInlineResources(e):s=!0}else{await this._initFontList();const a=await(n=t.file,i={fontList:this._fontList},n.name.toLowerCase().endsWith(".psd")?p4(n,i):f4(n,i));if(a&&(null==(e=a.layouts)?void 0:e.length)){const e=r;o=await this.convertContent(a,e),function(e,t){e.meta||(e.meta={}),Reflect.set(e.meta,"__designDocumentMeta",t)}(o,{width:a.layouts[0].width})}else s=!0}return s&&U2({message:this.i18n.t("ext.market.parser.parseError"),placement:"top",type:"error",duration:2e3}),t.close(),o}var n,i;const r=await this.storage.uploadInlineResources(t.file);return t.close(),r}};w4([n5],x4.prototype,"requestClient",1),x4=w4([b4(0,oj),b4(1,l1),b4(2,tn),b4(3,S2)],x4);var C4=Object.defineProperty,k4=Object.getOwnPropertyDescriptor,E4=(e,t)=>(n,i)=>t(n,i,e);const S4=((e,t=2e3)=>{let n=(new Date).getTime();const i=Pt(e);return function(...e){const r=(new Date).getTime();return r-n>t&&(i.cache=new Pt.Cache,n=r),i.bind(this)(...e)}})((function(e){return e.exportHtmlImage("image/jpeg")}),3e4);let I4=class{constructor(e,t,n,i,r){this.model=e,this.page=t,this.release=n,this.output=i,this.environmentService=r}get generators(){return new Map([["name",this._getName.bind(this)],["url",this._getUrl.bind(this)],["content_model",this._getContentModel.bind(this)],["view_url",this._getViewUrl.bind(this)],["preview_url",this._getPreviewUrl.bind(this)]])}_getName(){var e;const{page:t,model:n}=this;return Promise.resolve((null==(e=n.meta)?void 0:e.title)||(null==t?void 0:t.name)||"稿定设计")}_getUrl(){const{page:e}=this,t=this.environmentService.getCustomArgv("market","GAODING_ORIGIN"),n=(null==e?void 0:e.landing_page_key)?`${t}/landing-page/${e.landing_page_key}`:"";return Promise.resolve(n)}_getContentModel(){return Promise.resolve(JSON.stringify(this.model))}_getViewUrl(){const{page:e}=this;return e?this.output.exportHtmlURL():Promise.resolve("")}_getPreviewUrl(){const{page:e}=this;return e?S4(this.output):Promise.resolve("")}async get(e=[]){const t={};if(!e.length)return t;const{generators:n}=this,i=e.map((e=>{const i=n.get(e);return i?i().then((n=>{Object.assign(t,{[e]:n})})):Promise.resolve()}));return await Promise.all(i),t}};I4=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?k4(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&C4(t,n,o),o})([E4(3,q2),E4(4,E1)],I4);var O4=Object.defineProperty,T4=Object.getOwnPropertyDescriptor,M4=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?T4(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&O4(t,n,o),o},N4=(e,t)=>(n,i)=>t(n,i,e);const A4=["name","url","view_url","preview_url","content_model"];var R4,D4;(D4=R4||(R4={}))[D4.UNRELEASED=0]="UNRELEASED",D4[D4.RELEASED=1]="RELEASED",D4[D4.MODIFIED=2]="MODIFIED";let P4=class{constructor(e,t,n,i){C(this,"resource",null),C(this,"id",null),this.output=t,this.instantiationService=n,this.requestService=i,this.id=e}get contentModel(){var e;const t=null==(e=this.resource)?void 0:e.content_model;return t?JSON.parse(t):null}get editorModel(){return this.instantiationService.invokeFunction((e=>e.get(zr)))}get requestClient(){const e=this.instantiationService.invokeFunction(z2);return this.requestService.getClient(e)}_update(e){return this.resource=e,this.id=(null==e?void 0:e.id)||null,this.resource}async getParams(e=A4,t=!1){const{editorModel:n,resource:i}=this,r=this.instantiationService.createInstance(I4,n.getValue(),i,t);return await r.get(e)}_invoke(e,t){return this.requestClient[e](w({id:this.id},t)).then((e=>this._update(e.data)))}get(e={}){if(!this.id)throw new Error("REQUIRED ID");return this._invoke("getLandingPage",e)}post(e){if(this.id)throw new Error("RESOURCE ALREADY EXISTS");return this._invoke("postLandingPage",e)}put(e){return this._invoke("putLandingPage",e)}delete(e){return this._invoke("deleteLandingPage",e).then((()=>null))}};M4([n5],P4.prototype,"editorModel",1),M4([n5],P4.prototype,"requestClient",1),P4=M4([N4(1,q2),N4(2,tn),N4(3,S2)],P4);const L4={decodeEntities:!1,emptyAttrs:!1};var U4,F4;!function(e){e[e.Unknown=0]="Unknown",e[e.Canvas=1]="Canvas",e[e.Widgets=2]="Widgets"}(U4||(U4={})),function(e){e.None="",e.Canvas="canvas",e.CanvasOverlay="canvasOverlay",e.ComponentOverlay="componentOverlay",e.ContentWidget="contentWidget"}(F4||(F4={}));const B4={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20230308/iliad-runtime/dist/d873f25b63116883d0611f512482dea6.js"},j4={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221116/iliad-runtime/dist/641290516cf8360803a5270610cb7630.js"},V4={"data-iliad":"",async:"",type:"text/javascript",src:"https://cdn.dancf.com/fe-assets/20221220/iliad-runtime/dist/1e9620fc950f44e136c01d9c0cb1effe.js"},z4={imports:{vue:"https://st0.dancf.com/package/npm/gaoding/widget-vue/0.0.1/dist/index.system.js"}},K4={"data-iliad":"",type:"systemjs-importmap"};var W4,H4,$4,q4;rn("model"),function(e){e[e.None=0]="None",e[e.Transform=1]="Transform",e[e.Add=2]="Add"}(W4||(W4={})),function(e){e.Image="Image",e.Container="Container",e.Section="Section",e.Symbol="Symbol",e.Text="Text",e.RichText="RichText",e.SVG="SVG",e.Video="Video",e.Page="Page",e.WebWidget="WebWidget"}(H4||(H4={})),H4.Image,H4.Container,H4.Section,H4.Symbol,H4.Text,H4.SVG,H4.Video,H4.Page,H4.WebWidget,H4.RichText,function(e){e.LayouterVert="LayouterVert",e.LayouterHoriz="LayouterHoriz",e.AutoLayouterVert="AutoLayouterVert",e.AutoLayouterHoriz="AutoLayouterHoriz"}($4||($4={})),function(e){e.Button="Button",e.Title="Title",e.Paragraph="Paragraph"}(q4||(q4={})),'\n  font-feature-settings: "liga" 0;\n  overflow-wrap: break-word;\n  -webkit-line-break: after-white-space;\n  color: inherit;\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-box-decoration-break: clone;\n  inline-size: 100%;\n'.replace(/\n/g,""),"\n  content: '';\n  display: inline-block;\n  padding-left: 99%;\n".replace(/\n/g,"");class Y4{constructor(e,t,n){if(C(this,"_meta"),C(this,"_nodes"),C(this,"_doc"),C(this,"_head"),C(this,"_bdoy"),C(this,"injectDefaultConfig"),this._meta=e.meta,this._nodes=e.nodes||[],this._head=new Lt.Element("head",{},[]),this._bdoy=new Lt.Element("body",{},[]),this.injectDefaultConfig=n||!1,t)this._doc=t;else{const e=new Lt.Element("head",{},[]),t=new Lt.Element("body",{},[]),n=new Lt.Element("html",{},[e,t]);this._doc=new Lt.Document([n])}this._extend()}get html(){return this._doc.children[0]||[]}get head(){return this.html.children[0]||[]}get body(){return this.html.children[1]||[]}_appendTitle(){var e;const t=null==(e=this._meta)?void 0:e.title;t&&this._head.children.push(new Lt.Element("title",{},[new Lt.Text(t)]))}_appendDefaulMeta(){this.injectDefaultConfig&&(this._head.children.push(new Lt.Element("meta",{charset:"utf-8"})),this._head.children.push(new Lt.Element("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge"})),this._head.children.push(new Lt.Element("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover"})))}_appendMetaNodes(){var e,t;if(!(null==(t=null==(e=this._meta)?void 0:e.meta)?void 0:t.length))return;const n=this._meta.meta.map((e=>new Lt.Element("meta",e,[])));this._head.children.push(...n)}_appendCSPRules(){var e;if(!(null==(e=this._meta)?void 0:e.csp))return;const t=Object.entries(this._meta.csp).map((([e,t])=>`${JR(e)} ${t.join(" ")}`)),n=new Lt.Element("meta",{"http-equiv":"Content-Security-Policy",content:t.join(";")});this._head.children.push(n)}_appendLinkNodes(){var e,t;if(!(null==(t=null==(e=this._meta)?void 0:e.links)?void 0:t.length))return;const n=this._meta.links.map((e=>new Lt.Element("link",e,[])));this._head.children.push(...n)}_appendScriptNodes(){var e,t,n;(null==(t=null==(e=this._meta)?void 0:e.scripts)?void 0:t.length)&&(null==(n=this._meta)||n.scripts.forEach((e=>{const t=e,{location:n}=t,i=x(t,["location"]),r=new Lt.Element("script",i);n&&"head"!==n?this._bdoy.children.push(r):this._head.children.push(r)})))}_appendInlineScriptsNodes(){var e,t,n;(null==(t=null==(e=this._meta)?void 0:e.inlineScripts)?void 0:t.length)&&(null==(n=this._meta)||n.inlineScripts.forEach((e=>{const t=e,{location:n,text:i}=t,r=x(t,["location","text"]),o=new Lt.Element("script",r,[new Lt.Text(i)]);n&&"head"!==n?this._bdoy.children.push(o):this._head.children.push(o)})))}_appendConditionalCommentNodes(){var e,t;(null==(t=null==(e=this._meta)?void 0:e.conditionalComment)?void 0:t.length)&&this._meta.conditionalComment.forEach((e=>{this._head.children.push(new Lt.Comment(e.content))}))}_appendWebWidgetRuntime(){const e=new Lt.Element("script",K4,[new Lt.Text(JSON.stringify(z4))]),t=new Lt.Element("script",B4);this._head.children.push(e,t)}_appendInteractionRuntime(){const e=new Lt.Element("script",j4);this._head.children.push(e)}_appendAnimationRuntime(){const e=new Lt.Element("script",V4);this._head.children.push(e)}_extend(){this._appendDefaulMeta(),this._appendTitle(),this._appendMetaNodes(),this._appendCSPRules(),this._appendLinkNodes(),this._appendWebWidgetRuntime(),this._appendInteractionRuntime(),this._appendAnimationRuntime(),this._appendScriptNodes(),this._appendInlineScriptsNodes(),this._appendConditionalCommentNodes()}transform(){return this.head.children=[...this._head.children,...this.head.children],this.body.children=[...this.body.children,...this._bdoy.children],this._doc}}function G4(e){const t=new Lt.Document(e);return Ut(t,L4)}function X4(e,t){T.exports.useEffect((()=>{let n=null,i=!1;function r(){clearTimeout(n),n=null,i=!0}function o(){n=setTimeout((()=>{t()})),i=!1}return e.current.setAttribute("tabindex","-1"),e.current.addEventListener("focus",r,!0),e.current.addEventListener("blur",o,!0),n=setTimeout((()=>{i||e.current.focus()}),60),()=>{clearTimeout(n),e.current.removeAttribute("tabindex"),e.current.removeEventListener("focus",r,!0),e.current.removeEventListener("blur",o,!0)}}),[e,t])}var J4="_maskLayer_1j7gd_1",Q4="_darkShade_1j7gd_10",Z4="_releasePanel_1j7gd_14",e3="_releasePanelTitleInput_1j7gd_26",t3="_advanced_1j7gd_33",n3="_advancedHeader_1j7gd_38",i3="_advancedIcon_1j7gd_47",r3="_advancedIconRotated_1j7gd_51",o3="_advancedContent_1j7gd_55",s3="_advancedItem_1j7gd_62",a3="_releasePanelButton_1j7gd_86",l3="_resultContainer_1j7gd_91",c3="_resultPanel_1j7gd_97",d3="_resultPanelHead_1j7gd_109",u3="_resultPanelTitle_1j7gd_118",h3="_resultPanelReleaseAt_1j7gd_125",p3="_resultPanelClose_1j7gd_130",f3="_resultPanelContent_1j7gd_141",g3="_resultPanelURL_1j7gd_147",m3="_resultPanelQRcode_1j7gd_161",_3="_resultPanelQRcodeContent_1j7gd_167",v3="_progressContainer_1j7gd_173",y3="_progressBar_1j7gd_186";function w3(e){const t=N(J4,{[Q4]:e.dark},e.className);return k("section",{className:t,children:e.children})}function b3(){const e=document.querySelector("sp-theme"),t=document.createElement("div");return e.appendChild(t),{slot:e,container:t,remove:()=>{e.contains(t)&&e.removeChild(t)}}}function x3(e){const{meta:t,editorModel:n}=e;return new Promise((e=>{n.changeWithoutHistory((n=>{const i=n.getValue().meta||{};n.updateMeta(w(w({},i),t)),e()}))}))}function C3(e){const[t,n]=T.exports.useState(!1),[i,r]=T.exports.useState(""),[o,s]=T.exports.useState(""),a=N(i3,t?r3:null),l=e.editorModel.getValue().meta;function c(e,t=!1){const n=document.createElement("div").attachShadow({mode:"open"});n.innerHTML=e;const i={meta:[...n.querySelectorAll("meta")],links:[...n.querySelectorAll("link")],scripts:[...n.querySelectorAll("script")]},r={};Object.entries(i).forEach((([e,n])=>{r[e]=n.map((e=>(e=>{const n=[...e.attributes].reduce(((e,t)=>Object.assign(e,{[t.nodeName]:t.nodeValue})),{});return"SCRIPT"===e.tagName.toUpperCase()&&(n.src||(n.text=e.innerHTML),t&&(n.location="body")),n})(e)))}));const o=[],s=[];return r.scripts.forEach((e=>{e.text?s.push(e):o.push(e)})),{scripts:o,inlineScripts:s,meta:r.meta,links:r.links}}function d(e){return e.filter(((t,n)=>e.findIndex((e=>RR(t,e)))===n))}function u(){const t=c(i),n=c(o,!0);x3({meta:{meta:d(t.meta.concat(n.meta)),links:d(t.links.concat(n.links)),scripts:d(t.scripts.concat(n.scripts)),inlineScripts:d(t.inlineScripts.concat(n.inlineScripts))},editorModel:e.editorModel})}return T.exports.useEffect((()=>{const e=Ve(l);Reflect.deleteProperty(e,"title");const{head:t,body:n}=function(e){const t=new Y4({meta:e},null);t.transform();const n=G4((r=t.head.children,r.filter((e=>{const{tagName:t,attribs:n,children:i}=e;if("script"===t){const{type:e,src:t}=n;if(1===i.length&&e===mN.type){const[e]=i;return!("text"===(null==e?void 0:e.type)&&e.data===JSON.stringify(gN))}if(t)return![hN,pN,fN].map((e=>e.src)).includes(t)}return!0})))),i=G4(t.body.children);var r;return{head:n,body:i}}(e);r(t),s(n)}),[l]),A("div",{className:t3,children:[A("div",{className:n3,onClick:function(){n(!t)},children:[k(L,{className:a,name:"editor:ArrowRight",color:"#2254f4"}),k("span",{children:"高级选项"})]}),t?A("div",{className:o3,children:[A("div",{className:s3,children:[k("span",{children:"head 注入配置"}),k("textarea",{value:i,onChange:function(e){const t=e.target.value;r(t)},onBlur:u,placeholder:"<head>注入配置...</head>"})]}),A("div",{className:s3,children:[k("span",{children:"body 注入配置"}),k("textarea",{value:o,onChange:function(e){const t=e.target.value;s(t)},onBlur:u,placeholder:"<bdoy>注入配置...</bdoy>"})]})]}):null]})}function k3(e){var t;const{editorModel:n,pageModel:i}=e,r=(null==(t=n.getValue().meta)?void 0:t.title)||(null==i?void 0:i.name)||"",[o,s]=T.exports.useState(!1),[a,l]=T.exports.useState(r),c=T.exports.useRef(),{t:d}=s4();function u(){o||e.cancel()}const h=(null==i?void 0:i.status)===R4.UNRELEASED?"ext.market.publish":"ext.market.re-publish";return X4(c,u),k(w3,{children:A(ge,{dismissable:!0,divider:!0,title:d(h),className:Z4,close:u,ref:c,children:[k(H,{className:e3,placeholder:d("ext.market.enterTitle"),value:a,maxlength:32,change:function(e){const t=e.target;l(t.value)},disabled:o}),k(C3,{editorModel:n}),k(ae,{variant:"cta",size:"l",className:a3,click:async function(){s(!0),await x3({meta:{title:a},editorModel:e.editorModel}),e.confirm((()=>{s(!1)}))},disabled:o,children:d(o?"ext.market.publishing":"ext.market.published")})]})})}function E3(e){const{pageModel:t}=e,n=`发布于 ${new Date(t.updated_at).toLocaleString()}`,i=t.url,r=T.exports.useRef();return X4(r,e.close),k(w3,{dark:!0,className:l3,children:A("div",{className:c3,ref:r,children:[A("div",{className:d3,children:[k("h2",{className:u3,children:"页面发布成功"}),k("span",{className:h3,children:n}),k("span",{className:p3,onClick:e.close,children:k(L,{name:"editor:Close"})})]}),A("div",{className:f3,children:[A("p",{className:g3,children:[k("span",{children:"访问地址："}),k("a",{href:i,target:"_blank",children:i})]}),A("div",{className:m3,children:[k("div",{className:_3,children:k(Ft,{value:i,size:80})}),k("span",{children:"手机扫码查看作品"})]})]})]})})}function S3(e){const t={width:`${e.progress}%`};return k("div",{className:v3,children:k("div",{className:y3,style:t})})}q.t("ext.market.publish"),q.t("ext.market.re-publish");const I3=new class{constructor(e){C(this,"mock",0),C(this,"progress",0),C(this,"slotContainer",null),C(this,"mockTimer",null),this.mock=e.mock}start(){this.slotContainer=b3(),this.update(0),this.mock&&this._runMock()}_runMock(){const e=()=>{const{progress:t,mock:n}=this;if(t<n){const{min:i,floor:r,random:o}=Math,s=i(t+r(20*o()),n);this.update(s),this.mockTimer=setTimeout((()=>e()),200)}else clearTimeout(this.mockTimer)};e()}update(e){this.progress=e;const t={progress:e};oe.exports.render(k(S3,w({},t)),this.slotContainer.container)}end(){this.update(100),setTimeout((()=>{this.slotContainer.remove()}),60)}}({mock:90});var O3="_networkError_eae30_1",T3="_networkErrorContainer_eae30_12",M3="_networkErrorHead_eae30_18",N3="_networkErrorContent_eae30_27",A3="_networkErrorButton_eae30_37";function R3(e){const t=T.exports.useRef(),{t:n}=s4();return k(w3,{className:T3,dark:!0,children:A("section",{className:O3,ref:t,children:[k("h2",{className:M3,children:n("ext.market.record.networkError")}),k("p",{className:N3,children:n("ext.market.record.networkErrorDes")}),k(ae,{className:A3,variant:"primary",size:"l",click:function(){window.location.reload(),e.resolve()},children:n("ext.market.record.networkErrorConfirm")})]})})}let D3=!1;var P3=Object.defineProperty,L3=Object.getOwnPropertyDescriptor,U3=(e,t,n,i)=>{for(var r,o=i>1?void 0:i?L3(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&P3(t,n,o),o},F3=(e,t)=>(n,i)=>t(n,i,e);let B3=class{constructor(e,t,n,i,r,o,s,a){C(this,"_serviceBrand"),C(this,"_initComplete",!1),C(this,"_updateCount",0),C(this,"_savePromise",null),C(this,"_saveOperation","auto"),C(this,"_closeToast",null),C(this,"_closeNetworkError",null),C(this,"_onUpdated",new w1),C(this,"query",{}),C(this,"page",null),C(this,"_autoSave",Bt((function(){this._saveOperation="auto",window.navigator.onLine&&this.save({release:!1})}),4e3)),this.fileParserService=e,this.lifecycleservice=t,this.instantiationService=n,this.contextKeyService=i,this.commandService=r,this.storage=o,this.i18n=s,this.requestService=a}get model(){return this.instantiationService.invokeFunction((e=>e.get(zr)))}get requestClient(){return this.requestService.getClient(g4(this.requestService.authClient))}get _editingMode(){return this.contextKeyService.getContextKeyValue(ym.editingMode.key)}get _localBackupKey(){var e;const t=(null==(e=this.page.resource)?void 0:e.id)||"",n=new URL(window.location.origin);return t&&n.searchParams.append("id",`${t}`),n.toString()}get onUpdated(){return this._onUpdated.event}_updateQuery(e,t=[]){const n=[...new URLSearchParams(window.location.search)].reduce(((e,[t,n])=>(e[t]=n,e)),{});if(this.query=w(w({},n),e),e){const e=new URLSearchParams;Object.entries(this.query).forEach((([n,i])=>{t.includes(n)||e.append(n,i.toString())})),window.history.pushState(null,window.document.title,`?${e.toString()}`)}return this.query}_updateModel(e,t){return this.lifecycleservice.when(Cn.EditorCreated).then((()=>{const n=this.instantiationService.invokeFunction((e=>e.get(Sl)));var i;i=e,Kt(Reflect.get(i,"triggers"))&&Reflect.set(i,"triggers",[]),Kt(Reflect.get(i,"animations"))&&Reflect.set(i,"animations",[]),n.replaceModel(e);const r=e.nodes.find((e=>ao(e)));if(r){n.viewModel.setSelectionById(r.id),this.commandService.executeCommand("resetViewport");const e=(null==t?void 0:t.width)||0;e?this.commandService.executeCommand("resizeCanvasWidth",e):this.commandService.executeCommand("fitCanvas")}}))}_initPage(){this.page=this.instantiationService.createInstance(P4,this.query.id||0)}_initTransmatEvent(){return this.lifecycleservice.when(Cn.EditorCreated).then((()=>{a4(this.instantiationService.invokeFunction((e=>e.get(Sl))).view.canvasHostDomNode.contentDocument.body,(e=>{this.storage.uploadInlineResources(e).then((e=>{this._updateModel(e,m4(e))}))}))}))}_initUnloadMonitor(){window.addEventListener("beforeunload",(e=>{this._updateCount>0&&(e.preventDefault(),e.returnValue="")}))}_showNetworkError(){const e=this.i18n.t("ext.market.record.networkErrorSaveTip");return this._closeNetworkError=function(){if(D3)return;const{container:e,remove:t}=b3(),n=()=>{D3=!1,t()};return oe.exports.render(k(R3,{resolve:n}),e),D3=!0,n}(),this._onUpdated.fire({status:AQ.MODIFIED,message:e,type:"warning"}),e}_showSaveError(){const e="auto"===this._saveOperation,t=e?this.i18n.t("ext.market.record.autoSaveError"):this.i18n.t("ext.market.record.manualSaveError");return this._closeToast&&this._closeToast(),this._closeToast=U2({message:t,showClose:e,duration:e?0:2e3}),this._onUpdated.fire({status:AQ.MODIFIED,message:t,type:"error"}),t}_initNetworkCheck(){window.addEventListener("offline",(()=>{this._showNetworkError()})),window.addEventListener("online",(()=>{this._closeNetworkError&&this._closeNetworkError(),this.save({release:!1})}))}async _loadPage(){if(I3.start(),this.page.id)return await this.page.get(),await this._updateModel(this.page.contentModel||Qn),I3.end(),this.page.contentModel?void 0:this.import();if(this.query.gaoding_template_id){const e=await this.requestClient.getTemplate({template_id:this.query.gaoding_template_id}).then((e=>e.data)),t=JSON.parse(e.content),n=await this.fileParserService.convertContent(t,!1);return await this._updateModel(n),void I3.end()}return I3.end(),this.import()}async _create(e){await this.page.post(b(w({},e),{business_id:1})),this._updateQuery({id:this.page.id},["gaoding_template_id"])}async _update(e){await this.page.put(e)}async _save(e){const t=this._updateCount;if(!this.page.resource){const t=await this.page.getParams(A4,e.release);await this._create(t)}const n=await this.page.getParams(A4,e.release);await this._update(n),this._updateCount=this._updateCount-t;const i=this._updateCount>0?AQ.MODIFIED:AQ.SAVED,r=window.navigator.onLine?"":this.i18n.t("ext.market.record.networkErrorSaveTip");this._onUpdated.fire({status:i,message:r,type:r?"warning":"info"})}_handlerError(e){return e.cancelErrorHandle&&e.cancelErrorHandle(),(null==e?void 0:e.status)===I2.get("NETWORK_ANOMALY")?this._showNetworkError():this._showSaveError()}async save(e){return this._savePromise&&await this._savePromise,this._savePromise=this._save(e).catch((e=>{console.error(e);const t=this._handlerError(e);throw new Error(t)})).finally((()=>{this._savePromise=null})),this._savePromise}manualSave(e){if(this._saveOperation="manual",window.navigator.onLine)return this.save(e);throw new Error(this.i18n.t("ext.market.record.networkErrorSaveTip"))}async _release(){await this.manualSave({release:!0});const e=await await this.page.getParams(["url"],!0);return this._update(b(w({},e),{status:R4.RELEASED}))}async release(){if(!window.navigator.onLine)return void this._showNetworkError();const e=await(t={editorModel:this.model,pageModel:this.page.resource},new Promise((e=>{const{container:n,remove:i}=b3(),r=w({cancel:()=>{i(),e(null)},confirm:t=>{e({close:()=>{t(),i()}})}},t);oe.exports.render(k(k3,w({},r)),n)})));var t;e&&(this.instantiationService.invokeFunction((e=>{e.get(Sl).saveSEOHintOfWidgets()})),await this._release().then((()=>{e.close(),function(e){const{container:t,remove:n}=b3(),i=w({close:n},e);oe.exports.render(k(E3,w({},i)),t)}({pageModel:this.page.resource})})).catch((()=>{e.close()})))}async preview(){await this.manualSave({release:!1})}async init(){this._initComplete||(this._updateQuery(),this._initPage(),this._initUnloadMonitor(),this._initNetworkCheck(),await this._loadPage(),this.model.onUpdated((()=>{this._onUpdated.fire({status:AQ.MODIFIED}),this._updateCount+=1,this._autoSave()})),this._initComplete=!0)}async import(){const e=await this.fileParserService.importFile();e&&await this._updateModel(e,m4(e))}};U3([n5],B3.prototype,"model",1),U3([n5],B3.prototype,"requestClient",1),B3=U3([F3(0,Y5),F3(1,xn),F3(2,tn),F3(3,aD),F3(4,wD),F3(5,oj),F3(6,l1),F3(7,S2)],B3);var j3=Object.defineProperty,V3=Object.getOwnPropertyDescriptor;let z3=class{constructor(e){C(this,"_serviceBrand"),C(this,"client"),C(this,"_loginPromise",null),this.client=new jt({type:Vt.Default,env:e.env,on:{success(){console.log("LOGIN SUCCESS")},fail(){console.log("LOGIN FAIL")}}})}login(){return this.client.login()}confirmLogin(){if(this._loginPromise)return this._loginPromise;const{client:e}=this;return this._loginPromise=new Promise((t=>{const n=U2({message:"登录过期，请重新登录。",placement:"top",type:"error",buttons:[{text:"去登录",handler:()=>e.login().then((()=>{this._loginPromise=null,n(),t(null)}))}]})})),this._loginPromise}logout(){return Promise.resolve()}};z3=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?V3(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&j3(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(0,E1)],z3);const K3=/^(GET|POST|PUT|DELETE|HEAD|OPTIONS|CONNECT|TRACE|PATCH)\s+/,W3=/:(\w+)/g,H3=["POST","PUT","PATCH","DELETE"];function $3(e){const t=wt.create({baseURL:e.baseURL,headers:e.headers,withCredentials:e.withCredentials});return t.interceptors.request.use((t=>{const n=(e.headerHandlers||[]).map((e=>e(t).then((e=>{Object.assign(t.headers,e)})).catch()));return Promise.all(n).then((()=>t))})),t.interceptors.response.use((e=>e),(t=>{const n=e.errorHandler?e.errorHandler(t):t;return Promise.reject(n)})),function(e,t){const n=Object.create(null);for(const i of DR(t)){const r=t[i];if("function"==typeof r){n[i]=r;continue}let o={},s=r;if("object"==typeof r){const e=r,{path:t}=e,n=x(e,["path"]);s=t,o=n}n[i]=(t,n)=>{const i=w({},t||{}),[r,a]=s.match(K3)||["GET ","GET"];let l=s.replace(r,"");const c=s.match(W3);c&&c.forEach((e=>{const t=e.replace(":","");Reflect.has(i,t)&&(l=l.replace(e,Reflect.get(i,t)),Reflect.deleteProperty(i,t))}));const d=H3.includes(a)?{data:i}:{params:i};return e.request(w(w(w({url:l,method:a.toLowerCase()},d),o),n))}}return n}(t,e.apis)}var q3=Object.defineProperty,Y3=Object.getOwnPropertyDescriptor;let G3=class{constructor(e){C(this,"_serviceBrand"),C(this,"authClient"),C(this,"clients",new WeakMap),this.instantiationService=e,this.authClient=e.createInstance(z3)}getClient(e){let t=this.clients.get(e);return t||(t=$3(e),this.clients.set(e,t)),t}};G3=((e,t,n,i)=>{for(var r,o=i>1?void 0:i?Y3(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i?r(t,n,o):r(o))||o);return i&&o&&q3(t,n,o),o})([((e,t)=>(n,i)=>t(n,i,e))(0,tn)],G3);const X3=pD((async()=>(await fetch("https://cdn.dancf.com/fe-assets/20220608/iliad-runtime/dist/179606fe0bc6eebe7d777432a319bdf7.json").then((e=>e.json())).catch((e=>(console.error(e),Promise.resolve([]))))).filter((e=>"normal"===e.content.style))));var J3,Q3,Z3,e8;(Q3=J3||(J3={})).En="en",Q3.Ja="ja",Q3.Ko="ko",Q3.Zh="zh",Q3.ZhTW="zh-TW",(e8=Z3||(Z3={})).Italic="italic",e8.Normal="normal";class t8{async provide(){const e=await fetch("https://st0.dancf.com/package/npm/gaodingx/widgets-config/0.0.1/widgets.json").then((e=>e.json())),t=await fetch("https://st0.dancf.com/package/npm/huaban/widgets-config/0.0.1/widgets.json").then((e=>e.json()));return e.concat(t)}}class n8{async provide(e,t){const{locale:n,freeOfCharge:i}=e,r=(await X3()).filter((e=>{const{content:{langs:t},authorization_id:r}=e;let o=!0;return Wt(n)||(o=t.includes(n)),Wt(i)||(o=12===r||26===r),o})).map((e=>{const{content:{alias:t,langs:n,lang:i},preview:r,name:o}=e;return{family:o,title:t,preview:r.url,locales:n||[i]}}));return(null==t?void 0:t.isCancellationRequested)?null:r}}var i8=Object.freeze(Object.defineProperty({__proto__:null,bootstrap:function(e){e.registerService(oj,$2),e.registerService(q2,u5),e.registerService(zQ,B3),e.registerService(Y5,x4),e.registerService(S2,G3);const t=e.fundamentalServices.get(E1);t.exportCustomArgv("market","MARKET_ORIGIN","//api-dev-market.gaoding.com",S1.dev),t.exportCustomArgv("market","GAODING_ORIGIN","http://www.dev.gaoding.com",S1.dev),t.exportCustomArgv("market","MARKET_ORIGIN","//api-fat-market.gaoding.com",S1.fat),t.exportCustomArgv("market","GAODING_ORIGIN","https://fat.gaoding.com",S1.fat),t.exportCustomArgv("market","MARKET_ORIGIN","//api-stage-market.gaoding.com",S1.stage),t.exportCustomArgv("market","GAODING_ORIGIN","https://stage.gaoding.com",S1.stage),t.exportCustomArgv("market","MARKET_ORIGIN","//api-market.gaoding.com",S1.prod),t.exportCustomArgv("market","GAODING_ORIGIN","https://www.gaoding.com",S1.prod),function(e){const t=e.fundamentalServices.get(oF);t.registerFontOptionProvider(new n8),t.registerComponentOptionProvider(new t8)}(e)},mount:function(e){const t=e.services.get(oj),n=e.services.get(q2),i=e.services.get(zQ),r=e.services.get(Y5),o=e.services.get(l1);o4=o.instance,i.init(),window.services={fileStorageService:t,outputService:n,recordService:i,fileParserService:r}}},Symbol.toStringTag,{value:"Module"}));function r8(e){return`url(${e})`}class o8{async provideFontResource(e,t){const{family:n,chars:i}=e,r=await X3();const o=r.map((e=>{const{content:t}=e;return{family:e.name,src:t.ttf}})).find((e=>e.family===n));return t.isCancellationRequested?Promise.resolve(null):o?Promise.resolve(function(e,t){const{src:n}=e;let i=r8(n);if((null==t?void 0:t.length)&&t.length<500){const e=new URLSearchParams;e.append("content",t.join("")),e.append("url",n),i=r8(`https://fonter.dancf.com/subset?${e.toString()}`)}return b(w({},e),{src:i})}(o,i)):Promise.resolve(null)}}var s8=Object.freeze(Object.defineProperty({__proto__:null,mount:function(e){e.invokeFunction((e=>e.get(O1))).registerFontResourceProvider(new o8)}},Symbol.toStringTag,{value:"Module"}));const a8=[i8,s8],l8=new on,c8=new class extends vD{constructor(){super(),C(this,"_phase",Cn.Starting),C(this,"windowToCloseRequest",new Set),C(this,"oneTimeListenerTokenGenerator",0),C(this,"windowCounter",0),C(this,"phaseWhen",new Map)}get phase(){return this._phase}set phase(e){if(e<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===e)return;this._phase=e;const t=this.phaseWhen.get(this._phase);t&&(t.open(),this.phaseWhen.delete(this._phase))}async when(e){if(e<=this._phase)return;let t=this.phaseWhen.get(e);t||(t=new ln,this.phaseWhen.set(e,t)),await t.wait()}};l8.set(xn,c8),l8.set(b1,new class extends k1{constructor(e=2){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=0&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=1&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=2&&console.log("%c INFO","color: #33f",e,...t)}warn(e,...t){this.getLevel()<=3&&console.log("%c WARN","color: #993",e,...t)}error(e,...t){this.getLevel()<=4&&console.log("%c  ERR","color: #f33",e,...t)}critical(e,...t){this.getLevel()<=5&&console.log("%cCRITI","background: #f33; color: white",e,...t)}dispose(){}flush(){}}(x1.Info)),l8.set(l1,new u1),l8.set(E1,new class{constructor(){C(this,"_serviceBrand"),C(this,"store",[])}get env(){return{}.VITE_ENV||"dev"}getCustomArgv(e,t,n=this.env){const i=this.store.find((i=>i.scope===e&&i.key===t&&i.env===n));return null==i?void 0:i.value}exportCustomArgv(e,t,n,i){const r=this.getStored(e,t,i);r?r.value=n:this.store.push({scope:e,env:i,key:t,value:n})}getStored(e,t,n){return this.store.find((i=>i.scope===e&&i.key===t&&i.env===n))}}),l8.set(U1,new zt(class extends vD{constructor(){super(),C(this,"configuration"),this.configuration=new q1(new Y1)}getValue(e){const t="string"==typeof e?e:void 0;return this.configuration.getValue(t)}async updateValue(e,t){const n=this.deriveConfigurationTarget(e,t);return n?this.writeConfigurationValue(e,t,n):Promise.resolve(null)}inspect(e){return this.configuration.inspect(e)}deriveConfigurationTarget(e,t){if(void 0===t)return;return RR(t,this.inspect(e).value)?void 0:F1.USER}writeConfigurationValue(e,t,n){if(n===F1.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(n===F1.MEMORY)return this.configuration.updateValue(e,t),Promise.resolve(null);throw new Error("500")}})),l8.set(gZ,new zt(class extends vD{constructor(e=new G1){super(),C(this,"_onUndo",this._register(new w1)),C(this,"onUndo",this._onUndo.event),C(this,"_onRedo",this._register(new w1)),C(this,"onRedo",this._onUndo.event),C(this,"editStack"),this._register(this.editStack=e)}test_getEditStack(){return this.editStack}push(e){this.editStack.push(e)}pop(){this.editStack.pop()}amend(e){return this.editStack.amend(e)}canUndo(){return this.editStack.hasPastElements()}undo(){const e=this.editStack.getClosestPastElement();e&&(this.editStack.moveBackward(e),e.undo(),this._onUndo.fire())}canRedo(){return this.editStack.hasFutureElements()}redo(){const e=this.editStack.getClosestFutureElement();e&&(this.editStack.moveForward(e),e.redo(),this._onRedo.fire())}})),l8.set(eU,new zt(y2,[document.body])),l8.set(aD,new zt(class extends r2{constructor(){super(0),C(this,"_lastContextId"),C(this,"_contexts",new Map),this._lastContextId=0;const e=new t2(this._myContextId);this._contexts.set(this._myContextId,e)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._contexts.clear()}getContextValuesContainer(e){return this._isDisposed?Z1.INSTANCE:this._contexts.get(e)||Z1.INSTANCE}})),l8.set(wD,new zt(x2)),l8.set(O1,new class extends vD{constructor(){super(...arguments),C(this,"_imageLoadingBarrier",new Map),C(this,"_fontResourceProviders",new Set),C(this,"_imageCache",new Map)}dispose(){super.dispose(),this._imageLoadingBarrier.clear(),this._fontResourceProviders.clear(),this._imageCache.clear()}getPlaceHolderImage(e,t){const n=new Blob([`<svg width="${e}" height="${t}" xmlns="http://www.w3.org/2000/svg"><circle cx="0" cy="0" r="1" opacity="0" /></svg>`],{type:"image/svg+xml"}),i=URL.createObjectURL(n);return{url:i,dispose(){URL.revokeObjectURL(i)}}}loadImage(e){if(!this._imageLoadingBarrier.has(e)){const t=new ln;fetch(e).then((e=>e.blob())).then((n=>{const i=new FileReader;i.onloadend=()=>{const n=i.result;this._imageCache.set(e,n),t.open();document.createElement("img").src=n},i.onerror=()=>{console.log("500")},i.readAsDataURL(n)})),this._imageLoadingBarrier.set(e,t)}return this._imageLoadingBarrier.get(e).wait()}getImageCache(e){return this._imageCache.get(e)||""}registerFontResourceProvider(e){if(this._fontResourceProviders.has(e))throw new Error("400");return this._fontResourceProviders.add(e),mD((()=>this._fontResourceProviders.delete(e)))}async queryFontResource(e,t){const n=[];for(const i of this._fontResourceProviders)n.push(i.provideFontResource(e,t));return(await Promise.all(n)).filter((e=>!!e))}}),l8.set(oF,new class{constructor(){C(this,"_serviceBrand"),C(this,"componentProvider",new Set),C(this,"fontOptionProvider",new Set)}registerComponentOptionProvider(e){return this.componentProvider.add(e),mD((()=>this.componentProvider.delete(e)))}getComponents(e,t){const n=[],i=[];for(const r of this.componentProvider)n.push(r.provide(e,t).then((e=>{Yt(e)&&i.push(...e)})));return Promise.allSettled(n).then((()=>i))}registerFontOptionProvider(e){return this.fontOptionProvider.add(e),mD((()=>this.fontOptionProvider.delete(e)))}getFonts(e,t){const n=[],i=[];for(const r of this.fontOptionProvider)n.push(r.provide(e,t).then((e=>{Yt(e)&&i.push(...e)})));return Promise.allSettled(n).then((()=>i))}});const d8=new _n(l8),u8=d8.createInstance(Nn);var h8,p8;a8.forEach((e=>{$t(e.bootstrap)&&e.bootstrap(u8)})),u8.initServices(),c8.phase=Cn.Bootstraped,h8=document.querySelector("#root"),p8=d8,dt.render(k(h1,{instantiationService:p8}),h8),c8.when(Cn.EditorCreated).then((()=>{a8.forEach((e=>{$t(e.mount)&&e.mount(u8)})),c8.phase=Cn.ExtensionActivated}));
